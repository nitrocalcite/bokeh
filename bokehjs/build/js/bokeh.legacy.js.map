{"version":3,"sources":["@@\\build\\js\\lib\\legacy.js","@@\\node_modules\\tslib\\tslib.es6.js","@@\\build\\js\\lib\\polyfill.js","@@\\node_modules\\es5-ext\\object\\assign\\implement.js","@@\\node_modules\\es5-ext\\object\\assign\\is-implemented.js","@@\\node_modules\\es5-ext\\object\\assign\\shim.js","@@\\node_modules\\es5-ext\\object\\keys\\index.js","@@\\node_modules\\es5-ext\\object\\keys\\is-implemented.js","@@\\node_modules\\es5-ext\\object\\keys\\shim.js","@@\\node_modules\\es5-ext\\object\\is-value.js","@@\\node_modules\\es5-ext\\function\\noop.js","@@\\node_modules\\es5-ext\\object\\valid-value.js","@@\\node_modules\\es5-ext\\object\\entries\\implement.js","@@\\node_modules\\es5-ext\\object\\entries\\is-implemented.js","@@\\node_modules\\es5-ext\\object\\entries\\shim.js","@@\\node_modules\\es5-ext\\number\\is-integer\\implement.js","@@\\node_modules\\es5-ext\\number\\is-integer\\is-implemented.js","@@\\node_modules\\es5-ext\\number\\is-integer\\shim.js","@@\\node_modules\\es5-ext\\string\\#\\repeat\\implement.js","@@\\node_modules\\es5-ext\\string\\#\\repeat\\is-implemented.js","@@\\node_modules\\es5-ext\\string\\#\\repeat\\shim.js","@@\\node_modules\\es5-ext\\number\\to-integer.js","@@\\node_modules\\es5-ext\\math\\sign\\index.js","@@\\node_modules\\es5-ext\\math\\sign\\is-implemented.js","@@\\node_modules\\es5-ext\\math\\sign\\shim.js","@@\\node_modules\\es5-ext\\array\\from\\implement.js","@@\\node_modules\\es5-ext\\array\\from\\is-implemented.js","@@\\node_modules\\es5-ext\\array\\from\\shim.js","@@\\node_modules\\es6-symbol\\index.js","@@\\node_modules\\es6-symbol\\is-implemented.js","@@\\node_modules\\ext\\global-this\\index.js","@@\\node_modules\\ext\\global-this\\is-implemented.js","@@\\node_modules\\ext\\global-this\\implementation.js","@@\\node_modules\\es6-symbol\\polyfill.js","@@\\node_modules\\d\\index.js","@@\\node_modules\\type\\value\\is.js","@@\\node_modules\\type\\plain-function\\is.js","@@\\node_modules\\type\\function\\is.js","@@\\node_modules\\type\\prototype\\is.js","@@\\node_modules\\type\\object\\is.js","@@\\node_modules\\es5-ext\\object\\assign\\index.js","@@\\node_modules\\es5-ext\\object\\normalize-options.js","@@\\node_modules\\es5-ext\\string\\#\\contains\\index.js","@@\\node_modules\\es5-ext\\string\\#\\contains\\is-implemented.js","@@\\node_modules\\es5-ext\\string\\#\\contains\\shim.js","@@\\node_modules\\es6-symbol\\validate-symbol.js","@@\\node_modules\\es6-symbol\\is-symbol.js","@@\\node_modules\\es6-symbol\\lib\\private\\generate-name.js","@@\\node_modules\\es6-symbol\\lib\\private\\setup\\standard-symbols.js","@@\\node_modules\\es6-symbol\\lib\\private\\setup\\symbol-registry.js","@@\\node_modules\\es5-ext\\function\\is-arguments.js","@@\\node_modules\\es5-ext\\function\\is-function.js","@@\\node_modules\\es5-ext\\number\\to-pos-integer.js","@@\\node_modules\\es5-ext\\object\\valid-callable.js","@@\\node_modules\\es5-ext\\string\\is-string.js","@@\\node_modules\\es5-ext\\array\\#\\fill\\implement.js","@@\\node_modules\\es5-ext\\array\\#\\fill\\is-implemented.js","@@\\node_modules\\es5-ext\\array\\#\\fill\\shim.js","@@\\node_modules\\es5-ext\\math\\log10\\implement.js","@@\\node_modules\\es5-ext\\math\\log10\\is-implemented.js","@@\\node_modules\\es5-ext\\math\\log10\\shim.js","@@\\node_modules\\es5-ext\\math\\log1p\\implement.js","@@\\node_modules\\es5-ext\\math\\log1p\\is-implemented.js","@@\\node_modules\\es5-ext\\math\\log1p\\shim.js","@@\\node_modules\\es6-set\\implement.js","@@\\node_modules\\es6-set\\is-implemented.js","@@\\node_modules\\es5-ext\\global.js","@@\\node_modules\\es6-set\\polyfill.js","@@\\node_modules\\es5-ext\\array\\#\\clear.js","@@\\node_modules\\es5-ext\\array\\#\\e-index-of.js","@@\\node_modules\\es5-ext\\number\\is-nan\\index.js","@@\\node_modules\\es5-ext\\number\\is-nan\\is-implemented.js","@@\\node_modules\\es5-ext\\number\\is-nan\\shim.js","@@\\node_modules\\es5-ext\\object\\set-prototype-of\\index.js","@@\\node_modules\\es5-ext\\object\\set-prototype-of\\is-implemented.js","@@\\node_modules\\es5-ext\\object\\set-prototype-of\\shim.js","@@\\node_modules\\es5-ext\\object\\is-object.js","@@\\node_modules\\es5-ext\\object\\create.js","@@\\node_modules\\event-emitter\\index.js","@@\\node_modules\\es6-iterator\\valid-iterable.js","@@\\node_modules\\es6-iterator\\is-iterable.js","@@\\node_modules\\es6-iterator\\for-of.js","@@\\node_modules\\es6-iterator\\get.js","@@\\node_modules\\es6-iterator\\array.js","@@\\node_modules\\es6-iterator\\index.js","@@\\node_modules\\d\\auto-bind.js","@@\\node_modules\\type\\value\\ensure.js","@@\\node_modules\\type\\lib\\resolve-exception.js","@@\\node_modules\\type\\string\\coerce.js","@@\\node_modules\\type\\lib\\to-short-string.js","@@\\node_modules\\type\\lib\\safe-to-string.js","@@\\node_modules\\type\\plain-function\\ensure.js","@@\\node_modules\\es5-ext\\object\\copy.js","@@\\node_modules\\es5-ext\\array\\from\\index.js","@@\\node_modules\\es5-ext\\object\\map.js","@@\\node_modules\\es5-ext\\object\\for-each.js","@@\\node_modules\\es5-ext\\object\\_iterate.js","@@\\node_modules\\es6-iterator\\string.js","@@\\node_modules\\es6-set\\lib\\iterator.js","@@\\node_modules\\es6-set\\is-native-implemented.js","@@\\node_modules\\es6-map\\implement.js","@@\\node_modules\\es6-map\\is-implemented.js","@@\\node_modules\\es6-map\\polyfill.js","@@\\node_modules\\es6-map\\lib\\iterator.js","@@\\node_modules\\es6-map\\lib\\iterator-kinds.js","@@\\node_modules\\es5-ext\\object\\primitive-set.js","@@\\node_modules\\es6-map\\is-native-implemented.js","@@\\node_modules\\es6-weak-map\\implement.js","@@\\node_modules\\es6-weak-map\\is-implemented.js","@@\\node_modules\\es6-weak-map\\polyfill.js","@@\\node_modules\\es5-ext\\object\\valid-object.js","@@\\node_modules\\es5-ext\\string\\random-uniq.js","@@\\node_modules\\es6-weak-map\\is-native-implemented.js","@@\\node_modules\\es6-symbol\\implement.js","@@\\node_modules\\es6-promise\\auto.js","@@\\node_modules\\es6-promise\\dist\\es6-promise.js","@@\\build\\js\\lib\\main.js","@@\\build\\js\\lib\\index.js","@@\\build\\js\\lib\\version.js","@@\\build\\js\\lib\\embed\\index.js","@@\\build\\js\\lib\\document\\index.js","@@\\build\\js\\lib\\document\\document.js","@@\\build\\js\\lib\\base.js","@@\\build\\js\\lib\\core\\util\\types.js","@@\\build\\js\\lib\\core\\util\\array.js","@@\\build\\js\\lib\\core\\util\\math.js","@@\\build\\js\\lib\\core\\util\\assert.js","@@\\build\\js\\lib\\core\\util\\arrayable.js","@@\\build\\js\\lib\\core\\util\\object.js","@@\\build\\js\\lib\\core\\has_props.js","@@\\build\\js\\lib\\core\\signaling.js","@@\\build\\js\\lib\\core\\util\\callback.js","@@\\build\\js\\lib\\core\\util\\refs.js","@@\\build\\js\\lib\\core\\properties.js","@@\\build\\js\\lib\\core\\logging.js","@@\\build\\js\\lib\\core\\enums.js","@@\\build\\js\\lib\\core\\kinds.js","@@\\build\\js\\lib\\core\\util\\color.js","@@\\build\\js\\lib\\core\\util\\svg_colors.js","@@\\build\\js\\lib\\core\\types.js","@@\\build\\js\\lib\\core\\util\\eq.js","@@\\build\\js\\lib\\core\\util\\data_structures.js","@@\\build\\js\\lib\\core\\settings.js","@@\\build\\js\\lib\\core\\property_mixins.js","@@\\build\\js\\lib\\core\\util\\string.js","@@\\build\\js\\lib\\core\\util\\ndarray.js","@@\\build\\js\\lib\\core\\util\\serialization.js","@@\\build\\js\\lib\\core\\util\\compat.js","@@\\build\\js\\lib\\core\\util\\pretty.js","@@\\build\\js\\lib\\models\\index.js","@@\\build\\js\\lib\\models\\annotations\\index.js","@@\\build\\js\\lib\\models\\annotations\\annotation.js","@@\\build\\js\\lib\\core\\util\\projections.js","@@\\node_modules\\proj4\\lib\\core.js","@@\\node_modules\\proj4\\lib\\Proj.js","@@\\node_modules\\proj4\\lib\\parseCode.js","@@\\node_modules\\proj4\\lib\\defs.js","@@\\node_modules\\proj4\\lib\\global.js","@@\\node_modules\\proj4\\lib\\projString.js","@@\\node_modules\\proj4\\lib\\constants\\values.js","@@\\node_modules\\proj4\\lib\\constants\\PrimeMeridian.js","@@\\node_modules\\proj4\\lib\\constants\\units.js","@@\\node_modules\\proj4\\lib\\match.js","@@\\node_modules\\wkt-parser\\index.js","@@\\node_modules\\wkt-parser\\parser.js","@@\\node_modules\\wkt-parser\\process.js","@@\\node_modules\\proj4\\lib\\extend.js","@@\\node_modules\\proj4\\lib\\projections.js","@@\\node_modules\\proj4\\lib\\projections\\merc.js","@@\\node_modules\\proj4\\lib\\common\\msfnz.js","@@\\node_modules\\proj4\\lib\\common\\adjust_lon.js","@@\\node_modules\\proj4\\lib\\common\\sign.js","@@\\node_modules\\proj4\\lib\\common\\tsfnz.js","@@\\node_modules\\proj4\\lib\\common\\phi2z.js","@@\\node_modules\\proj4\\lib\\projections\\longlat.js","@@\\node_modules\\proj4\\lib\\deriveConstants.js","@@\\node_modules\\proj4\\lib\\constants\\Ellipsoid.js","@@\\node_modules\\proj4\\lib\\constants\\Datum.js","@@\\node_modules\\proj4\\lib\\datum.js","@@\\node_modules\\proj4\\lib\\transform.js","@@\\node_modules\\proj4\\lib\\datum_transform.js","@@\\node_modules\\proj4\\lib\\datumUtils.js","@@\\node_modules\\proj4\\lib\\adjust_axis.js","@@\\node_modules\\proj4\\lib\\common\\toPoint.js","@@\\node_modules\\proj4\\lib\\checkSanity.js","@@\\build\\js\\lib\\models\\renderers\\renderer.js","@@\\build\\js\\lib\\core\\view.js","@@\\build\\js\\lib\\core\\dom.js","@@\\build\\js\\lib\\styles\\root.css.js","@@\\build\\js\\lib\\core\\visuals.js","@@\\build\\js\\lib\\core\\util\\svg.js","@@\\build\\js\\lib\\core\\util\\affine.js","@@\\build\\js\\lib\\models\\canvas\\canvas.js","@@\\build\\js\\lib\\core\\dom_view.js","@@\\build\\js\\lib\\core\\util\\bbox.js","@@\\build\\js\\lib\\core\\util\\canvas.js","@@\\build\\js\\lib\\model.js","@@\\build\\js\\lib\\models\\canvas\\coordinates.js","@@\\build\\js\\lib\\models\\annotations\\arrow.js","@@\\build\\js\\lib\\models\\annotations\\arrow_head.js","@@\\build\\js\\lib\\models\\sources\\column_data_source.js","@@\\build\\js\\lib\\models\\sources\\columnar_data_source.js","@@\\build\\js\\lib\\models\\sources\\data_source.js","@@\\build\\js\\lib\\models\\selections\\selection.js","@@\\build\\js\\lib\\core\\selection_manager.js","@@\\build\\js\\lib\\models\\renderers\\glyph_renderer.js","@@\\build\\js\\lib\\models\\renderers\\data_renderer.js","@@\\build\\js\\lib\\models\\glyphs\\line.js","@@\\build\\js\\lib\\models\\glyphs\\xy_glyph.js","@@\\build\\js\\lib\\models\\glyphs\\glyph.js","@@\\build\\js\\lib\\core\\util\\spatial.js","@@\\node_modules\\flatbush\\index.js","@@\\node_modules\\flatqueue\\index.mjs","@@\\build\\js\\lib\\models\\ranges\\factor_range.js","@@\\build\\js\\lib\\models\\ranges\\range.js","@@\\build\\js\\lib\\models\\glyphs\\utils.js","@@\\build\\js\\lib\\core\\hittest.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\line.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\utils\\index.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\utils\\program.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\utils\\buffer.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\utils\\texture.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\base.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\line.vert.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\line.frag.js","@@\\build\\js\\lib\\models\\glyphs\\patch.js","@@\\build\\js\\lib\\models\\glyphs\\harea.js","@@\\build\\js\\lib\\models\\glyphs\\area.js","@@\\build\\js\\lib\\models\\glyphs\\varea.js","@@\\build\\js\\lib\\models\\sources\\cds_view.js","@@\\build\\js\\lib\\core\\build_views.js","@@\\build\\js\\lib\\models\\renderers\\graph_renderer.js","@@\\build\\js\\lib\\models\\graphs\\graph_hit_test_policy.js","@@\\build\\js\\lib\\models\\selections\\interaction_policy.js","@@\\build\\js\\lib\\core\\util\\typed_array.js","@@\\build\\js\\lib\\core\\util\\set.js","@@\\build\\js\\lib\\document\\events.js","@@\\build\\js\\lib\\models\\annotations\\band.js","@@\\build\\js\\lib\\models\\annotations\\upper_lower.js","@@\\build\\js\\lib\\models\\annotations\\box_annotation.js","@@\\build\\js\\lib\\models\\annotations\\color_bar.js","@@\\build\\js\\lib\\models\\tickers\\basic_ticker.js","@@\\build\\js\\lib\\models\\tickers\\adaptive_ticker.js","@@\\build\\js\\lib\\models\\tickers\\continuous_ticker.js","@@\\build\\js\\lib\\models\\tickers\\ticker.js","@@\\build\\js\\lib\\models\\formatters\\basic_tick_formatter.js","@@\\build\\js\\lib\\models\\formatters\\tick_formatter.js","@@\\build\\js\\lib\\models\\mappers\\index.js","@@\\build\\js\\lib\\models\\mappers\\categorical_color_mapper.js","@@\\build\\js\\lib\\models\\mappers\\categorical_mapper.js","@@\\build\\js\\lib\\models\\mappers\\color_mapper.js","@@\\build\\js\\lib\\models\\mappers\\mapper.js","@@\\build\\js\\lib\\models\\transforms\\transform.js","@@\\build\\js\\lib\\models\\mappers\\categorical_marker_mapper.js","@@\\build\\js\\lib\\models\\mappers\\categorical_pattern_mapper.js","@@\\build\\js\\lib\\models\\mappers\\continuous_color_mapper.js","@@\\build\\js\\lib\\models\\mappers\\linear_color_mapper.js","@@\\build\\js\\lib\\models\\mappers\\log_color_mapper.js","@@\\build\\js\\lib\\models\\mappers\\scanning_color_mapper.js","@@\\build\\js\\lib\\models\\mappers\\eqhist_color_mapper.js","@@\\build\\js\\lib\\models\\scales\\linear_scale.js","@@\\build\\js\\lib\\models\\scales\\continuous_scale.js","@@\\build\\js\\lib\\models\\scales\\scale.js","@@\\build\\js\\lib\\models\\transforms\\index.js","@@\\build\\js\\lib\\models\\transforms\\customjs_transform.js","@@\\build\\js\\lib\\models\\transforms\\dodge.js","@@\\build\\js\\lib\\models\\transforms\\range_transform.js","@@\\build\\js\\lib\\models\\transforms\\interpolator.js","@@\\build\\js\\lib\\models\\transforms\\jitter.js","@@\\build\\js\\lib\\models\\transforms\\linear_interpolator.js","@@\\build\\js\\lib\\models\\transforms\\step_interpolator.js","@@\\build\\js\\lib\\models\\scales\\linear_interpolation_scale.js","@@\\build\\js\\lib\\models\\scales\\log_scale.js","@@\\build\\js\\lib\\models\\ranges\\range1d.js","@@\\build\\js\\lib\\core\\util\\text.js","@@\\build\\js\\lib\\models\\annotations\\label.js","@@\\build\\js\\lib\\models\\annotations\\text_annotation.js","@@\\build\\js\\lib\\models\\annotations\\label_set.js","@@\\build\\js\\lib\\models\\annotations\\legend.js","@@\\build\\js\\lib\\models\\annotations\\legend_item.js","@@\\build\\js\\lib\\core\\vectorization.js","@@\\build\\js\\lib\\models\\annotations\\poly_annotation.js","@@\\build\\js\\lib\\models\\annotations\\slope.js","@@\\build\\js\\lib\\models\\annotations\\span.js","@@\\build\\js\\lib\\models\\annotations\\title.js","@@\\build\\js\\lib\\models\\annotations\\toolbar_panel.js","@@\\build\\js\\lib\\models\\annotations\\tooltip.js","@@\\build\\js\\lib\\styles\\tooltips.js","@@\\build\\js\\lib\\styles\\mixins.js","@@\\build\\js\\lib\\styles\\tooltips.css.js","@@\\build\\js\\lib\\models\\annotations\\whisker.js","@@\\build\\js\\lib\\models\\axes\\index.js","@@\\build\\js\\lib\\models\\axes\\axis.js","@@\\build\\js\\lib\\models\\renderers\\guide_renderer.js","@@\\build\\js\\lib\\models\\axes\\categorical_axis.js","@@\\build\\js\\lib\\models\\tickers\\categorical_ticker.js","@@\\build\\js\\lib\\models\\formatters\\categorical_tick_formatter.js","@@\\build\\js\\lib\\models\\axes\\continuous_axis.js","@@\\build\\js\\lib\\models\\axes\\datetime_axis.js","@@\\build\\js\\lib\\models\\axes\\linear_axis.js","@@\\build\\js\\lib\\models\\formatters\\datetime_tick_formatter.js","@@\\node_modules\\timezone\\index.js","@@\\build\\js\\lib\\core\\util\\templating.js","@@\\node_modules\\@bokeh\\numbro\\numbro.js","@@\\node_modules\\sprintf-js\\src\\sprintf.js","@@\\build\\js\\lib\\models\\tickers\\datetime_ticker.js","@@\\build\\js\\lib\\models\\tickers\\composite_ticker.js","@@\\build\\js\\lib\\models\\tickers\\days_ticker.js","@@\\build\\js\\lib\\models\\tickers\\single_interval_ticker.js","@@\\build\\js\\lib\\models\\tickers\\util.js","@@\\build\\js\\lib\\models\\tickers\\months_ticker.js","@@\\build\\js\\lib\\models\\tickers\\years_ticker.js","@@\\build\\js\\lib\\models\\axes\\log_axis.js","@@\\build\\js\\lib\\models\\formatters\\log_tick_formatter.js","@@\\build\\js\\lib\\models\\tickers\\log_ticker.js","@@\\build\\js\\lib\\models\\axes\\mercator_axis.js","@@\\build\\js\\lib\\models\\formatters\\mercator_tick_formatter.js","@@\\build\\js\\lib\\models\\tickers\\mercator_ticker.js","@@\\build\\js\\lib\\models\\callbacks\\index.js","@@\\build\\js\\lib\\models\\callbacks\\customjs.js","@@\\build\\js\\lib\\models\\callbacks\\callback.js","@@\\build\\js\\lib\\models\\callbacks\\open_url.js","@@\\build\\js\\lib\\models\\canvas\\index.js","@@\\build\\js\\lib\\models\\canvas\\cartesian_frame.js","@@\\build\\js\\lib\\models\\scales\\categorical_scale.js","@@\\build\\js\\lib\\models\\ranges\\data_range1d.js","@@\\build\\js\\lib\\models\\ranges\\data_range.js","@@\\build\\js\\lib\\core\\layout\\index.js","@@\\build\\js\\lib\\core\\layout\\types.js","@@\\build\\js\\lib\\core\\layout\\layoutable.js","@@\\build\\js\\lib\\core\\layout\\alignments.js","@@\\build\\js\\lib\\core\\layout\\grid.js","@@\\build\\js\\lib\\core\\layout\\html.js","@@\\build\\js\\lib\\models\\expressions\\index.js","@@\\build\\js\\lib\\models\\expressions\\expression.js","@@\\build\\js\\lib\\models\\expressions\\stack.js","@@\\build\\js\\lib\\models\\expressions\\cumsum.js","@@\\build\\js\\lib\\models\\filters\\index.js","@@\\build\\js\\lib\\models\\filters\\boolean_filter.js","@@\\build\\js\\lib\\models\\filters\\filter.js","@@\\build\\js\\lib\\models\\filters\\customjs_filter.js","@@\\build\\js\\lib\\models\\filters\\group_filter.js","@@\\build\\js\\lib\\models\\filters\\index_filter.js","@@\\build\\js\\lib\\models\\formatters\\index.js","@@\\build\\js\\lib\\models\\formatters\\func_tick_formatter.js","@@\\build\\js\\lib\\models\\formatters\\numeral_tick_formatter.js","@@\\build\\js\\lib\\models\\formatters\\printf_tick_formatter.js","@@\\build\\js\\lib\\models\\glyphs\\index.js","@@\\build\\js\\lib\\models\\glyphs\\annular_wedge.js","@@\\build\\js\\lib\\models\\glyphs\\annulus.js","@@\\build\\js\\lib\\models\\glyphs\\arc.js","@@\\build\\js\\lib\\models\\glyphs\\bezier.js","@@\\build\\js\\lib\\models\\glyphs\\circle.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\markers.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\markers.vert.js","@@\\build\\js\\lib\\models\\glyphs\\webgl\\markers.frag.js","@@\\build\\js\\lib\\models\\glyphs\\center_rotatable.js","@@\\build\\js\\lib\\models\\glyphs\\ellipse.js","@@\\build\\js\\lib\\models\\glyphs\\ellipse_oval.js","@@\\build\\js\\lib\\models\\glyphs\\hbar.js","@@\\build\\js\\lib\\models\\glyphs\\box.js","@@\\build\\js\\lib\\models\\glyphs\\hex_tile.js","@@\\build\\js\\lib\\models\\glyphs\\image.js","@@\\build\\js\\lib\\models\\glyphs\\image_base.js","@@\\build\\js\\lib\\models\\glyphs\\image_rgba.js","@@\\build\\js\\lib\\models\\glyphs\\image_url.js","@@\\build\\js\\lib\\core\\util\\image.js","@@\\build\\js\\lib\\models\\glyphs\\multi_line.js","@@\\build\\js\\lib\\models\\glyphs\\multi_polygons.js","@@\\build\\js\\lib\\models\\glyphs\\oval.js","@@\\build\\js\\lib\\models\\glyphs\\patches.js","@@\\build\\js\\lib\\models\\glyphs\\quad.js","@@\\build\\js\\lib\\models\\glyphs\\quadratic.js","@@\\build\\js\\lib\\models\\glyphs\\ray.js","@@\\build\\js\\lib\\models\\glyphs\\rect.js","@@\\build\\js\\lib\\models\\glyphs\\segment.js","@@\\build\\js\\lib\\models\\glyphs\\step.js","@@\\build\\js\\lib\\models\\glyphs\\text.js","@@\\build\\js\\lib\\models\\glyphs\\vbar.js","@@\\build\\js\\lib\\models\\glyphs\\wedge.js","@@\\build\\js\\lib\\models\\graphs\\index.js","@@\\build\\js\\lib\\models\\graphs\\layout_provider.js","@@\\build\\js\\lib\\models\\graphs\\static_layout_provider.js","@@\\build\\js\\lib\\models\\grids\\index.js","@@\\build\\js\\lib\\models\\grids\\grid.js","@@\\build\\js\\lib\\models\\layouts\\index.js","@@\\build\\js\\lib\\models\\layouts\\box.js","@@\\build\\js\\lib\\models\\layouts\\layout_dom.js","@@\\build\\js\\lib\\styles\\root.js","@@\\build\\js\\lib\\models\\layouts\\column.js","@@\\build\\js\\lib\\models\\layouts\\grid_box.js","@@\\build\\js\\lib\\models\\layouts\\html_box.js","@@\\build\\js\\lib\\models\\layouts\\row.js","@@\\build\\js\\lib\\models\\layouts\\spacer.js","@@\\build\\js\\lib\\models\\layouts\\tabs.js","@@\\build\\js\\lib\\styles\\tabs.js","@@\\build\\js\\lib\\styles\\buttons.js","@@\\build\\js\\lib\\styles\\menus.js","@@\\build\\js\\lib\\styles\\buttons.css.js","@@\\build\\js\\lib\\styles\\menus.css.js","@@\\build\\js\\lib\\styles\\tabs.css.js","@@\\build\\js\\lib\\models\\layouts\\widget_box.js","@@\\build\\js\\lib\\models\\markers\\index.js","@@\\build\\js\\lib\\models\\markers\\defs.js","@@\\build\\js\\lib\\models\\markers\\marker.js","@@\\build\\js\\lib\\models\\markers\\scatter.js","@@\\build\\js\\lib\\models\\plots\\index.js","@@\\build\\js\\lib\\models\\plots\\gmap_plot.js","@@\\build\\js\\lib\\models\\plots\\plot.js","@@\\build\\js\\lib\\models\\tools\\toolbar.js","@@\\build\\js\\lib\\models\\tools\\inspectors\\inspect_tool.js","@@\\build\\js\\lib\\models\\tools\\button_tool.js","@@\\node_modules\\hammerjs\\hammer.js","@@\\build\\js\\lib\\models\\tools\\tool.js","@@\\build\\js\\lib\\styles\\toolbar.js","@@\\build\\js\\lib\\styles\\toolbar.css.js","@@\\build\\js\\lib\\styles\\icons.css.js","@@\\build\\js\\lib\\core\\util\\menus.js","@@\\build\\js\\lib\\core\\util\\iterator.js","@@\\build\\js\\lib\\models\\tools\\on_off_button.js","@@\\build\\js\\lib\\models\\tools\\toolbar_base.js","@@\\build\\js\\lib\\models\\tools\\gestures\\gesture_tool.js","@@\\build\\js\\lib\\models\\tools\\actions\\action_tool.js","@@\\build\\js\\lib\\models\\tools\\actions\\help_tool.js","@@\\build\\js\\lib\\styles\\icons.js","@@\\build\\js\\lib\\styles\\logo.js","@@\\build\\js\\lib\\styles\\logo.css.js","@@\\build\\js\\lib\\models\\plots\\plot_canvas.js","@@\\build\\js\\lib\\core\\bokeh_events.js","@@\\build\\js\\lib\\core\\ui_events.js","@@\\build\\js\\lib\\core\\util\\wheel.js","@@\\build\\js\\lib\\core\\util\\throttle.js","@@\\build\\js\\lib\\core\\layout\\border.js","@@\\build\\js\\lib\\core\\layout\\side_panel.js","@@\\build\\js\\lib\\models\\plots\\gmap_plot_canvas.js","@@\\build\\js\\lib\\models\\ranges\\index.js","@@\\build\\js\\lib\\models\\renderers\\index.js","@@\\build\\js\\lib\\models\\scales\\index.js","@@\\build\\js\\lib\\models\\selections\\index.js","@@\\build\\js\\lib\\models\\sources\\index.js","@@\\build\\js\\lib\\models\\sources\\server_sent_data_source.js","@@\\build\\js\\lib\\models\\sources\\web_data_source.js","@@\\build\\js\\lib\\models\\sources\\ajax_data_source.js","@@\\build\\js\\lib\\models\\sources\\geojson_data_source.js","@@\\build\\js\\lib\\models\\tickers\\index.js","@@\\build\\js\\lib\\models\\tickers\\fixed_ticker.js","@@\\build\\js\\lib\\models\\tiles\\index.js","@@\\build\\js\\lib\\models\\tiles\\bbox_tile_source.js","@@\\build\\js\\lib\\models\\tiles\\mercator_tile_source.js","@@\\build\\js\\lib\\models\\tiles\\tile_source.js","@@\\build\\js\\lib\\models\\tiles\\tile_utils.js","@@\\build\\js\\lib\\models\\tiles\\quadkey_tile_source.js","@@\\build\\js\\lib\\models\\tiles\\tile_renderer.js","@@\\build\\js\\lib\\models\\tiles\\wmts_tile_source.js","@@\\build\\js\\lib\\styles\\tiles.js","@@\\build\\js\\lib\\styles\\tiles.css.js","@@\\build\\js\\lib\\models\\tiles\\tms_tile_source.js","@@\\build\\js\\lib\\models\\textures\\index.js","@@\\build\\js\\lib\\models\\textures\\canvas_texture.js","@@\\build\\js\\lib\\models\\textures\\texture.js","@@\\build\\js\\lib\\models\\textures\\image_url_texture.js","@@\\build\\js\\lib\\models\\tools\\index.js","@@\\build\\js\\lib\\models\\tools\\actions\\custom_action.js","@@\\build\\js\\lib\\models\\tools\\actions\\redo_tool.js","@@\\build\\js\\lib\\models\\tools\\actions\\reset_tool.js","@@\\build\\js\\lib\\models\\tools\\actions\\save_tool.js","@@\\build\\js\\lib\\models\\tools\\actions\\undo_tool.js","@@\\build\\js\\lib\\models\\tools\\actions\\zoom_in_tool.js","@@\\build\\js\\lib\\models\\tools\\actions\\zoom_base_tool.js","@@\\build\\js\\lib\\core\\util\\zoom.js","@@\\build\\js\\lib\\models\\tools\\actions\\zoom_out_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\edit_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\box_edit_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\freehand_draw_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\point_draw_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\poly_draw_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\poly_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\poly_edit_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\box_select_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\select_tool.js","@@\\build\\js\\lib\\models\\tools\\util.js","@@\\build\\js\\lib\\models\\tools\\gestures\\box_zoom_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\lasso_select_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\poly_select_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\line_edit_tool.js","@@\\build\\js\\lib\\models\\tools\\edit\\line_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\pan_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\range_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\tap_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\wheel_pan_tool.js","@@\\build\\js\\lib\\models\\tools\\gestures\\wheel_zoom_tool.js","@@\\build\\js\\lib\\models\\tools\\inspectors\\crosshair_tool.js","@@\\build\\js\\lib\\models\\tools\\inspectors\\customjs_hover.js","@@\\build\\js\\lib\\models\\tools\\inspectors\\hover_tool.js","@@\\build\\js\\lib\\models\\tools\\tool_proxy.js","@@\\build\\js\\lib\\models\\tools\\toolbar_box.js","@@\\build\\js\\lib\\embed\\standalone.js","@@\\build\\js\\lib\\embed\\dom.js","@@\\build\\js\\lib\\embed\\server.js","@@\\build\\js\\lib\\client\\connection.js","@@\\build\\js\\lib\\protocol\\message.js","@@\\build\\js\\lib\\protocol\\receiver.js","@@\\build\\js\\lib\\client\\session.js","@@\\build\\js\\lib\\embed\\notebook.js","@@\\build\\js\\lib\\styles\\notebook.css.js","@@\\build\\js\\lib\\protocol\\index.js","@@\\build\\js\\lib\\testing.js","@@\\build\\js\\lib\\safely.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvBA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzGA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7DA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtEA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/jCA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3JA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChlCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACp2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjnBA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5rCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACheA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpBA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9uBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9PA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnfA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5wEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACz4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACndA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnLA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["/* legacy.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    require(2) /* ./polyfill */;\r\n    tslib_1.__exportStar(require(116) /* ./main */, exports);\r\n}\r\n","/* tslib\\tslib.es6.js */ function _(require, module, exports) {\r\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n    \r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n    \r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n            };\r\n        return extendStatics(d, b);\r\n    };\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n    exports.__extends = __extends;\r\n    exports.__assign = function () {\r\n        exports.__assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s)\r\n                    if (Object.prototype.hasOwnProperty.call(s, p))\r\n                        t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return exports.__assign.apply(this, arguments);\r\n    };\r\n    function __rest(s, e) {\r\n        var t = {};\r\n        for (var p in s)\r\n            if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n                t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    }\r\n    exports.__rest = __rest;\r\n    function __decorate(decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\r\n            r = Reflect.decorate(decorators, target, key, desc);\r\n        else\r\n            for (var i = decorators.length - 1; i >= 0; i--)\r\n                if (d = decorators[i])\r\n                    r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    }\r\n    exports.__decorate = __decorate;\r\n    function __param(paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); };\r\n    }\r\n    exports.__param = __param;\r\n    function __metadata(metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\")\r\n            return Reflect.metadata(metadataKey, metadataValue);\r\n    }\r\n    exports.__metadata = __metadata;\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) {\r\n                try {\r\n                    step(generator.next(value));\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            function rejected(value) {\r\n                try {\r\n                    step(generator[\"throw\"](value));\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n    exports.__awaiter = __awaiter;\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function () {\r\n                if (t[0] & 1)\r\n                    throw t[1];\r\n                return t[1];\r\n            }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f)\r\n                throw new TypeError(\"Generator is already executing.\");\r\n            while (_)\r\n                try {\r\n                    if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)\r\n                        return t;\r\n                    if (y = 0, t)\r\n                        op = [op[0] & 2, t.value];\r\n                    switch (op[0]) {\r\n                        case 0:\r\n                        case 1:\r\n                            t = op;\r\n                            break;\r\n                        case 4:\r\n                            _.label++;\r\n                            return { value: op[1], done: false };\r\n                        case 5:\r\n                            _.label++;\r\n                            y = op[1];\r\n                            op = [0];\r\n                            continue;\r\n                        case 7:\r\n                            op = _.ops.pop();\r\n                            _.trys.pop();\r\n                            continue;\r\n                        default:\r\n                            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\r\n                                _ = 0;\r\n                                continue;\r\n                            }\r\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\r\n                                _.label = op[1];\r\n                                break;\r\n                            }\r\n                            if (op[0] === 6 && _.label < t[1]) {\r\n                                _.label = t[1];\r\n                                t = op;\r\n                                break;\r\n                            }\r\n                            if (t && _.label < t[2]) {\r\n                                _.label = t[2];\r\n                                _.ops.push(op);\r\n                                break;\r\n                            }\r\n                            if (t[2])\r\n                                _.ops.pop();\r\n                            _.trys.pop();\r\n                            continue;\r\n                    }\r\n                    op = body.call(thisArg, _);\r\n                }\r\n                catch (e) {\r\n                    op = [6, e];\r\n                    y = 0;\r\n                }\r\n                finally {\r\n                    f = t = 0;\r\n                }\r\n            if (op[0] & 5)\r\n                throw op[1];\r\n            return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n    exports.__generator = __generator;\r\n    function __createBinding(o, m, k, k2) {\r\n        if (k2 === undefined)\r\n            k2 = k;\r\n        o[k2] = m[k];\r\n    }\r\n    exports.__createBinding = __createBinding;\r\n    function __exportStar(m, exports) {\r\n        for (var p in m)\r\n            if (p !== \"default\" && !exports.hasOwnProperty(p))\r\n                exports[p] = m[p];\r\n    }\r\n    exports.__exportStar = __exportStar;\r\n    function __values(o) {\r\n        var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n        if (m)\r\n            return m.call(o);\r\n        if (o && typeof o.length === \"number\")\r\n            return {\r\n                next: function () {\r\n                    if (o && i >= o.length)\r\n                        o = void 0;\r\n                    return { value: o && o[i++], done: !o };\r\n                }\r\n            };\r\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n    }\r\n    exports.__values = __values;\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m)\r\n            return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)\r\n                ar.push(r.value);\r\n        }\r\n        catch (error) {\r\n            e = { error: error };\r\n        }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"]))\r\n                    m.call(i);\r\n            }\r\n            finally {\r\n                if (e)\r\n                    throw e.error;\r\n            }\r\n        }\r\n        return ar;\r\n    }\r\n    exports.__read = __read;\r\n    function __spread() {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    }\r\n    exports.__spread = __spread;\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++)\r\n            s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    }\r\n    exports.__spreadArrays = __spreadArrays;\r\n    ;\r\n    function __await(v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    }\r\n    exports.__await = __await;\r\n    function __asyncGenerator(thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator)\r\n            throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) {\r\n            if (g[n])\r\n                i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); };\r\n        }\r\n        function resume(n, v) {\r\n            try {\r\n                step(g[n](v));\r\n            }\r\n            catch (e) {\r\n                settle(q[0][3], e);\r\n            }\r\n        }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) {\r\n            if (f(v), q.shift(), q.length)\r\n                resume(q[0][0], q[0][1]);\r\n        }\r\n    }\r\n    exports.__asyncGenerator = __asyncGenerator;\r\n    function __asyncDelegator(o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    }\r\n    exports.__asyncDelegator = __asyncDelegator;\r\n    function __asyncValues(o) {\r\n        if (!Symbol.asyncIterator)\r\n            throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function (v) { resolve({ value: v, done: d }); }, reject); }\r\n    }\r\n    exports.__asyncValues = __asyncValues;\r\n    function __makeTemplateObject(cooked, raw) {\r\n        if (Object.defineProperty) {\r\n            Object.defineProperty(cooked, \"raw\", { value: raw });\r\n        }\r\n        else {\r\n            cooked.raw = raw;\r\n        }\r\n        return cooked;\r\n    }\r\n    exports.__makeTemplateObject = __makeTemplateObject;\r\n    ;\r\n    function __importStar(mod) {\r\n        if (mod && mod.__esModule)\r\n            return mod;\r\n        var result = {};\r\n        if (mod != null)\r\n            for (var k in mod)\r\n                if (Object.hasOwnProperty.call(mod, k))\r\n                    result[k] = mod[k];\r\n        result.default = mod;\r\n        return result;\r\n    }\r\n    exports.__importStar = __importStar;\r\n    function __importDefault(mod) {\r\n        return (mod && mod.__esModule) ? mod : { default: mod };\r\n    }\r\n    exports.__importDefault = __importDefault;\r\n    function __classPrivateFieldGet(receiver, privateMap) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to get private field on non-instance\");\r\n        }\r\n        return privateMap.get(receiver);\r\n    }\r\n    exports.__classPrivateFieldGet = __classPrivateFieldGet;\r\n    function __classPrivateFieldSet(receiver, privateMap, value) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to set private field on non-instance\");\r\n        }\r\n        privateMap.set(receiver, value);\r\n        return value;\r\n    }\r\n    exports.__classPrivateFieldSet = __classPrivateFieldSet;\r\n}\r\n","/* polyfill.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    require(3) /* es5-ext/object/assign/implement */;\r\n    require(12) /* es5-ext/object/entries/implement */;\r\n    require(15) /* es5-ext/number/is-integer/implement */;\r\n    require(18) /* es5-ext/string/#/repeat/implement */;\r\n    require(25) /* es5-ext/array/from/implement */;\r\n    require(55) /* es5-ext/array/#/fill/implement */;\r\n    require(58) /* es5-ext/math/log10/implement */;\r\n    require(61) /* es5-ext/math/log1p/implement */;\r\n    require(64) /* es6-set/implement */;\r\n    require(100) /* es6-map/implement */;\r\n    require(107) /* es6-weak-map/implement */;\r\n    require(113) /* es6-symbol/implement */;\r\n    require(114) /* es6-promise/auto */;\r\n    if (typeof Object.is === \"undefined\") {\r\n        Object.is = function (a, b) {\r\n            if (a === b)\r\n                return a !== 0 || 1 / a === 1 / b;\r\n            else\r\n                return a !== a && b !== b;\r\n        };\r\n    }\r\n    if (typeof Object.values === \"undefined\") {\r\n        Object.values = function (obj) {\r\n            return Object.keys(obj).map(function (key) { return obj[key]; });\r\n        };\r\n    }\r\n    if (typeof Uint8Array.prototype.fill === \"undefined\") {\r\n        Uint8Array.prototype.fill = Array.prototype.fill;\r\n        Int8Array.prototype.fill = Array.prototype.fill;\r\n        Uint16Array.prototype.fill = Array.prototype.fill;\r\n        Int16Array.prototype.fill = Array.prototype.fill;\r\n        Uint32Array.prototype.fill = Array.prototype.fill;\r\n        Int32Array.prototype.fill = Array.prototype.fill;\r\n        Float32Array.prototype.fill = Array.prototype.fill;\r\n        Float64Array.prototype.fill = Array.prototype.fill; // lgtm [js/automatic-semicolon-insertion]\r\n    }\r\n    if (typeof Array.prototype[Symbol.iterator] === \"undefined\") {\r\n        function iterator() {\r\n            var i = 0;\r\n            var self = this;\r\n            return {\r\n                next: function () {\r\n                    var done = self.length <= i;\r\n                    var value = done ? undefined : self[i++];\r\n                    return { value: value, done: done };\r\n                },\r\n            };\r\n        }\r\n        (function () {\r\n            arguments.constructor.prototype[Symbol.iterator] = iterator;\r\n            Array.prototype[Symbol.iterator] = iterator;\r\n            Uint8Array.prototype[Symbol.iterator] = iterator;\r\n            Int8Array.prototype[Symbol.iterator] = iterator;\r\n            Uint16Array.prototype[Symbol.iterator] = iterator;\r\n            Int16Array.prototype[Symbol.iterator] = iterator;\r\n            Uint32Array.prototype[Symbol.iterator] = iterator;\r\n            Int32Array.prototype[Symbol.iterator] = iterator;\r\n            Float32Array.prototype[Symbol.iterator] = iterator;\r\n            Float64Array.prototype[Symbol.iterator] = iterator; // lgtm [js/automatic-semicolon-insertion]\r\n        })();\r\n    }\r\n    // fixes up a problem with some versions of IE11\r\n    // ref: http://stackoverflow.com/questions/22062313/imagedata-set-in-internetexplorer\r\n    if (typeof CanvasPixelArray !== \"undefined\") {\r\n        CanvasPixelArray.prototype.set = function (arr) {\r\n            for (var i = 0; i < this.length; i++) {\r\n                this[i] = arr[i];\r\n            }\r\n        };\r\n    }\r\n}\r\n","/* es5-ext\\object\\assign\\implement.js */ function _(require, module, exports) {\r\n    if (!require(4) /* ./is-implemented */()) {\r\n        Object.defineProperty(Object, \"assign\", {\r\n            value: require(5) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\object\\assign\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var assign = Object.assign, obj;\r\n        if (typeof assign !== \"function\")\r\n            return false;\r\n        obj = { foo: \"raz\" };\r\n        assign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\r\n        return obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\r\n    };\r\n}\r\n","/* es5-ext\\object\\assign\\shim.js */ function _(require, module, exports) {\r\n    var keys = require(6) /* ../keys */, value = require(11) /* ../valid-value */, max = Math.max;\r\n    module.exports = function (dest, src /*, srcn*/) {\r\n        var error, i, length = max(arguments.length, 2), assign;\r\n        dest = Object(value(dest));\r\n        assign = function (key) {\r\n            try {\r\n                dest[key] = src[key];\r\n            }\r\n            catch (e) {\r\n                if (!error)\r\n                    error = e;\r\n            }\r\n        };\r\n        for (i = 1; i < length; ++i) {\r\n            src = arguments[i];\r\n            keys(src).forEach(assign);\r\n        }\r\n        if (error !== undefined)\r\n            throw error;\r\n        return dest;\r\n    };\r\n}\r\n","/* es5-ext\\object\\keys\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(7) /* ./is-implemented */() ? Object.keys : require(8) /* ./shim */;\r\n}\r\n","/* es5-ext\\object\\keys\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        try {\r\n            Object.keys(\"primitive\");\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n}\r\n","/* es5-ext\\object\\keys\\shim.js */ function _(require, module, exports) {\r\n    var isValue = require(9) /* ../is-value */;\r\n    var keys = Object.keys;\r\n    module.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\r\n}\r\n","/* es5-ext\\object\\is-value.js */ function _(require, module, exports) {\r\n    var _undefined = require(10) /* ../function/noop */(); // Support ES3 engines\r\n    module.exports = function (val) { return val !== _undefined && val !== null; };\r\n}\r\n","/* es5-ext\\function\\noop.js */ function _(require, module, exports) {\r\n    // eslint-disable-next-line no-empty-function\r\n    module.exports = function () { };\r\n}\r\n","/* es5-ext\\object\\valid-value.js */ function _(require, module, exports) {\r\n    var isValue = require(9) /* ./is-value */;\r\n    module.exports = function (value) {\r\n        if (!isValue(value))\r\n            throw new TypeError(\"Cannot use null or undefined\");\r\n        return value;\r\n    };\r\n}\r\n","/* es5-ext\\object\\entries\\implement.js */ function _(require, module, exports) {\r\n    if (!require(13) /* ./is-implemented */()) {\r\n        Object.defineProperty(Object, \"entries\", {\r\n            value: require(14) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\object\\entries\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        try {\r\n            return Object.entries({ foo: 12 })[0][0] === \"foo\";\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n}\r\n","/* es5-ext\\object\\entries\\shim.js */ function _(require, module, exports) {\r\n    var ensureValue = require(11) /* ../valid-value */;\r\n    module.exports = function (object) {\r\n        ensureValue(object);\r\n        var result = [];\r\n        object = Object(object);\r\n        for (var key in object) {\r\n            if (!propertyIsEnumerable.call(object, key))\r\n                continue;\r\n            result.push([key, object[key]]);\r\n        }\r\n        return result;\r\n    };\r\n}\r\n","/* es5-ext\\number\\is-integer\\implement.js */ function _(require, module, exports) {\r\n    if (!require(16) /* ./is-implemented */()) {\r\n        Object.defineProperty(Number, \"isInteger\", {\r\n            value: require(17) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\number\\is-integer\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var isInteger = Number.isInteger;\r\n        if (typeof isInteger !== \"function\")\r\n            return false;\r\n        return !isInteger(\"23\") && isInteger(34) && !isInteger(32.34);\r\n    };\r\n}\r\n","/* es5-ext\\number\\is-integer\\shim.js */ function _(require, module, exports) {\r\n    module.exports = function (value) {\r\n        if (typeof value !== \"number\")\r\n            return false;\r\n        return value % 1 === 0;\r\n    };\r\n}\r\n","/* es5-ext\\string\\#\\repeat\\implement.js */ function _(require, module, exports) {\r\n    if (!require(19) /* ./is-implemented */()) {\r\n        Object.defineProperty(String.prototype, \"repeat\", {\r\n            value: require(20) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\string\\#\\repeat\\is-implemented.js */ function _(require, module, exports) {\r\n    var str = \"foo\";\r\n    module.exports = function () {\r\n        if (typeof str.repeat !== \"function\")\r\n            return false;\r\n        return str.repeat(2) === \"foofoo\";\r\n    };\r\n}\r\n","/* es5-ext\\string\\#\\repeat\\shim.js */ function _(require, module, exports) {\r\n    var value = require(11) /* ../../../object/valid-value */, toInteger = require(21) /* ../../../number/to-integer */;\r\n    module.exports = function (count) {\r\n        var str = String(value(this)), result;\r\n        count = toInteger(count);\r\n        if (count < 0)\r\n            throw new RangeError(\"Count must be >= 0\");\r\n        if (!isFinite(count))\r\n            throw new RangeError(\"Count must be < \");\r\n        result = \"\";\r\n        while (count) {\r\n            if (count % 2)\r\n                result += str;\r\n            if (count > 1)\r\n                str += str;\r\n            // eslint-disable-next-line no-bitwise\r\n            count >>= 1;\r\n        }\r\n        return result;\r\n    };\r\n}\r\n","/* es5-ext\\number\\to-integer.js */ function _(require, module, exports) {\r\n    var sign = require(22) /* ../math/sign */, abs = Math.abs, floor = Math.floor;\r\n    module.exports = function (value) {\r\n        if (isNaN(value))\r\n            return 0;\r\n        value = Number(value);\r\n        if (value === 0 || !isFinite(value))\r\n            return value;\r\n        return sign(value) * floor(abs(value));\r\n    };\r\n}\r\n","/* es5-ext\\math\\sign\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(23) /* ./is-implemented */() ? Math.sign : require(24) /* ./shim */;\r\n}\r\n","/* es5-ext\\math\\sign\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var sign = Math.sign;\r\n        if (typeof sign !== \"function\")\r\n            return false;\r\n        return sign(10) === 1 && sign(-20) === -1;\r\n    };\r\n}\r\n","/* es5-ext\\math\\sign\\shim.js */ function _(require, module, exports) {\r\n    module.exports = function (value) {\r\n        value = Number(value);\r\n        if (isNaN(value) || value === 0)\r\n            return value;\r\n        return value > 0 ? 1 : -1;\r\n    };\r\n}\r\n","/* es5-ext\\array\\from\\implement.js */ function _(require, module, exports) {\r\n    if (!require(26) /* ./is-implemented */()) {\r\n        Object.defineProperty(Array, \"from\", {\r\n            value: require(27) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\array\\from\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var from = Array.from, arr, result;\r\n        if (typeof from !== \"function\")\r\n            return false;\r\n        arr = [\"raz\", \"dwa\"];\r\n        result = from(arr);\r\n        return Boolean(result && result !== arr && result[1] === \"dwa\");\r\n    };\r\n}\r\n","/* es5-ext\\array\\from\\shim.js */ function _(require, module, exports) {\r\n    var iteratorSymbol = require(28) /* es6-symbol */.iterator, isArguments = require(50) /* ../../function/is-arguments */, isFunction = require(51) /* ../../function/is-function */, toPosInt = require(52) /* ../../number/to-pos-integer */, callable = require(53) /* ../../object/valid-callable */, validValue = require(11) /* ../../object/valid-value */, isValue = require(9) /* ../../object/is-value */, isString = require(54) /* ../../string/is-string */, isArray = Array.isArray, call = Function.prototype.call, desc = { configurable: true, enumerable: true, writable: true, value: null }, defineProperty = Object.defineProperty;\r\n    // eslint-disable-next-line complexity, max-lines-per-function\r\n    module.exports = function (arrayLike /*, mapFn, thisArg*/) {\r\n        var mapFn = arguments[1], thisArg = arguments[2], Context, i, j, arr, length, code, iterator, result, getIterator, value;\r\n        arrayLike = Object(validValue(arrayLike));\r\n        if (isValue(mapFn))\r\n            callable(mapFn);\r\n        if (!this || this === Array || !isFunction(this)) {\r\n            // Result: Plain array\r\n            if (!mapFn) {\r\n                if (isArguments(arrayLike)) {\r\n                    // Source: Arguments\r\n                    length = arrayLike.length;\r\n                    if (length !== 1)\r\n                        return Array.apply(null, arrayLike);\r\n                    arr = new Array(1);\r\n                    arr[0] = arrayLike[0];\r\n                    return arr;\r\n                }\r\n                if (isArray(arrayLike)) {\r\n                    // Source: Array\r\n                    arr = new Array((length = arrayLike.length));\r\n                    for (i = 0; i < length; ++i)\r\n                        arr[i] = arrayLike[i];\r\n                    return arr;\r\n                }\r\n            }\r\n            arr = [];\r\n        }\r\n        else {\r\n            // Result: Non plain array\r\n            Context = this;\r\n        }\r\n        if (!isArray(arrayLike)) {\r\n            if ((getIterator = arrayLike[iteratorSymbol]) !== undefined) {\r\n                // Source: Iterator\r\n                iterator = callable(getIterator).call(arrayLike);\r\n                if (Context)\r\n                    arr = new Context();\r\n                result = iterator.next();\r\n                i = 0;\r\n                while (!result.done) {\r\n                    value = mapFn ? call.call(mapFn, thisArg, result.value, i) : result.value;\r\n                    if (Context) {\r\n                        desc.value = value;\r\n                        defineProperty(arr, i, desc);\r\n                    }\r\n                    else {\r\n                        arr[i] = value;\r\n                    }\r\n                    result = iterator.next();\r\n                    ++i;\r\n                }\r\n                length = i;\r\n            }\r\n            else if (isString(arrayLike)) {\r\n                // Source: String\r\n                length = arrayLike.length;\r\n                if (Context)\r\n                    arr = new Context();\r\n                for (i = 0, j = 0; i < length; ++i) {\r\n                    value = arrayLike[i];\r\n                    if (i + 1 < length) {\r\n                        code = value.charCodeAt(0);\r\n                        // eslint-disable-next-line max-depth\r\n                        if (code >= 0xd800 && code <= 0xdbff)\r\n                            value += arrayLike[++i];\r\n                    }\r\n                    value = mapFn ? call.call(mapFn, thisArg, value, j) : value;\r\n                    if (Context) {\r\n                        desc.value = value;\r\n                        defineProperty(arr, j, desc);\r\n                    }\r\n                    else {\r\n                        arr[j] = value;\r\n                    }\r\n                    ++j;\r\n                }\r\n                length = j;\r\n            }\r\n        }\r\n        if (length === undefined) {\r\n            // Source: array or array-like\r\n            length = toPosInt(arrayLike.length);\r\n            if (Context)\r\n                arr = new Context(length);\r\n            for (i = 0; i < length; ++i) {\r\n                value = mapFn ? call.call(mapFn, thisArg, arrayLike[i], i) : arrayLike[i];\r\n                if (Context) {\r\n                    desc.value = value;\r\n                    defineProperty(arr, i, desc);\r\n                }\r\n                else {\r\n                    arr[i] = value;\r\n                }\r\n            }\r\n        }\r\n        if (Context) {\r\n            desc.value = null;\r\n            arr.length = length;\r\n        }\r\n        return arr;\r\n    };\r\n}\r\n","/* es6-symbol\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(29) /* ./is-implemented */()\r\n        ? require(30) /* ext/global-this */.Symbol\r\n        : require(33) /* ./polyfill */;\r\n}\r\n","/* es6-symbol\\is-implemented.js */ function _(require, module, exports) {\r\n    var global = require(30) /* ext/global-this */, validTypes = { object: true, symbol: true };\r\n    module.exports = function () {\r\n        var Symbol = global.Symbol;\r\n        var symbol;\r\n        if (typeof Symbol !== \"function\")\r\n            return false;\r\n        symbol = Symbol(\"test symbol\");\r\n        try {\r\n            String(symbol);\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n        // Return 'true' also for polyfills\r\n        if (!validTypes[typeof Symbol.iterator])\r\n            return false;\r\n        if (!validTypes[typeof Symbol.toPrimitive])\r\n            return false;\r\n        if (!validTypes[typeof Symbol.toStringTag])\r\n            return false;\r\n        return true;\r\n    };\r\n}\r\n","/* ext\\global-this\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(31) /* ./is-implemented */() ? globalThis : require(32) /* ./implementation */;\r\n}\r\n","/* ext\\global-this\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        if (typeof globalThis !== \"object\")\r\n            return false;\r\n        if (!globalThis)\r\n            return false;\r\n        return globalThis.Array === Array;\r\n    };\r\n}\r\n","/* ext\\global-this\\implementation.js */ function _(require, module, exports) {\r\n    var naiveFallback = function () {\r\n        if (typeof self === \"object\" && self)\r\n            return self;\r\n        if (typeof window === \"object\" && window)\r\n            return window;\r\n        throw new Error(\"Unable to resolve global `this`\");\r\n    };\r\n    module.exports = (function () {\r\n        if (this)\r\n            return this;\r\n        // Unexpected strict mode (may happen if e.g. bundled into ESM module)\r\n        // Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\r\n        // In all ES5+ engines global object inherits from Object.prototype\r\n        // (if you approached one that doesn't please report)\r\n        try {\r\n            Object.defineProperty(Object.prototype, \"__global__\", {\r\n                get: function () { return this; },\r\n                configurable: true\r\n            });\r\n        }\r\n        catch (error) {\r\n            // Unfortunate case of Object.prototype being sealed (via preventExtensions, seal or freeze)\r\n            return naiveFallback();\r\n        }\r\n        try {\r\n            // Safari case (window.__global__ is resolved with global context, but __global__ does not)\r\n            if (!__global__)\r\n                return naiveFallback();\r\n            return __global__;\r\n        }\r\n        finally {\r\n            delete Object.prototype.__global__;\r\n        }\r\n    })();\r\n}\r\n","/* es6-symbol\\polyfill.js */ function _(require, module, exports) {\r\n    var d = require(34) /* d */, validateSymbol = require(45) /* ./validate-symbol */, NativeSymbol = require(30) /* ext/global-this */.Symbol, generateName = require(47) /* ./lib/private/generate-name */, setupStandardSymbols = require(48) /* ./lib/private/setup/standard-symbols */, setupSymbolRegistry = require(49) /* ./lib/private/setup/symbol-registry */;\r\n    var create = Object.create, defineProperties = Object.defineProperties, defineProperty = Object.defineProperty;\r\n    var SymbolPolyfill, HiddenSymbol, isNativeSafe;\r\n    if (typeof NativeSymbol === \"function\") {\r\n        try {\r\n            String(NativeSymbol());\r\n            isNativeSafe = true;\r\n        }\r\n        catch (ignore) { }\r\n    }\r\n    else {\r\n        NativeSymbol = null;\r\n    }\r\n    // Internal constructor (not one exposed) for creating Symbol instances.\r\n    // This one is used to ensure that `someSymbol instanceof Symbol` always return false\r\n    HiddenSymbol = function Symbol(description) {\r\n        if (this instanceof HiddenSymbol)\r\n            throw new TypeError(\"Symbol is not a constructor\");\r\n        return SymbolPolyfill(description);\r\n    };\r\n    // Exposed `Symbol` constructor\r\n    // (returns instances of HiddenSymbol)\r\n    module.exports = SymbolPolyfill = function Symbol(description) {\r\n        var symbol;\r\n        if (this instanceof Symbol)\r\n            throw new TypeError(\"Symbol is not a constructor\");\r\n        if (isNativeSafe)\r\n            return NativeSymbol(description);\r\n        symbol = create(HiddenSymbol.prototype);\r\n        description = description === undefined ? \"\" : String(description);\r\n        return defineProperties(symbol, {\r\n            __description__: d(\"\", description),\r\n            __name__: d(\"\", generateName(description))\r\n        });\r\n    };\r\n    setupStandardSymbols(SymbolPolyfill);\r\n    setupSymbolRegistry(SymbolPolyfill);\r\n    // Internal tweaks for real symbol producer\r\n    defineProperties(HiddenSymbol.prototype, {\r\n        constructor: d(SymbolPolyfill),\r\n        toString: d(\"\", function () { return this.__name__; })\r\n    });\r\n    // Proper implementation of methods exposed on Symbol.prototype\r\n    // They won't be accessible on produced symbol instances as they derive from HiddenSymbol.prototype\r\n    defineProperties(SymbolPolyfill.prototype, {\r\n        toString: d(function () { return \"Symbol (\" + validateSymbol(this).__description__ + \")\"; }),\r\n        valueOf: d(function () { return validateSymbol(this); })\r\n    });\r\n    defineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toPrimitive, d(\"\", function () {\r\n        var symbol = validateSymbol(this);\r\n        if (typeof symbol === \"symbol\")\r\n            return symbol;\r\n        return symbol.toString();\r\n    }));\r\n    defineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toStringTag, d(\"c\", \"Symbol\"));\r\n    // Proper implementaton of toPrimitive and toStringTag for returned symbol instances\r\n    defineProperty(HiddenSymbol.prototype, SymbolPolyfill.toStringTag, d(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));\r\n    // Note: It's important to define `toPrimitive` as last one, as some implementations\r\n    // implement `toPrimitive` natively without implementing `toStringTag` (or other specified symbols)\r\n    // And that may invoke error in definition flow:\r\n    // See: https://github.com/medikoo/es6-symbol/issues/13#issuecomment-164146149\r\n    defineProperty(HiddenSymbol.prototype, SymbolPolyfill.toPrimitive, d(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]));\r\n}\r\n","/* d\\index.js */ function _(require, module, exports) {\r\n    var isValue = require(35) /* type/value/is */, isPlainFunction = require(36) /* type/plain-function/is */, assign = require(40) /* es5-ext/object/assign */, normalizeOpts = require(41) /* es5-ext/object/normalize-options */, contains = require(42) /* es5-ext/string/#/contains */;\r\n    var d = (module.exports = function (dscr, value /*, options*/) {\r\n        var c, e, w, options, desc;\r\n        if (arguments.length < 2 || typeof dscr !== \"string\") {\r\n            options = value;\r\n            value = dscr;\r\n            dscr = null;\r\n        }\r\n        else {\r\n            options = arguments[2];\r\n        }\r\n        if (isValue(dscr)) {\r\n            c = contains.call(dscr, \"c\");\r\n            e = contains.call(dscr, \"e\");\r\n            w = contains.call(dscr, \"w\");\r\n        }\r\n        else {\r\n            c = w = true;\r\n            e = false;\r\n        }\r\n        desc = { value: value, configurable: c, enumerable: e, writable: w };\r\n        return !options ? desc : assign(normalizeOpts(options), desc);\r\n    });\r\n    d.gs = function (dscr, get, set /*, options*/) {\r\n        var c, e, options, desc;\r\n        if (typeof dscr !== \"string\") {\r\n            options = set;\r\n            set = get;\r\n            get = dscr;\r\n            dscr = null;\r\n        }\r\n        else {\r\n            options = arguments[3];\r\n        }\r\n        if (!isValue(get)) {\r\n            get = undefined;\r\n        }\r\n        else if (!isPlainFunction(get)) {\r\n            options = get;\r\n            get = set = undefined;\r\n        }\r\n        else if (!isValue(set)) {\r\n            set = undefined;\r\n        }\r\n        else if (!isPlainFunction(set)) {\r\n            options = set;\r\n            set = undefined;\r\n        }\r\n        if (isValue(dscr)) {\r\n            c = contains.call(dscr, \"c\");\r\n            e = contains.call(dscr, \"e\");\r\n        }\r\n        else {\r\n            c = true;\r\n            e = false;\r\n        }\r\n        desc = { get: get, set: set, configurable: c, enumerable: e };\r\n        return !options ? desc : assign(normalizeOpts(options), desc);\r\n    };\r\n}\r\n","/* type\\value\\is.js */ function _(require, module, exports) {\r\n    // ES3 safe\r\n    var _undefined = void 0;\r\n    module.exports = function (value) { return value !== _undefined && value !== null; };\r\n}\r\n","/* type\\plain-function\\is.js */ function _(require, module, exports) {\r\n    var isFunction = require(37) /* ../function/is */;\r\n    var classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\r\n    module.exports = function (value) {\r\n        if (!isFunction(value))\r\n            return false;\r\n        if (classRe.test(functionToString.call(value)))\r\n            return false;\r\n        return true;\r\n    };\r\n}\r\n","/* type\\function\\is.js */ function _(require, module, exports) {\r\n    var isPrototype = require(38) /* ../prototype/is */;\r\n    module.exports = function (value) {\r\n        if (typeof value !== \"function\")\r\n            return false;\r\n        if (!hasOwnProperty.call(value, \"length\"))\r\n            return false;\r\n        try {\r\n            if (typeof value.length !== \"number\")\r\n                return false;\r\n            if (typeof value.call !== \"function\")\r\n                return false;\r\n            if (typeof value.apply !== \"function\")\r\n                return false;\r\n        }\r\n        catch (error) {\r\n            return false;\r\n        }\r\n        return !isPrototype(value);\r\n    };\r\n}\r\n","/* type\\prototype\\is.js */ function _(require, module, exports) {\r\n    var isObject = require(39) /* ../object/is */;\r\n    module.exports = function (value) {\r\n        if (!isObject(value))\r\n            return false;\r\n        try {\r\n            if (!value.constructor)\r\n                return false;\r\n            return value.constructor.prototype === value;\r\n        }\r\n        catch (error) {\r\n            return false;\r\n        }\r\n    };\r\n}\r\n","/* type\\object\\is.js */ function _(require, module, exports) {\r\n    var isValue = require(35) /* ../value/is */;\r\n    // prettier-ignore\r\n    var possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\r\n    module.exports = function (value) {\r\n        if (!isValue(value))\r\n            return false;\r\n        return hasOwnProperty.call(possibleTypes, typeof value);\r\n    };\r\n}\r\n","/* es5-ext\\object\\assign\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(4) /* ./is-implemented */() ? Object.assign : require(5) /* ./shim */;\r\n}\r\n","/* es5-ext\\object\\normalize-options.js */ function _(require, module, exports) {\r\n    var isValue = require(9) /* ./is-value */;\r\n    var forEach = Array.prototype.forEach, create = Object.create;\r\n    var process = function (src, obj) {\r\n        var key;\r\n        for (key in src)\r\n            obj[key] = src[key];\r\n    };\r\n    // eslint-disable-next-line no-unused-vars\r\n    module.exports = function (opts1 /*, options*/) {\r\n        var result = create(null);\r\n        forEach.call(arguments, function (options) {\r\n            if (!isValue(options))\r\n                return;\r\n            process(Object(options), result);\r\n        });\r\n        return result;\r\n    };\r\n}\r\n","/* es5-ext\\string\\#\\contains\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(43) /* ./is-implemented */() ? String.prototype.contains : require(44) /* ./shim */;\r\n}\r\n","/* es5-ext\\string\\#\\contains\\is-implemented.js */ function _(require, module, exports) {\r\n    var str = \"razdwatrzy\";\r\n    module.exports = function () {\r\n        if (typeof str.contains !== \"function\")\r\n            return false;\r\n        return str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\r\n    };\r\n}\r\n","/* es5-ext\\string\\#\\contains\\shim.js */ function _(require, module, exports) {\r\n    var indexOf = String.prototype.indexOf;\r\n    module.exports = function (searchString /*, position*/) {\r\n        return indexOf.call(this, searchString, arguments[1]) > -1;\r\n    };\r\n}\r\n","/* es6-symbol\\validate-symbol.js */ function _(require, module, exports) {\r\n    var isSymbol = require(46) /* ./is-symbol */;\r\n    module.exports = function (value) {\r\n        if (!isSymbol(value))\r\n            throw new TypeError(value + \" is not a symbol\");\r\n        return value;\r\n    };\r\n}\r\n","/* es6-symbol\\is-symbol.js */ function _(require, module, exports) {\r\n    module.exports = function (value) {\r\n        if (!value)\r\n            return false;\r\n        if (typeof value === \"symbol\")\r\n            return true;\r\n        if (!value.constructor)\r\n            return false;\r\n        if (value.constructor.name !== \"Symbol\")\r\n            return false;\r\n        return value[value.constructor.toStringTag] === \"Symbol\";\r\n    };\r\n}\r\n","/* es6-symbol\\lib\\private\\generate-name.js */ function _(require, module, exports) {\r\n    var d = require(34) /* d */;\r\n    var create = Object.create, defineProperty = Object.defineProperty, objPrototype = Object.prototype;\r\n    var created = create(null);\r\n    module.exports = function (desc) {\r\n        var postfix = 0, name, ie11BugWorkaround;\r\n        while (created[desc + (postfix || \"\")])\r\n            ++postfix;\r\n        desc += postfix || \"\";\r\n        created[desc] = true;\r\n        name = \"@@\" + desc;\r\n        defineProperty(objPrototype, name, d.gs(null, function (value) {\r\n            // For IE11 issue see:\r\n            // https://connect.microsoft.com/IE/feedbackdetail/view/1928508/\r\n            //    ie11-broken-getters-on-dom-objects\r\n            // https://github.com/medikoo/es6-symbol/issues/12\r\n            if (ie11BugWorkaround)\r\n                return;\r\n            ie11BugWorkaround = true;\r\n            defineProperty(this, name, d(value));\r\n            ie11BugWorkaround = false;\r\n        }));\r\n        return name;\r\n    };\r\n}\r\n","/* es6-symbol\\lib\\private\\setup\\standard-symbols.js */ function _(require, module, exports) {\r\n    var d = require(34) /* d */, NativeSymbol = require(30) /* ext/global-this */.Symbol;\r\n    module.exports = function (SymbolPolyfill) {\r\n        return Object.defineProperties(SymbolPolyfill, {\r\n            // To ensure proper interoperability with other native functions (e.g. Array.from)\r\n            // fallback to eventual native implementation of given symbol\r\n            hasInstance: d(\"\", (NativeSymbol && NativeSymbol.hasInstance) || SymbolPolyfill(\"hasInstance\")),\r\n            isConcatSpreadable: d(\"\", (NativeSymbol && NativeSymbol.isConcatSpreadable) ||\r\n                SymbolPolyfill(\"isConcatSpreadable\")),\r\n            iterator: d(\"\", (NativeSymbol && NativeSymbol.iterator) || SymbolPolyfill(\"iterator\")),\r\n            match: d(\"\", (NativeSymbol && NativeSymbol.match) || SymbolPolyfill(\"match\")),\r\n            replace: d(\"\", (NativeSymbol && NativeSymbol.replace) || SymbolPolyfill(\"replace\")),\r\n            search: d(\"\", (NativeSymbol && NativeSymbol.search) || SymbolPolyfill(\"search\")),\r\n            species: d(\"\", (NativeSymbol && NativeSymbol.species) || SymbolPolyfill(\"species\")),\r\n            split: d(\"\", (NativeSymbol && NativeSymbol.split) || SymbolPolyfill(\"split\")),\r\n            toPrimitive: d(\"\", (NativeSymbol && NativeSymbol.toPrimitive) || SymbolPolyfill(\"toPrimitive\")),\r\n            toStringTag: d(\"\", (NativeSymbol && NativeSymbol.toStringTag) || SymbolPolyfill(\"toStringTag\")),\r\n            unscopables: d(\"\", (NativeSymbol && NativeSymbol.unscopables) || SymbolPolyfill(\"unscopables\"))\r\n        });\r\n    };\r\n}\r\n","/* es6-symbol\\lib\\private\\setup\\symbol-registry.js */ function _(require, module, exports) {\r\n    var d = require(34) /* d */, validateSymbol = require(45) /* ../../../validate-symbol */;\r\n    var registry = Object.create(null);\r\n    module.exports = function (SymbolPolyfill) {\r\n        return Object.defineProperties(SymbolPolyfill, {\r\n            for: d(function (key) {\r\n                if (registry[key])\r\n                    return registry[key];\r\n                return (registry[key] = SymbolPolyfill(String(key)));\r\n            }),\r\n            keyFor: d(function (symbol) {\r\n                var key;\r\n                validateSymbol(symbol);\r\n                for (key in registry) {\r\n                    if (registry[key] === symbol)\r\n                        return key;\r\n                }\r\n                return undefined;\r\n            })\r\n        });\r\n    };\r\n}\r\n","/* es5-ext\\function\\is-arguments.js */ function _(require, module, exports) {\r\n    var objToString = Object.prototype.toString, id = objToString.call((function () { return arguments; })());\r\n    module.exports = function (value) { return objToString.call(value) === id; };\r\n}\r\n","/* es5-ext\\function\\is-function.js */ function _(require, module, exports) {\r\n    var objToString = Object.prototype.toString, isFunctionStringTag = RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);\r\n    module.exports = function (value) {\r\n        return typeof value === \"function\" && isFunctionStringTag(objToString.call(value));\r\n    };\r\n}\r\n","/* es5-ext\\number\\to-pos-integer.js */ function _(require, module, exports) {\r\n    var toInteger = require(21) /* ./to-integer */, max = Math.max;\r\n    module.exports = function (value) { return max(0, toInteger(value)); };\r\n}\r\n","/* es5-ext\\object\\valid-callable.js */ function _(require, module, exports) {\r\n    module.exports = function (fn) {\r\n        if (typeof fn !== \"function\")\r\n            throw new TypeError(fn + \" is not a function\");\r\n        return fn;\r\n    };\r\n}\r\n","/* es5-ext\\string\\is-string.js */ function _(require, module, exports) {\r\n    var objToString = Object.prototype.toString, id = objToString.call(\"\");\r\n    module.exports = function (value) {\r\n        return (typeof value === \"string\" ||\r\n            (value &&\r\n                typeof value === \"object\" &&\r\n                (value instanceof String || objToString.call(value) === id)) ||\r\n            false);\r\n    };\r\n}\r\n","/* es5-ext\\array\\#\\fill\\implement.js */ function _(require, module, exports) {\r\n    if (!require(56) /* ./is-implemented */()) {\r\n        Object.defineProperty(Array.prototype, \"fill\", {\r\n            value: require(57) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\array\\#\\fill\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var arr = [1, 2, 3, 4, 5, 6];\r\n        if (typeof arr.fill !== \"function\")\r\n            return false;\r\n        return String(arr.fill(-1, -3)) === \"1,2,3,-1,-1,-1\";\r\n    };\r\n}\r\n","/* es5-ext\\array\\#\\fill\\shim.js */ function _(require, module, exports) {\r\n    var toInteger = require(21) /* ../../../number/to-integer */, toPosInt = require(52) /* ../../../number/to-pos-integer */, validValue = require(11) /* ../../../object/valid-value */, max = Math.max, min = Math.min;\r\n    module.exports = function (value /*, start, end*/) {\r\n        var arr = validValue(this), start = arguments[1], end = arguments[2], length = toPosInt(arr.length), relativeStart, i;\r\n        start = start === undefined ? 0 : toInteger(start);\r\n        end = end === undefined ? length : toInteger(end);\r\n        relativeStart = start < 0 ? max(length + start, 0) : min(start, length);\r\n        for (i = relativeStart; i < length && i < end; ++i)\r\n            arr[i] = value;\r\n        return arr;\r\n    };\r\n}\r\n","/* es5-ext\\math\\log10\\implement.js */ function _(require, module, exports) {\r\n    if (!require(59) /* ./is-implemented */()) {\r\n        Object.defineProperty(Math, \"log10\", {\r\n            value: require(60) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\math\\log10\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var log10 = Math.log10;\r\n        if (typeof log10 !== \"function\")\r\n            return false;\r\n        return log10(2) === 0.3010299956639812;\r\n    };\r\n}\r\n","/* es5-ext\\math\\log10\\shim.js */ function _(require, module, exports) {\r\n    var log = Math.log, LOG10E = Math.LOG10E;\r\n    module.exports = function (value) {\r\n        if (isNaN(value))\r\n            return NaN;\r\n        value = Number(value);\r\n        if (value < 0)\r\n            return NaN;\r\n        if (value === 0)\r\n            return -Infinity;\r\n        if (value === 1)\r\n            return 0;\r\n        if (value === Infinity)\r\n            return Infinity;\r\n        return log(value) * LOG10E;\r\n    };\r\n}\r\n","/* es5-ext\\math\\log1p\\implement.js */ function _(require, module, exports) {\r\n    if (!require(62) /* ./is-implemented */()) {\r\n        Object.defineProperty(Math, \"log1p\", {\r\n            value: require(63) /* ./shim */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es5-ext\\math\\log1p\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var log1p = Math.log1p;\r\n        if (typeof log1p !== \"function\")\r\n            return false;\r\n        return log1p(1) === 0.6931471805599453;\r\n    };\r\n}\r\n","/* es5-ext\\math\\log1p\\shim.js */ function _(require, module, exports) {\r\n    var log = Math.log;\r\n    module.exports = function (value) {\r\n        if (isNaN(value))\r\n            return NaN;\r\n        value = Number(value);\r\n        if (value < -1)\r\n            return NaN;\r\n        if (value === -1)\r\n            return -Infinity;\r\n        if (value === 0)\r\n            return value;\r\n        if (value === Infinity)\r\n            return Infinity;\r\n        if (value > -1.0e-8 && value < 1.0e-8)\r\n            return value - (value * value) / 2;\r\n        return log(1 + value);\r\n    };\r\n}\r\n","/* es6-set\\implement.js */ function _(require, module, exports) {\r\n    if (!require(65) /* ./is-implemented */()) {\r\n        Object.defineProperty(require(66) /* es5-ext/global */, 'Set', { value: require(67) /* ./polyfill */, configurable: true, enumerable: false,\r\n            writable: true });\r\n    }\r\n}\r\n","/* es6-set\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var set, iterator, result;\r\n        if (typeof Set !== 'function')\r\n            return false;\r\n        set = new Set(['raz', 'dwa', 'trzy']);\r\n        if (String(set) !== '[object Set]')\r\n            return false;\r\n        if (set.size !== 3)\r\n            return false;\r\n        if (typeof set.add !== 'function')\r\n            return false;\r\n        if (typeof set.clear !== 'function')\r\n            return false;\r\n        if (typeof set.delete !== 'function')\r\n            return false;\r\n        if (typeof set.entries !== 'function')\r\n            return false;\r\n        if (typeof set.forEach !== 'function')\r\n            return false;\r\n        if (typeof set.has !== 'function')\r\n            return false;\r\n        if (typeof set.keys !== 'function')\r\n            return false;\r\n        if (typeof set.values !== 'function')\r\n            return false;\r\n        iterator = set.values();\r\n        result = iterator.next();\r\n        if (result.done !== false)\r\n            return false;\r\n        if (result.value !== 'raz')\r\n            return false;\r\n        return true;\r\n    };\r\n}\r\n","/* es5-ext\\global.js */ function _(require, module, exports) {\r\n    var naiveFallback = function () {\r\n        if (typeof self === \"object\" && self)\r\n            return self;\r\n        if (typeof window === \"object\" && window)\r\n            return window;\r\n        throw new Error(\"Unable to resolve global `this`\");\r\n    };\r\n    module.exports = (function () {\r\n        if (this)\r\n            return this;\r\n        // Unexpected strict mode (may happen if e.g. bundled into ESM module)\r\n        // Fallback to standard globalThis if available\r\n        if (typeof globalThis === \"object\" && globalThis)\r\n            return globalThis;\r\n        // Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\r\n        // In all ES5+ engines global object inherits from Object.prototype\r\n        // (if you approached one that doesn't please report)\r\n        try {\r\n            Object.defineProperty(Object.prototype, \"__global__\", {\r\n                get: function () { return this; },\r\n                configurable: true\r\n            });\r\n        }\r\n        catch (error) {\r\n            // Unfortunate case of updates to Object.prototype being restricted\r\n            // via preventExtensions, seal or freeze\r\n            return naiveFallback();\r\n        }\r\n        try {\r\n            // Safari case (window.__global__ works, but __global__ does not)\r\n            if (!__global__)\r\n                return naiveFallback();\r\n            return __global__;\r\n        }\r\n        finally {\r\n            delete Object.prototype.__global__;\r\n        }\r\n    })();\r\n}\r\n","/* es6-set\\polyfill.js */ function _(require, module, exports) {\r\n    var clear = require(68) /* es5-ext/array/#/clear */, eIndexOf = require(69) /* es5-ext/array/#/e-index-of */, setPrototypeOf = require(73) /* es5-ext/object/set-prototype-of */, callable = require(53) /* es5-ext/object/valid-callable */, d = require(34) /* d */, ee = require(78) /* event-emitter */, Symbol = require(28) /* es6-symbol */, iterator = require(79) /* es6-iterator/valid-iterable */, forOf = require(81) /* es6-iterator/for-of */, Iterator = require(98) /* ./lib/iterator */, isNative = require(99) /* ./is-native-implemented */, call = Function.prototype.call, defineProperty = Object.defineProperty, getPrototypeOf = Object.getPrototypeOf, SetPoly, getValues, NativeSet;\r\n    if (isNative)\r\n        NativeSet = Set;\r\n    module.exports = SetPoly = function Set( /*iterable*/) {\r\n        var iterable = arguments[0], self;\r\n        if (!(this instanceof SetPoly))\r\n            throw new TypeError('Constructor requires \\'new\\'');\r\n        if (isNative && setPrototypeOf)\r\n            self = setPrototypeOf(new NativeSet(), getPrototypeOf(this));\r\n        else\r\n            self = this;\r\n        if (iterable != null)\r\n            iterator(iterable);\r\n        defineProperty(self, '__setData__', d('c', []));\r\n        if (!iterable)\r\n            return self;\r\n        forOf(iterable, function (value) {\r\n            if (eIndexOf.call(this, value) !== -1)\r\n                return;\r\n            this.push(value);\r\n        }, self.__setData__);\r\n        return self;\r\n    };\r\n    if (isNative) {\r\n        if (setPrototypeOf)\r\n            setPrototypeOf(SetPoly, NativeSet);\r\n        SetPoly.prototype = Object.create(NativeSet.prototype, { constructor: d(SetPoly) });\r\n    }\r\n    ee(Object.defineProperties(SetPoly.prototype, {\r\n        add: d(function (value) {\r\n            if (this.has(value))\r\n                return this;\r\n            this.emit('_add', this.__setData__.push(value) - 1, value);\r\n            return this;\r\n        }),\r\n        clear: d(function () {\r\n            if (!this.__setData__.length)\r\n                return;\r\n            clear.call(this.__setData__);\r\n            this.emit('_clear');\r\n        }),\r\n        delete: d(function (value) {\r\n            var index = eIndexOf.call(this.__setData__, value);\r\n            if (index === -1)\r\n                return false;\r\n            this.__setData__.splice(index, 1);\r\n            this.emit('_delete', index, value);\r\n            return true;\r\n        }),\r\n        entries: d(function () { return new Iterator(this, 'key+value'); }),\r\n        forEach: d(function (cb /*, thisArg*/) {\r\n            var thisArg = arguments[1], iterator, result, value;\r\n            callable(cb);\r\n            iterator = this.values();\r\n            result = iterator._next();\r\n            while (result !== undefined) {\r\n                value = iterator._resolve(result);\r\n                call.call(cb, thisArg, value, value, this);\r\n                result = iterator._next();\r\n            }\r\n        }),\r\n        has: d(function (value) {\r\n            return (eIndexOf.call(this.__setData__, value) !== -1);\r\n        }),\r\n        keys: d(getValues = function () { return this.values(); }),\r\n        size: d.gs(function () { return this.__setData__.length; }),\r\n        values: d(function () { return new Iterator(this); }),\r\n        toString: d(function () { return '[object Set]'; })\r\n    }));\r\n    defineProperty(SetPoly.prototype, Symbol.iterator, d(getValues));\r\n    defineProperty(SetPoly.prototype, Symbol.toStringTag, d('c', 'Set'));\r\n}\r\n","/* es5-ext\\array\\#\\clear.js */ function _(require, module, exports) {\r\n    var value = require(11) /* ../../object/valid-value */;\r\n    module.exports = function () {\r\n        value(this).length = 0;\r\n        return this;\r\n    };\r\n}\r\n","/* es5-ext\\array\\#\\e-index-of.js */ function _(require, module, exports) {\r\n    var numberIsNaN = require(70) /* ../../number/is-nan */, toPosInt = require(52) /* ../../number/to-pos-integer */, value = require(11) /* ../../object/valid-value */, indexOf = Array.prototype.indexOf, objHasOwnProperty = Object.prototype.hasOwnProperty, abs = Math.abs, floor = Math.floor;\r\n    module.exports = function (searchElement /*, fromIndex*/) {\r\n        var i, length, fromIndex, val;\r\n        if (!numberIsNaN(searchElement))\r\n            return indexOf.apply(this, arguments);\r\n        length = toPosInt(value(this).length);\r\n        fromIndex = arguments[1];\r\n        if (isNaN(fromIndex))\r\n            fromIndex = 0;\r\n        else if (fromIndex >= 0)\r\n            fromIndex = floor(fromIndex);\r\n        else\r\n            fromIndex = toPosInt(this.length) - floor(abs(fromIndex));\r\n        for (i = fromIndex; i < length; ++i) {\r\n            if (objHasOwnProperty.call(this, i)) {\r\n                val = this[i];\r\n                if (numberIsNaN(val))\r\n                    return i; // Jslint: ignore\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n}\r\n","/* es5-ext\\number\\is-nan\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(71) /* ./is-implemented */() ? Number.isNaN : require(72) /* ./shim */;\r\n}\r\n","/* es5-ext\\number\\is-nan\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var numberIsNaN = Number.isNaN;\r\n        if (typeof numberIsNaN !== \"function\")\r\n            return false;\r\n        return !numberIsNaN({}) && numberIsNaN(NaN) && !numberIsNaN(34);\r\n    };\r\n}\r\n","/* es5-ext\\number\\is-nan\\shim.js */ function _(require, module, exports) {\r\n    module.exports = function (value) {\r\n        // eslint-disable-next-line no-self-compare\r\n        return value !== value;\r\n    };\r\n}\r\n","/* es5-ext\\object\\set-prototype-of\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(74) /* ./is-implemented */() ? Object.setPrototypeOf : require(75) /* ./shim */;\r\n}\r\n","/* es5-ext\\object\\set-prototype-of\\is-implemented.js */ function _(require, module, exports) {\r\n    var create = Object.create, getPrototypeOf = Object.getPrototypeOf, plainObject = {};\r\n    module.exports = function ( /* CustomCreate*/) {\r\n        var setPrototypeOf = Object.setPrototypeOf, customCreate = arguments[0] || create;\r\n        if (typeof setPrototypeOf !== \"function\")\r\n            return false;\r\n        return getPrototypeOf(setPrototypeOf(customCreate(null), plainObject)) === plainObject;\r\n    };\r\n}\r\n","/* es5-ext\\object\\set-prototype-of\\shim.js */ function _(require, module, exports) {\r\n    var isObject = require(76) /* ../is-object */, value = require(11) /* ../valid-value */, objIsPrototypeOf = Object.prototype.isPrototypeOf, defineProperty = Object.defineProperty, nullDesc = { configurable: true, enumerable: false, writable: true, value: undefined }, validate;\r\n    validate = function (obj, prototype) {\r\n        value(obj);\r\n        if (prototype === null || isObject(prototype))\r\n            return obj;\r\n        throw new TypeError(\"Prototype must be null or an object\");\r\n    };\r\n    module.exports = (function (status) {\r\n        var fn, set;\r\n        if (!status)\r\n            return null;\r\n        if (status.level === 2) {\r\n            if (status.set) {\r\n                set = status.set;\r\n                fn = function (obj, prototype) {\r\n                    set.call(validate(obj, prototype), prototype);\r\n                    return obj;\r\n                };\r\n            }\r\n            else {\r\n                fn = function (obj, prototype) {\r\n                    validate(obj, prototype).__proto__ = prototype;\r\n                    return obj;\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            fn = function self(obj, prototype) {\r\n                var isNullBase;\r\n                validate(obj, prototype);\r\n                isNullBase = objIsPrototypeOf.call(self.nullPolyfill, obj);\r\n                if (isNullBase)\r\n                    delete self.nullPolyfill.__proto__;\r\n                if (prototype === null)\r\n                    prototype = self.nullPolyfill;\r\n                obj.__proto__ = prototype;\r\n                if (isNullBase)\r\n                    defineProperty(self.nullPolyfill, \"__proto__\", nullDesc);\r\n                return obj;\r\n            };\r\n        }\r\n        return Object.defineProperty(fn, \"level\", {\r\n            configurable: false,\r\n            enumerable: false,\r\n            writable: false,\r\n            value: status.level\r\n        });\r\n    })((function () {\r\n        var tmpObj1 = Object.create(null), tmpObj2 = {}, set, desc = Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\");\r\n        if (desc) {\r\n            try {\r\n                set = desc.set; // Opera crashes at this point\r\n                set.call(tmpObj1, tmpObj2);\r\n            }\r\n            catch (ignore) { }\r\n            if (Object.getPrototypeOf(tmpObj1) === tmpObj2)\r\n                return { set: set, level: 2 };\r\n        }\r\n        tmpObj1.__proto__ = tmpObj2;\r\n        if (Object.getPrototypeOf(tmpObj1) === tmpObj2)\r\n            return { level: 2 };\r\n        tmpObj1 = {};\r\n        tmpObj1.__proto__ = tmpObj2;\r\n        if (Object.getPrototypeOf(tmpObj1) === tmpObj2)\r\n            return { level: 1 };\r\n        return false;\r\n    })());\r\n    require(77) /* ../create */;\r\n}\r\n","/* es5-ext\\object\\is-object.js */ function _(require, module, exports) {\r\n    var isValue = require(9) /* ./is-value */;\r\n    var map = { function: true, object: true };\r\n    module.exports = function (value) { return (isValue(value) && map[typeof value]) || false; };\r\n}\r\n","/* es5-ext\\object\\create.js */ function _(require, module, exports) {\r\n    var create = Object.create, shim;\r\n    if (!require(74) /* ./set-prototype-of/is-implemented */()) {\r\n        shim = require(75) /* ./set-prototype-of/shim */;\r\n    }\r\n    module.exports = (function () {\r\n        var nullObject, polyProps, desc;\r\n        if (!shim)\r\n            return create;\r\n        if (shim.level !== 1)\r\n            return create;\r\n        nullObject = {};\r\n        polyProps = {};\r\n        desc = { configurable: false, enumerable: false, writable: true, value: undefined };\r\n        Object.getOwnPropertyNames(Object.prototype).forEach(function (name) {\r\n            if (name === \"__proto__\") {\r\n                polyProps[name] = {\r\n                    configurable: true,\r\n                    enumerable: false,\r\n                    writable: true,\r\n                    value: undefined\r\n                };\r\n                return;\r\n            }\r\n            polyProps[name] = desc;\r\n        });\r\n        Object.defineProperties(nullObject, polyProps);\r\n        Object.defineProperty(shim, \"nullPolyfill\", {\r\n            configurable: false,\r\n            enumerable: false,\r\n            writable: false,\r\n            value: nullObject\r\n        });\r\n        return function (prototype, props) {\r\n            return create(prototype === null ? nullObject : prototype, props);\r\n        };\r\n    })();\r\n}\r\n","/* event-emitter\\index.js */ function _(require, module, exports) {\r\n    var d = require(34) /* d */, callable = require(53) /* es5-ext/object/valid-callable */, apply = Function.prototype.apply, call = Function.prototype.call, create = Object.create, defineProperty = Object.defineProperty, defineProperties = Object.defineProperties, hasOwnProperty = Object.prototype.hasOwnProperty, descriptor = { configurable: true, enumerable: false, writable: true }, on, once, off, emit, methods, descriptors, base;\r\n    on = function (type, listener) {\r\n        var data;\r\n        callable(listener);\r\n        if (!hasOwnProperty.call(this, '__ee__')) {\r\n            data = descriptor.value = create(null);\r\n            defineProperty(this, '__ee__', descriptor);\r\n            descriptor.value = null;\r\n        }\r\n        else {\r\n            data = this.__ee__;\r\n        }\r\n        if (!data[type])\r\n            data[type] = listener;\r\n        else if (typeof data[type] === 'object')\r\n            data[type].push(listener);\r\n        else\r\n            data[type] = [data[type], listener];\r\n        return this;\r\n    };\r\n    once = function (type, listener) {\r\n        var once, self;\r\n        callable(listener);\r\n        self = this;\r\n        on.call(this, type, once = function () {\r\n            off.call(self, type, once);\r\n            apply.call(listener, this, arguments);\r\n        });\r\n        once.__eeOnceListener__ = listener;\r\n        return this;\r\n    };\r\n    off = function (type, listener) {\r\n        var data, listeners, candidate, i;\r\n        callable(listener);\r\n        if (!hasOwnProperty.call(this, '__ee__'))\r\n            return this;\r\n        data = this.__ee__;\r\n        if (!data[type])\r\n            return this;\r\n        listeners = data[type];\r\n        if (typeof listeners === 'object') {\r\n            for (i = 0; (candidate = listeners[i]); ++i) {\r\n                if ((candidate === listener) ||\r\n                    (candidate.__eeOnceListener__ === listener)) {\r\n                    if (listeners.length === 2)\r\n                        data[type] = listeners[i ? 0 : 1];\r\n                    else\r\n                        listeners.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if ((listeners === listener) ||\r\n                (listeners.__eeOnceListener__ === listener)) {\r\n                delete data[type];\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    emit = function (type) {\r\n        var i, l, listener, listeners, args;\r\n        if (!hasOwnProperty.call(this, '__ee__'))\r\n            return;\r\n        listeners = this.__ee__[type];\r\n        if (!listeners)\r\n            return;\r\n        if (typeof listeners === 'object') {\r\n            l = arguments.length;\r\n            args = new Array(l - 1);\r\n            for (i = 1; i < l; ++i)\r\n                args[i - 1] = arguments[i];\r\n            listeners = listeners.slice();\r\n            for (i = 0; (listener = listeners[i]); ++i) {\r\n                apply.call(listener, this, args);\r\n            }\r\n        }\r\n        else {\r\n            switch (arguments.length) {\r\n                case 1:\r\n                    call.call(listeners, this);\r\n                    break;\r\n                case 2:\r\n                    call.call(listeners, this, arguments[1]);\r\n                    break;\r\n                case 3:\r\n                    call.call(listeners, this, arguments[1], arguments[2]);\r\n                    break;\r\n                default:\r\n                    l = arguments.length;\r\n                    args = new Array(l - 1);\r\n                    for (i = 1; i < l; ++i) {\r\n                        args[i - 1] = arguments[i];\r\n                    }\r\n                    apply.call(listeners, this, args);\r\n            }\r\n        }\r\n    };\r\n    methods = {\r\n        on: on,\r\n        once: once,\r\n        off: off,\r\n        emit: emit\r\n    };\r\n    descriptors = {\r\n        on: d(on),\r\n        once: d(once),\r\n        off: d(off),\r\n        emit: d(emit)\r\n    };\r\n    base = defineProperties({}, descriptors);\r\n    module.exports = exports = function (o) {\r\n        return (o == null) ? create(base) : defineProperties(Object(o), descriptors);\r\n    };\r\n    exports.methods = methods;\r\n}\r\n","/* es6-iterator\\valid-iterable.js */ function _(require, module, exports) {\r\n    var isIterable = require(80) /* ./is-iterable */;\r\n    module.exports = function (value) {\r\n        if (!isIterable(value))\r\n            throw new TypeError(value + \" is not iterable\");\r\n        return value;\r\n    };\r\n}\r\n","/* es6-iterator\\is-iterable.js */ function _(require, module, exports) {\r\n    var isArguments = require(50) /* es5-ext/function/is-arguments */, isValue = require(9) /* es5-ext/object/is-value */, isString = require(54) /* es5-ext/string/is-string */;\r\n    var iteratorSymbol = require(28) /* es6-symbol */.iterator, isArray = Array.isArray;\r\n    module.exports = function (value) {\r\n        if (!isValue(value))\r\n            return false;\r\n        if (isArray(value))\r\n            return true;\r\n        if (isString(value))\r\n            return true;\r\n        if (isArguments(value))\r\n            return true;\r\n        return typeof value[iteratorSymbol] === \"function\";\r\n    };\r\n}\r\n","/* es6-iterator\\for-of.js */ function _(require, module, exports) {\r\n    var isArguments = require(50) /* es5-ext/function/is-arguments */, callable = require(53) /* es5-ext/object/valid-callable */, isString = require(54) /* es5-ext/string/is-string */, get = require(82) /* ./get */;\r\n    var isArray = Array.isArray, call = Function.prototype.call, some = Array.prototype.some;\r\n    module.exports = function (iterable, cb /*, thisArg*/) {\r\n        var mode, thisArg = arguments[2], result, doBreak, broken, i, length, char, code;\r\n        if (isArray(iterable) || isArguments(iterable))\r\n            mode = \"array\";\r\n        else if (isString(iterable))\r\n            mode = \"string\";\r\n        else\r\n            iterable = get(iterable);\r\n        callable(cb);\r\n        doBreak = function () {\r\n            broken = true;\r\n        };\r\n        if (mode === \"array\") {\r\n            some.call(iterable, function (value) {\r\n                call.call(cb, thisArg, value, doBreak);\r\n                return broken;\r\n            });\r\n            return;\r\n        }\r\n        if (mode === \"string\") {\r\n            length = iterable.length;\r\n            for (i = 0; i < length; ++i) {\r\n                char = iterable[i];\r\n                if (i + 1 < length) {\r\n                    code = char.charCodeAt(0);\r\n                    if (code >= 0xd800 && code <= 0xdbff)\r\n                        char += iterable[++i];\r\n                }\r\n                call.call(cb, thisArg, char, doBreak);\r\n                if (broken)\r\n                    break;\r\n            }\r\n            return;\r\n        }\r\n        result = iterable.next();\r\n        while (!result.done) {\r\n            call.call(cb, thisArg, result.value, doBreak);\r\n            if (broken)\r\n                return;\r\n            result = iterable.next();\r\n        }\r\n    };\r\n}\r\n","/* es6-iterator\\get.js */ function _(require, module, exports) {\r\n    var isArguments = require(50) /* es5-ext/function/is-arguments */, isString = require(54) /* es5-ext/string/is-string */, ArrayIterator = require(83) /* ./array */, StringIterator = require(97) /* ./string */, iterable = require(79) /* ./valid-iterable */, iteratorSymbol = require(28) /* es6-symbol */.iterator;\r\n    module.exports = function (obj) {\r\n        if (typeof iterable(obj)[iteratorSymbol] === \"function\")\r\n            return obj[iteratorSymbol]();\r\n        if (isArguments(obj))\r\n            return new ArrayIterator(obj);\r\n        if (isString(obj))\r\n            return new StringIterator(obj);\r\n        return new ArrayIterator(obj);\r\n    };\r\n}\r\n","/* es6-iterator\\array.js */ function _(require, module, exports) {\r\n    var setPrototypeOf = require(73) /* es5-ext/object/set-prototype-of */, contains = require(42) /* es5-ext/string/#/contains */, d = require(34) /* d */, Symbol = require(28) /* es6-symbol */, Iterator = require(84) /* ./ */;\r\n    var defineProperty = Object.defineProperty, ArrayIterator;\r\n    ArrayIterator = module.exports = function (arr, kind) {\r\n        if (!(this instanceof ArrayIterator))\r\n            throw new TypeError(\"Constructor requires 'new'\");\r\n        Iterator.call(this, arr);\r\n        if (!kind)\r\n            kind = \"value\";\r\n        else if (contains.call(kind, \"key+value\"))\r\n            kind = \"key+value\";\r\n        else if (contains.call(kind, \"key\"))\r\n            kind = \"key\";\r\n        else\r\n            kind = \"value\";\r\n        defineProperty(this, \"__kind__\", d(\"\", kind));\r\n    };\r\n    if (setPrototypeOf)\r\n        setPrototypeOf(ArrayIterator, Iterator);\r\n    // Internal %ArrayIteratorPrototype% doesn't expose its constructor\r\n    delete ArrayIterator.prototype.constructor;\r\n    ArrayIterator.prototype = Object.create(Iterator.prototype, {\r\n        _resolve: d(function (i) {\r\n            if (this.__kind__ === \"value\")\r\n                return this.__list__[i];\r\n            if (this.__kind__ === \"key+value\")\r\n                return [i, this.__list__[i]];\r\n            return i;\r\n        })\r\n    });\r\n    defineProperty(ArrayIterator.prototype, Symbol.toStringTag, d(\"c\", \"Array Iterator\"));\r\n}\r\n","/* es6-iterator\\index.js */ function _(require, module, exports) {\r\n    var clear = require(68) /* es5-ext/array/#/clear */, assign = require(40) /* es5-ext/object/assign */, callable = require(53) /* es5-ext/object/valid-callable */, value = require(11) /* es5-ext/object/valid-value */, d = require(34) /* d */, autoBind = require(85) /* d/auto-bind */, Symbol = require(28) /* es6-symbol */;\r\n    var defineProperty = Object.defineProperty, defineProperties = Object.defineProperties, Iterator;\r\n    module.exports = Iterator = function (list, context) {\r\n        if (!(this instanceof Iterator))\r\n            throw new TypeError(\"Constructor requires 'new'\");\r\n        defineProperties(this, {\r\n            __list__: d(\"w\", value(list)),\r\n            __context__: d(\"w\", context),\r\n            __nextIndex__: d(\"w\", 0)\r\n        });\r\n        if (!context)\r\n            return;\r\n        callable(context.on);\r\n        context.on(\"_add\", this._onAdd);\r\n        context.on(\"_delete\", this._onDelete);\r\n        context.on(\"_clear\", this._onClear);\r\n    };\r\n    // Internal %IteratorPrototype% doesn't expose its constructor\r\n    delete Iterator.prototype.constructor;\r\n    defineProperties(Iterator.prototype, assign({\r\n        _next: d(function () {\r\n            var i;\r\n            if (!this.__list__)\r\n                return undefined;\r\n            if (this.__redo__) {\r\n                i = this.__redo__.shift();\r\n                if (i !== undefined)\r\n                    return i;\r\n            }\r\n            if (this.__nextIndex__ < this.__list__.length)\r\n                return this.__nextIndex__++;\r\n            this._unBind();\r\n            return undefined;\r\n        }),\r\n        next: d(function () {\r\n            return this._createResult(this._next());\r\n        }),\r\n        _createResult: d(function (i) {\r\n            if (i === undefined)\r\n                return { done: true, value: undefined };\r\n            return { done: false, value: this._resolve(i) };\r\n        }),\r\n        _resolve: d(function (i) {\r\n            return this.__list__[i];\r\n        }),\r\n        _unBind: d(function () {\r\n            this.__list__ = null;\r\n            delete this.__redo__;\r\n            if (!this.__context__)\r\n                return;\r\n            this.__context__.off(\"_add\", this._onAdd);\r\n            this.__context__.off(\"_delete\", this._onDelete);\r\n            this.__context__.off(\"_clear\", this._onClear);\r\n            this.__context__ = null;\r\n        }),\r\n        toString: d(function () {\r\n            return \"[object \" + (this[Symbol.toStringTag] || \"Object\") + \"]\";\r\n        })\r\n    }, autoBind({\r\n        _onAdd: d(function (index) {\r\n            if (index >= this.__nextIndex__)\r\n                return;\r\n            ++this.__nextIndex__;\r\n            if (!this.__redo__) {\r\n                defineProperty(this, \"__redo__\", d(\"c\", [index]));\r\n                return;\r\n            }\r\n            this.__redo__.forEach(function (redo, i) {\r\n                if (redo >= index)\r\n                    this.__redo__[i] = ++redo;\r\n            }, this);\r\n            this.__redo__.push(index);\r\n        }),\r\n        _onDelete: d(function (index) {\r\n            var i;\r\n            if (index >= this.__nextIndex__)\r\n                return;\r\n            --this.__nextIndex__;\r\n            if (!this.__redo__)\r\n                return;\r\n            i = this.__redo__.indexOf(index);\r\n            if (i !== -1)\r\n                this.__redo__.splice(i, 1);\r\n            this.__redo__.forEach(function (redo, j) {\r\n                if (redo > index)\r\n                    this.__redo__[j] = --redo;\r\n            }, this);\r\n        }),\r\n        _onClear: d(function () {\r\n            if (this.__redo__)\r\n                clear.call(this.__redo__);\r\n            this.__nextIndex__ = 0;\r\n        })\r\n    })));\r\n    defineProperty(Iterator.prototype, Symbol.iterator, d(function () {\r\n        return this;\r\n    }));\r\n}\r\n","/* d\\auto-bind.js */ function _(require, module, exports) {\r\n    var isValue = require(35) /* type/value/is */, ensureValue = require(86) /* type/value/ensure */, ensurePlainFunction = require(91) /* type/plain-function/ensure */, copy = require(92) /* es5-ext/object/copy */, normalizeOptions = require(41) /* es5-ext/object/normalize-options */, map = require(94) /* es5-ext/object/map */;\r\n    var bind = Function.prototype.bind, defineProperty = Object.defineProperty, hasOwnProperty = Object.prototype.hasOwnProperty, define;\r\n    define = function (name, desc, options) {\r\n        var value = ensureValue(desc) && ensurePlainFunction(desc.value), dgs;\r\n        dgs = copy(desc);\r\n        delete dgs.writable;\r\n        delete dgs.value;\r\n        dgs.get = function () {\r\n            if (!options.overwriteDefinition && hasOwnProperty.call(this, name))\r\n                return value;\r\n            desc.value = bind.call(value, options.resolveContext ? options.resolveContext(this) : this);\r\n            defineProperty(this, name, desc);\r\n            return this[name];\r\n        };\r\n        return dgs;\r\n    };\r\n    module.exports = function (props /*, options*/) {\r\n        var options = normalizeOptions(arguments[1]);\r\n        if (isValue(options.resolveContext))\r\n            ensurePlainFunction(options.resolveContext);\r\n        return map(props, function (desc, name) { return define(name, desc, options); });\r\n    };\r\n}\r\n","/* type\\value\\ensure.js */ function _(require, module, exports) {\r\n    var resolveException = require(87) /* ../lib/resolve-exception */, is = require(35) /* ./is */;\r\n    module.exports = function (value /*, options*/) {\r\n        if (is(value))\r\n            return value;\r\n        return resolveException(value, \"Cannot use %v\", arguments[1]);\r\n    };\r\n}\r\n","/* type\\lib\\resolve-exception.js */ function _(require, module, exports) {\r\n    var isValue = require(35) /* ../value/is */, isObject = require(39) /* ../object/is */, stringCoerce = require(88) /* ../string/coerce */, toShortString = require(89) /* ./to-short-string */;\r\n    var resolveMessage = function (message, value) {\r\n        return message.replace(\"%v\", toShortString(value));\r\n    };\r\n    module.exports = function (value, defaultMessage, inputOptions) {\r\n        if (!isObject(inputOptions))\r\n            throw new TypeError(resolveMessage(defaultMessage, value));\r\n        if (!isValue(value)) {\r\n            if (\"default\" in inputOptions)\r\n                return inputOptions[\"default\"];\r\n            if (inputOptions.isOptional)\r\n                return null;\r\n        }\r\n        var errorMessage = stringCoerce(inputOptions.errorMessage);\r\n        if (!isValue(errorMessage))\r\n            errorMessage = defaultMessage;\r\n        throw new TypeError(resolveMessage(errorMessage, value));\r\n    };\r\n}\r\n","/* type\\string\\coerce.js */ function _(require, module, exports) {\r\n    var isValue = require(35) /* ../value/is */, isObject = require(39) /* ../object/is */;\r\n    var objectToString = Object.prototype.toString;\r\n    module.exports = function (value) {\r\n        if (!isValue(value))\r\n            return null;\r\n        if (isObject(value)) {\r\n            // Reject Object.prototype.toString coercion\r\n            var valueToString = value.toString;\r\n            if (typeof valueToString !== \"function\")\r\n                return null;\r\n            if (valueToString === objectToString)\r\n                return null;\r\n            // Note: It can be object coming from other realm, still as there's no ES3 and CSP compliant\r\n            // way to resolve its realm's Object.prototype.toString it's left as not addressed edge case\r\n        }\r\n        try {\r\n            return \"\" + value; // Ensure implicit coercion\r\n        }\r\n        catch (error) {\r\n            return null;\r\n        }\r\n    };\r\n}\r\n","/* type\\lib\\to-short-string.js */ function _(require, module, exports) {\r\n    var safeToString = require(90) /* ./safe-to-string */;\r\n    var reNewLine = /[\\n\\r\\u2028\\u2029]/g;\r\n    module.exports = function (value) {\r\n        var string = safeToString(value);\r\n        if (string === null)\r\n            return \"<Non-coercible to string value>\";\r\n        // Trim if too long\r\n        if (string.length > 100)\r\n            string = string.slice(0, 99) + \"\";\r\n        // Replace eventual new lines\r\n        string = string.replace(reNewLine, function (char) {\r\n            switch (char) {\r\n                case \"\\n\":\r\n                    return \"\\\\n\";\r\n                case \"\\r\":\r\n                    return \"\\\\r\";\r\n                case \"\\u2028\":\r\n                    return \"\\\\u2028\";\r\n                case \"\\u2029\":\r\n                    return \"\\\\u2029\";\r\n                /* istanbul ignore next */\r\n                default:\r\n                    throw new Error(\"Unexpected character\");\r\n            }\r\n        });\r\n        return string;\r\n    };\r\n}\r\n","/* type\\lib\\safe-to-string.js */ function _(require, module, exports) {\r\n    module.exports = function (value) {\r\n        try {\r\n            return value.toString();\r\n        }\r\n        catch (error) {\r\n            try {\r\n                return String(value);\r\n            }\r\n            catch (error2) {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n}\r\n","/* type\\plain-function\\ensure.js */ function _(require, module, exports) {\r\n    var resolveException = require(87) /* ../lib/resolve-exception */, is = require(36) /* ./is */;\r\n    module.exports = function (value /*, options*/) {\r\n        if (is(value))\r\n            return value;\r\n        return resolveException(value, \"%v is not a plain function\", arguments[1]);\r\n    };\r\n}\r\n","/* es5-ext\\object\\copy.js */ function _(require, module, exports) {\r\n    var aFrom = require(93) /* ../array/from */, assign = require(40) /* ./assign */, value = require(11) /* ./valid-value */;\r\n    module.exports = function (obj /*, propertyNames, options*/) {\r\n        var copy = Object(value(obj)), propertyNames = arguments[1], options = Object(arguments[2]);\r\n        if (copy !== obj && !propertyNames)\r\n            return copy;\r\n        var result = {};\r\n        if (propertyNames) {\r\n            aFrom(propertyNames, function (propertyName) {\r\n                if (options.ensure || propertyName in obj)\r\n                    result[propertyName] = obj[propertyName];\r\n            });\r\n        }\r\n        else {\r\n            assign(result, obj);\r\n        }\r\n        return result;\r\n    };\r\n}\r\n","/* es5-ext\\array\\from\\index.js */ function _(require, module, exports) {\r\n    module.exports = require(26) /* ./is-implemented */() ? Array.from : require(27) /* ./shim */;\r\n}\r\n","/* es5-ext\\object\\map.js */ function _(require, module, exports) {\r\n    var callable = require(53) /* ./valid-callable */, forEach = require(95) /* ./for-each */, call = Function.prototype.call;\r\n    module.exports = function (obj, cb /*, thisArg*/) {\r\n        var result = {}, thisArg = arguments[2];\r\n        callable(cb);\r\n        forEach(obj, function (value, key, targetObj, index) {\r\n            result[key] = call.call(cb, thisArg, value, key, targetObj, index);\r\n        });\r\n        return result;\r\n    };\r\n}\r\n","/* es5-ext\\object\\for-each.js */ function _(require, module, exports) {\r\n    module.exports = require(96) /* ./_iterate */(\"forEach\");\r\n}\r\n","/* es5-ext\\object\\_iterate.js */ function _(require, module, exports) {\r\n    var callable = require(53) /* ./valid-callable */, value = require(11) /* ./valid-value */, bind = Function.prototype.bind, call = Function.prototype.call, keys = Object.keys, objPropertyIsEnumerable = Object.prototype.propertyIsEnumerable;\r\n    module.exports = function (method, defVal) {\r\n        return function (obj, cb /*, thisArg, compareFn*/) {\r\n            var list, thisArg = arguments[2], compareFn = arguments[3];\r\n            obj = Object(value(obj));\r\n            callable(cb);\r\n            list = keys(obj);\r\n            if (compareFn) {\r\n                list.sort(typeof compareFn === \"function\" ? bind.call(compareFn, obj) : undefined);\r\n            }\r\n            if (typeof method !== \"function\")\r\n                method = list[method];\r\n            return call.call(method, list, function (key, index) {\r\n                if (!objPropertyIsEnumerable.call(obj, key))\r\n                    return defVal;\r\n                return call.call(cb, thisArg, obj[key], key, obj, index);\r\n            });\r\n        };\r\n    };\r\n}\r\n","/* es6-iterator\\string.js */ function _(require, module, exports) {\r\n    var setPrototypeOf = require(73) /* es5-ext/object/set-prototype-of */, d = require(34) /* d */, Symbol = require(28) /* es6-symbol */, Iterator = require(84) /* ./ */;\r\n    var defineProperty = Object.defineProperty, StringIterator;\r\n    StringIterator = module.exports = function (str) {\r\n        if (!(this instanceof StringIterator))\r\n            throw new TypeError(\"Constructor requires 'new'\");\r\n        str = String(str);\r\n        Iterator.call(this, str);\r\n        defineProperty(this, \"__length__\", d(\"\", str.length));\r\n    };\r\n    if (setPrototypeOf)\r\n        setPrototypeOf(StringIterator, Iterator);\r\n    // Internal %ArrayIteratorPrototype% doesn't expose its constructor\r\n    delete StringIterator.prototype.constructor;\r\n    StringIterator.prototype = Object.create(Iterator.prototype, {\r\n        _next: d(function () {\r\n            if (!this.__list__)\r\n                return undefined;\r\n            if (this.__nextIndex__ < this.__length__)\r\n                return this.__nextIndex__++;\r\n            this._unBind();\r\n            return undefined;\r\n        }),\r\n        _resolve: d(function (i) {\r\n            var char = this.__list__[i], code;\r\n            if (this.__nextIndex__ === this.__length__)\r\n                return char;\r\n            code = char.charCodeAt(0);\r\n            if (code >= 0xd800 && code <= 0xdbff)\r\n                return char + this.__list__[this.__nextIndex__++];\r\n            return char;\r\n        })\r\n    });\r\n    defineProperty(StringIterator.prototype, Symbol.toStringTag, d(\"c\", \"String Iterator\"));\r\n}\r\n","/* es6-set\\lib\\iterator.js */ function _(require, module, exports) {\r\n    var setPrototypeOf = require(73) /* es5-ext/object/set-prototype-of */, contains = require(42) /* es5-ext/string/#/contains */, d = require(34) /* d */, Iterator = require(84) /* es6-iterator */, toStringTagSymbol = require(28) /* es6-symbol */.toStringTag, defineProperty = Object.defineProperty, SetIterator;\r\n    SetIterator = module.exports = function (set, kind) {\r\n        if (!(this instanceof SetIterator))\r\n            return new SetIterator(set, kind);\r\n        Iterator.call(this, set.__setData__, set);\r\n        if (!kind)\r\n            kind = 'value';\r\n        else if (contains.call(kind, 'key+value'))\r\n            kind = 'key+value';\r\n        else\r\n            kind = 'value';\r\n        defineProperty(this, '__kind__', d('', kind));\r\n    };\r\n    if (setPrototypeOf)\r\n        setPrototypeOf(SetIterator, Iterator);\r\n    SetIterator.prototype = Object.create(Iterator.prototype, {\r\n        constructor: d(SetIterator),\r\n        _resolve: d(function (i) {\r\n            if (this.__kind__ === 'value')\r\n                return this.__list__[i];\r\n            return [this.__list__[i], this.__list__[i]];\r\n        }),\r\n        toString: d(function () { return '[object Set Iterator]'; })\r\n    });\r\n    defineProperty(SetIterator.prototype, toStringTagSymbol, d('c', 'Set Iterator'));\r\n}\r\n","/* es6-set\\is-native-implemented.js */ function _(require, module, exports) {\r\n    module.exports = (function () {\r\n        if (typeof Set === 'undefined')\r\n            return false;\r\n        return (Object.prototype.toString.call(Set.prototype) === '[object Set]');\r\n    }());\r\n}\r\n","/* es6-map\\implement.js */ function _(require, module, exports) {\r\n    if (!require(101) /* ./is-implemented */()) {\r\n        Object.defineProperty(require(66) /* es5-ext/global */, 'Map', { value: require(102) /* ./polyfill */, configurable: true, enumerable: false,\r\n            writable: true });\r\n    }\r\n}\r\n","/* es6-map\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var map, iterator, result;\r\n        if (typeof Map !== 'function')\r\n            return false;\r\n        try {\r\n            // WebKit doesn't support arguments and crashes\r\n            map = new Map([['raz', 'one'], ['dwa', 'two'], ['trzy', 'three']]);\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n        if (String(map) !== '[object Map]')\r\n            return false;\r\n        if (map.size !== 3)\r\n            return false;\r\n        if (typeof map.clear !== 'function')\r\n            return false;\r\n        if (typeof map.delete !== 'function')\r\n            return false;\r\n        if (typeof map.entries !== 'function')\r\n            return false;\r\n        if (typeof map.forEach !== 'function')\r\n            return false;\r\n        if (typeof map.get !== 'function')\r\n            return false;\r\n        if (typeof map.has !== 'function')\r\n            return false;\r\n        if (typeof map.keys !== 'function')\r\n            return false;\r\n        if (typeof map.set !== 'function')\r\n            return false;\r\n        if (typeof map.values !== 'function')\r\n            return false;\r\n        iterator = map.entries();\r\n        result = iterator.next();\r\n        if (result.done !== false)\r\n            return false;\r\n        if (!result.value)\r\n            return false;\r\n        if (result.value[0] !== 'raz')\r\n            return false;\r\n        if (result.value[1] !== 'one')\r\n            return false;\r\n        return true;\r\n    };\r\n}\r\n","/* es6-map\\polyfill.js */ function _(require, module, exports) {\r\n    var clear = require(68) /* es5-ext/array/#/clear */, eIndexOf = require(69) /* es5-ext/array/#/e-index-of */, setPrototypeOf = require(73) /* es5-ext/object/set-prototype-of */, callable = require(53) /* es5-ext/object/valid-callable */, validValue = require(11) /* es5-ext/object/valid-value */, d = require(34) /* d */, ee = require(78) /* event-emitter */, Symbol = require(28) /* es6-symbol */, iterator = require(79) /* es6-iterator/valid-iterable */, forOf = require(81) /* es6-iterator/for-of */, Iterator = require(103) /* ./lib/iterator */, isNative = require(106) /* ./is-native-implemented */, call = Function.prototype.call, defineProperties = Object.defineProperties, getPrototypeOf = Object.getPrototypeOf, MapPoly;\r\n    module.exports = MapPoly = function ( /*iterable*/) {\r\n        var iterable = arguments[0], keys, values, self;\r\n        if (!(this instanceof MapPoly))\r\n            throw new TypeError('Constructor requires \\'new\\'');\r\n        if (isNative && setPrototypeOf && (Map !== MapPoly)) {\r\n            self = setPrototypeOf(new Map(), getPrototypeOf(this));\r\n        }\r\n        else {\r\n            self = this;\r\n        }\r\n        if (iterable != null)\r\n            iterator(iterable);\r\n        defineProperties(self, {\r\n            __mapKeysData__: d('c', keys = []),\r\n            __mapValuesData__: d('c', values = [])\r\n        });\r\n        if (!iterable)\r\n            return self;\r\n        forOf(iterable, function (value) {\r\n            var key = validValue(value)[0];\r\n            value = value[1];\r\n            if (eIndexOf.call(keys, key) !== -1)\r\n                return;\r\n            keys.push(key);\r\n            values.push(value);\r\n        }, self);\r\n        return self;\r\n    };\r\n    if (isNative) {\r\n        if (setPrototypeOf)\r\n            setPrototypeOf(MapPoly, Map);\r\n        MapPoly.prototype = Object.create(Map.prototype, {\r\n            constructor: d(MapPoly)\r\n        });\r\n    }\r\n    ee(defineProperties(MapPoly.prototype, {\r\n        clear: d(function () {\r\n            if (!this.__mapKeysData__.length)\r\n                return;\r\n            clear.call(this.__mapKeysData__);\r\n            clear.call(this.__mapValuesData__);\r\n            this.emit('_clear');\r\n        }),\r\n        delete: d(function (key) {\r\n            var index = eIndexOf.call(this.__mapKeysData__, key);\r\n            if (index === -1)\r\n                return false;\r\n            this.__mapKeysData__.splice(index, 1);\r\n            this.__mapValuesData__.splice(index, 1);\r\n            this.emit('_delete', index, key);\r\n            return true;\r\n        }),\r\n        entries: d(function () { return new Iterator(this, 'key+value'); }),\r\n        forEach: d(function (cb /*, thisArg*/) {\r\n            var thisArg = arguments[1], iterator, result;\r\n            callable(cb);\r\n            iterator = this.entries();\r\n            result = iterator._next();\r\n            while (result !== undefined) {\r\n                call.call(cb, thisArg, this.__mapValuesData__[result], this.__mapKeysData__[result], this);\r\n                result = iterator._next();\r\n            }\r\n        }),\r\n        get: d(function (key) {\r\n            var index = eIndexOf.call(this.__mapKeysData__, key);\r\n            if (index === -1)\r\n                return;\r\n            return this.__mapValuesData__[index];\r\n        }),\r\n        has: d(function (key) {\r\n            return (eIndexOf.call(this.__mapKeysData__, key) !== -1);\r\n        }),\r\n        keys: d(function () { return new Iterator(this, 'key'); }),\r\n        set: d(function (key, value) {\r\n            var index = eIndexOf.call(this.__mapKeysData__, key), emit;\r\n            if (index === -1) {\r\n                index = this.__mapKeysData__.push(key) - 1;\r\n                emit = true;\r\n            }\r\n            this.__mapValuesData__[index] = value;\r\n            if (emit)\r\n                this.emit('_add', index, key);\r\n            return this;\r\n        }),\r\n        size: d.gs(function () { return this.__mapKeysData__.length; }),\r\n        values: d(function () { return new Iterator(this, 'value'); }),\r\n        toString: d(function () { return '[object Map]'; })\r\n    }));\r\n    Object.defineProperty(MapPoly.prototype, Symbol.iterator, d(function () {\r\n        return this.entries();\r\n    }));\r\n    Object.defineProperty(MapPoly.prototype, Symbol.toStringTag, d('c', 'Map'));\r\n}\r\n","/* es6-map\\lib\\iterator.js */ function _(require, module, exports) {\r\n    var setPrototypeOf = require(73) /* es5-ext/object/set-prototype-of */, d = require(34) /* d */, Iterator = require(84) /* es6-iterator */, toStringTagSymbol = require(28) /* es6-symbol */.toStringTag, kinds = require(104) /* ./iterator-kinds */, defineProperties = Object.defineProperties, unBind = Iterator.prototype._unBind, MapIterator;\r\n    MapIterator = module.exports = function (map, kind) {\r\n        if (!(this instanceof MapIterator))\r\n            return new MapIterator(map, kind);\r\n        Iterator.call(this, map.__mapKeysData__, map);\r\n        if (!kind || !kinds[kind])\r\n            kind = 'key+value';\r\n        defineProperties(this, {\r\n            __kind__: d('', kind),\r\n            __values__: d('w', map.__mapValuesData__)\r\n        });\r\n    };\r\n    if (setPrototypeOf)\r\n        setPrototypeOf(MapIterator, Iterator);\r\n    MapIterator.prototype = Object.create(Iterator.prototype, {\r\n        constructor: d(MapIterator),\r\n        _resolve: d(function (i) {\r\n            if (this.__kind__ === 'value')\r\n                return this.__values__[i];\r\n            if (this.__kind__ === 'key')\r\n                return this.__list__[i];\r\n            return [this.__list__[i], this.__values__[i]];\r\n        }),\r\n        _unBind: d(function () {\r\n            this.__values__ = null;\r\n            unBind.call(this);\r\n        }),\r\n        toString: d(function () { return '[object Map Iterator]'; })\r\n    });\r\n    Object.defineProperty(MapIterator.prototype, toStringTagSymbol, d('c', 'Map Iterator'));\r\n}\r\n","/* es6-map\\lib\\iterator-kinds.js */ function _(require, module, exports) {\r\n    module.exports = require(105) /* es5-ext/object/primitive-set */('key', 'value', 'key+value');\r\n}\r\n","/* es5-ext\\object\\primitive-set.js */ function _(require, module, exports) {\r\n    var forEach = Array.prototype.forEach, create = Object.create;\r\n    // eslint-disable-next-line no-unused-vars\r\n    module.exports = function (arg /*, args*/) {\r\n        var set = create(null);\r\n        forEach.call(arguments, function (name) { set[name] = true; });\r\n        return set;\r\n    };\r\n}\r\n","/* es6-map\\is-native-implemented.js */ function _(require, module, exports) {\r\n    module.exports = (function () {\r\n        if (typeof Map === 'undefined')\r\n            return false;\r\n        return (Object.prototype.toString.call(new Map()) === '[object Map]');\r\n    }());\r\n}\r\n","/* es6-weak-map\\implement.js */ function _(require, module, exports) {\r\n    if (!require(108) /* ./is-implemented */()) {\r\n        Object.defineProperty(require(66) /* es5-ext/global */, \"WeakMap\", {\r\n            value: require(109) /* ./polyfill */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es6-weak-map\\is-implemented.js */ function _(require, module, exports) {\r\n    module.exports = function () {\r\n        var weakMap, obj;\r\n        if (typeof WeakMap !== \"function\")\r\n            return false;\r\n        try {\r\n            // WebKit doesn't support arguments and crashes\r\n            weakMap = new WeakMap([[obj = {}, \"one\"], [{}, \"two\"], [{}, \"three\"]]);\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n        if (String(weakMap) !== \"[object WeakMap]\")\r\n            return false;\r\n        if (typeof weakMap.set !== \"function\")\r\n            return false;\r\n        if (weakMap.set({}, 1) !== weakMap)\r\n            return false;\r\n        if (typeof weakMap.delete !== \"function\")\r\n            return false;\r\n        if (typeof weakMap.has !== \"function\")\r\n            return false;\r\n        if (weakMap.get(obj) !== \"one\")\r\n            return false;\r\n        return true;\r\n    };\r\n}\r\n","/* es6-weak-map\\polyfill.js */ function _(require, module, exports) {\r\n    var isValue = require(9) /* es5-ext/object/is-value */, setPrototypeOf = require(73) /* es5-ext/object/set-prototype-of */, object = require(110) /* es5-ext/object/valid-object */, ensureValue = require(11) /* es5-ext/object/valid-value */, randomUniq = require(111) /* es5-ext/string/random-uniq */, d = require(34) /* d */, getIterator = require(82) /* es6-iterator/get */, forOf = require(81) /* es6-iterator/for-of */, toStringTagSymbol = require(28) /* es6-symbol */.toStringTag, isNative = require(112) /* ./is-native-implemented */, isArray = Array.isArray, defineProperty = Object.defineProperty, objHasOwnProperty = Object.prototype.hasOwnProperty, getPrototypeOf = Object.getPrototypeOf, WeakMapPoly;\r\n    module.exports = WeakMapPoly = function ( /* Iterable*/) {\r\n        var iterable = arguments[0], self;\r\n        if (!(this instanceof WeakMapPoly))\r\n            throw new TypeError(\"Constructor requires 'new'\");\r\n        self = isNative && setPrototypeOf && (WeakMap !== WeakMapPoly)\r\n            ? setPrototypeOf(new WeakMap(), getPrototypeOf(this)) : this;\r\n        if (isValue(iterable)) {\r\n            if (!isArray(iterable))\r\n                iterable = getIterator(iterable);\r\n        }\r\n        defineProperty(self, \"__weakMapData__\", d(\"c\", \"$weakMap$\" + randomUniq()));\r\n        if (!iterable)\r\n            return self;\r\n        forOf(iterable, function (val) {\r\n            ensureValue(val);\r\n            self.set(val[0], val[1]);\r\n        });\r\n        return self;\r\n    };\r\n    if (isNative) {\r\n        if (setPrototypeOf)\r\n            setPrototypeOf(WeakMapPoly, WeakMap);\r\n        WeakMapPoly.prototype = Object.create(WeakMap.prototype, { constructor: d(WeakMapPoly) });\r\n    }\r\n    Object.defineProperties(WeakMapPoly.prototype, {\r\n        delete: d(function (key) {\r\n            if (objHasOwnProperty.call(object(key), this.__weakMapData__)) {\r\n                delete key[this.__weakMapData__];\r\n                return true;\r\n            }\r\n            return false;\r\n        }),\r\n        get: d(function (key) {\r\n            if (!objHasOwnProperty.call(object(key), this.__weakMapData__))\r\n                return undefined;\r\n            return key[this.__weakMapData__];\r\n        }),\r\n        has: d(function (key) {\r\n            return objHasOwnProperty.call(object(key), this.__weakMapData__);\r\n        }),\r\n        set: d(function (key, value) {\r\n            defineProperty(object(key), this.__weakMapData__, d(\"c\", value));\r\n            return this;\r\n        }),\r\n        toString: d(function () {\r\n            return \"[object WeakMap]\";\r\n        })\r\n    });\r\n    defineProperty(WeakMapPoly.prototype, toStringTagSymbol, d(\"c\", \"WeakMap\"));\r\n}\r\n","/* es5-ext\\object\\valid-object.js */ function _(require, module, exports) {\r\n    var isObject = require(76) /* ./is-object */;\r\n    module.exports = function (value) {\r\n        if (!isObject(value))\r\n            throw new TypeError(value + \" is not an Object\");\r\n        return value;\r\n    };\r\n}\r\n","/* es5-ext\\string\\random-uniq.js */ function _(require, module, exports) {\r\n    var generated = Object.create(null), random = Math.random;\r\n    module.exports = function () {\r\n        var str;\r\n        do {\r\n            str = random().toString(36).slice(2);\r\n        } while (generated[str]);\r\n        return str;\r\n    };\r\n}\r\n","/* es6-weak-map\\is-native-implemented.js */ function _(require, module, exports) {\r\n    module.exports = (function () {\r\n        if (typeof WeakMap !== \"function\")\r\n            return false;\r\n        return Object.prototype.toString.call(new WeakMap()) === \"[object WeakMap]\";\r\n    }());\r\n}\r\n","/* es6-symbol\\implement.js */ function _(require, module, exports) {\r\n    if (!require(29) /* ./is-implemented */()) {\r\n        Object.defineProperty(require(30) /* ext/global-this */, \"Symbol\", {\r\n            value: require(33) /* ./polyfill */,\r\n            configurable: true,\r\n            enumerable: false,\r\n            writable: true\r\n        });\r\n    }\r\n}\r\n","/* es6-promise\\auto.js */ function _(require, module, exports) {\r\n    module.exports = require(115) /* ./ */.polyfill();\r\n}\r\n","/* es6-promise\\dist\\es6-promise.js */ function _(require, module, exports) {\r\n    /*!\r\n     * @overview es6-promise - a tiny implementation of Promises/A+.\r\n     * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\r\n     * @license   Licensed under MIT license\r\n     *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\r\n     * @version   v4.2.8+1e68dce6\r\n     */\r\n    (function (global, factory) {\r\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n            typeof define === 'function' && define.amd ? define(factory) :\r\n                (global.ES6Promise = factory());\r\n    }(this, (function () {\r\n        'use strict';\r\n        function objectOrFunction(x) {\r\n            var type = typeof x;\r\n            return x !== null && (type === 'object' || type === 'function');\r\n        }\r\n        function isFunction(x) {\r\n            return typeof x === 'function';\r\n        }\r\n        var _isArray = void 0;\r\n        if (Array.isArray) {\r\n            _isArray = Array.isArray;\r\n        }\r\n        else {\r\n            _isArray = function (x) {\r\n                return Object.prototype.toString.call(x) === '[object Array]';\r\n            };\r\n        }\r\n        var isArray = _isArray;\r\n        var len = 0;\r\n        var vertxNext = void 0;\r\n        var customSchedulerFn = void 0;\r\n        var asap = function asap(callback, arg) {\r\n            queue[len] = callback;\r\n            queue[len + 1] = arg;\r\n            len += 2;\r\n            if (len === 2) {\r\n                // If len is 2, that means that we need to schedule an async flush.\r\n                // If additional callbacks are queued before the queue is flushed, they\r\n                // will be processed by this flush that we are scheduling.\r\n                if (customSchedulerFn) {\r\n                    customSchedulerFn(flush);\r\n                }\r\n                else {\r\n                    scheduleFlush();\r\n                }\r\n            }\r\n        };\r\n        function setScheduler(scheduleFn) {\r\n            customSchedulerFn = scheduleFn;\r\n        }\r\n        function setAsap(asapFn) {\r\n            asap = asapFn;\r\n        }\r\n        var browserWindow = typeof window !== 'undefined' ? window : undefined;\r\n        var browserGlobal = browserWindow || {};\r\n        var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\r\n        var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\r\n        // test for web worker but not in IE10\r\n        var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\r\n        // node\r\n        function useNextTick() {\r\n            // node version 0.10.x displays a deprecation warning when nextTick is used recursively\r\n            // see https://github.com/cujojs/when/issues/410 for details\r\n            return function () {\r\n                return process.nextTick(flush);\r\n            };\r\n        }\r\n        // vertx\r\n        function useVertxTimer() {\r\n            if (typeof vertxNext !== 'undefined') {\r\n                return function () {\r\n                    vertxNext(flush);\r\n                };\r\n            }\r\n            return useSetTimeout();\r\n        }\r\n        function useMutationObserver() {\r\n            var iterations = 0;\r\n            var observer = new BrowserMutationObserver(flush);\r\n            var node = document.createTextNode('');\r\n            observer.observe(node, { characterData: true });\r\n            return function () {\r\n                node.data = iterations = ++iterations % 2;\r\n            };\r\n        }\r\n        // web worker\r\n        function useMessageChannel() {\r\n            var channel = new MessageChannel();\r\n            channel.port1.onmessage = flush;\r\n            return function () {\r\n                return channel.port2.postMessage(0);\r\n            };\r\n        }\r\n        function useSetTimeout() {\r\n            // Store setTimeout reference so es6-promise will be unaffected by\r\n            // other code modifying setTimeout (like sinon.useFakeTimers())\r\n            var globalSetTimeout = setTimeout;\r\n            return function () {\r\n                return globalSetTimeout(flush, 1);\r\n            };\r\n        }\r\n        var queue = new Array(1000);\r\n        function flush() {\r\n            for (var i = 0; i < len; i += 2) {\r\n                var callback = queue[i];\r\n                var arg = queue[i + 1];\r\n                callback(arg);\r\n                queue[i] = undefined;\r\n                queue[i + 1] = undefined;\r\n            }\r\n            len = 0;\r\n        }\r\n        function attemptVertx() {\r\n            try {\r\n                var vertx = Function('return this')().require('vertx');\r\n                vertxNext = vertx.runOnLoop || vertx.runOnContext;\r\n                return useVertxTimer();\r\n            }\r\n            catch (e) {\r\n                return useSetTimeout();\r\n            }\r\n        }\r\n        var scheduleFlush = void 0;\r\n        // Decide what async method to use to triggering processing of queued callbacks:\r\n        if (isNode) {\r\n            scheduleFlush = useNextTick();\r\n        }\r\n        else if (BrowserMutationObserver) {\r\n            scheduleFlush = useMutationObserver();\r\n        }\r\n        else if (isWorker) {\r\n            scheduleFlush = useMessageChannel();\r\n        }\r\n        else if (browserWindow === undefined && typeof require === 'function') {\r\n            scheduleFlush = attemptVertx();\r\n        }\r\n        else {\r\n            scheduleFlush = useSetTimeout();\r\n        }\r\n        function then(onFulfillment, onRejection) {\r\n            var parent = this;\r\n            var child = new this.constructor(noop);\r\n            if (child[PROMISE_ID] === undefined) {\r\n                makePromise(child);\r\n            }\r\n            var _state = parent._state;\r\n            if (_state) {\r\n                var callback = arguments[_state - 1];\r\n                asap(function () {\r\n                    return invokeCallback(_state, child, callback, parent._result);\r\n                });\r\n            }\r\n            else {\r\n                subscribe(parent, child, onFulfillment, onRejection);\r\n            }\r\n            return child;\r\n        }\r\n        /**\r\n          `Promise.resolve` returns a promise that will become resolved with the\r\n          passed `value`. It is shorthand for the following:\r\n        \r\n          ```javascript\r\n          let promise = new Promise(function(resolve, reject){\r\n            resolve(1);\r\n          });\r\n        \r\n          promise.then(function(value){\r\n            // value === 1\r\n          });\r\n          ```\r\n        \r\n          Instead of writing the above, your code now simply becomes the following:\r\n        \r\n          ```javascript\r\n          let promise = Promise.resolve(1);\r\n        \r\n          promise.then(function(value){\r\n            // value === 1\r\n          });\r\n          ```\r\n        \r\n          @method resolve\r\n          @static\r\n          @param {Any} value value that the returned promise will be resolved with\r\n          Useful for tooling.\r\n          @return {Promise} a promise that will become fulfilled with the given\r\n          `value`\r\n        */\r\n        function resolve$1(object) {\r\n            /*jshint validthis:true */\r\n            var Constructor = this;\r\n            if (object && typeof object === 'object' && object.constructor === Constructor) {\r\n                return object;\r\n            }\r\n            var promise = new Constructor(noop);\r\n            resolve(promise, object);\r\n            return promise;\r\n        }\r\n        var PROMISE_ID = Math.random().toString(36).substring(2);\r\n        function noop() { }\r\n        var PENDING = void 0;\r\n        var FULFILLED = 1;\r\n        var REJECTED = 2;\r\n        function selfFulfillment() {\r\n            return new TypeError(\"You cannot resolve a promise with itself\");\r\n        }\r\n        function cannotReturnOwn() {\r\n            return new TypeError('A promises callback cannot return that same promise.');\r\n        }\r\n        function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\r\n            try {\r\n                then$$1.call(value, fulfillmentHandler, rejectionHandler);\r\n            }\r\n            catch (e) {\r\n                return e;\r\n            }\r\n        }\r\n        function handleForeignThenable(promise, thenable, then$$1) {\r\n            asap(function (promise) {\r\n                var sealed = false;\r\n                var error = tryThen(then$$1, thenable, function (value) {\r\n                    if (sealed) {\r\n                        return;\r\n                    }\r\n                    sealed = true;\r\n                    if (thenable !== value) {\r\n                        resolve(promise, value);\r\n                    }\r\n                    else {\r\n                        fulfill(promise, value);\r\n                    }\r\n                }, function (reason) {\r\n                    if (sealed) {\r\n                        return;\r\n                    }\r\n                    sealed = true;\r\n                    reject(promise, reason);\r\n                }, 'Settle: ' + (promise._label || ' unknown promise'));\r\n                if (!sealed && error) {\r\n                    sealed = true;\r\n                    reject(promise, error);\r\n                }\r\n            }, promise);\r\n        }\r\n        function handleOwnThenable(promise, thenable) {\r\n            if (thenable._state === FULFILLED) {\r\n                fulfill(promise, thenable._result);\r\n            }\r\n            else if (thenable._state === REJECTED) {\r\n                reject(promise, thenable._result);\r\n            }\r\n            else {\r\n                subscribe(thenable, undefined, function (value) {\r\n                    return resolve(promise, value);\r\n                }, function (reason) {\r\n                    return reject(promise, reason);\r\n                });\r\n            }\r\n        }\r\n        function handleMaybeThenable(promise, maybeThenable, then$$1) {\r\n            if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\r\n                handleOwnThenable(promise, maybeThenable);\r\n            }\r\n            else {\r\n                if (then$$1 === undefined) {\r\n                    fulfill(promise, maybeThenable);\r\n                }\r\n                else if (isFunction(then$$1)) {\r\n                    handleForeignThenable(promise, maybeThenable, then$$1);\r\n                }\r\n                else {\r\n                    fulfill(promise, maybeThenable);\r\n                }\r\n            }\r\n        }\r\n        function resolve(promise, value) {\r\n            if (promise === value) {\r\n                reject(promise, selfFulfillment());\r\n            }\r\n            else if (objectOrFunction(value)) {\r\n                var then$$1 = void 0;\r\n                try {\r\n                    then$$1 = value.then;\r\n                }\r\n                catch (error) {\r\n                    reject(promise, error);\r\n                    return;\r\n                }\r\n                handleMaybeThenable(promise, value, then$$1);\r\n            }\r\n            else {\r\n                fulfill(promise, value);\r\n            }\r\n        }\r\n        function publishRejection(promise) {\r\n            if (promise._onerror) {\r\n                promise._onerror(promise._result);\r\n            }\r\n            publish(promise);\r\n        }\r\n        function fulfill(promise, value) {\r\n            if (promise._state !== PENDING) {\r\n                return;\r\n            }\r\n            promise._result = value;\r\n            promise._state = FULFILLED;\r\n            if (promise._subscribers.length !== 0) {\r\n                asap(publish, promise);\r\n            }\r\n        }\r\n        function reject(promise, reason) {\r\n            if (promise._state !== PENDING) {\r\n                return;\r\n            }\r\n            promise._state = REJECTED;\r\n            promise._result = reason;\r\n            asap(publishRejection, promise);\r\n        }\r\n        function subscribe(parent, child, onFulfillment, onRejection) {\r\n            var _subscribers = parent._subscribers;\r\n            var length = _subscribers.length;\r\n            parent._onerror = null;\r\n            _subscribers[length] = child;\r\n            _subscribers[length + FULFILLED] = onFulfillment;\r\n            _subscribers[length + REJECTED] = onRejection;\r\n            if (length === 0 && parent._state) {\r\n                asap(publish, parent);\r\n            }\r\n        }\r\n        function publish(promise) {\r\n            var subscribers = promise._subscribers;\r\n            var settled = promise._state;\r\n            if (subscribers.length === 0) {\r\n                return;\r\n            }\r\n            var child = void 0, callback = void 0, detail = promise._result;\r\n            for (var i = 0; i < subscribers.length; i += 3) {\r\n                child = subscribers[i];\r\n                callback = subscribers[i + settled];\r\n                if (child) {\r\n                    invokeCallback(settled, child, callback, detail);\r\n                }\r\n                else {\r\n                    callback(detail);\r\n                }\r\n            }\r\n            promise._subscribers.length = 0;\r\n        }\r\n        function invokeCallback(settled, promise, callback, detail) {\r\n            var hasCallback = isFunction(callback), value = void 0, error = void 0, succeeded = true;\r\n            if (hasCallback) {\r\n                try {\r\n                    value = callback(detail);\r\n                }\r\n                catch (e) {\r\n                    succeeded = false;\r\n                    error = e;\r\n                }\r\n                if (promise === value) {\r\n                    reject(promise, cannotReturnOwn());\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                value = detail;\r\n            }\r\n            if (promise._state !== PENDING) {\r\n                // noop\r\n            }\r\n            else if (hasCallback && succeeded) {\r\n                resolve(promise, value);\r\n            }\r\n            else if (succeeded === false) {\r\n                reject(promise, error);\r\n            }\r\n            else if (settled === FULFILLED) {\r\n                fulfill(promise, value);\r\n            }\r\n            else if (settled === REJECTED) {\r\n                reject(promise, value);\r\n            }\r\n        }\r\n        function initializePromise(promise, resolver) {\r\n            try {\r\n                resolver(function resolvePromise(value) {\r\n                    resolve(promise, value);\r\n                }, function rejectPromise(reason) {\r\n                    reject(promise, reason);\r\n                });\r\n            }\r\n            catch (e) {\r\n                reject(promise, e);\r\n            }\r\n        }\r\n        var id = 0;\r\n        function nextId() {\r\n            return id++;\r\n        }\r\n        function makePromise(promise) {\r\n            promise[PROMISE_ID] = id++;\r\n            promise._state = undefined;\r\n            promise._result = undefined;\r\n            promise._subscribers = [];\r\n        }\r\n        function validationError() {\r\n            return new Error('Array Methods must be provided an Array');\r\n        }\r\n        var Enumerator = function () {\r\n            function Enumerator(Constructor, input) {\r\n                this._instanceConstructor = Constructor;\r\n                this.promise = new Constructor(noop);\r\n                if (!this.promise[PROMISE_ID]) {\r\n                    makePromise(this.promise);\r\n                }\r\n                if (isArray(input)) {\r\n                    this.length = input.length;\r\n                    this._remaining = input.length;\r\n                    this._result = new Array(this.length);\r\n                    if (this.length === 0) {\r\n                        fulfill(this.promise, this._result);\r\n                    }\r\n                    else {\r\n                        this.length = this.length || 0;\r\n                        this._enumerate(input);\r\n                        if (this._remaining === 0) {\r\n                            fulfill(this.promise, this._result);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    reject(this.promise, validationError());\r\n                }\r\n            }\r\n            Enumerator.prototype._enumerate = function _enumerate(input) {\r\n                for (var i = 0; this._state === PENDING && i < input.length; i++) {\r\n                    this._eachEntry(input[i], i);\r\n                }\r\n            };\r\n            Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\r\n                var c = this._instanceConstructor;\r\n                var resolve$$1 = c.resolve;\r\n                if (resolve$$1 === resolve$1) {\r\n                    var _then = void 0;\r\n                    var error = void 0;\r\n                    var didError = false;\r\n                    try {\r\n                        _then = entry.then;\r\n                    }\r\n                    catch (e) {\r\n                        didError = true;\r\n                        error = e;\r\n                    }\r\n                    if (_then === then && entry._state !== PENDING) {\r\n                        this._settledAt(entry._state, i, entry._result);\r\n                    }\r\n                    else if (typeof _then !== 'function') {\r\n                        this._remaining--;\r\n                        this._result[i] = entry;\r\n                    }\r\n                    else if (c === Promise$1) {\r\n                        var promise = new c(noop);\r\n                        if (didError) {\r\n                            reject(promise, error);\r\n                        }\r\n                        else {\r\n                            handleMaybeThenable(promise, entry, _then);\r\n                        }\r\n                        this._willSettleAt(promise, i);\r\n                    }\r\n                    else {\r\n                        this._willSettleAt(new c(function (resolve$$1) {\r\n                            return resolve$$1(entry);\r\n                        }), i);\r\n                    }\r\n                }\r\n                else {\r\n                    this._willSettleAt(resolve$$1(entry), i);\r\n                }\r\n            };\r\n            Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\r\n                var promise = this.promise;\r\n                if (promise._state === PENDING) {\r\n                    this._remaining--;\r\n                    if (state === REJECTED) {\r\n                        reject(promise, value);\r\n                    }\r\n                    else {\r\n                        this._result[i] = value;\r\n                    }\r\n                }\r\n                if (this._remaining === 0) {\r\n                    fulfill(promise, this._result);\r\n                }\r\n            };\r\n            Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\r\n                var enumerator = this;\r\n                subscribe(promise, undefined, function (value) {\r\n                    return enumerator._settledAt(FULFILLED, i, value);\r\n                }, function (reason) {\r\n                    return enumerator._settledAt(REJECTED, i, reason);\r\n                });\r\n            };\r\n            return Enumerator;\r\n        }();\r\n        /**\r\n          `Promise.all` accepts an array of promises, and returns a new promise which\r\n          is fulfilled with an array of fulfillment values for the passed promises, or\r\n          rejected with the reason of the first passed promise to be rejected. It casts all\r\n          elements of the passed iterable to promises as it runs this algorithm.\r\n        \r\n          Example:\r\n        \r\n          ```javascript\r\n          let promise1 = resolve(1);\r\n          let promise2 = resolve(2);\r\n          let promise3 = resolve(3);\r\n          let promises = [ promise1, promise2, promise3 ];\r\n        \r\n          Promise.all(promises).then(function(array){\r\n            // The array here would be [ 1, 2, 3 ];\r\n          });\r\n          ```\r\n        \r\n          If any of the `promises` given to `all` are rejected, the first promise\r\n          that is rejected will be given as an argument to the returned promises's\r\n          rejection handler. For example:\r\n        \r\n          Example:\r\n        \r\n          ```javascript\r\n          let promise1 = resolve(1);\r\n          let promise2 = reject(new Error(\"2\"));\r\n          let promise3 = reject(new Error(\"3\"));\r\n          let promises = [ promise1, promise2, promise3 ];\r\n        \r\n          Promise.all(promises).then(function(array){\r\n            // Code here never runs because there are rejected promises!\r\n          }, function(error) {\r\n            // error.message === \"2\"\r\n          });\r\n          ```\r\n        \r\n          @method all\r\n          @static\r\n          @param {Array} entries array of promises\r\n          @param {String} label optional string for labeling the promise.\r\n          Useful for tooling.\r\n          @return {Promise} promise that is fulfilled when all `promises` have been\r\n          fulfilled, or rejected if any of them become rejected.\r\n          @static\r\n        */\r\n        function all(entries) {\r\n            return new Enumerator(this, entries).promise;\r\n        }\r\n        /**\r\n          `Promise.race` returns a new promise which is settled in the same way as the\r\n          first passed promise to settle.\r\n        \r\n          Example:\r\n        \r\n          ```javascript\r\n          let promise1 = new Promise(function(resolve, reject){\r\n            setTimeout(function(){\r\n              resolve('promise 1');\r\n            }, 200);\r\n          });\r\n        \r\n          let promise2 = new Promise(function(resolve, reject){\r\n            setTimeout(function(){\r\n              resolve('promise 2');\r\n            }, 100);\r\n          });\r\n        \r\n          Promise.race([promise1, promise2]).then(function(result){\r\n            // result === 'promise 2' because it was resolved before promise1\r\n            // was resolved.\r\n          });\r\n          ```\r\n        \r\n          `Promise.race` is deterministic in that only the state of the first\r\n          settled promise matters. For example, even if other promises given to the\r\n          `promises` array argument are resolved, but the first settled promise has\r\n          become rejected before the other promises became fulfilled, the returned\r\n          promise will become rejected:\r\n        \r\n          ```javascript\r\n          let promise1 = new Promise(function(resolve, reject){\r\n            setTimeout(function(){\r\n              resolve('promise 1');\r\n            }, 200);\r\n          });\r\n        \r\n          let promise2 = new Promise(function(resolve, reject){\r\n            setTimeout(function(){\r\n              reject(new Error('promise 2'));\r\n            }, 100);\r\n          });\r\n        \r\n          Promise.race([promise1, promise2]).then(function(result){\r\n            // Code here never runs\r\n          }, function(reason){\r\n            // reason.message === 'promise 2' because promise 2 became rejected before\r\n            // promise 1 became fulfilled\r\n          });\r\n          ```\r\n        \r\n          An example real-world use case is implementing timeouts:\r\n        \r\n          ```javascript\r\n          Promise.race([ajax('foo.json'), timeout(5000)])\r\n          ```\r\n        \r\n          @method race\r\n          @static\r\n          @param {Array} promises array of promises to observe\r\n          Useful for tooling.\r\n          @return {Promise} a promise which settles in the same way as the first passed\r\n          promise to settle.\r\n        */\r\n        function race(entries) {\r\n            /*jshint validthis:true */\r\n            var Constructor = this;\r\n            if (!isArray(entries)) {\r\n                return new Constructor(function (_, reject) {\r\n                    return reject(new TypeError('You must pass an array to race.'));\r\n                });\r\n            }\r\n            else {\r\n                return new Constructor(function (resolve, reject) {\r\n                    var length = entries.length;\r\n                    for (var i = 0; i < length; i++) {\r\n                        Constructor.resolve(entries[i]).then(resolve, reject);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        /**\r\n          `Promise.reject` returns a promise rejected with the passed `reason`.\r\n          It is shorthand for the following:\r\n        \r\n          ```javascript\r\n          let promise = new Promise(function(resolve, reject){\r\n            reject(new Error('WHOOPS'));\r\n          });\r\n        \r\n          promise.then(function(value){\r\n            // Code here doesn't run because the promise is rejected!\r\n          }, function(reason){\r\n            // reason.message === 'WHOOPS'\r\n          });\r\n          ```\r\n        \r\n          Instead of writing the above, your code now simply becomes the following:\r\n        \r\n          ```javascript\r\n          let promise = Promise.reject(new Error('WHOOPS'));\r\n        \r\n          promise.then(function(value){\r\n            // Code here doesn't run because the promise is rejected!\r\n          }, function(reason){\r\n            // reason.message === 'WHOOPS'\r\n          });\r\n          ```\r\n        \r\n          @method reject\r\n          @static\r\n          @param {Any} reason value that the returned promise will be rejected with.\r\n          Useful for tooling.\r\n          @return {Promise} a promise rejected with the given `reason`.\r\n        */\r\n        function reject$1(reason) {\r\n            /*jshint validthis:true */\r\n            var Constructor = this;\r\n            var promise = new Constructor(noop);\r\n            reject(promise, reason);\r\n            return promise;\r\n        }\r\n        function needsResolver() {\r\n            throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\r\n        }\r\n        function needsNew() {\r\n            throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\r\n        }\r\n        /**\r\n          Promise objects represent the eventual result of an asynchronous operation. The\r\n          primary way of interacting with a promise is through its `then` method, which\r\n          registers callbacks to receive either a promise's eventual value or the reason\r\n          why the promise cannot be fulfilled.\r\n        \r\n          Terminology\r\n          -----------\r\n        \r\n          - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\r\n          - `thenable` is an object or function that defines a `then` method.\r\n          - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\r\n          - `exception` is a value that is thrown using the throw statement.\r\n          - `reason` is a value that indicates why a promise was rejected.\r\n          - `settled` the final resting state of a promise, fulfilled or rejected.\r\n        \r\n          A promise can be in one of three states: pending, fulfilled, or rejected.\r\n        \r\n          Promises that are fulfilled have a fulfillment value and are in the fulfilled\r\n          state.  Promises that are rejected have a rejection reason and are in the\r\n          rejected state.  A fulfillment value is never a thenable.\r\n        \r\n          Promises can also be said to *resolve* a value.  If this value is also a\r\n          promise, then the original promise's settled state will match the value's\r\n          settled state.  So a promise that *resolves* a promise that rejects will\r\n          itself reject, and a promise that *resolves* a promise that fulfills will\r\n          itself fulfill.\r\n        \r\n        \r\n          Basic Usage:\r\n          ------------\r\n        \r\n          ```js\r\n          let promise = new Promise(function(resolve, reject) {\r\n            // on success\r\n            resolve(value);\r\n        \r\n            // on failure\r\n            reject(reason);\r\n          });\r\n        \r\n          promise.then(function(value) {\r\n            // on fulfillment\r\n          }, function(reason) {\r\n            // on rejection\r\n          });\r\n          ```\r\n        \r\n          Advanced Usage:\r\n          ---------------\r\n        \r\n          Promises shine when abstracting away asynchronous interactions such as\r\n          `XMLHttpRequest`s.\r\n        \r\n          ```js\r\n          function getJSON(url) {\r\n            return new Promise(function(resolve, reject){\r\n              let xhr = new XMLHttpRequest();\r\n        \r\n              xhr.open('GET', url);\r\n              xhr.onreadystatechange = handler;\r\n              xhr.responseType = 'json';\r\n              xhr.setRequestHeader('Accept', 'application/json');\r\n              xhr.send();\r\n        \r\n              function handler() {\r\n                if (this.readyState === this.DONE) {\r\n                  if (this.status === 200) {\r\n                    resolve(this.response);\r\n                  } else {\r\n                    reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\r\n                  }\r\n                }\r\n              };\r\n            });\r\n          }\r\n        \r\n          getJSON('/posts.json').then(function(json) {\r\n            // on fulfillment\r\n          }, function(reason) {\r\n            // on rejection\r\n          });\r\n          ```\r\n        \r\n          Unlike callbacks, promises are great composable primitives.\r\n        \r\n          ```js\r\n          Promise.all([\r\n            getJSON('/posts'),\r\n            getJSON('/comments')\r\n          ]).then(function(values){\r\n            values[0] // => postsJSON\r\n            values[1] // => commentsJSON\r\n        \r\n            return values;\r\n          });\r\n          ```\r\n        \r\n          @class Promise\r\n          @param {Function} resolver\r\n          Useful for tooling.\r\n          @constructor\r\n        */\r\n        var Promise$1 = function () {\r\n            function Promise(resolver) {\r\n                this[PROMISE_ID] = nextId();\r\n                this._result = this._state = undefined;\r\n                this._subscribers = [];\r\n                if (noop !== resolver) {\r\n                    typeof resolver !== 'function' && needsResolver();\r\n                    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\r\n                }\r\n            }\r\n            /**\r\n            The primary way of interacting with a promise is through its `then` method,\r\n            which registers callbacks to receive either a promise's eventual value or the\r\n            reason why the promise cannot be fulfilled.\r\n             ```js\r\n            findUser().then(function(user){\r\n              // user is available\r\n            }, function(reason){\r\n              // user is unavailable, and you are given the reason why\r\n            });\r\n            ```\r\n             Chaining\r\n            --------\r\n             The return value of `then` is itself a promise.  This second, 'downstream'\r\n            promise is resolved with the return value of the first promise's fulfillment\r\n            or rejection handler, or rejected if the handler throws an exception.\r\n             ```js\r\n            findUser().then(function (user) {\r\n              return user.name;\r\n            }, function (reason) {\r\n              return 'default name';\r\n            }).then(function (userName) {\r\n              // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\r\n              // will be `'default name'`\r\n            });\r\n             findUser().then(function (user) {\r\n              throw new Error('Found user, but still unhappy');\r\n            }, function (reason) {\r\n              throw new Error('`findUser` rejected and we're unhappy');\r\n            }).then(function (value) {\r\n              // never reached\r\n            }, function (reason) {\r\n              // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\r\n              // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\r\n            });\r\n            ```\r\n            If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\r\n             ```js\r\n            findUser().then(function (user) {\r\n              throw new PedagogicalException('Upstream error');\r\n            }).then(function (value) {\r\n              // never reached\r\n            }).then(function (value) {\r\n              // never reached\r\n            }, function (reason) {\r\n              // The `PedgagocialException` is propagated all the way down to here\r\n            });\r\n            ```\r\n             Assimilation\r\n            ------------\r\n             Sometimes the value you want to propagate to a downstream promise can only be\r\n            retrieved asynchronously. This can be achieved by returning a promise in the\r\n            fulfillment or rejection handler. The downstream promise will then be pending\r\n            until the returned promise is settled. This is called *assimilation*.\r\n             ```js\r\n            findUser().then(function (user) {\r\n              return findCommentsByAuthor(user);\r\n            }).then(function (comments) {\r\n              // The user's comments are now available\r\n            });\r\n            ```\r\n             If the assimliated promise rejects, then the downstream promise will also reject.\r\n             ```js\r\n            findUser().then(function (user) {\r\n              return findCommentsByAuthor(user);\r\n            }).then(function (comments) {\r\n              // If `findCommentsByAuthor` fulfills, we'll have the value here\r\n            }, function (reason) {\r\n              // If `findCommentsByAuthor` rejects, we'll have the reason here\r\n            });\r\n            ```\r\n             Simple Example\r\n            --------------\r\n             Synchronous Example\r\n             ```javascript\r\n            let result;\r\n             try {\r\n              result = findResult();\r\n              // success\r\n            } catch(reason) {\r\n              // failure\r\n            }\r\n            ```\r\n             Errback Example\r\n             ```js\r\n            findResult(function(result, err){\r\n              if (err) {\r\n                // failure\r\n              } else {\r\n                // success\r\n              }\r\n            });\r\n            ```\r\n             Promise Example;\r\n             ```javascript\r\n            findResult().then(function(result){\r\n              // success\r\n            }, function(reason){\r\n              // failure\r\n            });\r\n            ```\r\n             Advanced Example\r\n            --------------\r\n             Synchronous Example\r\n             ```javascript\r\n            let author, books;\r\n             try {\r\n              author = findAuthor();\r\n              books  = findBooksByAuthor(author);\r\n              // success\r\n            } catch(reason) {\r\n              // failure\r\n            }\r\n            ```\r\n             Errback Example\r\n             ```js\r\n             function foundBooks(books) {\r\n             }\r\n             function failure(reason) {\r\n             }\r\n             findAuthor(function(author, err){\r\n              if (err) {\r\n                failure(err);\r\n                // failure\r\n              } else {\r\n                try {\r\n                  findBoooksByAuthor(author, function(books, err) {\r\n                    if (err) {\r\n                      failure(err);\r\n                    } else {\r\n                      try {\r\n                        foundBooks(books);\r\n                      } catch(reason) {\r\n                        failure(reason);\r\n                      }\r\n                    }\r\n                  });\r\n                } catch(error) {\r\n                  failure(err);\r\n                }\r\n                // success\r\n              }\r\n            });\r\n            ```\r\n             Promise Example;\r\n             ```javascript\r\n            findAuthor().\r\n              then(findBooksByAuthor).\r\n              then(function(books){\r\n                // found books\r\n            }).catch(function(reason){\r\n              // something went wrong\r\n            });\r\n            ```\r\n             @method then\r\n            @param {Function} onFulfilled\r\n            @param {Function} onRejected\r\n            Useful for tooling.\r\n            @return {Promise}\r\n            */\r\n            /**\r\n            `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\r\n            as the catch block of a try/catch statement.\r\n            ```js\r\n            function findAuthor(){\r\n            throw new Error('couldn't find that author');\r\n            }\r\n            // synchronous\r\n            try {\r\n            findAuthor();\r\n            } catch(reason) {\r\n            // something went wrong\r\n            }\r\n            // async with promises\r\n            findAuthor().catch(function(reason){\r\n            // something went wrong\r\n            });\r\n            ```\r\n            @method catch\r\n            @param {Function} onRejection\r\n            Useful for tooling.\r\n            @return {Promise}\r\n            */\r\n            Promise.prototype.catch = function _catch(onRejection) {\r\n                return this.then(null, onRejection);\r\n            };\r\n            /**\r\n              `finally` will be invoked regardless of the promise's fate just as native\r\n              try/catch/finally behaves\r\n            \r\n              Synchronous example:\r\n            \r\n              ```js\r\n              findAuthor() {\r\n                if (Math.random() > 0.5) {\r\n                  throw new Error();\r\n                }\r\n                return new Author();\r\n              }\r\n            \r\n              try {\r\n                return findAuthor(); // succeed or fail\r\n              } catch(error) {\r\n                return findOtherAuther();\r\n              } finally {\r\n                // always runs\r\n                // doesn't affect the return value\r\n              }\r\n              ```\r\n            \r\n              Asynchronous example:\r\n            \r\n              ```js\r\n              findAuthor().catch(function(reason){\r\n                return findOtherAuther();\r\n              }).finally(function(){\r\n                // author was either found, or not\r\n              });\r\n              ```\r\n            \r\n              @method finally\r\n              @param {Function} callback\r\n              @return {Promise}\r\n            */\r\n            Promise.prototype.finally = function _finally(callback) {\r\n                var promise = this;\r\n                var constructor = promise.constructor;\r\n                if (isFunction(callback)) {\r\n                    return promise.then(function (value) {\r\n                        return constructor.resolve(callback()).then(function () {\r\n                            return value;\r\n                        });\r\n                    }, function (reason) {\r\n                        return constructor.resolve(callback()).then(function () {\r\n                            throw reason;\r\n                        });\r\n                    });\r\n                }\r\n                return promise.then(callback, callback);\r\n            };\r\n            return Promise;\r\n        }();\r\n        Promise$1.prototype.then = then;\r\n        Promise$1.all = all;\r\n        Promise$1.race = race;\r\n        Promise$1.resolve = resolve$1;\r\n        Promise$1.reject = reject$1;\r\n        Promise$1._setScheduler = setScheduler;\r\n        Promise$1._setAsap = setAsap;\r\n        Promise$1._asap = asap;\r\n        /*global self*/\r\n        function polyfill() {\r\n            var local = void 0;\r\n            if (typeof global !== 'undefined') {\r\n                local = global;\r\n            }\r\n            else if (typeof self !== 'undefined') {\r\n                local = self;\r\n            }\r\n            else {\r\n                try {\r\n                    local = Function('return this')();\r\n                }\r\n                catch (e) {\r\n                    throw new Error('polyfill failed because global object is unavailable in this environment');\r\n                }\r\n            }\r\n            var P = local.Promise;\r\n            if (P) {\r\n                var promiseToString = null;\r\n                try {\r\n                    promiseToString = Object.prototype.toString.call(P.resolve());\r\n                }\r\n                catch (e) {\r\n                    // silently ignored\r\n                }\r\n                if (promiseToString === '[object Promise]' && !P.cast) {\r\n                    return;\r\n                }\r\n            }\r\n            local.Promise = Promise$1;\r\n        }\r\n        // Strange compat..\r\n        Promise$1.polyfill = polyfill;\r\n        Promise$1.Promise = Promise$1;\r\n        return Promise$1;\r\n    })));\r\n}\r\n","/* main.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    tslib_1.__exportStar(require(117) /* ./index */, exports);\r\n}\r\n","/* index.js */ function _(require, module, exports) {\r\n    var __importStar = (this && this.__importStar) || function (mod) {\r\n        if (mod && mod.__esModule)\r\n            return mod;\r\n        var result = {};\r\n        if (mod != null)\r\n            for (var k in mod)\r\n                if (Object.hasOwnProperty.call(mod, k))\r\n                    result[k] = mod[k];\r\n        result[\"default\"] = mod;\r\n        return result;\r\n    };\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var version_1 = require(118) /* ./version */;\r\n    exports.version = version_1.version;\r\n    var embed_1 = require(119) /* ./embed */;\r\n    exports.index = embed_1.index;\r\n    exports.embed = __importStar(require(119) /* ./embed */);\r\n    exports.protocol = __importStar(require(505) /* ./protocol */);\r\n    exports._testing = __importStar(require(506) /* ./testing */);\r\n    var logging_1 = require(134) /* ./core/logging */;\r\n    exports.logger = logging_1.logger;\r\n    exports.set_log_level = logging_1.set_log_level;\r\n    var settings_1 = require(142) /* ./core/settings */;\r\n    exports.settings = settings_1.settings;\r\n    var base_1 = require(122) /* ./base */;\r\n    exports.Models = base_1.Models;\r\n    var document_1 = require(120) /* ./document */;\r\n    exports.documents = document_1.documents;\r\n    var safely_1 = require(507) /* ./safely */;\r\n    exports.safely = safely_1.safely;\r\n}\r\n","/* version.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.version = \"2.2.3\";\r\n}\r\n","/* embed\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var document_1 = require(120) /* ../document */;\r\n    var logging_1 = require(134) /* ../core/logging */;\r\n    var string_1 = require(144) /* ../core/util/string */;\r\n    var object_1 = require(128) /* ../core/util/object */;\r\n    var types_1 = require(123) /* ../core/util/types */;\r\n    var callback_1 = require(131) /* ../core/util/callback */;\r\n    var standalone_1 = require(496) /* ./standalone */;\r\n    var server_1 = require(498) /* ./server */;\r\n    var dom_1 = require(497) /* ./dom */;\r\n    var standalone_2 = require(496) /* ./standalone */;\r\n    exports.add_document_standalone = standalone_2.add_document_standalone;\r\n    exports.index = standalone_2.index;\r\n    var server_2 = require(498) /* ./server */;\r\n    exports.add_document_from_session = server_2.add_document_from_session;\r\n    var notebook_1 = require(503) /* ./notebook */;\r\n    exports.embed_items_notebook = notebook_1.embed_items_notebook;\r\n    exports.kernels = notebook_1.kernels;\r\n    var dom_2 = require(497) /* ./dom */;\r\n    exports.BOKEH_ROOT = dom_2.BOKEH_ROOT;\r\n    function embed_item(item, target_id) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var docs_json, doc_id, element, roots, render_item, _a, views;\r\n            var _b;\r\n            return tslib_1.__generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        docs_json = {};\r\n                        doc_id = string_1.uuid4();\r\n                        docs_json[doc_id] = item.doc;\r\n                        if (target_id == null)\r\n                            target_id = item.target_id;\r\n                        element = document.getElementById(target_id);\r\n                        if (element != null)\r\n                            element.classList.add(dom_1.BOKEH_ROOT);\r\n                        roots = (_b = {}, _b[item.root_id] = target_id, _b);\r\n                        render_item = { roots: roots, root_ids: [item.root_id], docid: doc_id };\r\n                        return [4 /*yield*/, callback_1.defer(function () { return _embed_items(docs_json, [render_item]); })];\r\n                    case 1:\r\n                        _a = tslib_1.__read.apply(void 0, [_c.sent(), 1]), views = _a[0];\r\n                        return [2 /*return*/, views];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    exports.embed_item = embed_item;\r\n    // TODO (bev) this is currently clunky. Standalone embeds only provide\r\n    // the first two args, whereas server provide the app_app, and *may* prove and\r\n    // absolute_url as well if non-relative links are needed for resources. This function\r\n    // should probably be split in to two pieces to reflect the different usage patterns\r\n    function embed_items(docs_json, render_items, app_path, absolute_url) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, callback_1.defer(function () { return _embed_items(docs_json, render_items, app_path, absolute_url); })];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    exports.embed_items = embed_items;\r\n    function _embed_items(docs_json, render_items, app_path, absolute_url) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var docs, _a, _b, _c, docid, doc_json, views, render_items_1, render_items_1_1, item, element, roots, _d, _e, websocket_url, _f, _g, error_1, e_1_1;\r\n            var e_2, _h, e_1, _j;\r\n            return tslib_1.__generator(this, function (_k) {\r\n                switch (_k.label) {\r\n                    case 0:\r\n                        if (types_1.isString(docs_json))\r\n                            docs_json = JSON.parse(string_1.unescape(docs_json));\r\n                        docs = {};\r\n                        try {\r\n                            for (_a = tslib_1.__values(object_1.entries(docs_json)), _b = _a.next(); !_b.done; _b = _a.next()) {\r\n                                _c = tslib_1.__read(_b.value, 2), docid = _c[0], doc_json = _c[1];\r\n                                docs[docid] = document_1.Document.from_json(doc_json);\r\n                            }\r\n                        }\r\n                        catch (e_2_1) {\r\n                            e_2 = { error: e_2_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_b && !_b.done && (_h = _a.return))\r\n                                    _h.call(_a);\r\n                            }\r\n                            finally {\r\n                                if (e_2)\r\n                                    throw e_2.error;\r\n                            }\r\n                        }\r\n                        views = [];\r\n                        _k.label = 1;\r\n                    case 1:\r\n                        _k.trys.push([1, 12, 13, 14]);\r\n                        render_items_1 = tslib_1.__values(render_items), render_items_1_1 = render_items_1.next();\r\n                        _k.label = 2;\r\n                    case 2:\r\n                        if (!!render_items_1_1.done)\r\n                            return [3 /*break*/, 11];\r\n                        item = render_items_1_1.value;\r\n                        element = dom_1._resolve_element(item);\r\n                        roots = dom_1._resolve_root_elements(item);\r\n                        if (!(item.docid != null))\r\n                            return [3 /*break*/, 4];\r\n                        _e = (_d = views).push;\r\n                        return [4 /*yield*/, standalone_1.add_document_standalone(docs[item.docid], element, roots, item.use_for_title)];\r\n                    case 3:\r\n                        _e.apply(_d, [_k.sent()]);\r\n                        return [3 /*break*/, 10];\r\n                    case 4:\r\n                        if (!(item.token != null))\r\n                            return [3 /*break*/, 9];\r\n                        websocket_url = server_1._get_ws_url(app_path, absolute_url);\r\n                        logging_1.logger.debug(\"embed: computed ws url: \" + websocket_url);\r\n                        _k.label = 5;\r\n                    case 5:\r\n                        _k.trys.push([5, 7, , 8]);\r\n                        _g = (_f = views).push;\r\n                        return [4 /*yield*/, server_1.add_document_from_session(websocket_url, item.token, element, roots, item.use_for_title)];\r\n                    case 6:\r\n                        _g.apply(_f, [_k.sent()]);\r\n                        console.log(\"Bokeh items were rendered successfully\");\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        error_1 = _k.sent();\r\n                        console.log(\"Error rendering Bokeh items:\", error_1);\r\n                        return [3 /*break*/, 8];\r\n                    case 8: return [3 /*break*/, 10];\r\n                    case 9: throw new Error(\"Error rendering Bokeh items: either 'docid' or 'token' was expected.\");\r\n                    case 10:\r\n                        render_items_1_1 = render_items_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 11: return [3 /*break*/, 14];\r\n                    case 12:\r\n                        e_1_1 = _k.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 14];\r\n                    case 13:\r\n                        try {\r\n                            if (render_items_1_1 && !render_items_1_1.done && (_j = render_items_1.return))\r\n                                _j.call(render_items_1);\r\n                        }\r\n                        finally {\r\n                            if (e_1)\r\n                                throw e_1.error;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 14: return [2 /*return*/, views];\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n","/* document\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    tslib_1.__exportStar(require(121) /* ./document */, exports);\r\n    tslib_1.__exportStar(require(236) /* ./events */, exports);\r\n}\r\n","/* document\\document.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var base_1 = require(122) /* ../base */;\r\n    var version_1 = require(118) /* ../version */;\r\n    var logging_1 = require(134) /* ../core/logging */;\r\n    var bokeh_events_1 = require(428) /* ../core/bokeh_events */;\r\n    var has_props_1 = require(129) /* ../core/has_props */;\r\n    var signaling_1 = require(130) /* ../core/signaling */;\r\n    var refs_1 = require(132) /* ../core/util/refs */;\r\n    var serialization_1 = require(146) /* ../core/util/serialization */;\r\n    var array_1 = require(124) /* ../core/util/array */;\r\n    var object_1 = require(128) /* ../core/util/object */;\r\n    var sets = tslib_1.__importStar(require(235) /* ../core/util/set */);\r\n    var eq_1 = require(140) /* ../core/util/eq */;\r\n    var types_1 = require(123) /* ../core/util/types */;\r\n    var layout_dom_1 = require(387) /* ../models/layouts/layout_dom */;\r\n    var column_data_source_1 = require(200) /* ../models/sources/column_data_source */;\r\n    var model_1 = require(196) /* ../model */;\r\n    var events_1 = require(236) /* ./events */;\r\n    // Dispatches events to the subscribed models\r\n    var EventManager = /** @class */ (function () {\r\n        function EventManager(document) {\r\n            this.document = document;\r\n            this.session = null;\r\n            this.subscribed_models = new Set();\r\n        }\r\n        EventManager.prototype.send_event = function (bokeh_event) {\r\n            var event = new events_1.MessageSentEvent(this.document, \"bokeh_event\", bokeh_event.to_json());\r\n            this.document._trigger_on_change(event);\r\n        };\r\n        EventManager.prototype.trigger = function (event) {\r\n            var e_1, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this.subscribed_models), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var model = _d.value;\r\n                    if (event.origin != null && event.origin != model)\r\n                        continue;\r\n                    model._process_event(event);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        return EventManager;\r\n    }());\r\n    exports.EventManager = EventManager;\r\n    EventManager.__name__ = \"EventManager\";\r\n    exports.documents = [];\r\n    exports.DEFAULT_TITLE = \"Bokeh Application\";\r\n    // This class should match the API of the Python Document class\r\n    // as much as possible.\r\n    var Document = /** @class */ (function () {\r\n        function Document() {\r\n            exports.documents.push(this);\r\n            this._init_timestamp = Date.now();\r\n            this._title = exports.DEFAULT_TITLE;\r\n            this._roots = [];\r\n            this._all_models = new Map();\r\n            this._all_models_freeze_count = 0;\r\n            this._callbacks = new Map();\r\n            this._message_callbacks = new Map();\r\n            this.event_manager = new EventManager(this);\r\n            this.idle = new signaling_1.Signal0(this, \"idle\");\r\n            this._idle_roots = new WeakMap(); // TODO: WeakSet would be better\r\n            this._interactive_timestamp = null;\r\n            this._interactive_plot = null;\r\n        }\r\n        Object.defineProperty(Document.prototype, \"layoutables\", {\r\n            get: function () {\r\n                return this._roots.filter(function (root) { return root instanceof layout_dom_1.LayoutDOM; });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Document.prototype, \"is_idle\", {\r\n            get: function () {\r\n                var e_2, _b;\r\n                try {\r\n                    for (var _c = tslib_1.__values(this.layoutables), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var root = _d.value;\r\n                        if (!this._idle_roots.has(root))\r\n                            return false;\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n                return true;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Document.prototype.notify_idle = function (model) {\r\n            this._idle_roots.set(model, true);\r\n            if (this.is_idle) {\r\n                logging_1.logger.info(\"document idle at \" + (Date.now() - this._init_timestamp) + \" ms\");\r\n                this.event_manager.send_event(new bokeh_events_1.DocumentReady());\r\n                this.idle.emit();\r\n            }\r\n        };\r\n        Document.prototype.clear = function () {\r\n            this._push_all_models_freeze();\r\n            try {\r\n                while (this._roots.length > 0) {\r\n                    this.remove_root(this._roots[0]);\r\n                }\r\n            }\r\n            finally {\r\n                this._pop_all_models_freeze();\r\n            }\r\n        };\r\n        Document.prototype.interactive_start = function (plot) {\r\n            if (this._interactive_plot == null) {\r\n                this._interactive_plot = plot;\r\n                this._interactive_plot.trigger_event(new bokeh_events_1.LODStart());\r\n            }\r\n            this._interactive_timestamp = Date.now();\r\n        };\r\n        Document.prototype.interactive_stop = function () {\r\n            if (this._interactive_plot != null) {\r\n                this._interactive_plot.trigger_event(new bokeh_events_1.LODEnd());\r\n            }\r\n            this._interactive_plot = null;\r\n            this._interactive_timestamp = null;\r\n        };\r\n        Document.prototype.interactive_duration = function () {\r\n            if (this._interactive_timestamp == null)\r\n                return -1;\r\n            else\r\n                return Date.now() - this._interactive_timestamp;\r\n        };\r\n        Document.prototype.destructively_move = function (dest_doc) {\r\n            var e_3, _b, e_4, _c;\r\n            if (dest_doc === this) {\r\n                throw new Error(\"Attempted to overwrite a document with itself\");\r\n            }\r\n            dest_doc.clear();\r\n            // we have to remove ALL roots before adding any\r\n            // to the new doc or else models referenced from multiple\r\n            // roots could be in both docs at once, which isn't allowed.\r\n            var roots = array_1.copy(this._roots);\r\n            this.clear();\r\n            try {\r\n                for (var roots_1 = tslib_1.__values(roots), roots_1_1 = roots_1.next(); !roots_1_1.done; roots_1_1 = roots_1.next()) {\r\n                    var root = roots_1_1.value;\r\n                    if (root.document != null)\r\n                        throw new Error(\"Somehow we didn't detach \" + root);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (roots_1_1 && !roots_1_1.done && (_b = roots_1.return))\r\n                        _b.call(roots_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            if (this._all_models.size != 0) {\r\n                throw new Error(\"this._all_models still had stuff in it: \" + this._all_models);\r\n            }\r\n            try {\r\n                for (var roots_2 = tslib_1.__values(roots), roots_2_1 = roots_2.next(); !roots_2_1.done; roots_2_1 = roots_2.next()) {\r\n                    var root = roots_2_1.value;\r\n                    dest_doc.add_root(root);\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (roots_2_1 && !roots_2_1.done && (_c = roots_2.return))\r\n                        _c.call(roots_2);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            dest_doc.set_title(this._title);\r\n        };\r\n        // TODO other fields of doc\r\n        Document.prototype._push_all_models_freeze = function () {\r\n            this._all_models_freeze_count += 1;\r\n        };\r\n        Document.prototype._pop_all_models_freeze = function () {\r\n            this._all_models_freeze_count -= 1;\r\n            if (this._all_models_freeze_count === 0) {\r\n                this._recompute_all_models();\r\n            }\r\n        };\r\n        /*protected*/ Document.prototype._invalidate_all_models = function () {\r\n            logging_1.logger.debug(\"invalidating document models\");\r\n            // if freeze count is > 0, we'll recompute on unfreeze\r\n            if (this._all_models_freeze_count === 0) {\r\n                this._recompute_all_models();\r\n            }\r\n        };\r\n        Document.prototype._recompute_all_models = function () {\r\n            var e_5, _b, e_6, _c, e_7, _d, e_8, _e;\r\n            var new_all_models_set = new Set();\r\n            try {\r\n                for (var _f = tslib_1.__values(this._roots), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                    var r = _g.value;\r\n                    new_all_models_set = sets.union(new_all_models_set, r.references());\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_g && !_g.done && (_b = _f.return))\r\n                        _b.call(_f);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            var old_all_models_set = new Set(this._all_models.values());\r\n            var to_detach = sets.difference(old_all_models_set, new_all_models_set);\r\n            var to_attach = sets.difference(new_all_models_set, old_all_models_set);\r\n            var recomputed = new Map();\r\n            try {\r\n                for (var new_all_models_set_1 = tslib_1.__values(new_all_models_set), new_all_models_set_1_1 = new_all_models_set_1.next(); !new_all_models_set_1_1.done; new_all_models_set_1_1 = new_all_models_set_1.next()) {\r\n                    var model = new_all_models_set_1_1.value;\r\n                    recomputed.set(model.id, model);\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (new_all_models_set_1_1 && !new_all_models_set_1_1.done && (_c = new_all_models_set_1.return))\r\n                        _c.call(new_all_models_set_1);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var to_detach_1 = tslib_1.__values(to_detach), to_detach_1_1 = to_detach_1.next(); !to_detach_1_1.done; to_detach_1_1 = to_detach_1.next()) {\r\n                    var d = to_detach_1_1.value;\r\n                    d.detach_document();\r\n                }\r\n            }\r\n            catch (e_7_1) {\r\n                e_7 = { error: e_7_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (to_detach_1_1 && !to_detach_1_1.done && (_d = to_detach_1.return))\r\n                        _d.call(to_detach_1);\r\n                }\r\n                finally {\r\n                    if (e_7)\r\n                        throw e_7.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var to_attach_1 = tslib_1.__values(to_attach), to_attach_1_1 = to_attach_1.next(); !to_attach_1_1.done; to_attach_1_1 = to_attach_1.next()) {\r\n                    var a = to_attach_1_1.value;\r\n                    a.attach_document(this);\r\n                }\r\n            }\r\n            catch (e_8_1) {\r\n                e_8 = { error: e_8_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (to_attach_1_1 && !to_attach_1_1.done && (_e = to_attach_1.return))\r\n                        _e.call(to_attach_1);\r\n                }\r\n                finally {\r\n                    if (e_8)\r\n                        throw e_8.error;\r\n                }\r\n            }\r\n            this._all_models = recomputed;\r\n        };\r\n        Document.prototype.roots = function () {\r\n            return this._roots;\r\n        };\r\n        Document.prototype.add_root = function (model, setter_id) {\r\n            logging_1.logger.debug(\"Adding root: \" + model);\r\n            if (array_1.includes(this._roots, model))\r\n                return;\r\n            this._push_all_models_freeze();\r\n            try {\r\n                this._roots.push(model);\r\n            }\r\n            finally {\r\n                this._pop_all_models_freeze();\r\n            }\r\n            this._trigger_on_change(new events_1.RootAddedEvent(this, model, setter_id));\r\n        };\r\n        Document.prototype.remove_root = function (model, setter_id) {\r\n            var i = this._roots.indexOf(model);\r\n            if (i < 0)\r\n                return;\r\n            this._push_all_models_freeze();\r\n            try {\r\n                this._roots.splice(i, 1);\r\n            }\r\n            finally {\r\n                this._pop_all_models_freeze();\r\n            }\r\n            this._trigger_on_change(new events_1.RootRemovedEvent(this, model, setter_id));\r\n        };\r\n        Document.prototype.title = function () {\r\n            return this._title;\r\n        };\r\n        Document.prototype.set_title = function (title, setter_id) {\r\n            if (title !== this._title) {\r\n                this._title = title;\r\n                this._trigger_on_change(new events_1.TitleChangedEvent(this, title, setter_id));\r\n            }\r\n        };\r\n        Document.prototype.get_model_by_id = function (model_id) {\r\n            var _a;\r\n            return (_a = this._all_models.get(model_id)) !== null && _a !== void 0 ? _a : null;\r\n        };\r\n        Document.prototype.get_model_by_name = function (name) {\r\n            var e_9, _b;\r\n            var found = [];\r\n            try {\r\n                for (var _c = tslib_1.__values(this._all_models.values()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var model = _d.value;\r\n                    if (model instanceof model_1.Model && model.name == name)\r\n                        found.push(model);\r\n                }\r\n            }\r\n            catch (e_9_1) {\r\n                e_9 = { error: e_9_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_9)\r\n                        throw e_9.error;\r\n                }\r\n            }\r\n            switch (found.length) {\r\n                case 0:\r\n                    return null;\r\n                case 1:\r\n                    return found[0];\r\n                default:\r\n                    throw new Error(\"Multiple models are named '\" + name + \"'\");\r\n            }\r\n        };\r\n        Document.prototype.on_message = function (msg_type, callback) {\r\n            var message_callbacks = this._message_callbacks.get(msg_type);\r\n            if (message_callbacks == null)\r\n                this._message_callbacks.set(msg_type, new Set([callback]));\r\n            else\r\n                message_callbacks.add(callback);\r\n        };\r\n        Document.prototype.remove_on_message = function (msg_type, callback) {\r\n            var _a;\r\n            (_a = this._message_callbacks.get(msg_type)) === null || _a === void 0 ? void 0 : _a.delete(callback);\r\n        };\r\n        Document.prototype._trigger_on_message = function (msg_type, msg_data) {\r\n            var e_10, _b;\r\n            var message_callbacks = this._message_callbacks.get(msg_type);\r\n            if (message_callbacks != null) {\r\n                try {\r\n                    for (var message_callbacks_1 = tslib_1.__values(message_callbacks), message_callbacks_1_1 = message_callbacks_1.next(); !message_callbacks_1_1.done; message_callbacks_1_1 = message_callbacks_1.next()) {\r\n                        var cb = message_callbacks_1_1.value;\r\n                        cb(msg_data);\r\n                    }\r\n                }\r\n                catch (e_10_1) {\r\n                    e_10 = { error: e_10_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (message_callbacks_1_1 && !message_callbacks_1_1.done && (_b = message_callbacks_1.return))\r\n                            _b.call(message_callbacks_1);\r\n                    }\r\n                    finally {\r\n                        if (e_10)\r\n                            throw e_10.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Document.prototype.on_change = function (callback, allow_batches) {\r\n            if (allow_batches === void 0) {\r\n                allow_batches = false;\r\n            }\r\n            if (!this._callbacks.has(callback)) {\r\n                this._callbacks.set(callback, allow_batches);\r\n            }\r\n        };\r\n        Document.prototype.remove_on_change = function (callback) {\r\n            this._callbacks.delete(callback);\r\n        };\r\n        Document.prototype._trigger_on_change = function (event) {\r\n            var e_11, _b, e_12, _c;\r\n            try {\r\n                for (var _d = tslib_1.__values(this._callbacks), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var _f = tslib_1.__read(_e.value, 2), callback = _f[0], allow_batches = _f[1];\r\n                    if (!allow_batches && event instanceof events_1.DocumentEventBatch) {\r\n                        try {\r\n                            for (var _g = (e_12 = void 0, tslib_1.__values(event.events)), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                                var ev = _h.value;\r\n                                callback(ev);\r\n                            }\r\n                        }\r\n                        catch (e_12_1) {\r\n                            e_12 = { error: e_12_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_h && !_h.done && (_c = _g.return))\r\n                                    _c.call(_g);\r\n                            }\r\n                            finally {\r\n                                if (e_12)\r\n                                    throw e_12.error;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        callback(event);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_11_1) {\r\n                e_11 = { error: e_11_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_b = _d.return))\r\n                        _b.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_11)\r\n                        throw e_11.error;\r\n                }\r\n            }\r\n        };\r\n        Document.prototype._notify_change = function (model, attr, old_value, new_value, options) {\r\n            this._trigger_on_change(new events_1.ModelChangedEvent(this, model, attr, old_value, new_value, options === null || options === void 0 ? void 0 : options.setter_id, options === null || options === void 0 ? void 0 : options.hint));\r\n        };\r\n        Document._references_json = function (references, include_defaults) {\r\n            var e_13, _b;\r\n            if (include_defaults === void 0) {\r\n                include_defaults = true;\r\n            }\r\n            var references_json = [];\r\n            try {\r\n                for (var references_1 = tslib_1.__values(references), references_1_1 = references_1.next(); !references_1_1.done; references_1_1 = references_1.next()) {\r\n                    var r = references_1_1.value;\r\n                    var struct = r.struct();\r\n                    struct.attributes = r.attributes_as_json(include_defaults);\r\n                    // server doesn't want id in here since it's already in ref above\r\n                    delete struct.attributes.id;\r\n                    references_json.push(struct);\r\n                }\r\n            }\r\n            catch (e_13_1) {\r\n                e_13 = { error: e_13_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (references_1_1 && !references_1_1.done && (_b = references_1.return))\r\n                        _b.call(references_1);\r\n                }\r\n                finally {\r\n                    if (e_13)\r\n                        throw e_13.error;\r\n                }\r\n            }\r\n            return references_json;\r\n        };\r\n        Document._instantiate_object = function (obj_id, obj_type, obj_attrs) {\r\n            var full_attrs = Object.assign(Object.assign({}, obj_attrs), { id: obj_id, __deferred__: true });\r\n            var model = base_1.Models(obj_type);\r\n            return new model(full_attrs);\r\n        };\r\n        // given a JSON representation of all models in a graph, return a\r\n        // dict of new model objects\r\n        Document._instantiate_references_json = function (references_json, existing_models) {\r\n            var e_14, _b;\r\n            // Create all instances, but without setting their props\r\n            var references = new Map();\r\n            try {\r\n                for (var references_json_1 = tslib_1.__values(references_json), references_json_1_1 = references_json_1.next(); !references_json_1_1.done; references_json_1_1 = references_json_1.next()) {\r\n                    var obj = references_json_1_1.value;\r\n                    var obj_id = obj.id;\r\n                    var obj_type = obj.type;\r\n                    var obj_attrs = obj.attributes || {};\r\n                    var instance = existing_models.get(obj_id);\r\n                    if (instance == null) {\r\n                        instance = Document._instantiate_object(obj_id, obj_type, obj_attrs);\r\n                        if (obj.subtype != null)\r\n                            instance.set_subtype(obj.subtype);\r\n                    }\r\n                    references.set(instance.id, instance);\r\n                }\r\n            }\r\n            catch (e_14_1) {\r\n                e_14 = { error: e_14_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (references_json_1_1 && !references_json_1_1.done && (_b = references_json_1.return))\r\n                        _b.call(references_json_1);\r\n                }\r\n                finally {\r\n                    if (e_14)\r\n                        throw e_14.error;\r\n                }\r\n            }\r\n            return references;\r\n        };\r\n        // if v looks like a ref, or a collection, resolve it, otherwise return it unchanged\r\n        // recurse into collections but not into HasProps\r\n        Document._resolve_refs = function (value, old_references, new_references, buffers) {\r\n            function resolve_ref(v) {\r\n                if (refs_1.is_ref(v)) {\r\n                    if (old_references.has(v.id))\r\n                        return old_references.get(v.id);\r\n                    else if (new_references.has(v.id))\r\n                        return new_references.get(v.id);\r\n                    else\r\n                        throw new Error(\"reference \" + JSON.stringify(v) + \" isn't known (not in Document?)\");\r\n                }\r\n                else if (serialization_1.is_NDArray_ref(v)) {\r\n                    return serialization_1.decode_NDArray(v, buffers);\r\n                }\r\n                else if (types_1.isArray(v))\r\n                    return resolve_array(v);\r\n                else if (types_1.isPlainObject(v))\r\n                    return resolve_dict(v);\r\n                else\r\n                    return v;\r\n            }\r\n            function resolve_array(array) {\r\n                var e_15, _b;\r\n                var results = [];\r\n                try {\r\n                    for (var array_2 = tslib_1.__values(array), array_2_1 = array_2.next(); !array_2_1.done; array_2_1 = array_2.next()) {\r\n                        var v = array_2_1.value;\r\n                        results.push(resolve_ref(v));\r\n                    }\r\n                }\r\n                catch (e_15_1) {\r\n                    e_15 = { error: e_15_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (array_2_1 && !array_2_1.done && (_b = array_2.return))\r\n                            _b.call(array_2);\r\n                    }\r\n                    finally {\r\n                        if (e_15)\r\n                            throw e_15.error;\r\n                    }\r\n                }\r\n                return results;\r\n            }\r\n            function resolve_dict(dict) {\r\n                var e_16, _b;\r\n                var resolved = {};\r\n                try {\r\n                    for (var _c = tslib_1.__values(object_1.entries(dict)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var _e = tslib_1.__read(_d.value, 2), k = _e[0], v = _e[1];\r\n                        resolved[k] = resolve_ref(v);\r\n                    }\r\n                }\r\n                catch (e_16_1) {\r\n                    e_16 = { error: e_16_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_16)\r\n                            throw e_16.error;\r\n                    }\r\n                }\r\n                return resolved;\r\n            }\r\n            return resolve_ref(value);\r\n        };\r\n        // given a JSON representation of all models in a graph and new\r\n        // model instances, set the properties on the models from the\r\n        // JSON\r\n        Document._initialize_references_json = function (references_json, old_references, new_references, buffers) {\r\n            var e_17, _b, e_18, _c, e_19, _d;\r\n            var to_update = new Map();\r\n            try {\r\n                for (var references_json_2 = tslib_1.__values(references_json), references_json_2_1 = references_json_2.next(); !references_json_2_1.done; references_json_2_1 = references_json_2.next()) {\r\n                    var _e = references_json_2_1.value, id = _e.id, attributes = _e.attributes;\r\n                    var is_new = !old_references.has(id);\r\n                    var instance = is_new ? new_references.get(id) : old_references.get(id);\r\n                    // replace references with actual instances in obj_attrs\r\n                    var resolved_attrs = Document._resolve_refs(attributes, old_references, new_references, buffers);\r\n                    instance.setv(resolved_attrs, { silent: true });\r\n                    to_update.set(id, { instance: instance, is_new: is_new });\r\n                }\r\n            }\r\n            catch (e_17_1) {\r\n                e_17 = { error: e_17_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (references_json_2_1 && !references_json_2_1.done && (_b = references_json_2.return))\r\n                        _b.call(references_json_2);\r\n                }\r\n                finally {\r\n                    if (e_17)\r\n                        throw e_17.error;\r\n                }\r\n            }\r\n            var ordered_instances = [];\r\n            var handled = new Set();\r\n            function finalize_all_by_dfs(v) {\r\n                var e_20, _b, e_21, _c, e_22, _d;\r\n                if (v instanceof has_props_1.HasProps) {\r\n                    // note that we ignore instances that aren't updated (not in to_update)\r\n                    if (to_update.has(v.id) && !handled.has(v.id)) {\r\n                        handled.add(v.id);\r\n                        var _e = to_update.get(v.id), instance = _e.instance, is_new = _e.is_new;\r\n                        var attributes = instance.attributes;\r\n                        try {\r\n                            for (var _f = tslib_1.__values(object_1.values(attributes)), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                                var value = _g.value;\r\n                                finalize_all_by_dfs(value);\r\n                            }\r\n                        }\r\n                        catch (e_20_1) {\r\n                            e_20 = { error: e_20_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_g && !_g.done && (_b = _f.return))\r\n                                    _b.call(_f);\r\n                            }\r\n                            finally {\r\n                                if (e_20)\r\n                                    throw e_20.error;\r\n                            }\r\n                        }\r\n                        if (is_new) {\r\n                            // Finalizing here just to avoid iterating\r\n                            // over `ordered_instances` twice.\r\n                            instance.finalize();\r\n                            // Preserving an ordered collection of instances\r\n                            // to avoid having to go through DFS again.\r\n                            ordered_instances.push(instance);\r\n                        }\r\n                    }\r\n                }\r\n                else if (types_1.isArray(v)) {\r\n                    try {\r\n                        for (var v_1 = tslib_1.__values(v), v_1_1 = v_1.next(); !v_1_1.done; v_1_1 = v_1.next()) {\r\n                            var e = v_1_1.value;\r\n                            finalize_all_by_dfs(e);\r\n                        }\r\n                    }\r\n                    catch (e_21_1) {\r\n                        e_21 = { error: e_21_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (v_1_1 && !v_1_1.done && (_c = v_1.return))\r\n                                _c.call(v_1);\r\n                        }\r\n                        finally {\r\n                            if (e_21)\r\n                                throw e_21.error;\r\n                        }\r\n                    }\r\n                }\r\n                else if (types_1.isPlainObject(v)) {\r\n                    try {\r\n                        for (var _h = tslib_1.__values(object_1.values(v)), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                            var value = _j.value;\r\n                            finalize_all_by_dfs(value);\r\n                        }\r\n                    }\r\n                    catch (e_22_1) {\r\n                        e_22 = { error: e_22_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_j && !_j.done && (_d = _h.return))\r\n                                _d.call(_h);\r\n                        }\r\n                        finally {\r\n                            if (e_22)\r\n                                throw e_22.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            try {\r\n                for (var _f = tslib_1.__values(to_update.values()), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                    var item = _g.value;\r\n                    finalize_all_by_dfs(item.instance);\r\n                }\r\n            }\r\n            catch (e_18_1) {\r\n                e_18 = { error: e_18_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_g && !_g.done && (_c = _f.return))\r\n                        _c.call(_f);\r\n                }\r\n                finally {\r\n                    if (e_18)\r\n                        throw e_18.error;\r\n                }\r\n            }\r\n            try {\r\n                // `connect_signals` has to be executed last because it\r\n                // may rely on properties of dependencies that are initialized\r\n                // only in `finalize`. It's a problem that appears when\r\n                // there are circular references, e.g. as in\r\n                // CDS -> CustomJS (on data change) -> GlyphRenderer (in args) -> CDS.\r\n                for (var ordered_instances_1 = tslib_1.__values(ordered_instances), ordered_instances_1_1 = ordered_instances_1.next(); !ordered_instances_1_1.done; ordered_instances_1_1 = ordered_instances_1.next()) {\r\n                    var instance = ordered_instances_1_1.value;\r\n                    instance.connect_signals();\r\n                }\r\n            }\r\n            catch (e_19_1) {\r\n                e_19 = { error: e_19_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (ordered_instances_1_1 && !ordered_instances_1_1.done && (_d = ordered_instances_1.return))\r\n                        _d.call(ordered_instances_1);\r\n                }\r\n                finally {\r\n                    if (e_19)\r\n                        throw e_19.error;\r\n                }\r\n            }\r\n        };\r\n        Document._event_for_attribute_change = function (changed_obj, key, new_value, doc, value_refs) {\r\n            var changed_model = doc.get_model_by_id(changed_obj.id); // XXX!\r\n            if (!changed_model.property(key).syncable)\r\n                return null;\r\n            else {\r\n                var event = {\r\n                    kind: \"ModelChanged\",\r\n                    model: { id: changed_obj.id },\r\n                    attr: key,\r\n                    new: new_value,\r\n                };\r\n                has_props_1.HasProps._json_record_references(doc, new_value, value_refs, { recursive: true });\r\n                return event;\r\n            }\r\n        };\r\n        Document._events_to_sync_objects = function (from_obj, to_obj, to_doc, value_refs) {\r\n            var e_23, _b, e_24, _c, e_25, _d;\r\n            var from_keys = Object.keys(from_obj.attributes); //XXX!\r\n            var to_keys = Object.keys(to_obj.attributes); //XXX!\r\n            var removed = array_1.difference(from_keys, to_keys);\r\n            var added = array_1.difference(to_keys, from_keys);\r\n            var shared = array_1.intersection(from_keys, to_keys);\r\n            var events = [];\r\n            try {\r\n                for (var removed_1 = tslib_1.__values(removed), removed_1_1 = removed_1.next(); !removed_1_1.done; removed_1_1 = removed_1.next()) {\r\n                    var key = removed_1_1.value;\r\n                    // we don't really have a \"remove\" event - not sure this ever\r\n                    // happens even. One way this could happen is if the server\r\n                    // does include_defaults=True and we do\r\n                    // include_defaults=false ... in that case it'd be best to\r\n                    // just ignore this probably. Warn about it, could mean\r\n                    // there's a bug if we don't have a key that the server sent.\r\n                    logging_1.logger.warn(\"Server sent key \" + key + \" but we don't seem to have it in our JSON\");\r\n                }\r\n            }\r\n            catch (e_23_1) {\r\n                e_23 = { error: e_23_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (removed_1_1 && !removed_1_1.done && (_b = removed_1.return))\r\n                        _b.call(removed_1);\r\n                }\r\n                finally {\r\n                    if (e_23)\r\n                        throw e_23.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var added_1 = tslib_1.__values(added), added_1_1 = added_1.next(); !added_1_1.done; added_1_1 = added_1.next()) {\r\n                    var key = added_1_1.value;\r\n                    var new_value = to_obj.attributes[key]; // XXX!\r\n                    events.push(Document._event_for_attribute_change(from_obj, key, new_value, to_doc, value_refs));\r\n                }\r\n            }\r\n            catch (e_24_1) {\r\n                e_24 = { error: e_24_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (added_1_1 && !added_1_1.done && (_c = added_1.return))\r\n                        _c.call(added_1);\r\n                }\r\n                finally {\r\n                    if (e_24)\r\n                        throw e_24.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var shared_1 = tslib_1.__values(shared), shared_1_1 = shared_1.next(); !shared_1_1.done; shared_1_1 = shared_1.next()) {\r\n                    var key = shared_1_1.value;\r\n                    var old_value = from_obj.attributes[key]; // XXX!\r\n                    var new_value = to_obj.attributes[key]; // XXX!\r\n                    if (old_value == null && new_value == null) {\r\n                    }\r\n                    else if (old_value == null || new_value == null) {\r\n                        events.push(Document._event_for_attribute_change(from_obj, key, new_value, to_doc, value_refs));\r\n                    }\r\n                    else {\r\n                        if (!eq_1.isEqual(old_value, new_value))\r\n                            events.push(Document._event_for_attribute_change(from_obj, key, new_value, to_doc, value_refs));\r\n                    }\r\n                }\r\n            }\r\n            catch (e_25_1) {\r\n                e_25 = { error: e_25_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (shared_1_1 && !shared_1_1.done && (_d = shared_1.return))\r\n                        _d.call(shared_1);\r\n                }\r\n                finally {\r\n                    if (e_25)\r\n                        throw e_25.error;\r\n                }\r\n            }\r\n            return events.filter(function (e) { return e != null; });\r\n        };\r\n        // we use this to detect changes during document deserialization\r\n        // (in model constructors and initializers)\r\n        Document._compute_patch_since_json = function (from_json, to_doc) {\r\n            var e_26, _b, e_27, _c, e_28, _d;\r\n            var to_json = to_doc.to_json(false); // include_defaults=false\r\n            function refs(json) {\r\n                var e_29, _b;\r\n                var result = new Map();\r\n                try {\r\n                    for (var _c = tslib_1.__values(json.roots.references), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var obj = _d.value;\r\n                        result.set(obj.id, obj);\r\n                    }\r\n                }\r\n                catch (e_29_1) {\r\n                    e_29 = { error: e_29_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_29)\r\n                            throw e_29.error;\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n            var from_references = refs(from_json);\r\n            var from_roots = new Map();\r\n            var from_root_ids = [];\r\n            try {\r\n                for (var _e = tslib_1.__values(from_json.roots.root_ids), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var r = _f.value;\r\n                    from_roots.set(r, from_references.get(r));\r\n                    from_root_ids.push(r);\r\n                }\r\n            }\r\n            catch (e_26_1) {\r\n                e_26 = { error: e_26_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_b = _e.return))\r\n                        _b.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_26)\r\n                        throw e_26.error;\r\n                }\r\n            }\r\n            var to_references = refs(to_json);\r\n            var to_roots = new Map();\r\n            var to_root_ids = [];\r\n            try {\r\n                for (var _g = tslib_1.__values(to_json.roots.root_ids), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                    var r = _h.value;\r\n                    to_roots.set(r, to_references.get(r));\r\n                    to_root_ids.push(r);\r\n                }\r\n            }\r\n            catch (e_27_1) {\r\n                e_27 = { error: e_27_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_h && !_h.done && (_c = _g.return))\r\n                        _c.call(_g);\r\n                }\r\n                finally {\r\n                    if (e_27)\r\n                        throw e_27.error;\r\n                }\r\n            }\r\n            from_root_ids.sort();\r\n            to_root_ids.sort();\r\n            if (array_1.difference(from_root_ids, to_root_ids).length > 0 ||\r\n                array_1.difference(to_root_ids, from_root_ids).length > 0) {\r\n                // this would arise if someone does add_root/remove_root during\r\n                // document deserialization, hopefully they won't ever do so.\r\n                throw new Error(\"Not implemented: computing add/remove of document roots\");\r\n            }\r\n            var value_refs = new Set();\r\n            var events = [];\r\n            try {\r\n                for (var _j = tslib_1.__values(to_doc._all_models.keys()), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                    var id = _k.value;\r\n                    if (from_references.has(id)) {\r\n                        var update_model_events = Document._events_to_sync_objects(from_references.get(id), to_references.get(id), to_doc, value_refs);\r\n                        events = events.concat(update_model_events);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_28_1) {\r\n                e_28 = { error: e_28_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_k && !_k.done && (_d = _j.return))\r\n                        _d.call(_j);\r\n                }\r\n                finally {\r\n                    if (e_28)\r\n                        throw e_28.error;\r\n                }\r\n            }\r\n            return {\r\n                references: Document._references_json(value_refs, false),\r\n                events: events,\r\n            };\r\n        };\r\n        Document.prototype.to_json_string = function (include_defaults) {\r\n            if (include_defaults === void 0) {\r\n                include_defaults = true;\r\n            }\r\n            return JSON.stringify(this.to_json(include_defaults));\r\n        };\r\n        Document.prototype.to_json = function (include_defaults) {\r\n            if (include_defaults === void 0) {\r\n                include_defaults = true;\r\n            }\r\n            var root_ids = this._roots.map(function (r) { return r.id; });\r\n            var root_references = this._all_models.values();\r\n            return {\r\n                version: version_1.version,\r\n                title: this._title,\r\n                roots: {\r\n                    root_ids: root_ids,\r\n                    references: Document._references_json(root_references, include_defaults),\r\n                },\r\n            };\r\n        };\r\n        Document.from_json_string = function (s) {\r\n            var json = JSON.parse(s);\r\n            return Document.from_json(json);\r\n        };\r\n        Document.from_json = function (json) {\r\n            var e_30, _b;\r\n            logging_1.logger.debug(\"Creating Document from JSON\");\r\n            function pyify(version) {\r\n                return version.replace(/-(dev|rc)\\./, \"$1\");\r\n            }\r\n            var py_version = json.version; // XXX!\r\n            var is_dev = py_version.indexOf('+') !== -1 || py_version.indexOf('-') !== -1;\r\n            var versions_string = \"Library versions: JS (\" + version_1.version + \") / Python (\" + py_version + \")\";\r\n            if (!is_dev && pyify(version_1.version) != py_version) {\r\n                logging_1.logger.warn(\"JS/Python version mismatch\");\r\n                logging_1.logger.warn(versions_string);\r\n            }\r\n            else\r\n                logging_1.logger.debug(versions_string);\r\n            var roots_json = json.roots;\r\n            var root_ids = roots_json.root_ids;\r\n            var references_json = roots_json.references;\r\n            var references = Document._instantiate_references_json(references_json, new Map());\r\n            Document._initialize_references_json(references_json, new Map(), references, new Map());\r\n            var doc = new Document();\r\n            try {\r\n                for (var root_ids_1 = tslib_1.__values(root_ids), root_ids_1_1 = root_ids_1.next(); !root_ids_1_1.done; root_ids_1_1 = root_ids_1.next()) {\r\n                    var id = root_ids_1_1.value;\r\n                    var root = references.get(id);\r\n                    if (root != null) {\r\n                        doc.add_root(root); // XXX: HasProps\r\n                    }\r\n                }\r\n            }\r\n            catch (e_30_1) {\r\n                e_30 = { error: e_30_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (root_ids_1_1 && !root_ids_1_1.done && (_b = root_ids_1.return))\r\n                        _b.call(root_ids_1);\r\n                }\r\n                finally {\r\n                    if (e_30)\r\n                        throw e_30.error;\r\n                }\r\n            }\r\n            doc.set_title(json.title); // XXX!\r\n            return doc;\r\n        };\r\n        Document.prototype.replace_with_json = function (json) {\r\n            var replacement = Document.from_json(json);\r\n            replacement.destructively_move(this);\r\n        };\r\n        Document.prototype.create_json_patch_string = function (events) {\r\n            return JSON.stringify(this.create_json_patch(events));\r\n        };\r\n        Document.prototype.create_json_patch = function (events) {\r\n            var e_31, _b;\r\n            var references = new Set();\r\n            var json_events = [];\r\n            try {\r\n                for (var events_2 = tslib_1.__values(events), events_2_1 = events_2.next(); !events_2_1.done; events_2_1 = events_2.next()) {\r\n                    var event = events_2_1.value;\r\n                    if (event.document !== this) {\r\n                        logging_1.logger.warn(\"Cannot create a patch using events from a different document, event had \", event.document, \" we are \", this);\r\n                        throw new Error(\"Cannot create a patch using events from a different document\");\r\n                    }\r\n                    json_events.push(event.json(references));\r\n                }\r\n            }\r\n            catch (e_31_1) {\r\n                e_31 = { error: e_31_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (events_2_1 && !events_2_1.done && (_b = events_2.return))\r\n                        _b.call(events_2);\r\n                }\r\n                finally {\r\n                    if (e_31)\r\n                        throw e_31.error;\r\n                }\r\n            }\r\n            return {\r\n                events: json_events,\r\n                references: Document._references_json(references),\r\n            };\r\n        };\r\n        Document.prototype.apply_json_patch = function (patch, buffers, setter_id) {\r\n            var e_32, _b, e_33, _c, e_34, _d, _e;\r\n            if (buffers === void 0) {\r\n                buffers = new Map();\r\n            }\r\n            var references_json = patch.references;\r\n            var events_json = patch.events;\r\n            var references = Document._instantiate_references_json(references_json, this._all_models);\r\n            if (!(buffers instanceof Map)) {\r\n                buffers = new Map(buffers);\r\n            }\r\n            try {\r\n                // The model being changed isn't always in references so add it in\r\n                for (var events_json_1 = tslib_1.__values(events_json), events_json_1_1 = events_json_1.next(); !events_json_1_1.done; events_json_1_1 = events_json_1.next()) {\r\n                    var event_json = events_json_1_1.value;\r\n                    switch (event_json.kind) {\r\n                        case \"RootAdded\":\r\n                        case \"RootRemoved\":\r\n                        case \"ModelChanged\": {\r\n                            var model_id = event_json.model.id;\r\n                            var model = this._all_models.get(model_id);\r\n                            if (model != null) {\r\n                                references.set(model_id, model);\r\n                            }\r\n                            else if (!references.has(model_id)) {\r\n                                logging_1.logger.warn(\"Got an event for unknown model \" + event_json.model + \"\\\"\");\r\n                                throw new Error(\"event model wasn't known\");\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_32_1) {\r\n                e_32 = { error: e_32_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (events_json_1_1 && !events_json_1_1.done && (_b = events_json_1.return))\r\n                        _b.call(events_json_1);\r\n                }\r\n                finally {\r\n                    if (e_32)\r\n                        throw e_32.error;\r\n                }\r\n            }\r\n            // split references into old and new so we know whether to initialize or update\r\n            var old_references = new Map();\r\n            var new_references = new Map();\r\n            try {\r\n                for (var references_2 = tslib_1.__values(references), references_2_1 = references_2.next(); !references_2_1.done; references_2_1 = references_2.next()) {\r\n                    var _f = tslib_1.__read(references_2_1.value, 2), id = _f[0], value = _f[1];\r\n                    if (this._all_models.has(id))\r\n                        old_references.set(id, value);\r\n                    else\r\n                        new_references.set(id, value);\r\n                }\r\n            }\r\n            catch (e_33_1) {\r\n                e_33 = { error: e_33_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (references_2_1 && !references_2_1.done && (_c = references_2.return))\r\n                        _c.call(references_2);\r\n                }\r\n                finally {\r\n                    if (e_33)\r\n                        throw e_33.error;\r\n                }\r\n            }\r\n            Document._initialize_references_json(references_json, old_references, new_references, buffers);\r\n            try {\r\n                for (var events_json_2 = tslib_1.__values(events_json), events_json_2_1 = events_json_2.next(); !events_json_2_1.done; events_json_2_1 = events_json_2.next()) {\r\n                    var event_json = events_json_2_1.value;\r\n                    switch (event_json.kind) {\r\n                        case 'MessageSent': {\r\n                            var msg_type = event_json.msg_type, msg_data = event_json.msg_data;\r\n                            var data = void 0;\r\n                            if (msg_data === undefined) {\r\n                                if (buffers.size == 1) {\r\n                                    var _g = tslib_1.__read(buffers, 1), _h = tslib_1.__read(_g[0], 2), buffer = _h[1];\r\n                                    data = buffer;\r\n                                }\r\n                                else {\r\n                                    throw new Error(\"expected exactly one buffer\");\r\n                                }\r\n                            }\r\n                            else {\r\n                                data = Document._resolve_refs(msg_data, old_references, new_references, buffers);\r\n                            }\r\n                            this._trigger_on_message(msg_type, data);\r\n                            break;\r\n                        }\r\n                        case 'ModelChanged': {\r\n                            var patched_id = event_json.model.id;\r\n                            var patched_obj = this._all_models.get(patched_id);\r\n                            if (patched_obj == null) {\r\n                                throw new Error(\"Cannot apply patch to \" + patched_id + \" which is not in the document\");\r\n                            }\r\n                            var attr = event_json.attr;\r\n                            var value = Document._resolve_refs(event_json.new, old_references, new_references, buffers);\r\n                            patched_obj.setv((_e = {}, _e[attr] = value, _e), { setter_id: setter_id });\r\n                            break;\r\n                        }\r\n                        case 'ColumnDataChanged': {\r\n                            var column_source_id = event_json.column_source.id;\r\n                            var column_source = this._all_models.get(column_source_id);\r\n                            if (column_source == null) {\r\n                                throw new Error(\"Cannot stream to \" + column_source_id + \" which is not in the document\");\r\n                            }\r\n                            var data = Document._resolve_refs(event_json.new, new Map(), new Map(), buffers);\r\n                            if (event_json.cols != null) {\r\n                                for (var k in column_source.data) {\r\n                                    if (!(k in data)) {\r\n                                        data[k] = column_source.data[k];\r\n                                    }\r\n                                }\r\n                            }\r\n                            column_source.setv({ data: data }, { setter_id: setter_id, check_eq: false });\r\n                            break;\r\n                        }\r\n                        case 'ColumnsStreamed': {\r\n                            var column_source_id = event_json.column_source.id;\r\n                            var column_source = this._all_models.get(column_source_id);\r\n                            if (column_source == null) {\r\n                                throw new Error(\"Cannot stream to \" + column_source_id + \" which is not in the document\");\r\n                            }\r\n                            if (!(column_source instanceof column_data_source_1.ColumnDataSource)) {\r\n                                throw new Error(\"Cannot stream to non-ColumnDataSource\");\r\n                            }\r\n                            var data = event_json.data;\r\n                            var rollover = event_json.rollover;\r\n                            column_source.stream(data, rollover, setter_id);\r\n                            break;\r\n                        }\r\n                        case 'ColumnsPatched': {\r\n                            var column_source_id = event_json.column_source.id;\r\n                            var column_source = this._all_models.get(column_source_id);\r\n                            if (column_source == null) {\r\n                                throw new Error(\"Cannot patch \" + column_source_id + \" which is not in the document\");\r\n                            }\r\n                            if (!(column_source instanceof column_data_source_1.ColumnDataSource)) {\r\n                                throw new Error(\"Cannot patch non-ColumnDataSource\");\r\n                            }\r\n                            var patches = event_json.patches;\r\n                            column_source.patch(patches, setter_id);\r\n                            break;\r\n                        }\r\n                        case 'RootAdded': {\r\n                            var root_id = event_json.model.id;\r\n                            var root_obj = references.get(root_id);\r\n                            this.add_root(root_obj, setter_id); // XXX: HasProps\r\n                            break;\r\n                        }\r\n                        case 'RootRemoved': {\r\n                            var root_id = event_json.model.id;\r\n                            var root_obj = references.get(root_id);\r\n                            this.remove_root(root_obj, setter_id); // XXX: HasProps\r\n                            break;\r\n                        }\r\n                        case 'TitleChanged': {\r\n                            this.set_title(event_json.title, setter_id);\r\n                            break;\r\n                        }\r\n                        default:\r\n                            throw new Error(\"Unknown patch event \" + JSON.stringify(event_json));\r\n                    }\r\n                }\r\n            }\r\n            catch (e_34_1) {\r\n                e_34 = { error: e_34_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (events_json_2_1 && !events_json_2_1.done && (_d = events_json_2.return))\r\n                        _d.call(events_json_2);\r\n                }\r\n                finally {\r\n                    if (e_34)\r\n                        throw e_34.error;\r\n                }\r\n            }\r\n        };\r\n        return Document;\r\n    }());\r\n    exports.Document = Document;\r\n    Document.__name__ = \"Document\";\r\n}\r\n","/* base.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(123) /* ./core/util/types */;\r\n    var object_1 = require(128) /* ./core/util/object */;\r\n    var has_props_1 = require(129) /* ./core/has_props */;\r\n    exports.overrides = {};\r\n    var _all_models = new Map();\r\n    exports.Models = (function (name) {\r\n        var model = exports.overrides[name] || _all_models.get(name);\r\n        if (model == null) {\r\n            throw new Error(\"Model '\" + name + \"' does not exist. This could be due to a widget or a custom model not being registered before first usage.\");\r\n        }\r\n        return model;\r\n    });\r\n    exports.Models.register = function (name, model) {\r\n        exports.overrides[name] = model;\r\n    };\r\n    exports.Models.unregister = function (name) {\r\n        delete exports.overrides[name];\r\n    };\r\n    function is_HasProps(obj) {\r\n        return types_1.isObject(obj) && obj.prototype instanceof has_props_1.HasProps;\r\n    }\r\n    exports.Models.register_models = function (models, force, errorFn) {\r\n        var e_1, _a;\r\n        if (force === void 0) {\r\n            force = false;\r\n        }\r\n        if (models == null)\r\n            return;\r\n        try {\r\n            for (var _b = tslib_1.__values(object_1.values(models)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var model = _c.value;\r\n                if (is_HasProps(model)) {\r\n                    var qualified = model.__qualified__;\r\n                    if (force || !_all_models.has(qualified))\r\n                        _all_models.set(qualified, model);\r\n                    else if (errorFn != null)\r\n                        errorFn(qualified);\r\n                    else\r\n                        console.warn(\"Model '\" + qualified + \"' was already registered\");\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return))\r\n                    _a.call(_b);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n    };\r\n    exports.register_models = exports.Models.register_models;\r\n    exports.Models.registered_names = function () { return Array.from(_all_models.keys()); };\r\n    // TODO: this doesn't belong here, but it's easier this way for backwards compatibility\r\n    var AllModels = tslib_1.__importStar(require(149) /* ./models */);\r\n    exports.register_models(AllModels);\r\n}\r\n","/* core\\util\\types.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    //     Underscore.js 1.8.3\r\n    //     http://underscorejs.org\r\n    //     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n    //     Underscore may be freely distributed under the MIT license.\r\n    var array_1 = require(124) /* ./array */;\r\n    var toString = Object.prototype.toString;\r\n    function isBoolean(obj) {\r\n        return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\r\n    }\r\n    exports.isBoolean = isBoolean;\r\n    function isNumber(obj) {\r\n        return toString.call(obj) === \"[object Number]\";\r\n    }\r\n    exports.isNumber = isNumber;\r\n    function isInteger(obj) {\r\n        return isNumber(obj) && Number.isInteger(obj);\r\n    }\r\n    exports.isInteger = isInteger;\r\n    function isString(obj) {\r\n        return toString.call(obj) === \"[object String]\";\r\n    }\r\n    exports.isString = isString;\r\n    function isFunction(obj) {\r\n        return toString.call(obj) === \"[object Function]\";\r\n    }\r\n    exports.isFunction = isFunction;\r\n    function isArray(obj) {\r\n        return Array.isArray(obj);\r\n    }\r\n    exports.isArray = isArray;\r\n    function isArrayOf(arr, predicate) {\r\n        return array_1.every(arr, predicate);\r\n    }\r\n    exports.isArrayOf = isArrayOf;\r\n    function isArrayableOf(arr, predicate) {\r\n        for (var i = 0, end = arr.length; i < end; i++) {\r\n            if (!predicate(arr[i]))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    exports.isArrayableOf = isArrayableOf;\r\n    function isTypedArray(obj) {\r\n        return ArrayBuffer.isView(obj) && !(obj instanceof DataView);\r\n    }\r\n    exports.isTypedArray = isTypedArray;\r\n    function isObject(obj) {\r\n        var tp = typeof obj;\r\n        return tp === 'function' || tp === 'object' && !!obj;\r\n    }\r\n    exports.isObject = isObject;\r\n    function isPlainObject(obj) {\r\n        return isObject(obj) && (obj.constructor == null || obj.constructor === Object);\r\n    }\r\n    exports.isPlainObject = isPlainObject;\r\n    function isIterable(obj) {\r\n        return Symbol.iterator in Object(obj);\r\n    }\r\n    exports.isIterable = isIterable;\r\n}\r\n","/* core\\util\\array.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    //     Underscore.js 1.8.3\r\n    //     http://underscorejs.org\r\n    //     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n    //     Underscore may be freely distributed under the MIT license.\r\n    var math_1 = require(125) /* ./math */;\r\n    var assert_1 = require(126) /* ./assert */;\r\n    var arrayable_1 = require(127) /* ./arrayable */;\r\n    exports.map = arrayable_1.map;\r\n    exports.reduce = arrayable_1.reduce;\r\n    exports.min = arrayable_1.min;\r\n    exports.min_by = arrayable_1.min_by;\r\n    exports.max = arrayable_1.max;\r\n    exports.max_by = arrayable_1.max_by;\r\n    exports.sum = arrayable_1.sum;\r\n    exports.cumsum = arrayable_1.cumsum;\r\n    exports.every = arrayable_1.every;\r\n    exports.some = arrayable_1.some;\r\n    exports.find = arrayable_1.find;\r\n    exports.find_last = arrayable_1.find_last;\r\n    exports.find_index = arrayable_1.find_index;\r\n    exports.find_last_index = arrayable_1.find_last_index;\r\n    exports.sorted_index = arrayable_1.sorted_index;\r\n    exports.is_empty = arrayable_1.is_empty;\r\n    var slice = Array.prototype.slice;\r\n    function head(array) {\r\n        return array[0];\r\n    }\r\n    exports.head = head;\r\n    function tail(array) {\r\n        return array[array.length - 1];\r\n    }\r\n    exports.tail = tail;\r\n    function last(array) {\r\n        return array[array.length - 1];\r\n    }\r\n    exports.last = last;\r\n    function copy(array) {\r\n        return slice.call(array);\r\n    }\r\n    exports.copy = copy;\r\n    function concat(arrays) {\r\n        return [].concat.apply([], tslib_1.__spread(arrays));\r\n    }\r\n    exports.concat = concat;\r\n    function includes(array, value) {\r\n        return array.indexOf(value) !== -1;\r\n    }\r\n    exports.includes = includes;\r\n    exports.contains = includes;\r\n    function nth(array, index) {\r\n        return array[index >= 0 ? index : array.length + index];\r\n    }\r\n    exports.nth = nth;\r\n    function zip() {\r\n        var arrays = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arrays[_i] = arguments[_i];\r\n        }\r\n        if (arrays.length == 0)\r\n            return [];\r\n        var n = arrayable_1.min(arrays.map(function (a) { return a.length; }));\r\n        var k = arrays.length;\r\n        var result = new Array(n);\r\n        for (var i = 0; i < n; i++) {\r\n            result[i] = new Array(k);\r\n            for (var j = 0; j < k; j++)\r\n                result[i][j] = arrays[j][i];\r\n        }\r\n        return result;\r\n    }\r\n    exports.zip = zip;\r\n    function unzip(array) {\r\n        var n = array.length;\r\n        var k = arrayable_1.min(array.map(function (a) { return a.length; }));\r\n        var results = Array(k);\r\n        for (var j = 0; j < k; j++)\r\n            results[j] = new Array(n);\r\n        for (var i = 0; i < n; i++) {\r\n            for (var j = 0; j < k; j++)\r\n                results[j][i] = array[i][j];\r\n        }\r\n        return results;\r\n    }\r\n    exports.unzip = unzip;\r\n    function range(start, stop, step) {\r\n        if (step === void 0) {\r\n            step = 1;\r\n        }\r\n        assert_1.assert(step > 0, \"'step' must be a positive number\");\r\n        if (stop == null) {\r\n            stop = start;\r\n            start = 0;\r\n        }\r\n        var max = Math.max, ceil = Math.ceil, abs = Math.abs;\r\n        var delta = start <= stop ? step : -step;\r\n        var length = max(ceil(abs(stop - start) / step), 0);\r\n        var range = new Array(length);\r\n        for (var i = 0; i < length; i++, start += delta) {\r\n            range[i] = start;\r\n        }\r\n        return range;\r\n    }\r\n    exports.range = range;\r\n    function linspace(start, stop, num) {\r\n        if (num === void 0) {\r\n            num = 100;\r\n        }\r\n        var step = (stop - start) / (num - 1);\r\n        var array = new Array(num);\r\n        for (var i = 0; i < num; i++) {\r\n            array[i] = start + step * i;\r\n        }\r\n        return array;\r\n    }\r\n    exports.linspace = linspace;\r\n    function transpose(array) {\r\n        var rows = array.length;\r\n        var cols = array[0].length;\r\n        var transposed = [];\r\n        for (var j = 0; j < cols; j++) {\r\n            transposed[j] = [];\r\n            for (var i = 0; i < rows; i++) {\r\n                transposed[j][i] = array[i][j];\r\n            }\r\n        }\r\n        return transposed;\r\n    }\r\n    exports.transpose = transpose;\r\n    function argmin(array) {\r\n        return arrayable_1.min_by(range(array.length), function (i) { return array[i]; });\r\n    }\r\n    exports.argmin = argmin;\r\n    function argmax(array) {\r\n        return arrayable_1.max_by(range(array.length), function (i) { return array[i]; });\r\n    }\r\n    exports.argmax = argmax;\r\n    function sort_by(array, key) {\r\n        var tmp = array.map(function (value, index) {\r\n            return { value: value, index: index, key: key(value) };\r\n        });\r\n        tmp.sort(function (left, right) {\r\n            var a = left.key;\r\n            var b = right.key;\r\n            if (a !== b) {\r\n                if (a > b || a === undefined)\r\n                    return 1;\r\n                if (a < b || b === undefined)\r\n                    return -1;\r\n            }\r\n            return left.index - right.index;\r\n        });\r\n        return tmp.map(function (item) { return item.value; });\r\n    }\r\n    exports.sort_by = sort_by;\r\n    function uniq(array) {\r\n        var e_1, _a;\r\n        var result = new Set();\r\n        try {\r\n            for (var array_1 = tslib_1.__values(array), array_1_1 = array_1.next(); !array_1_1.done; array_1_1 = array_1.next()) {\r\n                var value = array_1_1.value;\r\n                result.add(value);\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (array_1_1 && !array_1_1.done && (_a = array_1.return))\r\n                    _a.call(array_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        return tslib_1.__spread(result);\r\n    }\r\n    exports.uniq = uniq;\r\n    function uniq_by(array, key) {\r\n        var e_2, _a;\r\n        var result = [];\r\n        var seen = [];\r\n        try {\r\n            for (var array_2 = tslib_1.__values(array), array_2_1 = array_2.next(); !array_2_1.done; array_2_1 = array_2.next()) {\r\n                var value = array_2_1.value;\r\n                var computed = key(value);\r\n                if (!includes(seen, computed)) {\r\n                    seen.push(computed);\r\n                    result.push(value);\r\n                }\r\n            }\r\n        }\r\n        catch (e_2_1) {\r\n            e_2 = { error: e_2_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (array_2_1 && !array_2_1.done && (_a = array_2.return))\r\n                    _a.call(array_2);\r\n            }\r\n            finally {\r\n                if (e_2)\r\n                    throw e_2.error;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.uniq_by = uniq_by;\r\n    function union() {\r\n        var e_3, _a, e_4, _b;\r\n        var arrays = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arrays[_i] = arguments[_i];\r\n        }\r\n        var result = new Set();\r\n        try {\r\n            for (var arrays_1 = tslib_1.__values(arrays), arrays_1_1 = arrays_1.next(); !arrays_1_1.done; arrays_1_1 = arrays_1.next()) {\r\n                var array = arrays_1_1.value;\r\n                try {\r\n                    for (var array_3 = (e_4 = void 0, tslib_1.__values(array)), array_3_1 = array_3.next(); !array_3_1.done; array_3_1 = array_3.next()) {\r\n                        var value = array_3_1.value;\r\n                        result.add(value);\r\n                    }\r\n                }\r\n                catch (e_4_1) {\r\n                    e_4 = { error: e_4_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (array_3_1 && !array_3_1.done && (_b = array_3.return))\r\n                            _b.call(array_3);\r\n                    }\r\n                    finally {\r\n                        if (e_4)\r\n                            throw e_4.error;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (e_3_1) {\r\n            e_3 = { error: e_3_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (arrays_1_1 && !arrays_1_1.done && (_a = arrays_1.return))\r\n                    _a.call(arrays_1);\r\n            }\r\n            finally {\r\n                if (e_3)\r\n                    throw e_3.error;\r\n            }\r\n        }\r\n        return tslib_1.__spread(result);\r\n    }\r\n    exports.union = union;\r\n    function intersection(array) {\r\n        var e_5, _a, e_6, _b;\r\n        var arrays = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            arrays[_i - 1] = arguments[_i];\r\n        }\r\n        var result = [];\r\n        try {\r\n            top: for (var array_4 = tslib_1.__values(array), array_4_1 = array_4.next(); !array_4_1.done; array_4_1 = array_4.next()) {\r\n                var item = array_4_1.value;\r\n                if (includes(result, item))\r\n                    continue;\r\n                try {\r\n                    for (var arrays_2 = (e_6 = void 0, tslib_1.__values(arrays)), arrays_2_1 = arrays_2.next(); !arrays_2_1.done; arrays_2_1 = arrays_2.next()) {\r\n                        var other = arrays_2_1.value;\r\n                        if (!includes(other, item))\r\n                            continue top;\r\n                    }\r\n                }\r\n                catch (e_6_1) {\r\n                    e_6 = { error: e_6_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (arrays_2_1 && !arrays_2_1.done && (_b = arrays_2.return))\r\n                            _b.call(arrays_2);\r\n                    }\r\n                    finally {\r\n                        if (e_6)\r\n                            throw e_6.error;\r\n                    }\r\n                }\r\n                result.push(item);\r\n            }\r\n        }\r\n        catch (e_5_1) {\r\n            e_5 = { error: e_5_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (array_4_1 && !array_4_1.done && (_a = array_4.return))\r\n                    _a.call(array_4);\r\n            }\r\n            finally {\r\n                if (e_5)\r\n                    throw e_5.error;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.intersection = intersection;\r\n    function difference(array) {\r\n        var arrays = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            arrays[_i - 1] = arguments[_i];\r\n        }\r\n        var rest = concat(arrays);\r\n        return array.filter(function (value) { return !includes(rest, value); });\r\n    }\r\n    exports.difference = difference;\r\n    function remove_at(array, i) {\r\n        var result = copy(array);\r\n        result.splice(i, 1);\r\n        return result;\r\n    }\r\n    exports.remove_at = remove_at;\r\n    function remove_by(array, key) {\r\n        for (var i = 0; i < array.length;) {\r\n            if (key(array[i]))\r\n                array.splice(i, 1);\r\n            else\r\n                i++;\r\n        }\r\n    }\r\n    exports.remove_by = remove_by;\r\n    // Shuffle a collection, using the modern version of the\r\n    // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/FisherYates_shuffle).\r\n    function shuffle(array) {\r\n        var length = array.length;\r\n        var shuffled = new Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            var rand = math_1.randomIn(0, i);\r\n            if (rand !== i)\r\n                shuffled[i] = shuffled[rand];\r\n            shuffled[rand] = array[i];\r\n        }\r\n        return shuffled;\r\n    }\r\n    exports.shuffle = shuffle;\r\n    function pairwise(array, fn) {\r\n        var n = array.length;\r\n        var result = new Array(n - 1);\r\n        for (var i = 0; i < n - 1; i++) {\r\n            result[i] = fn(array[i], array[i + 1]);\r\n        }\r\n        return result;\r\n    }\r\n    exports.pairwise = pairwise;\r\n    function reversed(array) {\r\n        var n = array.length;\r\n        var result = new Array(n);\r\n        for (var i = 0; i < n; i++) {\r\n            result[n - i - 1] = array[i];\r\n        }\r\n        return result;\r\n    }\r\n    exports.reversed = reversed;\r\n    function repeat(value, n) {\r\n        var result = new Array(n);\r\n        for (var i = 0; i < n; i++) {\r\n            result[i] = value;\r\n        }\r\n        return result;\r\n    }\r\n    exports.repeat = repeat;\r\n}\r\n","/* core\\util\\math.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function angle_norm(angle) {\r\n        if (angle == 0) {\r\n            return 0;\r\n        }\r\n        while (angle <= 0) {\r\n            angle += 2 * Math.PI;\r\n        }\r\n        while (angle > 2 * Math.PI) {\r\n            angle -= 2 * Math.PI;\r\n        }\r\n        return angle;\r\n    }\r\n    exports.angle_norm = angle_norm;\r\n    function angle_dist(lhs, rhs) {\r\n        return angle_norm(lhs - rhs);\r\n    }\r\n    exports.angle_dist = angle_dist;\r\n    function angle_between(mid, lhs, rhs, direction) {\r\n        var d = angle_dist(lhs, rhs);\r\n        if (d == 0)\r\n            return false;\r\n        if (d == 2 * Math.PI)\r\n            return true;\r\n        var norm_mid = angle_norm(mid);\r\n        var cond = angle_dist(lhs, norm_mid) <= d && angle_dist(norm_mid, rhs) <= d;\r\n        return (direction == 0 /* clock */) ? cond : !cond;\r\n    }\r\n    exports.angle_between = angle_between;\r\n    function random() {\r\n        return Math.random();\r\n    }\r\n    exports.random = random;\r\n    function randomIn(min, max) {\r\n        if (max == null) {\r\n            max = min;\r\n            min = 0;\r\n        }\r\n        return min + Math.floor(Math.random() * (max - min + 1));\r\n    }\r\n    exports.randomIn = randomIn;\r\n    function atan2(start, end) {\r\n        /*\r\n         * Calculate the angle between a line containing start and end points (composed\r\n         * of [x, y] arrays) and the positive x-axis.\r\n         */\r\n        return Math.atan2(end[1] - start[1], end[0] - start[0]);\r\n    }\r\n    exports.atan2 = atan2;\r\n    function radians(degrees) {\r\n        return degrees * (Math.PI / 180);\r\n    }\r\n    exports.radians = radians;\r\n    function degrees(radians) {\r\n        return radians / (Math.PI / 180);\r\n    }\r\n    exports.degrees = degrees;\r\n    // http://www2.econ.osaka-u.ac.jp/~tanizaki/class/2013/econome3/13.pdf (Page 432)\r\n    function rnorm(mu, sigma) {\r\n        // Generate a random normal with a mean of 0 and a sigma of 1\r\n        var r1;\r\n        var r2;\r\n        while (true) {\r\n            r1 = random();\r\n            r2 = random();\r\n            r2 = (2 * r2 - 1) * Math.sqrt(2 * (1 / Math.E));\r\n            if (-4 * r1 * r1 * Math.log(r1) >= r2 * r2)\r\n                break;\r\n        }\r\n        var rn = r2 / r1;\r\n        // Transform the standard normal to meet the characteristics that we want (mu, sigma)\r\n        rn = mu + sigma * rn;\r\n        return rn;\r\n    }\r\n    exports.rnorm = rnorm;\r\n    function clamp(val, min, max) {\r\n        if (val < min)\r\n            return min;\r\n        if (val > max)\r\n            return max;\r\n        return val;\r\n    }\r\n    exports.clamp = clamp;\r\n}\r\n","/* core\\util\\assert.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var AssertionError = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AssertionError, _super);\r\n        function AssertionError() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return AssertionError;\r\n    }(Error));\r\n    exports.AssertionError = AssertionError;\r\n    AssertionError.__name__ = \"AssertionError\";\r\n    function assert(condition, message) {\r\n        if (condition === true || (condition !== false && condition()))\r\n            return;\r\n        throw new AssertionError(message !== null && message !== void 0 ? message : \"Assertion failed\");\r\n    }\r\n    exports.assert = assert;\r\n    function unreachable() {\r\n        throw new Error(\"unreachable code\");\r\n    }\r\n    exports.unreachable = unreachable;\r\n}\r\n","/* core\\util\\arrayable.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(123) /* ./types */;\r\n    var math_1 = require(125) /* ./math */;\r\n    function is_empty(array) {\r\n        return array.length == 0;\r\n    }\r\n    exports.is_empty = is_empty;\r\n    function copy(array) {\r\n        if (types_1.isArray(array))\r\n            return array.slice();\r\n        else\r\n            return new array.constructor(array);\r\n    }\r\n    exports.copy = copy;\r\n    function splice(array, start, k) {\r\n        var e_1, _a;\r\n        var items = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            items[_i - 3] = arguments[_i];\r\n        }\r\n        var len = array.length;\r\n        if (start < 0)\r\n            start += len;\r\n        if (start < 0)\r\n            start = 0;\r\n        else if (start > len)\r\n            start = len;\r\n        if (k == null || k > len - start)\r\n            k = len - start;\r\n        else if (k < 0)\r\n            k = 0;\r\n        var n = len - k + items.length;\r\n        var result = new array.constructor(n);\r\n        var i = 0;\r\n        for (; i < start; i++) {\r\n            result[i] = array[i];\r\n        }\r\n        try {\r\n            for (var items_1 = tslib_1.__values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\r\n                var item = items_1_1.value;\r\n                result[i++] = item;\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (items_1_1 && !items_1_1.done && (_a = items_1.return))\r\n                    _a.call(items_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        for (var j = start + k; j < len; j++) {\r\n            result[i++] = array[j];\r\n        }\r\n        return result;\r\n    }\r\n    exports.splice = splice;\r\n    function head(array, n) {\r\n        return splice(array, n, array.length - n);\r\n    }\r\n    exports.head = head;\r\n    function insert(array, item, i) {\r\n        return splice(array, i, 0, item);\r\n    }\r\n    exports.insert = insert;\r\n    function append(array, item) {\r\n        return splice(array, array.length, 0, item);\r\n    }\r\n    exports.append = append;\r\n    function prepend(array, item) {\r\n        return splice(array, 0, 0, item);\r\n    }\r\n    exports.prepend = prepend;\r\n    function indexOf(array, item) {\r\n        for (var i = 0, n = array.length; i < n; i++) {\r\n            if (array[i] === item)\r\n                return i;\r\n        }\r\n        return -1;\r\n    }\r\n    exports.indexOf = indexOf;\r\n    function subselect(array, indices) {\r\n        var n = indices.length;\r\n        var result = new array.constructor(n);\r\n        for (var i = 0; i < n; i++) {\r\n            result[i] = array[indices[i]];\r\n        }\r\n        return result;\r\n    }\r\n    exports.subselect = subselect;\r\n    function map(array, fn) {\r\n        var n = array.length;\r\n        var result = new array.constructor(n);\r\n        for (var i = 0; i < n; i++) {\r\n            result[i] = fn(array[i], i, array);\r\n        }\r\n        return result;\r\n    }\r\n    exports.map = map;\r\n    function filter(array, pred) {\r\n        var n = array.length;\r\n        var result = new array.constructor(n);\r\n        var k = 0;\r\n        for (var i = 0; i < n; i++) {\r\n            var value = array[i];\r\n            if (pred(value, i, array))\r\n                result[k++] = value;\r\n        }\r\n        return head(result, k);\r\n    }\r\n    exports.filter = filter;\r\n    function reduce(array, fn, initial) {\r\n        var n = array.length;\r\n        if (initial === undefined && n == 0)\r\n            throw new Error(\"can't reduce an empty array without an initial value\");\r\n        var value;\r\n        var i;\r\n        if (initial === undefined) {\r\n            value = array[0];\r\n            i = 1;\r\n        }\r\n        else {\r\n            value = initial;\r\n            i = 0;\r\n        }\r\n        for (; i < n; i++) {\r\n            value = fn(value, array[i], i, array);\r\n        }\r\n        return value;\r\n    }\r\n    exports.reduce = reduce;\r\n    function min(array) {\r\n        var value;\r\n        var result = Infinity;\r\n        for (var i = 0, length = array.length; i < length; i++) {\r\n            value = array[i];\r\n            if (!isNaN(value) && value < result) {\r\n                result = value;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.min = min;\r\n    function max(array) {\r\n        var value;\r\n        var result = -Infinity;\r\n        for (var i = 0, length = array.length; i < length; i++) {\r\n            value = array[i];\r\n            if (!isNaN(value) && value > result) {\r\n                result = value;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.max = max;\r\n    function minmax(array) {\r\n        var value;\r\n        var min = +Infinity;\r\n        var max = -Infinity;\r\n        for (var i = 0, length = array.length; i < length; i++) {\r\n            value = array[i];\r\n            if (!isNaN(value)) {\r\n                if (value < min) {\r\n                    min = value;\r\n                }\r\n                if (value > max) {\r\n                    max = value;\r\n                }\r\n            }\r\n        }\r\n        return [min, max];\r\n    }\r\n    exports.minmax = minmax;\r\n    function min_by(array, key) {\r\n        if (array.length == 0)\r\n            throw new Error(\"min_by() called with an empty array\");\r\n        var result = array[0];\r\n        var resultComputed = key(result);\r\n        for (var i = 1, length = array.length; i < length; i++) {\r\n            var value = array[i];\r\n            var computed = key(value);\r\n            if (computed < resultComputed) {\r\n                result = value;\r\n                resultComputed = computed;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.min_by = min_by;\r\n    function max_by(array, key) {\r\n        if (array.length == 0)\r\n            throw new Error(\"max_by() called with an empty array\");\r\n        var result = array[0];\r\n        var resultComputed = key(result);\r\n        for (var i = 1, length = array.length; i < length; i++) {\r\n            var value = array[i];\r\n            var computed = key(value);\r\n            if (computed > resultComputed) {\r\n                result = value;\r\n                resultComputed = computed;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.max_by = max_by;\r\n    function sum(array) {\r\n        var result = 0;\r\n        for (var i = 0, n = array.length; i < n; i++) {\r\n            result += array[i];\r\n        }\r\n        return result;\r\n    }\r\n    exports.sum = sum;\r\n    function cumsum(array) {\r\n        var result = new array.constructor(array.length);\r\n        reduce(array, function (a, b, i) { return result[i] = a + b; }, 0);\r\n        return result;\r\n    }\r\n    exports.cumsum = cumsum;\r\n    function every(array, predicate) {\r\n        for (var i = 0, length = array.length; i < length; i++) {\r\n            if (!predicate(array[i]))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    exports.every = every;\r\n    function some(array, predicate) {\r\n        for (var i = 0, length = array.length; i < length; i++) {\r\n            if (predicate(array[i]))\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n    exports.some = some;\r\n    function index_of(array, value) {\r\n        for (var i = 0, length = array.length; i < length; i++) {\r\n            if (array[i] === value)\r\n                return i;\r\n        }\r\n        return -1;\r\n    }\r\n    exports.index_of = index_of;\r\n    function _find_index(dir) {\r\n        return function (array, predicate) {\r\n            var length = array.length;\r\n            var index = dir > 0 ? 0 : length - 1;\r\n            for (; index >= 0 && index < length; index += dir) {\r\n                if (predicate(array[index]))\r\n                    return index;\r\n            }\r\n            return -1;\r\n        };\r\n    }\r\n    exports.find_index = _find_index(1);\r\n    exports.find_last_index = _find_index(-1);\r\n    function find(array, predicate) {\r\n        var index = exports.find_index(array, predicate);\r\n        return index == -1 ? undefined : array[index];\r\n    }\r\n    exports.find = find;\r\n    function find_last(array, predicate) {\r\n        var index = exports.find_last_index(array, predicate);\r\n        return index == -1 ? undefined : array[index];\r\n    }\r\n    exports.find_last = find_last;\r\n    function sorted_index(array, value) {\r\n        var low = 0;\r\n        var high = array.length;\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (array[mid] < value)\r\n                low = mid + 1;\r\n            else\r\n                high = mid;\r\n        }\r\n        return low;\r\n    }\r\n    exports.sorted_index = sorted_index;\r\n    function bin_counts(data, bin_edges) {\r\n        var nbins = bin_edges.length - 1;\r\n        var counts = Array(nbins).fill(0);\r\n        for (var i = 0; i < data.length; i++) {\r\n            var sample = data[i];\r\n            var index = sorted_index(bin_edges, sample);\r\n            var bin = math_1.clamp(index - 1, 0, nbins - 1);\r\n            counts[bin] += 1;\r\n        }\r\n        return counts;\r\n    }\r\n    exports.bin_counts = bin_counts;\r\n    function interpolate(points, x_values, y_values) {\r\n        // Implementation ported from np.interp\r\n        var n = points.length;\r\n        var results = new Array(n);\r\n        for (var i = 0; i < n; i++) {\r\n            var point = points[i];\r\n            if (isNaN(point)) {\r\n                results[i] = point;\r\n                continue;\r\n            }\r\n            var index = left_edge_index(point, x_values);\r\n            if (index == -1)\r\n                results[i] = y_values[0];\r\n            else if (index == x_values.length)\r\n                results[i] = y_values[y_values.length - 1];\r\n            else if (index == x_values.length - 1 || x_values[index] == point) {\r\n                results[i] = y_values[index];\r\n            }\r\n            else {\r\n                var x0 = x_values[index];\r\n                var y0 = y_values[index];\r\n                var x1 = x_values[index + 1];\r\n                var y1 = y_values[index + 1];\r\n                results[i] = lerp(point, x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    exports.interpolate = interpolate;\r\n    function lerp(x, x0, y0, x1, y1) {\r\n        var slope = (y1 - y0) / (x1 - x0);\r\n        var res = slope * (x - x0) + y0;\r\n        if (!isFinite(res)) {\r\n            res = slope * (x - x1) + y1;\r\n            if (!isFinite(res) && (y0 == y1))\r\n                res = y0;\r\n        }\r\n        return res;\r\n    }\r\n    function left_edge_index(point, intervals) {\r\n        if (point < intervals[0])\r\n            return -1;\r\n        if (point > intervals[intervals.length - 1])\r\n            return intervals.length;\r\n        var leftEdgeIndex = 0;\r\n        var rightEdgeIndex = intervals.length - 1;\r\n        while (rightEdgeIndex - leftEdgeIndex != 1) {\r\n            var indexOfNumberToCompare = leftEdgeIndex + Math.floor((rightEdgeIndex - leftEdgeIndex) / 2);\r\n            if (point >= intervals[indexOfNumberToCompare])\r\n                leftEdgeIndex = indexOfNumberToCompare;\r\n            else\r\n                rightEdgeIndex = indexOfNumberToCompare;\r\n        }\r\n        return leftEdgeIndex;\r\n    }\r\n    exports.left_edge_index = left_edge_index;\r\n    function norm(array, start, end) {\r\n        var span = end - start;\r\n        return map(array, function (x) { return (x - start) / span; });\r\n    }\r\n    exports.norm = norm;\r\n}\r\n","/* core\\util\\object.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var array_1 = require(124) /* ./array */;\r\n    exports.keys = Object.keys, exports.values = Object.values, exports.entries = Object.entries, exports.extend = Object.assign;\r\n    function clone(obj) {\r\n        return Object.assign({}, obj);\r\n    }\r\n    exports.clone = clone;\r\n    function merge(obj1, obj2) {\r\n        var e_1, _a;\r\n        /*\r\n         * Returns an object with the array values for obj1 and obj2 unioned by key.\r\n         */\r\n        var result = Object.create(Object.prototype);\r\n        var keys = array_1.concat([Object.keys(obj1), Object.keys(obj2)]);\r\n        try {\r\n            for (var keys_1 = tslib_1.__values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\r\n                var key = keys_1_1.value;\r\n                var arr1 = obj1.hasOwnProperty(key) ? obj1[key] : [];\r\n                var arr2 = obj2.hasOwnProperty(key) ? obj2[key] : [];\r\n                result[key] = array_1.union(arr1, arr2);\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return))\r\n                    _a.call(keys_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.merge = merge;\r\n    function size(obj) {\r\n        return Object.keys(obj).length;\r\n    }\r\n    exports.size = size;\r\n    function isEmpty(obj) {\r\n        return size(obj) == 0;\r\n    }\r\n    exports.isEmpty = isEmpty;\r\n    function to_object(map) {\r\n        var e_2, _a;\r\n        var obj = {};\r\n        try {\r\n            for (var map_1 = tslib_1.__values(map), map_1_1 = map_1.next(); !map_1_1.done; map_1_1 = map_1.next()) {\r\n                var _b = tslib_1.__read(map_1_1.value, 2), key = _b[0], val = _b[1];\r\n                obj[key] = val;\r\n            }\r\n        }\r\n        catch (e_2_1) {\r\n            e_2 = { error: e_2_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (map_1_1 && !map_1_1.done && (_a = map_1.return))\r\n                    _a.call(map_1);\r\n            }\r\n            finally {\r\n                if (e_2)\r\n                    throw e_2.error;\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    exports.to_object = to_object;\r\n}\r\n","/* core\\has_props.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var signaling_1 = require(130) /* ./signaling */;\r\n    var refs_1 = require(132) /* ./util/refs */;\r\n    var p = tslib_1.__importStar(require(133) /* ./properties */);\r\n    var k = tslib_1.__importStar(require(136) /* ./kinds */);\r\n    var mixins = tslib_1.__importStar(require(143) /* ./property_mixins */);\r\n    var string_1 = require(144) /* ./util/string */;\r\n    var array_1 = require(124) /* ./util/array */;\r\n    var object_1 = require(128) /* ./util/object */;\r\n    var types_1 = require(123) /* ./util/types */;\r\n    var eq_1 = require(140) /* ./util/eq */;\r\n    var document_1 = require(120) /* ../document */;\r\n    var ndarray_1 = require(145) /* ./util/ndarray */;\r\n    var serialization_1 = require(146) /* ./util/serialization */;\r\n    var eq_2 = require(140) /* ./util/eq */;\r\n    var pretty_1 = require(148) /* ./util/pretty */;\r\n    var kinds = tslib_1.__importStar(require(136) /* ./kinds */);\r\n    var HasProps = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HasProps, _super);\r\n        function HasProps(attrs) {\r\n            var e_1, _b;\r\n            if (attrs === void 0) {\r\n                attrs = {};\r\n            }\r\n            var _this = this;\r\n            var _a;\r\n            _this = _super.call(this) || this;\r\n            _this._subtype = undefined;\r\n            _this.document = null;\r\n            _this.destroyed = new signaling_1.Signal0(_this, \"destroyed\");\r\n            _this.change = new signaling_1.Signal0(_this, \"change\");\r\n            _this.transformchange = new signaling_1.Signal0(_this, \"transformchange\");\r\n            _this.properties = {}; // Object.create(null)\r\n            _this._pending = false;\r\n            _this._changing = false;\r\n            var get = attrs instanceof Map ? attrs.get : function (name) { return attrs[name]; };\r\n            try {\r\n                for (var _c = tslib_1.__values(object_1.entries(_this._props)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), name = _e[0], _f = _e[1], type = _f.type, default_value = _f.default_value, options = _f.options;\r\n                    var property = void 0;\r\n                    if (type instanceof k.Kind)\r\n                        property = new p.PrimitiveProperty(_this, name, type, default_value, get(name), options);\r\n                    else\r\n                        property = new type(_this, name, k.Any, default_value, get(name), options);\r\n                    _this.properties[name] = property;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            // allowing us to defer initialization when loading many models\r\n            // when loading a bunch of models, we want to do initialization as a second pass\r\n            // because other objects that this one depends on might not be loaded yet\r\n            if (!((_a = get(\"__deferred__\")) !== null && _a !== void 0 ? _a : false)) {\r\n                _this.finalize();\r\n                _this.connect_signals();\r\n            }\r\n            return _this;\r\n        }\r\n        Object.defineProperty(HasProps.prototype, \"type\", {\r\n            get: function () {\r\n                return this.constructor.__qualified__;\r\n            },\r\n            // XXX: setter is only required for backwards compatibility\r\n            set: function (name) {\r\n                console.warn(\"prototype.type = 'ModelName' is deprecated, use static __name__ instead\");\r\n                this.constructor.__name__ = name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(HasProps, \"__qualified__\", {\r\n            get: function () {\r\n                var _b = this, __module__ = _b.__module__, __name__ = _b.__name__;\r\n                return __module__ != null ? __module__ + \".\" + __name__ : __name__;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(HasProps, Symbol.toStringTag, {\r\n            get: function () {\r\n                return this.__name__;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        HasProps.init_HasProps = function () {\r\n            this.prototype._props = {};\r\n            this.prototype._mixins = [];\r\n            this.define({\r\n                id: [p.String, function () { return string_1.uniqueId(); }],\r\n            });\r\n        };\r\n        HasProps._fix_default = function (default_value, _attr) {\r\n            if (default_value === undefined)\r\n                return undefined;\r\n            else if (types_1.isFunction(default_value))\r\n                return default_value;\r\n            else if (types_1.isArray(default_value))\r\n                return function () { return array_1.copy(default_value); };\r\n            else if (types_1.isPlainObject(default_value))\r\n                return function () { return object_1.clone(default_value); };\r\n            else if (!types_1.isObject(default_value))\r\n                return function () { return default_value; };\r\n            else\r\n                throw new Error(default_value + \" must be explicitly wrapped in a function\");\r\n        };\r\n        // TODO: don't use Partial<>, but exclude inherited properties\r\n        HasProps.define = function (obj) {\r\n            var e_2, _b;\r\n            var _loop_1 = function (name, prop) {\r\n                if (this_1.prototype._props[name] != null)\r\n                    throw new Error(\"attempted to redefine property '\" + this_1.prototype.type + \".\" + name + \"'\");\r\n                if (this_1.prototype[name] != null)\r\n                    throw new Error(\"attempted to redefine attribute '\" + this_1.prototype.type + \".\" + name + \"'\");\r\n                Object.defineProperty(this_1.prototype, name, {\r\n                    // XXX: don't use tail calls in getters/setters due to https://bugs.webkit.org/show_bug.cgi?id=164306\r\n                    get: function () {\r\n                        var value = this.properties[name].get_value();\r\n                        return value;\r\n                    },\r\n                    set: function (value) {\r\n                        var _b;\r\n                        this.setv((_b = {}, _b[name] = value, _b));\r\n                        return this;\r\n                    },\r\n                    configurable: false,\r\n                    enumerable: true,\r\n                });\r\n                var _b = tslib_1.__read(prop, 3), type = _b[0], default_value = _b[1], options = _b[2];\r\n                var refined_prop = {\r\n                    type: type,\r\n                    default_value: this_1._fix_default(default_value, name),\r\n                    options: options,\r\n                };\r\n                var props = object_1.clone(this_1.prototype._props);\r\n                props[name] = refined_prop;\r\n                this_1.prototype._props = props;\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var _c = tslib_1.__values(object_1.entries(types_1.isFunction(obj) ? obj(kinds) : obj)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), name = _e[0], prop = _e[1];\r\n                    _loop_1(name, prop);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        HasProps.internal = function (obj) {\r\n            var e_3, _b;\r\n            var _object = {};\r\n            try {\r\n                for (var _c = tslib_1.__values(object_1.entries(obj)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), name = _e[0], entry = _e[1];\r\n                    var _f = tslib_1.__read(entry, 3), type = _f[0], default_value = _f[1], _g = _f[2], options = _g === void 0 ? {} : _g;\r\n                    _object[name] = [type, default_value, Object.assign(Object.assign({}, options), { internal: true })];\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            this.define(_object);\r\n        };\r\n        HasProps.mixins = function (defs) {\r\n            var e_4, _b;\r\n            if (!types_1.isArray(defs))\r\n                defs = [defs];\r\n            function resolve(kind) {\r\n                switch (kind) {\r\n                    case \"line\": return mixins.LineVector;\r\n                    case \"fill\": return mixins.FillVector;\r\n                    case \"hatch\": return mixins.HatchVector;\r\n                    case \"text\": return mixins.TextVector;\r\n                    default:\r\n                        throw new Error(\"Unknown property mixin kind '\" + kind + \"'\");\r\n                }\r\n            }\r\n            function rename(prefix, mixin) {\r\n                var e_5, _b;\r\n                var result = {};\r\n                try {\r\n                    for (var _c = tslib_1.__values(object_1.entries(mixin)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var _e = tslib_1.__read(_d.value, 2), name = _e[0], prop = _e[1];\r\n                        result[prefix + name] = prop;\r\n                    }\r\n                }\r\n                catch (e_5_1) {\r\n                    e_5 = { error: e_5_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_5)\r\n                            throw e_5.error;\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n            function kind_of(mixin) {\r\n                var _b = tslib_1.__read(Object.keys(mixin), 1), key = _b[0];\r\n                var _c = tslib_1.__read(key.split(\"_\", 1), 1), kind = _c[0];\r\n                return kind;\r\n            }\r\n            var mixin_defs = {};\r\n            var names = [];\r\n            try {\r\n                for (var defs_1 = tslib_1.__values(defs), defs_1_1 = defs_1.next(); !defs_1_1.done; defs_1_1 = defs_1.next()) {\r\n                    var def = defs_1_1.value;\r\n                    if (types_1.isString(def)) {\r\n                        // TODO: remove this branch in 3.0\r\n                        var _c = tslib_1.__read(def.split(\":\"), 2), kind = _c[0], _d = _c[1], prefix = _d === void 0 ? \"\" : _d;\r\n                        var mixin = resolve(kind);\r\n                        names.push(def);\r\n                        object_1.extend(mixin_defs, rename(prefix, mixin));\r\n                    }\r\n                    else if (types_1.isArray(def)) {\r\n                        var _e = tslib_1.__read(def, 2), prefix = _e[0], mixin = _e[1];\r\n                        names.push(kind_of(mixin) + \":\" + prefix);\r\n                        object_1.extend(mixin_defs, rename(prefix, mixin));\r\n                    }\r\n                    else {\r\n                        var mixin = def;\r\n                        names.push(kind_of(mixin));\r\n                        object_1.extend(mixin_defs, mixin);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (defs_1_1 && !defs_1_1.done && (_b = defs_1.return))\r\n                        _b.call(defs_1);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            this.define(mixin_defs);\r\n            this.prototype._mixins = tslib_1.__spread(this.prototype._mixins, names);\r\n        };\r\n        HasProps.override = function (obj) {\r\n            var e_6, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(object_1.entries(obj)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), name = _e[0], prop = _e[1];\r\n                    var default_value = this._fix_default(prop, name);\r\n                    var value = this.prototype._props[name];\r\n                    if (value == null)\r\n                        throw new Error(\"attempted to override nonexistent '\" + this.prototype.type + \".\" + name + \"'\");\r\n                    var props = object_1.clone(this.prototype._props);\r\n                    props[name] = Object.assign(Object.assign({}, value), { default_value: default_value });\r\n                    this.prototype._props = props;\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n        };\r\n        HasProps.prototype.toString = function () {\r\n            return this.type + \"(\" + this.id + \")\";\r\n        };\r\n        HasProps.prototype.property = function (name) {\r\n            var prop = this.properties[name];\r\n            if (prop != null)\r\n                return prop;\r\n            else\r\n                throw new Error(\"unknown property \" + this.type + \".\" + name);\r\n        };\r\n        Object.defineProperty(HasProps.prototype, \"attributes\", {\r\n            get: function () {\r\n                var e_7, _b;\r\n                var attrs = {}; // Object.create(null)\r\n                try {\r\n                    for (var _c = tslib_1.__values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var prop = _d.value;\r\n                        attrs[prop.attr] = prop.get_value();\r\n                    }\r\n                }\r\n                catch (e_7_1) {\r\n                    e_7 = { error: e_7_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_7)\r\n                            throw e_7.error;\r\n                    }\r\n                }\r\n                return attrs;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        HasProps.prototype[eq_2.equals] = function (that, cmp) {\r\n            var e_8, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var p0 = _d.value;\r\n                    var p1 = that.property(p0.attr);\r\n                    if (cmp.eq(p0.get_value(), p1.get_value()))\r\n                        return false;\r\n                }\r\n            }\r\n            catch (e_8_1) {\r\n                e_8 = { error: e_8_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_8)\r\n                        throw e_8.error;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        HasProps.prototype[pretty_1.pretty] = function (printer) {\r\n            var e_9, _b;\r\n            var T = printer.token;\r\n            var items = [];\r\n            try {\r\n                for (var _c = tslib_1.__values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var prop = _d.value;\r\n                    if (prop.dirty) {\r\n                        var value = prop.get_value();\r\n                        items.push(\"\" + prop.attr + T(\":\") + \" \" + printer.to_string(value));\r\n                    }\r\n                }\r\n            }\r\n            catch (e_9_1) {\r\n                e_9 = { error: e_9_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_9)\r\n                        throw e_9.error;\r\n                }\r\n            }\r\n            var cls = this.constructor.__qualified__;\r\n            return \"\" + cls + T(\"(\") + T(\"{\") + items.join(T(\",\") + \" \") + T(\"}\") + T(\")\");\r\n        };\r\n        HasProps.prototype.finalize = function () {\r\n            var e_10, _b;\r\n            var _this = this;\r\n            try {\r\n                for (var _c = tslib_1.__values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var prop = _d.value;\r\n                    if (prop.spec.transform != null)\r\n                        this.connect(prop.spec.transform.change, function () { return _this.transformchange.emit(); });\r\n                }\r\n            }\r\n            catch (e_10_1) {\r\n                e_10 = { error: e_10_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_10)\r\n                        throw e_10.error;\r\n                }\r\n            }\r\n            this.initialize();\r\n        };\r\n        HasProps.prototype.initialize = function () { };\r\n        HasProps.prototype.connect_signals = function () { };\r\n        HasProps.prototype.disconnect_signals = function () {\r\n            signaling_1.Signal.disconnectReceiver(this);\r\n        };\r\n        HasProps.prototype.destroy = function () {\r\n            this.disconnect_signals();\r\n            this.destroyed.emit();\r\n        };\r\n        // Create a new model with identical attributes to this one.\r\n        HasProps.prototype.clone = function () {\r\n            return new this.constructor(this.attributes);\r\n        };\r\n        // Set a hash of model attributes on the object, firing `\"change\"`. This is\r\n        // the core primitive operation of a model, updating the data and notifying\r\n        // anyone who needs to know about the change in state. The heart of the beast.\r\n        HasProps.prototype._setv = function (changes, options) {\r\n            var e_11, _b, e_12, _c;\r\n            // Extract attributes and options.\r\n            var check_eq = options.check_eq;\r\n            var changed = [];\r\n            var changing = this._changing;\r\n            this._changing = true;\r\n            try {\r\n                for (var changes_1 = tslib_1.__values(changes), changes_1_1 = changes_1.next(); !changes_1_1.done; changes_1_1 = changes_1.next()) {\r\n                    var _d = tslib_1.__read(changes_1_1.value, 2), prop = _d[0], value = _d[1];\r\n                    if (check_eq === false || !eq_1.isEqual(prop.get_value(), value)) {\r\n                        prop.set_value(value);\r\n                        changed.push(prop);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_11_1) {\r\n                e_11 = { error: e_11_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (changes_1_1 && !changes_1_1.done && (_b = changes_1.return))\r\n                        _b.call(changes_1);\r\n                }\r\n                finally {\r\n                    if (e_11)\r\n                        throw e_11.error;\r\n                }\r\n            }\r\n            // Trigger all relevant attribute changes.\r\n            if (changed.length > 0)\r\n                this._pending = true;\r\n            try {\r\n                for (var changed_1 = tslib_1.__values(changed), changed_1_1 = changed_1.next(); !changed_1_1.done; changed_1_1 = changed_1.next()) {\r\n                    var prop = changed_1_1.value;\r\n                    prop.change.emit();\r\n                }\r\n            }\r\n            catch (e_12_1) {\r\n                e_12 = { error: e_12_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (changed_1_1 && !changed_1_1.done && (_c = changed_1.return))\r\n                        _c.call(changed_1);\r\n                }\r\n                finally {\r\n                    if (e_12)\r\n                        throw e_12.error;\r\n                }\r\n            }\r\n            // You might be wondering why there's a `while` loop here. Changes can\r\n            // be recursively nested within `\"change\"` events.\r\n            if (changing)\r\n                return;\r\n            if (!options.no_change) {\r\n                while (this._pending) {\r\n                    this._pending = false;\r\n                    this.change.emit();\r\n                }\r\n            }\r\n            this._pending = false;\r\n            this._changing = false;\r\n        };\r\n        HasProps.prototype.setv = function (changed_attrs, options) {\r\n            var e_13, _b, e_14, _c, e_15, _d, e_16, _e;\r\n            if (options === void 0) {\r\n                options = {};\r\n            }\r\n            var changes = object_1.entries(changed_attrs);\r\n            if (changes.length == 0)\r\n                return;\r\n            if (options.silent === true) {\r\n                try {\r\n                    for (var changes_2 = tslib_1.__values(changes), changes_2_1 = changes_2.next(); !changes_2_1.done; changes_2_1 = changes_2.next()) {\r\n                        var _f = tslib_1.__read(changes_2_1.value, 2), attr = _f[0], value = _f[1];\r\n                        this.properties[attr].set_value(value);\r\n                    }\r\n                }\r\n                catch (e_13_1) {\r\n                    e_13 = { error: e_13_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (changes_2_1 && !changes_2_1.done && (_b = changes_2.return))\r\n                            _b.call(changes_2);\r\n                    }\r\n                    finally {\r\n                        if (e_13)\r\n                            throw e_13.error;\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            var changed = new Map();\r\n            var previous = new Map();\r\n            try {\r\n                for (var changes_3 = tslib_1.__values(changes), changes_3_1 = changes_3.next(); !changes_3_1.done; changes_3_1 = changes_3.next()) {\r\n                    var _g = tslib_1.__read(changes_3_1.value, 2), attr = _g[0], value = _g[1];\r\n                    var prop = this.properties[attr];\r\n                    changed.set(prop, value);\r\n                    previous.set(prop, prop.get_value());\r\n                }\r\n            }\r\n            catch (e_14_1) {\r\n                e_14 = { error: e_14_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (changes_3_1 && !changes_3_1.done && (_c = changes_3.return))\r\n                        _c.call(changes_3);\r\n                }\r\n                finally {\r\n                    if (e_14)\r\n                        throw e_14.error;\r\n                }\r\n            }\r\n            this._setv(changed, options);\r\n            var document = this.document;\r\n            if (document != null) {\r\n                var changed_3 = [];\r\n                try {\r\n                    for (var previous_1 = tslib_1.__values(previous), previous_1_1 = previous_1.next(); !previous_1_1.done; previous_1_1 = previous_1.next()) {\r\n                        var _h = tslib_1.__read(previous_1_1.value, 2), prop = _h[0], value = _h[1];\r\n                        changed_3.push([prop, value, prop.get_value()]);\r\n                    }\r\n                }\r\n                catch (e_15_1) {\r\n                    e_15 = { error: e_15_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (previous_1_1 && !previous_1_1.done && (_d = previous_1.return))\r\n                            _d.call(previous_1);\r\n                    }\r\n                    finally {\r\n                        if (e_15)\r\n                            throw e_15.error;\r\n                    }\r\n                }\r\n                try {\r\n                    for (var changed_2 = tslib_1.__values(changed_3), changed_2_1 = changed_2.next(); !changed_2_1.done; changed_2_1 = changed_2.next()) {\r\n                        var _j = tslib_1.__read(changed_2_1.value, 3), old_value = _j[1], new_value = _j[2];\r\n                        if (this._needs_invalidate(old_value, new_value)) {\r\n                            document._invalidate_all_models();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_16_1) {\r\n                    e_16 = { error: e_16_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (changed_2_1 && !changed_2_1.done && (_e = changed_2.return))\r\n                            _e.call(changed_2);\r\n                    }\r\n                    finally {\r\n                        if (e_16)\r\n                            throw e_16.error;\r\n                    }\r\n                }\r\n                this._push_changes(changed_3, options);\r\n            }\r\n        };\r\n        /** @deprecated */\r\n        HasProps.prototype.getv = function (name) {\r\n            return this.property(name).get_value();\r\n        };\r\n        HasProps.prototype.ref = function () {\r\n            return { id: this.id };\r\n        };\r\n        HasProps.prototype.struct = function () {\r\n            var struct = {\r\n                type: this.type,\r\n                id: this.id,\r\n                attributes: {},\r\n            };\r\n            if (this._subtype != null) {\r\n                struct.subtype = this._subtype;\r\n            }\r\n            return struct;\r\n        };\r\n        // we only keep the subtype so we match Python;\r\n        // only Python cares about this\r\n        HasProps.prototype.set_subtype = function (subtype) {\r\n            this._subtype = subtype;\r\n        };\r\n        HasProps.prototype[Symbol.iterator] = function () {\r\n            return tslib_1.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [5 /*yield**/, tslib_1.__values(object_1.values(this.properties))];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        HasProps.prototype.syncable_properties = function () {\r\n            var _b, _c, prop, e_17_1;\r\n            var e_17, _d;\r\n            return tslib_1.__generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        _e.trys.push([0, 5, 6, 7]);\r\n                        _b = tslib_1.__values(this), _c = _b.next();\r\n                        _e.label = 1;\r\n                    case 1:\r\n                        if (!!_c.done)\r\n                            return [3 /*break*/, 4];\r\n                        prop = _c.value;\r\n                        if (!prop.syncable)\r\n                            return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, prop];\r\n                    case 2:\r\n                        _e.sent();\r\n                        _e.label = 3;\r\n                    case 3:\r\n                        _c = _b.next();\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [3 /*break*/, 7];\r\n                    case 5:\r\n                        e_17_1 = _e.sent();\r\n                        e_17 = { error: e_17_1 };\r\n                        return [3 /*break*/, 7];\r\n                    case 6:\r\n                        try {\r\n                            if (_c && !_c.done && (_d = _b.return))\r\n                                _d.call(_b);\r\n                        }\r\n                        finally {\r\n                            if (e_17)\r\n                                throw e_17.error;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        /** @deprecated */\r\n        HasProps.prototype.serializable_attributes = function () {\r\n            var e_18, _b;\r\n            var attrs = {};\r\n            try {\r\n                for (var _c = tslib_1.__values(this.syncable_properties()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var prop = _d.value;\r\n                    attrs[prop.attr] = prop.get_value();\r\n                }\r\n            }\r\n            catch (e_18_1) {\r\n                e_18 = { error: e_18_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_18)\r\n                        throw e_18.error;\r\n                }\r\n            }\r\n            return attrs;\r\n        };\r\n        HasProps._value_to_json = function (value) {\r\n            var e_19, _b;\r\n            if (value instanceof HasProps)\r\n                return value.ref();\r\n            else if (ndarray_1.is_NDArray(value))\r\n                return serialization_1.encode_NDArray(value);\r\n            else if (types_1.isArray(value) || types_1.isTypedArray(value)) {\r\n                var n = value.length;\r\n                var ref_array = new Array(n);\r\n                for (var i = 0; i < n; i++) {\r\n                    var v = value[i];\r\n                    ref_array[i] = HasProps._value_to_json(v);\r\n                }\r\n                return ref_array;\r\n            }\r\n            else if (types_1.isPlainObject(value)) {\r\n                var ref_obj = {};\r\n                try {\r\n                    for (var _c = tslib_1.__values(object_1.entries(value)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var _e = tslib_1.__read(_d.value, 2), subkey = _e[0], subvalue = _e[1];\r\n                        ref_obj[subkey] = HasProps._value_to_json(subvalue);\r\n                    }\r\n                }\r\n                catch (e_19_1) {\r\n                    e_19 = { error: e_19_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_19)\r\n                            throw e_19.error;\r\n                    }\r\n                }\r\n                return ref_obj;\r\n            }\r\n            else\r\n                return value;\r\n        };\r\n        // Convert attributes to \"shallow\" JSON (values which are themselves models\r\n        // are included as just references)\r\n        HasProps.prototype.attributes_as_json = function (include_defaults, value_to_json) {\r\n            var e_20, _b;\r\n            if (include_defaults === void 0) {\r\n                include_defaults = true;\r\n            }\r\n            if (value_to_json === void 0) {\r\n                value_to_json = HasProps._value_to_json;\r\n            }\r\n            var attributes = {}; // Object.create(null)\r\n            try {\r\n                for (var _c = tslib_1.__values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var prop = _d.value;\r\n                    if (prop.syncable && (include_defaults || prop.dirty)) {\r\n                        attributes[prop.attr] = value_to_json(prop.get_value());\r\n                    }\r\n                }\r\n            }\r\n            catch (e_20_1) {\r\n                e_20 = { error: e_20_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_20)\r\n                        throw e_20.error;\r\n                }\r\n            }\r\n            return attributes;\r\n        };\r\n        // this is like _value_record_references but expects to find refs\r\n        // instead of models, and takes a doc to look up the refs in\r\n        HasProps._json_record_references = function (doc, v, refs, options) {\r\n            var e_21, _b, e_22, _c;\r\n            var recursive = options.recursive;\r\n            if (refs_1.is_ref(v)) {\r\n                var model = doc.get_model_by_id(v.id);\r\n                if (model != null && !refs.has(model)) {\r\n                    HasProps._value_record_references(model, refs, { recursive: recursive });\r\n                }\r\n            }\r\n            else if (types_1.isArray(v)) {\r\n                try {\r\n                    for (var v_1 = tslib_1.__values(v), v_1_1 = v_1.next(); !v_1_1.done; v_1_1 = v_1.next()) {\r\n                        var elem = v_1_1.value;\r\n                        HasProps._json_record_references(doc, elem, refs, { recursive: recursive });\r\n                    }\r\n                }\r\n                catch (e_21_1) {\r\n                    e_21 = { error: e_21_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (v_1_1 && !v_1_1.done && (_b = v_1.return))\r\n                            _b.call(v_1);\r\n                    }\r\n                    finally {\r\n                        if (e_21)\r\n                            throw e_21.error;\r\n                    }\r\n                }\r\n            }\r\n            else if (types_1.isPlainObject(v)) {\r\n                try {\r\n                    for (var _d = tslib_1.__values(object_1.values(v)), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                        var elem = _e.value;\r\n                        HasProps._json_record_references(doc, elem, refs, { recursive: recursive });\r\n                    }\r\n                }\r\n                catch (e_22_1) {\r\n                    e_22 = { error: e_22_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_e && !_e.done && (_c = _d.return))\r\n                            _c.call(_d);\r\n                    }\r\n                    finally {\r\n                        if (e_22)\r\n                            throw e_22.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        // add all references from 'v' to 'result', if recurse\r\n        // is true then descend into refs, if false only\r\n        // descend into non-refs\r\n        HasProps._value_record_references = function (v, refs, options) {\r\n            var e_23, _b, e_24, _c, e_25, _d;\r\n            var recursive = options.recursive;\r\n            if (v instanceof HasProps) {\r\n                if (!refs.has(v)) {\r\n                    refs.add(v);\r\n                    if (recursive) {\r\n                        var immediate = v._immediate_references();\r\n                        try {\r\n                            for (var immediate_1 = tslib_1.__values(immediate), immediate_1_1 = immediate_1.next(); !immediate_1_1.done; immediate_1_1 = immediate_1.next()) {\r\n                                var obj = immediate_1_1.value;\r\n                                HasProps._value_record_references(obj, refs, { recursive: true });\r\n                            }\r\n                        }\r\n                        catch (e_23_1) {\r\n                            e_23 = { error: e_23_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (immediate_1_1 && !immediate_1_1.done && (_b = immediate_1.return))\r\n                                    _b.call(immediate_1);\r\n                            }\r\n                            finally {\r\n                                if (e_23)\r\n                                    throw e_23.error;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (types_1.isArray(v)) {\r\n                try {\r\n                    for (var v_2 = tslib_1.__values(v), v_2_1 = v_2.next(); !v_2_1.done; v_2_1 = v_2.next()) {\r\n                        var elem = v_2_1.value;\r\n                        HasProps._value_record_references(elem, refs, { recursive: recursive });\r\n                    }\r\n                }\r\n                catch (e_24_1) {\r\n                    e_24 = { error: e_24_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (v_2_1 && !v_2_1.done && (_c = v_2.return))\r\n                            _c.call(v_2);\r\n                    }\r\n                    finally {\r\n                        if (e_24)\r\n                            throw e_24.error;\r\n                    }\r\n                }\r\n            }\r\n            else if (types_1.isPlainObject(v)) {\r\n                try {\r\n                    for (var _e = tslib_1.__values(object_1.values(v)), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                        var elem = _f.value;\r\n                        HasProps._value_record_references(elem, refs, { recursive: recursive });\r\n                    }\r\n                }\r\n                catch (e_25_1) {\r\n                    e_25 = { error: e_25_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_f && !_f.done && (_d = _e.return))\r\n                            _d.call(_e);\r\n                    }\r\n                    finally {\r\n                        if (e_25)\r\n                            throw e_25.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        // Get models that are immediately referenced by our properties\r\n        // (do not recurse, do not include ourselves)\r\n        HasProps.prototype._immediate_references = function () {\r\n            var e_26, _b;\r\n            var refs = new Set();\r\n            try {\r\n                for (var _c = tslib_1.__values(this.syncable_properties()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var prop = _d.value;\r\n                    var value = prop.get_value();\r\n                    HasProps._value_record_references(value, refs, { recursive: false });\r\n                }\r\n            }\r\n            catch (e_26_1) {\r\n                e_26 = { error: e_26_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_26)\r\n                        throw e_26.error;\r\n                }\r\n            }\r\n            return refs;\r\n        };\r\n        HasProps.prototype.references = function () {\r\n            var refs = new Set();\r\n            HasProps._value_record_references(this, refs, { recursive: true });\r\n            return refs;\r\n        };\r\n        HasProps.prototype._doc_attached = function () { };\r\n        HasProps.prototype._doc_detached = function () { };\r\n        HasProps.prototype.attach_document = function (doc) {\r\n            // This should only be called by the Document implementation to set the document field\r\n            if (this.document != null && this.document != doc)\r\n                throw new Error(\"models must be owned by only a single document\");\r\n            this.document = doc;\r\n            this._doc_attached();\r\n        };\r\n        HasProps.prototype.detach_document = function () {\r\n            // This should only be called by the Document implementation to unset the document field\r\n            this._doc_detached();\r\n            this.document = null;\r\n        };\r\n        HasProps.prototype._needs_invalidate = function (old_value, new_value) {\r\n            var e_27, _b, e_28, _c;\r\n            var new_refs = new Set();\r\n            HasProps._value_record_references(new_value, new_refs, { recursive: false });\r\n            var old_refs = new Set();\r\n            HasProps._value_record_references(old_value, old_refs, { recursive: false });\r\n            try {\r\n                for (var new_refs_1 = tslib_1.__values(new_refs), new_refs_1_1 = new_refs_1.next(); !new_refs_1_1.done; new_refs_1_1 = new_refs_1.next()) {\r\n                    var new_id = new_refs_1_1.value;\r\n                    if (!old_refs.has(new_id))\r\n                        return true;\r\n                }\r\n            }\r\n            catch (e_27_1) {\r\n                e_27 = { error: e_27_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (new_refs_1_1 && !new_refs_1_1.done && (_b = new_refs_1.return))\r\n                        _b.call(new_refs_1);\r\n                }\r\n                finally {\r\n                    if (e_27)\r\n                        throw e_27.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var old_refs_1 = tslib_1.__values(old_refs), old_refs_1_1 = old_refs_1.next(); !old_refs_1_1.done; old_refs_1_1 = old_refs_1.next()) {\r\n                    var old_id = old_refs_1_1.value;\r\n                    if (!new_refs.has(old_id))\r\n                        return true;\r\n                }\r\n            }\r\n            catch (e_28_1) {\r\n                e_28 = { error: e_28_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (old_refs_1_1 && !old_refs_1_1.done && (_c = old_refs_1.return))\r\n                        _c.call(old_refs_1);\r\n                }\r\n                finally {\r\n                    if (e_28)\r\n                        throw e_28.error;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        HasProps.prototype._push_changes = function (changes, options) {\r\n            var e_29, _b, _c;\r\n            if (options === void 0) {\r\n                options = {};\r\n            }\r\n            var document = this.document;\r\n            if (document == null)\r\n                return;\r\n            var setter_id = options.setter_id;\r\n            var events = [];\r\n            try {\r\n                for (var changes_4 = tslib_1.__values(changes), changes_4_1 = changes_4.next(); !changes_4_1.done; changes_4_1 = changes_4.next()) {\r\n                    var _d = tslib_1.__read(changes_4_1.value, 3), prop = _d[0], old_value = _d[1], new_value = _d[2];\r\n                    if (prop.syncable)\r\n                        events.push(new document_1.ModelChangedEvent(document, this, prop.attr, old_value, new_value, setter_id));\r\n                }\r\n            }\r\n            catch (e_29_1) {\r\n                e_29 = { error: e_29_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (changes_4_1 && !changes_4_1.done && (_b = changes_4.return))\r\n                        _b.call(changes_4);\r\n                }\r\n                finally {\r\n                    if (e_29)\r\n                        throw e_29.error;\r\n                }\r\n            }\r\n            if (events.length != 0) {\r\n                var event = void 0;\r\n                if (events.length == 1)\r\n                    _c = tslib_1.__read(events, 1), event = _c[0];\r\n                else\r\n                    event = new document_1.DocumentEventBatch(document, events, setter_id);\r\n                document._trigger_on_change(event);\r\n            }\r\n        };\r\n        HasProps.prototype.materialize_dataspecs = function (source) {\r\n            var e_30, _b;\r\n            // Note: this should be moved to a function separate from HasProps\r\n            var data = {};\r\n            try {\r\n                for (var _c = tslib_1.__values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var prop = _d.value;\r\n                    if (!(prop instanceof p.VectorSpec))\r\n                        continue;\r\n                    // this skips optional properties like radius for circles\r\n                    if (prop.optional && prop.spec.value == null && !prop.dirty)\r\n                        continue;\r\n                    var name = prop.attr;\r\n                    var array = prop.array(source);\r\n                    data[\"_\" + name] = array;\r\n                    if (prop instanceof p.DistanceSpec)\r\n                        data[\"max_\" + name] = array_1.max(array);\r\n                }\r\n            }\r\n            catch (e_30_1) {\r\n                e_30 = { error: e_30_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_30)\r\n                        throw e_30.error;\r\n                }\r\n            }\r\n            return data;\r\n        };\r\n        HasProps.prototype.on_change = function (properties, fn) {\r\n            var e_31, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(types_1.isArray(properties) ? properties : [properties]), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var property = _d.value;\r\n                    this.connect(property.change, fn);\r\n                }\r\n            }\r\n            catch (e_31_1) {\r\n                e_31 = { error: e_31_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_31)\r\n                        throw e_31.error;\r\n                }\r\n            }\r\n        };\r\n        return HasProps;\r\n    }(signaling_1.Signalable()));\r\n    exports.HasProps = HasProps;\r\n    HasProps.init_HasProps();\r\n}\r\n","/* core\\signaling.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    // Based on https://github.com/phosphorjs/phosphor/blob/master/packages/signaling/src/index.ts\r\n    var callback_1 = require(131) /* ./util/callback */;\r\n    var array_1 = require(124) /* ./util/array */;\r\n    var Signal = /** @class */ (function () {\r\n        function Signal(sender, name) {\r\n            this.sender = sender;\r\n            this.name = name;\r\n        }\r\n        Signal.prototype.connect = function (slot, context) {\r\n            if (context === void 0) {\r\n                context = null;\r\n            }\r\n            if (!receiversForSender.has(this.sender)) {\r\n                receiversForSender.set(this.sender, []);\r\n            }\r\n            var receivers = receiversForSender.get(this.sender);\r\n            if (findConnection(receivers, this, slot, context) != null) {\r\n                return false;\r\n            }\r\n            var receiver = context !== null && context !== void 0 ? context : slot;\r\n            if (!sendersForReceiver.has(receiver)) {\r\n                sendersForReceiver.set(receiver, []);\r\n            }\r\n            var senders = sendersForReceiver.get(receiver);\r\n            var connection = { signal: this, slot: slot, context: context };\r\n            receivers.push(connection);\r\n            senders.push(connection);\r\n            return true;\r\n        };\r\n        Signal.prototype.disconnect = function (slot, context) {\r\n            if (context === void 0) {\r\n                context = null;\r\n            }\r\n            var receivers = receiversForSender.get(this.sender);\r\n            if (receivers == null || receivers.length === 0) {\r\n                return false;\r\n            }\r\n            var connection = findConnection(receivers, this, slot, context);\r\n            if (connection == null) {\r\n                return false;\r\n            }\r\n            var receiver = context !== null && context !== void 0 ? context : slot;\r\n            var senders = sendersForReceiver.get(receiver);\r\n            connection.signal = null;\r\n            scheduleCleanup(receivers);\r\n            scheduleCleanup(senders);\r\n            return true;\r\n        };\r\n        Signal.prototype.emit = function (args) {\r\n            var e_1, _b;\r\n            var _a;\r\n            var receivers = (_a = receiversForSender.get(this.sender)) !== null && _a !== void 0 ? _a : [];\r\n            try {\r\n                for (var receivers_1 = tslib_1.__values(receivers), receivers_1_1 = receivers_1.next(); !receivers_1_1.done; receivers_1_1 = receivers_1.next()) {\r\n                    var _c = receivers_1_1.value, signal = _c.signal, slot = _c.slot, context = _c.context;\r\n                    if (signal === this) {\r\n                        slot.call(context, args, this.sender);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (receivers_1_1 && !receivers_1_1.done && (_b = receivers_1.return))\r\n                        _b.call(receivers_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        return Signal;\r\n    }());\r\n    exports.Signal = Signal;\r\n    Signal.__name__ = \"Signal\";\r\n    var Signal0 = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Signal0, _super);\r\n        function Signal0() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Signal0.prototype.emit = function () {\r\n            _super.prototype.emit.call(this, undefined);\r\n        };\r\n        return Signal0;\r\n    }(Signal));\r\n    exports.Signal0 = Signal0;\r\n    Signal0.__name__ = \"Signal0\";\r\n    (function (Signal) {\r\n        function disconnectBetween(sender, receiver) {\r\n            var e_2, _b;\r\n            var receivers = receiversForSender.get(sender);\r\n            if (receivers == null || receivers.length === 0)\r\n                return;\r\n            var senders = sendersForReceiver.get(receiver);\r\n            if (senders == null || senders.length === 0)\r\n                return;\r\n            try {\r\n                for (var senders_1 = tslib_1.__values(senders), senders_1_1 = senders_1.next(); !senders_1_1.done; senders_1_1 = senders_1.next()) {\r\n                    var connection = senders_1_1.value;\r\n                    if (connection.signal == null)\r\n                        return;\r\n                    if (connection.signal.sender === sender)\r\n                        connection.signal = null;\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (senders_1_1 && !senders_1_1.done && (_b = senders_1.return))\r\n                        _b.call(senders_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            scheduleCleanup(receivers);\r\n            scheduleCleanup(senders);\r\n        }\r\n        Signal.disconnectBetween = disconnectBetween;\r\n        function disconnectSender(sender) {\r\n            var e_3, _b;\r\n            var _a;\r\n            var receivers = receiversForSender.get(sender);\r\n            if (receivers == null || receivers.length === 0)\r\n                return;\r\n            try {\r\n                for (var receivers_2 = tslib_1.__values(receivers), receivers_2_1 = receivers_2.next(); !receivers_2_1.done; receivers_2_1 = receivers_2.next()) {\r\n                    var connection = receivers_2_1.value;\r\n                    if (connection.signal == null)\r\n                        return;\r\n                    var receiver = (_a = connection.context) !== null && _a !== void 0 ? _a : connection.slot;\r\n                    connection.signal = null;\r\n                    scheduleCleanup(sendersForReceiver.get(receiver));\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (receivers_2_1 && !receivers_2_1.done && (_b = receivers_2.return))\r\n                        _b.call(receivers_2);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            scheduleCleanup(receivers);\r\n        }\r\n        Signal.disconnectSender = disconnectSender;\r\n        function disconnectReceiver(receiver) {\r\n            var e_4, _b;\r\n            var senders = sendersForReceiver.get(receiver);\r\n            if (senders == null || senders.length === 0)\r\n                return;\r\n            try {\r\n                for (var senders_2 = tslib_1.__values(senders), senders_2_1 = senders_2.next(); !senders_2_1.done; senders_2_1 = senders_2.next()) {\r\n                    var connection = senders_2_1.value;\r\n                    if (connection.signal == null)\r\n                        return;\r\n                    var sender = connection.signal.sender;\r\n                    connection.signal = null;\r\n                    scheduleCleanup(receiversForSender.get(sender));\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (senders_2_1 && !senders_2_1.done && (_b = senders_2.return))\r\n                        _b.call(senders_2);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            scheduleCleanup(senders);\r\n        }\r\n        Signal.disconnectReceiver = disconnectReceiver;\r\n        function disconnectAll(obj) {\r\n            var e_5, _b, e_6, _c;\r\n            var receivers = receiversForSender.get(obj);\r\n            if (receivers != null && receivers.length !== 0) {\r\n                try {\r\n                    for (var receivers_3 = tslib_1.__values(receivers), receivers_3_1 = receivers_3.next(); !receivers_3_1.done; receivers_3_1 = receivers_3.next()) {\r\n                        var connection = receivers_3_1.value;\r\n                        connection.signal = null;\r\n                    }\r\n                }\r\n                catch (e_5_1) {\r\n                    e_5 = { error: e_5_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (receivers_3_1 && !receivers_3_1.done && (_b = receivers_3.return))\r\n                            _b.call(receivers_3);\r\n                    }\r\n                    finally {\r\n                        if (e_5)\r\n                            throw e_5.error;\r\n                    }\r\n                }\r\n                scheduleCleanup(receivers);\r\n            }\r\n            var senders = sendersForReceiver.get(obj);\r\n            if (senders != null && senders.length !== 0) {\r\n                try {\r\n                    for (var senders_3 = tslib_1.__values(senders), senders_3_1 = senders_3.next(); !senders_3_1.done; senders_3_1 = senders_3.next()) {\r\n                        var connection = senders_3_1.value;\r\n                        connection.signal = null;\r\n                    }\r\n                }\r\n                catch (e_6_1) {\r\n                    e_6 = { error: e_6_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (senders_3_1 && !senders_3_1.done && (_c = senders_3.return))\r\n                            _c.call(senders_3);\r\n                    }\r\n                    finally {\r\n                        if (e_6)\r\n                            throw e_6.error;\r\n                    }\r\n                }\r\n                scheduleCleanup(senders);\r\n            }\r\n        }\r\n        Signal.disconnectAll = disconnectAll;\r\n    })(Signal || (exports.Signal = Signal = {}));\r\n    function Signalable() {\r\n        return /** @class */ (function () {\r\n            function class_1() {\r\n            }\r\n            class_1.prototype.connect = function (signal, slot) {\r\n                return signal.connect(slot, this);\r\n            };\r\n            class_1.prototype.disconnect = function (signal, slot) {\r\n                return signal.disconnect(slot, this);\r\n            };\r\n            return class_1;\r\n        }());\r\n    }\r\n    exports.Signalable = Signalable;\r\n    var receiversForSender = new WeakMap();\r\n    var sendersForReceiver = new WeakMap();\r\n    function findConnection(conns, signal, slot, context) {\r\n        return array_1.find(conns, function (conn) { return conn.signal === signal && conn.slot === slot && conn.context === context; });\r\n    }\r\n    var dirty_set = new Set();\r\n    function scheduleCleanup(connections) {\r\n        if (dirty_set.size === 0) {\r\n            callback_1.defer(cleanup_dirty_set);\r\n        }\r\n        dirty_set.add(connections);\r\n    }\r\n    function cleanup_dirty_set() {\r\n        var e_7, _b;\r\n        try {\r\n            for (var dirty_set_1 = tslib_1.__values(dirty_set), dirty_set_1_1 = dirty_set_1.next(); !dirty_set_1_1.done; dirty_set_1_1 = dirty_set_1.next()) {\r\n                var connections = dirty_set_1_1.value;\r\n                array_1.remove_by(connections, function (connection) { return connection.signal == null; });\r\n            }\r\n        }\r\n        catch (e_7_1) {\r\n            e_7 = { error: e_7_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (dirty_set_1_1 && !dirty_set_1_1.done && (_b = dirty_set_1.return))\r\n                    _b.call(dirty_set_1);\r\n            }\r\n            finally {\r\n                if (e_7)\r\n                    throw e_7.error;\r\n            }\r\n        }\r\n        dirty_set.clear();\r\n    }\r\n}\r\n","/* core\\util\\callback.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    //     Underscore.js 1.8.3\r\n    //     http://underscorejs.org\r\n    //     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n    //     Underscore may be freely distributed under the MIT license.\r\n    function delay(func, wait) {\r\n        return setTimeout(func, wait);\r\n    }\r\n    exports.delay = delay;\r\n    var _defer = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setImmediate;\r\n    function defer(func) {\r\n        return new Promise(function (resolve) {\r\n            _defer(function () { return resolve(func()); });\r\n        });\r\n    }\r\n    exports.defer = defer;\r\n    function throttle(func, wait, options) {\r\n        if (options === void 0) {\r\n            options = {};\r\n        }\r\n        var context, args, result;\r\n        var timeout = null;\r\n        var previous = 0;\r\n        var later = function () {\r\n            previous = options.leading === false ? 0 : Date.now();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout)\r\n                context = args = null;\r\n        };\r\n        return function () {\r\n            var now = Date.now();\r\n            if (!previous && options.leading === false)\r\n                previous = now;\r\n            var remaining = wait - (now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n                previous = now;\r\n                result = func.apply(context, args);\r\n                if (!timeout)\r\n                    context = args = null;\r\n            }\r\n            else if (!timeout && options.trailing !== false) {\r\n                timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n    exports.throttle = throttle;\r\n    function once(func) {\r\n        var done = false;\r\n        var memo;\r\n        return function () {\r\n            if (!done) {\r\n                done = true;\r\n                memo = func();\r\n            }\r\n            return memo;\r\n        };\r\n    }\r\n    exports.once = once;\r\n}\r\n","/* core\\util\\refs.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var types_1 = require(123) /* ./types */;\r\n    var object_1 = require(128) /* ./object */;\r\n    // Determine whether an object has the proper format of a Bokeh reference\r\n    //\r\n    // @param arg [Object] the object to test\r\n    // @return [bool] whether the object is a reference\r\n    //\r\n    // @note this function does not check that the id and types are valid,\r\n    //   only that the format is correct (all required keys are present)\r\n    //\r\n    function is_ref(arg) {\r\n        if (types_1.isPlainObject(arg)) {\r\n            var attrs = object_1.keys(arg);\r\n            return attrs.length == 1 && attrs[0] == \"id\";\r\n        }\r\n        return false;\r\n    }\r\n    exports.is_ref = is_ref;\r\n}\r\n","/* core\\properties.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var signaling_1 = require(130) /* ./signaling */;\r\n    var logging_1 = require(134) /* ./logging */;\r\n    var enums = tslib_1.__importStar(require(135) /* ./enums */);\r\n    var types_1 = require(139) /* ./types */;\r\n    var array_1 = require(124) /* ./util/array */;\r\n    var arrayable_1 = require(127) /* ./util/arrayable */;\r\n    var color_1 = require(137) /* ./util/color */;\r\n    var types_2 = require(123) /* ./util/types */;\r\n    var settings_1 = require(142) /* ./settings */;\r\n    function valueToString(value) {\r\n        try {\r\n            return JSON.stringify(value);\r\n        }\r\n        catch (_a) {\r\n            return value.toString();\r\n        }\r\n    }\r\n    function isSpec(obj) {\r\n        return types_2.isPlainObject(obj) &&\r\n            ((obj.value === undefined ? 0 : 1) +\r\n                (obj.field === undefined ? 0 : 1) +\r\n                (obj.expr === undefined ? 0 : 1) == 1); // garbage JS XOR\r\n    }\r\n    exports.isSpec = isSpec;\r\n    var Property = /** @class */ (function () {\r\n        function Property(obj, attr, kind, default_value, initial_value, options) {\r\n            if (options === void 0) {\r\n                options = {};\r\n            }\r\n            var _a, _b;\r\n            this.obj = obj;\r\n            this.attr = attr;\r\n            this.kind = kind;\r\n            this.default_value = default_value;\r\n            this._dirty = false;\r\n            this.change = new signaling_1.Signal0(this.obj, \"change\");\r\n            this.internal = (_a = options.internal) !== null && _a !== void 0 ? _a : false;\r\n            this.optional = (_b = options.optional) !== null && _b !== void 0 ? _b : false;\r\n            var attr_value;\r\n            if (initial_value !== undefined) {\r\n                attr_value = initial_value;\r\n                this._dirty = true;\r\n            }\r\n            else {\r\n                var value = this._default_override();\r\n                if (value !== undefined)\r\n                    attr_value = value;\r\n                else if (default_value !== undefined)\r\n                    attr_value = default_value(obj);\r\n                else {\r\n                    //throw new Error(\"no default\")\r\n                    attr_value = null; // XXX: nullable properties\r\n                }\r\n            }\r\n            this._update(attr_value);\r\n        }\r\n        Object.defineProperty(Property.prototype, \"is_value\", {\r\n            get: function () {\r\n                return this.spec.value !== undefined;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Property.prototype, \"syncable\", {\r\n            get: function () {\r\n                return !this.internal;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Property.prototype.get_value = function () {\r\n            return this.spec.value;\r\n        };\r\n        Property.prototype.set_value = function (val) {\r\n            this._update(val);\r\n            this._dirty = true;\r\n        };\r\n        // abstract _intrinsic_default(): T\r\n        Property.prototype._default_override = function () {\r\n            return undefined;\r\n        };\r\n        Object.defineProperty(Property.prototype, \"dirty\", {\r\n            get: function () {\r\n                return this._dirty;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        //protected abstract _update(attr_value: T): void\r\n        Property.prototype._update = function (attr_value) {\r\n            if (attr_value != null) // XXX: non-nullalble types\r\n                this.validate(attr_value);\r\n            this.spec = { value: attr_value };\r\n        };\r\n        Property.prototype.toString = function () {\r\n            /*${this.name}*/\r\n            return \"Prop(\" + this.obj + \".\" + this.attr + \", spec: \" + valueToString(this.spec) + \")\";\r\n        };\r\n        // ----- customizable policies\r\n        Property.prototype.normalize = function (values) {\r\n            return values;\r\n        };\r\n        Property.prototype.validate = function (value) {\r\n            if (!this.valid(value))\r\n                throw new Error(this.obj.type + \".\" + this.attr + \" given invalid value: \" + valueToString(value));\r\n        };\r\n        Property.prototype.valid = function (value) {\r\n            return this.kind.valid(value);\r\n        };\r\n        // ----- property accessors\r\n        Property.prototype.value = function (do_spec_transform) {\r\n            if (do_spec_transform === void 0) {\r\n                do_spec_transform = true;\r\n            }\r\n            if (!this.is_value)\r\n                throw new Error(\"attempted to retrieve property value for property without value specification\");\r\n            var ret = this.normalize([this.spec.value])[0];\r\n            if (this.spec.transform != null && do_spec_transform)\r\n                ret = this.spec.transform.compute(ret);\r\n            return ret;\r\n        };\r\n        return Property;\r\n    }());\r\n    exports.Property = Property;\r\n    Property.__name__ = \"Property\";\r\n    //\r\n    // Primitive Properties\r\n    //\r\n    var PrimitiveProperty = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PrimitiveProperty, _super);\r\n        function PrimitiveProperty() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return PrimitiveProperty;\r\n    }(Property));\r\n    exports.PrimitiveProperty = PrimitiveProperty;\r\n    PrimitiveProperty.__name__ = \"PrimitiveProperty\";\r\n    var Any = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Any, _super);\r\n        function Any() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return Any;\r\n    }(Property));\r\n    exports.Any = Any;\r\n    Any.__name__ = \"Any\";\r\n    var Array = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Array, _super);\r\n        function Array() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Array.prototype.valid = function (value) {\r\n            return types_2.isArray(value) || value instanceof Float32Array || value instanceof Float64Array;\r\n        };\r\n        return Array;\r\n    }(Property));\r\n    exports.Array = Array;\r\n    Array.__name__ = \"Array\";\r\n    var Boolean = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Boolean, _super);\r\n        function Boolean() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Boolean.prototype.valid = function (value) {\r\n            return types_2.isBoolean(value);\r\n        };\r\n        return Boolean;\r\n    }(Property));\r\n    exports.Boolean = Boolean;\r\n    Boolean.__name__ = \"Boolean\";\r\n    var Color = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Color, _super);\r\n        function Color() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Color.prototype.valid = function (value) {\r\n            return types_2.isString(value) && color_1.is_color(value);\r\n        };\r\n        return Color;\r\n    }(Property));\r\n    exports.Color = Color;\r\n    Color.__name__ = \"Color\";\r\n    var Instance = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Instance, _super);\r\n        function Instance() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return Instance;\r\n    }(Property));\r\n    exports.Instance = Instance;\r\n    Instance.__name__ = \"Instance\";\r\n    var Number = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Number, _super);\r\n        function Number() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Number.prototype.valid = function (value) {\r\n            return types_2.isNumber(value);\r\n        };\r\n        return Number;\r\n    }(Property));\r\n    exports.Number = Number;\r\n    Number.__name__ = \"Number\";\r\n    var Int = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Int, _super);\r\n        function Int() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Int.prototype.valid = function (value) {\r\n            return types_2.isNumber(value) && (value | 0) == value;\r\n        };\r\n        return Int;\r\n    }(Number));\r\n    exports.Int = Int;\r\n    Int.__name__ = \"Int\";\r\n    var Angle = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Angle, _super);\r\n        function Angle() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return Angle;\r\n    }(Number));\r\n    exports.Angle = Angle;\r\n    Angle.__name__ = \"Angle\";\r\n    var Percent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Percent, _super);\r\n        function Percent() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Percent.prototype.valid = function (value) {\r\n            return types_2.isNumber(value) && 0 <= value && value <= 1.0;\r\n        };\r\n        return Percent;\r\n    }(Number));\r\n    exports.Percent = Percent;\r\n    Percent.__name__ = \"Percent\";\r\n    var String = /** @class */ (function (_super) {\r\n        tslib_1.__extends(String, _super);\r\n        function String() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        String.prototype.valid = function (value) {\r\n            return types_2.isString(value);\r\n        };\r\n        return String;\r\n    }(Property));\r\n    exports.String = String;\r\n    String.__name__ = \"String\";\r\n    var NullString = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NullString, _super);\r\n        function NullString() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        NullString.prototype.valid = function (value) {\r\n            return value === null || types_2.isString(value);\r\n        };\r\n        return NullString;\r\n    }(Property));\r\n    exports.NullString = NullString;\r\n    NullString.__name__ = \"NullString\";\r\n    var FontSize = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FontSize, _super);\r\n        function FontSize() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return FontSize;\r\n    }(String));\r\n    exports.FontSize = FontSize;\r\n    FontSize.__name__ = \"FontSize\";\r\n    var Font = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Font, _super);\r\n        function Font() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Font.prototype._default_override = function () {\r\n            return settings_1.settings.dev ? \"Bokeh\" : undefined;\r\n        };\r\n        return Font;\r\n    }(String));\r\n    exports.Font = Font;\r\n    Font.__name__ = \"Font\";\r\n    //\r\n    // Enum properties\r\n    //\r\n    var EnumProperty = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EnumProperty, _super);\r\n        function EnumProperty() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        EnumProperty.prototype.valid = function (value) {\r\n            return types_2.isString(value) && array_1.includes(this.enum_values, value);\r\n        };\r\n        return EnumProperty;\r\n    }(Property));\r\n    exports.EnumProperty = EnumProperty;\r\n    EnumProperty.__name__ = \"EnumProperty\";\r\n    function Enum(values) {\r\n        return /** @class */ (function (_super) {\r\n            tslib_1.__extends(class_1, _super);\r\n            function class_1() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Object.defineProperty(class_1.prototype, \"enum_values\", {\r\n                get: function () {\r\n                    return tslib_1.__spread(values);\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            return class_1;\r\n        }(EnumProperty));\r\n    }\r\n    exports.Enum = Enum;\r\n    var Direction = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Direction, _super);\r\n        function Direction() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(Direction.prototype, \"enum_values\", {\r\n            get: function () {\r\n                return tslib_1.__spread(enums.Direction);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Direction.prototype.normalize = function (values) {\r\n            var result = new Uint8Array(values.length);\r\n            for (var i = 0; i < values.length; i++) {\r\n                switch (values[i]) {\r\n                    case \"clock\":\r\n                        result[i] = 0;\r\n                        break;\r\n                    case \"anticlock\":\r\n                        result[i] = 1;\r\n                        break;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        return Direction;\r\n    }(EnumProperty));\r\n    exports.Direction = Direction;\r\n    Direction.__name__ = \"Direction\";\r\n    /* TODO: remove this {{{ */\r\n    exports.Anchor = Enum(enums.Anchor);\r\n    exports.AngleUnits = Enum(enums.AngleUnits);\r\n    exports.BoxOrigin = Enum(enums.BoxOrigin);\r\n    exports.ButtonType = Enum(enums.ButtonType);\r\n    exports.CalendarPosition = Enum(enums.CalendarPosition);\r\n    exports.Dimension = Enum(enums.Dimension);\r\n    exports.Dimensions = Enum(enums.Dimensions);\r\n    exports.Distribution = Enum(enums.Distribution);\r\n    exports.FontStyle = Enum(enums.FontStyle);\r\n    exports.HatchPatternType = Enum(enums.HatchPatternType);\r\n    exports.HTTPMethod = Enum(enums.HTTPMethod);\r\n    exports.HexTileOrientation = Enum(enums.HexTileOrientation);\r\n    exports.HoverMode = Enum(enums.HoverMode);\r\n    exports.LatLon = Enum(enums.LatLon);\r\n    exports.LegendClickPolicy = Enum(enums.LegendClickPolicy);\r\n    exports.LegendLocation = Enum(enums.LegendLocation);\r\n    exports.LineCap = Enum(enums.LineCap);\r\n    exports.LineJoin = Enum(enums.LineJoin);\r\n    exports.LinePolicy = Enum(enums.LinePolicy);\r\n    exports.Location = Enum(enums.Location);\r\n    exports.Logo = Enum(enums.Logo);\r\n    exports.MarkerType = Enum(enums.MarkerType);\r\n    exports.MutedPolicy = Enum(enums.MutedPolicy);\r\n    exports.Orientation = Enum(enums.Orientation);\r\n    exports.OutputBackend = Enum(enums.OutputBackend);\r\n    exports.PaddingUnits = Enum(enums.PaddingUnits);\r\n    exports.Place = Enum(enums.Place);\r\n    exports.PointPolicy = Enum(enums.PointPolicy);\r\n    exports.RadiusDimension = Enum(enums.RadiusDimension);\r\n    exports.RenderLevel = Enum(enums.RenderLevel);\r\n    exports.RenderMode = Enum(enums.RenderMode);\r\n    exports.ResetPolicy = Enum(enums.ResetPolicy);\r\n    exports.RoundingFunction = Enum(enums.RoundingFunction);\r\n    exports.Side = Enum(enums.Side);\r\n    exports.SizingMode = Enum(enums.SizingMode);\r\n    exports.Sort = Enum(enums.Sort);\r\n    exports.SpatialUnits = Enum(enums.SpatialUnits);\r\n    exports.StartEnd = Enum(enums.StartEnd);\r\n    exports.StepMode = Enum(enums.StepMode);\r\n    exports.TapBehavior = Enum(enums.TapBehavior);\r\n    exports.TextAlign = Enum(enums.TextAlign);\r\n    exports.TextBaseline = Enum(enums.TextBaseline);\r\n    exports.TextureRepetition = Enum(enums.TextureRepetition);\r\n    exports.TickLabelOrientation = Enum(enums.TickLabelOrientation);\r\n    exports.TooltipAttachment = Enum(enums.TooltipAttachment);\r\n    exports.UpdateMode = Enum(enums.UpdateMode);\r\n    exports.VerticalAlign = Enum(enums.VerticalAlign);\r\n    /* }}} */\r\n    //\r\n    // DataSpec properties\r\n    //\r\n    var ScalarSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ScalarSpec, _super);\r\n        function ScalarSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ScalarSpec.prototype.get_value = function () {\r\n            // XXX: allow obj.x = null; obj.x == null\r\n            return this.spec.value === null ? null : this.spec;\r\n        };\r\n        ScalarSpec.prototype._update = function (attr_value) {\r\n            if (isSpec(attr_value))\r\n                this.spec = attr_value;\r\n            else\r\n                this.spec = { value: attr_value };\r\n            if (this.spec.value != null)\r\n                this.validate(this.spec.value);\r\n        };\r\n        return ScalarSpec;\r\n    }(Property));\r\n    exports.ScalarSpec = ScalarSpec;\r\n    ScalarSpec.__name__ = \"ScalarSpec\";\r\n    var AnyScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AnyScalar, _super);\r\n        function AnyScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return AnyScalar;\r\n    }(ScalarSpec));\r\n    exports.AnyScalar = AnyScalar;\r\n    AnyScalar.__name__ = \"AnyScalar\";\r\n    var ColorScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColorScalar, _super);\r\n        function ColorScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return ColorScalar;\r\n    }(ScalarSpec));\r\n    exports.ColorScalar = ColorScalar;\r\n    ColorScalar.__name__ = \"ColorScalar\";\r\n    var NumberScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NumberScalar, _super);\r\n        function NumberScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return NumberScalar;\r\n    }(ScalarSpec));\r\n    exports.NumberScalar = NumberScalar;\r\n    NumberScalar.__name__ = \"NumberScalar\";\r\n    var StringScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(StringScalar, _super);\r\n        function StringScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return StringScalar;\r\n    }(ScalarSpec));\r\n    exports.StringScalar = StringScalar;\r\n    StringScalar.__name__ = \"StringScalar\";\r\n    var NullStringScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NullStringScalar, _super);\r\n        function NullStringScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return NullStringScalar;\r\n    }(ScalarSpec));\r\n    exports.NullStringScalar = NullStringScalar;\r\n    NullStringScalar.__name__ = \"NullStringScalar\";\r\n    var ArrayScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ArrayScalar, _super);\r\n        function ArrayScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return ArrayScalar;\r\n    }(ScalarSpec));\r\n    exports.ArrayScalar = ArrayScalar;\r\n    ArrayScalar.__name__ = \"ArrayScalar\";\r\n    var LineJoinScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineJoinScalar, _super);\r\n        function LineJoinScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return LineJoinScalar;\r\n    }(ScalarSpec));\r\n    exports.LineJoinScalar = LineJoinScalar;\r\n    LineJoinScalar.__name__ = \"LineJoinScalar\";\r\n    var LineCapScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineCapScalar, _super);\r\n        function LineCapScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return LineCapScalar;\r\n    }(ScalarSpec));\r\n    exports.LineCapScalar = LineCapScalar;\r\n    LineCapScalar.__name__ = \"LineCapScalar\";\r\n    var FontSizeScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FontSizeScalar, _super);\r\n        function FontSizeScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return FontSizeScalar;\r\n    }(ScalarSpec));\r\n    exports.FontSizeScalar = FontSizeScalar;\r\n    FontSizeScalar.__name__ = \"FontSizeScalar\";\r\n    var FontStyleScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FontStyleScalar, _super);\r\n        function FontStyleScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return FontStyleScalar;\r\n    }(ScalarSpec));\r\n    exports.FontStyleScalar = FontStyleScalar;\r\n    FontStyleScalar.__name__ = \"FontStyleScalar\";\r\n    var TextAlignScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TextAlignScalar, _super);\r\n        function TextAlignScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return TextAlignScalar;\r\n    }(ScalarSpec));\r\n    exports.TextAlignScalar = TextAlignScalar;\r\n    TextAlignScalar.__name__ = \"TextAlignScalar\";\r\n    var TextBaselineScalar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TextBaselineScalar, _super);\r\n        function TextBaselineScalar() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return TextBaselineScalar;\r\n    }(ScalarSpec));\r\n    exports.TextBaselineScalar = TextBaselineScalar;\r\n    TextBaselineScalar.__name__ = \"TextBaselineScalar\";\r\n    var VectorSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VectorSpec, _super);\r\n        function VectorSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        VectorSpec.prototype.get_value = function () {\r\n            // XXX: allow obj.x = null; obj.x == null\r\n            return this.spec.value === null ? null : this.spec;\r\n        };\r\n        VectorSpec.prototype._update = function (attr_value) {\r\n            if (isSpec(attr_value))\r\n                this.spec = attr_value;\r\n            else\r\n                this.spec = { value: attr_value };\r\n            if (this.spec.value != null)\r\n                this.validate(this.spec.value);\r\n        };\r\n        VectorSpec.prototype.array = function (source) {\r\n            var _a;\r\n            var array;\r\n            var length = (_a = source.get_length()) !== null && _a !== void 0 ? _a : 1;\r\n            if (this.spec.field != null) {\r\n                var column = source.get_column(this.spec.field);\r\n                if (column != null)\r\n                    array = this.normalize(column);\r\n                else {\r\n                    logging_1.logger.warn(\"attempted to retrieve property array for nonexistent field '\" + this.spec.field + \"'\");\r\n                    var missing = new types_1.NumberArray(length);\r\n                    missing.fill(NaN);\r\n                    array = missing;\r\n                }\r\n            }\r\n            else if (this.spec.expr != null) {\r\n                array = this.normalize(this.spec.expr.v_compute(source));\r\n            }\r\n            else {\r\n                var value = this.value(false); // don't apply any spec transform\r\n                if (types_2.isNumber(value)) {\r\n                    var values = new types_1.NumberArray(length);\r\n                    values.fill(value);\r\n                    array = values;\r\n                }\r\n                else\r\n                    array = array_1.repeat(value, length);\r\n            }\r\n            if (this.spec.transform != null)\r\n                array = this.spec.transform.v_compute(array);\r\n            return array;\r\n        };\r\n        return VectorSpec;\r\n    }(Property));\r\n    exports.VectorSpec = VectorSpec;\r\n    VectorSpec.__name__ = \"VectorSpec\";\r\n    var DataSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DataSpec, _super);\r\n        function DataSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return DataSpec;\r\n    }(VectorSpec));\r\n    exports.DataSpec = DataSpec;\r\n    DataSpec.__name__ = \"DataSpec\";\r\n    var UnitsSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(UnitsSpec, _super);\r\n        function UnitsSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        UnitsSpec.prototype._update = function (attr_value) {\r\n            _super.prototype._update.call(this, attr_value);\r\n            if (this.spec.units == null)\r\n                this.spec.units = this.default_units;\r\n            var units = this.spec.units;\r\n            if (!array_1.includes(this.valid_units, units))\r\n                throw new Error(\"units must be one of \" + this.valid_units.join(\", \") + \"; got: \" + units);\r\n        };\r\n        Object.defineProperty(UnitsSpec.prototype, \"units\", {\r\n            get: function () {\r\n                return this.spec.units;\r\n            },\r\n            set: function (units) {\r\n                this.spec.units = units;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return UnitsSpec;\r\n    }(VectorSpec));\r\n    exports.UnitsSpec = UnitsSpec;\r\n    UnitsSpec.__name__ = \"UnitsSpec\";\r\n    var NumberUnitsSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NumberUnitsSpec, _super);\r\n        function NumberUnitsSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        NumberUnitsSpec.prototype.array = function (source) {\r\n            return new types_1.NumberArray(_super.prototype.array.call(this, source));\r\n        };\r\n        return NumberUnitsSpec;\r\n    }(UnitsSpec));\r\n    exports.NumberUnitsSpec = NumberUnitsSpec;\r\n    NumberUnitsSpec.__name__ = \"NumberUnitsSpec\";\r\n    var BaseCoordinateSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BaseCoordinateSpec, _super);\r\n        function BaseCoordinateSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return BaseCoordinateSpec;\r\n    }(DataSpec));\r\n    exports.BaseCoordinateSpec = BaseCoordinateSpec;\r\n    BaseCoordinateSpec.__name__ = \"BaseCoordinateSpec\";\r\n    var CoordinateSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CoordinateSpec, _super);\r\n        function CoordinateSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return CoordinateSpec;\r\n    }(BaseCoordinateSpec));\r\n    exports.CoordinateSpec = CoordinateSpec;\r\n    CoordinateSpec.__name__ = \"CoordinateSpec\";\r\n    var CoordinateSeqSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CoordinateSeqSpec, _super);\r\n        function CoordinateSeqSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return CoordinateSeqSpec;\r\n    }(BaseCoordinateSpec));\r\n    exports.CoordinateSeqSpec = CoordinateSeqSpec;\r\n    CoordinateSeqSpec.__name__ = \"CoordinateSeqSpec\";\r\n    var CoordinateSeqSeqSeqSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CoordinateSeqSeqSeqSpec, _super);\r\n        function CoordinateSeqSeqSeqSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return CoordinateSeqSeqSeqSpec;\r\n    }(BaseCoordinateSpec));\r\n    exports.CoordinateSeqSeqSeqSpec = CoordinateSeqSeqSeqSpec;\r\n    CoordinateSeqSeqSeqSpec.__name__ = \"CoordinateSeqSeqSeqSpec\";\r\n    var XCoordinateSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(XCoordinateSpec, _super);\r\n        function XCoordinateSpec() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.dimension = \"x\";\r\n            return _this;\r\n        }\r\n        return XCoordinateSpec;\r\n    }(CoordinateSpec));\r\n    exports.XCoordinateSpec = XCoordinateSpec;\r\n    XCoordinateSpec.__name__ = \"XCoordinateSpec\";\r\n    var YCoordinateSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(YCoordinateSpec, _super);\r\n        function YCoordinateSpec() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.dimension = \"y\";\r\n            return _this;\r\n        }\r\n        return YCoordinateSpec;\r\n    }(CoordinateSpec));\r\n    exports.YCoordinateSpec = YCoordinateSpec;\r\n    YCoordinateSpec.__name__ = \"YCoordinateSpec\";\r\n    var XCoordinateSeqSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(XCoordinateSeqSpec, _super);\r\n        function XCoordinateSeqSpec() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.dimension = \"x\";\r\n            return _this;\r\n        }\r\n        return XCoordinateSeqSpec;\r\n    }(CoordinateSeqSpec));\r\n    exports.XCoordinateSeqSpec = XCoordinateSeqSpec;\r\n    XCoordinateSeqSpec.__name__ = \"XCoordinateSeqSpec\";\r\n    var YCoordinateSeqSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(YCoordinateSeqSpec, _super);\r\n        function YCoordinateSeqSpec() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.dimension = \"y\";\r\n            return _this;\r\n        }\r\n        return YCoordinateSeqSpec;\r\n    }(CoordinateSeqSpec));\r\n    exports.YCoordinateSeqSpec = YCoordinateSeqSpec;\r\n    YCoordinateSeqSpec.__name__ = \"YCoordinateSeqSpec\";\r\n    var XCoordinateSeqSeqSeqSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(XCoordinateSeqSeqSeqSpec, _super);\r\n        function XCoordinateSeqSeqSeqSpec() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.dimension = \"x\";\r\n            return _this;\r\n        }\r\n        return XCoordinateSeqSeqSeqSpec;\r\n    }(CoordinateSeqSeqSeqSpec));\r\n    exports.XCoordinateSeqSeqSeqSpec = XCoordinateSeqSeqSeqSpec;\r\n    XCoordinateSeqSeqSeqSpec.__name__ = \"XCoordinateSeqSeqSeqSpec\";\r\n    var YCoordinateSeqSeqSeqSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(YCoordinateSeqSeqSeqSpec, _super);\r\n        function YCoordinateSeqSeqSeqSpec() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.dimension = \"y\";\r\n            return _this;\r\n        }\r\n        return YCoordinateSeqSeqSeqSpec;\r\n    }(CoordinateSeqSeqSeqSpec));\r\n    exports.YCoordinateSeqSeqSeqSpec = YCoordinateSeqSeqSeqSpec;\r\n    YCoordinateSeqSeqSeqSpec.__name__ = \"YCoordinateSeqSeqSeqSpec\";\r\n    var AngleSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AngleSpec, _super);\r\n        function AngleSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(AngleSpec.prototype, \"default_units\", {\r\n            get: function () { return \"rad\"; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AngleSpec.prototype, \"valid_units\", {\r\n            get: function () { return tslib_1.__spread(enums.AngleUnits); },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        AngleSpec.prototype.normalize = function (values) {\r\n            if (this.spec.units == \"deg\")\r\n                values = arrayable_1.map(values, function (x) { return x * Math.PI / 180.0; });\r\n            values = arrayable_1.map(values, function (x) { return -x; });\r\n            return _super.prototype.normalize.call(this, values);\r\n        };\r\n        return AngleSpec;\r\n    }(NumberUnitsSpec));\r\n    exports.AngleSpec = AngleSpec;\r\n    AngleSpec.__name__ = \"AngleSpec\";\r\n    var DistanceSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DistanceSpec, _super);\r\n        function DistanceSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(DistanceSpec.prototype, \"default_units\", {\r\n            get: function () { return \"data\"; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DistanceSpec.prototype, \"valid_units\", {\r\n            get: function () { return tslib_1.__spread(enums.SpatialUnits); },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return DistanceSpec;\r\n    }(NumberUnitsSpec));\r\n    exports.DistanceSpec = DistanceSpec;\r\n    DistanceSpec.__name__ = \"DistanceSpec\";\r\n    var BooleanSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BooleanSpec, _super);\r\n        function BooleanSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BooleanSpec.prototype.array = function (source) {\r\n            return new Uint8Array(_super.prototype.array.call(this, source));\r\n        };\r\n        return BooleanSpec;\r\n    }(DataSpec));\r\n    exports.BooleanSpec = BooleanSpec;\r\n    BooleanSpec.__name__ = \"BooleanSpec\";\r\n    var NumberSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NumberSpec, _super);\r\n        function NumberSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        NumberSpec.prototype.array = function (source) {\r\n            return new types_1.NumberArray(_super.prototype.array.call(this, source));\r\n        };\r\n        return NumberSpec;\r\n    }(DataSpec));\r\n    exports.NumberSpec = NumberSpec;\r\n    NumberSpec.__name__ = \"NumberSpec\";\r\n    var ColorSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColorSpec, _super);\r\n        function ColorSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ColorSpec.prototype.array = function (source) {\r\n            var colors = _super.prototype.array.call(this, source);\r\n            var n = colors.length;\r\n            var array = new types_1.ColorArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                var color = colors[i];\r\n                if (types_2.isNumber(color))\r\n                    array[i] = color;\r\n                else {\r\n                    var rgba = color_1.color2rgba(color);\r\n                    array[i] = color_1.encode_rgba(rgba);\r\n                }\r\n            }\r\n            return array;\r\n        };\r\n        return ColorSpec;\r\n    }(DataSpec));\r\n    exports.ColorSpec = ColorSpec;\r\n    ColorSpec.__name__ = \"ColorSpec\";\r\n    var FontSizeSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FontSizeSpec, _super);\r\n        function FontSizeSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return FontSizeSpec;\r\n    }(DataSpec));\r\n    exports.FontSizeSpec = FontSizeSpec;\r\n    FontSizeSpec.__name__ = \"FontSizeSpec\";\r\n    var MarkerSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MarkerSpec, _super);\r\n        function MarkerSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return MarkerSpec;\r\n    }(DataSpec));\r\n    exports.MarkerSpec = MarkerSpec;\r\n    MarkerSpec.__name__ = \"MarkerSpec\";\r\n    var StringSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(StringSpec, _super);\r\n        function StringSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return StringSpec;\r\n    }(DataSpec));\r\n    exports.StringSpec = StringSpec;\r\n    StringSpec.__name__ = \"StringSpec\";\r\n    var NullStringSpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NullStringSpec, _super);\r\n        function NullStringSpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return NullStringSpec;\r\n    }(DataSpec));\r\n    exports.NullStringSpec = NullStringSpec;\r\n    NullStringSpec.__name__ = \"NullStringSpec\";\r\n    var NDArraySpec = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NDArraySpec, _super);\r\n        function NDArraySpec() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return NDArraySpec;\r\n    }(DataSpec));\r\n    exports.NDArraySpec = NDArraySpec;\r\n    NDArraySpec.__name__ = \"NDArraySpec\";\r\n}\r\n","/* core\\logging.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    // This is based on https://github.com/pimterry/loglevel\r\n    var types_1 = require(123) /* ./util/types */;\r\n    var object_1 = require(128) /* ./util/object */;\r\n    var _loggers = {};\r\n    var LogLevel = /** @class */ (function () {\r\n        function LogLevel(name, level) {\r\n            this.name = name;\r\n            this.level = level;\r\n        }\r\n        return LogLevel;\r\n    }());\r\n    exports.LogLevel = LogLevel;\r\n    LogLevel.__name__ = \"LogLevel\";\r\n    var Logger = /** @class */ (function () {\r\n        function Logger(name, level) {\r\n            if (level === void 0) {\r\n                level = Logger.INFO;\r\n            }\r\n            this._name = name;\r\n            this.set_level(level);\r\n        }\r\n        Object.defineProperty(Logger, \"levels\", {\r\n            get: function () {\r\n                return Object.keys(Logger.log_levels);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Logger.get = function (name, level) {\r\n            if (level === void 0) {\r\n                level = Logger.INFO;\r\n            }\r\n            if (name.length > 0) {\r\n                var logger_1 = _loggers[name];\r\n                if (logger_1 == null)\r\n                    _loggers[name] = logger_1 = new Logger(name, level);\r\n                return logger_1;\r\n            }\r\n            else\r\n                throw new TypeError(\"Logger.get() expects a non-empty string name and an optional log-level\");\r\n        };\r\n        Object.defineProperty(Logger.prototype, \"level\", {\r\n            get: function () {\r\n                return this.get_level();\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Logger.prototype.get_level = function () {\r\n            return this._log_level;\r\n        };\r\n        Logger.prototype.set_level = function (log_level) {\r\n            var e_1, _a;\r\n            if (log_level instanceof LogLevel)\r\n                this._log_level = log_level;\r\n            else if (types_1.isString(log_level) && Logger.log_levels[log_level] != null)\r\n                this._log_level = Logger.log_levels[log_level];\r\n            else\r\n                throw new Error(\"Logger.set_level() expects a log-level object or a string name of a log-level\");\r\n            var logger_name = \"[\" + this._name + \"]\";\r\n            try {\r\n                for (var _b = tslib_1.__values(object_1.entries(Logger.log_levels)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = tslib_1.__read(_c.value, 2), name = _d[0], log_level_1 = _d[1];\r\n                    if (log_level_1.level < this._log_level.level || this._log_level.level === Logger.OFF.level)\r\n                        this[name] = function () { };\r\n                    else\r\n                        this[name] = _method_factory(name, logger_name);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        Logger.prototype.trace = function () {\r\n            var _args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                _args[_i] = arguments[_i];\r\n            }\r\n        };\r\n        Logger.prototype.debug = function () {\r\n            var _args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                _args[_i] = arguments[_i];\r\n            }\r\n        };\r\n        Logger.prototype.info = function () {\r\n            var _args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                _args[_i] = arguments[_i];\r\n            }\r\n        };\r\n        Logger.prototype.warn = function () {\r\n            var _args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                _args[_i] = arguments[_i];\r\n            }\r\n        };\r\n        Logger.prototype.error = function () {\r\n            var _args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                _args[_i] = arguments[_i];\r\n            }\r\n        };\r\n        return Logger;\r\n    }());\r\n    exports.Logger = Logger;\r\n    Logger.__name__ = \"Logger\";\r\n    Logger.TRACE = new LogLevel(\"trace\", 0);\r\n    Logger.DEBUG = new LogLevel(\"debug\", 1);\r\n    Logger.INFO = new LogLevel(\"info\", 2);\r\n    Logger.WARN = new LogLevel(\"warn\", 6);\r\n    Logger.ERROR = new LogLevel(\"error\", 7);\r\n    Logger.FATAL = new LogLevel(\"fatal\", 8);\r\n    Logger.OFF = new LogLevel(\"off\", 9);\r\n    Logger.log_levels = {\r\n        trace: Logger.TRACE,\r\n        debug: Logger.DEBUG,\r\n        info: Logger.INFO,\r\n        warn: Logger.WARN,\r\n        error: Logger.ERROR,\r\n        fatal: Logger.FATAL,\r\n        off: Logger.OFF,\r\n    };\r\n    function _method_factory(method_name, logger_name) {\r\n        if (console[method_name] != null)\r\n            return console[method_name].bind(console, logger_name);\r\n        else if (console.log != null)\r\n            return console.log.bind(console, logger_name);\r\n        else\r\n            return function () { };\r\n    }\r\n    exports.logger = Logger.get(\"bokeh\");\r\n    function set_log_level(level) {\r\n        var previous_level = exports.logger.level;\r\n        if (types_1.isString(level) && Logger.log_levels[level] == null) {\r\n            console.log(\"[bokeh] unrecognized logging level '\" + level + \"' passed to Bokeh.set_log_level(), ignoring\");\r\n            console.log(\"[bokeh] valid log levels are: \" + Logger.levels.join(', '));\r\n        }\r\n        else {\r\n            console.log(\"[bokeh] setting log level to: '\" + (types_1.isString(level) ? level : level.level) + \"'\");\r\n            exports.logger.set_level(level);\r\n        }\r\n        return previous_level;\r\n    }\r\n    exports.set_log_level = set_log_level;\r\n    function with_log_level(level, fn) {\r\n        var original = set_log_level(level);\r\n        try {\r\n            fn();\r\n        }\r\n        finally {\r\n            set_log_level(original);\r\n        }\r\n    }\r\n    exports.with_log_level = with_log_level;\r\n}\r\n","/* core\\enums.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var kinds_1 = require(136) /* ./kinds */;\r\n    exports.Align = kinds_1.Enum(\"start\", \"center\", \"end\");\r\n    exports.Anchor = kinds_1.Enum(\"top_left\", \"top_center\", \"top_right\", \"center_left\", \"center\", \"center_right\", \"bottom_left\", \"bottom_center\", \"bottom_right\");\r\n    exports.AngleUnits = kinds_1.Enum(\"deg\", \"rad\");\r\n    exports.BoxOrigin = kinds_1.Enum(\"corner\", \"center\");\r\n    exports.ButtonType = kinds_1.Enum(\"default\", \"primary\", \"success\", \"warning\", \"danger\");\r\n    exports.CalendarPosition = kinds_1.Enum(\"auto\", \"above\", \"below\");\r\n    exports.Dimension = kinds_1.Enum(\"width\", \"height\");\r\n    exports.Dimensions = kinds_1.Enum(\"width\", \"height\", \"both\");\r\n    exports.Direction = kinds_1.Enum(\"clock\", \"anticlock\");\r\n    exports.Distribution = kinds_1.Enum(\"uniform\", \"normal\");\r\n    exports.FontStyle = kinds_1.Enum(\"normal\", \"italic\", \"bold\", \"bold italic\");\r\n    exports.HatchPatternType = kinds_1.Enum('blank', 'dot', 'ring', 'horizontal_line', 'vertical_line', 'cross', 'horizontal_dash', 'vertical_dash', 'spiral', 'right_diagonal_line', 'left_diagonal_line', 'diagonal_cross', 'right_diagonal_dash', 'left_diagonal_dash', 'horizontal_wave', 'vertical_wave', 'criss_cross', ' ', '.', 'o', '-', '|', '+', '\"', ':', '@', '/', '\\\\', 'x', ',', '`', 'v', '>', '*');\r\n    exports.HTTPMethod = kinds_1.Enum(\"POST\", \"GET\");\r\n    exports.HexTileOrientation = kinds_1.Enum(\"pointytop\", \"flattop\");\r\n    exports.HoverMode = kinds_1.Enum(\"mouse\", \"hline\", \"vline\");\r\n    exports.LatLon = kinds_1.Enum(\"lat\", \"lon\");\r\n    exports.LegendClickPolicy = kinds_1.Enum(\"none\", \"hide\", \"mute\");\r\n    exports.LegendLocation = exports.Anchor;\r\n    exports.LineCap = kinds_1.Enum(\"butt\", \"round\", \"square\");\r\n    exports.LineJoin = kinds_1.Enum(\"miter\", \"round\", \"bevel\");\r\n    exports.LinePolicy = kinds_1.Enum(\"prev\", \"next\", \"nearest\", \"interp\", \"none\");\r\n    exports.Location = kinds_1.Enum(\"above\", \"below\", \"left\", \"right\");\r\n    exports.Logo = kinds_1.Enum(\"normal\", \"grey\");\r\n    exports.MarkerType = kinds_1.Enum(\"asterisk\", \"circle\", \"circle_cross\", \"circle_dot\", \"circle_x\", \"circle_y\", \"cross\", \"dash\", \"diamond\", \"diamond_cross\", \"diamond_dot\", \"dot\", \"hex\", \"hex_dot\", \"inverted_triangle\", \"plus\", \"square\", \"square_cross\", \"square_dot\", \"square_pin\", \"square_x\", \"triangle\", \"triangle_dot\", \"triangle_pin\", \"x\", \"y\");\r\n    exports.MutedPolicy = kinds_1.Enum(\"show\", \"ignore\");\r\n    exports.Orientation = kinds_1.Enum(\"vertical\", \"horizontal\");\r\n    exports.OutputBackend = kinds_1.Enum(\"canvas\", \"svg\", \"webgl\");\r\n    exports.PaddingUnits = kinds_1.Enum(\"percent\", \"absolute\");\r\n    exports.Place = kinds_1.Enum(\"above\", \"below\", \"left\", \"right\", \"center\");\r\n    exports.PointPolicy = kinds_1.Enum(\"snap_to_data\", \"follow_mouse\", \"none\");\r\n    exports.RadiusDimension = kinds_1.Enum(\"x\", \"y\", \"max\", \"min\");\r\n    exports.RenderLevel = kinds_1.Enum(\"image\", \"underlay\", \"glyph\", \"guide\", \"annotation\", \"overlay\");\r\n    exports.RenderMode = kinds_1.Enum(\"canvas\", \"css\");\r\n    exports.ResetPolicy = kinds_1.Enum(\"standard\", \"event_only\");\r\n    exports.RoundingFunction = kinds_1.Enum(\"round\", \"nearest\", \"floor\", \"rounddown\", \"ceil\", \"roundup\");\r\n    exports.SelectionMode = kinds_1.Enum(\"replace\", \"append\", \"intersect\", \"subtract\");\r\n    exports.Side = kinds_1.Enum(\"above\", \"below\", \"left\", \"right\");\r\n    exports.SizingMode = kinds_1.Enum(\"stretch_width\", \"stretch_height\", \"stretch_both\", \"scale_width\", \"scale_height\", \"scale_both\", \"fixed\");\r\n    exports.Sort = kinds_1.Enum(\"ascending\", \"descending\");\r\n    exports.SpatialUnits = kinds_1.Enum(\"screen\", \"data\");\r\n    exports.StartEnd = kinds_1.Enum(\"start\", \"end\");\r\n    exports.StepMode = kinds_1.Enum(\"after\", \"before\", \"center\");\r\n    exports.TapBehavior = kinds_1.Enum(\"select\", \"inspect\");\r\n    exports.TextAlign = kinds_1.Enum(\"left\", \"right\", \"center\");\r\n    exports.TextBaseline = kinds_1.Enum(\"top\", \"middle\", \"bottom\", \"alphabetic\", \"hanging\", \"ideographic\");\r\n    exports.TextureRepetition = kinds_1.Enum(\"repeat\", \"repeat_x\", \"repeat_y\", \"no_repeat\");\r\n    exports.TickLabelOrientation = kinds_1.Enum(\"vertical\", \"horizontal\", \"parallel\", \"normal\");\r\n    exports.TooltipAttachment = kinds_1.Enum(\"horizontal\", \"vertical\", \"left\", \"right\", \"above\", \"below\");\r\n    exports.UpdateMode = kinds_1.Enum(\"replace\", \"append\");\r\n    exports.VerticalAlign = kinds_1.Enum(\"top\", \"middle\", \"bottom\");\r\n}\r\n","/* core\\kinds.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var tp = tslib_1.__importStar(require(123) /* ./util/types */);\r\n    var color_1 = require(137) /* ./util/color */;\r\n    var Kind = /** @class */ (function () {\r\n        function Kind() {\r\n        }\r\n        return Kind;\r\n    }());\r\n    exports.Kind = Kind;\r\n    Kind.__name__ = \"Kind\";\r\n    (function (Kinds) {\r\n        var Any = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Any, _super);\r\n            function Any() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Any.prototype.valid = function (_value) {\r\n                return true;\r\n            };\r\n            return Any;\r\n        }(Kind));\r\n        Any.__name__ = \"Any\";\r\n        Kinds.Any = Any;\r\n        var Unknown = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Unknown, _super);\r\n            function Unknown() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Unknown.prototype.valid = function (_value) {\r\n                return true;\r\n            };\r\n            return Unknown;\r\n        }(Kind));\r\n        Unknown.__name__ = \"Unknown\";\r\n        Kinds.Unknown = Unknown;\r\n        var Boolean = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Boolean, _super);\r\n            function Boolean() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Boolean.prototype.valid = function (value) {\r\n                return tp.isBoolean(value);\r\n            };\r\n            return Boolean;\r\n        }(Kind));\r\n        Boolean.__name__ = \"Boolean\";\r\n        Kinds.Boolean = Boolean;\r\n        var Ref = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Ref, _super);\r\n            function Ref(obj_type) {\r\n                var _this = _super.call(this) || this;\r\n                _this.obj_type = obj_type;\r\n                return _this;\r\n            }\r\n            Ref.prototype.valid = function (value) {\r\n                // XXX: disable validation for now, because object graph\r\n                // initialization depends on this.\r\n                value;\r\n                return true;\r\n                //return value instanceof this.obj_type\r\n            };\r\n            return Ref;\r\n        }(Kind));\r\n        Ref.__name__ = \"Ref\";\r\n        Kinds.Ref = Ref;\r\n        var Number = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Number, _super);\r\n            function Number() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Number.prototype.valid = function (value) {\r\n                return tp.isNumber(value);\r\n            };\r\n            return Number;\r\n        }(Kind));\r\n        Number.__name__ = \"Number\";\r\n        Kinds.Number = Number;\r\n        var Int = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Int, _super);\r\n            function Int() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Int.prototype.valid = function (value) {\r\n                return _super.prototype.valid.call(this, value) && tp.isInteger(value);\r\n            };\r\n            return Int;\r\n        }(Number));\r\n        Int.__name__ = \"Int\";\r\n        Kinds.Int = Int;\r\n        var Or = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Or, _super);\r\n            function Or(types) {\r\n                var _this = _super.call(this) || this;\r\n                _this.types = types;\r\n                _this.types = types;\r\n                return _this;\r\n            }\r\n            Or.prototype.valid = function (value) {\r\n                return this.types.some(function (type) { return type.valid(value); });\r\n            };\r\n            return Or;\r\n        }(Kind));\r\n        Or.__name__ = \"Or\";\r\n        Kinds.Or = Or;\r\n        var Tuple = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Tuple, _super);\r\n            function Tuple(types) {\r\n                var _this = _super.call(this) || this;\r\n                _this.types = types;\r\n                _this.types = types;\r\n                return _this;\r\n            }\r\n            Tuple.prototype.valid = function (value) {\r\n                if (!tp.isArray(value))\r\n                    return false;\r\n                for (var i = 0; i < this.types.length; i++) {\r\n                    var type = this.types[i];\r\n                    var item = value[i];\r\n                    if (!type.valid(item))\r\n                        return false;\r\n                }\r\n                return true;\r\n            };\r\n            return Tuple;\r\n        }(Kind));\r\n        Tuple.__name__ = \"Tuple\";\r\n        Kinds.Tuple = Tuple;\r\n        var Array = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Array, _super);\r\n            function Array(item_type) {\r\n                var _this = _super.call(this) || this;\r\n                _this.item_type = item_type;\r\n                return _this;\r\n            }\r\n            Array.prototype.valid = function (value) {\r\n                var _this = this;\r\n                return tp.isArray(value) && value.every(function (item) { return _this.item_type.valid(item); });\r\n            };\r\n            return Array;\r\n        }(Kind));\r\n        Array.__name__ = \"Array\";\r\n        Kinds.Array = Array;\r\n        var Null = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Null, _super);\r\n            function Null() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Null.prototype.valid = function (value) {\r\n                return value === null;\r\n            };\r\n            return Null;\r\n        }(Kind));\r\n        Null.__name__ = \"Null\";\r\n        Kinds.Null = Null;\r\n        var Nullable = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Nullable, _super);\r\n            function Nullable(base_type) {\r\n                var _this = _super.call(this) || this;\r\n                _this.base_type = base_type;\r\n                return _this;\r\n            }\r\n            Nullable.prototype.valid = function (value) {\r\n                return value === null || this.base_type.valid(value);\r\n            };\r\n            return Nullable;\r\n        }(Kind));\r\n        Nullable.__name__ = \"Nullable\";\r\n        Kinds.Nullable = Nullable;\r\n        var String = /** @class */ (function (_super) {\r\n            tslib_1.__extends(String, _super);\r\n            function String() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            String.prototype.valid = function (value) {\r\n                return tp.isString(value);\r\n            };\r\n            return String;\r\n        }(Kind));\r\n        String.__name__ = \"String\";\r\n        Kinds.String = String;\r\n        var Enum = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Enum, _super);\r\n            function Enum(values) {\r\n                var _this = _super.call(this) || this;\r\n                _this.values = new Set(values);\r\n                return _this;\r\n            }\r\n            Enum.prototype.valid = function (value) {\r\n                return this.values.has(value);\r\n            };\r\n            Enum.prototype[Symbol.iterator] = function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [5 /*yield**/, tslib_1.__values(this.values)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            };\r\n            return Enum;\r\n        }(Kind));\r\n        Enum.__name__ = \"Enum\";\r\n        Kinds.Enum = Enum;\r\n        var Struct = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Struct, _super);\r\n            function Struct(item_type) {\r\n                var _this = _super.call(this) || this;\r\n                _this.item_type = item_type;\r\n                return _this;\r\n            }\r\n            Struct.prototype.valid = function (value) {\r\n                if (!tp.isPlainObject(value))\r\n                    return false;\r\n                for (var key in value) {\r\n                    if (value.hasOwnProperty(key)) {\r\n                        var item = value[key];\r\n                        if (!this.item_type.valid(item))\r\n                            return false;\r\n                    }\r\n                }\r\n                return true;\r\n            };\r\n            return Struct;\r\n        }(Kind));\r\n        Struct.__name__ = \"Struct\";\r\n        Kinds.Struct = Struct;\r\n        var Dict = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Dict, _super);\r\n            function Dict(key_type, item_type) {\r\n                var _this = _super.call(this) || this;\r\n                _this.key_type = key_type;\r\n                _this.item_type = item_type;\r\n                return _this;\r\n            }\r\n            Dict.prototype.valid = function (value) {\r\n                var e_1, _a;\r\n                if (!(value instanceof Map))\r\n                    return false;\r\n                try {\r\n                    for (var _b = tslib_1.__values(value.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                        var _d = tslib_1.__read(_c.value, 2), key = _d[0], item = _d[1];\r\n                        if (!(this.key_type.valid(key) && this.item_type.valid(item)))\r\n                            return false;\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_c && !_c.done && (_a = _b.return))\r\n                            _a.call(_b);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n                return true;\r\n            };\r\n            return Dict;\r\n        }(Kind));\r\n        Dict.__name__ = \"Dict\";\r\n        Kinds.Dict = Dict;\r\n        var Color = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Color, _super);\r\n            function Color() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Color.prototype.valid = function (value) {\r\n                return tp.isString(value) && color_1.is_color(value);\r\n            };\r\n            return Color;\r\n        }(Kind));\r\n        Color.__name__ = \"Color\";\r\n        Kinds.Color = Color;\r\n        var Percent = /** @class */ (function (_super) {\r\n            tslib_1.__extends(Percent, _super);\r\n            function Percent() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Percent.prototype.valid = function (value) {\r\n                return _super.prototype.valid.call(this, value) && 0 <= value && value <= 1.0;\r\n            };\r\n            return Percent;\r\n        }(Number));\r\n        Percent.__name__ = \"Percent\";\r\n        Kinds.Percent = Percent;\r\n    })(exports.Kinds || (exports.Kinds = {}));\r\n    exports.Any = new exports.Kinds.Any();\r\n    exports.Unknown = new exports.Kinds.Unknown();\r\n    exports.Boolean = new exports.Kinds.Boolean();\r\n    exports.Number = new exports.Kinds.Number();\r\n    exports.Int = new exports.Kinds.Int();\r\n    exports.String = new exports.Kinds.String();\r\n    exports.Null = new exports.Kinds.Null();\r\n    exports.Nullable = function (base_type) { return new exports.Kinds.Nullable(base_type); };\r\n    exports.Or = function () {\r\n        var types = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            types[_i] = arguments[_i];\r\n        }\r\n        return new exports.Kinds.Or(types);\r\n    };\r\n    exports.Tuple = function () {\r\n        var types = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            types[_i] = arguments[_i];\r\n        }\r\n        return new exports.Kinds.Tuple(types);\r\n    };\r\n    exports.Array = function (item_type) { return new exports.Kinds.Array(item_type); };\r\n    exports.Struct = function (item_type) { return new exports.Kinds.Struct(item_type); };\r\n    exports.Dict = function (key_type, item_type) { return new exports.Kinds.Dict(key_type, item_type); };\r\n    exports.Enum = function () {\r\n        var values = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            values[_i] = arguments[_i];\r\n        }\r\n        return new exports.Kinds.Enum(values);\r\n    };\r\n    exports.Ref = function (obj_type) { return new exports.Kinds.Ref(obj_type); };\r\n    exports.Percent = new exports.Kinds.Percent();\r\n    exports.Color = new exports.Kinds.Color();\r\n    exports.Auto = exports.Enum(\"auto\");\r\n    exports.FontSize = exports.String;\r\n    exports.Font = exports.String;\r\n    exports.Angle = exports.Number;\r\n}\r\n","/* core\\util\\color.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var svg_colors_1 = require(138) /* ./svg_colors */;\r\n    var array_1 = require(124) /* ./array */;\r\n    function is_color(value) {\r\n        return svg_colors_1.is_svg_color(value.toLowerCase()) || value.substring(0, 1) == \"#\" || valid_rgb(value);\r\n    }\r\n    exports.is_color = is_color;\r\n    function _component2hex(v) {\r\n        var h = Number(v).toString(16);\r\n        return h.length == 1 ? \"0\" + h : h;\r\n    }\r\n    function rgb2hex(r, g, b) {\r\n        var R = _component2hex(r & 0xFF);\r\n        var G = _component2hex(g & 0xFF);\r\n        var B = _component2hex(b & 0xFF);\r\n        return \"#\" + R + G + B;\r\n    }\r\n    exports.rgb2hex = rgb2hex;\r\n    function color2hex(color) {\r\n        color = color + '';\r\n        if (color.indexOf('#') == 0)\r\n            return color;\r\n        else if (svg_colors_1.is_svg_color(color))\r\n            return svg_colors_1.svg_colors[color];\r\n        else if (color.indexOf('rgb') == 0) {\r\n            var rgb = color.replace(/^rgba?\\(|\\s+|\\)$/g, '').split(',');\r\n            var hex = rgb.slice(0, 3).map(_component2hex).join('');\r\n            if (rgb.length == 4)\r\n                hex += _component2hex(Math.floor(parseFloat(rgb[3]) * 255));\r\n            return \"#\" + hex.slice(0, 8); // can also be rgba\r\n        }\r\n        else\r\n            return color;\r\n    }\r\n    exports.color2hex = color2hex;\r\n    function encode_rgba(_a) {\r\n        var _b = tslib_1.__read(_a, 4), r = _b[0], g = _b[1], b = _b[2], a = _b[3];\r\n        return (r * 255 | 0) << 24 | (g * 255 | 0) << 16 | (b * 255 | 0) << 8 | (a * 255 | 0);\r\n    }\r\n    exports.encode_rgba = encode_rgba;\r\n    function decode_rgba(rgba) {\r\n        var r = ((rgba >> 24) & 0xff) / 255;\r\n        var g = ((rgba >> 16) & 0xff) / 255;\r\n        var b = ((rgba >> 8) & 0xff) / 255;\r\n        var a = ((rgba >> 0) & 0xff) / 255;\r\n        return [r, g, b, a];\r\n    }\r\n    exports.decode_rgba = decode_rgba;\r\n    function color2rgba(color, alpha) {\r\n        if (alpha === void 0) {\r\n            alpha = 1.0;\r\n        }\r\n        if (!color) // NaN, null, '', etc.\r\n            return [0, 0, 0, 0]; // transparent\r\n        // Convert to hex and then to clean version of 6 or 8 chars\r\n        var hex = color2hex(color);\r\n        hex = hex.replace(/ |#/g, '');\r\n        if (hex.length <= 4) {\r\n            hex = hex.replace(/(.)/g, '$1$1');\r\n        }\r\n        // Convert pairs to numbers\r\n        var rgba = hex.match(/../g).map(function (i) { return parseInt(i, 16) / 255; });\r\n        // Ensure correct length, add alpha if necessary\r\n        while (rgba.length < 3)\r\n            rgba.push(0);\r\n        if (rgba.length < 4)\r\n            rgba.push(alpha);\r\n        return rgba.slice(0, 4);\r\n    }\r\n    exports.color2rgba = color2rgba;\r\n    function valid_rgb(value) {\r\n        var params;\r\n        switch (value.substring(0, 4)) {\r\n            case \"rgba\": {\r\n                params = { start: \"rgba(\", len: 4, alpha: true };\r\n                break;\r\n            }\r\n            case \"rgb(\": {\r\n                params = { start: \"rgb(\", len: 3, alpha: false };\r\n                break;\r\n            }\r\n            default:\r\n                return false;\r\n        }\r\n        // if '.' and then ',' found, we know decimals are used on rgb\r\n        if (new RegExp(\".*?(\\\\.).*(,)\").test(value))\r\n            return false;\r\n        // throw new Error(`color expects integers for rgb in rgb/rgba tuple, received ${value}`)\r\n        // extract the numerical values from inside parens\r\n        var contents = value.replace(params.start, \"\").replace(\")\", \"\").split(',').map(parseFloat);\r\n        // check length of array based on rgb/rgba\r\n        if (contents.length != params.len)\r\n            return false;\r\n        // throw new Error(`color expects rgba ${params.len}-tuple, received ${value}`)\r\n        // check for valid numerical values for rgba\r\n        if (params.alpha && !(0 <= contents[3] && contents[3] <= 1))\r\n            return false;\r\n        // throw new Error(\"color expects rgba 4-tuple to have alpha value between 0 and 1\")\r\n        if (array_1.includes(contents.slice(0, 3).map(function (rgb) { return 0 <= rgb && rgb <= 255; }), false))\r\n            return false;\r\n        // throw new Error(\"color expects rgb to have value between 0 and 255\")\r\n        return true;\r\n    }\r\n    exports.valid_rgb = valid_rgb;\r\n}\r\n","/* core\\util\\svg_colors.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.svg_colors = {\r\n        indianred: \"#CD5C5C\",\r\n        lightcoral: \"#F08080\",\r\n        salmon: \"#FA8072\",\r\n        darksalmon: \"#E9967A\",\r\n        lightsalmon: \"#FFA07A\",\r\n        crimson: \"#DC143C\",\r\n        red: \"#FF0000\",\r\n        firebrick: \"#B22222\",\r\n        darkred: \"#8B0000\",\r\n        pink: \"#FFC0CB\",\r\n        lightpink: \"#FFB6C1\",\r\n        hotpink: \"#FF69B4\",\r\n        deeppink: \"#FF1493\",\r\n        mediumvioletred: \"#C71585\",\r\n        palevioletred: \"#DB7093\",\r\n        coral: \"#FF7F50\",\r\n        tomato: \"#FF6347\",\r\n        orangered: \"#FF4500\",\r\n        darkorange: \"#FF8C00\",\r\n        orange: \"#FFA500\",\r\n        gold: \"#FFD700\",\r\n        yellow: \"#FFFF00\",\r\n        lightyellow: \"#FFFFE0\",\r\n        lemonchiffon: \"#FFFACD\",\r\n        lightgoldenrodyellow: \"#FAFAD2\",\r\n        papayawhip: \"#FFEFD5\",\r\n        moccasin: \"#FFE4B5\",\r\n        peachpuff: \"#FFDAB9\",\r\n        palegoldenrod: \"#EEE8AA\",\r\n        khaki: \"#F0E68C\",\r\n        darkkhaki: \"#BDB76B\",\r\n        lavender: \"#E6E6FA\",\r\n        thistle: \"#D8BFD8\",\r\n        plum: \"#DDA0DD\",\r\n        violet: \"#EE82EE\",\r\n        orchid: \"#DA70D6\",\r\n        fuchsia: \"#FF00FF\",\r\n        magenta: \"#FF00FF\",\r\n        mediumorchid: \"#BA55D3\",\r\n        mediumpurple: \"#9370DB\",\r\n        blueviolet: \"#8A2BE2\",\r\n        darkviolet: \"#9400D3\",\r\n        darkorchid: \"#9932CC\",\r\n        darkmagenta: \"#8B008B\",\r\n        purple: \"#800080\",\r\n        indigo: \"#4B0082\",\r\n        slateblue: \"#6A5ACD\",\r\n        darkslateblue: \"#483D8B\",\r\n        mediumslateblue: \"#7B68EE\",\r\n        greenyellow: \"#ADFF2F\",\r\n        chartreuse: \"#7FFF00\",\r\n        lawngreen: \"#7CFC00\",\r\n        lime: \"#00FF00\",\r\n        limegreen: \"#32CD32\",\r\n        palegreen: \"#98FB98\",\r\n        lightgreen: \"#90EE90\",\r\n        mediumspringgreen: \"#00FA9A\",\r\n        springgreen: \"#00FF7F\",\r\n        mediumseagreen: \"#3CB371\",\r\n        seagreen: \"#2E8B57\",\r\n        forestgreen: \"#228B22\",\r\n        green: \"#008000\",\r\n        darkgreen: \"#006400\",\r\n        yellowgreen: \"#9ACD32\",\r\n        olivedrab: \"#6B8E23\",\r\n        olive: \"#808000\",\r\n        darkolivegreen: \"#556B2F\",\r\n        mediumaquamarine: \"#66CDAA\",\r\n        darkseagreen: \"#8FBC8F\",\r\n        lightseagreen: \"#20B2AA\",\r\n        darkcyan: \"#008B8B\",\r\n        teal: \"#008080\",\r\n        aqua: \"#00FFFF\",\r\n        cyan: \"#00FFFF\",\r\n        lightcyan: \"#E0FFFF\",\r\n        paleturquoise: \"#AFEEEE\",\r\n        aquamarine: \"#7FFFD4\",\r\n        turquoise: \"#40E0D0\",\r\n        mediumturquoise: \"#48D1CC\",\r\n        darkturquoise: \"#00CED1\",\r\n        cadetblue: \"#5F9EA0\",\r\n        steelblue: \"#4682B4\",\r\n        lightsteelblue: \"#B0C4DE\",\r\n        powderblue: \"#B0E0E6\",\r\n        lightblue: \"#ADD8E6\",\r\n        skyblue: \"#87CEEB\",\r\n        lightskyblue: \"#87CEFA\",\r\n        deepskyblue: \"#00BFFF\",\r\n        dodgerblue: \"#1E90FF\",\r\n        cornflowerblue: \"#6495ED\",\r\n        royalblue: \"#4169E1\",\r\n        blue: \"#0000FF\",\r\n        mediumblue: \"#0000CD\",\r\n        darkblue: \"#00008B\",\r\n        navy: \"#000080\",\r\n        midnightblue: \"#191970\",\r\n        cornsilk: \"#FFF8DC\",\r\n        blanchedalmond: \"#FFEBCD\",\r\n        bisque: \"#FFE4C4\",\r\n        navajowhite: \"#FFDEAD\",\r\n        wheat: \"#F5DEB3\",\r\n        burlywood: \"#DEB887\",\r\n        tan: \"#D2B48C\",\r\n        rosybrown: \"#BC8F8F\",\r\n        sandybrown: \"#F4A460\",\r\n        goldenrod: \"#DAA520\",\r\n        darkgoldenrod: \"#B8860B\",\r\n        peru: \"#CD853F\",\r\n        chocolate: \"#D2691E\",\r\n        saddlebrown: \"#8B4513\",\r\n        sienna: \"#A0522D\",\r\n        brown: \"#A52A2A\",\r\n        maroon: \"#800000\",\r\n        white: \"#FFFFFF\",\r\n        snow: \"#FFFAFA\",\r\n        honeydew: \"#F0FFF0\",\r\n        mintcream: \"#F5FFFA\",\r\n        azure: \"#F0FFFF\",\r\n        aliceblue: \"#F0F8FF\",\r\n        ghostwhite: \"#F8F8FF\",\r\n        whitesmoke: \"#F5F5F5\",\r\n        seashell: \"#FFF5EE\",\r\n        beige: \"#F5F5DC\",\r\n        oldlace: \"#FDF5E6\",\r\n        floralwhite: \"#FFFAF0\",\r\n        ivory: \"#FFFFF0\",\r\n        antiquewhite: \"#FAEBD7\",\r\n        linen: \"#FAF0E6\",\r\n        lavenderblush: \"#FFF0F5\",\r\n        mistyrose: \"#FFE4E1\",\r\n        gainsboro: \"#DCDCDC\",\r\n        lightgray: \"#D3D3D3\",\r\n        lightgrey: \"#D3D3D3\",\r\n        silver: \"#C0C0C0\",\r\n        darkgray: \"#A9A9A9\",\r\n        darkgrey: \"#A9A9A9\",\r\n        gray: \"#808080\",\r\n        grey: \"#808080\",\r\n        dimgray: \"#696969\",\r\n        dimgrey: \"#696969\",\r\n        lightslategray: \"#778899\",\r\n        lightslategrey: \"#778899\",\r\n        slategray: \"#708090\",\r\n        slategrey: \"#708090\",\r\n        darkslategray: \"#2F4F4F\",\r\n        darkslategrey: \"#2F4F4F\",\r\n        black: \"#000000\",\r\n    };\r\n    function is_svg_color(color) {\r\n        return color in exports.svg_colors;\r\n    }\r\n    exports.is_svg_color = is_svg_color;\r\n}\r\n","/* core\\types.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    exports.NumberArray = Float32Array;\r\n    exports.ColorArray = Uint32Array;\r\n    var eq_1 = require(140) /* ./util/eq */;\r\n    var RaggedArray = /** @class */ (function () {\r\n        function RaggedArray(offsets, array) {\r\n            this.offsets = offsets;\r\n            this.array = array;\r\n        }\r\n        RaggedArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.arrays(this.offsets, that.offsets) && cmp.arrays(this.array, that.array);\r\n        };\r\n        Object.defineProperty(RaggedArray.prototype, \"length\", {\r\n            get: function () {\r\n                return this.offsets.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        RaggedArray.prototype.clone = function () {\r\n            return new RaggedArray(new Uint32Array(this.offsets), new exports.NumberArray(this.array));\r\n        };\r\n        RaggedArray.from = function (items) {\r\n            var n = items.length;\r\n            var offsets = new Uint32Array(n);\r\n            var offset = 0;\r\n            for (var i = 0; i < n; i++) {\r\n                var length = items[i].length;\r\n                offsets[i] = offset;\r\n                offset += length;\r\n            }\r\n            var array = new exports.NumberArray(offset);\r\n            for (var i = 0; i < n; i++) {\r\n                array.set(items[i], offsets[i]);\r\n            }\r\n            return new RaggedArray(offsets, array);\r\n        };\r\n        RaggedArray.prototype[Symbol.iterator] = function () {\r\n            var _a, offsets, length, i;\r\n            return tslib_1.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this, offsets = _a.offsets, length = _a.length;\r\n                        i = 0;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(i < length))\r\n                            return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.array.subarray(offsets[i], offsets[i + 1])];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        RaggedArray.prototype.get = function (i) {\r\n            var offsets = this.offsets;\r\n            return this.array.subarray(offsets[i], offsets[i + 1]);\r\n        };\r\n        RaggedArray.prototype.set = function (i, array) {\r\n            this.array.set(array, this.offsets[i]);\r\n        };\r\n        return RaggedArray;\r\n    }());\r\n    exports.RaggedArray = RaggedArray;\r\n    RaggedArray.__name__ = \"RaggedArray\";\r\n    RaggedArray[Symbol.toStringTag] = \"RaggedArray\";\r\n    var data_structures_1 = require(141) /* ./util/data_structures */;\r\n    exports.Indices = data_structures_1.BitSet;\r\n}\r\n","/* core\\util\\eq.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    // Based on Underscore.js 1.8.3 (http://underscorejs.org)\r\n    exports.equals = Symbol(\"equals\");\r\n    exports.wildcard = Symbol(\"wildcard\");\r\n    var toString = Object.prototype.toString;\r\n    var Comparator = /** @class */ (function () {\r\n        function Comparator() {\r\n            this.a_stack = [];\r\n            this.b_stack = [];\r\n        }\r\n        Comparator.prototype.eq = function (a, b) {\r\n            var _this = this;\r\n            if (Object.is(a, b))\r\n                return true;\r\n            if (a === exports.wildcard || b === exports.wildcard)\r\n                return true;\r\n            if (a == null || b == null)\r\n                return a === b;\r\n            var class_name = toString.call(a);\r\n            if (class_name != toString.call(b))\r\n                return false;\r\n            switch (class_name) {\r\n                case '[object Number]':\r\n                    return this.numbers(a, b);\r\n                case '[object RegExp]':\r\n                case '[object String]':\r\n                    return \"\" + a == \"\" + b;\r\n                case '[object Date]':\r\n                case '[object Boolean]':\r\n                    return +a === +b;\r\n            }\r\n            // Assume equality for cyclic structures. The algorithm for detecting cyclic\r\n            // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\r\n            // Initializing stack of traversed objects.\r\n            // It's done here since we only need them for objects and arrays comparison.\r\n            var _a = this, a_stack = _a.a_stack, b_stack = _a.b_stack;\r\n            var length = a_stack.length;\r\n            while (length--) {\r\n                // Linear search. Performance is inversely proportional to the number of\r\n                // unique nested structures.\r\n                if (a_stack[length] === a)\r\n                    return b_stack[length] === b;\r\n            }\r\n            a_stack.push(a);\r\n            b_stack.push(b);\r\n            var result = (function () {\r\n                if (a[exports.equals] != null && b[exports.equals] != null) {\r\n                    return a[exports.equals](b, _this);\r\n                }\r\n                switch (class_name) {\r\n                    case \"[object Array]\":\r\n                    case \"[object Uint8Array]\":\r\n                    case \"[object Int8Array]\":\r\n                    case \"[object Uint16Array]\":\r\n                    case \"[object Int16Array]\":\r\n                    case \"[object Uint32Array]\":\r\n                    case \"[object Int32Array]\":\r\n                    case \"[object Float32Array]\":\r\n                    case \"[object Float64Array]\": {\r\n                        return _this.arrays(a, b);\r\n                    }\r\n                    case \"[object Map]\":\r\n                        return _this.maps(a, b);\r\n                    case \"[object Set]\":\r\n                        return _this.sets(a, b);\r\n                    case \"[object Object]\": {\r\n                        if (a.constructor == b.constructor && (a.constructor == null || a.constructor === Object)) {\r\n                            return _this.objects(a, b);\r\n                        }\r\n                    }\r\n                    case \"[object Function]\": {\r\n                        if (a.constructor == b.constructor && a.constructor === Function) {\r\n                            return _this.eq(\"\" + a, \"\" + b);\r\n                        }\r\n                    }\r\n                }\r\n                if (a instanceof Node) {\r\n                    return _this.nodes(a, b);\r\n                }\r\n                throw Error(\"can't compare objects of type \" + class_name);\r\n            })();\r\n            a_stack.pop();\r\n            b_stack.pop();\r\n            return result;\r\n        };\r\n        Comparator.prototype.numbers = function (a, b) {\r\n            return Object.is(a, b);\r\n        };\r\n        Comparator.prototype.arrays = function (a, b) {\r\n            var length = a.length;\r\n            if (length != b.length)\r\n                return false;\r\n            for (var i = 0; i < length; i++) {\r\n                if (!this.eq(a[i], b[i]))\r\n                    return false;\r\n            }\r\n            return true;\r\n        };\r\n        Comparator.prototype.iterables = function (a, b) {\r\n            var ai = a[Symbol.iterator]();\r\n            var bi = b[Symbol.iterator]();\r\n            while (true) {\r\n                var an = ai.next();\r\n                var bn = bi.next();\r\n                if (an.done && bn.done)\r\n                    return true;\r\n                if (an.done || bn.done)\r\n                    return false;\r\n                if (!this.eq(an.value, bn.value))\r\n                    return false;\r\n            }\r\n        };\r\n        Comparator.prototype.maps = function (a, b) {\r\n            var e_1, _a;\r\n            if (a.size != b.size)\r\n                return false;\r\n            try {\r\n                for (var a_1 = tslib_1.__values(a), a_1_1 = a_1.next(); !a_1_1.done; a_1_1 = a_1.next()) {\r\n                    var _b = tslib_1.__read(a_1_1.value, 2), key = _b[0], val = _b[1];\r\n                    if (!b.has(key) || !this.eq(val, b.get(key)))\r\n                        return false;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (a_1_1 && !a_1_1.done && (_a = a_1.return))\r\n                        _a.call(a_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        Comparator.prototype.sets = function (a, b) {\r\n            var e_2, _a;\r\n            if (a.size != b.size)\r\n                return false;\r\n            try {\r\n                for (var a_2 = tslib_1.__values(a), a_2_1 = a_2.next(); !a_2_1.done; a_2_1 = a_2.next()) {\r\n                    var key = a_2_1.value;\r\n                    if (!b.has(key))\r\n                        return false;\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (a_2_1 && !a_2_1.done && (_a = a_2.return))\r\n                        _a.call(a_2);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        Comparator.prototype.objects = function (a, b) {\r\n            var e_3, _a;\r\n            var keys = Object.keys(a);\r\n            if (keys.length != Object.keys(b).length)\r\n                return false;\r\n            try {\r\n                for (var keys_1 = tslib_1.__values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\r\n                    var key = keys_1_1.value;\r\n                    if (!b.hasOwnProperty(key) || !this.eq(a[key], b[key]))\r\n                        return false;\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return))\r\n                        _a.call(keys_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        Comparator.prototype.nodes = function (a, b) {\r\n            if (a.nodeType != b.nodeType)\r\n                return false;\r\n            if (a.textContent != b.textContent)\r\n                return false;\r\n            if (!this.iterables(a.childNodes, b.childNodes))\r\n                return false;\r\n            return true;\r\n        };\r\n        return Comparator;\r\n    }());\r\n    exports.Comparator = Comparator;\r\n    Comparator.__name__ = \"Comparator\";\r\n    var abs = Math.abs;\r\n    var SimilarComparator = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SimilarComparator, _super);\r\n        function SimilarComparator(tolerance) {\r\n            if (tolerance === void 0) {\r\n                tolerance = 1e-4;\r\n            }\r\n            var _this = _super.call(this) || this;\r\n            _this.tolerance = tolerance;\r\n            return _this;\r\n        }\r\n        SimilarComparator.prototype.numbers = function (a, b) {\r\n            return _super.prototype.numbers.call(this, a, b) || abs(a - b) < this.tolerance;\r\n        };\r\n        return SimilarComparator;\r\n    }(Comparator));\r\n    exports.SimilarComparator = SimilarComparator;\r\n    SimilarComparator.__name__ = \"SimilarComparator\";\r\n    function is_equal(a, b) {\r\n        var comparator = new Comparator();\r\n        return comparator.eq(a, b);\r\n    }\r\n    exports.is_equal = is_equal;\r\n    function is_similar(a, b, tolerance) {\r\n        var comparator = new SimilarComparator(tolerance);\r\n        return comparator.eq(a, b);\r\n    }\r\n    exports.is_similar = is_similar;\r\n    /** @deprecated */\r\n    exports.isEqual = is_equal;\r\n}\r\n","/* core\\util\\data_structures.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var assert_1 = require(126) /* ./assert */;\r\n    var array_1 = require(124) /* ./array */;\r\n    var eq_1 = require(140) /* ./eq */;\r\n    var BitSet = /** @class */ (function () {\r\n        function BitSet(size, init) {\r\n            if (init === void 0) {\r\n                init = 0;\r\n            }\r\n            this.size = size;\r\n            this[Symbol.toStringTag] = \"BitSet\";\r\n            this._count = null;\r\n            this._nwords = Math.ceil(size / 32);\r\n            if (init == 0 || init == 1) {\r\n                this._array = new Uint32Array(this._nwords);\r\n                if (init == 1) {\r\n                    this._array.fill(0xffffffff);\r\n                }\r\n            }\r\n            else {\r\n                assert_1.assert(init.length == this._nwords, \"Initializer size mismatch\");\r\n                this._array = init;\r\n            }\r\n        }\r\n        BitSet.prototype.clone = function () {\r\n            return new BitSet(this.size, new Uint32Array(this._array));\r\n        };\r\n        BitSet.prototype[eq_1.equals] = function (that, cmp) {\r\n            if (!cmp.eq(this.size, that.size))\r\n                return false;\r\n            var _nwords = this._nwords;\r\n            var trailing = this.size % _nwords;\r\n            var n = trailing == 0 ? _nwords : _nwords - 1;\r\n            for (var i = 0; i < n; i++) {\r\n                if (this._array[i] != that._array[i])\r\n                    return false;\r\n            }\r\n            if (trailing == 0)\r\n                return true;\r\n            else {\r\n                var msb = 1 << (trailing - 1);\r\n                var mask = (msb - 1) ^ msb;\r\n                return (this._array[n] & mask) == (that._array[n] & mask);\r\n            }\r\n        };\r\n        BitSet.all_set = function (size) {\r\n            return new BitSet(size, 1);\r\n        };\r\n        BitSet.all_unset = function (size) {\r\n            return new BitSet(size, 0);\r\n        };\r\n        BitSet.from_indices = function (size, indices) {\r\n            var e_1, _a;\r\n            var bits = new BitSet(size);\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    bits.set(i);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_a = indices_1.return))\r\n                        _a.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return bits;\r\n        };\r\n        BitSet.from_booleans = function (size, booleans) {\r\n            var bits = new BitSet(size);\r\n            var n = Math.min(size, booleans.length);\r\n            for (var i = 0; i < n; i++) {\r\n                if (booleans[i])\r\n                    bits.set(i);\r\n            }\r\n            return bits;\r\n        };\r\n        BitSet.prototype._check_bounds = function (k) {\r\n            assert_1.assert(0 <= k && k < this.size, \"Out of bounds\");\r\n        };\r\n        BitSet.prototype.get = function (k) {\r\n            this._check_bounds(k);\r\n            var i = k >>> 5; // Math.floor(k/32)\r\n            var j = k & 0x1f; // k % 32\r\n            return !!((this._array[i] >> j) & 0x1);\r\n        };\r\n        BitSet.prototype.set = function (k, v) {\r\n            if (v === void 0) {\r\n                v = true;\r\n            }\r\n            this._check_bounds(k);\r\n            this._count = null;\r\n            var i = k >>> 5; // Math.floor(k/32)\r\n            var j = k & 0x1f; // k % 32\r\n            if (v)\r\n                this._array[i] |= 0x1 << j;\r\n            else\r\n                this._array[i] &= ~(0x1 << j);\r\n        };\r\n        BitSet.prototype.unset = function (k) {\r\n            this.set(k, false);\r\n        };\r\n        BitSet.prototype[Symbol.iterator] = function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [5 /*yield**/, tslib_1.__values(this.ones())];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        Object.defineProperty(BitSet.prototype, \"count\", {\r\n            get: function () {\r\n                var count = this._count;\r\n                if (count == null)\r\n                    this._count = count = this._get_count();\r\n                return count;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        BitSet.prototype._get_count = function () {\r\n            var _a = this, _array = _a._array, _nwords = _a._nwords, size = _a.size;\r\n            var c = 0;\r\n            for (var k = 0, i = 0; i < _nwords; i++) {\r\n                var word = _array[i];\r\n                if (word == 0) {\r\n                    k += 32;\r\n                }\r\n                else {\r\n                    for (var j = 0; j < 32 && k < size; j++, k++) {\r\n                        if ((word >>> j) & 0x1)\r\n                            c += 1;\r\n                    }\r\n                }\r\n            }\r\n            return c;\r\n        };\r\n        BitSet.prototype.ones = function () {\r\n            var _a, _array, _nwords, size, k, i, word, j;\r\n            return tslib_1.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this, _array = _a._array, _nwords = _a._nwords, size = _a.size;\r\n                        k = 0, i = 0;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(i < _nwords))\r\n                            return [3 /*break*/, 6];\r\n                        word = _array[i];\r\n                        if (word == 0) {\r\n                            k += 32;\r\n                            return [3 /*break*/, 5];\r\n                        }\r\n                        j = 0;\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        if (!(j < 32 && k < size))\r\n                            return [3 /*break*/, 5];\r\n                        if (!((word >>> j) & 0x1))\r\n                            return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, k];\r\n                    case 3:\r\n                        _b.sent();\r\n                        _b.label = 4;\r\n                    case 4:\r\n                        j++, k++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5:\r\n                        i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        BitSet.prototype.zeros = function () {\r\n            var _a, _array, _nwords, size, k, i, word, j;\r\n            return tslib_1.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this, _array = _a._array, _nwords = _a._nwords, size = _a.size;\r\n                        k = 0, i = 0;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(i < _nwords))\r\n                            return [3 /*break*/, 6];\r\n                        word = _array[i];\r\n                        if (word == 0xffffffff) {\r\n                            k += 32;\r\n                            return [3 /*break*/, 5];\r\n                        }\r\n                        j = 0;\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        if (!(j < 32 && k < size))\r\n                            return [3 /*break*/, 5];\r\n                        if (!!((word >>> j) & 0x1))\r\n                            return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, k];\r\n                    case 3:\r\n                        _b.sent();\r\n                        _b.label = 4;\r\n                    case 4:\r\n                        j++, k++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5:\r\n                        i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        BitSet.prototype._check_size = function (other) {\r\n            assert_1.assert(this.size == other.size, \"Size mismatch\");\r\n        };\r\n        BitSet.prototype.add = function (other) {\r\n            this._check_size(other);\r\n            for (var i = 0; i < this._nwords; i++) {\r\n                this._array[i] |= other._array[i];\r\n            }\r\n        };\r\n        BitSet.prototype.intersect = function (other) {\r\n            this._check_size(other);\r\n            for (var i = 0; i < this._nwords; i++) {\r\n                this._array[i] &= other._array[i];\r\n            }\r\n        };\r\n        BitSet.prototype.subtract = function (other) {\r\n            this._check_size(other);\r\n            for (var i = 0; i < this._nwords; i++) {\r\n                var a = this._array[i];\r\n                var b = other._array[i];\r\n                this._array[i] = (a ^ b) & a;\r\n            }\r\n        };\r\n        BitSet.prototype.union = function (other) {\r\n            this._check_size(other);\r\n            var result = this.clone();\r\n            for (var i = 0; i < this._nwords; i++) {\r\n                result._array[i] |= other._array[i];\r\n            }\r\n            return result;\r\n        };\r\n        BitSet.prototype.intersection = function (other) {\r\n            this._check_size(other);\r\n            var result = this.clone();\r\n            for (var i = 0; i < this._nwords; i++) {\r\n                result._array[i] &= other._array[i];\r\n            }\r\n            return result;\r\n        };\r\n        BitSet.prototype.difference = function (other) {\r\n            this._check_size(other);\r\n            var result = this.clone();\r\n            for (var i = 0; i < this._nwords; i++) {\r\n                var a = this._array[i];\r\n                var b = other._array[i];\r\n                result._array[i] = (a ^ b) & a;\r\n            }\r\n            return result;\r\n        };\r\n        BitSet.prototype.select = function (array) {\r\n            var e_2, _a;\r\n            var n = this.count;\r\n            var result = new array.constructor(n);\r\n            var i = 0;\r\n            try {\r\n                for (var _b = tslib_1.__values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var j = _c.value;\r\n                    result[i++] = array[j];\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        return BitSet;\r\n    }());\r\n    exports.BitSet = BitSet;\r\n    BitSet.__name__ = \"BitSet\";\r\n    var Matrix = /** @class */ (function () {\r\n        function Matrix(nrows, ncols, init) {\r\n            this.nrows = nrows;\r\n            this.ncols = ncols;\r\n            this._matrix = new Array(nrows);\r\n            for (var y = 0; y < nrows; y++) {\r\n                this._matrix[y] = new Array(ncols);\r\n                for (var x = 0; x < ncols; x++) {\r\n                    this._matrix[y][x] = init(y, x);\r\n                }\r\n            }\r\n        }\r\n        Matrix.prototype.at = function (row, col) {\r\n            return this._matrix[row][col];\r\n        };\r\n        Matrix.prototype[Symbol.iterator] = function () {\r\n            var y, x, value;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        y = 0;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(y < this.nrows))\r\n                            return [3 /*break*/, 6];\r\n                        x = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(x < this.ncols))\r\n                            return [3 /*break*/, 5];\r\n                        value = this._matrix[y][x];\r\n                        return [4 /*yield*/, [value, y, x]];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        x++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5:\r\n                        y++;\r\n                        return [3 /*break*/, 1];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        Matrix.prototype.values = function () {\r\n            var _a, _b, _c, item, e_3_1;\r\n            var e_3, _d;\r\n            return tslib_1.__generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        _e.trys.push([0, 5, 6, 7]);\r\n                        _a = tslib_1.__values(this), _b = _a.next();\r\n                        _e.label = 1;\r\n                    case 1:\r\n                        if (!!_b.done)\r\n                            return [3 /*break*/, 4];\r\n                        _c = tslib_1.__read(_b.value, 1), item = _c[0];\r\n                        return [4 /*yield*/, item];\r\n                    case 2:\r\n                        _e.sent();\r\n                        _e.label = 3;\r\n                    case 3:\r\n                        _b = _a.next();\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [3 /*break*/, 7];\r\n                    case 5:\r\n                        e_3_1 = _e.sent();\r\n                        e_3 = { error: e_3_1 };\r\n                        return [3 /*break*/, 7];\r\n                    case 6:\r\n                        try {\r\n                            if (_b && !_b.done && (_d = _a.return))\r\n                                _d.call(_a);\r\n                        }\r\n                        finally {\r\n                            if (e_3)\r\n                                throw e_3.error;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        Matrix.prototype.map = function (fn) {\r\n            var _this = this;\r\n            return new Matrix(this.nrows, this.ncols, function (row, col) { return fn(_this.at(row, col), row, col); });\r\n        };\r\n        Matrix.prototype.apply = function (obj) {\r\n            var _this = this;\r\n            var fn = Matrix.from(obj);\r\n            var _a = this, nrows = _a.nrows, ncols = _a.ncols;\r\n            if (nrows == fn.nrows && ncols == fn.ncols)\r\n                return new Matrix(nrows, ncols, function (row, col) { return fn.at(row, col)(_this.at(row, col), row, col); });\r\n            else\r\n                throw new Error(\"dimensions don't match\");\r\n        };\r\n        Matrix.prototype.to_sparse = function () {\r\n            return tslib_1.__spread(this);\r\n        };\r\n        Matrix.from = function (obj, ncols) {\r\n            if (obj instanceof Matrix) {\r\n                return obj;\r\n            }\r\n            else if (ncols != null) {\r\n                var entries_1 = obj;\r\n                var nrows = Math.floor(entries_1.length / ncols);\r\n                return new Matrix(nrows, ncols, function (row, col) { return entries_1[row * ncols + col]; });\r\n            }\r\n            else {\r\n                var arrays_1 = obj;\r\n                var nrows = obj.length;\r\n                var ncols_1 = array_1.min(arrays_1.map(function (row) { return row.length; }));\r\n                return new Matrix(nrows, ncols_1, function (row, col) { return arrays_1[row][col]; });\r\n            }\r\n        };\r\n        return Matrix;\r\n    }());\r\n    exports.Matrix = Matrix;\r\n    Matrix.__name__ = \"Matrix\";\r\n}\r\n","/* core\\settings.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var Settings = /** @class */ (function () {\r\n        function Settings() {\r\n            this._dev = false;\r\n        }\r\n        Object.defineProperty(Settings.prototype, \"dev\", {\r\n            get: function () {\r\n                return this._dev;\r\n            },\r\n            set: function (dev) {\r\n                this._dev = dev;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Settings;\r\n    }());\r\n    exports.Settings = Settings;\r\n    Settings.__name__ = \"Settings\";\r\n    exports.settings = new Settings();\r\n}\r\n","/* core\\property_mixins.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ./properties */);\r\n    exports.Line = {\r\n        line_color: [p.Color, \"black\"],\r\n        line_alpha: [p.Number, 1.0],\r\n        line_width: [p.Number, 1],\r\n        line_join: [p.LineJoin, \"bevel\"],\r\n        line_cap: [p.LineCap, \"butt\"],\r\n        line_dash: [p.Array, []],\r\n        line_dash_offset: [p.Number, 0],\r\n    };\r\n    exports.Fill = {\r\n        fill_color: [p.Color, \"gray\"],\r\n        fill_alpha: [p.Number, 1.0],\r\n    };\r\n    exports.Hatch = {\r\n        hatch_color: [p.Color, \"black\"],\r\n        hatch_alpha: [p.Number, 1.0],\r\n        hatch_scale: [p.Number, 12.0],\r\n        hatch_pattern: [p.NullString, null],\r\n        hatch_weight: [p.Number, 1.0],\r\n        hatch_extra: [p.Any, {}],\r\n    };\r\n    exports.Text = {\r\n        text_color: [p.Color, \"#444444\"],\r\n        text_alpha: [p.Number, 1.0],\r\n        text_font: [p.Font, \"helvetica\"],\r\n        text_font_size: [p.FontSize, \"16px\"],\r\n        text_font_style: [p.FontStyle, \"normal\"],\r\n        text_align: [p.TextAlign, \"left\"],\r\n        text_baseline: [p.TextBaseline, \"bottom\"],\r\n        text_line_height: [p.Number, 1.2],\r\n    };\r\n    exports.LineScalar = {\r\n        line_color: [p.ColorScalar, \"black\"],\r\n        line_alpha: [p.NumberScalar, 1.0],\r\n        line_width: [p.NumberScalar, 1],\r\n        line_join: [p.LineJoinScalar, \"bevel\"],\r\n        line_cap: [p.LineCapScalar, \"butt\"],\r\n        line_dash: [p.ArrayScalar, []],\r\n        line_dash_offset: [p.NumberScalar, 0],\r\n    };\r\n    exports.FillScalar = {\r\n        fill_color: [p.ColorScalar, \"gray\"],\r\n        fill_alpha: [p.NumberScalar, 1.0],\r\n    };\r\n    exports.HatchScalar = {\r\n        hatch_color: [p.ColorScalar, \"black\"],\r\n        hatch_alpha: [p.NumberScalar, 1.0],\r\n        hatch_scale: [p.NumberScalar, 12.0],\r\n        hatch_pattern: [p.NullStringScalar, null],\r\n        hatch_weight: [p.NumberScalar, 1.0],\r\n        hatch_extra: [p.AnyScalar, {}],\r\n    };\r\n    exports.TextScalar = {\r\n        text_color: [p.ColorScalar, \"#444444\"],\r\n        text_alpha: [p.NumberScalar, 1.0],\r\n        text_font: [p.Font, \"helvetica\"],\r\n        text_font_size: [p.FontSizeScalar, \"16px\"],\r\n        text_font_style: [p.FontStyleScalar, \"normal\"],\r\n        text_align: [p.TextAlignScalar, \"left\"],\r\n        text_baseline: [p.TextBaselineScalar, \"bottom\"],\r\n        text_line_height: [p.NumberScalar, 1.2],\r\n    };\r\n    exports.LineVector = {\r\n        line_color: [p.ColorSpec, \"black\"],\r\n        line_alpha: [p.NumberSpec, 1.0],\r\n        line_width: [p.NumberSpec, 1],\r\n        line_join: [p.LineJoin, \"bevel\"],\r\n        line_cap: [p.LineCap, \"butt\"],\r\n        line_dash: [p.Array, []],\r\n        line_dash_offset: [p.Number, 0],\r\n    };\r\n    exports.FillVector = {\r\n        fill_color: [p.ColorSpec, \"gray\"],\r\n        fill_alpha: [p.NumberSpec, 1.0],\r\n    };\r\n    exports.HatchVector = {\r\n        hatch_color: [p.ColorSpec, \"black\"],\r\n        hatch_alpha: [p.NumberSpec, 1.0],\r\n        hatch_scale: [p.NumberSpec, 12.0],\r\n        hatch_pattern: [p.NullStringSpec, null],\r\n        hatch_weight: [p.NumberSpec, 1.0],\r\n        hatch_extra: [p.Any, {}],\r\n    };\r\n    exports.TextVector = {\r\n        text_color: [p.ColorSpec, \"#444444\"],\r\n        text_alpha: [p.NumberSpec, 1.0],\r\n        text_font: [p.Font, \"helvetica\"],\r\n        text_font_size: [p.FontSizeSpec, \"16px\"],\r\n        text_font_style: [p.FontStyle, \"normal\"],\r\n        text_align: [p.TextAlign, \"left\"],\r\n        text_baseline: [p.TextBaseline, \"bottom\"],\r\n        text_line_height: [p.Number, 1.2],\r\n    };\r\n}\r\n","/* core\\util\\string.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var settings_1 = require(142) /* ../settings */;\r\n    function startsWith(str, searchString, position) {\r\n        if (position === void 0) {\r\n            position = 0;\r\n        }\r\n        return str.substr(position, searchString.length) == searchString;\r\n    }\r\n    exports.startsWith = startsWith;\r\n    function uuid4() {\r\n        // from ipython project\r\n        // http://www.ietf.org/rfc/rfc4122.txt\r\n        var s = new Array(32);\r\n        var hexDigits = \"0123456789ABCDEF\";\r\n        for (var i = 0; i < 32; i++) {\r\n            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n        }\r\n        s[12] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\r\n        s[16] = hexDigits.substr((s[16].charCodeAt(0) & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n        return s.join(\"\");\r\n    }\r\n    exports.uuid4 = uuid4;\r\n    var counter = 1000;\r\n    function uniqueId(prefix) {\r\n        var id = settings_1.settings.dev ? \"j\" + counter++ : uuid4();\r\n        if (prefix != null)\r\n            return prefix + \"-\" + id;\r\n        else\r\n            return id;\r\n    }\r\n    exports.uniqueId = uniqueId;\r\n    function escape(s) {\r\n        return s.replace(/(?:[&<>\"'`])/g, function (ch) {\r\n            switch (ch) {\r\n                case '&': return '&amp;';\r\n                case '<': return '&lt;';\r\n                case '>': return '&gt;';\r\n                case '\"': return '&quot;';\r\n                case \"'\": return '&#x27;';\r\n                case '`': return '&#x60;';\r\n                default: return ch;\r\n            }\r\n        });\r\n    }\r\n    exports.escape = escape;\r\n    function unescape(s) {\r\n        return s.replace(/&(amp|lt|gt|quot|#x27|#x60);/g, function (_, entity) {\r\n            switch (entity) {\r\n                case 'amp': return '&';\r\n                case 'lt': return '<';\r\n                case 'gt': return '>';\r\n                case 'quot': return '\"';\r\n                case '#x27': return \"'\";\r\n                case '#x60': return '`';\r\n                default: return entity;\r\n            }\r\n        });\r\n    }\r\n    exports.unescape = unescape;\r\n    function use_strict(code) {\r\n        return \"'use strict';\\n\" + code;\r\n    }\r\n    exports.use_strict = use_strict;\r\n}\r\n","/* core\\util\\ndarray.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(123) /* ./types */;\r\n    var assert_1 = require(126) /* ./assert */;\r\n    var eq_1 = require(140) /* ./eq */;\r\n    var __ndarray__ = Symbol(\"__ndarray__\");\r\n    var Uint8NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Uint8NDArray, _super);\r\n        function Uint8NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"uint8\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Uint8NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Uint8NDArray;\r\n    }(Uint8Array));\r\n    exports.Uint8NDArray = Uint8NDArray;\r\n    Uint8NDArray.__name__ = \"Uint8NDArray\";\r\n    var Int8NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Int8NDArray, _super);\r\n        function Int8NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"int8\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Int8NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Int8NDArray;\r\n    }(Int8Array));\r\n    exports.Int8NDArray = Int8NDArray;\r\n    Int8NDArray.__name__ = \"Int8NDArray\";\r\n    var Uint16NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Uint16NDArray, _super);\r\n        function Uint16NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"uint16\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Uint16NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Uint16NDArray;\r\n    }(Uint16Array));\r\n    exports.Uint16NDArray = Uint16NDArray;\r\n    Uint16NDArray.__name__ = \"Uint16NDArray\";\r\n    var Int16NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Int16NDArray, _super);\r\n        function Int16NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"int16\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Int16NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Int16NDArray;\r\n    }(Int16Array));\r\n    exports.Int16NDArray = Int16NDArray;\r\n    Int16NDArray.__name__ = \"Int16NDArray\";\r\n    var Uint32NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Uint32NDArray, _super);\r\n        function Uint32NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"uint32\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Uint32NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Uint32NDArray;\r\n    }(Uint32Array));\r\n    exports.Uint32NDArray = Uint32NDArray;\r\n    Uint32NDArray.__name__ = \"Uint32NDArray\";\r\n    var Int32NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Int32NDArray, _super);\r\n        function Int32NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"int32\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Int32NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Int32NDArray;\r\n    }(Int32Array));\r\n    exports.Int32NDArray = Int32NDArray;\r\n    Int32NDArray.__name__ = \"Int32NDArray\";\r\n    var Float32NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Float32NDArray, _super);\r\n        function Float32NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"float32\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Float32NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Float32NDArray;\r\n    }(Float32Array));\r\n    exports.Float32NDArray = Float32NDArray;\r\n    Float32NDArray.__name__ = \"Float32NDArray\";\r\n    var Float64NDArray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Float64NDArray, _super);\r\n        function Float64NDArray(seq, shape) {\r\n            var _this = new _super(seq);\r\n            _this.__ndarray__ = __ndarray__;\r\n            _this.dtype = \"float64\";\r\n            _this.shape = shape !== null && shape !== void 0 ? shape : (is_NDArray(seq) ? seq.shape : [_this.length]);\r\n            _this.dimension = _this.shape.length;\r\n            return _this;\r\n        }\r\n        Float64NDArray.prototype[eq_1.equals] = function (that, cmp) {\r\n            return cmp.eq(this.shape, that.shape) && cmp.arrays(this, that);\r\n        };\r\n        return Float64NDArray;\r\n    }(Float64Array));\r\n    exports.Float64NDArray = Float64NDArray;\r\n    Float64NDArray.__name__ = \"Float64NDArray\";\r\n    function is_NDArray(v) {\r\n        return types_1.isObject(v) && v.__ndarray__ == __ndarray__;\r\n    }\r\n    exports.is_NDArray = is_NDArray;\r\n    function ndarray(array, options) {\r\n        if (options === void 0) {\r\n            options = {};\r\n        }\r\n        var dtype = options.dtype;\r\n        if (dtype == null) {\r\n            if (array instanceof ArrayBuffer || types_1.isArray(array)) {\r\n                dtype = \"float32\";\r\n            }\r\n            else {\r\n                dtype = (function () {\r\n                    switch (true) {\r\n                        case array instanceof Uint8Array: return \"uint8\";\r\n                        case array instanceof Int8Array: return \"int8\";\r\n                        case array instanceof Uint16Array: return \"uint16\";\r\n                        case array instanceof Int16Array: return \"int16\";\r\n                        case array instanceof Uint32Array: return \"uint32\";\r\n                        case array instanceof Int32Array: return \"int32\";\r\n                        case array instanceof Float32Array: return \"float32\";\r\n                        case array instanceof Float64Array: return \"float64\";\r\n                        default:\r\n                            assert_1.unreachable();\r\n                    }\r\n                })();\r\n            }\r\n        }\r\n        var shape = options.shape;\r\n        switch (dtype) {\r\n            case \"uint8\": return new Uint8NDArray(array, shape);\r\n            case \"int8\": return new Int8NDArray(array, shape);\r\n            case \"uint16\": return new Uint16NDArray(array, shape);\r\n            case \"int16\": return new Int16NDArray(array, shape);\r\n            case \"uint32\": return new Uint32NDArray(array, shape);\r\n            case \"int32\": return new Int32NDArray(array, shape);\r\n            case \"float32\": return new Float32NDArray(array, shape);\r\n            case \"float64\": return new Float64NDArray(array, shape);\r\n        }\r\n    }\r\n    exports.ndarray = ndarray;\r\n}\r\n","/* core\\util\\serialization.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(123) /* ./types */;\r\n    var compat_1 = require(147) /* ./compat */;\r\n    var ndarray = tslib_1.__importStar(require(145) /* ./ndarray */);\r\n    function buffer_to_base64(buffer) {\r\n        var bytes = new Uint8Array(buffer);\r\n        var chars = Array.from(bytes).map(function (b) { return String.fromCharCode(b); });\r\n        return btoa(chars.join(\"\"));\r\n    }\r\n    exports.buffer_to_base64 = buffer_to_base64;\r\n    function base64_to_buffer(base64) {\r\n        var binary_string = atob(base64);\r\n        var len = binary_string.length;\r\n        var bytes = new Uint8Array(len);\r\n        for (var i = 0, end = len; i < end; i++) {\r\n            bytes[i] = binary_string.charCodeAt(i);\r\n        }\r\n        return bytes.buffer;\r\n    }\r\n    exports.base64_to_buffer = base64_to_buffer;\r\n    exports.BYTE_ORDER = compat_1.is_little_endian ? \"little\" : \"big\";\r\n    function swap16(a) {\r\n        var x = new Uint8Array(a.buffer, a.byteOffset, a.length * 2);\r\n        for (var i = 0, end = x.length; i < end; i += 2) {\r\n            var t = x[i];\r\n            x[i] = x[i + 1];\r\n            x[i + 1] = t;\r\n        }\r\n    }\r\n    exports.swap16 = swap16;\r\n    function swap32(a) {\r\n        var x = new Uint8Array(a.buffer, a.byteOffset, a.length * 4);\r\n        for (var i = 0, end = x.length; i < end; i += 4) {\r\n            var t = x[i];\r\n            x[i] = x[i + 3];\r\n            x[i + 3] = t;\r\n            t = x[i + 1];\r\n            x[i + 1] = x[i + 2];\r\n            x[i + 2] = t;\r\n        }\r\n    }\r\n    exports.swap32 = swap32;\r\n    function swap64(a) {\r\n        var x = new Uint8Array(a.buffer, a.byteOffset, a.length * 8);\r\n        for (var i = 0, end = x.length; i < end; i += 8) {\r\n            var t = x[i];\r\n            x[i] = x[i + 7];\r\n            x[i + 7] = t;\r\n            t = x[i + 1];\r\n            x[i + 1] = x[i + 6];\r\n            x[i + 6] = t;\r\n            t = x[i + 2];\r\n            x[i + 2] = x[i + 5];\r\n            x[i + 5] = t;\r\n            t = x[i + 3];\r\n            x[i + 3] = x[i + 4];\r\n            x[i + 4] = t;\r\n        }\r\n    }\r\n    exports.swap64 = swap64;\r\n    function is_NDArray_ref(v) {\r\n        return types_1.isPlainObject(v) && (\"__buffer__\" in v || \"__ndarray__\" in v);\r\n    }\r\n    exports.is_NDArray_ref = is_NDArray_ref;\r\n    function decode_NDArray(ref, buffers) {\r\n        var shape = ref.shape, dtype = ref.dtype, order = ref.order;\r\n        var bytes;\r\n        if (\"__buffer__\" in ref) {\r\n            var buffer = buffers.get(ref.__buffer__);\r\n            if (buffer != null)\r\n                bytes = buffer;\r\n            else\r\n                throw new Error(\"buffer for \" + ref.__buffer__ + \" not found\");\r\n        }\r\n        else {\r\n            bytes = base64_to_buffer(ref.__ndarray__);\r\n        }\r\n        var array = (function () {\r\n            switch (dtype) {\r\n                case \"uint8\": return new ndarray.Uint8NDArray(bytes, shape);\r\n                case \"int8\": return new ndarray.Int8NDArray(bytes, shape);\r\n                case \"uint16\": return new ndarray.Uint16NDArray(bytes, shape);\r\n                case \"int16\": return new ndarray.Int16NDArray(bytes, shape);\r\n                case \"uint32\": return new ndarray.Uint32NDArray(bytes, shape);\r\n                case \"int32\": return new ndarray.Int32NDArray(bytes, shape);\r\n                case \"float32\": return new ndarray.Float32NDArray(bytes, shape);\r\n                case \"float64\": return new ndarray.Float64NDArray(bytes, shape);\r\n            }\r\n        })();\r\n        if (order !== exports.BYTE_ORDER) {\r\n            switch (array.BYTES_PER_ELEMENT) {\r\n                case 2:\r\n                    swap16(array);\r\n                    break;\r\n                case 4:\r\n                    swap32(array);\r\n                    break;\r\n                case 8:\r\n                    swap64(array);\r\n                    break;\r\n            }\r\n        }\r\n        return array;\r\n    }\r\n    exports.decode_NDArray = decode_NDArray;\r\n    function encode_NDArray(array, buffers) {\r\n        var data = {\r\n            order: exports.BYTE_ORDER,\r\n            dtype: array.dtype,\r\n            shape: array.shape,\r\n        };\r\n        if (buffers != null) {\r\n            var __buffer__ = \"\" + buffers.size;\r\n            buffers.set(__buffer__, array.buffer);\r\n            return Object.assign({ __buffer__: __buffer__ }, data);\r\n        }\r\n        else {\r\n            var __ndarray__ = buffer_to_base64(array.buffer);\r\n            return Object.assign({ __ndarray__: __ndarray__ }, data);\r\n        }\r\n    }\r\n    exports.encode_NDArray = encode_NDArray;\r\n}\r\n","/* core\\util\\compat.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.is_ie = (function () {\r\n        var ua = typeof navigator !== \"undefined\" ? navigator.userAgent : \"\";\r\n        return ua.indexOf('MSIE') >= 0 || ua.indexOf('Trident') > 0 || ua.indexOf('Edge') > 0;\r\n    })();\r\n    exports.is_mobile = (function () {\r\n        return typeof window !== \"undefined\" && (\"ontouchstart\" in window || navigator.maxTouchPoints > 0);\r\n    })();\r\n    exports.is_little_endian = (function () {\r\n        var buf = new ArrayBuffer(4);\r\n        var buf8 = new Uint8Array(buf);\r\n        var buf32 = new Uint32Array(buf);\r\n        buf32[1] = 0x0a0b0c0d;\r\n        var little_endian = true;\r\n        if (buf8[4] == 0x0a && buf8[5] == 0x0b && buf8[6] == 0x0c && buf8[7] == 0x0d) {\r\n            little_endian = false;\r\n        }\r\n        return little_endian;\r\n    })();\r\n}\r\n","/* core\\util\\pretty.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(123) /* ./types */;\r\n    var object_1 = require(128) /* ./object */;\r\n    exports.pretty = Symbol(\"pretty\");\r\n    function isPrintable(obj) {\r\n        return exports.pretty in Object(obj);\r\n    }\r\n    var Printer = /** @class */ (function () {\r\n        function Printer(options) {\r\n            this.precision = options === null || options === void 0 ? void 0 : options.precision;\r\n        }\r\n        Printer.prototype.to_string = function (obj) {\r\n            if (isPrintable(obj))\r\n                return obj[exports.pretty](this);\r\n            else if (types_1.isBoolean(obj))\r\n                return this.boolean(obj);\r\n            else if (types_1.isNumber(obj))\r\n                return this.number(obj);\r\n            else if (types_1.isString(obj))\r\n                return this.string(obj);\r\n            else if (types_1.isArray(obj))\r\n                return this.array(obj);\r\n            else if (types_1.isIterable(obj))\r\n                return this.iterable(obj);\r\n            else if (types_1.isPlainObject(obj))\r\n                return this.object(obj);\r\n            else\r\n                return \"\" + obj;\r\n        };\r\n        Printer.prototype.token = function (val) {\r\n            return val;\r\n        };\r\n        Printer.prototype.boolean = function (val) {\r\n            return \"\" + val;\r\n        };\r\n        Printer.prototype.number = function (val) {\r\n            if (this.precision != null)\r\n                return val.toFixed(this.precision);\r\n            else\r\n                return \"\" + val;\r\n        };\r\n        Printer.prototype.string = function (val) {\r\n            return \"\\\"\" + val.replace(/'/g, \"\\\\'\") + \"\\\"\"; // lgtm [js/incomplete-sanitization]\r\n        };\r\n        Printer.prototype.array = function (obj) {\r\n            var e_1, _b;\r\n            var T = this.token;\r\n            var items = [];\r\n            try {\r\n                for (var obj_1 = tslib_1.__values(obj), obj_1_1 = obj_1.next(); !obj_1_1.done; obj_1_1 = obj_1.next()) {\r\n                    var entry = obj_1_1.value;\r\n                    items.push(this.to_string(entry));\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (obj_1_1 && !obj_1_1.done && (_b = obj_1.return))\r\n                        _b.call(obj_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return \"\" + T(\"[\") + items.join(T(\",\") + \" \") + T(\"]\");\r\n        };\r\n        Printer.prototype.iterable = function (obj) {\r\n            var _a;\r\n            var T = this.token;\r\n            var tag = (_a = Object(obj)[Symbol.toStringTag]) !== null && _a !== void 0 ? _a : \"Object\";\r\n            var items = this.array(obj);\r\n            return \"\" + tag + T(\"(\") + items + T(\")\");\r\n        };\r\n        Printer.prototype.object = function (obj) {\r\n            var e_2, _b;\r\n            var T = this.token;\r\n            var items = [];\r\n            try {\r\n                for (var _c = tslib_1.__values(object_1.entries(obj)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), key = _e[0], val = _e[1];\r\n                    items.push(\"\" + key + T(\":\") + \" \" + this.to_string(val));\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return \"\" + T(\"{\") + items.join(T(\",\") + \" \") + T(\"}\");\r\n        };\r\n        return Printer;\r\n    }());\r\n    exports.Printer = Printer;\r\n    Printer.__name__ = \"Printer\";\r\n    function to_string(obj, options) {\r\n        var printer = new Printer(options);\r\n        return printer.to_string(obj);\r\n    }\r\n    exports.to_string = to_string;\r\n}\r\n","/* models\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    tslib_1.__exportStar(require(150) /* ./annotations */, exports);\r\n    tslib_1.__exportStar(require(291) /* ./axes */, exports);\r\n    tslib_1.__exportStar(require(318) /* ./callbacks */, exports);\r\n    tslib_1.__exportStar(require(322) /* ./canvas */, exports);\r\n    tslib_1.__exportStar(require(333) /* ./expressions */, exports);\r\n    tslib_1.__exportStar(require(337) /* ./filters */, exports);\r\n    tslib_1.__exportStar(require(343) /* ./formatters */, exports);\r\n    tslib_1.__exportStar(require(347) /* ./glyphs */, exports);\r\n    tslib_1.__exportStar(require(380) /* ./graphs */, exports);\r\n    tslib_1.__exportStar(require(383) /* ./grids */, exports);\r\n    tslib_1.__exportStar(require(385) /* ./layouts */, exports);\r\n    tslib_1.__exportStar(require(247) /* ./mappers */, exports);\r\n    tslib_1.__exportStar(require(263) /* ./transforms */, exports);\r\n    tslib_1.__exportStar(require(402) /* ./markers */, exports);\r\n    tslib_1.__exportStar(require(406) /* ./plots */, exports);\r\n    tslib_1.__exportStar(require(435) /* ./ranges */, exports);\r\n    tslib_1.__exportStar(require(436) /* ./renderers */, exports);\r\n    tslib_1.__exportStar(require(437) /* ./scales */, exports);\r\n    tslib_1.__exportStar(require(438) /* ./selections */, exports);\r\n    tslib_1.__exportStar(require(439) /* ./sources */, exports);\r\n    tslib_1.__exportStar(require(444) /* ./tickers */, exports);\r\n    tslib_1.__exportStar(require(446) /* ./tiles */, exports);\r\n    tslib_1.__exportStar(require(457) /* ./textures */, exports);\r\n    tslib_1.__exportStar(require(461) /* ./tools */, exports);\r\n}\r\n","/* models\\annotations\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    exports.Annotation = annotation_1.Annotation;\r\n    var arrow_1 = require(198) /* ./arrow */;\r\n    exports.Arrow = arrow_1.Arrow;\r\n    var arrow_head_1 = require(199) /* ./arrow_head */;\r\n    exports.ArrowHead = arrow_head_1.ArrowHead;\r\n    var arrow_head_2 = require(199) /* ./arrow_head */;\r\n    exports.OpenHead = arrow_head_2.OpenHead;\r\n    var arrow_head_3 = require(199) /* ./arrow_head */;\r\n    exports.NormalHead = arrow_head_3.NormalHead;\r\n    var arrow_head_4 = require(199) /* ./arrow_head */;\r\n    exports.TeeHead = arrow_head_4.TeeHead;\r\n    var arrow_head_5 = require(199) /* ./arrow_head */;\r\n    exports.VeeHead = arrow_head_5.VeeHead;\r\n    var band_1 = require(237) /* ./band */;\r\n    exports.Band = band_1.Band;\r\n    var box_annotation_1 = require(239) /* ./box_annotation */;\r\n    exports.BoxAnnotation = box_annotation_1.BoxAnnotation;\r\n    var color_bar_1 = require(240) /* ./color_bar */;\r\n    exports.ColorBar = color_bar_1.ColorBar;\r\n    var label_1 = require(275) /* ./label */;\r\n    exports.Label = label_1.Label;\r\n    var label_set_1 = require(277) /* ./label_set */;\r\n    exports.LabelSet = label_set_1.LabelSet;\r\n    var legend_1 = require(278) /* ./legend */;\r\n    exports.Legend = legend_1.Legend;\r\n    var legend_item_1 = require(279) /* ./legend_item */;\r\n    exports.LegendItem = legend_item_1.LegendItem;\r\n    var poly_annotation_1 = require(281) /* ./poly_annotation */;\r\n    exports.PolyAnnotation = poly_annotation_1.PolyAnnotation;\r\n    var slope_1 = require(282) /* ./slope */;\r\n    exports.Slope = slope_1.Slope;\r\n    var span_1 = require(283) /* ./span */;\r\n    exports.Span = span_1.Span;\r\n    var text_annotation_1 = require(276) /* ./text_annotation */;\r\n    exports.TextAnnotation = text_annotation_1.TextAnnotation;\r\n    var title_1 = require(284) /* ./title */;\r\n    exports.Title = title_1.Title;\r\n    var toolbar_panel_1 = require(285) /* ./toolbar_panel */;\r\n    exports.ToolbarPanel = toolbar_panel_1.ToolbarPanel;\r\n    var tooltip_1 = require(286) /* ./tooltip */;\r\n    exports.Tooltip = tooltip_1.Tooltip;\r\n    var whisker_1 = require(290) /* ./whisker */;\r\n    exports.Whisker = whisker_1.Whisker;\r\n}\r\n","/* models\\annotations\\annotation.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var proj = tslib_1.__importStar(require(152) /* ../../core/util/projections */);\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var renderer_1 = require(185) /* ../renderers/renderer */;\r\n    var AnnotationView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AnnotationView, _super);\r\n        function AnnotationView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(AnnotationView.prototype, \"panel\", {\r\n            get: function () {\r\n                return this.layout;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        AnnotationView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            var p = this.model.properties;\r\n            this.on_change(p.visible, function () { return _this.plot_view.request_layout(); });\r\n        };\r\n        AnnotationView.prototype.get_size = function () {\r\n            if (this.model.visible) {\r\n                var _a = this._get_size(), width = _a.width, height = _a.height;\r\n                return { width: Math.round(width), height: Math.round(height) };\r\n            }\r\n            else\r\n                return { width: 0, height: 0 };\r\n        };\r\n        AnnotationView.prototype._get_size = function () {\r\n            throw new Error(\"not implemented\");\r\n        };\r\n        AnnotationView.prototype.set_data = function (source) {\r\n            var _a, _b;\r\n            var data = this.model.materialize_dataspecs(source);\r\n            object_1.extend(this, data);\r\n            if (this.plot_model.use_map) {\r\n                var self = this;\r\n                if (self._x != null)\r\n                    _a = tslib_1.__read(proj.project_xy(self._x, self._y), 2), self._x = _a[0], self._y = _a[1];\r\n                if (self._xs != null)\r\n                    _b = tslib_1.__read(proj.project_xsys(self._xs, self._ys), 2), self._xs = _b[0], self._ys = _b[1];\r\n            }\r\n        };\r\n        Object.defineProperty(AnnotationView.prototype, \"needs_clip\", {\r\n            get: function () {\r\n                return this.layout == null; // TODO: change this, when center layout is fully implemented\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        AnnotationView.prototype.serializable_state = function () {\r\n            var state = _super.prototype.serializable_state.call(this);\r\n            return this.layout == null ? state : Object.assign(Object.assign({}, state), { bbox: this.layout.bbox.box });\r\n        };\r\n        return AnnotationView;\r\n    }(renderer_1.RendererView));\r\n    exports.AnnotationView = AnnotationView;\r\n    AnnotationView.__name__ = \"AnnotationView\";\r\n    var Annotation = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Annotation, _super);\r\n        function Annotation(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Annotation.init_Annotation = function () {\r\n            this.override({\r\n                level: 'annotation',\r\n            });\r\n        };\r\n        return Annotation;\r\n    }(renderer_1.Renderer));\r\n    exports.Annotation = Annotation;\r\n    Annotation.__name__ = \"Annotation\";\r\n    Annotation.init_Annotation();\r\n}\r\n","/* core\\util\\projections.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var core_1 = tslib_1.__importDefault(require(153) /* proj4/lib/core */);\r\n    var Proj_1 = tslib_1.__importDefault(require(154) /* proj4/lib/Proj */);\r\n    var types_1 = require(139) /* ../types */;\r\n    var mercator = new Proj_1.default('GOOGLE');\r\n    var wgs84 = new Proj_1.default('WGS84');\r\n    var _wgs84_mercator = core_1.default(wgs84, mercator);\r\n    exports.wgs84_mercator = {\r\n        compute: function (x, y) {\r\n            if (isFinite(x) && isFinite(y))\r\n                return _wgs84_mercator.forward([x, y]);\r\n            else\r\n                return [NaN, NaN];\r\n        },\r\n        invert: function (merc_x, merc_y) {\r\n            if (isFinite(merc_x) && isFinite(merc_y))\r\n                return _wgs84_mercator.inverse([merc_x, merc_y]);\r\n            else\r\n                return [NaN, NaN];\r\n        },\r\n    };\r\n    var mercator_bounds = {\r\n        lon: [-20026376.39, 20026376.39],\r\n        lat: [-20048966.10, 20048966.10],\r\n    };\r\n    var latlon_bounds = {\r\n        lon: [-180, 180],\r\n        lat: [-85.06, 85.06],\r\n    };\r\n    var min = Math.min, max = Math.max;\r\n    function clip_mercator(low, high, dimension) {\r\n        var _a = tslib_1.__read(mercator_bounds[dimension], 2), vmin = _a[0], vmax = _a[1];\r\n        return [max(low, vmin), min(high, vmax)];\r\n    }\r\n    exports.clip_mercator = clip_mercator;\r\n    function in_bounds(value, dimension) {\r\n        var _a = tslib_1.__read(latlon_bounds[dimension], 2), min = _a[0], max = _a[1];\r\n        return min < value && value < max;\r\n    }\r\n    exports.in_bounds = in_bounds;\r\n    (function (inplace) {\r\n        function project_xy(x, y, merc_x, merc_y) {\r\n            var n = min(x.length, y.length);\r\n            merc_x = merc_x !== null && merc_x !== void 0 ? merc_x : x;\r\n            merc_y = merc_y !== null && merc_y !== void 0 ? merc_y : y;\r\n            for (var i = 0; i < n; i++) {\r\n                var xi = x[i];\r\n                var yi = y[i];\r\n                var _a = tslib_1.__read(exports.wgs84_mercator.compute(xi, yi), 2), merc_xi = _a[0], merc_yi = _a[1];\r\n                merc_x[i] = merc_xi;\r\n                merc_y[i] = merc_yi;\r\n            }\r\n        }\r\n        inplace.project_xy = project_xy;\r\n        function project_xsys(xs, ys, merc_xs, merc_ys) {\r\n            var n = min(xs.length, ys.length);\r\n            merc_xs = merc_xs !== null && merc_xs !== void 0 ? merc_xs : xs;\r\n            merc_ys = merc_ys !== null && merc_ys !== void 0 ? merc_ys : ys;\r\n            for (var i = 0; i < n; i++) {\r\n                project_xy(xs[i], ys[i], merc_xs[i], merc_ys[i]);\r\n            }\r\n        }\r\n        inplace.project_xsys = project_xsys;\r\n    })(exports.inplace || (exports.inplace = {}));\r\n    function project_xy(x, y) {\r\n        var n = min(x.length, y.length);\r\n        var merc_x = new types_1.NumberArray(n);\r\n        var merc_y = new types_1.NumberArray(n);\r\n        exports.inplace.project_xy(x, y, merc_x, merc_y);\r\n        return [merc_x, merc_y];\r\n    }\r\n    exports.project_xy = project_xy;\r\n    function project_xsys(xs, ys) {\r\n        var n = min(xs.length, ys.length);\r\n        var merc_xs = new Array(n);\r\n        var merc_ys = new Array(n);\r\n        for (var i = 0; i < n; i++) {\r\n            var _a = tslib_1.__read(project_xy(xs[i], ys[i]), 2), merc_x = _a[0], merc_y = _a[1];\r\n            merc_xs[i] = merc_x;\r\n            merc_ys[i] = merc_y;\r\n        }\r\n        return [merc_xs, merc_ys];\r\n    }\r\n    exports.project_xsys = project_xsys;\r\n}\r\n","/* proj4\\lib\\core.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var Proj_1 = tslib_1.__importDefault(require(154) /* ./Proj */);\r\n    var transform_1 = tslib_1.__importDefault(require(179) /* ./transform */);\r\n    var wgs84 = Proj_1.default('WGS84');\r\n    function transformer(from, to, coords) {\r\n        var transformedArray, out, keys;\r\n        if (Array.isArray(coords)) {\r\n            transformedArray = transform_1.default(from, to, coords) || { x: NaN, y: NaN };\r\n            if (coords.length > 2) {\r\n                if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\r\n                    if (typeof transformedArray.z === 'number') {\r\n                        return [transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.splice(3));\r\n                    }\r\n                    else {\r\n                        return [transformedArray.x, transformedArray.y, coords[2]].concat(coords.splice(3));\r\n                    }\r\n                }\r\n                else {\r\n                    return [transformedArray.x, transformedArray.y].concat(coords.splice(2));\r\n                }\r\n            }\r\n            else {\r\n                return [transformedArray.x, transformedArray.y];\r\n            }\r\n        }\r\n        else {\r\n            out = transform_1.default(from, to, coords);\r\n            keys = Object.keys(coords);\r\n            if (keys.length === 2) {\r\n                return out;\r\n            }\r\n            keys.forEach(function (key) {\r\n                if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\r\n                    if (key === 'x' || key === 'y' || key === 'z') {\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    if (key === 'x' || key === 'y') {\r\n                        return;\r\n                    }\r\n                }\r\n                out[key] = coords[key];\r\n            });\r\n            return out;\r\n        }\r\n    }\r\n    function checkProj(item) {\r\n        if (item instanceof Proj_1.default) {\r\n            return item;\r\n        }\r\n        if (item.oProj) {\r\n            return item.oProj;\r\n        }\r\n        return Proj_1.default(item);\r\n    }\r\n    function proj4(fromProj, toProj, coord) {\r\n        fromProj = checkProj(fromProj);\r\n        var single = false;\r\n        var obj;\r\n        if (typeof toProj === 'undefined') {\r\n            toProj = fromProj;\r\n            fromProj = wgs84;\r\n            single = true;\r\n        }\r\n        else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\r\n            coord = toProj;\r\n            toProj = fromProj;\r\n            fromProj = wgs84;\r\n            single = true;\r\n        }\r\n        toProj = checkProj(toProj);\r\n        if (coord) {\r\n            return transformer(fromProj, toProj, coord);\r\n        }\r\n        else {\r\n            obj = {\r\n                forward: function (coords) {\r\n                    return transformer(fromProj, toProj, coords);\r\n                },\r\n                inverse: function (coords) {\r\n                    return transformer(toProj, fromProj, coords);\r\n                }\r\n            };\r\n            if (single) {\r\n                obj.oProj = toProj;\r\n            }\r\n            return obj;\r\n        }\r\n    }\r\n    exports.default = proj4;\r\n}\r\n","/* proj4\\lib\\Proj.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var parseCode_1 = tslib_1.__importDefault(require(155) /* ./parseCode */);\r\n    var extend_1 = tslib_1.__importDefault(require(166) /* ./extend */);\r\n    var projections_1 = tslib_1.__importDefault(require(167) /* ./projections */);\r\n    var deriveConstants_1 = require(175) /* ./deriveConstants */;\r\n    var Datum_1 = tslib_1.__importDefault(require(177) /* ./constants/Datum */);\r\n    var datum_1 = tslib_1.__importDefault(require(178) /* ./datum */);\r\n    var match_1 = tslib_1.__importDefault(require(162) /* ./match */);\r\n    function Projection(srsCode, callback) {\r\n        if (!(this instanceof Projection)) {\r\n            return new Projection(srsCode);\r\n        }\r\n        callback = callback || function (error) {\r\n            if (error) {\r\n                throw error;\r\n            }\r\n        };\r\n        var json = parseCode_1.default(srsCode);\r\n        if (typeof json !== 'object') {\r\n            callback(srsCode);\r\n            return;\r\n        }\r\n        var ourProj = Projection.projections.get(json.projName);\r\n        if (!ourProj) {\r\n            callback(srsCode);\r\n            return;\r\n        }\r\n        if (json.datumCode && json.datumCode !== 'none') {\r\n            var datumDef = match_1.default(Datum_1.default, json.datumCode);\r\n            if (datumDef) {\r\n                json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\r\n                json.ellps = datumDef.ellipse;\r\n                json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\r\n            }\r\n        }\r\n        json.k0 = json.k0 || 1.0;\r\n        json.axis = json.axis || 'enu';\r\n        json.ellps = json.ellps || 'wgs84';\r\n        var sphere_ = deriveConstants_1.sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\r\n        var ecc = deriveConstants_1.eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\r\n        var datumObj = json.datum || datum_1.default(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\r\n        extend_1.default(this, json); // transfer everything over from the projection because we don't know what we'll need\r\n        extend_1.default(this, ourProj); // transfer all the methods from the projection\r\n        // copy the 4 things over we calulated in deriveConstants.sphere\r\n        this.a = sphere_.a;\r\n        this.b = sphere_.b;\r\n        this.rf = sphere_.rf;\r\n        this.sphere = sphere_.sphere;\r\n        // copy the 3 things we calculated in deriveConstants.eccentricity\r\n        this.es = ecc.es;\r\n        this.e = ecc.e;\r\n        this.ep2 = ecc.ep2;\r\n        // add in the datum object\r\n        this.datum = datumObj;\r\n        // init the projection\r\n        this.init();\r\n        // legecy callback from back in the day when it went to spatialreference.org\r\n        callback(null, this);\r\n    }\r\n    Projection.projections = projections_1.default;\r\n    Projection.projections.start();\r\n    exports.default = Projection;\r\n}\r\n","/* proj4\\lib\\parseCode.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var defs_1 = tslib_1.__importDefault(require(156) /* ./defs */);\r\n    var wkt_parser_1 = tslib_1.__importDefault(require(163) /* wkt-parser */);\r\n    var projString_1 = tslib_1.__importDefault(require(158) /* ./projString */);\r\n    var match_1 = tslib_1.__importDefault(require(162) /* ./match */);\r\n    function testObj(code) {\r\n        return typeof code === 'string';\r\n    }\r\n    function testDef(code) {\r\n        return code in defs_1.default;\r\n    }\r\n    var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS', 'GEOCCS', 'PROJCS', 'LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\r\n    function testWKT(code) {\r\n        return codeWords.some(function (word) {\r\n            return code.indexOf(word) > -1;\r\n        });\r\n    }\r\n    var codes = ['3857', '900913', '3785', '102113'];\r\n    function checkMercator(item) {\r\n        var auth = match_1.default(item, 'authority');\r\n        if (!auth) {\r\n            return;\r\n        }\r\n        var code = match_1.default(auth, 'epsg');\r\n        return code && codes.indexOf(code) > -1;\r\n    }\r\n    function checkProjStr(item) {\r\n        var ext = match_1.default(item, 'extension');\r\n        if (!ext) {\r\n            return;\r\n        }\r\n        return match_1.default(ext, 'proj4');\r\n    }\r\n    function testProj(code) {\r\n        return code[0] === '+';\r\n    }\r\n    function parse(code) {\r\n        if (testObj(code)) {\r\n            //check to see if this is a WKT string\r\n            if (testDef(code)) {\r\n                return defs_1.default[code];\r\n            }\r\n            if (testWKT(code)) {\r\n                var out = wkt_parser_1.default(code);\r\n                // test of spetial case, due to this being a very common and often malformed\r\n                if (checkMercator(out)) {\r\n                    return defs_1.default['EPSG:3857'];\r\n                }\r\n                var maybeProjStr = checkProjStr(out);\r\n                if (maybeProjStr) {\r\n                    return projString_1.default(maybeProjStr);\r\n                }\r\n                return out;\r\n            }\r\n            if (testProj(code)) {\r\n                return projString_1.default(code);\r\n            }\r\n        }\r\n        else {\r\n            return code;\r\n        }\r\n    }\r\n    exports.default = parse;\r\n}\r\n","/* proj4\\lib\\defs.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var global_1 = tslib_1.__importDefault(require(157) /* ./global */);\r\n    var projString_1 = tslib_1.__importDefault(require(158) /* ./projString */);\r\n    var wkt_parser_1 = tslib_1.__importDefault(require(163) /* wkt-parser */);\r\n    function defs(name) {\r\n        /*global console*/\r\n        var that = this;\r\n        if (arguments.length === 2) {\r\n            var def = arguments[1];\r\n            if (typeof def === 'string') {\r\n                if (def.charAt(0) === '+') {\r\n                    defs[name] = projString_1.default(arguments[1]);\r\n                }\r\n                else {\r\n                    defs[name] = wkt_parser_1.default(arguments[1]);\r\n                }\r\n            }\r\n            else {\r\n                defs[name] = def;\r\n            }\r\n        }\r\n        else if (arguments.length === 1) {\r\n            if (Array.isArray(name)) {\r\n                return name.map(function (v) {\r\n                    if (Array.isArray(v)) {\r\n                        defs.apply(that, v);\r\n                    }\r\n                    else {\r\n                        defs(v);\r\n                    }\r\n                });\r\n            }\r\n            else if (typeof name === 'string') {\r\n                if (name in defs) {\r\n                    return defs[name];\r\n                }\r\n            }\r\n            else if ('EPSG' in name) {\r\n                defs['EPSG:' + name.EPSG] = name;\r\n            }\r\n            else if ('ESRI' in name) {\r\n                defs['ESRI:' + name.ESRI] = name;\r\n            }\r\n            else if ('IAU2000' in name) {\r\n                defs['IAU2000:' + name.IAU2000] = name;\r\n            }\r\n            else {\r\n                console.log(name);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n    global_1.default(defs);\r\n    exports.default = defs;\r\n}\r\n","/* proj4\\lib\\global.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function default_1(defs) {\r\n        defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\r\n        defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\r\n        defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\r\n        defs.WGS84 = defs['EPSG:4326'];\r\n        defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\r\n        defs.GOOGLE = defs['EPSG:3857'];\r\n        defs['EPSG:900913'] = defs['EPSG:3857'];\r\n        defs['EPSG:102113'] = defs['EPSG:3857'];\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\projString.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var values_1 = require(159) /* ./constants/values */;\r\n    var PrimeMeridian_1 = tslib_1.__importDefault(require(160) /* ./constants/PrimeMeridian */);\r\n    var units_1 = tslib_1.__importDefault(require(161) /* ./constants/units */);\r\n    var match_1 = tslib_1.__importDefault(require(162) /* ./match */);\r\n    function default_1(defData) {\r\n        var self = {};\r\n        var paramObj = defData.split('+').map(function (v) {\r\n            return v.trim();\r\n        }).filter(function (a) {\r\n            return a;\r\n        }).reduce(function (p, a) {\r\n            var split = a.split('=');\r\n            split.push(true);\r\n            p[split[0].toLowerCase()] = split[1];\r\n            return p;\r\n        }, {});\r\n        var paramName, paramVal, paramOutname;\r\n        var params = {\r\n            proj: 'projName',\r\n            datum: 'datumCode',\r\n            rf: function (v) {\r\n                self.rf = parseFloat(v);\r\n            },\r\n            lat_0: function (v) {\r\n                self.lat0 = v * values_1.D2R;\r\n            },\r\n            lat_1: function (v) {\r\n                self.lat1 = v * values_1.D2R;\r\n            },\r\n            lat_2: function (v) {\r\n                self.lat2 = v * values_1.D2R;\r\n            },\r\n            lat_ts: function (v) {\r\n                self.lat_ts = v * values_1.D2R;\r\n            },\r\n            lon_0: function (v) {\r\n                self.long0 = v * values_1.D2R;\r\n            },\r\n            lon_1: function (v) {\r\n                self.long1 = v * values_1.D2R;\r\n            },\r\n            lon_2: function (v) {\r\n                self.long2 = v * values_1.D2R;\r\n            },\r\n            alpha: function (v) {\r\n                self.alpha = parseFloat(v) * values_1.D2R;\r\n            },\r\n            lonc: function (v) {\r\n                self.longc = v * values_1.D2R;\r\n            },\r\n            x_0: function (v) {\r\n                self.x0 = parseFloat(v);\r\n            },\r\n            y_0: function (v) {\r\n                self.y0 = parseFloat(v);\r\n            },\r\n            k_0: function (v) {\r\n                self.k0 = parseFloat(v);\r\n            },\r\n            k: function (v) {\r\n                self.k0 = parseFloat(v);\r\n            },\r\n            a: function (v) {\r\n                self.a = parseFloat(v);\r\n            },\r\n            b: function (v) {\r\n                self.b = parseFloat(v);\r\n            },\r\n            r_a: function () {\r\n                self.R_A = true;\r\n            },\r\n            zone: function (v) {\r\n                self.zone = parseInt(v, 10);\r\n            },\r\n            south: function () {\r\n                self.utmSouth = true;\r\n            },\r\n            towgs84: function (v) {\r\n                self.datum_params = v.split(\",\").map(function (a) {\r\n                    return parseFloat(a);\r\n                });\r\n            },\r\n            to_meter: function (v) {\r\n                self.to_meter = parseFloat(v);\r\n            },\r\n            units: function (v) {\r\n                self.units = v;\r\n                var unit = match_1.default(units_1.default, v);\r\n                if (unit) {\r\n                    self.to_meter = unit.to_meter;\r\n                }\r\n            },\r\n            from_greenwich: function (v) {\r\n                self.from_greenwich = v * values_1.D2R;\r\n            },\r\n            pm: function (v) {\r\n                var pm = match_1.default(PrimeMeridian_1.default, v);\r\n                self.from_greenwich = (pm ? pm : parseFloat(v)) * values_1.D2R;\r\n            },\r\n            nadgrids: function (v) {\r\n                if (v === '@null') {\r\n                    self.datumCode = 'none';\r\n                }\r\n                else {\r\n                    self.nadgrids = v;\r\n                }\r\n            },\r\n            axis: function (v) {\r\n                var legalAxis = \"ewnsud\";\r\n                if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\r\n                    self.axis = v;\r\n                }\r\n            }\r\n        };\r\n        for (paramName in paramObj) {\r\n            paramVal = paramObj[paramName];\r\n            if (paramName in params) {\r\n                paramOutname = params[paramName];\r\n                if (typeof paramOutname === 'function') {\r\n                    paramOutname(paramVal);\r\n                }\r\n                else {\r\n                    self[paramOutname] = paramVal;\r\n                }\r\n            }\r\n            else {\r\n                self[paramName] = paramVal;\r\n            }\r\n        }\r\n        if (typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\") {\r\n            self.datumCode = self.datumCode.toLowerCase();\r\n        }\r\n        return self;\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\constants\\values.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.PJD_3PARAM = 1;\r\n    exports.PJD_7PARAM = 2;\r\n    exports.PJD_WGS84 = 4; // WGS84 or equivalent\r\n    exports.PJD_NODATUM = 5; // WGS84 or equivalent\r\n    exports.SEC_TO_RAD = 4.84813681109535993589914102357e-6;\r\n    exports.HALF_PI = Math.PI / 2;\r\n    // ellipoid pj_set_ell.c\r\n    exports.SIXTH = 0.1666666666666666667;\r\n    /* 1/6 */\r\n    exports.RA4 = 0.04722222222222222222;\r\n    /* 17/360 */\r\n    exports.RA6 = 0.02215608465608465608;\r\n    exports.EPSLN = 1.0e-10;\r\n    // you'd think you could use Number.EPSILON above but that makes\r\n    // Mollweide get into an infinate loop.\r\n    exports.D2R = 0.01745329251994329577;\r\n    exports.R2D = 57.29577951308232088;\r\n    exports.FORTPI = Math.PI / 4;\r\n    exports.TWO_PI = Math.PI * 2;\r\n    // SPI is slightly greater than Math.PI, so values that exceed the -180..180\r\n    // degree range by a tiny amount don't get wrapped. This prevents points that\r\n    // have drifted from their original location along the 180th meridian (due to\r\n    // floating point error) from changing their sign.\r\n    exports.SPI = 3.14159265359;\r\n}\r\n","/* proj4\\lib\\constants\\PrimeMeridian.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var exports$1 = {};\r\n    exports.default = exports$1;\r\n    exports$1.greenwich = 0.0; //\"0dE\",\r\n    exports$1.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\r\n    exports$1.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\r\n    exports$1.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\r\n    exports$1.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\r\n    exports$1.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\r\n    exports$1.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\r\n    exports$1.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\r\n    exports$1.ferro = -17.666666666667; //\"17d40'W\",\r\n    exports$1.brussels = 4.367975; //\"4d22'4.71\\\"E\",\r\n    exports$1.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\r\n    exports$1.athens = 23.7163375; //\"23d42'58.815\\\"E\",\r\n    exports$1.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\r\n}\r\n","/* proj4\\lib\\constants\\units.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = {\r\n        ft: { to_meter: 0.3048 },\r\n        'us-ft': { to_meter: 1200 / 3937 }\r\n    };\r\n}\r\n","/* proj4\\lib\\match.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\r\n    function match(obj, key) {\r\n        if (obj[key]) {\r\n            return obj[key];\r\n        }\r\n        var keys = Object.keys(obj);\r\n        var lkey = key.toLowerCase().replace(ignoredChar, '');\r\n        var i = -1;\r\n        var testkey, processedKey;\r\n        while (++i < keys.length) {\r\n            testkey = keys[i];\r\n            processedKey = testkey.toLowerCase().replace(ignoredChar, '');\r\n            if (processedKey === lkey) {\r\n                return obj[testkey];\r\n            }\r\n        }\r\n    }\r\n    exports.default = match;\r\n}\r\n","/* wkt-parser\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var D2R = 0.01745329251994329577;\r\n    var parser_1 = tslib_1.__importDefault(require(164) /* ./parser */);\r\n    var process_1 = require(165) /* ./process */;\r\n    function rename(obj, params) {\r\n        var outName = params[0];\r\n        var inName = params[1];\r\n        if (!(outName in obj) && (inName in obj)) {\r\n            obj[outName] = obj[inName];\r\n            if (params.length === 3) {\r\n                obj[outName] = params[2](obj[outName]);\r\n            }\r\n        }\r\n    }\r\n    function d2r(input) {\r\n        return input * D2R;\r\n    }\r\n    function cleanWKT(wkt) {\r\n        if (wkt.type === 'GEOGCS') {\r\n            wkt.projName = 'longlat';\r\n        }\r\n        else if (wkt.type === 'LOCAL_CS') {\r\n            wkt.projName = 'identity';\r\n            wkt.local = true;\r\n        }\r\n        else {\r\n            if (typeof wkt.PROJECTION === 'object') {\r\n                wkt.projName = Object.keys(wkt.PROJECTION)[0];\r\n            }\r\n            else {\r\n                wkt.projName = wkt.PROJECTION;\r\n            }\r\n        }\r\n        if (wkt.AXIS) {\r\n            var axisOrder = '';\r\n            for (var i = 0, ii = wkt.AXIS.length; i < ii; ++i) {\r\n                var axis = wkt.AXIS[i];\r\n                var descriptor = axis[0].toLowerCase();\r\n                if (descriptor.indexOf('north') !== -1) {\r\n                    axisOrder += 'n';\r\n                }\r\n                else if (descriptor.indexOf('south') !== -1) {\r\n                    axisOrder += 's';\r\n                }\r\n                else if (descriptor.indexOf('east') !== -1) {\r\n                    axisOrder += 'e';\r\n                }\r\n                else if (descriptor.indexOf('west') !== -1) {\r\n                    axisOrder += 'w';\r\n                }\r\n            }\r\n            if (axisOrder.length === 2) {\r\n                axisOrder += 'u';\r\n            }\r\n            if (axisOrder.length === 3) {\r\n                wkt.axis = axisOrder;\r\n            }\r\n        }\r\n        if (wkt.UNIT) {\r\n            wkt.units = wkt.UNIT.name.toLowerCase();\r\n            if (wkt.units === 'metre') {\r\n                wkt.units = 'meter';\r\n            }\r\n            if (wkt.UNIT.convert) {\r\n                if (wkt.type === 'GEOGCS') {\r\n                    if (wkt.DATUM && wkt.DATUM.SPHEROID) {\r\n                        wkt.to_meter = wkt.UNIT.convert * wkt.DATUM.SPHEROID.a;\r\n                    }\r\n                }\r\n                else {\r\n                    wkt.to_meter = wkt.UNIT.convert;\r\n                }\r\n            }\r\n        }\r\n        var geogcs = wkt.GEOGCS;\r\n        if (wkt.type === 'GEOGCS') {\r\n            geogcs = wkt;\r\n        }\r\n        if (geogcs) {\r\n            //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\r\n            //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\r\n            //}\r\n            if (geogcs.DATUM) {\r\n                wkt.datumCode = geogcs.DATUM.name.toLowerCase();\r\n            }\r\n            else {\r\n                wkt.datumCode = geogcs.name.toLowerCase();\r\n            }\r\n            if (wkt.datumCode.slice(0, 2) === 'd_') {\r\n                wkt.datumCode = wkt.datumCode.slice(2);\r\n            }\r\n            if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\r\n                wkt.datumCode = 'nzgd49';\r\n            }\r\n            if (wkt.datumCode === 'wgs_1984' || wkt.datumCode === 'world_geodetic_system_1984') {\r\n                if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\r\n                    wkt.sphere = true;\r\n                }\r\n                wkt.datumCode = 'wgs84';\r\n            }\r\n            if (wkt.datumCode.slice(-6) === '_ferro') {\r\n                wkt.datumCode = wkt.datumCode.slice(0, -6);\r\n            }\r\n            if (wkt.datumCode.slice(-8) === '_jakarta') {\r\n                wkt.datumCode = wkt.datumCode.slice(0, -8);\r\n            }\r\n            if (~wkt.datumCode.indexOf('belge')) {\r\n                wkt.datumCode = 'rnb72';\r\n            }\r\n            if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\r\n                wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\r\n                if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\r\n                    wkt.ellps = 'intl';\r\n                }\r\n                wkt.a = geogcs.DATUM.SPHEROID.a;\r\n                wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\r\n            }\r\n            if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\r\n                wkt.datum_params = geogcs.DATUM.TOWGS84;\r\n            }\r\n            if (~wkt.datumCode.indexOf('osgb_1936')) {\r\n                wkt.datumCode = 'osgb36';\r\n            }\r\n            if (~wkt.datumCode.indexOf('osni_1952')) {\r\n                wkt.datumCode = 'osni52';\r\n            }\r\n            if (~wkt.datumCode.indexOf('tm65')\r\n                || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\r\n                wkt.datumCode = 'ire65';\r\n            }\r\n            if (wkt.datumCode === 'ch1903+') {\r\n                wkt.datumCode = 'ch1903';\r\n            }\r\n            if (~wkt.datumCode.indexOf('israel')) {\r\n                wkt.datumCode = 'isr93';\r\n            }\r\n        }\r\n        if (wkt.b && !isFinite(wkt.b)) {\r\n            wkt.b = wkt.a;\r\n        }\r\n        function toMeter(input) {\r\n            var ratio = wkt.to_meter || 1;\r\n            return input * ratio;\r\n        }\r\n        var renamer = function (a) {\r\n            return rename(wkt, a);\r\n        };\r\n        var list = [\r\n            ['standard_parallel_1', 'Standard_Parallel_1'],\r\n            ['standard_parallel_2', 'Standard_Parallel_2'],\r\n            ['false_easting', 'False_Easting'],\r\n            ['false_northing', 'False_Northing'],\r\n            ['central_meridian', 'Central_Meridian'],\r\n            ['latitude_of_origin', 'Latitude_Of_Origin'],\r\n            ['latitude_of_origin', 'Central_Parallel'],\r\n            ['scale_factor', 'Scale_Factor'],\r\n            ['k0', 'scale_factor'],\r\n            ['latitude_of_center', 'Latitude_Of_Center'],\r\n            ['latitude_of_center', 'Latitude_of_center'],\r\n            ['lat0', 'latitude_of_center', d2r],\r\n            ['longitude_of_center', 'Longitude_Of_Center'],\r\n            ['longitude_of_center', 'Longitude_of_center'],\r\n            ['longc', 'longitude_of_center', d2r],\r\n            ['x0', 'false_easting', toMeter],\r\n            ['y0', 'false_northing', toMeter],\r\n            ['long0', 'central_meridian', d2r],\r\n            ['lat0', 'latitude_of_origin', d2r],\r\n            ['lat0', 'standard_parallel_1', d2r],\r\n            ['lat1', 'standard_parallel_1', d2r],\r\n            ['lat2', 'standard_parallel_2', d2r],\r\n            ['azimuth', 'Azimuth'],\r\n            ['alpha', 'azimuth', d2r],\r\n            ['srsCode', 'name']\r\n        ];\r\n        list.forEach(renamer);\r\n        if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\r\n            wkt.long0 = wkt.longc;\r\n        }\r\n        if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\r\n            wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\r\n            wkt.lat_ts = wkt.lat1;\r\n        }\r\n    }\r\n    function default_1(wkt) {\r\n        var lisp = parser_1.default(wkt);\r\n        var type = lisp.shift();\r\n        var name = lisp.shift();\r\n        lisp.unshift(['name', name]);\r\n        lisp.unshift(['type', type]);\r\n        var obj = {};\r\n        process_1.sExpr(lisp, obj);\r\n        cleanWKT(obj);\r\n        return obj;\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* wkt-parser\\parser.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.default = parseString;\r\n    var NEUTRAL = 1;\r\n    var KEYWORD = 2;\r\n    var NUMBER = 3;\r\n    var QUOTED = 4;\r\n    var AFTERQUOTE = 5;\r\n    var ENDED = -1;\r\n    var whitespace = /\\s/;\r\n    var latin = /[A-Za-z]/;\r\n    var keyword = /[A-Za-z84]/;\r\n    var endThings = /[,\\]]/;\r\n    var digets = /[\\d\\.E\\-\\+]/;\r\n    // const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\r\n    function Parser(text) {\r\n        if (typeof text !== 'string') {\r\n            throw new Error('not a string');\r\n        }\r\n        this.text = text.trim();\r\n        this.level = 0;\r\n        this.place = 0;\r\n        this.root = null;\r\n        this.stack = [];\r\n        this.currentObject = null;\r\n        this.state = NEUTRAL;\r\n    }\r\n    Parser.prototype.readCharicter = function () {\r\n        var char = this.text[this.place++];\r\n        if (this.state !== QUOTED) {\r\n            while (whitespace.test(char)) {\r\n                if (this.place >= this.text.length) {\r\n                    return;\r\n                }\r\n                char = this.text[this.place++];\r\n            }\r\n        }\r\n        switch (this.state) {\r\n            case NEUTRAL:\r\n                return this.neutral(char);\r\n            case KEYWORD:\r\n                return this.keyword(char);\r\n            case QUOTED:\r\n                return this.quoted(char);\r\n            case AFTERQUOTE:\r\n                return this.afterquote(char);\r\n            case NUMBER:\r\n                return this.number(char);\r\n            case ENDED:\r\n                return;\r\n        }\r\n    };\r\n    Parser.prototype.afterquote = function (char) {\r\n        if (char === '\"') {\r\n            this.word += '\"';\r\n            this.state = QUOTED;\r\n            return;\r\n        }\r\n        if (endThings.test(char)) {\r\n            this.word = this.word.trim();\r\n            this.afterItem(char);\r\n            return;\r\n        }\r\n        throw new Error('havn\\'t handled \"' + char + '\" in afterquote yet, index ' + this.place);\r\n    };\r\n    Parser.prototype.afterItem = function (char) {\r\n        if (char === ',') {\r\n            if (this.word !== null) {\r\n                this.currentObject.push(this.word);\r\n            }\r\n            this.word = null;\r\n            this.state = NEUTRAL;\r\n            return;\r\n        }\r\n        if (char === ']') {\r\n            this.level--;\r\n            if (this.word !== null) {\r\n                this.currentObject.push(this.word);\r\n                this.word = null;\r\n            }\r\n            this.state = NEUTRAL;\r\n            this.currentObject = this.stack.pop();\r\n            if (!this.currentObject) {\r\n                this.state = ENDED;\r\n            }\r\n            return;\r\n        }\r\n    };\r\n    Parser.prototype.number = function (char) {\r\n        if (digets.test(char)) {\r\n            this.word += char;\r\n            return;\r\n        }\r\n        if (endThings.test(char)) {\r\n            this.word = parseFloat(this.word);\r\n            this.afterItem(char);\r\n            return;\r\n        }\r\n        throw new Error('havn\\'t handled \"' + char + '\" in number yet, index ' + this.place);\r\n    };\r\n    Parser.prototype.quoted = function (char) {\r\n        if (char === '\"') {\r\n            this.state = AFTERQUOTE;\r\n            return;\r\n        }\r\n        this.word += char;\r\n        return;\r\n    };\r\n    Parser.prototype.keyword = function (char) {\r\n        if (keyword.test(char)) {\r\n            this.word += char;\r\n            return;\r\n        }\r\n        if (char === '[') {\r\n            var newObjects = [];\r\n            newObjects.push(this.word);\r\n            this.level++;\r\n            if (this.root === null) {\r\n                this.root = newObjects;\r\n            }\r\n            else {\r\n                this.currentObject.push(newObjects);\r\n            }\r\n            this.stack.push(this.currentObject);\r\n            this.currentObject = newObjects;\r\n            this.state = NEUTRAL;\r\n            return;\r\n        }\r\n        if (endThings.test(char)) {\r\n            this.afterItem(char);\r\n            return;\r\n        }\r\n        throw new Error('havn\\'t handled \"' + char + '\" in keyword yet, index ' + this.place);\r\n    };\r\n    Parser.prototype.neutral = function (char) {\r\n        if (latin.test(char)) {\r\n            this.word = char;\r\n            this.state = KEYWORD;\r\n            return;\r\n        }\r\n        if (char === '\"') {\r\n            this.word = '';\r\n            this.state = QUOTED;\r\n            return;\r\n        }\r\n        if (digets.test(char)) {\r\n            this.word = char;\r\n            this.state = NUMBER;\r\n            return;\r\n        }\r\n        if (endThings.test(char)) {\r\n            this.afterItem(char);\r\n            return;\r\n        }\r\n        throw new Error('havn\\'t handled \"' + char + '\" in neutral yet, index ' + this.place);\r\n    };\r\n    Parser.prototype.output = function () {\r\n        while (this.place < this.text.length) {\r\n            this.readCharicter();\r\n        }\r\n        if (this.state === ENDED) {\r\n            return this.root;\r\n        }\r\n        throw new Error('unable to parse string \"' + this.text + '\". State is ' + this.state);\r\n    };\r\n    function parseString(txt) {\r\n        var parser = new Parser(txt);\r\n        return parser.output();\r\n    }\r\n}\r\n","/* wkt-parser\\process.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function mapit(obj, key, value) {\r\n        if (Array.isArray(key)) {\r\n            value.unshift(key);\r\n            key = null;\r\n        }\r\n        var thing = key ? {} : obj;\r\n        var out = value.reduce(function (newObj, item) {\r\n            sExpr(item, newObj);\r\n            return newObj;\r\n        }, thing);\r\n        if (key) {\r\n            obj[key] = out;\r\n        }\r\n    }\r\n    function sExpr(v, obj) {\r\n        if (!Array.isArray(v)) {\r\n            obj[v] = true;\r\n            return;\r\n        }\r\n        var key = v.shift();\r\n        if (key === 'PARAMETER') {\r\n            key = v.shift();\r\n        }\r\n        if (v.length === 1) {\r\n            if (Array.isArray(v[0])) {\r\n                obj[key] = {};\r\n                sExpr(v[0], obj[key]);\r\n                return;\r\n            }\r\n            obj[key] = v[0];\r\n            return;\r\n        }\r\n        if (!v.length) {\r\n            obj[key] = true;\r\n            return;\r\n        }\r\n        if (key === 'TOWGS84') {\r\n            obj[key] = v;\r\n            return;\r\n        }\r\n        if (key === 'AXIS') {\r\n            if (!(key in obj)) {\r\n                obj[key] = [];\r\n            }\r\n            obj[key].push(v);\r\n            return;\r\n        }\r\n        if (!Array.isArray(key)) {\r\n            obj[key] = {};\r\n        }\r\n        var i;\r\n        switch (key) {\r\n            case 'UNIT':\r\n            case 'PRIMEM':\r\n            case 'VERT_DATUM':\r\n                obj[key] = {\r\n                    name: v[0].toLowerCase(),\r\n                    convert: v[1]\r\n                };\r\n                if (v.length === 3) {\r\n                    sExpr(v[2], obj[key]);\r\n                }\r\n                return;\r\n            case 'SPHEROID':\r\n            case 'ELLIPSOID':\r\n                obj[key] = {\r\n                    name: v[0],\r\n                    a: v[1],\r\n                    rf: v[2]\r\n                };\r\n                if (v.length === 4) {\r\n                    sExpr(v[3], obj[key]);\r\n                }\r\n                return;\r\n            case 'PROJECTEDCRS':\r\n            case 'PROJCRS':\r\n            case 'GEOGCS':\r\n            case 'GEOCCS':\r\n            case 'PROJCS':\r\n            case 'LOCAL_CS':\r\n            case 'GEODCRS':\r\n            case 'GEODETICCRS':\r\n            case 'GEODETICDATUM':\r\n            case 'EDATUM':\r\n            case 'ENGINEERINGDATUM':\r\n            case 'VERT_CS':\r\n            case 'VERTCRS':\r\n            case 'VERTICALCRS':\r\n            case 'COMPD_CS':\r\n            case 'COMPOUNDCRS':\r\n            case 'ENGINEERINGCRS':\r\n            case 'ENGCRS':\r\n            case 'FITTED_CS':\r\n            case 'LOCAL_DATUM':\r\n            case 'DATUM':\r\n                v[0] = ['name', v[0]];\r\n                mapit(obj, key, v);\r\n                return;\r\n            default:\r\n                i = -1;\r\n                while (++i < v.length) {\r\n                    if (!Array.isArray(v[i])) {\r\n                        return sExpr(v, obj[key]);\r\n                    }\r\n                }\r\n                return mapit(obj, key, v);\r\n        }\r\n    }\r\n    exports.sExpr = sExpr;\r\n}\r\n","/* proj4\\lib\\extend.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function default_1(destination, source) {\r\n        destination = destination || {};\r\n        var value, property;\r\n        if (!source) {\r\n            return destination;\r\n        }\r\n        for (property in source) {\r\n            value = source[property];\r\n            if (value !== undefined) {\r\n                destination[property] = value;\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\projections.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var merc_1 = tslib_1.__importDefault(require(168) /* ./projections/merc */);\r\n    var longlat_1 = tslib_1.__importDefault(require(174) /* ./projections/longlat */);\r\n    var projs = [merc_1.default, longlat_1.default];\r\n    var names = {};\r\n    var projStore = [];\r\n    function add(proj, i) {\r\n        var len = projStore.length;\r\n        if (!proj.names) {\r\n            console.log(i);\r\n            return true;\r\n        }\r\n        projStore[len] = proj;\r\n        proj.names.forEach(function (n) {\r\n            names[n.toLowerCase()] = len;\r\n        });\r\n        return this;\r\n    }\r\n    exports.add = add;\r\n    function get(name) {\r\n        if (!name) {\r\n            return false;\r\n        }\r\n        var n = name.toLowerCase();\r\n        if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\r\n            return projStore[names[n]];\r\n        }\r\n    }\r\n    exports.get = get;\r\n    function start() {\r\n        projs.forEach(add);\r\n    }\r\n    exports.start = start;\r\n    exports.default = {\r\n        start: start,\r\n        add: add,\r\n        get: get\r\n    };\r\n}\r\n","/* proj4\\lib\\projections\\merc.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var msfnz_1 = tslib_1.__importDefault(require(169) /* ../common/msfnz */);\r\n    var adjust_lon_1 = tslib_1.__importDefault(require(170) /* ../common/adjust_lon */);\r\n    var tsfnz_1 = tslib_1.__importDefault(require(172) /* ../common/tsfnz */);\r\n    var phi2z_1 = tslib_1.__importDefault(require(173) /* ../common/phi2z */);\r\n    var values_1 = require(159) /* ../constants/values */;\r\n    function init() {\r\n        var con = this.b / this.a;\r\n        this.es = 1 - con * con;\r\n        if (!('x0' in this)) {\r\n            this.x0 = 0;\r\n        }\r\n        if (!('y0' in this)) {\r\n            this.y0 = 0;\r\n        }\r\n        this.e = Math.sqrt(this.es);\r\n        if (this.lat_ts) {\r\n            if (this.sphere) {\r\n                this.k0 = Math.cos(this.lat_ts);\r\n            }\r\n            else {\r\n                this.k0 = msfnz_1.default(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\r\n            }\r\n        }\r\n        else {\r\n            if (!this.k0) {\r\n                if (this.k) {\r\n                    this.k0 = this.k;\r\n                }\r\n                else {\r\n                    this.k0 = 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    exports.init = init;\r\n    /* Mercator forward equations--mapping lat,long to x,y\r\n      --------------------------------------------------*/\r\n    function forward(p) {\r\n        var lon = p.x;\r\n        var lat = p.y;\r\n        // convert to radians\r\n        if (lat * values_1.R2D > 90 && lat * values_1.R2D < -90 && lon * values_1.R2D > 180 && lon * values_1.R2D < -180) {\r\n            return null;\r\n        }\r\n        var x, y;\r\n        if (Math.abs(Math.abs(lat) - values_1.HALF_PI) <= values_1.EPSLN) {\r\n            return null;\r\n        }\r\n        else {\r\n            if (this.sphere) {\r\n                x = this.x0 + this.a * this.k0 * adjust_lon_1.default(lon - this.long0);\r\n                y = this.y0 + this.a * this.k0 * Math.log(Math.tan(values_1.FORTPI + 0.5 * lat));\r\n            }\r\n            else {\r\n                var sinphi = Math.sin(lat);\r\n                var ts = tsfnz_1.default(this.e, lat, sinphi);\r\n                x = this.x0 + this.a * this.k0 * adjust_lon_1.default(lon - this.long0);\r\n                y = this.y0 - this.a * this.k0 * Math.log(ts);\r\n            }\r\n            p.x = x;\r\n            p.y = y;\r\n            return p;\r\n        }\r\n    }\r\n    exports.forward = forward;\r\n    /* Mercator inverse equations--mapping x,y to lat/long\r\n      --------------------------------------------------*/\r\n    function inverse(p) {\r\n        var x = p.x - this.x0;\r\n        var y = p.y - this.y0;\r\n        var lon, lat;\r\n        if (this.sphere) {\r\n            lat = values_1.HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\r\n        }\r\n        else {\r\n            var ts = Math.exp(-y / (this.a * this.k0));\r\n            lat = phi2z_1.default(this.e, ts);\r\n            if (lat === -9999) {\r\n                return null;\r\n            }\r\n        }\r\n        lon = adjust_lon_1.default(this.long0 + x / (this.a * this.k0));\r\n        p.x = lon;\r\n        p.y = lat;\r\n        return p;\r\n    }\r\n    exports.inverse = inverse;\r\n    exports.names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\r\n    exports.default = {\r\n        init: init,\r\n        forward: forward,\r\n        inverse: inverse,\r\n        names: exports.names\r\n    };\r\n}\r\n","/* proj4\\lib\\common\\msfnz.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function default_1(eccent, sinphi, cosphi) {\r\n        var con = eccent * sinphi;\r\n        return cosphi / (Math.sqrt(1 - con * con));\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\common\\adjust_lon.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var values_1 = require(159) /* ../constants/values */;\r\n    var sign_1 = tslib_1.__importDefault(require(171) /* ./sign */);\r\n    function default_1(x) {\r\n        return (Math.abs(x) <= values_1.SPI) ? x : (x - (sign_1.default(x) * values_1.TWO_PI));\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\common\\sign.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function default_1(x) {\r\n        return x < 0 ? -1 : 1;\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\common\\tsfnz.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var values_1 = require(159) /* ../constants/values */;\r\n    function default_1(eccent, phi, sinphi) {\r\n        var con = eccent * sinphi;\r\n        var com = 0.5 * eccent;\r\n        con = Math.pow(((1 - con) / (1 + con)), com);\r\n        return (Math.tan(0.5 * (values_1.HALF_PI - phi)) / con);\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\common\\phi2z.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var values_1 = require(159) /* ../constants/values */;\r\n    function default_1(eccent, ts) {\r\n        var eccnth = 0.5 * eccent;\r\n        var con, dphi;\r\n        var phi = values_1.HALF_PI - 2 * Math.atan(ts);\r\n        for (var i = 0; i <= 15; i++) {\r\n            con = eccent * Math.sin(phi);\r\n            dphi = values_1.HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\r\n            phi += dphi;\r\n            if (Math.abs(dphi) <= 0.0000000001) {\r\n                return phi;\r\n            }\r\n        }\r\n        //console.log(\"phi2z has NoConvergence\");\r\n        return -9999;\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\projections\\longlat.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function init() {\r\n        //no-op for longlat\r\n    }\r\n    exports.init = init;\r\n    function identity(pt) {\r\n        return pt;\r\n    }\r\n    exports.forward = identity;\r\n    exports.inverse = identity;\r\n    exports.names = [\"longlat\", \"identity\"];\r\n    exports.default = {\r\n        init: init,\r\n        forward: identity,\r\n        inverse: identity,\r\n        names: exports.names\r\n    };\r\n}\r\n","/* proj4\\lib\\deriveConstants.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var values_1 = require(159) /* ./constants/values */;\r\n    var Ellipsoid_1 = tslib_1.__importStar(require(176) /* ./constants/Ellipsoid */);\r\n    var match_1 = tslib_1.__importDefault(require(162) /* ./match */);\r\n    function eccentricity(a, b, rf, R_A) {\r\n        var a2 = a * a; // used in geocentric\r\n        var b2 = b * b; // used in geocentric\r\n        var es = (a2 - b2) / a2; // e ^ 2\r\n        var e = 0;\r\n        if (R_A) {\r\n            a *= 1 - es * (values_1.SIXTH + es * (values_1.RA4 + es * values_1.RA6));\r\n            a2 = a * a;\r\n            es = 0;\r\n        }\r\n        else {\r\n            e = Math.sqrt(es); // eccentricity\r\n        }\r\n        var ep2 = (a2 - b2) / b2; // used in geocentric\r\n        return {\r\n            es: es,\r\n            e: e,\r\n            ep2: ep2\r\n        };\r\n    }\r\n    exports.eccentricity = eccentricity;\r\n    function sphere(a, b, rf, ellps, sphere) {\r\n        if (!a) { // do we have an ellipsoid?\r\n            var ellipse = match_1.default(Ellipsoid_1.default, ellps);\r\n            if (!ellipse) {\r\n                ellipse = Ellipsoid_1.WGS84;\r\n            }\r\n            a = ellipse.a;\r\n            b = ellipse.b;\r\n            rf = ellipse.rf;\r\n        }\r\n        if (rf && !b) {\r\n            b = (1.0 - 1.0 / rf) * a;\r\n        }\r\n        if (rf === 0 || Math.abs(a - b) < values_1.EPSLN) {\r\n            sphere = true;\r\n            b = a;\r\n        }\r\n        return {\r\n            a: a,\r\n            b: b,\r\n            rf: rf,\r\n            sphere: sphere\r\n        };\r\n    }\r\n    exports.sphere = sphere;\r\n}\r\n","/* proj4\\lib\\constants\\Ellipsoid.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var exports$1 = {};\r\n    exports.default = exports$1;\r\n    exports$1.MERIT = {\r\n        a: 6378137.0,\r\n        rf: 298.257,\r\n        ellipseName: \"MERIT 1983\"\r\n    };\r\n    exports$1.SGS85 = {\r\n        a: 6378136.0,\r\n        rf: 298.257,\r\n        ellipseName: \"Soviet Geodetic System 85\"\r\n    };\r\n    exports$1.GRS80 = {\r\n        a: 6378137.0,\r\n        rf: 298.257222101,\r\n        ellipseName: \"GRS 1980(IUGG, 1980)\"\r\n    };\r\n    exports$1.IAU76 = {\r\n        a: 6378140.0,\r\n        rf: 298.257,\r\n        ellipseName: \"IAU 1976\"\r\n    };\r\n    exports$1.airy = {\r\n        a: 6377563.396,\r\n        b: 6356256.910,\r\n        ellipseName: \"Airy 1830\"\r\n    };\r\n    exports$1.APL4 = {\r\n        a: 6378137,\r\n        rf: 298.25,\r\n        ellipseName: \"Appl. Physics. 1965\"\r\n    };\r\n    exports$1.NWL9D = {\r\n        a: 6378145.0,\r\n        rf: 298.25,\r\n        ellipseName: \"Naval Weapons Lab., 1965\"\r\n    };\r\n    exports$1.mod_airy = {\r\n        a: 6377340.189,\r\n        b: 6356034.446,\r\n        ellipseName: \"Modified Airy\"\r\n    };\r\n    exports$1.andrae = {\r\n        a: 6377104.43,\r\n        rf: 300.0,\r\n        ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\r\n    };\r\n    exports$1.aust_SA = {\r\n        a: 6378160.0,\r\n        rf: 298.25,\r\n        ellipseName: \"Australian Natl & S. Amer. 1969\"\r\n    };\r\n    exports$1.GRS67 = {\r\n        a: 6378160.0,\r\n        rf: 298.2471674270,\r\n        ellipseName: \"GRS 67(IUGG 1967)\"\r\n    };\r\n    exports$1.bessel = {\r\n        a: 6377397.155,\r\n        rf: 299.1528128,\r\n        ellipseName: \"Bessel 1841\"\r\n    };\r\n    exports$1.bess_nam = {\r\n        a: 6377483.865,\r\n        rf: 299.1528128,\r\n        ellipseName: \"Bessel 1841 (Namibia)\"\r\n    };\r\n    exports$1.clrk66 = {\r\n        a: 6378206.4,\r\n        b: 6356583.8,\r\n        ellipseName: \"Clarke 1866\"\r\n    };\r\n    exports$1.clrk80 = {\r\n        a: 6378249.145,\r\n        rf: 293.4663,\r\n        ellipseName: \"Clarke 1880 mod.\"\r\n    };\r\n    exports$1.clrk58 = {\r\n        a: 6378293.645208759,\r\n        rf: 294.2606763692654,\r\n        ellipseName: \"Clarke 1858\"\r\n    };\r\n    exports$1.CPM = {\r\n        a: 6375738.7,\r\n        rf: 334.29,\r\n        ellipseName: \"Comm. des Poids et Mesures 1799\"\r\n    };\r\n    exports$1.delmbr = {\r\n        a: 6376428.0,\r\n        rf: 311.5,\r\n        ellipseName: \"Delambre 1810 (Belgium)\"\r\n    };\r\n    exports$1.engelis = {\r\n        a: 6378136.05,\r\n        rf: 298.2566,\r\n        ellipseName: \"Engelis 1985\"\r\n    };\r\n    exports$1.evrst30 = {\r\n        a: 6377276.345,\r\n        rf: 300.8017,\r\n        ellipseName: \"Everest 1830\"\r\n    };\r\n    exports$1.evrst48 = {\r\n        a: 6377304.063,\r\n        rf: 300.8017,\r\n        ellipseName: \"Everest 1948\"\r\n    };\r\n    exports$1.evrst56 = {\r\n        a: 6377301.243,\r\n        rf: 300.8017,\r\n        ellipseName: \"Everest 1956\"\r\n    };\r\n    exports$1.evrst69 = {\r\n        a: 6377295.664,\r\n        rf: 300.8017,\r\n        ellipseName: \"Everest 1969\"\r\n    };\r\n    exports$1.evrstSS = {\r\n        a: 6377298.556,\r\n        rf: 300.8017,\r\n        ellipseName: \"Everest (Sabah & Sarawak)\"\r\n    };\r\n    exports$1.fschr60 = {\r\n        a: 6378166.0,\r\n        rf: 298.3,\r\n        ellipseName: \"Fischer (Mercury Datum) 1960\"\r\n    };\r\n    exports$1.fschr60m = {\r\n        a: 6378155.0,\r\n        rf: 298.3,\r\n        ellipseName: \"Fischer 1960\"\r\n    };\r\n    exports$1.fschr68 = {\r\n        a: 6378150.0,\r\n        rf: 298.3,\r\n        ellipseName: \"Fischer 1968\"\r\n    };\r\n    exports$1.helmert = {\r\n        a: 6378200.0,\r\n        rf: 298.3,\r\n        ellipseName: \"Helmert 1906\"\r\n    };\r\n    exports$1.hough = {\r\n        a: 6378270.0,\r\n        rf: 297.0,\r\n        ellipseName: \"Hough\"\r\n    };\r\n    exports$1.intl = {\r\n        a: 6378388.0,\r\n        rf: 297.0,\r\n        ellipseName: \"International 1909 (Hayford)\"\r\n    };\r\n    exports$1.kaula = {\r\n        a: 6378163.0,\r\n        rf: 298.24,\r\n        ellipseName: \"Kaula 1961\"\r\n    };\r\n    exports$1.lerch = {\r\n        a: 6378139.0,\r\n        rf: 298.257,\r\n        ellipseName: \"Lerch 1979\"\r\n    };\r\n    exports$1.mprts = {\r\n        a: 6397300.0,\r\n        rf: 191.0,\r\n        ellipseName: \"Maupertius 1738\"\r\n    };\r\n    exports$1.new_intl = {\r\n        a: 6378157.5,\r\n        b: 6356772.2,\r\n        ellipseName: \"New International 1967\"\r\n    };\r\n    exports$1.plessis = {\r\n        a: 6376523.0,\r\n        rf: 6355863.0,\r\n        ellipseName: \"Plessis 1817 (France)\"\r\n    };\r\n    exports$1.krass = {\r\n        a: 6378245.0,\r\n        rf: 298.3,\r\n        ellipseName: \"Krassovsky, 1942\"\r\n    };\r\n    exports$1.SEasia = {\r\n        a: 6378155.0,\r\n        b: 6356773.3205,\r\n        ellipseName: \"Southeast Asia\"\r\n    };\r\n    exports$1.walbeck = {\r\n        a: 6376896.0,\r\n        b: 6355834.8467,\r\n        ellipseName: \"Walbeck\"\r\n    };\r\n    exports$1.WGS60 = {\r\n        a: 6378165.0,\r\n        rf: 298.3,\r\n        ellipseName: \"WGS 60\"\r\n    };\r\n    exports$1.WGS66 = {\r\n        a: 6378145.0,\r\n        rf: 298.25,\r\n        ellipseName: \"WGS 66\"\r\n    };\r\n    exports$1.WGS7 = {\r\n        a: 6378135.0,\r\n        rf: 298.26,\r\n        ellipseName: \"WGS 72\"\r\n    };\r\n    exports.WGS84 = exports$1.WGS84 = {\r\n        a: 6378137.0,\r\n        rf: 298.257223563,\r\n        ellipseName: \"WGS 84\"\r\n    };\r\n    exports$1.sphere = {\r\n        a: 6370997.0,\r\n        b: 6370997.0,\r\n        ellipseName: \"Normal Sphere (r=6370997)\"\r\n    };\r\n}\r\n","/* proj4\\lib\\constants\\Datum.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var exports$1 = {};\r\n    exports.default = exports$1;\r\n    exports$1.wgs84 = {\r\n        towgs84: \"0,0,0\",\r\n        ellipse: \"WGS84\",\r\n        datumName: \"WGS84\"\r\n    };\r\n    exports$1.ch1903 = {\r\n        towgs84: \"674.374,15.056,405.346\",\r\n        ellipse: \"bessel\",\r\n        datumName: \"swiss\"\r\n    };\r\n    exports$1.ggrs87 = {\r\n        towgs84: \"-199.87,74.79,246.62\",\r\n        ellipse: \"GRS80\",\r\n        datumName: \"Greek_Geodetic_Reference_System_1987\"\r\n    };\r\n    exports$1.nad83 = {\r\n        towgs84: \"0,0,0\",\r\n        ellipse: \"GRS80\",\r\n        datumName: \"North_American_Datum_1983\"\r\n    };\r\n    exports$1.nad27 = {\r\n        nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\r\n        ellipse: \"clrk66\",\r\n        datumName: \"North_American_Datum_1927\"\r\n    };\r\n    exports$1.potsdam = {\r\n        towgs84: \"606.0,23.0,413.0\",\r\n        ellipse: \"bessel\",\r\n        datumName: \"Potsdam Rauenberg 1950 DHDN\"\r\n    };\r\n    exports$1.carthage = {\r\n        towgs84: \"-263.0,6.0,431.0\",\r\n        ellipse: \"clark80\",\r\n        datumName: \"Carthage 1934 Tunisia\"\r\n    };\r\n    exports$1.hermannskogel = {\r\n        towgs84: \"653.0,-212.0,449.0\",\r\n        ellipse: \"bessel\",\r\n        datumName: \"Hermannskogel\"\r\n    };\r\n    exports$1.osni52 = {\r\n        towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\r\n        ellipse: \"airy\",\r\n        datumName: \"Irish National\"\r\n    };\r\n    exports$1.ire65 = {\r\n        towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\r\n        ellipse: \"mod_airy\",\r\n        datumName: \"Ireland 1965\"\r\n    };\r\n    exports$1.rassadiran = {\r\n        towgs84: \"-133.63,-157.5,-158.62\",\r\n        ellipse: \"intl\",\r\n        datumName: \"Rassadiran\"\r\n    };\r\n    exports$1.nzgd49 = {\r\n        towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\r\n        ellipse: \"intl\",\r\n        datumName: \"New Zealand Geodetic Datum 1949\"\r\n    };\r\n    exports$1.osgb36 = {\r\n        towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\r\n        ellipse: \"airy\",\r\n        datumName: \"Airy 1830\"\r\n    };\r\n    exports$1.s_jtsk = {\r\n        towgs84: \"589,76,480\",\r\n        ellipse: 'bessel',\r\n        datumName: 'S-JTSK (Ferro)'\r\n    };\r\n    exports$1.beduaram = {\r\n        towgs84: '-106,-87,188',\r\n        ellipse: 'clrk80',\r\n        datumName: 'Beduaram'\r\n    };\r\n    exports$1.gunung_segara = {\r\n        towgs84: '-403,684,41',\r\n        ellipse: 'bessel',\r\n        datumName: 'Gunung Segara Jakarta'\r\n    };\r\n    exports$1.rnb72 = {\r\n        towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\r\n        ellipse: \"intl\",\r\n        datumName: \"Reseau National Belge 1972\"\r\n    };\r\n}\r\n","/* proj4\\lib\\datum.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var values_1 = require(159) /* ./constants/values */;\r\n    function datum(datumCode, datum_params, a, b, es, ep2) {\r\n        var out = {};\r\n        if (datumCode === undefined || datumCode === 'none') {\r\n            out.datum_type = values_1.PJD_NODATUM;\r\n        }\r\n        else {\r\n            out.datum_type = values_1.PJD_WGS84;\r\n        }\r\n        if (datum_params) {\r\n            out.datum_params = datum_params.map(parseFloat);\r\n            if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\r\n                out.datum_type = values_1.PJD_3PARAM;\r\n            }\r\n            if (out.datum_params.length > 3) {\r\n                if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\r\n                    out.datum_type = values_1.PJD_7PARAM;\r\n                    out.datum_params[3] *= values_1.SEC_TO_RAD;\r\n                    out.datum_params[4] *= values_1.SEC_TO_RAD;\r\n                    out.datum_params[5] *= values_1.SEC_TO_RAD;\r\n                    out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\r\n                }\r\n            }\r\n        }\r\n        out.a = a; //datum object also uses these values\r\n        out.b = b;\r\n        out.es = es;\r\n        out.ep2 = ep2;\r\n        return out;\r\n    }\r\n    exports.default = datum;\r\n}\r\n","/* proj4\\lib\\transform.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var values_1 = require(159) /* ./constants/values */;\r\n    var datum_transform_1 = tslib_1.__importDefault(require(180) /* ./datum_transform */);\r\n    var adjust_axis_1 = tslib_1.__importDefault(require(182) /* ./adjust_axis */);\r\n    var Proj_1 = tslib_1.__importDefault(require(154) /* ./Proj */);\r\n    var toPoint_1 = tslib_1.__importDefault(require(183) /* ./common/toPoint */);\r\n    var checkSanity_1 = tslib_1.__importDefault(require(184) /* ./checkSanity */);\r\n    function checkNotWGS(source, dest) {\r\n        return ((source.datum.datum_type === values_1.PJD_3PARAM || source.datum.datum_type === values_1.PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === values_1.PJD_3PARAM || dest.datum.datum_type === values_1.PJD_7PARAM) && source.datumCode !== 'WGS84');\r\n    }\r\n    function transform(source, dest, point) {\r\n        var wgs84;\r\n        if (Array.isArray(point)) {\r\n            point = toPoint_1.default(point);\r\n        }\r\n        checkSanity_1.default(point);\r\n        // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\r\n        if (source.datum && dest.datum && checkNotWGS(source, dest)) {\r\n            wgs84 = new Proj_1.default('WGS84');\r\n            point = transform(source, wgs84, point);\r\n            source = wgs84;\r\n        }\r\n        // DGR, 2010/11/12\r\n        if (source.axis !== 'enu') {\r\n            point = adjust_axis_1.default(source, false, point);\r\n        }\r\n        // Transform source points to long/lat, if they aren't already.\r\n        if (source.projName === 'longlat') {\r\n            point = {\r\n                x: point.x * values_1.D2R,\r\n                y: point.y * values_1.D2R,\r\n                z: point.z || 0\r\n            };\r\n        }\r\n        else {\r\n            if (source.to_meter) {\r\n                point = {\r\n                    x: point.x * source.to_meter,\r\n                    y: point.y * source.to_meter,\r\n                    z: point.z || 0\r\n                };\r\n            }\r\n            point = source.inverse(point); // Convert Cartesian to longlat\r\n            if (!point) {\r\n                return;\r\n            }\r\n        }\r\n        // Adjust for the prime meridian if necessary\r\n        if (source.from_greenwich) {\r\n            point.x += source.from_greenwich;\r\n        }\r\n        // Convert datums if needed, and if possible.\r\n        point = datum_transform_1.default(source.datum, dest.datum, point);\r\n        // Adjust for the prime meridian if necessary\r\n        if (dest.from_greenwich) {\r\n            point = {\r\n                x: point.x - dest.from_greenwich,\r\n                y: point.y,\r\n                z: point.z || 0\r\n            };\r\n        }\r\n        if (dest.projName === 'longlat') {\r\n            // convert radians to decimal degrees\r\n            point = {\r\n                x: point.x * values_1.R2D,\r\n                y: point.y * values_1.R2D,\r\n                z: point.z || 0\r\n            };\r\n        }\r\n        else { // else project\r\n            point = dest.forward(point);\r\n            if (dest.to_meter) {\r\n                point = {\r\n                    x: point.x / dest.to_meter,\r\n                    y: point.y / dest.to_meter,\r\n                    z: point.z || 0\r\n                };\r\n            }\r\n        }\r\n        // DGR, 2010/11/12\r\n        if (dest.axis !== 'enu') {\r\n            return adjust_axis_1.default(dest, true, point);\r\n        }\r\n        return point;\r\n    }\r\n    exports.default = transform;\r\n}\r\n","/* proj4\\lib\\datum_transform.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var values_1 = require(159) /* ./constants/values */;\r\n    var datumUtils_1 = require(181) /* ./datumUtils */;\r\n    function checkParams(type) {\r\n        return (type === values_1.PJD_3PARAM || type === values_1.PJD_7PARAM);\r\n    }\r\n    function default_1(source, dest, point) {\r\n        // Short cut if the datums are identical.\r\n        if (datumUtils_1.compareDatums(source, dest)) {\r\n            return point; // in this case, zero is sucess,\r\n            // whereas cs_compare_datums returns 1 to indicate TRUE\r\n            // confusing, should fix this\r\n        }\r\n        // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\r\n        if (source.datum_type === values_1.PJD_NODATUM || dest.datum_type === values_1.PJD_NODATUM) {\r\n            return point;\r\n        }\r\n        // If this datum requires grid shifts, then apply it to geodetic coordinates.\r\n        // Do we need to go through geocentric coordinates?\r\n        if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) && !checkParams(dest.datum_type)) {\r\n            return point;\r\n        }\r\n        // Convert to geocentric coordinates.\r\n        point = datumUtils_1.geodeticToGeocentric(point, source.es, source.a);\r\n        // Convert between datums\r\n        if (checkParams(source.datum_type)) {\r\n            point = datumUtils_1.geocentricToWgs84(point, source.datum_type, source.datum_params);\r\n        }\r\n        if (checkParams(dest.datum_type)) {\r\n            point = datumUtils_1.geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\r\n        }\r\n        return datumUtils_1.geocentricToGeodetic(point, dest.es, dest.a, dest.b);\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\datumUtils.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var values_1 = require(159) /* ./constants/values */;\r\n    function compareDatums(source, dest) {\r\n        if (source.datum_type !== dest.datum_type) {\r\n            return false; // false, datums are not equal\r\n        }\r\n        else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\r\n            // the tolerance for es is to ensure that GRS80 and WGS84\r\n            // are considered identical\r\n            return false;\r\n        }\r\n        else if (source.datum_type === values_1.PJD_3PARAM) {\r\n            return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\r\n        }\r\n        else if (source.datum_type === values_1.PJD_7PARAM) {\r\n            return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\r\n        }\r\n        else {\r\n            return true; // datums are equal\r\n        }\r\n    } // cs_compare_datums()\r\n    exports.compareDatums = compareDatums;\r\n    /*\r\n     * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\r\n     * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\r\n     * according to the current ellipsoid parameters.\r\n     *\r\n     *    Latitude  : Geodetic latitude in radians                     (input)\r\n     *    Longitude : Geodetic longitude in radians                    (input)\r\n     *    Height    : Geodetic height, in meters                       (input)\r\n     *    X         : Calculated Geocentric X coordinate, in meters    (output)\r\n     *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\r\n     *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\r\n     *\r\n     */\r\n    function geodeticToGeocentric(p, es, a) {\r\n        var Longitude = p.x;\r\n        var Latitude = p.y;\r\n        var Height = p.z ? p.z : 0; //Z value not always supplied\r\n        var Rn; /*  Earth radius at location  */\r\n        var Sin_Lat; /*  Math.sin(Latitude)  */\r\n        var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\r\n        var Cos_Lat; /*  Math.cos(Latitude)  */\r\n        /*\r\n         ** Don't blow up if Latitude is just a little out of the value\r\n         ** range as it may just be a rounding issue.  Also removed longitude\r\n         ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\r\n         */\r\n        if (Latitude < -values_1.HALF_PI && Latitude > -1.001 * values_1.HALF_PI) {\r\n            Latitude = -values_1.HALF_PI;\r\n        }\r\n        else if (Latitude > values_1.HALF_PI && Latitude < 1.001 * values_1.HALF_PI) {\r\n            Latitude = values_1.HALF_PI;\r\n        }\r\n        else if (Latitude < -values_1.HALF_PI) {\r\n            /* Latitude out of range */\r\n            //..reportError('geocent:lat out of range:' + Latitude);\r\n            return { x: -Infinity, y: -Infinity, z: p.z };\r\n        }\r\n        else if (Latitude > values_1.HALF_PI) {\r\n            /* Latitude out of range */\r\n            return { x: Infinity, y: Infinity, z: p.z };\r\n        }\r\n        if (Longitude > Math.PI) {\r\n            Longitude -= (2 * Math.PI);\r\n        }\r\n        Sin_Lat = Math.sin(Latitude);\r\n        Cos_Lat = Math.cos(Latitude);\r\n        Sin2_Lat = Sin_Lat * Sin_Lat;\r\n        Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\r\n        return {\r\n            x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\r\n            y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\r\n            z: ((Rn * (1 - es)) + Height) * Sin_Lat\r\n        };\r\n    } // cs_geodetic_to_geocentric()\r\n    exports.geodeticToGeocentric = geodeticToGeocentric;\r\n    function geocentricToGeodetic(p, es, a, b) {\r\n        /* local defintions and variables */\r\n        /* end-criterium of loop, accuracy of sin(Latitude) */\r\n        var genau = 1e-12;\r\n        var genau2 = (genau * genau);\r\n        var maxiter = 30;\r\n        var P; /* distance between semi-minor axis and location */\r\n        var RR; /* distance between center and location */\r\n        var CT; /* sin of geocentric latitude */\r\n        var ST; /* cos of geocentric latitude */\r\n        var RX;\r\n        var RK;\r\n        var RN; /* Earth radius at location */\r\n        var CPHI0; /* cos of start or old geodetic latitude in iterations */\r\n        var SPHI0; /* sin of start or old geodetic latitude in iterations */\r\n        var CPHI; /* cos of searched geodetic latitude */\r\n        var SPHI; /* sin of searched geodetic latitude */\r\n        var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\r\n        var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\r\n        var X = p.x;\r\n        var Y = p.y;\r\n        var Z = p.z ? p.z : 0.0; //Z value not always supplied\r\n        var Longitude;\r\n        var Latitude;\r\n        var Height;\r\n        P = Math.sqrt(X * X + Y * Y);\r\n        RR = Math.sqrt(X * X + Y * Y + Z * Z);\r\n        /*      special cases for latitude and longitude */\r\n        if (P / a < genau) {\r\n            /*  special case, if P=0. (X=0., Y=0.) */\r\n            Longitude = 0.0;\r\n            /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\r\n             *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\r\n            if (RR / a < genau) {\r\n                Latitude = values_1.HALF_PI;\r\n                Height = -b;\r\n                return {\r\n                    x: p.x,\r\n                    y: p.y,\r\n                    z: p.z\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            /*  ellipsoidal (geodetic) longitude\r\n             *  interval: -PI < Longitude <= +PI */\r\n            Longitude = Math.atan2(Y, X);\r\n        }\r\n        /* --------------------------------------------------------------\r\n         * Following iterative algorithm was developped by\r\n         * \"Institut for Erdmessung\", University of Hannover, July 1988.\r\n         * Internet: www.ife.uni-hannover.de\r\n         * Iterative computation of CPHI,SPHI and Height.\r\n         * Iteration of CPHI and SPHI to 10**-12 radian resp.\r\n         * 2*10**-7 arcsec.\r\n         * --------------------------------------------------------------\r\n         */\r\n        CT = Z / RR;\r\n        ST = P / RR;\r\n        RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\r\n        CPHI0 = ST * (1.0 - es) * RX;\r\n        SPHI0 = CT * RX;\r\n        iter = 0;\r\n        /* loop to find sin(Latitude) resp. Latitude\r\n         * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\r\n        do {\r\n            iter++;\r\n            RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\r\n            /*  ellipsoidal (geodetic) height */\r\n            Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\r\n            RK = es * RN / (RN + Height);\r\n            RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\r\n            CPHI = ST * (1.0 - RK) * RX;\r\n            SPHI = CT * RX;\r\n            SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\r\n            CPHI0 = CPHI;\r\n            SPHI0 = SPHI;\r\n        } while (SDPHI * SDPHI > genau2 && iter < maxiter);\r\n        /*      ellipsoidal (geodetic) latitude */\r\n        Latitude = Math.atan(SPHI / Math.abs(CPHI));\r\n        return {\r\n            x: Longitude,\r\n            y: Latitude,\r\n            z: Height\r\n        };\r\n    } // cs_geocentric_to_geodetic()\r\n    exports.geocentricToGeodetic = geocentricToGeodetic;\r\n    /****************************************************************/\r\n    // pj_geocentic_to_wgs84( p )\r\n    //  p = point to transform in geocentric coordinates (x,y,z)\r\n    /** point object, nothing fancy, just allows values to be\r\n        passed back and forth by reference rather than by value.\r\n        Other point classes may be used as long as they have\r\n        x and y properties, which will get modified in the transform method.\r\n    */\r\n    function geocentricToWgs84(p, datum_type, datum_params) {\r\n        if (datum_type === values_1.PJD_3PARAM) {\r\n            // if( x[io] === HUGE_VAL )\r\n            //    continue;\r\n            return {\r\n                x: p.x + datum_params[0],\r\n                y: p.y + datum_params[1],\r\n                z: p.z + datum_params[2],\r\n            };\r\n        }\r\n        else if (datum_type === values_1.PJD_7PARAM) {\r\n            var Dx_BF = datum_params[0];\r\n            var Dy_BF = datum_params[1];\r\n            var Dz_BF = datum_params[2];\r\n            var Rx_BF = datum_params[3];\r\n            var Ry_BF = datum_params[4];\r\n            var Rz_BF = datum_params[5];\r\n            var M_BF = datum_params[6];\r\n            // if( x[io] === HUGE_VAL )\r\n            //    continue;\r\n            return {\r\n                x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\r\n                y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\r\n                z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\r\n            };\r\n        }\r\n    } // cs_geocentric_to_wgs84\r\n    exports.geocentricToWgs84 = geocentricToWgs84;\r\n    /****************************************************************/\r\n    // pj_geocentic_from_wgs84()\r\n    //  coordinate system definition,\r\n    //  point to transform in geocentric coordinates (x,y,z)\r\n    function geocentricFromWgs84(p, datum_type, datum_params) {\r\n        if (datum_type === values_1.PJD_3PARAM) {\r\n            //if( x[io] === HUGE_VAL )\r\n            //    continue;\r\n            return {\r\n                x: p.x - datum_params[0],\r\n                y: p.y - datum_params[1],\r\n                z: p.z - datum_params[2],\r\n            };\r\n        }\r\n        else if (datum_type === values_1.PJD_7PARAM) {\r\n            var Dx_BF = datum_params[0];\r\n            var Dy_BF = datum_params[1];\r\n            var Dz_BF = datum_params[2];\r\n            var Rx_BF = datum_params[3];\r\n            var Ry_BF = datum_params[4];\r\n            var Rz_BF = datum_params[5];\r\n            var M_BF = datum_params[6];\r\n            var x_tmp = (p.x - Dx_BF) / M_BF;\r\n            var y_tmp = (p.y - Dy_BF) / M_BF;\r\n            var z_tmp = (p.z - Dz_BF) / M_BF;\r\n            //if( x[io] === HUGE_VAL )\r\n            //    continue;\r\n            return {\r\n                x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\r\n                y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\r\n                z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\r\n            };\r\n        } //cs_geocentric_from_wgs84()\r\n    }\r\n    exports.geocentricFromWgs84 = geocentricFromWgs84;\r\n}\r\n","/* proj4\\lib\\adjust_axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function default_1(crs, denorm, point) {\r\n        var xin = point.x, yin = point.y, zin = point.z || 0.0;\r\n        var v, t, i;\r\n        var out = {};\r\n        for (i = 0; i < 3; i++) {\r\n            if (denorm && i === 2 && point.z === undefined) {\r\n                continue;\r\n            }\r\n            if (i === 0) {\r\n                v = xin;\r\n                if (\"ew\".indexOf(crs.axis[i]) !== -1) {\r\n                    t = 'x';\r\n                }\r\n                else {\r\n                    t = 'y';\r\n                }\r\n            }\r\n            else if (i === 1) {\r\n                v = yin;\r\n                if (\"ns\".indexOf(crs.axis[i]) !== -1) {\r\n                    t = 'y';\r\n                }\r\n                else {\r\n                    t = 'x';\r\n                }\r\n            }\r\n            else {\r\n                v = zin;\r\n                t = 'z';\r\n            }\r\n            switch (crs.axis[i]) {\r\n                case 'e':\r\n                case 'w':\r\n                case 'n':\r\n                case 's':\r\n                    out[t] = v;\r\n                    break;\r\n                case 'u':\r\n                    if (point[t] !== undefined) {\r\n                        out.z = v;\r\n                    }\r\n                    break;\r\n                case 'd':\r\n                    if (point[t] !== undefined) {\r\n                        out.z = -v;\r\n                    }\r\n                    break;\r\n                default:\r\n                    //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\r\n                    return null;\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\common\\toPoint.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function default_1(array) {\r\n        var out = {\r\n            x: array[0],\r\n            y: array[1]\r\n        };\r\n        if (array.length > 2) {\r\n            out.z = array[2];\r\n        }\r\n        if (array.length > 3) {\r\n            out.m = array[3];\r\n        }\r\n        return out;\r\n    }\r\n    exports.default = default_1;\r\n}\r\n","/* proj4\\lib\\checkSanity.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function default_1(point) {\r\n        checkCoord(point.x);\r\n        checkCoord(point.y);\r\n    }\r\n    exports.default = default_1;\r\n    function checkCoord(num) {\r\n        if (typeof Number.isFinite === 'function') {\r\n            if (Number.isFinite(num)) {\r\n                return;\r\n            }\r\n            throw new TypeError('coordinates must be finite numbers');\r\n        }\r\n        if (typeof num !== 'number' || num !== num || !isFinite(num)) {\r\n            throw new TypeError('coordinates must be finite numbers');\r\n        }\r\n    }\r\n}\r\n","/* models\\renderers\\renderer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var view_1 = require(186) /* ../../core/view */;\r\n    var visuals = tslib_1.__importStar(require(189) /* ../../core/visuals */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var model_1 = require(196) /* ../../model */;\r\n    var coordinates_1 = require(197) /* ../canvas/coordinates */;\r\n    var RendererView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RendererView, _super);\r\n        function RendererView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(RendererView.prototype, \"coordinates\", {\r\n            get: function () {\r\n                return this._coordinates;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        RendererView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.visuals = new visuals.Visuals(this.model);\r\n            this.needs_webgl_blit = false;\r\n            this._initialize_coordinates();\r\n        };\r\n        RendererView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            var _a = this.model.properties, x_range_name = _a.x_range_name, y_range_name = _a.y_range_name;\r\n            this.on_change([x_range_name, y_range_name], function () { return _this._initialize_coordinates(); });\r\n        };\r\n        RendererView.prototype._initialize_coordinates = function () {\r\n            var _a = this.model, x_range_name = _a.x_range_name, y_range_name = _a.y_range_name;\r\n            var frame = this.plot_view.frame;\r\n            var x_scale = frame.x_scales.get(x_range_name);\r\n            var y_scale = frame.y_scales.get(y_range_name);\r\n            this._coordinates = new coordinates_1.CoordinateTransform(x_scale, y_scale);\r\n        };\r\n        Object.defineProperty(RendererView.prototype, \"plot_view\", {\r\n            get: function () {\r\n                return this.parent;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(RendererView.prototype, \"plot_model\", {\r\n            get: function () {\r\n                return this.parent.model;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(RendererView.prototype, \"layer\", {\r\n            get: function () {\r\n                var _a = this.plot_view.canvas_view, overlays = _a.overlays, primary = _a.primary;\r\n                return this.model.level == \"overlay\" ? overlays : primary;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        RendererView.prototype.request_render = function () {\r\n            this.plot_view.request_render();\r\n        };\r\n        RendererView.prototype.notify_finished = function () {\r\n            this.plot_view.notify_finished();\r\n        };\r\n        Object.defineProperty(RendererView.prototype, \"needs_clip\", {\r\n            get: function () {\r\n                return false;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(RendererView.prototype, \"has_webgl\", {\r\n            get: function () {\r\n                return false;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        RendererView.prototype.render = function () {\r\n            if (this.model.visible) {\r\n                this._render();\r\n            }\r\n            this._has_finished = true;\r\n        };\r\n        return RendererView;\r\n    }(view_1.View));\r\n    exports.RendererView = RendererView;\r\n    RendererView.__name__ = \"RendererView\";\r\n    var Renderer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Renderer, _super);\r\n        function Renderer(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Renderer.init_Renderer = function () {\r\n            this.define({\r\n                level: [p.RenderLevel],\r\n                visible: [p.Boolean, true],\r\n                x_range_name: [p.String, \"default\"],\r\n                y_range_name: [p.String, \"default\"],\r\n            });\r\n        };\r\n        return Renderer;\r\n    }(model_1.Model));\r\n    exports.Renderer = Renderer;\r\n    Renderer.__name__ = \"Renderer\";\r\n    Renderer.init_Renderer();\r\n}\r\n","/* core\\view.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var signaling_1 = require(130) /* ./signaling */;\r\n    var dom_1 = require(187) /* ./dom */;\r\n    var types_1 = require(123) /* ./util/types */;\r\n    var root_css_1 = tslib_1.__importDefault(require(188) /* ../styles/root.css */);\r\n    var View = /** @class */ (function () {\r\n        function View(options) {\r\n            this.removed = new signaling_1.Signal0(this, \"removed\");\r\n            this._ready = Promise.resolve(undefined);\r\n            if (options.model != null)\r\n                this.model = options.model;\r\n            else\r\n                throw new Error(\"model of a view wasn't configured\");\r\n            this._parent = options.parent;\r\n        }\r\n        Object.defineProperty(View.prototype, \"ready\", {\r\n            get: function () {\r\n                return this._ready;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        View.prototype.connect = function (signal, slot) {\r\n            var _this = this;\r\n            var new_slot = function (args, sender) {\r\n                var promise = Promise.resolve(slot.call(_this, args, sender));\r\n                _this._ready = _this._ready.then(function () { return promise; });\r\n            };\r\n            return signal.connect(new_slot, this);\r\n        };\r\n        View.prototype.disconnect = function (signal, slot) {\r\n            return signal.disconnect(slot, this);\r\n        };\r\n        View.prototype.initialize = function () {\r\n            var e_1, _a;\r\n            this._has_finished = false;\r\n            if (this.is_root) {\r\n                this._stylesheet = dom_1.stylesheet;\r\n            }\r\n            try {\r\n                for (var _b = tslib_1.__values(this.styles()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var style = _c.value;\r\n                    this.stylesheet.append(style);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        View.prototype.lazy_initialize = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    return [2 /*return*/];\r\n                });\r\n            });\r\n        };\r\n        View.prototype.remove = function () {\r\n            this._parent = undefined;\r\n            this.disconnect_signals();\r\n            this.removed.emit();\r\n        };\r\n        View.prototype.toString = function () {\r\n            return this.model.type + \"View(\" + this.model.id + \")\";\r\n        };\r\n        View.prototype.serializable_state = function () {\r\n            return { type: this.model.type };\r\n        };\r\n        Object.defineProperty(View.prototype, \"parent\", {\r\n            get: function () {\r\n                if (this._parent !== undefined)\r\n                    return this._parent;\r\n                else\r\n                    throw new Error(\"parent of a view wasn't configured\");\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(View.prototype, \"is_root\", {\r\n            get: function () {\r\n                return this.parent === null;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(View.prototype, \"root\", {\r\n            get: function () {\r\n                return this.is_root ? this : this.parent.root;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        View.prototype.assert_root = function () {\r\n            if (!this.is_root)\r\n                throw new Error(this.toString() + \" is not a root layout\");\r\n        };\r\n        View.prototype.has_finished = function () {\r\n            return this._has_finished;\r\n        };\r\n        Object.defineProperty(View.prototype, \"is_idle\", {\r\n            get: function () {\r\n                return this.has_finished();\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        View.prototype.connect_signals = function () { };\r\n        View.prototype.disconnect_signals = function () {\r\n            signaling_1.Signal.disconnectReceiver(this);\r\n        };\r\n        View.prototype.on_change = function (properties, fn) {\r\n            var e_2, _a;\r\n            try {\r\n                for (var _b = tslib_1.__values(types_1.isArray(properties) ? properties : [properties]), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var property = _c.value;\r\n                    this.connect(property.change, fn);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        View.prototype.cursor = function (_sx, _sy) {\r\n            return null;\r\n        };\r\n        Object.defineProperty(View.prototype, \"stylesheet\", {\r\n            get: function () {\r\n                if (this.is_root)\r\n                    return this._stylesheet;\r\n                else\r\n                    return this.root.stylesheet;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        View.prototype.styles = function () {\r\n            return [root_css_1.default];\r\n        };\r\n        return View;\r\n    }());\r\n    exports.View = View;\r\n    View.__name__ = \"View\";\r\n}\r\n","/* core\\dom.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(123) /* ./util/types */;\r\n    var object_1 = require(128) /* ./util/object */;\r\n    var _createElement = function (tag) {\r\n        return function (attrs) {\r\n            var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f;\r\n            if (attrs === void 0) {\r\n                attrs = {};\r\n            }\r\n            var children = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                children[_i - 1] = arguments[_i];\r\n            }\r\n            var element = document.createElement(tag);\r\n            element.classList.add(\"bk\");\r\n            try {\r\n                for (var _g = tslib_1.__values(object_1.entries(attrs)), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                    var _j = tslib_1.__read(_h.value, 2), attr = _j[0], value = _j[1];\r\n                    if (value == null || types_1.isBoolean(value) && !value)\r\n                        continue;\r\n                    if (attr === \"class\") {\r\n                        if (types_1.isString(value))\r\n                            value = value.split(/\\s+/);\r\n                        if (types_1.isArray(value)) {\r\n                            try {\r\n                                for (var value_1 = (e_2 = void 0, tslib_1.__values(value)), value_1_1 = value_1.next(); !value_1_1.done; value_1_1 = value_1.next()) {\r\n                                    var cls = value_1_1.value;\r\n                                    if (cls != null)\r\n                                        element.classList.add(cls);\r\n                                }\r\n                            }\r\n                            catch (e_2_1) {\r\n                                e_2 = { error: e_2_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (value_1_1 && !value_1_1.done && (_b = value_1.return))\r\n                                        _b.call(value_1);\r\n                                }\r\n                                finally {\r\n                                    if (e_2)\r\n                                        throw e_2.error;\r\n                                }\r\n                            }\r\n                            continue;\r\n                        }\r\n                    }\r\n                    if (attr === \"style\" && types_1.isPlainObject(value)) {\r\n                        try {\r\n                            for (var _k = (e_3 = void 0, tslib_1.__values(object_1.entries(value))), _l = _k.next(); !_l.done; _l = _k.next()) {\r\n                                var _m = tslib_1.__read(_l.value, 2), prop = _m[0], data = _m[1];\r\n                                element.style[prop] = data;\r\n                            }\r\n                        }\r\n                        catch (e_3_1) {\r\n                            e_3 = { error: e_3_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_l && !_l.done && (_c = _k.return))\r\n                                    _c.call(_k);\r\n                            }\r\n                            finally {\r\n                                if (e_3)\r\n                                    throw e_3.error;\r\n                            }\r\n                        }\r\n                        continue;\r\n                    }\r\n                    if (attr === \"data\" && types_1.isPlainObject(value)) {\r\n                        try {\r\n                            for (var _o = (e_4 = void 0, tslib_1.__values(object_1.entries(value))), _p = _o.next(); !_p.done; _p = _o.next()) {\r\n                                var _q = tslib_1.__read(_p.value, 2), key = _q[0], data = _q[1];\r\n                                element.dataset[key] = data; // XXX: attrs needs a better type\r\n                            }\r\n                        }\r\n                        catch (e_4_1) {\r\n                            e_4 = { error: e_4_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_p && !_p.done && (_d = _o.return))\r\n                                    _d.call(_o);\r\n                            }\r\n                            finally {\r\n                                if (e_4)\r\n                                    throw e_4.error;\r\n                            }\r\n                        }\r\n                        continue;\r\n                    }\r\n                    element.setAttribute(attr, value);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_h && !_h.done && (_a = _g.return))\r\n                        _a.call(_g);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            function append(child) {\r\n                var e_7, _a;\r\n                if (types_1.isString(child))\r\n                    element.appendChild(document.createTextNode(child));\r\n                else if (child instanceof Node)\r\n                    element.appendChild(child);\r\n                else if (child instanceof NodeList || child instanceof HTMLCollection) {\r\n                    try {\r\n                        for (var child_2 = tslib_1.__values(child), child_2_1 = child_2.next(); !child_2_1.done; child_2_1 = child_2.next()) {\r\n                            var el = child_2_1.value;\r\n                            element.appendChild(el);\r\n                        }\r\n                    }\r\n                    catch (e_7_1) {\r\n                        e_7 = { error: e_7_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (child_2_1 && !child_2_1.done && (_a = child_2.return))\r\n                                _a.call(child_2);\r\n                        }\r\n                        finally {\r\n                            if (e_7)\r\n                                throw e_7.error;\r\n                        }\r\n                    }\r\n                }\r\n                else if (child != null && child !== false)\r\n                    throw new Error(\"expected a DOM element, string, false or null, got \" + JSON.stringify(child));\r\n            }\r\n            try {\r\n                for (var children_1 = tslib_1.__values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {\r\n                    var child = children_1_1.value;\r\n                    if (types_1.isArray(child)) {\r\n                        try {\r\n                            for (var child_1 = (e_6 = void 0, tslib_1.__values(child)), child_1_1 = child_1.next(); !child_1_1.done; child_1_1 = child_1.next()) {\r\n                                var _child = child_1_1.value;\r\n                                append(_child);\r\n                            }\r\n                        }\r\n                        catch (e_6_1) {\r\n                            e_6 = { error: e_6_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (child_1_1 && !child_1_1.done && (_f = child_1.return))\r\n                                    _f.call(child_1);\r\n                            }\r\n                            finally {\r\n                                if (e_6)\r\n                                    throw e_6.error;\r\n                            }\r\n                        }\r\n                    }\r\n                    else\r\n                        append(child);\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (children_1_1 && !children_1_1.done && (_e = children_1.return))\r\n                        _e.call(children_1);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            return element;\r\n        };\r\n    };\r\n    function createElement(tag, attrs) {\r\n        var children = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            children[_i - 2] = arguments[_i];\r\n        }\r\n        return _createElement(tag).apply(void 0, tslib_1.__spread([attrs], children));\r\n    }\r\n    exports.createElement = createElement;\r\n    exports.div = _createElement(\"div\"), exports.span = _createElement(\"span\"), exports.canvas = _createElement(\"canvas\"), exports.link = _createElement(\"link\"), exports.style = _createElement(\"style\"), exports.a = _createElement(\"a\"), exports.p = _createElement(\"p\"), exports.i = _createElement(\"i\"), exports.pre = _createElement(\"pre\"), exports.button = _createElement(\"button\"), exports.label = _createElement(\"label\"), exports.input = _createElement(\"input\"), exports.select = _createElement(\"select\"), exports.option = _createElement(\"option\"), exports.optgroup = _createElement(\"optgroup\"), exports.textarea = _createElement(\"textarea\");\r\n    function nbsp() {\r\n        return document.createTextNode(\"\\u00a0\");\r\n    }\r\n    exports.nbsp = nbsp;\r\n    function append(element) {\r\n        var e_8, _a;\r\n        var children = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            children[_i - 1] = arguments[_i];\r\n        }\r\n        try {\r\n            for (var children_2 = tslib_1.__values(children), children_2_1 = children_2.next(); !children_2_1.done; children_2_1 = children_2.next()) {\r\n                var child = children_2_1.value;\r\n                element.appendChild(child);\r\n            }\r\n        }\r\n        catch (e_8_1) {\r\n            e_8 = { error: e_8_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (children_2_1 && !children_2_1.done && (_a = children_2.return))\r\n                    _a.call(children_2);\r\n            }\r\n            finally {\r\n                if (e_8)\r\n                    throw e_8.error;\r\n            }\r\n        }\r\n    }\r\n    exports.append = append;\r\n    function remove(element) {\r\n        var parent = element.parentNode;\r\n        if (parent != null) {\r\n            parent.removeChild(element);\r\n        }\r\n    }\r\n    exports.remove = remove;\r\n    exports.removeElement = remove;\r\n    function replaceWith(element, replacement) {\r\n        var parent = element.parentNode;\r\n        if (parent != null) {\r\n            parent.replaceChild(replacement, element);\r\n        }\r\n    }\r\n    exports.replaceWith = replaceWith;\r\n    function prepend(element) {\r\n        var e_9, _a;\r\n        var nodes = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            nodes[_i - 1] = arguments[_i];\r\n        }\r\n        var first = element.firstChild;\r\n        try {\r\n            for (var nodes_1 = tslib_1.__values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {\r\n                var node = nodes_1_1.value;\r\n                element.insertBefore(node, first);\r\n            }\r\n        }\r\n        catch (e_9_1) {\r\n            e_9 = { error: e_9_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return))\r\n                    _a.call(nodes_1);\r\n            }\r\n            finally {\r\n                if (e_9)\r\n                    throw e_9.error;\r\n            }\r\n        }\r\n    }\r\n    exports.prepend = prepend;\r\n    function empty(node, attrs) {\r\n        var e_10, _a;\r\n        if (attrs === void 0) {\r\n            attrs = false;\r\n        }\r\n        var child;\r\n        while (child = node.firstChild) {\r\n            node.removeChild(child);\r\n        }\r\n        if (attrs && node instanceof Element) {\r\n            try {\r\n                for (var _b = tslib_1.__values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var attr = _c.value;\r\n                    node.removeAttributeNode(attr);\r\n                }\r\n            }\r\n            catch (e_10_1) {\r\n                e_10 = { error: e_10_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_10)\r\n                        throw e_10.error;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    exports.empty = empty;\r\n    function display(element) {\r\n        element.style.display = \"\";\r\n    }\r\n    exports.display = display;\r\n    function undisplay(element) {\r\n        element.style.display = \"none\";\r\n    }\r\n    exports.undisplay = undisplay;\r\n    function show(element) {\r\n        element.style.visibility = \"\";\r\n    }\r\n    exports.show = show;\r\n    function hide(element) {\r\n        element.style.visibility = \"hidden\";\r\n    }\r\n    exports.hide = hide;\r\n    function offset(element) {\r\n        var rect = element.getBoundingClientRect();\r\n        return {\r\n            top: rect.top + window.pageYOffset - document.documentElement.clientTop,\r\n            left: rect.left + window.pageXOffset - document.documentElement.clientLeft,\r\n        };\r\n    }\r\n    exports.offset = offset;\r\n    function matches(el, selector) {\r\n        var p = Element.prototype;\r\n        var f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector;\r\n        return f.call(el, selector);\r\n    }\r\n    exports.matches = matches;\r\n    function parent(el, selector) {\r\n        var node = el;\r\n        while (node = node.parentElement) {\r\n            if (matches(node, selector))\r\n                return node;\r\n        }\r\n        return null;\r\n    }\r\n    exports.parent = parent;\r\n    function num(value) {\r\n        return parseFloat(value) || 0;\r\n    }\r\n    function extents(el) {\r\n        var style = getComputedStyle(el);\r\n        return {\r\n            border: {\r\n                top: num(style.borderTopWidth),\r\n                bottom: num(style.borderBottomWidth),\r\n                left: num(style.borderLeftWidth),\r\n                right: num(style.borderRightWidth),\r\n            },\r\n            margin: {\r\n                top: num(style.marginTop),\r\n                bottom: num(style.marginBottom),\r\n                left: num(style.marginLeft),\r\n                right: num(style.marginRight),\r\n            },\r\n            padding: {\r\n                top: num(style.paddingTop),\r\n                bottom: num(style.paddingBottom),\r\n                left: num(style.paddingLeft),\r\n                right: num(style.paddingRight),\r\n            },\r\n        };\r\n    }\r\n    exports.extents = extents;\r\n    function size(el) {\r\n        var rect = el.getBoundingClientRect();\r\n        return {\r\n            width: Math.ceil(rect.width),\r\n            height: Math.ceil(rect.height),\r\n        };\r\n    }\r\n    exports.size = size;\r\n    function scroll_size(el) {\r\n        return {\r\n            width: Math.ceil(el.scrollWidth),\r\n            height: Math.ceil(el.scrollHeight),\r\n        };\r\n    }\r\n    exports.scroll_size = scroll_size;\r\n    function outer_size(el) {\r\n        var _a = extents(el).margin, left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n        var _b = size(el), width = _b.width, height = _b.height;\r\n        return {\r\n            width: Math.ceil(width + left + right),\r\n            height: Math.ceil(height + top + bottom),\r\n        };\r\n    }\r\n    exports.outer_size = outer_size;\r\n    function content_size(el) {\r\n        var e_11, _a;\r\n        var _b = el.getBoundingClientRect(), left = _b.left, top = _b.top;\r\n        var padding = extents(el).padding;\r\n        var width = 0;\r\n        var height = 0;\r\n        try {\r\n            for (var _c = tslib_1.__values(el.children), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var child = _d.value;\r\n                var rect = child.getBoundingClientRect();\r\n                width = Math.max(width, Math.ceil(rect.left - left - padding.left + rect.width));\r\n                height = Math.max(height, Math.ceil(rect.top - top - padding.top + rect.height));\r\n            }\r\n        }\r\n        catch (e_11_1) {\r\n            e_11 = { error: e_11_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _c.return))\r\n                    _a.call(_c);\r\n            }\r\n            finally {\r\n                if (e_11)\r\n                    throw e_11.error;\r\n            }\r\n        }\r\n        return { width: width, height: height };\r\n    }\r\n    exports.content_size = content_size;\r\n    function position(el, box, margin) {\r\n        var style = el.style;\r\n        style.left = box.x + \"px\";\r\n        style.top = box.y + \"px\";\r\n        style.width = box.width + \"px\";\r\n        style.height = box.height + \"px\";\r\n        if (margin == null)\r\n            style.margin = \"\";\r\n        else {\r\n            var top = margin.top, right = margin.right, bottom = margin.bottom, left = margin.left;\r\n            style.margin = top + \"px \" + right + \"px \" + bottom + \"px \" + left + \"px\";\r\n        }\r\n    }\r\n    exports.position = position;\r\n    function children(el) {\r\n        return Array.from(el.children);\r\n    }\r\n    exports.children = children;\r\n    var ClassList = /** @class */ (function () {\r\n        function ClassList(el) {\r\n            this.el = el;\r\n            this.classList = el.classList;\r\n        }\r\n        Object.defineProperty(ClassList.prototype, \"values\", {\r\n            get: function () {\r\n                var values = [];\r\n                for (var i_1 = 0; i_1 < this.classList.length; i_1++) {\r\n                    var item = this.classList.item(i_1);\r\n                    if (item != null)\r\n                        values.push(item);\r\n                }\r\n                return values;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ClassList.prototype.has = function (cls) {\r\n            return this.classList.contains(cls);\r\n        };\r\n        ClassList.prototype.add = function () {\r\n            var e_12, _a;\r\n            var classes = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                classes[_i] = arguments[_i];\r\n            }\r\n            try {\r\n                for (var classes_1 = tslib_1.__values(classes), classes_1_1 = classes_1.next(); !classes_1_1.done; classes_1_1 = classes_1.next()) {\r\n                    var cls = classes_1_1.value;\r\n                    this.classList.add(cls);\r\n                }\r\n            }\r\n            catch (e_12_1) {\r\n                e_12 = { error: e_12_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (classes_1_1 && !classes_1_1.done && (_a = classes_1.return))\r\n                        _a.call(classes_1);\r\n                }\r\n                finally {\r\n                    if (e_12)\r\n                        throw e_12.error;\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        ClassList.prototype.remove = function () {\r\n            var e_13, _a;\r\n            var classes = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                classes[_i] = arguments[_i];\r\n            }\r\n            try {\r\n                for (var classes_2 = tslib_1.__values(classes), classes_2_1 = classes_2.next(); !classes_2_1.done; classes_2_1 = classes_2.next()) {\r\n                    var cls = classes_2_1.value;\r\n                    this.classList.remove(cls);\r\n                }\r\n            }\r\n            catch (e_13_1) {\r\n                e_13 = { error: e_13_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (classes_2_1 && !classes_2_1.done && (_a = classes_2.return))\r\n                        _a.call(classes_2);\r\n                }\r\n                finally {\r\n                    if (e_13)\r\n                        throw e_13.error;\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        ClassList.prototype.clear = function () {\r\n            var e_14, _a;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.values), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var cls = _c.value;\r\n                    if (cls != \"bk\")\r\n                        this.classList.remove(cls);\r\n                }\r\n            }\r\n            catch (e_14_1) {\r\n                e_14 = { error: e_14_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_14)\r\n                        throw e_14.error;\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        ClassList.prototype.toggle = function (cls, activate) {\r\n            var add = activate != null ? activate : !this.has(cls);\r\n            if (add)\r\n                this.add(cls);\r\n            else\r\n                this.remove(cls);\r\n            return this;\r\n        };\r\n        return ClassList;\r\n    }());\r\n    exports.ClassList = ClassList;\r\n    ClassList.__name__ = \"ClassList\";\r\n    function classes(el) {\r\n        return new ClassList(el);\r\n    }\r\n    exports.classes = classes;\r\n    function toggle_attribute(el, attr, state) {\r\n        if (state == null) {\r\n            state = !el.hasAttribute(attr);\r\n        }\r\n        if (state)\r\n            el.setAttribute(attr, \"true\");\r\n        else\r\n            el.removeAttribute(attr);\r\n    }\r\n    exports.toggle_attribute = toggle_attribute;\r\n    (function (Keys) {\r\n        Keys[Keys[\"Backspace\"] = 8] = \"Backspace\";\r\n        Keys[Keys[\"Tab\"] = 9] = \"Tab\";\r\n        Keys[Keys[\"Enter\"] = 13] = \"Enter\";\r\n        Keys[Keys[\"Esc\"] = 27] = \"Esc\";\r\n        Keys[Keys[\"PageUp\"] = 33] = \"PageUp\";\r\n        Keys[Keys[\"PageDown\"] = 34] = \"PageDown\";\r\n        Keys[Keys[\"Left\"] = 37] = \"Left\";\r\n        Keys[Keys[\"Up\"] = 38] = \"Up\";\r\n        Keys[Keys[\"Right\"] = 39] = \"Right\";\r\n        Keys[Keys[\"Down\"] = 40] = \"Down\";\r\n        Keys[Keys[\"Delete\"] = 46] = \"Delete\";\r\n    })(exports.Keys || (exports.Keys = {}));\r\n    function undisplayed(el, fn) {\r\n        var display = el.style.display;\r\n        el.style.display = \"none\";\r\n        try {\r\n            return fn();\r\n        }\r\n        finally {\r\n            el.style.display = display;\r\n        }\r\n    }\r\n    exports.undisplayed = undisplayed;\r\n    function unsized(el, fn) {\r\n        return sized(el, {}, fn);\r\n    }\r\n    exports.unsized = unsized;\r\n    function sized(el, size, fn) {\r\n        var _a = el.style, width = _a.width, height = _a.height, position = _a.position, display = _a.display;\r\n        el.style.position = \"absolute\";\r\n        el.style.display = \"\";\r\n        el.style.width = size.width != null && size.width != Infinity ? size.width + \"px\" : \"auto\";\r\n        el.style.height = size.height != null && size.height != Infinity ? size.height + \"px\" : \"auto\";\r\n        try {\r\n            return fn();\r\n        }\r\n        finally {\r\n            el.style.position = position;\r\n            el.style.display = display;\r\n            el.style.width = width;\r\n            el.style.height = height;\r\n        }\r\n    }\r\n    exports.sized = sized;\r\n    var StyleSheet = /** @class */ (function () {\r\n        function StyleSheet(root) {\r\n            this.root = root;\r\n            this.known = new Set();\r\n            this.style = exports.style({ type: \"text/css\" });\r\n            prepend(root, this.style);\r\n        }\r\n        StyleSheet.prototype.append = function (css) {\r\n            if (!this.known.has(css)) {\r\n                this.style.appendChild(document.createTextNode(css));\r\n                this.known.add(css);\r\n            }\r\n        };\r\n        return StyleSheet;\r\n    }());\r\n    exports.StyleSheet = StyleSheet;\r\n    StyleSheet.__name__ = \"StyleSheet\";\r\n    exports.stylesheet = new StyleSheet(document.head);\r\n}\r\n","/* styles\\root.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root {\\n  position: relative;\\n  width: auto;\\n  height: auto;\\n  z-index: 0;\\n  box-sizing: border-box;\\n  font-family: Helvetica, Arial, sans-serif;\\n  font-size: 13px;\\n}\\n.bk-root .bk,\\n.bk-root .bk:before,\\n.bk-root .bk:after {\\n  box-sizing: inherit;\\n  margin: 0;\\n  border: 0;\\n  padding: 0;\\n  background-image: none;\\n  font-family: inherit;\\n  font-size: 100%;\\n  line-height: 1.42857143;\\n}\\n.bk-root pre.bk {\\n  font-family: Courier, monospace;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* core\\visuals.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ./property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ./properties */);\r\n    var color_1 = require(137) /* ./util/color */;\r\n    var types_1 = require(123) /* ./util/types */;\r\n    var svg_1 = require(190) /* ./util/svg */;\r\n    var canvas_1 = require(192) /* ../models/canvas/canvas */;\r\n    function color2css(color, alpha) {\r\n        var _b = tslib_1.__read(types_1.isString(color) ? color_1.color2rgba(color) : color_1.decode_rgba(color), 4), r = _b[0], g = _b[1], b = _b[2], a = _b[3];\r\n        return \"rgba(\" + r * 255 + \", \" + g * 255 + \", \" + b * 255 + \", \" + (a == 1.0 ? alpha : a) + \")\";\r\n    }\r\n    function _horz(ctx, h, h2) {\r\n        ctx.moveTo(0, h2 + 0.5);\r\n        ctx.lineTo(h, h2 + 0.5);\r\n        ctx.stroke();\r\n    }\r\n    function _vert(ctx, h, h2) {\r\n        ctx.moveTo(h2 + 0.5, 0);\r\n        ctx.lineTo(h2 + 0.5, h);\r\n        ctx.stroke();\r\n    }\r\n    function _x(ctx, h) {\r\n        ctx.moveTo(0, h);\r\n        ctx.lineTo(h, 0);\r\n        ctx.stroke();\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(h, h);\r\n        ctx.stroke();\r\n    }\r\n    exports.hatch_aliases = {\r\n        \" \": \"blank\",\r\n        \".\": \"dot\",\r\n        o: \"ring\",\r\n        \"-\": \"horizontal_line\",\r\n        \"|\": \"vertical_line\",\r\n        \"+\": \"cross\",\r\n        \"\\\"\": \"horizontal_dash\",\r\n        \":\": \"vertical_dash\",\r\n        \"@\": \"spiral\",\r\n        \"/\": \"right_diagonal_line\",\r\n        \"\\\\\": \"left_diagonal_line\",\r\n        x: \"diagonal_cross\",\r\n        \",\": \"right_diagonal_dash\",\r\n        \"`\": \"left_diagonal_dash\",\r\n        v: \"horizontal_wave\",\r\n        \">\": \"vertical_wave\",\r\n        \"*\": \"criss_cross\",\r\n    };\r\n    function create_hatch_canvas(ctx, hatch_pattern, hatch_color, hatch_alpha, hatch_scale, hatch_weight) {\r\n        var _a;\r\n        var h = hatch_scale;\r\n        var h2 = h / 2;\r\n        var h4 = h2 / 2;\r\n        ctx.strokeStyle = color2css(hatch_color, hatch_alpha);\r\n        ctx.lineCap = \"square\";\r\n        ctx.fillStyle = hatch_color;\r\n        ctx.lineWidth = hatch_weight;\r\n        switch ((_a = exports.hatch_aliases[hatch_pattern]) !== null && _a !== void 0 ? _a : hatch_pattern) {\r\n            // we should not need these if code conditions on hatch.doit, but\r\n            // include them here just for completeness\r\n            case \"blank\":\r\n                break;\r\n            case \"dot\":\r\n                ctx.arc(h2, h2, h2 / 2, 0, 2 * Math.PI, true);\r\n                ctx.fill();\r\n                break;\r\n            case \"ring\":\r\n                ctx.arc(h2, h2, h2 / 2, 0, 2 * Math.PI, true);\r\n                ctx.stroke();\r\n                break;\r\n            case \"horizontal_line\":\r\n                _horz(ctx, h, h2);\r\n                break;\r\n            case \"vertical_line\":\r\n                _vert(ctx, h, h2);\r\n                break;\r\n            case \"cross\":\r\n                _horz(ctx, h, h2);\r\n                _vert(ctx, h, h2);\r\n                break;\r\n            case \"horizontal_dash\":\r\n                _horz(ctx, h2, h2);\r\n                break;\r\n            case \"vertical_dash\":\r\n                _vert(ctx, h2, h2);\r\n                break;\r\n            case \"spiral\": {\r\n                var h30 = h / 30;\r\n                ctx.moveTo(h2, h2);\r\n                for (var i = 0; i < 360; i++) {\r\n                    var angle = 0.1 * i;\r\n                    var x = h2 + (h30 * angle) * Math.cos(angle);\r\n                    var y = h2 + (h30 * angle) * Math.sin(angle);\r\n                    ctx.lineTo(x, y);\r\n                }\r\n                ctx.stroke();\r\n                break;\r\n            }\r\n            case \"right_diagonal_line\":\r\n                ctx.moveTo(-h4 + 0.5, h);\r\n                ctx.lineTo(h4 + 0.5, 0);\r\n                ctx.stroke();\r\n                ctx.moveTo(h4 + 0.5, h);\r\n                ctx.lineTo(3 * h4 + 0.5, 0);\r\n                ctx.stroke();\r\n                ctx.moveTo(3 * h4 + 0.5, h);\r\n                ctx.lineTo(5 * h4 + 0.5, 0);\r\n                ctx.stroke();\r\n                ctx.stroke();\r\n                break;\r\n            case \"left_diagonal_line\":\r\n                ctx.moveTo(h4 + 0.5, h);\r\n                ctx.lineTo(-h4 + 0.5, 0);\r\n                ctx.stroke();\r\n                ctx.moveTo(3 * h4 + 0.5, h);\r\n                ctx.lineTo(h4 + 0.5, 0);\r\n                ctx.stroke();\r\n                ctx.moveTo(5 * h4 + 0.5, h);\r\n                ctx.lineTo(3 * h4 + 0.5, 0);\r\n                ctx.stroke();\r\n                ctx.stroke();\r\n                break;\r\n            case \"diagonal_cross\":\r\n                _x(ctx, h);\r\n                break;\r\n            case \"right_diagonal_dash\":\r\n                ctx.moveTo(h4 + 0.5, 3 * h4 + 0.5);\r\n                ctx.lineTo(3 * h4 + 0.5, h4 + 0.5);\r\n                ctx.stroke();\r\n                break;\r\n            case \"left_diagonal_dash\":\r\n                ctx.moveTo(h4 + 0.5, h4 + 0.5);\r\n                ctx.lineTo(3 * h4 + 0.5, 3 * h4 + 0.5);\r\n                ctx.stroke();\r\n                break;\r\n            case \"horizontal_wave\":\r\n                ctx.moveTo(0, h4);\r\n                ctx.lineTo(h2, 3 * h4);\r\n                ctx.lineTo(h, h4);\r\n                ctx.stroke();\r\n                break;\r\n            case \"vertical_wave\":\r\n                ctx.moveTo(h4, 0);\r\n                ctx.lineTo(3 * h4, h2);\r\n                ctx.lineTo(h4, h);\r\n                ctx.stroke();\r\n                break;\r\n            case \"criss_cross\":\r\n                _x(ctx, h);\r\n                _horz(ctx, h, h2);\r\n                _vert(ctx, h, h2);\r\n                break;\r\n        }\r\n    }\r\n    var ContextProperties = /** @class */ (function () {\r\n        function ContextProperties(obj, prefix) {\r\n            var e_1, _b;\r\n            if (prefix === void 0) {\r\n                prefix = \"\";\r\n            }\r\n            this.obj = obj;\r\n            this.prefix = prefix;\r\n            this.cache = {};\r\n            try {\r\n                for (var _c = tslib_1.__values(this.attrs), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var attr = _d.value;\r\n                    this[attr] = obj.properties[prefix + attr];\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        }\r\n        ContextProperties.prototype.warm_cache = function (source, all_indices) {\r\n            var e_2, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this.attrs), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var attr = _d.value;\r\n                    var prop = this.obj.properties[this.prefix + attr];\r\n                    if (prop.spec.value !== undefined) // TODO (bev) better test?\r\n                        this.cache[attr] = prop.spec.value;\r\n                    else if (source != null && prop instanceof p.VectorSpec) {\r\n                        var array = prop.array(source);\r\n                        var subarray = all_indices != null ? all_indices.select(array) : array;\r\n                        this.cache[attr + \"_array\"] = subarray;\r\n                    }\r\n                    else\r\n                        throw new Error(\"source is required with a vectorized visual property\");\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        ContextProperties.prototype.cache_select = function (attr, i) {\r\n            var prop = this.obj.properties[this.prefix + attr];\r\n            var value;\r\n            if (prop.spec.value !== undefined) // TODO (bev) better test?\r\n                this.cache[attr] = value = prop.spec.value;\r\n            else\r\n                this.cache[attr] = value = this.cache[attr + \"_array\"][i];\r\n            return value;\r\n        };\r\n        ContextProperties.prototype.get_array = function (attr) {\r\n            return this.cache[attr + \"_array\"];\r\n        };\r\n        ContextProperties.prototype.set_vectorize = function (ctx, i) {\r\n            this._set_vectorize(ctx, i);\r\n        };\r\n        return ContextProperties;\r\n    }());\r\n    exports.ContextProperties = ContextProperties;\r\n    ContextProperties.__name__ = \"ContextProperties\";\r\n    var Line = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Line, _super);\r\n        function Line() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Line.prototype.set_value = function (ctx) {\r\n            var color = this.line_color.value();\r\n            var alpha = this.line_alpha.value();\r\n            ctx.strokeStyle = color2css(color, alpha);\r\n            ctx.lineWidth = this.line_width.value();\r\n            ctx.lineJoin = this.line_join.value();\r\n            ctx.lineCap = this.line_cap.value();\r\n            ctx.lineDash = this.line_dash.value();\r\n            ctx.lineDashOffset = this.line_dash_offset.value();\r\n        };\r\n        Object.defineProperty(Line.prototype, \"doit\", {\r\n            get: function () {\r\n                return !(this.line_color.spec.value === null ||\r\n                    this.line_alpha.spec.value == 0 ||\r\n                    this.line_width.spec.value == 0);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Line.prototype._set_vectorize = function (ctx, i) {\r\n            var color = this.cache_select(\"line_color\", i);\r\n            var alpha = this.cache_select(\"line_alpha\", i);\r\n            var width = this.cache_select(\"line_width\", i);\r\n            var join = this.cache_select(\"line_join\", i);\r\n            var cap = this.cache_select(\"line_cap\", i);\r\n            var dash = this.cache_select(\"line_dash\", i);\r\n            var offset = this.cache_select(\"line_dash_offset\", i);\r\n            ctx.strokeStyle = color2css(color, alpha);\r\n            ctx.lineWidth = width;\r\n            ctx.lineJoin = join;\r\n            ctx.lineCap = cap;\r\n            ctx.lineDash = dash;\r\n            ctx.lineDashOffset = offset;\r\n        };\r\n        Line.prototype.color_value = function () {\r\n            return color2css(this.line_color.value(), this.line_alpha.value());\r\n        };\r\n        return Line;\r\n    }(ContextProperties));\r\n    exports.Line = Line;\r\n    Line.__name__ = \"Line\";\r\n    Line.prototype.attrs = Object.keys(mixins.LineVector);\r\n    var Fill = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Fill, _super);\r\n        function Fill() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Fill.prototype.set_value = function (ctx) {\r\n            var color = this.fill_color.value();\r\n            var alpha = this.fill_alpha.value();\r\n            ctx.fillStyle = color2css(color, alpha);\r\n        };\r\n        Object.defineProperty(Fill.prototype, \"doit\", {\r\n            get: function () {\r\n                return !(this.fill_color.spec.value === null ||\r\n                    this.fill_alpha.spec.value == 0);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Fill.prototype._set_vectorize = function (ctx, i) {\r\n            var color = this.cache_select(\"fill_color\", i);\r\n            var alpha = this.cache_select(\"fill_alpha\", i);\r\n            ctx.fillStyle = color2css(color, alpha);\r\n        };\r\n        Fill.prototype.color_value = function () {\r\n            return color2css(this.fill_color.value(), this.fill_alpha.value());\r\n        };\r\n        return Fill;\r\n    }(ContextProperties));\r\n    exports.Fill = Fill;\r\n    Fill.__name__ = \"Fill\";\r\n    Fill.prototype.attrs = Object.keys(mixins.FillVector);\r\n    var Hatch = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Hatch, _super);\r\n        function Hatch() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Hatch.prototype.cache_select = function (name, i) {\r\n            var value;\r\n            if (name == \"pattern\") {\r\n                var color_2 = this.cache_select(\"hatch_color\", i);\r\n                var alpha_1 = this.cache_select(\"hatch_alpha\", i);\r\n                var scale_1 = this.cache_select(\"hatch_scale\", i);\r\n                var pattern_1 = this.cache_select(\"hatch_pattern\", i);\r\n                var weight_1 = this.cache_select(\"hatch_weight\", i);\r\n                var hatch_extra = this.cache.hatch_extra;\r\n                if (hatch_extra != null && hatch_extra.hasOwnProperty(pattern_1)) {\r\n                    var custom = hatch_extra[pattern_1];\r\n                    this.cache.pattern = custom.get_pattern(color_2, alpha_1, scale_1, weight_1);\r\n                }\r\n                else {\r\n                    this.cache.pattern = function (ctx) {\r\n                        // TODO: this needs a canvas provider instead of trying to guess what to use\r\n                        var output_backend = ctx instanceof svg_1.SVGRenderingContext2D ? \"svg\" : \"canvas\";\r\n                        var region = new canvas_1.CanvasLayer(output_backend, true);\r\n                        region.resize(scale_1, scale_1);\r\n                        region.prepare();\r\n                        create_hatch_canvas(region.ctx, pattern_1, color_2, alpha_1, scale_1, weight_1);\r\n                        return ctx.createPattern(region.canvas, \"repeat\");\r\n                    };\r\n                }\r\n            }\r\n            else\r\n                value = _super.prototype.cache_select.call(this, name, i);\r\n            return value;\r\n        };\r\n        Hatch.prototype._try_defer = function (defer_func) {\r\n            var _b = this.cache, hatch_pattern = _b.hatch_pattern, hatch_extra = _b.hatch_extra;\r\n            if (hatch_extra != null && hatch_extra.hasOwnProperty(hatch_pattern)) {\r\n                var custom = hatch_extra[hatch_pattern];\r\n                custom.onload(defer_func);\r\n            }\r\n        };\r\n        Object.defineProperty(Hatch.prototype, \"doit\", {\r\n            get: function () {\r\n                return !(this.hatch_color.spec.value === null ||\r\n                    this.hatch_alpha.spec.value == 0 ||\r\n                    this.hatch_pattern.spec.value == \" \" ||\r\n                    this.hatch_pattern.spec.value == \"blank\" ||\r\n                    this.hatch_pattern.spec.value === null);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Hatch.prototype.doit2 = function (ctx, i, ready_func, defer_func) {\r\n            if (!this.doit) {\r\n                return;\r\n            }\r\n            this.cache_select(\"pattern\", i);\r\n            var pattern = this.cache.pattern(ctx);\r\n            if (pattern == null) {\r\n                this._try_defer(defer_func);\r\n            }\r\n            else {\r\n                this.set_vectorize(ctx, i);\r\n                ready_func();\r\n            }\r\n        };\r\n        Hatch.prototype._set_vectorize = function (ctx, i) {\r\n            this.cache_select(\"pattern\", i);\r\n            ctx.fillStyle = this.cache.pattern(ctx);\r\n        };\r\n        Hatch.prototype.color_value = function () {\r\n            return color2css(this.hatch_color.value(), this.hatch_alpha.value());\r\n        };\r\n        return Hatch;\r\n    }(ContextProperties));\r\n    exports.Hatch = Hatch;\r\n    Hatch.__name__ = \"Hatch\";\r\n    Hatch.prototype.attrs = Object.keys(mixins.HatchVector);\r\n    var Text = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Text, _super);\r\n        function Text() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Text.prototype.color_value = function () {\r\n            return color2css(this.text_color.value(), this.text_alpha.value());\r\n        };\r\n        Text.prototype.font_value = function () {\r\n            var text_font = this.text_font.value();\r\n            var text_font_size = this.text_font_size.value();\r\n            var text_font_style = this.text_font_style.value();\r\n            return text_font_style + \" \" + text_font_size + \" \" + text_font;\r\n        };\r\n        Text.prototype.v_font_value = function (i) {\r\n            _super.prototype.cache_select.call(this, \"text_font_style\", i);\r\n            _super.prototype.cache_select.call(this, \"text_font_size\", i);\r\n            _super.prototype.cache_select.call(this, \"text_font\", i);\r\n            var _b = this.cache, text_font_style = _b.text_font_style, text_font_size = _b.text_font_size, text_font = _b.text_font;\r\n            return text_font_style + \" \" + text_font_size + \" \" + text_font;\r\n        };\r\n        Text.prototype.cache_select = function (name, i) {\r\n            var value;\r\n            if (name == \"font\") {\r\n                this.cache.font = value = this.v_font_value(i);\r\n            }\r\n            else\r\n                value = _super.prototype.cache_select.call(this, name, i);\r\n            return value;\r\n        };\r\n        Text.prototype.set_value = function (ctx) {\r\n            var color = this.text_color.value();\r\n            var alpha = this.text_alpha.value();\r\n            ctx.fillStyle = color2css(color, alpha);\r\n            ctx.font = this.font_value();\r\n            ctx.textAlign = this.text_align.value();\r\n            ctx.textBaseline = this.text_baseline.value();\r\n        };\r\n        Object.defineProperty(Text.prototype, \"doit\", {\r\n            get: function () {\r\n                return !(this.text_color.spec.value === null ||\r\n                    this.text_alpha.spec.value == 0);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Text.prototype._set_vectorize = function (ctx, i) {\r\n            var color = this.cache_select(\"text_color\", i);\r\n            var alpha = this.cache_select(\"text_alpha\", i);\r\n            var font = this.cache_select(\"font\", i);\r\n            var align = this.cache_select(\"text_align\", i);\r\n            var baseline = this.cache_select(\"text_baseline\", i);\r\n            ctx.fillStyle = color2css(color, alpha);\r\n            ctx.font = font;\r\n            ctx.textAlign = align;\r\n            ctx.textBaseline = baseline;\r\n        };\r\n        return Text;\r\n    }(ContextProperties));\r\n    exports.Text = Text;\r\n    Text.__name__ = \"Text\";\r\n    Text.prototype.attrs = Object.keys(mixins.TextVector);\r\n    var Visuals = /** @class */ (function () {\r\n        function Visuals(model) {\r\n            var e_3, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(model._mixins), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var mixin = _d.value;\r\n                    var _e = tslib_1.__read(mixin.split(\":\"), 2), name = _e[0], _f = _e[1], prefix = _f === void 0 ? \"\" : _f;\r\n                    var cls = void 0;\r\n                    switch (name) {\r\n                        case \"line\":\r\n                            cls = Line;\r\n                            break;\r\n                        case \"fill\":\r\n                            cls = Fill;\r\n                            break;\r\n                        case \"hatch\":\r\n                            cls = Hatch;\r\n                            break;\r\n                        case \"text\":\r\n                            cls = Text;\r\n                            break;\r\n                        default:\r\n                            throw new Error(\"unknown visual: \" + name);\r\n                    }\r\n                    this[prefix + name] = new cls(model, prefix);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n        }\r\n        Visuals.prototype.warm_cache = function (source, all_indices) {\r\n            for (var name in this) {\r\n                if (this.hasOwnProperty(name)) {\r\n                    var prop = this[name];\r\n                    if (prop instanceof ContextProperties)\r\n                        prop.warm_cache(source, all_indices);\r\n                }\r\n            }\r\n        };\r\n        return Visuals;\r\n    }());\r\n    exports.Visuals = Visuals;\r\n    Visuals.__name__ = \"Visuals\";\r\n}\r\n","/* core\\util\\svg.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    /**\r\n     * Based on https://github.com/gliffy/canvas2svg\r\n     */\r\n    var affine_1 = require(191) /* ./affine */;\r\n    var types_1 = require(123) /* ./types */;\r\n    var dom_1 = require(187) /* ../dom */;\r\n    // helper function that generates a random string\r\n    function randomString(holder) {\r\n        if (!holder) {\r\n            throw new Error(\"cannot create a random attribute name for an undefined object\");\r\n        }\r\n        var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\";\r\n        var randomstring = \"\";\r\n        do {\r\n            randomstring = \"\";\r\n            for (var i = 0; i < 12; i++) {\r\n                randomstring += chars[Math.floor(Math.random() * chars.length)];\r\n            }\r\n        } while (holder[randomstring]);\r\n        return randomstring;\r\n    }\r\n    // helper function to map named to numbered entities\r\n    function createNamedToNumberedLookup(input, radix) {\r\n        var lookup = new Map();\r\n        var items = input.split(',');\r\n        radix = radix || 10;\r\n        // Map from named to numbered entities.\r\n        for (var i = 0; i < items.length; i += 2) {\r\n            var entity = '&' + items[i + 1] + ';';\r\n            var base10 = parseInt(items[i], radix);\r\n            lookup.set(entity, '&#' + base10 + ';');\r\n        }\r\n        // FF and IE need to create a regex from hex values ie &nbsp; == \\xa0\r\n        lookup.set(\"\\\\xa0\", '&#160;');\r\n        return lookup;\r\n    }\r\n    // helper function to map canvas-textAlign to svg-textAnchor\r\n    function getTextAnchor(textAlign) {\r\n        // TODO: support rtl languages\r\n        var mapping = { left: \"start\", right: \"end\", center: \"middle\", start: \"start\", end: \"end\" };\r\n        return mapping[textAlign] || mapping.start;\r\n    }\r\n    // helper function to map canvas-textBaseline to svg-dominantBaseline\r\n    function getDominantBaseline(textBaseline) {\r\n        // INFO: not supported in all browsers\r\n        var mapping = { alphabetic: \"alphabetic\", hanging: \"hanging\", top: \"text-before-edge\", bottom: \"text-after-edge\", middle: \"central\" };\r\n        return mapping[textBaseline] || mapping.alphabetic;\r\n    }\r\n    // Unpack entities lookup where the numbers are in radix 32 to reduce the size\r\n    // entity mapping courtesy of tinymce\r\n    var namedEntities = createNamedToNumberedLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' +\r\n        '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' +\r\n        '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' +\r\n        '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' +\r\n        '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' +\r\n        '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' +\r\n        '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' +\r\n        '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' +\r\n        '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' +\r\n        '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' +\r\n        'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' +\r\n        'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' +\r\n        't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' +\r\n        'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' +\r\n        'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' +\r\n        '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' +\r\n        '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' +\r\n        '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' +\r\n        '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' +\r\n        '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' +\r\n        'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' +\r\n        'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' +\r\n        'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' +\r\n        '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' +\r\n        '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\r\n    // Some basic mappings for attributes and default values.\r\n    var STYLES = {\r\n        strokeStyle: {\r\n            svgAttr: \"stroke\",\r\n            canvas: \"#000000\",\r\n            svg: \"none\",\r\n            apply: \"stroke\",\r\n        },\r\n        fillStyle: {\r\n            svgAttr: \"fill\",\r\n            canvas: \"#000000\",\r\n            svg: null,\r\n            apply: \"fill\",\r\n        },\r\n        lineCap: {\r\n            svgAttr: \"stroke-linecap\",\r\n            canvas: \"butt\",\r\n            svg: \"butt\",\r\n            apply: \"stroke\",\r\n        },\r\n        lineJoin: {\r\n            svgAttr: \"stroke-linejoin\",\r\n            canvas: \"miter\",\r\n            svg: \"miter\",\r\n            apply: \"stroke\",\r\n        },\r\n        miterLimit: {\r\n            svgAttr: \"stroke-miterlimit\",\r\n            canvas: 10,\r\n            svg: 4,\r\n            apply: \"stroke\",\r\n        },\r\n        lineWidth: {\r\n            svgAttr: \"stroke-width\",\r\n            canvas: 1,\r\n            svg: 1,\r\n            apply: \"stroke\",\r\n        },\r\n        globalAlpha: {\r\n            svgAttr: \"opacity\",\r\n            canvas: 1,\r\n            svg: 1,\r\n            apply: \"fill stroke\",\r\n        },\r\n        font: {\r\n            // font converts to multiple svg attributes, there is custom logic for this\r\n            canvas: \"10px sans-serif\",\r\n        },\r\n        shadowColor: {\r\n            canvas: \"#000000\",\r\n        },\r\n        shadowOffsetX: {\r\n            canvas: 0,\r\n        },\r\n        shadowOffsetY: {\r\n            canvas: 0,\r\n        },\r\n        shadowBlur: {\r\n            canvas: 0,\r\n        },\r\n        textAlign: {\r\n            canvas: \"start\",\r\n        },\r\n        textBaseline: {\r\n            canvas: \"alphabetic\",\r\n        },\r\n        lineDash: {\r\n            svgAttr: \"stroke-dasharray\",\r\n            canvas: [],\r\n            svg: null,\r\n            apply: \"stroke\",\r\n        },\r\n    };\r\n    var CanvasGradient = /** @class */ (function () {\r\n        function CanvasGradient(gradientNode, ctx) {\r\n            this.__root = gradientNode;\r\n            this.__ctx = ctx;\r\n        }\r\n        /**\r\n         * Adds a color stop to the gradient root\r\n         */\r\n        CanvasGradient.prototype.addColorStop = function (offset, color) {\r\n            var stop = this.__ctx.__createElement(\"stop\");\r\n            stop.setAttribute(\"offset\", \"\" + offset);\r\n            if (color.indexOf(\"rgba\") !== -1) {\r\n                // separate alpha value, since webkit can't handle it\r\n                var regex = /rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?\\.?\\d*)\\s*\\)/gi;\r\n                var matches = regex.exec(color);\r\n                var _d = tslib_1.__read(matches, 5), r = _d[1], g = _d[2], b = _d[3], a = _d[4];\r\n                stop.setAttribute(\"stop-color\", \"rgb(\" + r + \",\" + g + \",\" + b + \")\");\r\n                stop.setAttribute(\"stop-opacity\", a);\r\n            }\r\n            else {\r\n                stop.setAttribute(\"stop-color\", color);\r\n            }\r\n            this.__root.appendChild(stop);\r\n        };\r\n        return CanvasGradient;\r\n    }());\r\n    CanvasGradient.__name__ = \"CanvasGradient\";\r\n    var CanvasPattern = /** @class */ (function () {\r\n        function CanvasPattern(pattern, ctx) {\r\n            this.__root = pattern;\r\n            this.__ctx = ctx;\r\n        }\r\n        return CanvasPattern;\r\n    }());\r\n    CanvasPattern.__name__ = \"CanvasPattern\";\r\n    /**\r\n     * The mock canvas context\r\n     * @param o - options include:\r\n     * ctx - existing Context2D to wrap around\r\n     * width - width of your canvas (defaults to 500)\r\n     * height - height of your canvas (defaults to 500)\r\n     * document - the document object (defaults to the current document)\r\n     */\r\n    var SVGRenderingContext2D /*implements CanvasRenderingContext2D*/ = /** @class */ (function () {\r\n        function SVGRenderingContext2D(options) {\r\n            var _a, _b, _c;\r\n            this.__currentPosition = null;\r\n            this.__currentElementsToStyle = null;\r\n            this._transform = new affine_1.AffineTransform();\r\n            this._clip_path = null;\r\n            this.__document = (_a = options === null || options === void 0 ? void 0 : options.document) !== null && _a !== void 0 ? _a : document;\r\n            // allow passing in an existing context to wrap around\r\n            // if a context is passed in, we know a canvas already exist\r\n            if (options === null || options === void 0 ? void 0 : options.ctx) {\r\n                this.__ctx = options.ctx;\r\n            }\r\n            else {\r\n                this.__canvas = this.__document.createElement(\"canvas\");\r\n                this.__ctx = this.__canvas.getContext(\"2d\");\r\n            }\r\n            this.__setDefaultStyles();\r\n            this.__stack = [];\r\n            // the root svg element\r\n            this.__root = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n            this.__root.setAttribute(\"version\", \"1.1\");\r\n            this.__root.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\r\n            this.__root.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\r\n            this.width = (_b = options === null || options === void 0 ? void 0 : options.width) !== null && _b !== void 0 ? _b : 500;\r\n            this.height = (_c = options === null || options === void 0 ? void 0 : options.height) !== null && _c !== void 0 ? _c : 500;\r\n            // make sure we don't generate the same ids in defs\r\n            this.__ids = {};\r\n            // defs tag\r\n            this.__defs = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\r\n            this.__root.appendChild(this.__defs);\r\n        }\r\n        Object.defineProperty(SVGRenderingContext2D.prototype, \"canvas\", {\r\n            get: function () {\r\n                // XXX: point back to this instance\r\n                return this;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(SVGRenderingContext2D.prototype, \"width\", {\r\n            get: function () {\r\n                return this._width;\r\n            },\r\n            set: function (width) {\r\n                this._width = width;\r\n                this.__root.setAttribute(\"width\", \"\" + width);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(SVGRenderingContext2D.prototype, \"height\", {\r\n            get: function () {\r\n                return this._height;\r\n            },\r\n            set: function (height) {\r\n                this._height = height;\r\n                this.__root.setAttribute(\"height\", \"\" + height);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * Creates the specified svg element\r\n         */\r\n        SVGRenderingContext2D.prototype.__createElement = function (elementName, properties, resetFill) {\r\n            var e_1, _d;\r\n            if (properties === void 0) {\r\n                properties = {};\r\n            }\r\n            if (resetFill === void 0) {\r\n                resetFill = false;\r\n            }\r\n            var element = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", elementName);\r\n            if (resetFill) {\r\n                // if fill or stroke is not specified, the svg element should not display. By default SVG's fill is black.\r\n                element.setAttribute(\"fill\", \"none\");\r\n                element.setAttribute(\"stroke\", \"none\");\r\n            }\r\n            var keys = Object.keys(properties);\r\n            try {\r\n                for (var keys_1 = tslib_1.__values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\r\n                    var key = keys_1_1.value;\r\n                    element.setAttribute(key, \"\" + properties[key]);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (keys_1_1 && !keys_1_1.done && (_d = keys_1.return))\r\n                        _d.call(keys_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return element;\r\n        };\r\n        /**\r\n         * Applies default canvas styles to the context\r\n         */\r\n        SVGRenderingContext2D.prototype.__setDefaultStyles = function () {\r\n            // default 2d canvas context properties see:http://www.w3.org/TR/2dcontext/\r\n            var keys = Object.keys(STYLES);\r\n            var self = this;\r\n            for (var i = 0; i < keys.length; i++) {\r\n                var key = keys[i];\r\n                self[key] = STYLES[key].canvas;\r\n            }\r\n        };\r\n        /**\r\n         * Applies styles on restore\r\n         */\r\n        SVGRenderingContext2D.prototype.__applyStyleState = function (styleState) {\r\n            var keys = Object.keys(styleState);\r\n            var self = this;\r\n            for (var i = 0; i < keys.length; i++) {\r\n                var key = keys[i];\r\n                self[key] = styleState[key];\r\n            }\r\n        };\r\n        /**\r\n         * Gets the current style state\r\n         */\r\n        SVGRenderingContext2D.prototype.__getStyleState = function () {\r\n            var keys = Object.keys(STYLES);\r\n            var styleState = {};\r\n            for (var i = 0; i < keys.length; i++) {\r\n                var key = keys[i];\r\n                styleState[key] = this[key];\r\n            }\r\n            return styleState;\r\n        };\r\n        /**\r\n         * Apples the current styles to the current SVG element. On \"ctx.fill\" or \"ctx.stroke\"\r\n         */\r\n        SVGRenderingContext2D.prototype.__applyStyleToCurrentElement = function (type) {\r\n            var e_2, _d, e_3, _e;\r\n            var currentElement = this.__currentElement;\r\n            var currentStyleGroup = this.__currentElementsToStyle;\r\n            if (currentStyleGroup != null) {\r\n                currentElement.setAttribute(type, \"\");\r\n                currentElement = currentStyleGroup.element;\r\n                try {\r\n                    for (var _f = tslib_1.__values(currentStyleGroup.children), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                        var node = _g.value;\r\n                        node.setAttribute(type, \"\");\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_g && !_g.done && (_d = _f.return))\r\n                            _d.call(_f);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n            var keys = Object.keys(STYLES);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                var style = STYLES[keys[i]];\r\n                var value = this[keys[i]];\r\n                if (style.apply) {\r\n                    if (value instanceof CanvasPattern) {\r\n                        try {\r\n                            for (var _h = (e_3 = void 0, tslib_1.__values(tslib_1.__spread(value.__ctx.__defs.childNodes))), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                                var def = _j.value;\r\n                                if (def instanceof Element) {\r\n                                    var id_1 = def.getAttribute(\"id\");\r\n                                    this.__ids[id_1] = id_1;\r\n                                    this.__defs.appendChild(def);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (e_3_1) {\r\n                            e_3 = { error: e_3_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_j && !_j.done && (_e = _h.return))\r\n                                    _e.call(_h);\r\n                            }\r\n                            finally {\r\n                                if (e_3)\r\n                                    throw e_3.error;\r\n                            }\r\n                        }\r\n                        var id = value.__root.getAttribute(\"id\");\r\n                        currentElement.setAttribute(style.apply, \"url(#\" + id + \")\");\r\n                    }\r\n                    else if (value instanceof CanvasGradient) {\r\n                        var id = value.__root.getAttribute(\"id\");\r\n                        currentElement.setAttribute(style.apply, \"url(#\" + id + \")\");\r\n                    }\r\n                    else if (style.apply.indexOf(type) !== -1 && style.svg !== value) {\r\n                        if ((style.svgAttr === \"stroke\" || style.svgAttr === \"fill\") && types_1.isString(value) && value.indexOf(\"rgba\") !== -1) {\r\n                            // separate alpha value, since illustrator can't handle it\r\n                            var regex = /rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?\\.?\\d*)\\s*\\)/gi;\r\n                            var matches = regex.exec(value);\r\n                            var _k = tslib_1.__read(matches, 5), r = _k[1], g = _k[2], b = _k[3], a = _k[4];\r\n                            currentElement.setAttribute(style.svgAttr, \"rgb(\" + r + \",\" + g + \",\" + b + \")\");\r\n                            // should take globalAlpha here\r\n                            var opacity = parseFloat(a);\r\n                            var globalAlpha = this.globalAlpha;\r\n                            if (globalAlpha != null) {\r\n                                opacity *= globalAlpha;\r\n                            }\r\n                            currentElement.setAttribute(style.svgAttr + \"-opacity\", \"\" + opacity);\r\n                        }\r\n                        else {\r\n                            var attr = style.svgAttr;\r\n                            if (keys[i] === 'globalAlpha') {\r\n                                attr = type + '-' + style.svgAttr;\r\n                                if (currentElement.getAttribute(attr)) {\r\n                                    // fill-opacity or stroke-opacity has already been set by stroke or fill.\r\n                                    continue;\r\n                                }\r\n                            }\r\n                            // otherwise only update attribute if right type, and not svg default\r\n                            currentElement.setAttribute(attr, \"\" + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        /**\r\n          * Returns the serialized value of the svg so far\r\n          * @param fixNamedEntities - Standalone SVG doesn't support named entities, which document.createTextNode encodes.\r\n          *                           If true, we attempt to find all named entities and encode it as a numeric entity.\r\n          * @return serialized svg\r\n          */\r\n        SVGRenderingContext2D.prototype.get_serialized_svg = function (fixNamedEntities) {\r\n            var e_4, _d;\r\n            if (fixNamedEntities === void 0) {\r\n                fixNamedEntities = false;\r\n            }\r\n            var serialized = new XMLSerializer().serializeToString(this.__root);\r\n            // IE search for a duplicate xmnls because they didn't implement setAttributeNS correctly\r\n            var xmlns = /xmlns=\"http:\\/\\/www\\.w3\\.org\\/2000\\/svg\".+xmlns=\"http:\\/\\/www\\.w3\\.org\\/2000\\/svg/gi;\r\n            if (xmlns.test(serialized)) {\r\n                serialized = serialized.replace('xmlns=\"http://www.w3.org/2000/svg', 'xmlns:xlink=\"http://www.w3.org/1999/xlink');\r\n            }\r\n            if (fixNamedEntities) {\r\n                try {\r\n                    // loop over each named entity and replace with the proper equivalent.\r\n                    for (var namedEntities_1 = tslib_1.__values(namedEntities), namedEntities_1_1 = namedEntities_1.next(); !namedEntities_1_1.done; namedEntities_1_1 = namedEntities_1.next()) {\r\n                        var _e = tslib_1.__read(namedEntities_1_1.value, 2), key = _e[0], value = _e[1];\r\n                        var regexp = new RegExp(key, \"gi\");\r\n                        if (regexp.test(serialized)) {\r\n                            serialized = serialized.replace(regexp, value);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_4_1) {\r\n                    e_4 = { error: e_4_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (namedEntities_1_1 && !namedEntities_1_1.done && (_d = namedEntities_1.return))\r\n                            _d.call(namedEntities_1);\r\n                    }\r\n                    finally {\r\n                        if (e_4)\r\n                            throw e_4.error;\r\n                    }\r\n                }\r\n            }\r\n            return serialized;\r\n        };\r\n        SVGRenderingContext2D.prototype.get_svg = function () {\r\n            return this.__root;\r\n        };\r\n        /**\r\n          * Will generate a group tag.\r\n          */\r\n        SVGRenderingContext2D.prototype.save = function () {\r\n            this.__stack.push({\r\n                transform: this._transform,\r\n                clip_path: this._clip_path,\r\n                attributes: this.__getStyleState(),\r\n            });\r\n            this._transform = this._transform.clone();\r\n        };\r\n        /**\r\n          * Sets current element to parent, or just root if already root\r\n          */\r\n        SVGRenderingContext2D.prototype.restore = function () {\r\n            if (this.__stack.length == 0)\r\n                return;\r\n            var _d = this.__stack.pop(), transform = _d.transform, clip_path = _d.clip_path, attributes = _d.attributes;\r\n            this._transform = transform;\r\n            this._clip_path = clip_path;\r\n            this.__applyStyleState(attributes);\r\n        };\r\n        SVGRenderingContext2D.prototype._apply_transform = function (element, transform) {\r\n            if (transform === void 0) {\r\n                transform = this._transform;\r\n            }\r\n            if (!transform.is_identity) {\r\n                element.setAttribute(\"transform\", transform.toString());\r\n            }\r\n        };\r\n        /**\r\n          *  scales the current element\r\n          */\r\n        SVGRenderingContext2D.prototype.scale = function (x, y) {\r\n            if (!isFinite(x) || (y != null && !isFinite(y)))\r\n                return;\r\n            this._transform.scale(x, y !== null && y !== void 0 ? y : x);\r\n        };\r\n        /**\r\n          * rotates the current element\r\n          */\r\n        SVGRenderingContext2D.prototype.rotate = function (angle) {\r\n            if (!isFinite(angle))\r\n                return;\r\n            this._transform.rotate(angle);\r\n        };\r\n        /**\r\n          * translates the current element\r\n          */\r\n        SVGRenderingContext2D.prototype.translate = function (x, y) {\r\n            if (!isFinite(x + y))\r\n                return;\r\n            this._transform.translate(x, y);\r\n        };\r\n        /**\r\n          * applies a transform to the current element\r\n          */\r\n        SVGRenderingContext2D.prototype.transform = function (a, b, c, d, e, f) {\r\n            if (!isFinite(a + b + c + d + e + f))\r\n                return;\r\n            this._transform.transform(a, b, c, d, e, f);\r\n        };\r\n        /**\r\n          * Create a new Path Element\r\n          */\r\n        SVGRenderingContext2D.prototype.beginPath = function () {\r\n            // Note that there is only one current default path, it is not part of the drawing state.\r\n            // See also: https://html.spec.whatwg.org/multipage/scripting.html#current-default-path\r\n            this.__currentDefaultPath = \"\";\r\n            this.__currentPosition = null;\r\n            var path = this.__createElement(\"path\", {}, true);\r\n            this.__root.appendChild(path);\r\n            this.__currentElement = path;\r\n        };\r\n        /**\r\n          * Helper function to apply currentDefaultPath to current path element\r\n          */\r\n        SVGRenderingContext2D.prototype.__applyCurrentDefaultPath = function () {\r\n            var currentElement = this.__currentElement;\r\n            if (currentElement.nodeName === \"path\") {\r\n                currentElement.setAttribute(\"d\", this.__currentDefaultPath);\r\n            }\r\n            else {\r\n                console.error(\"Attempted to apply path command to node\", currentElement.nodeName);\r\n            }\r\n        };\r\n        /**\r\n          * Helper function to add path command\r\n          */\r\n        SVGRenderingContext2D.prototype.__addPathCommand = function (x, y, path) {\r\n            var separator = !this.__currentDefaultPath ? \"\" : \" \";\r\n            this.__currentDefaultPath += separator + path;\r\n            this.__currentPosition = { x: x, y: y };\r\n        };\r\n        Object.defineProperty(SVGRenderingContext2D.prototype, \"_hasCurrentDefaultPath\", {\r\n            get: function () {\r\n                return !!this.__currentDefaultPath;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n          * Adds the move command to the current path element,\r\n          * if the currentPathElement is not empty create a new path element\r\n          */\r\n        SVGRenderingContext2D.prototype.moveTo = function (x, y) {\r\n            if (!isFinite(x + y))\r\n                return;\r\n            if (this.__currentElement.nodeName !== \"path\") {\r\n                this.beginPath();\r\n            }\r\n            // creates a new subpath with the given point\r\n            var _d = tslib_1.__read(this._transform.apply(x, y), 2), tx = _d[0], ty = _d[1];\r\n            this.__addPathCommand(tx, ty, \"M \" + tx + \" \" + ty);\r\n        };\r\n        /**\r\n          * Closes the current path\r\n          */\r\n        SVGRenderingContext2D.prototype.closePath = function () {\r\n            if (this._hasCurrentDefaultPath) {\r\n                this.__addPathCommand(NaN, NaN, \"Z\");\r\n            }\r\n        };\r\n        /**\r\n          * Adds a line to command\r\n          */\r\n        SVGRenderingContext2D.prototype.lineTo = function (x, y) {\r\n            if (!isFinite(x + y))\r\n                return;\r\n            if (!this._hasCurrentDefaultPath)\r\n                this.moveTo(x, y);\r\n            else {\r\n                var _d = tslib_1.__read(this._transform.apply(x, y), 2), tx = _d[0], ty = _d[1];\r\n                this.__addPathCommand(tx, ty, \"L \" + tx + \" \" + ty);\r\n            }\r\n        };\r\n        /**\r\n          * Add a bezier command\r\n          */\r\n        SVGRenderingContext2D.prototype.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\r\n            if (!isFinite(cp1x + cp1y + cp2x + cp2y + x + y))\r\n                return;\r\n            var _d = tslib_1.__read(this._transform.apply(x, y), 2), tx = _d[0], ty = _d[1];\r\n            var _e = tslib_1.__read(this._transform.apply(cp1x, cp1y), 2), tcp1x = _e[0], tcp1y = _e[1];\r\n            var _f = tslib_1.__read(this._transform.apply(cp2x, cp2y), 2), tcp2x = _f[0], tcp2y = _f[1];\r\n            this.__addPathCommand(tx, ty, \"C \" + tcp1x + \" \" + tcp1y + \" \" + tcp2x + \" \" + tcp2y + \" \" + tx + \" \" + ty);\r\n        };\r\n        /**\r\n          * Adds a quadratic curve to command\r\n          */\r\n        SVGRenderingContext2D.prototype.quadraticCurveTo = function (cpx, cpy, x, y) {\r\n            if (!isFinite(cpx + cpy + x + y))\r\n                return;\r\n            var _d = tslib_1.__read(this._transform.apply(x, y), 2), tx = _d[0], ty = _d[1];\r\n            var _e = tslib_1.__read(this._transform.apply(cpx, cpy), 2), tcpx = _e[0], tcpy = _e[1];\r\n            this.__addPathCommand(tx, ty, \"Q \" + tcpx + \" \" + tcpy + \" \" + tx + \" \" + ty);\r\n        };\r\n        /**\r\n          * Adds the arcTo to the current path\r\n          *\r\n          * @see http://www.w3.org/TR/2015/WD-2dcontext-20150514/#dom-context-2d-arcto\r\n          */\r\n        SVGRenderingContext2D.prototype.arcTo = function (x1, y1, x2, y2, radius) {\r\n            if (!isFinite(x1 + y1 + x2 + y2 + radius))\r\n                return;\r\n            // Let the point (x0, y0) be the last point in the subpath.\r\n            if (this.__currentPosition == null)\r\n                return;\r\n            var x0 = this.__currentPosition.x;\r\n            var y0 = this.__currentPosition.y;\r\n            // Negative values for radius must cause the implementation to throw an IndexSizeError exception.\r\n            if (radius < 0) {\r\n                throw new Error(\"IndexSizeError: The radius provided (\" + radius + \") is negative.\");\r\n            }\r\n            // If the point (x0, y0) is equal to the point (x1, y1),\r\n            // or if the point (x1, y1) is equal to the point (x2, y2),\r\n            // or if the radius radius is zero,\r\n            // then the method must add the point (x1, y1) to the subpath,\r\n            // and connect that point to the previous point (x0, y0) by a straight line.\r\n            if (((x0 === x1) && (y0 === y1)) || ((x1 === x2) && (y1 === y2)) || (radius === 0)) {\r\n                this.lineTo(x1, y1);\r\n                return;\r\n            }\r\n            function normalize(_d) {\r\n                var _e = tslib_1.__read(_d, 2), x = _e[0], y = _e[1];\r\n                var len = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n                return [x / len, y / len];\r\n            }\r\n            // Otherwise, if the points (x0, y0), (x1, y1), and (x2, y2) all lie on a single straight line,\r\n            // then the method must add the point (x1, y1) to the subpath,\r\n            // and connect that point to the previous point (x0, y0) by a straight line.\r\n            var unit_vec_p1_p0 = normalize([x0 - x1, y0 - y1]);\r\n            var unit_vec_p1_p2 = normalize([x2 - x1, y2 - y1]);\r\n            if (unit_vec_p1_p0[0] * unit_vec_p1_p2[1] === unit_vec_p1_p0[1] * unit_vec_p1_p2[0]) {\r\n                this.lineTo(x1, y1);\r\n                return;\r\n            }\r\n            // Otherwise, let The Arc be the shortest arc given by circumference of the circle that has radius radius,\r\n            // and that has one point tangent to the half-infinite line that crosses the point (x0, y0) and ends at the point (x1, y1),\r\n            // and that has a different point tangent to the half-infinite line that ends at the point (x1, y1), and crosses the point (x2, y2).\r\n            // The points at which this circle touches these two lines are called the start and end tangent points respectively.\r\n            // note that both vectors are unit vectors, so the length is 1\r\n            var cos = (unit_vec_p1_p0[0] * unit_vec_p1_p2[0] + unit_vec_p1_p0[1] * unit_vec_p1_p2[1]);\r\n            var theta = Math.acos(Math.abs(cos));\r\n            // Calculate origin\r\n            var unit_vec_p1_origin = normalize([\r\n                unit_vec_p1_p0[0] + unit_vec_p1_p2[0],\r\n                unit_vec_p1_p0[1] + unit_vec_p1_p2[1],\r\n            ]);\r\n            var len_p1_origin = radius / Math.sin(theta / 2);\r\n            var x = x1 + len_p1_origin * unit_vec_p1_origin[0];\r\n            var y = y1 + len_p1_origin * unit_vec_p1_origin[1];\r\n            // Calculate start angle and end angle\r\n            // rotate 90deg clockwise (note that y axis points to its down)\r\n            var unit_vec_origin_start_tangent = [\r\n                -unit_vec_p1_p0[1],\r\n                unit_vec_p1_p0[0],\r\n            ];\r\n            // rotate 90deg counter clockwise (note that y axis points to its down)\r\n            var unit_vec_origin_end_tangent = [\r\n                unit_vec_p1_p2[1],\r\n                -unit_vec_p1_p2[0],\r\n            ];\r\n            function getAngle(vector) {\r\n                // get angle (clockwise) between vector and (1, 0)\r\n                var x = vector[0];\r\n                var y = vector[1];\r\n                if (y >= 0) { // note that y axis points to its down\r\n                    return Math.acos(x);\r\n                }\r\n                else {\r\n                    return -Math.acos(x);\r\n                }\r\n            }\r\n            var startAngle = getAngle(unit_vec_origin_start_tangent);\r\n            var endAngle = getAngle(unit_vec_origin_end_tangent);\r\n            // Connect the point (x0, y0) to the start tangent point by a straight line\r\n            this.lineTo(x + unit_vec_origin_start_tangent[0] * radius, y + unit_vec_origin_start_tangent[1] * radius);\r\n            // Connect the start tangent point to the end tangent point by arc\r\n            // and adding the end tangent point to the subpath.\r\n            this.arc(x, y, radius, startAngle, endAngle);\r\n        };\r\n        /**\r\n          * Sets the stroke property on the current element\r\n          */\r\n        SVGRenderingContext2D.prototype.stroke = function () {\r\n            if (this.__currentElement.nodeName === \"path\") {\r\n                this.__currentElement.setAttribute(\"paint-order\", \"fill\");\r\n            }\r\n            this.__applyCurrentDefaultPath();\r\n            this.__applyStyleToCurrentElement(\"stroke\");\r\n            if (this._clip_path != null) {\r\n                this.__currentElement.setAttribute(\"clip-path\", this._clip_path);\r\n            }\r\n        };\r\n        /**\r\n          * Sets fill properties on the current element\r\n          */\r\n        SVGRenderingContext2D.prototype.fill = function () {\r\n            if (this.__currentElement.nodeName === \"path\") {\r\n                this.__currentElement.setAttribute(\"paint-order\", \"stroke\");\r\n            }\r\n            this.__applyCurrentDefaultPath();\r\n            this.__applyStyleToCurrentElement(\"fill\");\r\n            if (this._clip_path != null) {\r\n                this.__currentElement.setAttribute(\"clip-path\", this._clip_path);\r\n            }\r\n        };\r\n        /**\r\n          *  Adds a rectangle to the path.\r\n          */\r\n        SVGRenderingContext2D.prototype.rect = function (x, y, width, height) {\r\n            if (!isFinite(x + y + width + height))\r\n                return;\r\n            if (this.__currentElement.nodeName !== \"path\") {\r\n                this.beginPath();\r\n            }\r\n            this.moveTo(x, y);\r\n            this.lineTo(x + width, y);\r\n            this.lineTo(x + width, y + height);\r\n            this.lineTo(x, y + height);\r\n            this.lineTo(x, y);\r\n        };\r\n        /**\r\n          * adds a rectangle element\r\n          */\r\n        SVGRenderingContext2D.prototype.fillRect = function (x, y, width, height) {\r\n            if (!isFinite(x + y + width + height))\r\n                return;\r\n            this.beginPath();\r\n            this.rect(x, y, width, height);\r\n            this.fill();\r\n        };\r\n        /**\r\n          * Draws a rectangle with no fill\r\n          * @param x\r\n          * @param y\r\n          * @param width\r\n          * @param height\r\n          */\r\n        SVGRenderingContext2D.prototype.strokeRect = function (x, y, width, height) {\r\n            if (!isFinite(x + y + width + height))\r\n                return;\r\n            this.beginPath();\r\n            this.rect(x, y, width, height);\r\n            this.stroke();\r\n        };\r\n        /**\r\n          * Clear entire canvas:\r\n          * 1. save current transforms\r\n          * 2. remove all the childNodes of the root g element\r\n          */\r\n        SVGRenderingContext2D.prototype.__clearCanvas = function () {\r\n            dom_1.empty(this.__defs);\r\n            dom_1.empty(this.__root);\r\n            this.__root.appendChild(this.__defs);\r\n            this.__currentElement = this.__root;\r\n        };\r\n        /**\r\n          * \"Clears\" a canvas by just drawing a white rectangle in the current group.\r\n          */\r\n        SVGRenderingContext2D.prototype.clearRect = function (x, y, width, height) {\r\n            if (!isFinite(x + y + width + height))\r\n                return;\r\n            if (x === 0 && y === 0 && width === this.width && height === this.height) {\r\n                this.__clearCanvas();\r\n                return;\r\n            }\r\n            var rect = this.__createElement(\"rect\", { x: x, y: y, width: width, height: height, fill: \"#FFFFFF\" }, true);\r\n            this._apply_transform(rect);\r\n            this.__root.appendChild(rect);\r\n        };\r\n        /**\r\n          * Adds a linear gradient to a defs tag.\r\n          * Returns a canvas gradient object that has a reference to it's parent def\r\n          */\r\n        SVGRenderingContext2D.prototype.createLinearGradient = function (x1, y1, x2, y2) {\r\n            if (!isFinite(x1 + y1 + x2 + y2))\r\n                throw new Error(\"The provided double value is non-finite\");\r\n            var _d = tslib_1.__read(this._transform.apply(x1, y1), 2), tx1 = _d[0], ty1 = _d[1];\r\n            var _e = tslib_1.__read(this._transform.apply(x2, y2), 2), tx2 = _e[0], ty2 = _e[1];\r\n            var grad = this.__createElement(\"linearGradient\", {\r\n                id: randomString(this.__ids),\r\n                x1: tx1 + \"px\",\r\n                x2: tx2 + \"px\",\r\n                y1: ty1 + \"px\",\r\n                y2: ty2 + \"px\",\r\n                gradientUnits: \"userSpaceOnUse\",\r\n            }, false);\r\n            this.__defs.appendChild(grad);\r\n            return new CanvasGradient(grad, this);\r\n        };\r\n        /**\r\n          * Adds a radial gradient to a defs tag.\r\n          * Returns a canvas gradient object that has a reference to it's parent def\r\n          */\r\n        SVGRenderingContext2D.prototype.createRadialGradient = function (x0, y0, _r0, x1, y1, r1) {\r\n            if (!isFinite(x0 + y0 + _r0 + x1 + y1 + r1))\r\n                throw new Error(\"The provided double value is non-finite\");\r\n            var _d = tslib_1.__read(this._transform.apply(x0, y0), 2), tx0 = _d[0], ty0 = _d[1];\r\n            var _e = tslib_1.__read(this._transform.apply(x1, y1), 2), tx1 = _e[0], ty1 = _e[1];\r\n            var grad = this.__createElement(\"radialGradient\", {\r\n                id: randomString(this.__ids),\r\n                cx: tx1 + \"px\",\r\n                cy: ty1 + \"px\",\r\n                r: r1 + \"px\",\r\n                fx: tx0 + \"px\",\r\n                fy: ty0 + \"px\",\r\n                gradientUnits: \"userSpaceOnUse\",\r\n            }, false);\r\n            this.__defs.appendChild(grad);\r\n            return new CanvasGradient(grad, this);\r\n        };\r\n        /**\r\n          * Parses the font string and returns svg mapping\r\n          */\r\n        SVGRenderingContext2D.prototype.__parseFont = function () {\r\n            var regex = /^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:\\s*\\/\\s*(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s*([-,\\'\\\"\\sa-z0-9]+?)\\s*$/i;\r\n            var fontPart = regex.exec(this.font);\r\n            var data = {\r\n                style: fontPart[1] || 'normal',\r\n                size: fontPart[4] || '10px',\r\n                family: fontPart[6] || 'sans-serif',\r\n                weight: fontPart[3] || 'normal',\r\n                decoration: fontPart[2] || 'normal',\r\n            };\r\n            // canvas doesn't support underline natively, but we can pass this attribute\r\n            if (this.__fontUnderline === \"underline\") {\r\n                data.decoration = \"underline\";\r\n            }\r\n            // canvas also doesn't support linking, but we can pass this as well\r\n            if (this.__fontHref != null) {\r\n                data.href = this.__fontHref;\r\n            }\r\n            return data;\r\n        };\r\n        /**\r\n          * Helper to link text fragments\r\n          */\r\n        SVGRenderingContext2D.prototype.__wrapTextLink = function (font, element) {\r\n            if (font.href) {\r\n                var a = this.__createElement(\"a\");\r\n                a.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", font.href);\r\n                a.appendChild(element);\r\n                return a;\r\n            }\r\n            return element;\r\n        };\r\n        /**\r\n          * Fills or strokes text\r\n          */\r\n        SVGRenderingContext2D.prototype.__applyText = function (text, x, y, action) {\r\n            var font = this.__parseFont();\r\n            var textElement = this.__createElement(\"text\", {\r\n                \"font-family\": font.family,\r\n                \"font-size\": font.size,\r\n                \"font-style\": font.style,\r\n                \"font-weight\": font.weight,\r\n                \"text-decoration\": font.decoration,\r\n                x: x,\r\n                y: y,\r\n                \"text-anchor\": getTextAnchor(this.textAlign),\r\n                \"dominant-baseline\": getDominantBaseline(this.textBaseline),\r\n            }, true);\r\n            textElement.appendChild(this.__document.createTextNode(text));\r\n            this._apply_transform(textElement);\r\n            this.__currentElement = textElement;\r\n            this.__applyStyleToCurrentElement(action);\r\n            this.__root.appendChild(this.__wrapTextLink(font, textElement));\r\n        };\r\n        /**\r\n          * Creates a text element\r\n          */\r\n        SVGRenderingContext2D.prototype.fillText = function (text, x, y) {\r\n            if (text == null || !isFinite(x + y))\r\n                return;\r\n            this.__applyText(text, x, y, \"fill\");\r\n        };\r\n        /**\r\n          * Strokes text\r\n          */\r\n        SVGRenderingContext2D.prototype.strokeText = function (text, x, y) {\r\n            if (text == null || !isFinite(x + y))\r\n                return;\r\n            this.__applyText(text, x, y, \"stroke\");\r\n        };\r\n        /**\r\n          * No need to implement this for svg.\r\n          */\r\n        SVGRenderingContext2D.prototype.measureText = function (text) {\r\n            this.__ctx.font = this.font;\r\n            return this.__ctx.measureText(text);\r\n        };\r\n        SVGRenderingContext2D.prototype.arc = function (x, y, radius, startAngle, endAngle, counterClockwise) {\r\n            if (counterClockwise === void 0) {\r\n                counterClockwise = false;\r\n            }\r\n            if (!isFinite(x + y + radius + startAngle + endAngle))\r\n                return;\r\n            // in canvas no circle is drawn if no angle is provided.\r\n            if (startAngle === endAngle) {\r\n                return;\r\n            }\r\n            startAngle = startAngle % (2 * Math.PI);\r\n            endAngle = endAngle % (2 * Math.PI);\r\n            if (startAngle === endAngle) {\r\n                // circle time! subtract some of the angle so svg is happy (svg elliptical arc can't draw a full circle)\r\n                endAngle = ((endAngle + (2 * Math.PI)) - 0.001 * (counterClockwise ? -1 : 1)) % (2 * Math.PI);\r\n            }\r\n            var endX = x + radius * Math.cos(endAngle);\r\n            var endY = y + radius * Math.sin(endAngle);\r\n            var startX = x + radius * Math.cos(startAngle);\r\n            var startY = y + radius * Math.sin(startAngle);\r\n            var sweepFlag = counterClockwise ? 0 : 1;\r\n            var largeArcFlag = 0;\r\n            var diff = endAngle - startAngle;\r\n            // https://github.com/gliffy/canvas2svg/issues/4\r\n            if (diff < 0) {\r\n                diff += 2 * Math.PI;\r\n            }\r\n            if (counterClockwise) {\r\n                largeArcFlag = diff > Math.PI ? 0 : 1;\r\n            }\r\n            else {\r\n                largeArcFlag = diff > Math.PI ? 1 : 0;\r\n            }\r\n            this.lineTo(startX, startY);\r\n            var rx = radius;\r\n            var ry = radius;\r\n            var xAxisRotation = 0;\r\n            var _d = tslib_1.__read(this._transform.apply(endX, endY), 2), tendX = _d[0], tendY = _d[1];\r\n            this.__addPathCommand(tendX, tendY, \"A \" + rx + \" \" + ry + \" \" + xAxisRotation + \" \" + largeArcFlag + \" \" + sweepFlag + \" \" + tendX + \" \" + tendY);\r\n        };\r\n        /**\r\n          * Generates a ClipPath from the clip command.\r\n          */\r\n        SVGRenderingContext2D.prototype.clip = function () {\r\n            var clip_path = this.__createElement(\"clipPath\");\r\n            var id = randomString(this.__ids);\r\n            this.__applyCurrentDefaultPath();\r\n            clip_path.setAttribute(\"id\", id);\r\n            clip_path.appendChild(this.__currentElement);\r\n            this.__defs.appendChild(clip_path);\r\n            this._clip_path = \"url(#\" + id + \")\";\r\n        };\r\n        /**\r\n          * Draws a canvas, image or mock context to this canvas.\r\n          * Note that all svg dom manipulation uses node.childNodes rather than node.children for IE support.\r\n          * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-drawimage\r\n          */\r\n        SVGRenderingContext2D.prototype.drawImage = function (image) {\r\n            var _d, _e, _f, e_5, _g, e_6, _h;\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            var dx, dy;\r\n            var dw, dh;\r\n            var sx, sy;\r\n            var sw, sh;\r\n            if (args.length == 2) {\r\n                _d = tslib_1.__read(args, 2), dx = _d[0], dy = _d[1];\r\n                if (!isFinite(dx + dy))\r\n                    return;\r\n                sx = 0;\r\n                sy = 0;\r\n                sw = image.width;\r\n                sh = image.height;\r\n                dw = sw;\r\n                dh = sh;\r\n            }\r\n            else if (args.length == 4) {\r\n                _e = tslib_1.__read(args, 4), dx = _e[0], dy = _e[1], dw = _e[2], dh = _e[3];\r\n                if (!isFinite(dx + dy + dw + dh))\r\n                    return;\r\n                sx = 0;\r\n                sy = 0;\r\n                sw = image.width;\r\n                sh = image.height;\r\n            }\r\n            else if (args.length === 8) {\r\n                _f = tslib_1.__read(args, 8), sx = _f[0], sy = _f[1], sw = _f[2], sh = _f[3], dx = _f[4], dy = _f[5], dw = _f[6], dh = _f[7];\r\n                if (!isFinite(sx + sy + sw + sh + dx + dy + dw + dh))\r\n                    return;\r\n            }\r\n            else {\r\n                throw new Error(\"Inavlid number of arguments passed to drawImage: \" + arguments.length);\r\n            }\r\n            // parent, svg, defs, group, currentElement, svgImage, canvas, context, id\r\n            var parent = this.__root;\r\n            var translateDirective = \"translate(\" + dx + \", \" + dy + \")\";\r\n            var transform = this._transform.clone().translate(dx, dy);\r\n            if (image instanceof SVGRenderingContext2D || image instanceof SVGSVGElement) {\r\n                // In the future we may want to clone nodes instead.\r\n                // also I'm currently ignoring dw, dh, sw, sh, sx, sy for a mock context.\r\n                var svg_node = image instanceof SVGSVGElement ? image : image.get_svg();\r\n                var svg = svg_node.cloneNode(true);\r\n                var scope = void 0;\r\n                if (transform.is_identity)\r\n                    scope = parent;\r\n                else {\r\n                    scope = this.__createElement(\"g\");\r\n                    this._apply_transform(scope, transform);\r\n                    parent.appendChild(scope);\r\n                }\r\n                try {\r\n                    for (var _j = tslib_1.__values(tslib_1.__spread(svg.childNodes)), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                        var child = _k.value;\r\n                        if (child instanceof SVGDefsElement) {\r\n                            try {\r\n                                for (var _l = (e_6 = void 0, tslib_1.__values(tslib_1.__spread(child.childNodes))), _m = _l.next(); !_m.done; _m = _l.next()) {\r\n                                    var def = _m.value;\r\n                                    if (def instanceof Element) {\r\n                                        var id = def.getAttribute(\"id\");\r\n                                        this.__ids[id] = id;\r\n                                        this.__defs.appendChild(def);\r\n                                    }\r\n                                }\r\n                            }\r\n                            catch (e_6_1) {\r\n                                e_6 = { error: e_6_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (_m && !_m.done && (_h = _l.return))\r\n                                        _h.call(_l);\r\n                                }\r\n                                finally {\r\n                                    if (e_6)\r\n                                        throw e_6.error;\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            scope.appendChild(child);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_5_1) {\r\n                    e_5 = { error: e_5_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_k && !_k.done && (_g = _j.return))\r\n                            _g.call(_j);\r\n                    }\r\n                    finally {\r\n                        if (e_5)\r\n                            throw e_5.error;\r\n                    }\r\n                }\r\n            }\r\n            else if (image instanceof HTMLImageElement || image instanceof SVGImageElement) {\r\n                var svgImage = this.__createElement(\"image\");\r\n                svgImage.setAttribute(\"width\", \"\" + dw);\r\n                svgImage.setAttribute(\"height\", \"\" + dh);\r\n                svgImage.setAttribute(\"preserveAspectRatio\", \"none\");\r\n                if (sx || sy || sw !== image.width || sh !== image.height) {\r\n                    // crop the image using a temporary canvas\r\n                    var canvas = this.__document.createElement(\"canvas\");\r\n                    canvas.width = dw;\r\n                    canvas.height = dh;\r\n                    var context = canvas.getContext(\"2d\");\r\n                    context.drawImage(image, sx, sy, sw, sh, 0, 0, dw, dh);\r\n                    image = canvas;\r\n                }\r\n                svgImage.setAttribute(\"transform\", translateDirective);\r\n                var url = image instanceof HTMLCanvasElement ? image.toDataURL() : image.getAttribute(\"src\");\r\n                svgImage.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", url);\r\n                parent.appendChild(svgImage);\r\n            }\r\n            else if (image instanceof HTMLCanvasElement) {\r\n                var svgImage = this.__createElement(\"image\");\r\n                svgImage.setAttribute(\"width\", \"\" + dw);\r\n                svgImage.setAttribute(\"height\", \"\" + dh);\r\n                svgImage.setAttribute(\"preserveAspectRatio\", \"none\");\r\n                // draw canvas onto temporary canvas so that smoothing can be handled\r\n                var canvas = this.__document.createElement(\"canvas\");\r\n                canvas.width = dw;\r\n                canvas.height = dh;\r\n                var context = canvas.getContext(\"2d\");\r\n                context.imageSmoothingEnabled = false;\r\n                context.drawImage(image, sx, sy, sw, sh, 0, 0, dw, dh);\r\n                image = canvas;\r\n                svgImage.setAttribute(\"transform\", translateDirective);\r\n                svgImage.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", image.toDataURL());\r\n                parent.appendChild(svgImage);\r\n            }\r\n        };\r\n        /**\r\n          * Generates a pattern tag\r\n          */\r\n        SVGRenderingContext2D.prototype.createPattern = function (image, _repetition) {\r\n            var e_7, _d, e_8, _e;\r\n            var pattern = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"pattern\");\r\n            var id = randomString(this.__ids);\r\n            pattern.setAttribute(\"id\", id);\r\n            pattern.setAttribute(\"width\", \"\" + this._to_number(image.width));\r\n            pattern.setAttribute(\"height\", \"\" + this._to_number(image.height));\r\n            pattern.setAttribute(\"patternUnits\", \"userSpaceOnUse\");\r\n            if (image instanceof HTMLCanvasElement || image instanceof HTMLImageElement || image instanceof SVGImageElement) {\r\n                var img = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\r\n                var url = image instanceof HTMLCanvasElement ? image.toDataURL() : image.getAttribute(\"src\");\r\n                img.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", url);\r\n                pattern.appendChild(img);\r\n                this.__defs.appendChild(pattern);\r\n            }\r\n            else if (image instanceof SVGRenderingContext2D) {\r\n                try {\r\n                    for (var _f = tslib_1.__values(tslib_1.__spread(image.__root.childNodes)), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                        var child = _g.value;\r\n                        if (!(child instanceof SVGDefsElement)) {\r\n                            pattern.appendChild(child);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_7_1) {\r\n                    e_7 = { error: e_7_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_g && !_g.done && (_d = _f.return))\r\n                            _d.call(_f);\r\n                    }\r\n                    finally {\r\n                        if (e_7)\r\n                            throw e_7.error;\r\n                    }\r\n                }\r\n                //pattern.appendChild(image.__root.childNodes[1])\r\n                this.__defs.appendChild(pattern);\r\n            }\r\n            else if (image instanceof SVGSVGElement) {\r\n                try {\r\n                    for (var _h = tslib_1.__values(tslib_1.__spread(image.childNodes)), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                        var child = _j.value;\r\n                        if (!(child instanceof SVGDefsElement)) {\r\n                            pattern.appendChild(child);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_8_1) {\r\n                    e_8 = { error: e_8_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_j && !_j.done && (_e = _h.return))\r\n                            _e.call(_h);\r\n                    }\r\n                    finally {\r\n                        if (e_8)\r\n                            throw e_8.error;\r\n                    }\r\n                }\r\n                //pattern.appendChild(image.__root.childNodes[1])\r\n                this.__defs.appendChild(pattern);\r\n            }\r\n            else {\r\n                throw new Error(\"unsupported\");\r\n            }\r\n            return new CanvasPattern(pattern, this);\r\n        };\r\n        SVGRenderingContext2D.prototype.setLineDash = function (dashArray) {\r\n            if (dashArray && dashArray.length > 0) {\r\n                this.lineDash = dashArray.join(\",\");\r\n            }\r\n            else {\r\n                this.lineDash = null;\r\n            }\r\n        };\r\n        SVGRenderingContext2D.prototype._to_number = function (val) {\r\n            return types_1.isNumber(val) ? val : val.baseVal.value;\r\n        };\r\n        return SVGRenderingContext2D;\r\n    }());\r\n    exports.SVGRenderingContext2D = SVGRenderingContext2D;\r\n    SVGRenderingContext2D.__name__ = \"SVGRenderingContext2D\";\r\n}\r\n","/* core\\util\\affine.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var sin = Math.sin, cos = Math.cos;\r\n    var AffineTransform = /** @class */ (function () {\r\n        function AffineTransform(a, b, c, d, e, f) {\r\n            if (a === void 0) {\r\n                a = 1;\r\n            }\r\n            if (b === void 0) {\r\n                b = 0;\r\n            }\r\n            if (c === void 0) {\r\n                c = 0;\r\n            }\r\n            if (d === void 0) {\r\n                d = 1;\r\n            }\r\n            if (e === void 0) {\r\n                e = 0;\r\n            }\r\n            if (f === void 0) {\r\n                f = 0;\r\n            }\r\n            this.a = a;\r\n            this.b = b;\r\n            this.c = c;\r\n            this.d = d;\r\n            this.e = e;\r\n            this.f = f;\r\n        }\r\n        AffineTransform.prototype.toString = function () {\r\n            var _a = this, a = _a.a, b = _a.b, c = _a.c, d = _a.d, e = _a.e, f = _a.f;\r\n            return \"matrix(\" + a + \", \" + b + \", \" + c + \", \" + d + \", \" + e + \", \" + f + \")\";\r\n        };\r\n        AffineTransform.prototype.clone = function () {\r\n            var _a = this, a = _a.a, b = _a.b, c = _a.c, d = _a.d, e = _a.e, f = _a.f;\r\n            return new AffineTransform(a, b, c, d, e, f);\r\n        };\r\n        Object.defineProperty(AffineTransform.prototype, \"is_identity\", {\r\n            get: function () {\r\n                var _a = this, a = _a.a, b = _a.b, c = _a.c, d = _a.d, e = _a.e, f = _a.f;\r\n                return a == 1 && b == 0 && c == 0 && d == 1 && e == 0 && f == 0;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        AffineTransform.prototype.apply = function (x, y) {\r\n            var _a = this, a = _a.a, b = _a.b, c = _a.c, d = _a.d, e = _a.e, f = _a.f;\r\n            return [\r\n                a * x + c * y + e,\r\n                b * x + d * y + f,\r\n            ];\r\n        };\r\n        AffineTransform.prototype.iv_apply = function (xs, ys) {\r\n            var _a = this, a = _a.a, b = _a.b, c = _a.c, d = _a.d, e = _a.e, f = _a.f;\r\n            var n = xs.length;\r\n            for (var i = 0; i < n; i++) {\r\n                var x = xs[i];\r\n                var y = ys[i];\r\n                xs[i] = a * x + c * y + e;\r\n                ys[i] = b * x + d * y + f;\r\n            }\r\n        };\r\n        AffineTransform.prototype.transform = function (A, B, C, D, E, F) {\r\n            var _a = this, a = _a.a, b = _a.b, c = _a.c, d = _a.d, e = _a.e, f = _a.f;\r\n            this.a = a * A + c * B;\r\n            this.c = a * C + c * D;\r\n            this.e = a * E + c * F + e;\r\n            this.b = b * A + d * B;\r\n            this.d = b * C + d * D;\r\n            this.f = b * E + d * F + f;\r\n            return this;\r\n        };\r\n        AffineTransform.prototype.translate = function (tx, ty) {\r\n            return this.transform(1, 0, 0, 1, tx, ty);\r\n        };\r\n        AffineTransform.prototype.scale = function (cx, cy) {\r\n            return this.transform(cx, 0, 0, cy, 0, 0);\r\n        };\r\n        AffineTransform.prototype.skew = function (sx, sy) {\r\n            return this.transform(1, sy, sx, 1, 0, 0);\r\n        };\r\n        AffineTransform.prototype.rotate = function (angle) {\r\n            var s = sin(angle);\r\n            var c = cos(angle);\r\n            return this.transform(c, s, -s, c, 0, 0);\r\n        };\r\n        AffineTransform.prototype.rotate_ccw = function (angle) {\r\n            return this.rotate(-angle);\r\n        };\r\n        AffineTransform.prototype.translate_x = function (tx) {\r\n            return this.translate(tx, 0);\r\n        };\r\n        AffineTransform.prototype.translate_y = function (ty) {\r\n            return this.translate(0, ty);\r\n        };\r\n        AffineTransform.prototype.flip = function () {\r\n            return this.scale(-1, -1);\r\n        };\r\n        AffineTransform.prototype.flip_x = function () {\r\n            return this.scale(1, -1);\r\n        };\r\n        AffineTransform.prototype.flip_y = function () {\r\n            return this.scale(-1, 1);\r\n        };\r\n        return AffineTransform;\r\n    }());\r\n    exports.AffineTransform = AffineTransform;\r\n    AffineTransform.__name__ = \"AffineTransform\";\r\n}\r\n","/* models\\canvas\\canvas.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var has_props_1 = require(129) /* ../../core/has_props */;\r\n    var dom_view_1 = require(193) /* ../../core/dom_view */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var bbox_1 = require(194) /* ../../core/util/bbox */;\r\n    var canvas_1 = require(195) /* ../../core/util/canvas */;\r\n    var svg_1 = require(190) /* ../../core/util/svg */;\r\n    var global_webgl = (function () {\r\n        // We use a global invisible canvas and gl context. By having a global context,\r\n        // we avoid the limitation of max 16 contexts that most browsers have.\r\n        var canvas = document.createElement(\"canvas\");\r\n        var gl = canvas.getContext(\"webgl\", { premultipliedAlpha: true });\r\n        // If WebGL is available, we store a reference to the gl canvas on\r\n        // the ctx object, because that's what gets passed everywhere.\r\n        if (gl != null)\r\n            return { canvas: canvas, gl: gl };\r\n        else {\r\n            logging_1.logger.trace(\"WebGL is not supported\");\r\n            return undefined;\r\n        }\r\n    })();\r\n    var style = {\r\n        position: \"absolute\",\r\n        top: \"0\",\r\n        left: \"0\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n    };\r\n    var CanvasLayer = /** @class */ (function () {\r\n        function CanvasLayer(backend, hidpi) {\r\n            this.backend = backend;\r\n            this.hidpi = hidpi;\r\n            this.pixel_ratio = 1;\r\n            this.bbox = new bbox_1.BBox();\r\n            switch (backend) {\r\n                case \"webgl\":\r\n                case \"canvas\": {\r\n                    this._el = this._canvas = dom_1.canvas({ style: style });\r\n                    var ctx = this.canvas.getContext('2d');\r\n                    if (ctx == null)\r\n                        throw new Error(\"unable to obtain 2D rendering context\");\r\n                    this._ctx = ctx;\r\n                    if (hidpi) {\r\n                        this.pixel_ratio = devicePixelRatio;\r\n                    }\r\n                    break;\r\n                }\r\n                case \"svg\": {\r\n                    var ctx = new svg_1.SVGRenderingContext2D();\r\n                    this._ctx = ctx;\r\n                    this._canvas = ctx.get_svg();\r\n                    this._el = dom_1.div({ style: style }, this._canvas);\r\n                    break;\r\n                }\r\n            }\r\n            canvas_1.fixup_ctx(this._ctx);\r\n        }\r\n        Object.defineProperty(CanvasLayer.prototype, \"canvas\", {\r\n            get: function () {\r\n                return this._canvas;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CanvasLayer.prototype, \"ctx\", {\r\n            get: function () {\r\n                return this._ctx;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CanvasLayer.prototype, \"el\", {\r\n            get: function () {\r\n                return this._el;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CanvasLayer.prototype.resize = function (width, height) {\r\n            this.bbox = new bbox_1.BBox({ left: 0, top: 0, width: width, height: height });\r\n            var target = this._ctx instanceof svg_1.SVGRenderingContext2D ? this._ctx : this.canvas;\r\n            target.width = width * this.pixel_ratio;\r\n            target.height = height * this.pixel_ratio;\r\n        };\r\n        CanvasLayer.prototype.prepare = function () {\r\n            var _a = this, ctx = _a.ctx, hidpi = _a.hidpi, pixel_ratio = _a.pixel_ratio;\r\n            ctx.save();\r\n            if (hidpi) {\r\n                ctx.scale(pixel_ratio, pixel_ratio);\r\n                ctx.translate(0.5, 0.5);\r\n            }\r\n            this.clear();\r\n        };\r\n        CanvasLayer.prototype.clear = function () {\r\n            var _a = this.bbox, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n            this.ctx.clearRect(x, y, width, height);\r\n        };\r\n        CanvasLayer.prototype.finish = function () {\r\n            this.ctx.restore();\r\n        };\r\n        CanvasLayer.prototype.to_blob = function () {\r\n            var _canvas = this._canvas;\r\n            if (_canvas instanceof HTMLCanvasElement) {\r\n                if (_canvas.msToBlob != null) {\r\n                    return Promise.resolve(_canvas.msToBlob());\r\n                }\r\n                else {\r\n                    return new Promise(function (resolve, reject) {\r\n                        _canvas.toBlob(function (blob) { return blob != null ? resolve(blob) : reject(); }, \"image/png\");\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                var ctx = this._ctx;\r\n                var svg = ctx.get_serialized_svg(true);\r\n                var blob = new Blob([svg], { type: \"image/svg+xml\" });\r\n                return Promise.resolve(blob);\r\n            }\r\n        };\r\n        return CanvasLayer;\r\n    }());\r\n    exports.CanvasLayer = CanvasLayer;\r\n    CanvasLayer.__name__ = \"CanvasLayer\";\r\n    var CanvasView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CanvasView, _super);\r\n        function CanvasView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.bbox = new bbox_1.BBox();\r\n            return _this;\r\n        }\r\n        CanvasView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            var _a = this.model, output_backend = _a.output_backend, hidpi = _a.hidpi;\r\n            if (output_backend == \"webgl\") {\r\n                this.webgl = global_webgl;\r\n            }\r\n            this.underlays_el = dom_1.div({ style: style });\r\n            this.primary = new CanvasLayer(output_backend, hidpi);\r\n            this.overlays = new CanvasLayer(output_backend, hidpi);\r\n            this.overlays_el = dom_1.div({ style: style });\r\n            this.events_el = dom_1.div({ class: \"bk-canvas-events\", style: style });\r\n            var elements = [\r\n                this.underlays_el,\r\n                this.primary.el,\r\n                this.overlays.el,\r\n                this.overlays_el,\r\n                this.events_el,\r\n            ];\r\n            object_1.extend(this.el.style, style);\r\n            dom_1.append.apply(void 0, tslib_1.__spread([this.el], elements));\r\n            logging_1.logger.debug(\"CanvasView initialized\");\r\n        };\r\n        CanvasView.prototype.add_underlay = function (el) {\r\n            this.underlays_el.appendChild(el);\r\n        };\r\n        CanvasView.prototype.add_overlay = function (el) {\r\n            this.overlays_el.appendChild(el);\r\n        };\r\n        CanvasView.prototype.add_event = function (el) {\r\n            this.events_el.appendChild(el);\r\n        };\r\n        Object.defineProperty(CanvasView.prototype, \"pixel_ratio\", {\r\n            get: function () {\r\n                return this.primary.pixel_ratio; // XXX: primary\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CanvasView.prototype.resize = function (width, height) {\r\n            this.bbox = new bbox_1.BBox({ left: 0, top: 0, width: width, height: height });\r\n            this.primary.resize(width, height);\r\n            this.overlays.resize(width, height);\r\n        };\r\n        CanvasView.prototype.prepare_webgl = function (frame_box) {\r\n            // Prepare WebGL for a drawing pass\r\n            var webgl = this.webgl;\r\n            if (webgl != null) {\r\n                // Sync canvas size\r\n                var _a = this.bbox, width = _a.width, height = _a.height;\r\n                webgl.canvas.width = this.pixel_ratio * width;\r\n                webgl.canvas.height = this.pixel_ratio * height;\r\n                var gl = webgl.gl;\r\n                // Clipping\r\n                gl.enable(gl.SCISSOR_TEST);\r\n                var _b = tslib_1.__read(frame_box, 4), sx = _b[0], sy = _b[1], w = _b[2], h = _b[3];\r\n                var _c = this.bbox, xview = _c.xview, yview = _c.yview;\r\n                var vx = xview.compute(sx);\r\n                var vy = yview.compute(sy + h);\r\n                var ratio = this.pixel_ratio;\r\n                gl.scissor(ratio * vx, ratio * vy, ratio * w, ratio * h); // lower left corner, width, height\r\n                // Setup blending\r\n                gl.enable(gl.BLEND);\r\n                gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE_MINUS_DST_ALPHA, gl.ONE); // premultipliedAlpha == true\r\n            }\r\n        };\r\n        CanvasView.prototype.clear_webgl = function () {\r\n            var webgl = this.webgl;\r\n            if (webgl != null) {\r\n                // Prepare GL for drawing\r\n                var gl = webgl.gl, canvas_2 = webgl.canvas;\r\n                gl.viewport(0, 0, canvas_2.width, canvas_2.height);\r\n                gl.clearColor(0, 0, 0, 0);\r\n                gl.clear(gl.COLOR_BUFFER_BIT || gl.DEPTH_BUFFER_BIT);\r\n            }\r\n        };\r\n        CanvasView.prototype.blit_webgl = function (ctx) {\r\n            // This should be called when the ctx has no state except the HIDPI transform\r\n            var webgl = this.webgl;\r\n            if (webgl != null) {\r\n                // Blit gl canvas into the 2D canvas. To do 1-on-1 blitting, we need\r\n                // to remove the hidpi transform, then blit, then restore.\r\n                // ctx.globalCompositeOperation = \"source-over\"  -> OK; is the default\r\n                logging_1.logger.debug('Blitting WebGL canvas');\r\n                ctx.restore();\r\n                ctx.drawImage(webgl.canvas, 0, 0);\r\n                // Set back hidpi transform\r\n                ctx.save();\r\n                if (this.model.hidpi) {\r\n                    var ratio = this.pixel_ratio;\r\n                    ctx.scale(ratio, ratio);\r\n                    ctx.translate(0.5, 0.5);\r\n                }\r\n            }\r\n        };\r\n        CanvasView.prototype.compose = function () {\r\n            var _a = this.model, output_backend = _a.output_backend, hidpi = _a.hidpi;\r\n            var _b = this.bbox, width = _b.width, height = _b.height;\r\n            var composite = new CanvasLayer(output_backend, hidpi);\r\n            composite.resize(width, height);\r\n            composite.ctx.drawImage(this.primary.canvas, 0, 0);\r\n            composite.ctx.drawImage(this.overlays.canvas, 0, 0);\r\n            return composite;\r\n        };\r\n        CanvasView.prototype.to_blob = function () {\r\n            return this.compose().to_blob();\r\n        };\r\n        return CanvasView;\r\n    }(dom_view_1.DOMView));\r\n    exports.CanvasView = CanvasView;\r\n    CanvasView.__name__ = \"CanvasView\";\r\n    var Canvas = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Canvas, _super);\r\n        function Canvas(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Canvas.init_Canvas = function () {\r\n            this.prototype.default_view = CanvasView;\r\n            this.internal({\r\n                hidpi: [p.Boolean, true],\r\n                output_backend: [p.OutputBackend, \"canvas\"],\r\n            });\r\n        };\r\n        return Canvas;\r\n    }(has_props_1.HasProps));\r\n    exports.Canvas = Canvas;\r\n    Canvas.__name__ = \"Canvas\";\r\n    Canvas.init_Canvas();\r\n}\r\n","/* core\\dom_view.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var view_1 = require(186) /* ./view */;\r\n    var dom_1 = require(187) /* ./dom */;\r\n    var DOMView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DOMView, _super);\r\n        function DOMView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        DOMView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.el = this._createElement();\r\n        };\r\n        DOMView.prototype.remove = function () {\r\n            dom_1.remove(this.el);\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        DOMView.prototype.css_classes = function () {\r\n            return [];\r\n        };\r\n        DOMView.prototype.render = function () { };\r\n        DOMView.prototype.renderTo = function (element) {\r\n            element.appendChild(this.el);\r\n            this.render();\r\n        };\r\n        DOMView.prototype._createElement = function () {\r\n            return dom_1.createElement(this.tagName, { class: this.css_classes() });\r\n        };\r\n        return DOMView;\r\n    }(view_1.View));\r\n    exports.DOMView = DOMView;\r\n    DOMView.__name__ = \"DOMView\";\r\n    DOMView.prototype.tagName = \"div\";\r\n}\r\n","/* core\\util\\bbox.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var types_1 = require(139) /* ../types */;\r\n    var min = Math.min, max = Math.max;\r\n    function empty() {\r\n        return {\r\n            x0: Infinity,\r\n            y0: Infinity,\r\n            x1: -Infinity,\r\n            y1: -Infinity,\r\n        };\r\n    }\r\n    exports.empty = empty;\r\n    function positive_x() {\r\n        return {\r\n            x0: Number.MIN_VALUE,\r\n            y0: -Infinity,\r\n            x1: Infinity,\r\n            y1: Infinity,\r\n        };\r\n    }\r\n    exports.positive_x = positive_x;\r\n    function positive_y() {\r\n        return {\r\n            x0: -Infinity,\r\n            y0: Number.MIN_VALUE,\r\n            x1: Infinity,\r\n            y1: Infinity,\r\n        };\r\n    }\r\n    exports.positive_y = positive_y;\r\n    function union(a, b) {\r\n        return {\r\n            x0: min(a.x0, b.x0),\r\n            x1: max(a.x1, b.x1),\r\n            y0: min(a.y0, b.y0),\r\n            y1: max(a.y1, b.y1),\r\n        };\r\n    }\r\n    exports.union = union;\r\n    var BBox = /** @class */ (function () {\r\n        function BBox(box) {\r\n            if (box == null) {\r\n                this.x0 = 0;\r\n                this.y0 = 0;\r\n                this.x1 = 0;\r\n                this.y1 = 0;\r\n            }\r\n            else if ('x0' in box) {\r\n                var x0 = box.x0, y0 = box.y0, x1 = box.x1, y1 = box.y1;\r\n                if (!(x0 <= x1 && y0 <= y1))\r\n                    throw new Error(\"invalid bbox {x0: \" + x0 + \", y0: \" + y0 + \", x1: \" + x1 + \", y1: \" + y1 + \"}\");\r\n                this.x0 = x0;\r\n                this.y0 = y0;\r\n                this.x1 = x1;\r\n                this.y1 = y1;\r\n            }\r\n            else if (\"x\" in box) {\r\n                var x = box.x, y = box.y, width = box.width, height = box.height;\r\n                if (!(width >= 0 && height >= 0))\r\n                    throw new Error(\"invalid bbox {x: \" + x + \", y: \" + y + \", width: \" + width + \", height: \" + height + \"}\");\r\n                this.x0 = x;\r\n                this.y0 = y;\r\n                this.x1 = x + width;\r\n                this.y1 = y + height;\r\n            }\r\n            else {\r\n                var left = void 0, right = void 0;\r\n                var top = void 0, bottom = void 0;\r\n                if (\"width\" in box) {\r\n                    if (\"left\" in box) {\r\n                        left = box.left;\r\n                        right = left + box.width;\r\n                    }\r\n                    else if (\"right\" in box) {\r\n                        right = box.right;\r\n                        left = right - box.width;\r\n                    }\r\n                    else {\r\n                        var w2 = box.width / 2;\r\n                        left = box.hcenter - w2;\r\n                        right = box.hcenter + w2;\r\n                    }\r\n                }\r\n                else {\r\n                    left = box.left;\r\n                    right = box.right;\r\n                }\r\n                if (\"height\" in box) {\r\n                    if (\"top\" in box) {\r\n                        top = box.top;\r\n                        bottom = top + box.height;\r\n                    }\r\n                    else if (\"bottom\" in box) {\r\n                        bottom = box.bottom;\r\n                        top = bottom - box.height;\r\n                    }\r\n                    else {\r\n                        var h2 = box.height / 2;\r\n                        top = box.vcenter - h2;\r\n                        bottom = box.vcenter + h2;\r\n                    }\r\n                }\r\n                else {\r\n                    top = box.top;\r\n                    bottom = box.bottom;\r\n                }\r\n                if (!(left <= right && top <= bottom))\r\n                    throw new Error(\"invalid bbox {left: \" + left + \", top: \" + top + \", right: \" + right + \", bottom: \" + bottom + \"}\");\r\n                this.x0 = left;\r\n                this.y0 = top;\r\n                this.x1 = right;\r\n                this.y1 = bottom;\r\n            }\r\n        }\r\n        BBox.prototype.toString = function () {\r\n            return \"BBox({left: \" + this.left + \", top: \" + this.top + \", width: \" + this.width + \", height: \" + this.height + \"})\";\r\n        };\r\n        Object.defineProperty(BBox.prototype, \"left\", {\r\n            get: function () { return this.x0; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"top\", {\r\n            get: function () { return this.y0; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"right\", {\r\n            get: function () { return this.x1; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"bottom\", {\r\n            get: function () { return this.y1; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"p0\", {\r\n            get: function () { return [this.x0, this.y0]; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"p1\", {\r\n            get: function () { return [this.x1, this.y1]; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"x\", {\r\n            get: function () { return this.x0; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"y\", {\r\n            get: function () { return this.y0; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"width\", {\r\n            get: function () { return this.x1 - this.x0; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"height\", {\r\n            get: function () { return this.y1 - this.y0; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"rect\", {\r\n            get: function () { return { x0: this.x0, y0: this.y0, x1: this.x1, y1: this.y1 }; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"box\", {\r\n            get: function () { return { x: this.x, y: this.y, width: this.width, height: this.height }; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"h_range\", {\r\n            get: function () { return { start: this.x0, end: this.x1 }; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"v_range\", {\r\n            get: function () { return { start: this.y0, end: this.y1 }; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"ranges\", {\r\n            get: function () { return [this.h_range, this.v_range]; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"aspect\", {\r\n            get: function () { return this.width / this.height; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"hcenter\", {\r\n            get: function () { return (this.left + this.right) / 2; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"vcenter\", {\r\n            get: function () { return (this.top + this.bottom) / 2; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        BBox.prototype.relativize = function () {\r\n            var _a = this, width = _a.width, height = _a.height;\r\n            return new BBox({ x: 0, y: 0, width: width, height: height });\r\n        };\r\n        BBox.prototype.contains = function (x, y) {\r\n            return x >= this.x0 && x <= this.x1 && y >= this.y0 && y <= this.y1;\r\n        };\r\n        BBox.prototype.clip = function (x, y) {\r\n            if (x < this.x0)\r\n                x = this.x0;\r\n            else if (x > this.x1)\r\n                x = this.x1;\r\n            if (y < this.y0)\r\n                y = this.y0;\r\n            else if (y > this.y1)\r\n                y = this.y1;\r\n            return [x, y];\r\n        };\r\n        BBox.prototype.union = function (that) {\r\n            return new BBox({\r\n                x0: min(this.x0, that.x0),\r\n                y0: min(this.y0, that.y0),\r\n                x1: max(this.x1, that.x1),\r\n                y1: max(this.y1, that.y1),\r\n            });\r\n        };\r\n        BBox.prototype.equals = function (that) {\r\n            return this.x0 == that.x0 && this.y0 == that.y0 && this.x1 == that.x1 && this.y1 == that.y1;\r\n        };\r\n        Object.defineProperty(BBox.prototype, \"xview\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return {\r\n                    compute: function (x) {\r\n                        return _this.left + x;\r\n                    },\r\n                    v_compute: function (xx) {\r\n                        var _xx = new types_1.NumberArray(xx.length);\r\n                        var left = _this.left;\r\n                        for (var i = 0; i < xx.length; i++) {\r\n                            _xx[i] = left + xx[i];\r\n                        }\r\n                        return _xx;\r\n                    },\r\n                };\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BBox.prototype, \"yview\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return {\r\n                    compute: function (y) {\r\n                        return _this.bottom - y;\r\n                    },\r\n                    v_compute: function (yy) {\r\n                        var _yy = new types_1.NumberArray(yy.length);\r\n                        var bottom = _this.bottom;\r\n                        for (var i = 0; i < yy.length; i++) {\r\n                            _yy[i] = bottom - yy[i];\r\n                        }\r\n                        return _yy;\r\n                    },\r\n                };\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return BBox;\r\n    }());\r\n    exports.BBox = BBox;\r\n    BBox.__name__ = \"BBox\";\r\n}\r\n","/* core\\util\\canvas.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function fixup_line_dash(ctx) {\r\n        if (typeof ctx.lineDash === \"undefined\") {\r\n            Object.defineProperty(ctx, \"lineDash\", {\r\n                get: function () { return ctx.getLineDash(); },\r\n                set: function (segments) { return ctx.setLineDash(segments); },\r\n            });\r\n        }\r\n    }\r\n    function fixup_image_smoothing(ctx) {\r\n        ctx.setImageSmoothingEnabled = function (value) {\r\n            ctx.imageSmoothingEnabled = value;\r\n            ctx.mozImageSmoothingEnabled = value;\r\n            ctx.oImageSmoothingEnabled = value;\r\n            ctx.webkitImageSmoothingEnabled = value;\r\n            ctx.msImageSmoothingEnabled = value;\r\n        };\r\n        ctx.getImageSmoothingEnabled = function () {\r\n            var val = ctx.imageSmoothingEnabled;\r\n            return val != null ? val : true;\r\n        };\r\n    }\r\n    function fixup_measure_text(ctx) {\r\n        if (ctx.measureText && ctx.html5MeasureText == null) {\r\n            ctx.html5MeasureText = ctx.measureText;\r\n            ctx.measureText = function (text) {\r\n                var textMetrics = ctx.html5MeasureText(text);\r\n                // fake it til you make it\r\n                textMetrics.ascent = ctx.html5MeasureText(\"m\").width * 1.6;\r\n                return textMetrics;\r\n            };\r\n        }\r\n    }\r\n    function fixup_ellipse(ctx) {\r\n        // implementing the ctx.ellipse function with bezier curves\r\n        // we don't implement the startAngle, endAngle and anticlockwise arguments.\r\n        function ellipse_bezier(x, y, radiusX, radiusY, rotation, _startAngle, _endAngle, anticlockwise) {\r\n            if (anticlockwise === void 0) {\r\n                anticlockwise = false;\r\n            }\r\n            var c = 0.551784; // see http://www.tinaja.com/glib/ellipse4.pdf\r\n            ctx.translate(x, y);\r\n            ctx.rotate(rotation);\r\n            var rx = radiusX;\r\n            var ry = radiusY;\r\n            if (anticlockwise) {\r\n                rx = -radiusX;\r\n                ry = -radiusY;\r\n            }\r\n            ctx.moveTo(-rx, 0); // start point of first curve\r\n            ctx.bezierCurveTo(-rx, ry * c, -rx * c, ry, 0, ry);\r\n            ctx.bezierCurveTo(rx * c, ry, rx, ry * c, rx, 0);\r\n            ctx.bezierCurveTo(rx, -ry * c, rx * c, -ry, 0, -ry);\r\n            ctx.bezierCurveTo(-rx * c, -ry, -rx, -ry * c, -rx, 0);\r\n            ctx.rotate(-rotation);\r\n            ctx.translate(-x, -y);\r\n        }\r\n        if (!ctx.ellipse)\r\n            ctx.ellipse = ellipse_bezier;\r\n    }\r\n    function fixup_ctx(ctx) {\r\n        fixup_line_dash(ctx);\r\n        fixup_image_smoothing(ctx);\r\n        fixup_measure_text(ctx);\r\n        fixup_ellipse(ctx);\r\n    }\r\n    exports.fixup_ctx = fixup_ctx;\r\n}\r\n","/* model.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var has_props_1 = require(129) /* ./core/has_props */;\r\n    var p = tslib_1.__importStar(require(133) /* ./core/properties */);\r\n    var types_1 = require(123) /* ./core/util/types */;\r\n    var object_1 = require(128) /* ./core/util/object */;\r\n    var logging_1 = require(134) /* ./core/logging */;\r\n    var Model = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Model, _super);\r\n        function Model(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Model.init_Model = function () {\r\n            this.define({\r\n                tags: [p.Array, []],\r\n                name: [p.String],\r\n                js_property_callbacks: [p.Any, {}],\r\n                js_event_callbacks: [p.Any, {}],\r\n                subscribed_events: [p.Array, []],\r\n            });\r\n        };\r\n        Model.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._js_callbacks = new Map();\r\n        };\r\n        Model.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this._update_property_callbacks();\r\n            this.connect(this.properties.js_property_callbacks.change, function () { return _this._update_property_callbacks(); });\r\n            this.connect(this.properties.js_event_callbacks.change, function () { return _this._update_event_callbacks(); });\r\n            this.connect(this.properties.subscribed_events.change, function () { return _this._update_event_callbacks(); });\r\n        };\r\n        /*protected*/ Model.prototype._process_event = function (event) {\r\n            var e_1, _a;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.js_event_callbacks[event.event_name] || []), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var callback = _c.value;\r\n                    callback.execute(event);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            if (this.document != null && this.subscribed_events.some(function (m) { return m == event.event_name; }))\r\n                this.document.event_manager.send_event(event);\r\n        };\r\n        Model.prototype.trigger_event = function (event) {\r\n            if (this.document != null) {\r\n                event.origin = this;\r\n                this.document.event_manager.trigger(event);\r\n            }\r\n        };\r\n        Model.prototype._update_event_callbacks = function () {\r\n            if (this.document == null) {\r\n                // File an issue: SidePanel in particular seems to have this issue\r\n                logging_1.logger.warn('WARNING: Document not defined for updating event callbacks');\r\n                return;\r\n            }\r\n            this.document.event_manager.subscribed_models.add(this);\r\n        };\r\n        Model.prototype._update_property_callbacks = function () {\r\n            var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\r\n            var _this = this;\r\n            var signal_for = function (event) {\r\n                var _a = tslib_1.__read(event.split(\":\"), 2), evt = _a[0], _b = _a[1], attr = _b === void 0 ? null : _b;\r\n                return attr != null ? _this.properties[attr][evt] : _this[evt];\r\n            };\r\n            try {\r\n                for (var _e = tslib_1.__values(this._js_callbacks), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var _g = tslib_1.__read(_f.value, 2), event = _g[0], callbacks = _g[1];\r\n                    var signal = signal_for(event);\r\n                    try {\r\n                        for (var callbacks_1 = (e_3 = void 0, tslib_1.__values(callbacks)), callbacks_1_1 = callbacks_1.next(); !callbacks_1_1.done; callbacks_1_1 = callbacks_1.next()) {\r\n                            var cb = callbacks_1_1.value;\r\n                            this.disconnect(signal, cb);\r\n                        }\r\n                    }\r\n                    catch (e_3_1) {\r\n                        e_3 = { error: e_3_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (callbacks_1_1 && !callbacks_1_1.done && (_b = callbacks_1.return))\r\n                                _b.call(callbacks_1);\r\n                        }\r\n                        finally {\r\n                            if (e_3)\r\n                                throw e_3.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_a = _e.return))\r\n                        _a.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this._js_callbacks.clear();\r\n            try {\r\n                for (var _h = tslib_1.__values(object_1.entries(this.js_property_callbacks)), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                    var _k = tslib_1.__read(_j.value, 2), event = _k[0], callbacks = _k[1];\r\n                    var wrappers = callbacks.map(function (cb) { return function () { return cb.execute(_this); }; });\r\n                    this._js_callbacks.set(event, wrappers);\r\n                    var signal = signal_for(event);\r\n                    try {\r\n                        for (var wrappers_1 = (e_5 = void 0, tslib_1.__values(wrappers)), wrappers_1_1 = wrappers_1.next(); !wrappers_1_1.done; wrappers_1_1 = wrappers_1.next()) {\r\n                            var cb = wrappers_1_1.value;\r\n                            this.connect(signal, cb);\r\n                        }\r\n                    }\r\n                    catch (e_5_1) {\r\n                        e_5 = { error: e_5_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (wrappers_1_1 && !wrappers_1_1.done && (_d = wrappers_1.return))\r\n                                _d.call(wrappers_1);\r\n                        }\r\n                        finally {\r\n                            if (e_5)\r\n                                throw e_5.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_j && !_j.done && (_c = _h.return))\r\n                        _c.call(_h);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n        };\r\n        Model.prototype._doc_attached = function () {\r\n            if (!object_1.isEmpty(this.js_event_callbacks) || this.subscribed_events.length != 0)\r\n                this._update_event_callbacks();\r\n        };\r\n        Model.prototype._doc_detached = function () {\r\n            this.document.event_manager.subscribed_models.delete(this);\r\n        };\r\n        Model.prototype.select = function (selector) {\r\n            if (types_1.isString(selector))\r\n                return tslib_1.__spread(this.references()).filter(function (ref) { return ref instanceof Model && ref.name === selector; });\r\n            else if (selector.prototype instanceof has_props_1.HasProps)\r\n                return tslib_1.__spread(this.references()).filter(function (ref) { return ref instanceof selector; });\r\n            else\r\n                throw new Error(\"invalid selector\");\r\n        };\r\n        Model.prototype.select_one = function (selector) {\r\n            var result = this.select(selector);\r\n            switch (result.length) {\r\n                case 0:\r\n                    return null;\r\n                case 1:\r\n                    return result[0];\r\n                default:\r\n                    throw new Error(\"found more than one object matching given selector\");\r\n            }\r\n        };\r\n        return Model;\r\n    }(has_props_1.HasProps));\r\n    exports.Model = Model;\r\n    Model.__name__ = \"Model\";\r\n    Model.init_Model();\r\n}\r\n","/* models\\canvas\\coordinates.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var CoordinateTransform = /** @class */ (function () {\r\n        function CoordinateTransform(x_scale, y_scale) {\r\n            this.x_scale = x_scale;\r\n            this.y_scale = y_scale;\r\n            this.x_range = this.x_scale.source_range;\r\n            this.y_range = this.y_scale.source_range;\r\n            this.ranges = [this.x_range, this.y_range];\r\n            this.scales = [this.x_scale, this.y_scale];\r\n        }\r\n        CoordinateTransform.prototype.map_to_screen = function (xs, ys) {\r\n            var sxs = this.x_scale.v_compute(xs);\r\n            var sys = this.y_scale.v_compute(ys);\r\n            return [sxs, sys];\r\n        };\r\n        CoordinateTransform.prototype.map_from_screen = function (sxs, sys) {\r\n            var xs = this.x_scale.v_invert(sxs);\r\n            var ys = this.y_scale.v_invert(sys);\r\n            return [xs, ys];\r\n        };\r\n        return CoordinateTransform;\r\n    }());\r\n    exports.CoordinateTransform = CoordinateTransform;\r\n    CoordinateTransform.__name__ = \"CoordinateTransform\";\r\n}\r\n","/* models\\annotations\\arrow.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var arrow_head_1 = require(199) /* ./arrow_head */;\r\n    var column_data_source_1 = require(200) /* ../sources/column_data_source */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var math_1 = require(125) /* ../../core/util/math */;\r\n    var ArrowView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ArrowView, _super);\r\n        function ArrowView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ArrowView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            if (this.model.source == null)\r\n                this.model.source = new column_data_source_1.ColumnDataSource();\r\n            this.set_data(this.model.source);\r\n        };\r\n        ArrowView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.set_data(_this.model.source); });\r\n            this.connect(this.model.source.streaming, function () { return _this.set_data(_this.model.source); });\r\n            this.connect(this.model.source.patching, function () { return _this.set_data(_this.model.source); });\r\n            this.connect(this.model.source.change, function () { return _this.set_data(_this.model.source); });\r\n        };\r\n        ArrowView.prototype.set_data = function (source) {\r\n            _super.prototype.set_data.call(this, source);\r\n            this.visuals.warm_cache(source);\r\n            this.plot_view.request_render();\r\n        };\r\n        ArrowView.prototype._map_data = function () {\r\n            var frame = this.plot_view.frame;\r\n            var sx_start, sy_start;\r\n            if (this.model.start_units == 'data') {\r\n                sx_start = this.coordinates.x_scale.v_compute(this._x_start);\r\n                sy_start = this.coordinates.y_scale.v_compute(this._y_start);\r\n            }\r\n            else {\r\n                sx_start = frame.xview.v_compute(this._x_start);\r\n                sy_start = frame.yview.v_compute(this._y_start);\r\n            }\r\n            var sx_end, sy_end;\r\n            if (this.model.end_units == 'data') {\r\n                sx_end = this.coordinates.x_scale.v_compute(this._x_end);\r\n                sy_end = this.coordinates.y_scale.v_compute(this._y_end);\r\n            }\r\n            else {\r\n                sx_end = frame.xview.v_compute(this._x_end);\r\n                sy_end = frame.yview.v_compute(this._y_end);\r\n            }\r\n            return [[sx_start, sy_start], [sx_end, sy_end]];\r\n        };\r\n        ArrowView.prototype._render = function () {\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            // Order in this function is important. First we draw all the arrow heads.\r\n            var _a = tslib_1.__read(this._map_data(), 2), start = _a[0], end = _a[1];\r\n            if (this.model.end != null)\r\n                this._arrow_head(ctx, \"render\", this.model.end, start, end);\r\n            if (this.model.start != null)\r\n                this._arrow_head(ctx, \"render\", this.model.start, end, start);\r\n            // Next we call .clip on all the arrow heads, inside an initial canvas sized\r\n            // rect, to create an \"inverted\" clip region for the arrow heads\r\n            ctx.beginPath();\r\n            var _b = this.plot_view.frame.bbox, x = _b.x, y = _b.y, width = _b.width, height = _b.height;\r\n            ctx.rect(x, y, width, height);\r\n            if (this.model.end != null)\r\n                this._arrow_head(ctx, \"clip\", this.model.end, start, end);\r\n            if (this.model.start != null)\r\n                this._arrow_head(ctx, \"clip\", this.model.start, end, start);\r\n            ctx.closePath();\r\n            ctx.clip();\r\n            // Finally we draw the arrow body, with the clipping regions set up. This prevents\r\n            // \"fat\" arrows from overlapping the arrow head in a bad way.\r\n            this._arrow_body(ctx, start, end);\r\n            ctx.restore();\r\n        };\r\n        ArrowView.prototype._arrow_head = function (ctx, action, head, start, end) {\r\n            for (var i = 0, _end = this._x_start.length; i < _end; i++) {\r\n                // arrow head runs orthogonal to arrow body\r\n                var angle = Math.PI / 2 + math_1.atan2([start[0][i], start[1][i]], [end[0][i], end[1][i]]);\r\n                ctx.save();\r\n                ctx.translate(end[0][i], end[1][i]);\r\n                ctx.rotate(angle);\r\n                if (action == \"render\")\r\n                    head.render(ctx, i);\r\n                else if (action == \"clip\")\r\n                    head.clip(ctx, i);\r\n                ctx.restore();\r\n            }\r\n        };\r\n        ArrowView.prototype._arrow_body = function (ctx, start, end) {\r\n            if (!this.visuals.line.doit)\r\n                return;\r\n            for (var i = 0, n = this._x_start.length; i < n; i++) {\r\n                this.visuals.line.set_vectorize(ctx, i);\r\n                ctx.beginPath();\r\n                ctx.moveTo(start[0][i], start[1][i]);\r\n                ctx.lineTo(end[0][i], end[1][i]);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        return ArrowView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.ArrowView = ArrowView;\r\n    ArrowView.__name__ = \"ArrowView\";\r\n    var Arrow = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Arrow, _super);\r\n        function Arrow(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Arrow.init_Arrow = function () {\r\n            this.prototype.default_view = ArrowView;\r\n            this.mixins(property_mixins_1.LineVector);\r\n            this.define({\r\n                x_start: [p.NumberSpec],\r\n                y_start: [p.NumberSpec],\r\n                start_units: [p.SpatialUnits, 'data'],\r\n                start: [p.Instance, null],\r\n                x_end: [p.NumberSpec],\r\n                y_end: [p.NumberSpec],\r\n                end_units: [p.SpatialUnits, 'data'],\r\n                end: [p.Instance, function () { return new arrow_head_1.OpenHead({}); }],\r\n                source: [p.Instance],\r\n            });\r\n        };\r\n        return Arrow;\r\n    }(annotation_1.Annotation));\r\n    exports.Arrow = Arrow;\r\n    Arrow.__name__ = \"Arrow\";\r\n    Arrow.init_Arrow();\r\n}\r\n","/* models\\annotations\\arrow_head.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var visuals_1 = require(189) /* ../../core/visuals */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var ArrowHead = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ArrowHead, _super);\r\n        function ArrowHead(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ArrowHead.init_ArrowHead = function () {\r\n            this.define({\r\n                size: [p.Number, 25],\r\n            });\r\n        };\r\n        ArrowHead.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.visuals = new visuals_1.Visuals(this);\r\n        };\r\n        return ArrowHead;\r\n    }(annotation_1.Annotation));\r\n    exports.ArrowHead = ArrowHead;\r\n    ArrowHead.__name__ = \"ArrowHead\";\r\n    ArrowHead.init_ArrowHead();\r\n    var OpenHead = /** @class */ (function (_super) {\r\n        tslib_1.__extends(OpenHead, _super);\r\n        function OpenHead(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        OpenHead.init_OpenHead = function () {\r\n            this.mixins(property_mixins_1.LineVector);\r\n        };\r\n        OpenHead.prototype.clip = function (ctx, i) {\r\n            // This method should not begin or close a path\r\n            this.visuals.line.set_vectorize(ctx, i);\r\n            ctx.moveTo(0.5 * this.size, this.size);\r\n            ctx.lineTo(0.5 * this.size, -2);\r\n            ctx.lineTo(-0.5 * this.size, -2);\r\n            ctx.lineTo(-0.5 * this.size, this.size);\r\n            ctx.lineTo(0, 0);\r\n            ctx.lineTo(0.5 * this.size, this.size);\r\n        };\r\n        OpenHead.prototype.render = function (ctx, i) {\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_vectorize(ctx, i);\r\n                ctx.beginPath();\r\n                ctx.moveTo(0.5 * this.size, this.size);\r\n                ctx.lineTo(0, 0);\r\n                ctx.lineTo(-0.5 * this.size, this.size);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        return OpenHead;\r\n    }(ArrowHead));\r\n    exports.OpenHead = OpenHead;\r\n    OpenHead.__name__ = \"OpenHead\";\r\n    OpenHead.init_OpenHead();\r\n    var NormalHead = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NormalHead, _super);\r\n        function NormalHead(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        NormalHead.init_NormalHead = function () {\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.override({\r\n                fill_color: 'black',\r\n            });\r\n        };\r\n        NormalHead.prototype.clip = function (ctx, i) {\r\n            // This method should not begin or close a path\r\n            this.visuals.line.set_vectorize(ctx, i);\r\n            ctx.moveTo(0.5 * this.size, this.size);\r\n            ctx.lineTo(0.5 * this.size, -2);\r\n            ctx.lineTo(-0.5 * this.size, -2);\r\n            ctx.lineTo(-0.5 * this.size, this.size);\r\n            ctx.lineTo(0.5 * this.size, this.size);\r\n        };\r\n        NormalHead.prototype.render = function (ctx, i) {\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_vectorize(ctx, i);\r\n                this._normal(ctx, i);\r\n                ctx.fill();\r\n            }\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_vectorize(ctx, i);\r\n                this._normal(ctx, i);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        NormalHead.prototype._normal = function (ctx, _i) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(0.5 * this.size, this.size);\r\n            ctx.lineTo(0, 0);\r\n            ctx.lineTo(-0.5 * this.size, this.size);\r\n            ctx.closePath();\r\n        };\r\n        return NormalHead;\r\n    }(ArrowHead));\r\n    exports.NormalHead = NormalHead;\r\n    NormalHead.__name__ = \"NormalHead\";\r\n    NormalHead.init_NormalHead();\r\n    var VeeHead = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VeeHead, _super);\r\n        function VeeHead(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        VeeHead.init_VeeHead = function () {\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.override({\r\n                fill_color: 'black',\r\n            });\r\n        };\r\n        VeeHead.prototype.clip = function (ctx, i) {\r\n            // This method should not begin or close a path\r\n            this.visuals.line.set_vectorize(ctx, i);\r\n            ctx.moveTo(0.5 * this.size, this.size);\r\n            ctx.lineTo(0.5 * this.size, -2);\r\n            ctx.lineTo(-0.5 * this.size, -2);\r\n            ctx.lineTo(-0.5 * this.size, this.size);\r\n            ctx.lineTo(0, 0.5 * this.size);\r\n            ctx.lineTo(0.5 * this.size, this.size);\r\n        };\r\n        VeeHead.prototype.render = function (ctx, i) {\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_vectorize(ctx, i);\r\n                this._vee(ctx, i);\r\n                ctx.fill();\r\n            }\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_vectorize(ctx, i);\r\n                this._vee(ctx, i);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        VeeHead.prototype._vee = function (ctx, _i) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(0.5 * this.size, this.size);\r\n            ctx.lineTo(0, 0);\r\n            ctx.lineTo(-0.5 * this.size, this.size);\r\n            ctx.lineTo(0, 0.5 * this.size);\r\n            ctx.closePath();\r\n        };\r\n        return VeeHead;\r\n    }(ArrowHead));\r\n    exports.VeeHead = VeeHead;\r\n    VeeHead.__name__ = \"VeeHead\";\r\n    VeeHead.init_VeeHead();\r\n    var TeeHead = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TeeHead, _super);\r\n        function TeeHead(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        TeeHead.init_TeeHead = function () {\r\n            this.mixins(property_mixins_1.LineVector);\r\n        };\r\n        TeeHead.prototype.render = function (ctx, i) {\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_vectorize(ctx, i);\r\n                ctx.beginPath();\r\n                ctx.moveTo(0.5 * this.size, 0);\r\n                ctx.lineTo(-0.5 * this.size, 0);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        TeeHead.prototype.clip = function (_ctx, _i) { };\r\n        return TeeHead;\r\n    }(ArrowHead));\r\n    exports.TeeHead = TeeHead;\r\n    TeeHead.__name__ = \"TeeHead\";\r\n    TeeHead.init_TeeHead();\r\n}\r\n","/* models\\sources\\column_data_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var columnar_data_source_1 = require(201) /* ./columnar_data_source */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var typed_array = tslib_1.__importStar(require(234) /* ../../core/util/typed_array */);\r\n    var set_1 = require(235) /* ../../core/util/set */;\r\n    var events_1 = require(236) /* ../../document/events */;\r\n    //exported for testing\r\n    function stream_to_column(col, new_col, rollover) {\r\n        if (types_1.isArray(col)) {\r\n            var result = col.concat(new_col);\r\n            if (rollover != null && result.length > rollover)\r\n                return result.slice(-rollover);\r\n            else\r\n                return result;\r\n        }\r\n        else if (types_1.isTypedArray(col)) {\r\n            var total_len = col.length + new_col.length;\r\n            // handle rollover case for typed arrays\r\n            if (rollover != null && total_len > rollover) {\r\n                var start = total_len - rollover;\r\n                var end = col.length;\r\n                // resize col if it is shorter than the rollover length\r\n                var result = void 0;\r\n                if (col.length < rollover) {\r\n                    result = new col.constructor(rollover);\r\n                    result.set(col, 0);\r\n                }\r\n                else\r\n                    result = col;\r\n                // shift values in original col to accommodate new_col\r\n                for (var i = start, endi = end; i < endi; i++) {\r\n                    result[i - start] = result[i];\r\n                }\r\n                // update end values in col with new_col\r\n                for (var i = 0, endi = new_col.length; i < endi; i++) {\r\n                    result[i + (end - start)] = new_col[i];\r\n                }\r\n                return result;\r\n            }\r\n            else {\r\n                var tmp = new col.constructor(new_col);\r\n                return typed_array.concat(col, tmp);\r\n            }\r\n        }\r\n        else\r\n            throw new Error(\"unsupported array types\");\r\n    }\r\n    exports.stream_to_column = stream_to_column;\r\n    // exported for testing\r\n    function slice(ind, length) {\r\n        var start, step, stop;\r\n        if (types_1.isNumber(ind)) {\r\n            start = ind;\r\n            stop = ind + 1;\r\n            step = 1;\r\n        }\r\n        else {\r\n            start = ind.start != null ? ind.start : 0;\r\n            stop = ind.stop != null ? ind.stop : length;\r\n            step = ind.step != null ? ind.step : 1;\r\n        }\r\n        return [start, stop, step];\r\n    }\r\n    exports.slice = slice;\r\n    // exported for testing\r\n    function patch_to_column(col, patch) {\r\n        var e_1, _a;\r\n        var patched = new Set();\r\n        var patched_range = false;\r\n        try {\r\n            for (var patch_1 = tslib_1.__values(patch), patch_1_1 = patch_1.next(); !patch_1_1.done; patch_1_1 = patch_1.next()) {\r\n                var _b = tslib_1.__read(patch_1_1.value, 2), ind = _b[0], val = _b[1];\r\n                // make the single index case look like the length-3 multi-index case\r\n                var shape = void 0;\r\n                var item = void 0;\r\n                var index = void 0;\r\n                var value = void 0;\r\n                if (types_1.isArray(ind)) {\r\n                    var _c = tslib_1.__read(ind, 1), i = _c[0];\r\n                    patched.add(i);\r\n                    shape = col[i].shape;\r\n                    item = col[i];\r\n                    value = val;\r\n                    // this is basically like NumPy's \"newaxis\", inserting an empty dimension\r\n                    // makes length 2 and 3 multi-index cases uniform, so that the same code\r\n                    // can handle both\r\n                    if (ind.length === 2) {\r\n                        shape = [1, shape[0]];\r\n                        index = [ind[0], 0, ind[1]];\r\n                    }\r\n                    else\r\n                        index = ind;\r\n                }\r\n                else {\r\n                    if (types_1.isNumber(ind)) {\r\n                        value = [val];\r\n                        patched.add(ind);\r\n                    }\r\n                    else {\r\n                        value = val;\r\n                        patched_range = true;\r\n                    }\r\n                    index = [0, 0, ind];\r\n                    shape = [1, col.length];\r\n                    item = col;\r\n                }\r\n                // now this one nested loop handles all cases\r\n                var flat_index = 0;\r\n                var _d = tslib_1.__read(slice(index[1], shape[0]), 3), istart = _d[0], istop = _d[1], istep = _d[2];\r\n                var _e = tslib_1.__read(slice(index[2], shape[1]), 3), jstart = _e[0], jstop = _e[1], jstep = _e[2];\r\n                for (var i = istart; i < istop; i += istep) {\r\n                    for (var j = jstart; j < jstop; j += jstep) {\r\n                        if (patched_range) {\r\n                            patched.add(j);\r\n                        }\r\n                        item[i * shape[1] + j] = value[flat_index];\r\n                        flat_index++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (patch_1_1 && !patch_1_1.done && (_a = patch_1.return))\r\n                    _a.call(patch_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        return patched;\r\n    }\r\n    exports.patch_to_column = patch_to_column;\r\n    var ColumnDataSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColumnDataSource, _super);\r\n        function ColumnDataSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ColumnDataSource.init_ColumnDataSource = function () {\r\n            this.define({\r\n                data: [p.Any, {}],\r\n            });\r\n        };\r\n        ColumnDataSource.prototype.stream = function (new_data, rollover, setter_id) {\r\n            var e_2, _a;\r\n            var data = this.data;\r\n            try {\r\n                for (var _b = tslib_1.__values(object_1.entries(new_data)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = tslib_1.__read(_c.value, 2), name = _d[0], new_column = _d[1];\r\n                    data[name] = stream_to_column(data[name], new_column, rollover);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this.setv({ data: data }, { silent: true });\r\n            this.streaming.emit();\r\n            if (this.document != null) {\r\n                var hint = new events_1.ColumnsStreamedEvent(this.document, this.ref(), new_data, rollover);\r\n                this.document._notify_change(this, 'data', null, null, { setter_id: setter_id, hint: hint });\r\n            }\r\n        };\r\n        ColumnDataSource.prototype.patch = function (patches, setter_id) {\r\n            var e_3, _a;\r\n            var data = this.data;\r\n            var patched = new Set();\r\n            try {\r\n                for (var _b = tslib_1.__values(object_1.entries(patches)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = tslib_1.__read(_c.value, 2), column = _d[0], patch = _d[1];\r\n                    patched = set_1.union(patched, patch_to_column(data[column], patch)); // XXX\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            this.setv({ data: data }, { silent: true });\r\n            this.patching.emit(tslib_1.__spread(patched));\r\n            if (this.document != null) {\r\n                var hint = new events_1.ColumnsPatchedEvent(this.document, this.ref(), patches);\r\n                this.document._notify_change(this, 'data', null, null, { setter_id: setter_id, hint: hint });\r\n            }\r\n        };\r\n        return ColumnDataSource;\r\n    }(columnar_data_source_1.ColumnarDataSource));\r\n    exports.ColumnDataSource = ColumnDataSource;\r\n    ColumnDataSource.__name__ = \"ColumnDataSource\";\r\n    ColumnDataSource.init_ColumnDataSource();\r\n}\r\n","/* models\\sources\\columnar_data_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var data_source_1 = require(202) /* ./data_source */;\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var selection_manager_1 = require(204) /* ../../core/selection_manager */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var interaction_policy_1 = require(233) /* ../selections/interaction_policy */;\r\n    var ColumnarDataSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColumnarDataSource, _super);\r\n        function ColumnarDataSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ColumnarDataSource.prototype.get_array = function (key) {\r\n            var column = this.data[key];\r\n            if (column == null)\r\n                this.data[key] = column = [];\r\n            else if (!types_1.isArray(column))\r\n                this.data[key] = column = Array.from(column);\r\n            return column;\r\n        };\r\n        ColumnarDataSource.init_ColumnarDataSource = function () {\r\n            this.define({\r\n                selection_policy: [p.Instance, function () { return new interaction_policy_1.UnionRenderers(); }],\r\n            });\r\n            this.internal({\r\n                selection_manager: [p.Instance, function (self) { return new selection_manager_1.SelectionManager({ source: self }); }],\r\n                inspected: [p.Instance, function () { return new selection_1.Selection(); }],\r\n            });\r\n        };\r\n        ColumnarDataSource.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._select = new signaling_1.Signal0(this, \"select\");\r\n            this.inspect = new signaling_1.Signal(this, \"inspect\"); // XXX: <[indices, tool, renderer-view, source, data], this>\r\n            this.streaming = new signaling_1.Signal0(this, \"streaming\");\r\n            this.patching = new signaling_1.Signal(this, \"patching\");\r\n        };\r\n        ColumnarDataSource.prototype.get_column = function (colname) {\r\n            var column = this.data[colname];\r\n            return column != null ? column : null;\r\n        };\r\n        ColumnarDataSource.prototype.columns = function () {\r\n            // return the column names in this data source\r\n            return object_1.keys(this.data);\r\n        };\r\n        ColumnarDataSource.prototype.get_length = function (soft) {\r\n            if (soft === void 0) {\r\n                soft = true;\r\n            }\r\n            var lengths = array_1.uniq(object_1.values(this.data).map(function (v) { return v.length; }));\r\n            switch (lengths.length) {\r\n                case 0: {\r\n                    return null; // XXX: don't guess, treat on case-by-case basis\r\n                }\r\n                case 1: {\r\n                    return lengths[0];\r\n                }\r\n                default: {\r\n                    var msg = \"data source has columns of inconsistent lengths\";\r\n                    if (soft) {\r\n                        logging_1.logger.warn(msg);\r\n                        return lengths.sort()[0];\r\n                    }\r\n                    else\r\n                        throw new Error(msg);\r\n                }\r\n            }\r\n        };\r\n        Object.defineProperty(ColumnarDataSource.prototype, \"length\", {\r\n            get: function () {\r\n                var _a;\r\n                return (_a = this.get_length()) !== null && _a !== void 0 ? _a : 0;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ColumnarDataSource.prototype.clear = function () {\r\n            var e_1, _b;\r\n            var empty = {};\r\n            try {\r\n                for (var _c = tslib_1.__values(this.columns()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var col = _d.value;\r\n                    empty[col] = new this.data[col].constructor(0);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            this.data = empty;\r\n        };\r\n        return ColumnarDataSource;\r\n    }(data_source_1.DataSource));\r\n    exports.ColumnarDataSource = ColumnarDataSource;\r\n    ColumnarDataSource.__name__ = \"ColumnarDataSource\";\r\n    ColumnarDataSource.init_ColumnarDataSource();\r\n}\r\n","/* models\\sources\\data_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var DataSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DataSource, _super);\r\n        function DataSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        DataSource.init_DataSource = function () {\r\n            this.define({\r\n                selected: [p.Instance, function () { return new selection_1.Selection(); }],\r\n            });\r\n        };\r\n        return DataSource;\r\n    }(model_1.Model));\r\n    exports.DataSource = DataSource;\r\n    DataSource.__name__ = \"DataSource\";\r\n    DataSource.init_DataSource();\r\n}\r\n","/* models\\selections\\selection.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var Selection = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Selection, _super);\r\n        function Selection(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Selection.prototype.get_view = function () {\r\n            return this.view;\r\n        };\r\n        Selection.init_Selection = function () {\r\n            this.define({\r\n                indices: [p.Array, []],\r\n                line_indices: [p.Array, []],\r\n                multiline_indices: [p.Any, {}],\r\n            });\r\n            this.internal({\r\n                selected_glyphs: [p.Array, []],\r\n                view: [p.Any],\r\n                image_indices: [p.Array, []],\r\n            });\r\n        };\r\n        Selection.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n        };\r\n        Object.defineProperty(Selection.prototype, \"selected_glyph\", {\r\n            get: function () {\r\n                return this.selected_glyphs.length > 0 ? this.selected_glyphs[0] : null;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Selection.prototype.add_to_selected_glyphs = function (glyph) {\r\n            this.selected_glyphs.push(glyph);\r\n        };\r\n        Selection.prototype.update = function (selection, _final, mode) {\r\n            if (_final === void 0) {\r\n                _final = true;\r\n            }\r\n            if (mode === void 0) {\r\n                mode = \"replace\";\r\n            }\r\n            switch (mode) {\r\n                case \"replace\": {\r\n                    this.indices = selection.indices;\r\n                    this.line_indices = selection.line_indices;\r\n                    this.selected_glyphs = selection.selected_glyphs;\r\n                    this.view = selection.view;\r\n                    this.multiline_indices = selection.multiline_indices;\r\n                    this.image_indices = selection.image_indices;\r\n                    break;\r\n                }\r\n                case \"append\": {\r\n                    this.update_through_union(selection);\r\n                    break;\r\n                }\r\n                case \"intersect\": {\r\n                    this.update_through_intersection(selection);\r\n                    break;\r\n                }\r\n                case \"subtract\": {\r\n                    this.update_through_subtraction(selection);\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        Selection.prototype.clear = function () {\r\n            this.indices = [];\r\n            this.line_indices = [];\r\n            this.multiline_indices = {};\r\n            this.view = null;\r\n            this.selected_glyphs = [];\r\n        };\r\n        Selection.prototype.is_empty = function () {\r\n            return this.indices.length == 0 && this.line_indices.length == 0 && this.image_indices.length == 0;\r\n        };\r\n        Selection.prototype.update_through_union = function (other) {\r\n            this.indices = array_1.union(this.indices, other.indices);\r\n            this.selected_glyphs = array_1.union(other.selected_glyphs, this.selected_glyphs);\r\n            this.line_indices = array_1.union(other.line_indices, this.line_indices);\r\n            this.view = other.view;\r\n            this.multiline_indices = object_1.merge(other.multiline_indices, this.multiline_indices);\r\n        };\r\n        Selection.prototype.update_through_intersection = function (other) {\r\n            this.indices = array_1.intersection(this.indices, other.indices);\r\n            // TODO: think through and fix any logic below\r\n            this.selected_glyphs = array_1.union(other.selected_glyphs, this.selected_glyphs);\r\n            this.line_indices = array_1.union(other.line_indices, this.line_indices);\r\n            this.view = other.view;\r\n            this.multiline_indices = object_1.merge(other.multiline_indices, this.multiline_indices);\r\n        };\r\n        Selection.prototype.update_through_subtraction = function (other) {\r\n            this.indices = array_1.difference(this.indices, other.indices);\r\n            // TODO: think through and fix any logic below\r\n            this.selected_glyphs = array_1.union(other.selected_glyphs, this.selected_glyphs);\r\n            this.line_indices = array_1.union(other.line_indices, this.line_indices);\r\n            this.view = other.view;\r\n            this.multiline_indices = object_1.merge(other.multiline_indices, this.multiline_indices);\r\n        };\r\n        return Selection;\r\n    }(model_1.Model));\r\n    exports.Selection = Selection;\r\n    Selection.__name__ = \"Selection\";\r\n    Selection.init_Selection();\r\n}\r\n","/* core\\selection_manager.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var has_props_1 = require(129) /* ./has_props */;\r\n    var selection_1 = require(203) /* ../models/selections/selection */;\r\n    var glyph_renderer_1 = require(205) /* ../models/renderers/glyph_renderer */;\r\n    var graph_renderer_1 = require(231) /* ../models/renderers/graph_renderer */;\r\n    var p = tslib_1.__importStar(require(133) /* ./properties */);\r\n    var SelectionManager = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SelectionManager, _super);\r\n        function SelectionManager(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.inspectors = new Map();\r\n            return _this;\r\n        }\r\n        SelectionManager.init_SelectionManager = function () {\r\n            this.internal({\r\n                source: [p.Any],\r\n            });\r\n        };\r\n        SelectionManager.prototype.select = function (renderer_views, geometry, final, mode) {\r\n            var e_1, _a, e_2, _b;\r\n            if (mode === void 0) {\r\n                mode = \"replace\";\r\n            }\r\n            // divide renderers into glyph_renderers or graph_renderers\r\n            var glyph_renderer_views = [];\r\n            var graph_renderer_views = [];\r\n            try {\r\n                for (var renderer_views_1 = tslib_1.__values(renderer_views), renderer_views_1_1 = renderer_views_1.next(); !renderer_views_1_1.done; renderer_views_1_1 = renderer_views_1.next()) {\r\n                    var r = renderer_views_1_1.value;\r\n                    if (r instanceof glyph_renderer_1.GlyphRendererView)\r\n                        glyph_renderer_views.push(r);\r\n                    else if (r instanceof graph_renderer_1.GraphRendererView)\r\n                        graph_renderer_views.push(r);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderer_views_1_1 && !renderer_views_1_1.done && (_a = renderer_views_1.return))\r\n                        _a.call(renderer_views_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            var did_hit = false;\r\n            try {\r\n                // graph renderer case\r\n                for (var graph_renderer_views_1 = tslib_1.__values(graph_renderer_views), graph_renderer_views_1_1 = graph_renderer_views_1.next(); !graph_renderer_views_1_1.done; graph_renderer_views_1_1 = graph_renderer_views_1.next()) {\r\n                    var r = graph_renderer_views_1_1.value;\r\n                    var hit_test_result = r.model.selection_policy.hit_test(geometry, r);\r\n                    did_hit = did_hit || r.model.selection_policy.do_selection(hit_test_result, r.model, final, mode);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (graph_renderer_views_1_1 && !graph_renderer_views_1_1.done && (_b = graph_renderer_views_1.return))\r\n                        _b.call(graph_renderer_views_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            // glyph renderers\r\n            if (glyph_renderer_views.length > 0) {\r\n                var hit_test_result = this.source.selection_policy.hit_test(geometry, glyph_renderer_views);\r\n                did_hit = did_hit || this.source.selection_policy.do_selection(hit_test_result, this.source, final, mode);\r\n            }\r\n            return did_hit;\r\n        };\r\n        SelectionManager.prototype.inspect = function (renderer_view, geometry) {\r\n            var did_hit = false;\r\n            if (renderer_view instanceof glyph_renderer_1.GlyphRendererView) {\r\n                var hit_test_result = renderer_view.hit_test(geometry);\r\n                if (hit_test_result != null) {\r\n                    did_hit = !hit_test_result.is_empty();\r\n                    var inspection = this.get_or_create_inspector(renderer_view.model);\r\n                    inspection.update(hit_test_result, true, \"replace\");\r\n                    this.source.setv({ inspected: inspection }, { silent: true });\r\n                    this.source.inspect.emit([renderer_view, { geometry: geometry }]);\r\n                }\r\n            }\r\n            else if (renderer_view instanceof graph_renderer_1.GraphRendererView) {\r\n                var hit_test_result = renderer_view.model.inspection_policy.hit_test(geometry, renderer_view);\r\n                did_hit = did_hit || renderer_view.model.inspection_policy.do_inspection(hit_test_result, geometry, renderer_view, false, \"replace\");\r\n            }\r\n            return did_hit;\r\n        };\r\n        SelectionManager.prototype.clear = function (rview) {\r\n            this.source.selected.clear();\r\n            if (rview != null)\r\n                this.get_or_create_inspector(rview.model).clear();\r\n        };\r\n        SelectionManager.prototype.get_or_create_inspector = function (renderer) {\r\n            var selection = this.inspectors.get(renderer);\r\n            if (selection == null) {\r\n                selection = new selection_1.Selection();\r\n                this.inspectors.set(renderer, selection);\r\n            }\r\n            return selection;\r\n        };\r\n        return SelectionManager;\r\n    }(has_props_1.HasProps));\r\n    exports.SelectionManager = SelectionManager;\r\n    SelectionManager.__name__ = \"SelectionManager\";\r\n    SelectionManager.init_SelectionManager();\r\n}\r\n","/* models\\renderers\\glyph_renderer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var data_renderer_1 = require(206) /* ./data_renderer */;\r\n    var line_1 = require(207) /* ../glyphs/line */;\r\n    var patch_1 = require(225) /* ../glyphs/patch */;\r\n    var harea_1 = require(226) /* ../glyphs/harea */;\r\n    var varea_1 = require(228) /* ../glyphs/varea */;\r\n    var cds_view_1 = require(229) /* ../sources/cds_view */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var build_views_1 = require(230) /* ../../core/build_views */;\r\n    var factor_range_1 = require(213) /* ../ranges/factor_range */;\r\n    var selection_defaults = {\r\n        fill: {},\r\n        line: {},\r\n    };\r\n    var decimated_defaults = {\r\n        fill: { fill_alpha: 0.3, fill_color: \"grey\" },\r\n        line: { line_alpha: 0.3, line_color: \"grey\" },\r\n    };\r\n    var nonselection_defaults = {\r\n        fill: { fill_alpha: 0.2 },\r\n        line: {},\r\n    };\r\n    var GlyphRendererView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GlyphRendererView, _super);\r\n        function GlyphRendererView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GlyphRendererView.prototype.lazy_initialize = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                function mk_glyph(defaults) {\r\n                    var attrs = object_1.clone(glyph_attrs);\r\n                    if (has_fill)\r\n                        object_1.extend(attrs, defaults.fill);\r\n                    if (has_line)\r\n                        object_1.extend(attrs, defaults.line);\r\n                    return new base_glyph.constructor(attrs);\r\n                }\r\n                var base_glyph, has_fill, has_line, glyph_attrs, _e, selection_glyph, _f, nonselection_glyph, _g, hover_glyph, _h, muted_glyph, _j, decimated_glyph, _k;\r\n                return tslib_1.__generator(this, function (_l) {\r\n                    switch (_l.label) {\r\n                        case 0: return [4 /*yield*/, _super.prototype.lazy_initialize.call(this)];\r\n                        case 1:\r\n                            _l.sent();\r\n                            base_glyph = this.model.glyph;\r\n                            has_fill = array_1.includes(base_glyph._mixins, \"fill\");\r\n                            has_line = array_1.includes(base_glyph._mixins, \"line\");\r\n                            glyph_attrs = object_1.clone(base_glyph.attributes);\r\n                            delete glyph_attrs.id;\r\n                            _e = this;\r\n                            return [4 /*yield*/, this.build_glyph_view(base_glyph)];\r\n                        case 2:\r\n                            _e.glyph = _l.sent();\r\n                            selection_glyph = this.model.selection_glyph;\r\n                            if (selection_glyph == null)\r\n                                selection_glyph = mk_glyph({ fill: {}, line: {} });\r\n                            else if (selection_glyph === \"auto\")\r\n                                selection_glyph = mk_glyph(selection_defaults);\r\n                            _f = this;\r\n                            return [4 /*yield*/, this.build_glyph_view(selection_glyph)];\r\n                        case 3:\r\n                            _f.selection_glyph = _l.sent();\r\n                            nonselection_glyph = this.model.nonselection_glyph;\r\n                            if ((nonselection_glyph == null))\r\n                                nonselection_glyph = mk_glyph({ fill: {}, line: {} });\r\n                            else if (nonselection_glyph === \"auto\")\r\n                                nonselection_glyph = mk_glyph(nonselection_defaults);\r\n                            _g = this;\r\n                            return [4 /*yield*/, this.build_glyph_view(nonselection_glyph)];\r\n                        case 4:\r\n                            _g.nonselection_glyph = _l.sent();\r\n                            hover_glyph = this.model.hover_glyph;\r\n                            if (!(hover_glyph != null))\r\n                                return [3 /*break*/, 6];\r\n                            _h = this;\r\n                            return [4 /*yield*/, this.build_glyph_view(hover_glyph)];\r\n                        case 5:\r\n                            _h.hover_glyph = _l.sent();\r\n                            _l.label = 6;\r\n                        case 6:\r\n                            muted_glyph = this.model.muted_glyph;\r\n                            if (!(muted_glyph != null))\r\n                                return [3 /*break*/, 8];\r\n                            _j = this;\r\n                            return [4 /*yield*/, this.build_glyph_view(muted_glyph)];\r\n                        case 7:\r\n                            _j.muted_glyph = _l.sent();\r\n                            _l.label = 8;\r\n                        case 8:\r\n                            decimated_glyph = mk_glyph(decimated_defaults);\r\n                            _k = this;\r\n                            return [4 /*yield*/, this.build_glyph_view(decimated_glyph)];\r\n                        case 9:\r\n                            _k.decimated_glyph = _l.sent();\r\n                            this.set_data(false);\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GlyphRendererView.prototype.build_glyph_view = function (glyph) {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_e) {\r\n                    return [2 /*return*/, build_views_1.build_view(glyph, { parent: this })];\r\n                });\r\n            });\r\n        };\r\n        GlyphRendererView.prototype.remove = function () {\r\n            var _a, _b;\r\n            this.glyph.remove();\r\n            this.selection_glyph.remove();\r\n            this.nonselection_glyph.remove();\r\n            (_a = this.hover_glyph) === null || _a === void 0 ? void 0 : _a.remove();\r\n            (_b = this.muted_glyph) === null || _b === void 0 ? void 0 : _b.remove();\r\n            this.decimated_glyph.remove();\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        GlyphRendererView.prototype.connect_signals = function () {\r\n            var e_1, _e, e_2, _f;\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.request_render(); });\r\n            this.connect(this.model.glyph.change, function () { return _this.set_data(); });\r\n            this.connect(this.model.data_source.change, function () { return _this.set_data(); });\r\n            this.connect(this.model.data_source.streaming, function () { return _this.set_data(); });\r\n            this.connect(this.model.data_source.patching, function (indices /* XXX: WHY? */) { return _this.set_data(true, indices); });\r\n            this.connect(this.model.data_source.selected.change, function () { return _this.request_render(); });\r\n            this.connect(this.model.data_source._select, function () { return _this.request_render(); });\r\n            if (this.hover_glyph != null)\r\n                this.connect(this.model.data_source.inspect, function () { return _this.request_render(); });\r\n            this.connect(this.model.properties.view.change, function () { return _this.set_data(); });\r\n            this.connect(this.model.view.properties.indices.change, function () { return _this.set_data(); });\r\n            this.connect(this.model.view.properties.masked.change, function () { return _this.set_visuals(); });\r\n            this.connect(this.model.properties.visible.change, function () { return _this.plot_view.update_dataranges(); });\r\n            var _g = this.plot_view.frame, x_ranges = _g.x_ranges, y_ranges = _g.y_ranges;\r\n            try {\r\n                for (var x_ranges_1 = tslib_1.__values(x_ranges), x_ranges_1_1 = x_ranges_1.next(); !x_ranges_1_1.done; x_ranges_1_1 = x_ranges_1.next()) {\r\n                    var _h = tslib_1.__read(x_ranges_1_1.value, 2), range = _h[1];\r\n                    if (range instanceof factor_range_1.FactorRange)\r\n                        this.connect(range.change, function () { return _this.set_data(); });\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (x_ranges_1_1 && !x_ranges_1_1.done && (_e = x_ranges_1.return))\r\n                        _e.call(x_ranges_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var y_ranges_1 = tslib_1.__values(y_ranges), y_ranges_1_1 = y_ranges_1.next(); !y_ranges_1_1.done; y_ranges_1_1 = y_ranges_1.next()) {\r\n                    var _j = tslib_1.__read(y_ranges_1_1.value, 2), range = _j[1];\r\n                    if (range instanceof factor_range_1.FactorRange)\r\n                        this.connect(range.change, function () { return _this.set_data(); });\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (y_ranges_1_1 && !y_ranges_1_1.done && (_f = y_ranges_1.return))\r\n                        _f.call(y_ranges_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this.connect(this.model.glyph.transformchange, function () { return _this.set_data(); });\r\n        };\r\n        GlyphRendererView.prototype._update_masked_indices = function () {\r\n            var masked = this.glyph.mask_data();\r\n            this.model.view.masked = masked;\r\n            return masked;\r\n        };\r\n        // in case of partial updates like patching, the list of indices that actually\r\n        // changed may be passed as the \"indices\" parameter to afford any optional optimizations\r\n        GlyphRendererView.prototype.set_data = function (request_render, indices) {\r\n            if (request_render === void 0) {\r\n                request_render = true;\r\n            }\r\n            if (indices === void 0) {\r\n                indices = null;\r\n            }\r\n            var source = this.model.data_source;\r\n            this.all_indices = this.model.view.indices;\r\n            var all_indices = this.all_indices;\r\n            this.glyph.set_data(source, all_indices, indices);\r\n            this.set_visuals();\r\n            this._update_masked_indices();\r\n            var lod_factor = this.plot_model.lod_factor;\r\n            var n = this.all_indices.count;\r\n            this.decimated = new types_1.Indices(n);\r\n            for (var i = 0; i < n; i += lod_factor) {\r\n                this.decimated.set(i);\r\n            }\r\n            this.set_data_timestamp = Date.now();\r\n            if (request_render) {\r\n                this.request_render();\r\n            }\r\n        };\r\n        GlyphRendererView.prototype.set_visuals = function () {\r\n            var _a, _b, _c, _d;\r\n            var source = this.model.data_source;\r\n            var all_indices = this.all_indices;\r\n            this.glyph.set_visuals(source, all_indices);\r\n            this.decimated_glyph.set_visuals(source, all_indices);\r\n            (_a = this.selection_glyph) === null || _a === void 0 ? void 0 : _a.set_visuals(source, all_indices);\r\n            (_b = this.nonselection_glyph) === null || _b === void 0 ? void 0 : _b.set_visuals(source, all_indices);\r\n            (_c = this.hover_glyph) === null || _c === void 0 ? void 0 : _c.set_visuals(source, all_indices);\r\n            (_d = this.muted_glyph) === null || _d === void 0 ? void 0 : _d.set_visuals(source, all_indices);\r\n        };\r\n        Object.defineProperty(GlyphRendererView.prototype, \"has_webgl\", {\r\n            get: function () {\r\n                return this.glyph.has_webgl;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GlyphRendererView.prototype._render = function () {\r\n            var e_3, _e, e_4, _f, e_5, _g, e_6, _h;\r\n            var _this = this;\r\n            var glsupport = this.has_webgl;\r\n            this.glyph.map_data();\r\n            // all_indices is in full data space, indices is converted to subset space by mask_data (that may use the spatial index)\r\n            var all_indices = tslib_1.__spread(this.all_indices);\r\n            var indices = tslib_1.__spread(this._update_masked_indices());\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            // selected is in full set space\r\n            var selected = this.model.data_source.selected;\r\n            var selected_full_indices;\r\n            if (!selected || selected.is_empty())\r\n                selected_full_indices = [];\r\n            else {\r\n                if (this.glyph instanceof line_1.LineView && selected.selected_glyph === this.glyph.model)\r\n                    selected_full_indices = this.model.view.convert_indices_from_subset(indices);\r\n                else\r\n                    selected_full_indices = selected.indices;\r\n            }\r\n            // inspected is in full set space\r\n            var inspected = this.model.data_source.inspected;\r\n            var inspected_full_indices = new Set((function () {\r\n                if (!inspected || inspected.is_empty())\r\n                    return [];\r\n                else {\r\n                    if (inspected.selected_glyph)\r\n                        return _this.model.view.convert_indices_from_subset(indices);\r\n                    else if (inspected.indices.length > 0)\r\n                        return inspected.indices;\r\n                    else {\r\n                        // TODO: return inspected.multiline_indices.keys()\r\n                        return Object.keys(inspected.multiline_indices).map(function (i) { return parseInt(i); });\r\n                    }\r\n                }\r\n            })());\r\n            // inspected is transformed to subset space\r\n            var inspected_subset_indices = arrayable_1.filter(indices, function (i) { return inspected_full_indices.has(all_indices[i]); });\r\n            var lod_threshold = this.plot_model.lod_threshold;\r\n            var glyph;\r\n            var nonselection_glyph;\r\n            var selection_glyph;\r\n            if ((this.model.document != null ? this.model.document.interactive_duration() > 0 : false)\r\n                && !glsupport && lod_threshold != null && all_indices.length > lod_threshold) {\r\n                // Render decimated during interaction if too many elements and not using GL\r\n                indices = tslib_1.__spread(this.decimated);\r\n                glyph = this.decimated_glyph;\r\n                nonselection_glyph = this.decimated_glyph;\r\n                selection_glyph = this.selection_glyph;\r\n            }\r\n            else {\r\n                glyph = this.model.muted && this.muted_glyph != null ? this.muted_glyph : this.glyph;\r\n                nonselection_glyph = this.nonselection_glyph;\r\n                selection_glyph = this.selection_glyph;\r\n            }\r\n            if (this.hover_glyph != null && inspected_subset_indices.length)\r\n                indices = array_1.difference(indices, inspected_subset_indices);\r\n            // Render with no selection\r\n            if (!selected_full_indices.length) {\r\n                if (this.glyph instanceof line_1.LineView) {\r\n                    if (this.hover_glyph && inspected_subset_indices.length)\r\n                        this.hover_glyph.render(ctx, this.model.view.convert_indices_from_subset(inspected_subset_indices), this.glyph);\r\n                    else\r\n                        glyph.render(ctx, all_indices, this.glyph);\r\n                }\r\n                else if (this.glyph instanceof patch_1.PatchView || this.glyph instanceof harea_1.HAreaView || this.glyph instanceof varea_1.VAreaView) {\r\n                    if (inspected.selected_glyphs.length == 0 || this.hover_glyph == null) {\r\n                        glyph.render(ctx, all_indices, this.glyph);\r\n                    }\r\n                    else {\r\n                        try {\r\n                            for (var _j = tslib_1.__values(inspected.selected_glyphs), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                                var sglyph = _k.value;\r\n                                if (sglyph == this.glyph.model)\r\n                                    this.hover_glyph.render(ctx, all_indices, this.glyph);\r\n                            }\r\n                        }\r\n                        catch (e_3_1) {\r\n                            e_3 = { error: e_3_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_k && !_k.done && (_e = _j.return))\r\n                                    _e.call(_j);\r\n                            }\r\n                            finally {\r\n                                if (e_3)\r\n                                    throw e_3.error;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    glyph.render(ctx, indices, this.glyph);\r\n                    if (this.hover_glyph && inspected_subset_indices.length)\r\n                        this.hover_glyph.render(ctx, inspected_subset_indices, this.glyph);\r\n                }\r\n                // Render with selection\r\n            }\r\n            else {\r\n                // reset the selection mask\r\n                var selected_mask = {};\r\n                try {\r\n                    for (var selected_full_indices_1 = tslib_1.__values(selected_full_indices), selected_full_indices_1_1 = selected_full_indices_1.next(); !selected_full_indices_1_1.done; selected_full_indices_1_1 = selected_full_indices_1.next()) {\r\n                        var i = selected_full_indices_1_1.value;\r\n                        selected_mask[i] = true;\r\n                    }\r\n                }\r\n                catch (e_4_1) {\r\n                    e_4 = { error: e_4_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (selected_full_indices_1_1 && !selected_full_indices_1_1.done && (_f = selected_full_indices_1.return))\r\n                            _f.call(selected_full_indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_4)\r\n                            throw e_4.error;\r\n                    }\r\n                }\r\n                // intersect/different selection with render mask\r\n                var selected_subset_indices = new Array();\r\n                var nonselected_subset_indices = new Array();\r\n                // now, selected is changed to subset space, except for Line glyph\r\n                if (this.glyph instanceof line_1.LineView) {\r\n                    try {\r\n                        for (var all_indices_1 = tslib_1.__values(all_indices), all_indices_1_1 = all_indices_1.next(); !all_indices_1_1.done; all_indices_1_1 = all_indices_1.next()) {\r\n                            var i = all_indices_1_1.value;\r\n                            if (selected_mask[i] != null)\r\n                                selected_subset_indices.push(i);\r\n                            else\r\n                                nonselected_subset_indices.push(i);\r\n                        }\r\n                    }\r\n                    catch (e_5_1) {\r\n                        e_5 = { error: e_5_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (all_indices_1_1 && !all_indices_1_1.done && (_g = all_indices_1.return))\r\n                                _g.call(all_indices_1);\r\n                        }\r\n                        finally {\r\n                            if (e_5)\r\n                                throw e_5.error;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    try {\r\n                        for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                            var i = indices_1_1.value;\r\n                            if (selected_mask[all_indices[i]] != null)\r\n                                selected_subset_indices.push(i);\r\n                            else\r\n                                nonselected_subset_indices.push(i);\r\n                        }\r\n                    }\r\n                    catch (e_6_1) {\r\n                        e_6 = { error: e_6_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (indices_1_1 && !indices_1_1.done && (_h = indices_1.return))\r\n                                _h.call(indices_1);\r\n                        }\r\n                        finally {\r\n                            if (e_6)\r\n                                throw e_6.error;\r\n                        }\r\n                    }\r\n                }\r\n                nonselection_glyph.render(ctx, nonselected_subset_indices, this.glyph);\r\n                selection_glyph.render(ctx, selected_subset_indices, this.glyph);\r\n                if (this.hover_glyph != null) {\r\n                    if (this.glyph instanceof line_1.LineView)\r\n                        this.hover_glyph.render(ctx, this.model.view.convert_indices_from_subset(inspected_subset_indices), this.glyph);\r\n                    else\r\n                        this.hover_glyph.render(ctx, inspected_subset_indices, this.glyph);\r\n                }\r\n            }\r\n            ctx.restore();\r\n        };\r\n        GlyphRendererView.prototype.draw_legend = function (ctx, x0, x1, y0, y1, field, label, index) {\r\n            if (index == null)\r\n                index = this.model.get_reference_point(field, label);\r\n            this.glyph.draw_legend_for_index(ctx, { x0: x0, x1: x1, y0: y0, y1: y1 }, index);\r\n        };\r\n        GlyphRendererView.prototype.hit_test = function (geometry) {\r\n            if (!this.model.visible)\r\n                return null;\r\n            var hit_test_result = this.glyph.hit_test(geometry);\r\n            // glyphs that don't have hit-testing implemented will return null\r\n            if (hit_test_result == null)\r\n                return null;\r\n            return this.model.view.convert_selection_from_subset(hit_test_result);\r\n        };\r\n        return GlyphRendererView;\r\n    }(data_renderer_1.DataRendererView));\r\n    exports.GlyphRendererView = GlyphRendererView;\r\n    GlyphRendererView.__name__ = \"GlyphRendererView\";\r\n    var GlyphRenderer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GlyphRenderer, _super);\r\n        function GlyphRenderer(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GlyphRenderer.init_GlyphRenderer = function () {\r\n            this.prototype.default_view = GlyphRendererView;\r\n            this.define({\r\n                data_source: [p.Instance],\r\n                view: [p.Instance, function () { return new cds_view_1.CDSView(); }],\r\n                glyph: [p.Instance],\r\n                hover_glyph: [p.Instance],\r\n                nonselection_glyph: [p.Any, 'auto'],\r\n                selection_glyph: [p.Any, 'auto'],\r\n                muted_glyph: [p.Instance],\r\n                muted: [p.Boolean, false],\r\n            });\r\n        };\r\n        GlyphRenderer.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            if (this.view.source == null) {\r\n                this.view.source = this.data_source;\r\n                this.view.compute_indices();\r\n            }\r\n        };\r\n        GlyphRenderer.prototype.get_reference_point = function (field, value) {\r\n            var index = 0;\r\n            if (field != null) {\r\n                var data = this.data_source.get_column(field);\r\n                if (data != null) {\r\n                    var i = arrayable_1.indexOf(data, value);\r\n                    if (i != -1)\r\n                        index = i;\r\n                }\r\n            }\r\n            return index;\r\n        };\r\n        GlyphRenderer.prototype.get_selection_manager = function () {\r\n            return this.data_source.selection_manager;\r\n        };\r\n        return GlyphRenderer;\r\n    }(data_renderer_1.DataRenderer));\r\n    exports.GlyphRenderer = GlyphRenderer;\r\n    GlyphRenderer.__name__ = \"GlyphRenderer\";\r\n    GlyphRenderer.init_GlyphRenderer();\r\n}\r\n","/* models\\renderers\\data_renderer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var renderer_1 = require(185) /* ./renderer */;\r\n    var DataRendererView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DataRendererView, _super);\r\n        function DataRendererView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(DataRendererView.prototype, \"xscale\", {\r\n            get: function () {\r\n                return this.coordinates.x_scale;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DataRendererView.prototype, \"yscale\", {\r\n            get: function () {\r\n                return this.coordinates.y_scale;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return DataRendererView;\r\n    }(renderer_1.RendererView));\r\n    exports.DataRendererView = DataRendererView;\r\n    DataRendererView.__name__ = \"DataRendererView\";\r\n    var DataRenderer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DataRenderer, _super);\r\n        function DataRenderer(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        DataRenderer.init_DataRenderer = function () {\r\n            this.override({\r\n                level: 'glyph',\r\n            });\r\n        };\r\n        return DataRenderer;\r\n    }(renderer_1.Renderer));\r\n    exports.DataRenderer = DataRenderer;\r\n    DataRenderer.__name__ = \"DataRenderer\";\r\n    DataRenderer.init_DataRenderer();\r\n}\r\n","/* models\\glyphs\\line.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var line_1 = require(217) /* ./webgl/line */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var LineView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineView, _super);\r\n        function LineView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LineView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            var webgl = this.renderer.plot_view.canvas_view.webgl;\r\n            if (webgl != null) {\r\n                this.glglyph = new line_1.LineGL(webgl.gl, this);\r\n            }\r\n        };\r\n        LineView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy;\r\n            var drawing = false;\r\n            var last_index = null;\r\n            this.visuals.line.set_value(ctx);\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (drawing) {\r\n                        if (!isFinite(sx[i] + sy[i])) {\r\n                            ctx.stroke();\r\n                            ctx.beginPath();\r\n                            drawing = false;\r\n                            last_index = i;\r\n                            continue;\r\n                        }\r\n                        if (last_index != null && i - last_index > 1) {\r\n                            ctx.stroke();\r\n                            drawing = false;\r\n                        }\r\n                    }\r\n                    if (drawing)\r\n                        ctx.lineTo(sx[i], sy[i]);\r\n                    else {\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(sx[i], sy[i]);\r\n                        drawing = true;\r\n                    }\r\n                    last_index = i;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            if (drawing)\r\n                ctx.stroke();\r\n        };\r\n        LineView.prototype._hit_point = function (geometry) {\r\n            /* Check if the point geometry hits this line glyph and return an object\r\n            that describes the hit result:\r\n              Args:\r\n                * geometry (object): object with the following keys\r\n                  * sx (float): screen x coordinate of the point\r\n                  * sy (float): screen y coordinate of the point\r\n                  * type (str): type of geometry (in this case it's a point)\r\n            */\r\n            var result = new selection_1.Selection();\r\n            var point = { x: geometry.sx, y: geometry.sy };\r\n            var shortest = 9999;\r\n            var threshold = Math.max(2, this.visuals.line.line_width.value() / 2);\r\n            for (var i = 0, end = this.sx.length - 1; i < end; i++) {\r\n                var p0 = { x: this.sx[i], y: this.sy[i] };\r\n                var p1 = { x: this.sx[i + 1], y: this.sy[i + 1] };\r\n                var dist = hittest.dist_to_segment(point, p0, p1);\r\n                if (dist < threshold && dist < shortest) {\r\n                    shortest = dist;\r\n                    result.add_to_selected_glyphs(this.model);\r\n                    result.view = this;\r\n                    result.line_indices = [i];\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        LineView.prototype._hit_span = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var result = new selection_1.Selection();\r\n            var val;\r\n            var values;\r\n            if (geometry.direction == 'v') {\r\n                val = this.renderer.yscale.invert(sy);\r\n                values = this._y;\r\n            }\r\n            else {\r\n                val = this.renderer.xscale.invert(sx);\r\n                values = this._x;\r\n            }\r\n            for (var i = 0, end = values.length - 1; i < end; i++) {\r\n                if ((values[i] <= val && val <= values[i + 1]) || (values[i + 1] <= val && val <= values[i])) {\r\n                    result.add_to_selected_glyphs(this.model);\r\n                    result.view = this;\r\n                    result.line_indices.push(i);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        LineView.prototype.get_interpolation_hit = function (i, geometry) {\r\n            var _a = tslib_1.__read([this._x[i], this._y[i], this._x[i + 1], this._y[i + 1]], 4), x2 = _a[0], y2 = _a[1], x3 = _a[2], y3 = _a[3];\r\n            return utils_1.line_interpolation(this.renderer, geometry, x2, y2, x3, y3);\r\n        };\r\n        LineView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return LineView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.LineView = LineView;\r\n    LineView.__name__ = \"LineView\";\r\n    var Line = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Line, _super);\r\n        function Line(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Line.init_Line = function () {\r\n            this.prototype.default_view = LineView;\r\n            this.mixins(mixins.Line /*Scalar*/);\r\n        };\r\n        return Line;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Line = Line;\r\n    Line.__name__ = \"Line\";\r\n    Line.init_Line();\r\n}\r\n","/* models\\glyphs\\xy_glyph.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var XYGlyphView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(XYGlyphView, _super);\r\n        function XYGlyphView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        XYGlyphView.prototype._project_data = function () {\r\n            projections_1.inplace.project_xy(this._x, this._y);\r\n        };\r\n        XYGlyphView.prototype._index_data = function (index) {\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var x = this._x[i];\r\n                var y = this._y[i];\r\n                if (isNaN(x + y) || !isFinite(x + y))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(x, y, x, y);\r\n            }\r\n        };\r\n        XYGlyphView.prototype.scenterxy = function (i) {\r\n            return [this.sx[i], this.sy[i]];\r\n        };\r\n        return XYGlyphView;\r\n    }(glyph_1.GlyphView));\r\n    exports.XYGlyphView = XYGlyphView;\r\n    XYGlyphView.__name__ = \"XYGlyphView\";\r\n    var XYGlyph = /** @class */ (function (_super) {\r\n        tslib_1.__extends(XYGlyph, _super);\r\n        function XYGlyph(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        XYGlyph.init_XYGlyph = function () {\r\n            this.define({\r\n                x: [p.XCoordinateSpec, { field: \"x\" }],\r\n                y: [p.YCoordinateSpec, { field: \"y\" }],\r\n            });\r\n        };\r\n        return XYGlyph;\r\n    }(glyph_1.Glyph));\r\n    exports.XYGlyph = XYGlyph;\r\n    XYGlyph.__name__ = \"XYGlyph\";\r\n    XYGlyph.init_XYGlyph();\r\n}\r\n","/* models\\glyphs\\glyph.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var bbox = tslib_1.__importStar(require(194) /* ../../core/util/bbox */);\r\n    var visuals = tslib_1.__importStar(require(189) /* ../../core/visuals */);\r\n    var view_1 = require(186) /* ../../core/view */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var spatial_1 = require(210) /* ../../core/util/spatial */;\r\n    var factor_range_1 = require(213) /* ../ranges/factor_range */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var GlyphView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GlyphView, _super);\r\n        function GlyphView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._index = null;\r\n            _this._data_size = null;\r\n            _this._nohit_warned = new Set();\r\n            return _this;\r\n        }\r\n        Object.defineProperty(GlyphView.prototype, \"renderer\", {\r\n            get: function () {\r\n                return this.parent;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GlyphView.prototype, \"has_webgl\", {\r\n            get: function () {\r\n                return this.glglyph != null;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GlyphView.prototype, \"index\", {\r\n            get: function () {\r\n                var _index = this._index;\r\n                if (_index != null)\r\n                    return _index;\r\n                else\r\n                    throw new Error(this + \".index_data() wasn't called\");\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GlyphView.prototype, \"data_size\", {\r\n            get: function () {\r\n                var _data_size = this._data_size;\r\n                if (_data_size != null)\r\n                    return _data_size;\r\n                else\r\n                    throw new Error(this + \".set_data() wasn't called\");\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GlyphView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.visuals = new visuals.Visuals(this.model);\r\n        };\r\n        GlyphView.prototype.set_visuals = function (source, indices) {\r\n            this.visuals.warm_cache(source, indices);\r\n            if (this.glglyph != null)\r\n                this.glglyph.set_visuals_changed();\r\n        };\r\n        GlyphView.prototype.render = function (ctx, indices, data) {\r\n            ctx.beginPath();\r\n            if (this.glglyph != null) {\r\n                this.renderer.needs_webgl_blit = this.glglyph.render(ctx, indices, data);\r\n                if (this.renderer.needs_webgl_blit)\r\n                    return;\r\n            }\r\n            this._render(ctx, indices, data);\r\n        };\r\n        GlyphView.prototype.has_finished = function () {\r\n            return true;\r\n        };\r\n        GlyphView.prototype.notify_finished = function () {\r\n            this.renderer.notify_finished();\r\n        };\r\n        GlyphView.prototype._bounds = function (bounds) {\r\n            return bounds;\r\n        };\r\n        GlyphView.prototype.bounds = function () {\r\n            return this._bounds(this.index.bbox);\r\n        };\r\n        GlyphView.prototype.log_bounds = function () {\r\n            var _c = this.index.bounds(bbox.positive_x()), x0 = _c.x0, x1 = _c.x1;\r\n            var _d = this.index.bounds(bbox.positive_y()), y0 = _d.y0, y1 = _d.y1;\r\n            return this._bounds({ x0: x0, y0: y0, x1: x1, y1: y1 });\r\n        };\r\n        GlyphView.prototype.get_anchor_point = function (anchor, i, _c) {\r\n            var _d = tslib_1.__read(_c, 2), sx = _d[0], sy = _d[1];\r\n            switch (anchor) {\r\n                case \"center\": {\r\n                    var _e = tslib_1.__read(this.scenterxy(i, sx, sy), 2), x = _e[0], y = _e[1];\r\n                    return { x: x, y: y };\r\n                }\r\n                default:\r\n                    return null;\r\n            }\r\n        };\r\n        /** @deprecated */\r\n        GlyphView.prototype.scenterx = function (i, sx, sy) {\r\n            return this.scenterxy(i, sx, sy)[0];\r\n        };\r\n        /** @deprecated */\r\n        GlyphView.prototype.scentery = function (i, sx, sy) {\r\n            return this.scenterxy(i, sx, sy)[1];\r\n        };\r\n        GlyphView.prototype.sdist = function (scale, pts, spans, pts_location, dilate) {\r\n            if (pts_location === void 0) {\r\n                pts_location = \"edge\";\r\n            }\r\n            if (dilate === void 0) {\r\n                dilate = false;\r\n            }\r\n            var pt0;\r\n            var pt1;\r\n            var n = pts.length;\r\n            if (pts_location == 'center') {\r\n                var halfspan = arrayable_1.map(spans, function (d) { return d / 2; });\r\n                pt0 = new Float64Array(n);\r\n                for (var i = 0; i < n; i++) {\r\n                    pt0[i] = pts[i] - halfspan[i];\r\n                }\r\n                pt1 = new Float64Array(n);\r\n                for (var i = 0; i < n; i++) {\r\n                    pt1[i] = pts[i] + halfspan[i];\r\n                }\r\n            }\r\n            else {\r\n                pt0 = pts;\r\n                pt1 = new Float64Array(n);\r\n                for (var i = 0; i < n; i++) {\r\n                    pt1[i] = pt0[i] + spans[i];\r\n                }\r\n            }\r\n            var spt0 = scale.v_compute(pt0);\r\n            var spt1 = scale.v_compute(pt1);\r\n            if (dilate)\r\n                return arrayable_1.map(spt0, function (_, i) { return Math.ceil(Math.abs(spt1[i] - spt0[i])); });\r\n            else\r\n                return arrayable_1.map(spt0, function (_, i) { return Math.abs(spt1[i] - spt0[i]); });\r\n        };\r\n        GlyphView.prototype.draw_legend_for_index = function (_ctx, _bbox, _index) { };\r\n        GlyphView.prototype.hit_test = function (geometry) {\r\n            switch (geometry.type) {\r\n                case \"point\":\r\n                    if (this._hit_point != null)\r\n                        return this._hit_point(geometry);\r\n                    break;\r\n                case \"span\":\r\n                    if (this._hit_span != null)\r\n                        return this._hit_span(geometry);\r\n                    break;\r\n                case \"rect\":\r\n                    if (this._hit_rect != null)\r\n                        return this._hit_rect(geometry);\r\n                    break;\r\n                case \"poly\":\r\n                    if (this._hit_poly != null)\r\n                        return this._hit_poly(geometry);\r\n                    break;\r\n            }\r\n            if (!this._nohit_warned.has(geometry.type)) {\r\n                logging_1.logger.debug(\"'\" + geometry.type + \"' selection not available for \" + this.model.type);\r\n                this._nohit_warned.add(geometry.type);\r\n            }\r\n            return null;\r\n        };\r\n        GlyphView.prototype._hit_rect_against_index = function (geometry) {\r\n            var sx0 = geometry.sx0, sx1 = geometry.sx1, sy0 = geometry.sy0, sy1 = geometry.sy1;\r\n            var _c = tslib_1.__read(this.renderer.coordinates.x_scale.r_invert(sx0, sx1), 2), x0 = _c[0], x1 = _c[1];\r\n            var _d = tslib_1.__read(this.renderer.coordinates.y_scale.r_invert(sy0, sy1), 2), y0 = _d[0], y1 = _d[1];\r\n            var indices = tslib_1.__spread(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 }));\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        GlyphView.prototype._project_data = function () { };\r\n        GlyphView.prototype.set_data = function (source, indices, indices_to_update) {\r\n            var e_1, _c;\r\n            var _a, _b;\r\n            var _d = this.renderer.coordinates, x_range = _d.x_range, y_range = _d.y_range;\r\n            this._data_size = (_a = source.get_length()) !== null && _a !== void 0 ? _a : 1;\r\n            try {\r\n                for (var _e = tslib_1.__values(this.model), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var prop = _f.value;\r\n                    if (!(prop instanceof p.VectorSpec))\r\n                        continue;\r\n                    // this skips optional properties like radius for circles\r\n                    if (prop.optional && prop.spec.value == null && !prop.dirty)\r\n                        continue;\r\n                    var name = prop.attr;\r\n                    var base_array = prop.array(source);\r\n                    var array = indices.select(base_array);\r\n                    if (prop instanceof p.BaseCoordinateSpec) {\r\n                        var range = prop.dimension == \"x\" ? x_range : y_range;\r\n                        if (range instanceof factor_range_1.FactorRange) {\r\n                            if (prop instanceof p.CoordinateSpec) {\r\n                                array = range.v_synthetic(array);\r\n                            }\r\n                            else if (prop instanceof p.CoordinateSeqSpec) {\r\n                                for (var i = 0; i < array.length; i++) {\r\n                                    array[i] = range.v_synthetic(array[i]);\r\n                                }\r\n                            }\r\n                        }\r\n                        if (prop instanceof p.CoordinateSeqSpec) {\r\n                            array = types_1.RaggedArray.from(array);\r\n                        }\r\n                    }\r\n                    else if (prop instanceof p.DistanceSpec) {\r\n                        this[\"max_\" + name] = arrayable_1.max(array);\r\n                    }\r\n                    this[\"_\" + name] = array;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_c = _e.return))\r\n                        _c.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            if (this.renderer.plot_view.model.use_map) {\r\n                this._project_data();\r\n            }\r\n            this._set_data(indices_to_update); // TODO doesn't take subset indices into account\r\n            (_b = this.glglyph) === null || _b === void 0 ? void 0 : _b.set_data_changed();\r\n            this.index_data();\r\n        };\r\n        GlyphView.prototype._set_data = function (_indices) { };\r\n        Object.defineProperty(GlyphView.prototype, \"_index_size\", {\r\n            get: function () {\r\n                return this.data_size;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GlyphView.prototype.index_data = function () {\r\n            var index = new spatial_1.SpatialIndex(this._index_size);\r\n            this._index_data(index);\r\n            index.finish();\r\n            this._index = index;\r\n        };\r\n        GlyphView.prototype.mask_data = function () {\r\n            // WebGL can do the clipping much more efficiently\r\n            if (this.glglyph != null || this._mask_data == null)\r\n                return types_1.Indices.all_set(this.data_size);\r\n            else\r\n                return this._mask_data();\r\n        };\r\n        GlyphView.prototype.map_data = function () {\r\n            var e_2, _c;\r\n            var _a;\r\n            var self = this;\r\n            var _d = this.renderer.coordinates, x_scale = _d.x_scale, y_scale = _d.y_scale;\r\n            try {\r\n                for (var _e = tslib_1.__values(this.model), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var prop = _f.value;\r\n                    if (prop instanceof p.BaseCoordinateSpec) {\r\n                        var scale = prop.dimension == \"x\" ? x_scale : y_scale;\r\n                        var array = self[\"_\" + prop.attr];\r\n                        if (array instanceof types_1.RaggedArray) {\r\n                            var screen = scale.v_compute(array.array);\r\n                            array = new types_1.RaggedArray(array.offsets, screen);\r\n                        }\r\n                        else {\r\n                            array = scale.v_compute(array);\r\n                        }\r\n                        this[\"s\" + prop.attr] = array;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_c = _e.return))\r\n                        _c.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this._map_data();\r\n            (_a = this.glglyph) === null || _a === void 0 ? void 0 : _a.set_data_changed();\r\n        };\r\n        // This is where specs not included in coords are computed, e.g. radius.\r\n        GlyphView.prototype._map_data = function () { };\r\n        return GlyphView;\r\n    }(view_1.View));\r\n    exports.GlyphView = GlyphView;\r\n    GlyphView.__name__ = \"GlyphView\";\r\n    var Glyph = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Glyph, _super);\r\n        function Glyph(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Glyph.init_Glyph = function () { };\r\n        return Glyph;\r\n    }(model_1.Model));\r\n    exports.Glyph = Glyph;\r\n    Glyph.__name__ = \"Glyph\";\r\n    Glyph.init_Glyph();\r\n}\r\n","/* core\\util\\spatial.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var flatbush_1 = tslib_1.__importDefault(require(211) /* flatbush */);\r\n    var types_1 = require(139) /* ../types */;\r\n    var bbox_1 = require(194) /* ./bbox */;\r\n    function upperBound(value, arr) {\r\n        var i = 0;\r\n        var j = arr.length - 1;\r\n        while (i < j) {\r\n            var m = (i + j) >> 1;\r\n            if (arr[m] > value) {\r\n                j = m;\r\n            }\r\n            else {\r\n                i = m + 1;\r\n            }\r\n        }\r\n        return arr[i];\r\n    }\r\n    var _FlatBush = /** @class */ (function (_super) {\r\n        tslib_1.__extends(_FlatBush, _super);\r\n        function _FlatBush() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        _FlatBush.prototype.search_indices = function (minX, minY, maxX, maxY) {\r\n            if (this._pos !== this._boxes.length) {\r\n                throw new Error('Data not yet indexed - call index.finish().');\r\n            }\r\n            var nodeIndex = this._boxes.length - 4;\r\n            var queue = [];\r\n            var results = new types_1.Indices(this.numItems);\r\n            while (nodeIndex !== undefined) {\r\n                // find the end index of the node\r\n                var end = Math.min(nodeIndex + this.nodeSize * 4, upperBound(nodeIndex, this._levelBounds));\r\n                // search through child nodes\r\n                for (var pos = nodeIndex; pos < end; pos += 4) {\r\n                    var index = this._indices[pos >> 2] | 0;\r\n                    // check if node bbox intersects with query bbox\r\n                    if (maxX < this._boxes[pos + 0])\r\n                        continue; // maxX < nodeMinX\r\n                    if (maxY < this._boxes[pos + 1])\r\n                        continue; // maxY < nodeMinY\r\n                    if (minX > this._boxes[pos + 2])\r\n                        continue; // minX > nodeMaxX\r\n                    if (minY > this._boxes[pos + 3])\r\n                        continue; // minY > nodeMaxY\r\n                    if (nodeIndex < this.numItems * 4) {\r\n                        results.set(index); // leaf item\r\n                    }\r\n                    else {\r\n                        queue.push(index); // node; add it to the search queue\r\n                    }\r\n                }\r\n                nodeIndex = queue.pop();\r\n            }\r\n            return results;\r\n        };\r\n        return _FlatBush;\r\n    }(flatbush_1.default));\r\n    _FlatBush.__name__ = \"_FlatBush\";\r\n    var SpatialIndex = /** @class */ (function () {\r\n        function SpatialIndex(size) {\r\n            this.index = null;\r\n            if (size > 0) {\r\n                this.index = new _FlatBush(size);\r\n            }\r\n        }\r\n        SpatialIndex.prototype.add = function (x0, y0, x1, y1) {\r\n            var _a;\r\n            (_a = this.index) === null || _a === void 0 ? void 0 : _a.add(x0, y0, x1, y1);\r\n        };\r\n        SpatialIndex.prototype.add_empty = function () {\r\n            var _a;\r\n            (_a = this.index) === null || _a === void 0 ? void 0 : _a.add(Infinity, Infinity, -Infinity, -Infinity);\r\n        };\r\n        SpatialIndex.prototype.finish = function () {\r\n            var _a;\r\n            (_a = this.index) === null || _a === void 0 ? void 0 : _a.finish();\r\n        };\r\n        SpatialIndex.prototype._normalize = function (rect) {\r\n            var _b, _c;\r\n            var x0 = rect.x0, y0 = rect.y0, x1 = rect.x1, y1 = rect.y1;\r\n            if (x0 > x1)\r\n                _b = tslib_1.__read([x1, x0], 2), x0 = _b[0], x1 = _b[1];\r\n            if (y0 > y1)\r\n                _c = tslib_1.__read([y1, y0], 2), y0 = _c[0], y1 = _c[1];\r\n            return { x0: x0, y0: y0, x1: x1, y1: y1 };\r\n        };\r\n        Object.defineProperty(SpatialIndex.prototype, \"bbox\", {\r\n            get: function () {\r\n                if (this.index == null)\r\n                    return bbox_1.empty();\r\n                else {\r\n                    var _b = this.index, minX = _b.minX, minY = _b.minY, maxX = _b.maxX, maxY = _b.maxY;\r\n                    return { x0: minX, y0: minY, x1: maxX, y1: maxY };\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        SpatialIndex.prototype.indices = function (rect) {\r\n            if (this.index == null)\r\n                return new types_1.Indices(0);\r\n            else {\r\n                var _b = this._normalize(rect), x0 = _b.x0, y0 = _b.y0, x1 = _b.x1, y1 = _b.y1;\r\n                return this.index.search_indices(x0, y0, x1, y1);\r\n            }\r\n        };\r\n        SpatialIndex.prototype.bounds = function (rect) {\r\n            var e_1, _b;\r\n            var bounds = bbox_1.empty();\r\n            try {\r\n                for (var _c = tslib_1.__values(this.indices(rect)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var i = _d.value;\r\n                    var boxes = this.index._boxes;\r\n                    var x1 = boxes[4 * i + 0];\r\n                    var y1 = boxes[4 * i + 1];\r\n                    var x0 = boxes[4 * i + 2];\r\n                    var y0 = boxes[4 * i + 3];\r\n                    if (x0 < bounds.x0)\r\n                        bounds.x0 = x0;\r\n                    if (x1 > bounds.x1)\r\n                        bounds.x1 = x1;\r\n                    if (y0 < bounds.y0)\r\n                        bounds.y0 = y0;\r\n                    if (y1 > bounds.y1)\r\n                        bounds.y1 = y1;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return bounds;\r\n        };\r\n        return SpatialIndex;\r\n    }());\r\n    exports.SpatialIndex = SpatialIndex;\r\n    SpatialIndex.__name__ = \"SpatialIndex\";\r\n}\r\n","/* flatbush\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var flatqueue_1 = tslib_1.__importDefault(require(212) /* flatqueue */);\r\n    var ARRAY_TYPES = [\r\n        Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array,\r\n        Int32Array, Uint32Array, Float32Array, Float64Array\r\n    ];\r\n    var VERSION = 3; // serialized format version\r\n    var Flatbush = /** @class */ (function () {\r\n        function Flatbush(numItems, nodeSize, ArrayType, data) {\r\n            if (nodeSize === void 0) {\r\n                nodeSize = 16;\r\n            }\r\n            if (ArrayType === void 0) {\r\n                ArrayType = Float64Array;\r\n            }\r\n            if (numItems === undefined)\r\n                throw new Error('Missing required argument: numItems.');\r\n            if (isNaN(numItems) || numItems <= 0)\r\n                throw new Error(\"Unpexpected numItems value: \" + numItems + \".\");\r\n            this.numItems = +numItems;\r\n            this.nodeSize = Math.min(Math.max(+nodeSize, 2), 65535);\r\n            // calculate the total number of nodes in the R-tree to allocate space for\r\n            // and the index of each tree level (used in search later)\r\n            var n = numItems;\r\n            var numNodes = n;\r\n            this._levelBounds = [n * 4];\r\n            do {\r\n                n = Math.ceil(n / this.nodeSize);\r\n                numNodes += n;\r\n                this._levelBounds.push(numNodes * 4);\r\n            } while (n !== 1);\r\n            this.ArrayType = ArrayType || Float64Array;\r\n            this.IndexArrayType = numNodes < 16384 ? Uint16Array : Uint32Array;\r\n            var arrayTypeIndex = ARRAY_TYPES.indexOf(this.ArrayType);\r\n            var nodesByteSize = numNodes * 4 * this.ArrayType.BYTES_PER_ELEMENT;\r\n            if (arrayTypeIndex < 0) {\r\n                throw new Error(\"Unexpected typed array class: \" + ArrayType + \".\");\r\n            }\r\n            if (data && (data instanceof ArrayBuffer)) {\r\n                this.data = data;\r\n                this._boxes = new this.ArrayType(this.data, 8, numNodes * 4);\r\n                this._indices = new this.IndexArrayType(this.data, 8 + nodesByteSize, numNodes);\r\n                this._pos = numNodes * 4;\r\n                this.minX = this._boxes[this._pos - 4];\r\n                this.minY = this._boxes[this._pos - 3];\r\n                this.maxX = this._boxes[this._pos - 2];\r\n                this.maxY = this._boxes[this._pos - 1];\r\n            }\r\n            else {\r\n                this.data = new ArrayBuffer(8 + nodesByteSize + numNodes * this.IndexArrayType.BYTES_PER_ELEMENT);\r\n                this._boxes = new this.ArrayType(this.data, 8, numNodes * 4);\r\n                this._indices = new this.IndexArrayType(this.data, 8 + nodesByteSize, numNodes);\r\n                this._pos = 0;\r\n                this.minX = Infinity;\r\n                this.minY = Infinity;\r\n                this.maxX = -Infinity;\r\n                this.maxY = -Infinity;\r\n                new Uint8Array(this.data, 0, 2).set([0xfb, (VERSION << 4) + arrayTypeIndex]);\r\n                new Uint16Array(this.data, 2, 1)[0] = nodeSize;\r\n                new Uint32Array(this.data, 4, 1)[0] = numItems;\r\n            }\r\n            // a priority queue for k-nearest-neighbors queries\r\n            this._queue = new flatqueue_1.default();\r\n        }\r\n        Flatbush.from = function (data) {\r\n            if (!(data instanceof ArrayBuffer)) {\r\n                throw new Error('Data must be an instance of ArrayBuffer.');\r\n            }\r\n            var _a = tslib_1.__read(new Uint8Array(data, 0, 2), 2), magic = _a[0], versionAndType = _a[1];\r\n            if (magic !== 0xfb) {\r\n                throw new Error('Data does not appear to be in a Flatbush format.');\r\n            }\r\n            if (versionAndType >> 4 !== VERSION) {\r\n                throw new Error(\"Got v\" + (versionAndType >> 4) + \" data when expected v\" + VERSION + \".\");\r\n            }\r\n            var _b = tslib_1.__read(new Uint16Array(data, 2, 1), 1), nodeSize = _b[0];\r\n            var _c = tslib_1.__read(new Uint32Array(data, 4, 1), 1), numItems = _c[0];\r\n            return new Flatbush(numItems, nodeSize, ARRAY_TYPES[versionAndType & 0x0f], data);\r\n        };\r\n        Flatbush.prototype.add = function (minX, minY, maxX, maxY) {\r\n            var index = this._pos >> 2;\r\n            this._indices[index] = index;\r\n            this._boxes[this._pos++] = minX;\r\n            this._boxes[this._pos++] = minY;\r\n            this._boxes[this._pos++] = maxX;\r\n            this._boxes[this._pos++] = maxY;\r\n            if (minX < this.minX)\r\n                this.minX = minX;\r\n            if (minY < this.minY)\r\n                this.minY = minY;\r\n            if (maxX > this.maxX)\r\n                this.maxX = maxX;\r\n            if (maxY > this.maxY)\r\n                this.maxY = maxY;\r\n            return index;\r\n        };\r\n        Flatbush.prototype.finish = function () {\r\n            if (this._pos >> 2 !== this.numItems) {\r\n                throw new Error(\"Added \" + (this._pos >> 2) + \" items when expected \" + this.numItems + \".\");\r\n            }\r\n            if (this.numItems <= this.nodeSize) {\r\n                // only one node, skip sorting and just fill the root box\r\n                this._boxes[this._pos++] = this.minX;\r\n                this._boxes[this._pos++] = this.minY;\r\n                this._boxes[this._pos++] = this.maxX;\r\n                this._boxes[this._pos++] = this.maxY;\r\n                return;\r\n            }\r\n            var width = this.maxX - this.minX;\r\n            var height = this.maxY - this.minY;\r\n            var hilbertValues = new Uint32Array(this.numItems);\r\n            var hilbertMax = (1 << 16) - 1;\r\n            // map item centers into Hilbert coordinate space and calculate Hilbert values\r\n            for (var i = 0; i < this.numItems; i++) {\r\n                var pos = 4 * i;\r\n                var minX = this._boxes[pos++];\r\n                var minY = this._boxes[pos++];\r\n                var maxX = this._boxes[pos++];\r\n                var maxY = this._boxes[pos++];\r\n                var x = Math.floor(hilbertMax * ((minX + maxX) / 2 - this.minX) / width);\r\n                var y = Math.floor(hilbertMax * ((minY + maxY) / 2 - this.minY) / height);\r\n                hilbertValues[i] = hilbert(x, y);\r\n            }\r\n            // sort items by their Hilbert value (for packing later)\r\n            sort(hilbertValues, this._boxes, this._indices, 0, this.numItems - 1, this.nodeSize);\r\n            // generate nodes at each tree level, bottom-up\r\n            for (var i = 0, pos = 0; i < this._levelBounds.length - 1; i++) {\r\n                var end = this._levelBounds[i];\r\n                // generate a parent node for each block of consecutive <nodeSize> nodes\r\n                while (pos < end) {\r\n                    var nodeIndex = pos;\r\n                    // calculate bbox for the new node\r\n                    var nodeMinX = Infinity;\r\n                    var nodeMinY = Infinity;\r\n                    var nodeMaxX = -Infinity;\r\n                    var nodeMaxY = -Infinity;\r\n                    for (var i_1 = 0; i_1 < this.nodeSize && pos < end; i_1++) {\r\n                        nodeMinX = Math.min(nodeMinX, this._boxes[pos++]);\r\n                        nodeMinY = Math.min(nodeMinY, this._boxes[pos++]);\r\n                        nodeMaxX = Math.max(nodeMaxX, this._boxes[pos++]);\r\n                        nodeMaxY = Math.max(nodeMaxY, this._boxes[pos++]);\r\n                    }\r\n                    // add the new node to the tree data\r\n                    this._indices[this._pos >> 2] = nodeIndex;\r\n                    this._boxes[this._pos++] = nodeMinX;\r\n                    this._boxes[this._pos++] = nodeMinY;\r\n                    this._boxes[this._pos++] = nodeMaxX;\r\n                    this._boxes[this._pos++] = nodeMaxY;\r\n                }\r\n            }\r\n        };\r\n        Flatbush.prototype.search = function (minX, minY, maxX, maxY, filterFn) {\r\n            if (this._pos !== this._boxes.length) {\r\n                throw new Error('Data not yet indexed - call index.finish().');\r\n            }\r\n            var nodeIndex = this._boxes.length - 4;\r\n            var queue = [];\r\n            var results = [];\r\n            while (nodeIndex !== undefined) {\r\n                // find the end index of the node\r\n                var end = Math.min(nodeIndex + this.nodeSize * 4, upperBound(nodeIndex, this._levelBounds));\r\n                // search through child nodes\r\n                for (var pos = nodeIndex; pos < end; pos += 4) {\r\n                    var index = this._indices[pos >> 2] | 0;\r\n                    // check if node bbox intersects with query bbox\r\n                    if (maxX < this._boxes[pos])\r\n                        continue; // maxX < nodeMinX\r\n                    if (maxY < this._boxes[pos + 1])\r\n                        continue; // maxY < nodeMinY\r\n                    if (minX > this._boxes[pos + 2])\r\n                        continue; // minX > nodeMaxX\r\n                    if (minY > this._boxes[pos + 3])\r\n                        continue; // minY > nodeMaxY\r\n                    if (nodeIndex < this.numItems * 4) {\r\n                        if (filterFn === undefined || filterFn(index)) {\r\n                            results.push(index); // leaf item\r\n                        }\r\n                    }\r\n                    else {\r\n                        queue.push(index); // node; add it to the search queue\r\n                    }\r\n                }\r\n                nodeIndex = queue.pop();\r\n            }\r\n            return results;\r\n        };\r\n        Flatbush.prototype.neighbors = function (x, y, maxResults, maxDistance, filterFn) {\r\n            if (maxResults === void 0) {\r\n                maxResults = Infinity;\r\n            }\r\n            if (maxDistance === void 0) {\r\n                maxDistance = Infinity;\r\n            }\r\n            if (this._pos !== this._boxes.length) {\r\n                throw new Error('Data not yet indexed - call index.finish().');\r\n            }\r\n            var nodeIndex = this._boxes.length - 4;\r\n            var q = this._queue;\r\n            var results = [];\r\n            var maxDistSquared = maxDistance * maxDistance;\r\n            while (nodeIndex !== undefined) {\r\n                // find the end index of the node\r\n                var end = Math.min(nodeIndex + this.nodeSize * 4, upperBound(nodeIndex, this._levelBounds));\r\n                // add child nodes to the queue\r\n                for (var pos = nodeIndex; pos < end; pos += 4) {\r\n                    var index = this._indices[pos >> 2] | 0;\r\n                    var dx = axisDist(x, this._boxes[pos], this._boxes[pos + 2]);\r\n                    var dy = axisDist(y, this._boxes[pos + 1], this._boxes[pos + 3]);\r\n                    var dist = dx * dx + dy * dy;\r\n                    if (nodeIndex < this.numItems * 4) { // leaf node\r\n                        if (filterFn === undefined || filterFn(index)) {\r\n                            // put a negative index if it's an item rather than a node, to recognize later\r\n                            q.push(-index - 1, dist);\r\n                        }\r\n                    }\r\n                    else {\r\n                        q.push(index, dist);\r\n                    }\r\n                }\r\n                // pop items from the queue\r\n                while (q.length && q.peek() < 0) {\r\n                    var dist = q.peekValue();\r\n                    if (dist > maxDistSquared) {\r\n                        q.clear();\r\n                        return results;\r\n                    }\r\n                    results.push(-q.pop() - 1);\r\n                    if (results.length === maxResults) {\r\n                        q.clear();\r\n                        return results;\r\n                    }\r\n                }\r\n                nodeIndex = q.pop();\r\n            }\r\n            q.clear();\r\n            return results;\r\n        };\r\n        return Flatbush;\r\n    }());\r\n    exports.default = Flatbush;\r\n    function axisDist(k, min, max) {\r\n        return k < min ? min - k : k <= max ? 0 : k - max;\r\n    }\r\n    // binary search for the first value in the array bigger than the given\r\n    function upperBound(value, arr) {\r\n        var i = 0;\r\n        var j = arr.length - 1;\r\n        while (i < j) {\r\n            var m = (i + j) >> 1;\r\n            if (arr[m] > value) {\r\n                j = m;\r\n            }\r\n            else {\r\n                i = m + 1;\r\n            }\r\n        }\r\n        return arr[i];\r\n    }\r\n    // custom quicksort that partially sorts bbox data alongside the hilbert values\r\n    function sort(values, boxes, indices, left, right, nodeSize) {\r\n        if (Math.floor(left / nodeSize) >= Math.floor(right / nodeSize))\r\n            return;\r\n        var pivot = values[(left + right) >> 1];\r\n        var i = left - 1;\r\n        var j = right + 1;\r\n        while (true) {\r\n            do\r\n                i++;\r\n            while (values[i] < pivot);\r\n            do\r\n                j--;\r\n            while (values[j] > pivot);\r\n            if (i >= j)\r\n                break;\r\n            swap(values, boxes, indices, i, j);\r\n        }\r\n        sort(values, boxes, indices, left, j, nodeSize);\r\n        sort(values, boxes, indices, j + 1, right, nodeSize);\r\n    }\r\n    // swap two values and two corresponding boxes\r\n    function swap(values, boxes, indices, i, j) {\r\n        var temp = values[i];\r\n        values[i] = values[j];\r\n        values[j] = temp;\r\n        var k = 4 * i;\r\n        var m = 4 * j;\r\n        var a = boxes[k];\r\n        var b = boxes[k + 1];\r\n        var c = boxes[k + 2];\r\n        var d = boxes[k + 3];\r\n        boxes[k] = boxes[m];\r\n        boxes[k + 1] = boxes[m + 1];\r\n        boxes[k + 2] = boxes[m + 2];\r\n        boxes[k + 3] = boxes[m + 3];\r\n        boxes[m] = a;\r\n        boxes[m + 1] = b;\r\n        boxes[m + 2] = c;\r\n        boxes[m + 3] = d;\r\n        var e = indices[i];\r\n        indices[i] = indices[j];\r\n        indices[j] = e;\r\n    }\r\n    // Fast Hilbert curve algorithm by http://threadlocalmutex.com/\r\n    // Ported from C++ https://github.com/rawrunprotected/hilbert_curves (public domain)\r\n    function hilbert(x, y) {\r\n        var a = x ^ y;\r\n        var b = 0xFFFF ^ a;\r\n        var c = 0xFFFF ^ (x | y);\r\n        var d = x & (y ^ 0xFFFF);\r\n        var A = a | (b >> 1);\r\n        var B = (a >> 1) ^ a;\r\n        var C = ((c >> 1) ^ (b & (d >> 1))) ^ c;\r\n        var D = ((a & (c >> 1)) ^ (d >> 1)) ^ d;\r\n        a = A;\r\n        b = B;\r\n        c = C;\r\n        d = D;\r\n        A = ((a & (a >> 2)) ^ (b & (b >> 2)));\r\n        B = ((a & (b >> 2)) ^ (b & ((a ^ b) >> 2)));\r\n        C ^= ((a & (c >> 2)) ^ (b & (d >> 2)));\r\n        D ^= ((b & (c >> 2)) ^ ((a ^ b) & (d >> 2)));\r\n        a = A;\r\n        b = B;\r\n        c = C;\r\n        d = D;\r\n        A = ((a & (a >> 4)) ^ (b & (b >> 4)));\r\n        B = ((a & (b >> 4)) ^ (b & ((a ^ b) >> 4)));\r\n        C ^= ((a & (c >> 4)) ^ (b & (d >> 4)));\r\n        D ^= ((b & (c >> 4)) ^ ((a ^ b) & (d >> 4)));\r\n        a = A;\r\n        b = B;\r\n        c = C;\r\n        d = D;\r\n        C ^= ((a & (c >> 8)) ^ (b & (d >> 8)));\r\n        D ^= ((b & (c >> 8)) ^ ((a ^ b) & (d >> 8)));\r\n        a = C ^ (C >> 1);\r\n        b = D ^ (D >> 1);\r\n        var i0 = x ^ y;\r\n        var i1 = b | (0xFFFF ^ (i0 | a));\r\n        i0 = (i0 | (i0 << 8)) & 0x00FF00FF;\r\n        i0 = (i0 | (i0 << 4)) & 0x0F0F0F0F;\r\n        i0 = (i0 | (i0 << 2)) & 0x33333333;\r\n        i0 = (i0 | (i0 << 1)) & 0x55555555;\r\n        i1 = (i1 | (i1 << 8)) & 0x00FF00FF;\r\n        i1 = (i1 | (i1 << 4)) & 0x0F0F0F0F;\r\n        i1 = (i1 | (i1 << 2)) & 0x33333333;\r\n        i1 = (i1 | (i1 << 1)) & 0x55555555;\r\n        return ((i1 << 1) | i0) >>> 0;\r\n    }\r\n}\r\n","/* flatqueue\\index.mjs */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var FlatQueue = /** @class */ (function () {\r\n        function FlatQueue() {\r\n            this.ids = [];\r\n            this.values = [];\r\n            this.length = 0;\r\n        }\r\n        FlatQueue.prototype.clear = function () {\r\n            this.length = 0;\r\n        };\r\n        FlatQueue.prototype.push = function (id, value) {\r\n            var pos = this.length++;\r\n            this.ids[pos] = id;\r\n            this.values[pos] = value;\r\n            while (pos > 0) {\r\n                var parent = (pos - 1) >> 1;\r\n                var parentValue = this.values[parent];\r\n                if (value >= parentValue)\r\n                    break;\r\n                this.ids[pos] = this.ids[parent];\r\n                this.values[pos] = parentValue;\r\n                pos = parent;\r\n            }\r\n            this.ids[pos] = id;\r\n            this.values[pos] = value;\r\n        };\r\n        FlatQueue.prototype.pop = function () {\r\n            if (this.length === 0)\r\n                return undefined;\r\n            var top = this.ids[0];\r\n            this.length--;\r\n            if (this.length > 0) {\r\n                var id = this.ids[0] = this.ids[this.length];\r\n                var value = this.values[0] = this.values[this.length];\r\n                var halfLength = this.length >> 1;\r\n                var pos = 0;\r\n                while (pos < halfLength) {\r\n                    var left = (pos << 1) + 1;\r\n                    var right = left + 1;\r\n                    var bestIndex = this.ids[left];\r\n                    var bestValue = this.values[left];\r\n                    var rightValue = this.values[right];\r\n                    if (right < this.length && rightValue < bestValue) {\r\n                        left = right;\r\n                        bestIndex = this.ids[right];\r\n                        bestValue = rightValue;\r\n                    }\r\n                    if (bestValue >= value)\r\n                        break;\r\n                    this.ids[pos] = bestIndex;\r\n                    this.values[pos] = bestValue;\r\n                    pos = left;\r\n                }\r\n                this.ids[pos] = id;\r\n                this.values[pos] = value;\r\n            }\r\n            return top;\r\n        };\r\n        FlatQueue.prototype.peek = function () {\r\n            if (this.length === 0)\r\n                return undefined;\r\n            return this.ids[0];\r\n        };\r\n        FlatQueue.prototype.peekValue = function () {\r\n            if (this.length === 0)\r\n                return undefined;\r\n            return this.values[0];\r\n        };\r\n        return FlatQueue;\r\n    }());\r\n    exports.default = FlatQueue;\r\n}\r\n","/* models\\ranges\\factor_range.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var range_1 = require(214) /* ./range */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var types_2 = require(123) /* ../../core/util/types */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    function map_one_level(factors, padding, offset) {\r\n        if (offset === void 0) {\r\n            offset = 0;\r\n        }\r\n        var mapping = new Map();\r\n        for (var i = 0; i < factors.length; i++) {\r\n            var factor = factors[i];\r\n            if (!mapping.has(factor))\r\n                mapping.set(factor, { value: 0.5 + i * (1 + padding) + offset });\r\n            else\r\n                throw new Error(\"duplicate factor or subfactor: \" + factor);\r\n        }\r\n        return [mapping, (factors.length - 1) * padding];\r\n    }\r\n    exports.map_one_level = map_one_level;\r\n    function map_two_levels(factors, outer_pad, factor_pad, offset) {\r\n        var e_1, _b, e_2, _c;\r\n        if (offset === void 0) {\r\n            offset = 0;\r\n        }\r\n        var _a;\r\n        var mapping = new Map();\r\n        var tops = new Map();\r\n        try {\r\n            for (var factors_1 = tslib_1.__values(factors), factors_1_1 = factors_1.next(); !factors_1_1.done; factors_1_1 = factors_1.next()) {\r\n                var _d = tslib_1.__read(factors_1_1.value, 2), f0 = _d[0], f1 = _d[1];\r\n                var top = (_a = tops.get(f0)) !== null && _a !== void 0 ? _a : [];\r\n                tops.set(f0, tslib_1.__spread(top, [f1]));\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (factors_1_1 && !factors_1_1.done && (_b = factors_1.return))\r\n                    _b.call(factors_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        var suboffset = offset;\r\n        var total_subpad = 0;\r\n        var _loop_1 = function (f0, top) {\r\n            var n = top.length;\r\n            var _b = tslib_1.__read(map_one_level(top, factor_pad, suboffset), 2), submap = _b[0], subpad = _b[1];\r\n            total_subpad += subpad;\r\n            var subtot = array_1.sum(top.map(function (f1) { return submap.get(f1).value; }));\r\n            mapping.set(f0, { value: subtot / n, mapping: submap });\r\n            suboffset += n + outer_pad + subpad;\r\n        };\r\n        try {\r\n            for (var tops_1 = tslib_1.__values(tops), tops_1_1 = tops_1.next(); !tops_1_1.done; tops_1_1 = tops_1.next()) {\r\n                var _e = tslib_1.__read(tops_1_1.value, 2), f0 = _e[0], top = _e[1];\r\n                _loop_1(f0, top);\r\n            }\r\n        }\r\n        catch (e_2_1) {\r\n            e_2 = { error: e_2_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (tops_1_1 && !tops_1_1.done && (_c = tops_1.return))\r\n                    _c.call(tops_1);\r\n            }\r\n            finally {\r\n                if (e_2)\r\n                    throw e_2.error;\r\n            }\r\n        }\r\n        return [mapping, (tops.size - 1) * outer_pad + total_subpad];\r\n    }\r\n    exports.map_two_levels = map_two_levels;\r\n    function map_three_levels(factors, outer_pad, inner_pad, factor_pad, offset) {\r\n        var e_3, _b, e_4, _c;\r\n        if (offset === void 0) {\r\n            offset = 0;\r\n        }\r\n        var _a;\r\n        var mapping = new Map();\r\n        var tops = new Map();\r\n        try {\r\n            for (var factors_2 = tslib_1.__values(factors), factors_2_1 = factors_2.next(); !factors_2_1.done; factors_2_1 = factors_2.next()) {\r\n                var _d = tslib_1.__read(factors_2_1.value, 3), f0 = _d[0], f1 = _d[1], f2 = _d[2];\r\n                var top = (_a = tops.get(f0)) !== null && _a !== void 0 ? _a : [];\r\n                tops.set(f0, tslib_1.__spread(top, [[f1, f2]]));\r\n            }\r\n        }\r\n        catch (e_3_1) {\r\n            e_3 = { error: e_3_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (factors_2_1 && !factors_2_1.done && (_b = factors_2.return))\r\n                    _b.call(factors_2);\r\n            }\r\n            finally {\r\n                if (e_3)\r\n                    throw e_3.error;\r\n            }\r\n        }\r\n        var suboffset = offset;\r\n        var total_subpad = 0;\r\n        var _loop_2 = function (f0, top) {\r\n            var n = top.length;\r\n            var _b = tslib_1.__read(map_two_levels(top, inner_pad, factor_pad, suboffset), 2), submap = _b[0], subpad = _b[1];\r\n            total_subpad += subpad;\r\n            var subtot = array_1.sum(top.map(function (_b) {\r\n                var _c = tslib_1.__read(_b, 1), f1 = _c[0];\r\n                return submap.get(f1).value;\r\n            }));\r\n            mapping.set(f0, { value: subtot / n, mapping: submap });\r\n            suboffset += n + outer_pad + subpad;\r\n        };\r\n        try {\r\n            for (var tops_2 = tslib_1.__values(tops), tops_2_1 = tops_2.next(); !tops_2_1.done; tops_2_1 = tops_2.next()) {\r\n                var _e = tslib_1.__read(tops_2_1.value, 2), f0 = _e[0], top = _e[1];\r\n                _loop_2(f0, top);\r\n            }\r\n        }\r\n        catch (e_4_1) {\r\n            e_4 = { error: e_4_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (tops_2_1 && !tops_2_1.done && (_c = tops_2.return))\r\n                    _c.call(tops_2);\r\n            }\r\n            finally {\r\n                if (e_4)\r\n                    throw e_4.error;\r\n            }\r\n        }\r\n        return [mapping, (tops.size - 1) * outer_pad + total_subpad];\r\n    }\r\n    exports.map_three_levels = map_three_levels;\r\n    var FactorRange = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FactorRange, _super);\r\n        function FactorRange(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        FactorRange.init_FactorRange = function () {\r\n            this.define({\r\n                factors: [p.Array, []],\r\n                factor_padding: [p.Number, 0],\r\n                subgroup_padding: [p.Number, 0.8],\r\n                group_padding: [p.Number, 1.4],\r\n                range_padding: [p.Number, 0],\r\n                range_padding_units: [p.PaddingUnits, \"percent\"],\r\n                start: [p.Number],\r\n                end: [p.Number],\r\n            });\r\n            this.internal({\r\n                levels: [p.Number],\r\n                mids: [p.Array, null],\r\n                tops: [p.Array, null],\r\n            });\r\n        };\r\n        Object.defineProperty(FactorRange.prototype, \"min\", {\r\n            get: function () {\r\n                return this.start;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(FactorRange.prototype, \"max\", {\r\n            get: function () {\r\n                return this.end;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        FactorRange.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._init(true);\r\n        };\r\n        FactorRange.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.properties.factors.change, function () { return _this.reset(); });\r\n            this.connect(this.properties.factor_padding.change, function () { return _this.reset(); });\r\n            this.connect(this.properties.group_padding.change, function () { return _this.reset(); });\r\n            this.connect(this.properties.subgroup_padding.change, function () { return _this.reset(); });\r\n            this.connect(this.properties.range_padding.change, function () { return _this.reset(); });\r\n            this.connect(this.properties.range_padding_units.change, function () { return _this.reset(); });\r\n        };\r\n        FactorRange.prototype.reset = function () {\r\n            this._init(false);\r\n            this.change.emit();\r\n        };\r\n        FactorRange.prototype._lookup = function (x) {\r\n            switch (x.length) {\r\n                case 1: {\r\n                    var _b = tslib_1.__read(x, 1), f0 = _b[0];\r\n                    var mapping = this._mapping;\r\n                    var y0 = mapping.get(f0);\r\n                    return y0 != null ? y0.value : NaN;\r\n                }\r\n                case 2: {\r\n                    var _c = tslib_1.__read(x, 2), f0 = _c[0], f1 = _c[1];\r\n                    var mapping = this._mapping;\r\n                    var y0 = mapping.get(f0);\r\n                    if (y0 != null) {\r\n                        var y1 = y0.mapping.get(f1);\r\n                        if (y1 != null)\r\n                            return y1.value;\r\n                    }\r\n                    return NaN;\r\n                }\r\n                case 3: {\r\n                    var _d = tslib_1.__read(x, 3), f0 = _d[0], f1 = _d[1], f2 = _d[2];\r\n                    var mapping = this._mapping;\r\n                    var y0 = mapping.get(f0);\r\n                    if (y0 != null) {\r\n                        var y1 = y0.mapping.get(f1);\r\n                        if (y1 != null) {\r\n                            var y2 = y1.mapping.get(f2);\r\n                            if (y2 != null)\r\n                                return y2.value;\r\n                        }\r\n                    }\r\n                    return NaN;\r\n                }\r\n                default:\r\n                    assert_1.unreachable();\r\n            }\r\n        };\r\n        // convert a string factor into a synthetic coordinate\r\n        FactorRange.prototype.synthetic = function (x) {\r\n            if (types_2.isNumber(x))\r\n                return x;\r\n            if (types_2.isString(x))\r\n                return this._lookup([x]);\r\n            var offset = 0;\r\n            var off = x[x.length - 1];\r\n            if (types_2.isNumber(off)) {\r\n                offset = off;\r\n                x = x.slice(0, -1);\r\n            }\r\n            return this._lookup(x) + offset;\r\n        };\r\n        // convert an array of string factors into synthetic coordinates\r\n        FactorRange.prototype.v_synthetic = function (xs) {\r\n            var n = xs.length;\r\n            var array = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                array[i] = this.synthetic(xs[i]);\r\n            }\r\n            return array;\r\n        };\r\n        FactorRange.prototype._init = function (silent) {\r\n            var _this = this;\r\n            var _b = (function () {\r\n                var e_5, _b, e_6, _c;\r\n                if (array_1.every(_this.factors, types_2.isString)) {\r\n                    var factors = _this.factors;\r\n                    var _d = tslib_1.__read(map_one_level(factors, _this.factor_padding), 2), mapping_2 = _d[0], inside_padding_1 = _d[1];\r\n                    var tops_3 = null;\r\n                    var mids_1 = null;\r\n                    return { levels: 1, mapping: mapping_2, tops: tops_3, mids: mids_1, inside_padding: inside_padding_1 };\r\n                }\r\n                else if (array_1.every(_this.factors, function (x) { return types_2.isArray(x) && x.length == 2 && types_2.isString(x[0]) && types_2.isString(x[1]); })) {\r\n                    var factors = _this.factors;\r\n                    var _e = tslib_1.__read(map_two_levels(factors, _this.group_padding, _this.factor_padding), 2), mapping_3 = _e[0], inside_padding_2 = _e[1];\r\n                    var tops_4 = tslib_1.__spread(mapping_3.keys());\r\n                    var mids_2 = null;\r\n                    return { levels: 2, mapping: mapping_3, tops: tops_4, mids: mids_2, inside_padding: inside_padding_2 };\r\n                }\r\n                else if (array_1.every(_this.factors, function (x) { return types_2.isArray(x) && x.length == 3 && types_2.isString(x[0]) && types_2.isString(x[1]) && types_2.isString(x[2]); })) {\r\n                    var factors = _this.factors;\r\n                    var _f = tslib_1.__read(map_three_levels(factors, _this.group_padding, _this.subgroup_padding, _this.factor_padding), 2), mapping_4 = _f[0], inside_padding_3 = _f[1];\r\n                    var tops_5 = tslib_1.__spread(mapping_4.keys());\r\n                    var mids_3 = [];\r\n                    try {\r\n                        for (var mapping_1 = tslib_1.__values(mapping_4), mapping_1_1 = mapping_1.next(); !mapping_1_1.done; mapping_1_1 = mapping_1.next()) {\r\n                            var _g = tslib_1.__read(mapping_1_1.value, 2), f0 = _g[0], L2 = _g[1];\r\n                            try {\r\n                                for (var _h = (e_6 = void 0, tslib_1.__values(L2.mapping.keys())), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                                    var f1 = _j.value;\r\n                                    mids_3.push([f0, f1]);\r\n                                }\r\n                            }\r\n                            catch (e_6_1) {\r\n                                e_6 = { error: e_6_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (_j && !_j.done && (_c = _h.return))\r\n                                        _c.call(_h);\r\n                                }\r\n                                finally {\r\n                                    if (e_6)\r\n                                        throw e_6.error;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_5_1) {\r\n                        e_5 = { error: e_5_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (mapping_1_1 && !mapping_1_1.done && (_b = mapping_1.return))\r\n                                _b.call(mapping_1);\r\n                        }\r\n                        finally {\r\n                            if (e_5)\r\n                                throw e_5.error;\r\n                        }\r\n                    }\r\n                    return { levels: 3, mapping: mapping_4, tops: tops_5, mids: mids_3, inside_padding: inside_padding_3 };\r\n                }\r\n                else\r\n                    assert_1.unreachable();\r\n            })(), levels = _b.levels, mapping = _b.mapping, tops = _b.tops, mids = _b.mids, inside_padding = _b.inside_padding;\r\n            this._mapping = mapping;\r\n            this.tops = tops;\r\n            this.mids = mids;\r\n            var start = 0;\r\n            var end = this.factors.length + inside_padding;\r\n            if (this.range_padding_units == \"percent\") {\r\n                var half_span = (end - start) * this.range_padding / 2;\r\n                start -= half_span;\r\n                end += half_span;\r\n            }\r\n            else {\r\n                start -= this.range_padding;\r\n                end += this.range_padding;\r\n            }\r\n            this.setv({ start: start, end: end, levels: levels }, { silent: silent });\r\n            if (this.bounds == \"auto\")\r\n                this.setv({ bounds: [start, end] }, { silent: true });\r\n        };\r\n        return FactorRange;\r\n    }(range_1.Range));\r\n    exports.FactorRange = FactorRange;\r\n    FactorRange.__name__ = \"FactorRange\";\r\n    FactorRange.init_FactorRange();\r\n}\r\n","/* models\\ranges\\range.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var Range = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Range, _super);\r\n        function Range(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.have_updated_interactively = false;\r\n            return _this;\r\n        }\r\n        Range.init_Range = function () {\r\n            this.define({\r\n                bounds: [p.Any],\r\n                min_interval: [p.Any],\r\n                max_interval: [p.Any],\r\n            });\r\n            this.internal({\r\n                plots: [p.Array, []],\r\n            });\r\n        };\r\n        Object.defineProperty(Range.prototype, \"is_reversed\", {\r\n            get: function () {\r\n                return this.start > this.end;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Range.prototype, \"is_valid\", {\r\n            get: function () {\r\n                return !isNaN(this.min) && !isNaN(this.max);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Range;\r\n    }(model_1.Model));\r\n    exports.Range = Range;\r\n    Range.__name__ = \"Range\";\r\n    Range.init_Range();\r\n}\r\n","/* models\\glyphs\\utils.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    function generic_line_legend(visuals, ctx, _a, index) {\r\n        var x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.moveTo(x0, (y0 + y1) / 2);\r\n        ctx.lineTo(x1, (y0 + y1) / 2);\r\n        if (visuals.line.doit) {\r\n            visuals.line.set_vectorize(ctx, index);\r\n            ctx.stroke();\r\n        }\r\n        ctx.restore();\r\n    }\r\n    exports.generic_line_legend = generic_line_legend;\r\n    function generic_area_legend(visuals, ctx, _a, index) {\r\n        var x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\r\n        var w = Math.abs(x1 - x0);\r\n        var dw = w * 0.1;\r\n        var h = Math.abs(y1 - y0);\r\n        var dh = h * 0.1;\r\n        var sx0 = x0 + dw;\r\n        var sx1 = x1 - dw;\r\n        var sy0 = y0 + dh;\r\n        var sy1 = y1 - dh;\r\n        if (visuals.fill.doit) {\r\n            visuals.fill.set_vectorize(ctx, index);\r\n            ctx.fillRect(sx0, sy0, sx1 - sx0, sy1 - sy0);\r\n        }\r\n        if (visuals.hatch != null && visuals.hatch.doit) {\r\n            visuals.hatch.set_vectorize(ctx, index);\r\n            ctx.fillRect(sx0, sy0, sx1 - sx0, sy1 - sy0);\r\n        }\r\n        if (visuals.line && visuals.line.doit) {\r\n            ctx.beginPath();\r\n            ctx.rect(sx0, sy0, sx1 - sx0, sy1 - sy0);\r\n            visuals.line.set_vectorize(ctx, index);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    exports.generic_area_legend = generic_area_legend;\r\n    function line_interpolation(renderer, geometry, x2, y2, x3, y3) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        var sx = geometry.sx, sy = geometry.sy;\r\n        var x0, x1;\r\n        var y0, y1;\r\n        if (geometry.type == 'point') {\r\n            // The +/- adjustments here are to dilate the hit point into a virtual \"segment\" to use below\r\n            _a = tslib_1.__read(renderer.yscale.r_invert(sy - 1, sy + 1), 2), y0 = _a[0], y1 = _a[1];\r\n            _b = tslib_1.__read(renderer.xscale.r_invert(sx - 1, sx + 1), 2), x0 = _b[0], x1 = _b[1];\r\n        }\r\n        else {\r\n            // The +/- adjustments here are to handle cases such as purely horizontal or vertical lines\r\n            if (geometry.direction == 'v') {\r\n                _c = tslib_1.__read(renderer.yscale.r_invert(sy, sy), 2), y0 = _c[0], y1 = _c[1];\r\n                _d = tslib_1.__read([Math.min(x2 - 1, x3 - 1), Math.max(x2 + 1, x3 + 1)], 2), x0 = _d[0], x1 = _d[1];\r\n            }\r\n            else {\r\n                _e = tslib_1.__read(renderer.xscale.r_invert(sx, sx), 2), x0 = _e[0], x1 = _e[1];\r\n                _f = tslib_1.__read([Math.min(y2 - 1, y3 - 1), Math.max(y2 + 1, y3 + 1)], 2), y0 = _f[0], y1 = _f[1];\r\n            }\r\n        }\r\n        var _g = hittest.check_2_segments_intersect(x0, y0, x1, y1, x2, y2, x3, y3), x = _g.x, y = _g.y;\r\n        return [x, y]; // XXX: null is not handled at use sites\r\n    }\r\n    exports.line_interpolation = line_interpolation;\r\n}\r\n","/* core\\hittest.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function point_in_poly(x, y, px, py) {\r\n        var inside = false;\r\n        var x1 = px[px.length - 1];\r\n        var y1 = py[py.length - 1];\r\n        for (var i = 0; i < px.length; i++) {\r\n            var x2 = px[i];\r\n            var y2 = py[i];\r\n            if ((y1 < y) != (y2 < y)) {\r\n                if ((x1 + (y - y1) / (y2 - y1) * (x2 - x1)) < x)\r\n                    inside = !inside;\r\n            }\r\n            x1 = x2;\r\n            y1 = y2;\r\n        }\r\n        return inside;\r\n    }\r\n    exports.point_in_poly = point_in_poly;\r\n    function point_in_ellipse(x, y, angle, b, a, x0, y0) {\r\n        var A = (Math.pow((Math.cos(angle) / a), 2) + Math.pow((Math.sin(angle) / b), 2));\r\n        var B = 2 * Math.cos(angle) * Math.sin(angle) * (Math.pow((1 / a), 2) - Math.pow((1 / b), 2));\r\n        var C = (Math.pow((Math.cos(angle) / b), 2) + Math.pow((Math.sin(angle) / a), 2));\r\n        var eqn = A * Math.pow((x - x0), 2) + B * (x - x0) * (y - y0) + C * Math.pow((y - y0), 2);\r\n        var inside = eqn <= 1;\r\n        return inside;\r\n    }\r\n    exports.point_in_ellipse = point_in_ellipse;\r\n    function dist_2_pts(p0, p1) {\r\n        return Math.pow((p0.x - p1.x), 2) + Math.pow((p0.y - p1.y), 2);\r\n    }\r\n    exports.dist_2_pts = dist_2_pts;\r\n    function dist_to_segment_squared(p, v, w) {\r\n        var l2 = dist_2_pts(v, w);\r\n        if (l2 == 0)\r\n            return dist_2_pts(p, v);\r\n        var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\r\n        if (t < 0)\r\n            return dist_2_pts(p, v);\r\n        if (t > 1)\r\n            return dist_2_pts(p, w);\r\n        var q = { x: v.x + t * (w.x - v.x), y: v.y + t * (w.y - v.y) };\r\n        return dist_2_pts(p, q);\r\n    }\r\n    exports.dist_to_segment_squared = dist_to_segment_squared;\r\n    function dist_to_segment(p, v, w) {\r\n        return Math.sqrt(dist_to_segment_squared(p, v, w));\r\n    }\r\n    exports.dist_to_segment = dist_to_segment;\r\n    function check_2_segments_intersect(l0_x0, l0_y0, l0_x1, l0_y1, l1_x0, l1_y0, l1_x1, l1_y1) {\r\n        /*\r\n         *  Check if 2 segments (l0 and l1) intersect. Returns a structure with\r\n         *  the following attributes:\r\n         *   * hit (boolean): whether the 2 segments intersect\r\n         *   * x (float): x coordinate of the intersection point\r\n         *   * y (float): y coordinate of the intersection point\r\n         */\r\n        var den = ((l1_y1 - l1_y0) * (l0_x1 - l0_x0)) - ((l1_x1 - l1_x0) * (l0_y1 - l0_y0));\r\n        if (den == 0) {\r\n            return { hit: false, x: null, y: null };\r\n        }\r\n        else {\r\n            var a = l0_y0 - l1_y0;\r\n            var b = l0_x0 - l1_x0;\r\n            var num1 = ((l1_x1 - l1_x0) * a) - ((l1_y1 - l1_y0) * b);\r\n            var num2 = ((l0_x1 - l0_x0) * a) - ((l0_y1 - l0_y0) * b);\r\n            a = num1 / den;\r\n            b = num2 / den;\r\n            var x = l0_x0 + (a * (l0_x1 - l0_x0));\r\n            var y = l0_y0 + (a * (l0_y1 - l0_y0));\r\n            return { hit: (a > 0 && a < 1) && (b > 0 && b < 1), x: x, y: y };\r\n        }\r\n    }\r\n    exports.check_2_segments_intersect = check_2_segments_intersect;\r\n}\r\n","/* models\\glyphs\\webgl\\line.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var utils_1 = require(218) /* ./utils */;\r\n    var base_1 = require(222) /* ./base */;\r\n    var line_vert_1 = require(223) /* ./line.vert */;\r\n    var line_frag_1 = require(224) /* ./line.frag */;\r\n    var color_1 = require(137) /* ../../../core/util/color */;\r\n    var DashAtlas = /** @class */ (function () {\r\n        function DashAtlas(gl) {\r\n            this._atlas = new Map();\r\n            this._width = 256;\r\n            this._height = 256;\r\n            // Init texture\r\n            this.tex = new utils_1.Texture2d(gl);\r\n            this.tex.set_wrapping(gl.REPEAT, gl.REPEAT);\r\n            this.tex.set_interpolation(gl.NEAREST, gl.NEAREST);\r\n            this.tex.set_size([this._width, this._height], gl.RGBA);\r\n            this.tex.set_data([0, 0], [this._width, this._height], new Uint8Array(4 * this._width * this._height));\r\n            // Init with solid line (index 0 is reserved for this)\r\n            this.get_atlas_data([1]);\r\n        }\r\n        DashAtlas.prototype.get_atlas_data = function (pattern) {\r\n            var key = pattern.join(\"-\");\r\n            var atlas_data = this._atlas.get(key);\r\n            if (atlas_data == null) {\r\n                var _a = tslib_1.__read(this.make_pattern(pattern), 2), data = _a[0], period = _a[1];\r\n                var index = this._atlas.size;\r\n                this.tex.set_data([0, index], [this._width, 1], new Uint8Array(data.map(function (x) { return x + 10; })));\r\n                atlas_data = [index / this._height, period];\r\n                this._atlas.set(key, atlas_data);\r\n            }\r\n            return atlas_data;\r\n        };\r\n        DashAtlas.prototype.make_pattern = function (pattern) {\r\n            var e_1, _a;\r\n            // A pattern is defined as on/off sequence of segments\r\n            // It must be a multiple of 2\r\n            if (pattern.length > 1 && pattern.length % 2) {\r\n                pattern = pattern.concat(pattern);\r\n            }\r\n            // Period is sum of elements\r\n            var period = 0;\r\n            try {\r\n                for (var pattern_1 = tslib_1.__values(pattern), pattern_1_1 = pattern_1.next(); !pattern_1_1.done; pattern_1_1 = pattern_1.next()) {\r\n                    var v = pattern_1_1.value;\r\n                    period += v;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (pattern_1_1 && !pattern_1_1.done && (_a = pattern_1.return))\r\n                        _a.call(pattern_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            // Find all start and end of on-segment only\r\n            var C = [];\r\n            var c = 0;\r\n            for (var i = 0, end = pattern.length + 2; i < end; i += 2) {\r\n                var a = Math.max(0.0001, pattern[i % pattern.length]);\r\n                var b = Math.max(0.0001, pattern[(i + 1) % pattern.length]);\r\n                C.push(c, c + a);\r\n                c += a + b;\r\n            }\r\n            // Build pattern\r\n            var n = this._width;\r\n            var Z = new Float32Array(n * 4);\r\n            for (var i = 0, end = n; i < end; i++) {\r\n                var dash_end = void 0, dash_start = void 0, dash_type = void 0;\r\n                var x = (period * i) / (n - 1);\r\n                // get index at min - index = np.argmin(abs(C-(x)))\r\n                var index = 0;\r\n                var val_at_index = 1e16;\r\n                for (var j = 0, endj = C.length; j < endj; j++) {\r\n                    var val = Math.abs(C[j] - x);\r\n                    if (val < val_at_index) {\r\n                        index = j;\r\n                        val_at_index = val;\r\n                    }\r\n                }\r\n                if ((index % 2) === 0) {\r\n                    dash_type = (x <= C[index]) ? +1 : 0;\r\n                    dash_start = C[index];\r\n                    dash_end = C[index + 1];\r\n                }\r\n                else {\r\n                    dash_type = (x > C[index]) ? -1 : 0;\r\n                    dash_start = C[index - 1];\r\n                    dash_end = C[index];\r\n                }\r\n                Z[(i * 4) + 0] = C[index];\r\n                Z[(i * 4) + 1] = dash_type;\r\n                Z[(i * 4) + 2] = dash_start;\r\n                Z[(i * 4) + 3] = dash_end;\r\n            }\r\n            return [Z, period];\r\n        };\r\n        return DashAtlas;\r\n    }());\r\n    DashAtlas.__name__ = \"DashAtlas\";\r\n    var joins = { miter: 0, round: 1, bevel: 2 };\r\n    var caps = {\r\n        '': 0, none: 0, '.': 0,\r\n        round: 1, ')': 1, '(': 1, o: 1,\r\n        'triangle in': 2, '<': 2,\r\n        'triangle out': 3, '>': 3,\r\n        square: 4, '[': 4, ']': 4, '=': 4,\r\n        butt: 5, '|': 5,\r\n    };\r\n    var LineGL = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineGL, _super);\r\n        function LineGL() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LineGL.prototype.init = function () {\r\n            var gl = this.gl;\r\n            this._scale_aspect = 0; // keep track, so we know when we need to update segment data\r\n            var vert = line_vert_1.vertex_shader;\r\n            var frag = line_frag_1.fragment_shader;\r\n            // The program\r\n            this.prog = new utils_1.Program(gl);\r\n            this.prog.set_shaders(vert, frag);\r\n            this.index_buffer = new utils_1.IndexBuffer(gl);\r\n            // Buffers\r\n            this.vbo_position = new utils_1.VertexBuffer(gl);\r\n            this.vbo_tangents = new utils_1.VertexBuffer(gl);\r\n            this.vbo_segment = new utils_1.VertexBuffer(gl);\r\n            this.vbo_angles = new utils_1.VertexBuffer(gl);\r\n            this.vbo_texcoord = new utils_1.VertexBuffer(gl);\r\n            // Dash atlas\r\n            this.dash_atlas = new DashAtlas(gl);\r\n        };\r\n        LineGL.prototype.draw = function (indices, mainGlyph, trans) {\r\n            var mainGlGlyph = mainGlyph.glglyph;\r\n            if (mainGlGlyph.data_changed) {\r\n                mainGlGlyph._set_data();\r\n                mainGlGlyph.data_changed = false;\r\n            }\r\n            if (this.visuals_changed) {\r\n                this._set_visuals();\r\n                this.visuals_changed = false;\r\n            }\r\n            mainGlGlyph._update_scale(1, 1);\r\n            this._scale_aspect = 1;\r\n            // Select buffers from main glyph\r\n            // (which may be this glyph but maybe not if this is a (non)selection glyph)\r\n            this.prog.set_attribute('a_position', 'vec2', mainGlGlyph.vbo_position);\r\n            this.prog.set_attribute('a_tangents', 'vec4', mainGlGlyph.vbo_tangents);\r\n            this.prog.set_attribute('a_segment', 'vec2', mainGlGlyph.vbo_segment);\r\n            this.prog.set_attribute('a_angles', 'vec2', mainGlGlyph.vbo_angles);\r\n            this.prog.set_attribute('a_texcoord', 'vec2', mainGlGlyph.vbo_texcoord);\r\n            //\r\n            this.prog.set_uniform('u_length', 'float', [mainGlGlyph.cumsum]);\r\n            this.prog.set_texture('u_dash_atlas', this.dash_atlas.tex);\r\n            // Handle transformation to device coordinates\r\n            this.prog.set_uniform('u_pixel_ratio', 'float', [trans.pixel_ratio]);\r\n            this.prog.set_uniform('u_canvas_size', 'vec2', [trans.width, trans.height]);\r\n            this.prog.set_uniform('u_scale_aspect', 'vec2', [1, 1]);\r\n            this.prog.set_uniform('u_scale_length', 'float', [Math.sqrt(2)]);\r\n            this.I_triangles = mainGlGlyph.I_triangles;\r\n            if (this.I_triangles.length < 65535) {\r\n                // Data is small enough to draw in one pass\r\n                this.index_buffer.set_size(this.I_triangles.length * 2);\r\n                this.index_buffer.set_data(0, new Uint16Array(this.I_triangles));\r\n                this.prog.draw(this.gl.TRIANGLES, this.index_buffer);\r\n                // @prog.draw(@gl.LINE_STRIP, @index_buffer)  # Use this to draw the line skeleton\r\n            }\r\n            else {\r\n                // Work around the limit that the indexbuffer must be uint16. We draw in chunks.\r\n                // First collect indices in chunks\r\n                indices = Array.from(this.I_triangles);\r\n                var nvertices = this.I_triangles.length;\r\n                var chunksize = 64008; // 65536 max. 64008 is divisible by 12\r\n                var chunks = [];\r\n                for (var i = 0, end = Math.ceil(nvertices / chunksize); i < end; i++) {\r\n                    chunks.push([]);\r\n                }\r\n                for (var i = 0, end = indices.length; i < end; i++) {\r\n                    var uint16_index = indices[i] % chunksize;\r\n                    var chunk = Math.floor(indices[i] / chunksize);\r\n                    chunks[chunk].push(uint16_index);\r\n                }\r\n                // Then draw each chunk\r\n                for (var chunk = 0, end = chunks.length; chunk < end; chunk++) {\r\n                    var these_indices = new Uint16Array(chunks[chunk]);\r\n                    var offset = chunk * chunksize * 4;\r\n                    if (these_indices.length === 0) {\r\n                        continue;\r\n                    }\r\n                    this.prog.set_attribute('a_position', 'vec2', mainGlGlyph.vbo_position, 0, offset * 2);\r\n                    this.prog.set_attribute('a_tangents', 'vec4', mainGlGlyph.vbo_tangents, 0, offset * 4);\r\n                    this.prog.set_attribute('a_segment', 'vec2', mainGlGlyph.vbo_segment, 0, offset * 2);\r\n                    this.prog.set_attribute('a_angles', 'vec2', mainGlGlyph.vbo_angles, 0, offset * 2);\r\n                    this.prog.set_attribute('a_texcoord', 'vec2', mainGlGlyph.vbo_texcoord, 0, offset * 2);\r\n                    // The actual drawing\r\n                    this.index_buffer.set_size(these_indices.length * 2);\r\n                    this.index_buffer.set_data(0, these_indices);\r\n                    this.prog.draw(this.gl.TRIANGLES, this.index_buffer);\r\n                }\r\n            }\r\n        };\r\n        LineGL.prototype._set_data = function () {\r\n            this._bake();\r\n            this.vbo_position.set_size(this.V_position.length * 4);\r\n            this.vbo_position.set_data(0, this.V_position);\r\n            this.vbo_tangents.set_size(this.V_tangents.length * 4);\r\n            this.vbo_tangents.set_data(0, this.V_tangents);\r\n            this.vbo_angles.set_size(this.V_angles.length * 4);\r\n            this.vbo_angles.set_data(0, this.V_angles);\r\n            this.vbo_texcoord.set_size(this.V_texcoord.length * 4);\r\n            this.vbo_texcoord.set_data(0, this.V_texcoord);\r\n        };\r\n        LineGL.prototype._set_visuals = function () {\r\n            var _a;\r\n            var color = color_1.color2rgba(this.glyph.visuals.line.line_color.value(), this.glyph.visuals.line.line_alpha.value());\r\n            var cap = caps[this.glyph.visuals.line.line_cap.value()];\r\n            var join = joins[this.glyph.visuals.line.line_join.value()];\r\n            this.prog.set_uniform('u_color', 'vec4', color);\r\n            this.prog.set_uniform('u_linewidth', 'float', [this.glyph.visuals.line.line_width.value()]);\r\n            this.prog.set_uniform('u_antialias', 'float', [0.9]); // Smaller aa-region to obtain crisper images\r\n            this.prog.set_uniform('u_linecaps', 'vec2', [cap, cap]);\r\n            this.prog.set_uniform('u_linejoin', 'float', [join]);\r\n            this.prog.set_uniform('u_miter_limit', 'float', [10.0]); // 10 should be a good value\r\n            // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-miterlimit\r\n            var dash_pattern = this.glyph.visuals.line.line_dash.value();\r\n            var dash_index = 0;\r\n            var dash_period = 1;\r\n            if (dash_pattern.length) {\r\n                _a = tslib_1.__read(this.dash_atlas.get_atlas_data(dash_pattern), 2), dash_index = _a[0], dash_period = _a[1];\r\n            }\r\n            this.prog.set_uniform('u_dash_index', 'float', [dash_index]); // 0 means solid line\r\n            this.prog.set_uniform('u_dash_phase', 'float', [this.glyph.visuals.line.line_dash_offset.value()]);\r\n            this.prog.set_uniform('u_dash_period', 'float', [dash_period]);\r\n            this.prog.set_uniform('u_dash_caps', 'vec2', [cap, cap]);\r\n            this.prog.set_uniform('u_closed', 'float', [0]); // We dont do closed lines\r\n        };\r\n        LineGL.prototype._bake = function () {\r\n            // This is what you get if you port 50 lines of numpy code to JS.\r\n            // V_segment is handled in another method, because it depends on the aspect\r\n            // ratio of the scale (The original paper/code assumed isotropic scaling).\r\n            //\r\n            // Buffer dtype from the Python implementation:\r\n            //\r\n            // self.vtype = np.dtype( [('a_position', 'f4', 2),\r\n            //                         ('a_segment',  'f4', 2),\r\n            //                         ('a_angles',   'f4', 2),\r\n            //                         ('a_tangents', 'f4', 4),\r\n            //                         ('a_texcoord', 'f4', 2) ])\r\n            // Init array of implicit shape nx2\r\n            var I, T, V_angles2, V_position2, V_tangents2, V_texcoord2, Vp, Vt;\r\n            var n = this.nvertices;\r\n            var sx = this.glyph.sx;\r\n            var sy = this.glyph.sy;\r\n            // Init vertex data\r\n            var V_position = (Vp = new Float32Array(n * 2));\r\n            //V_segment = new Float32Array(n*2)  # Done later\r\n            var V_angles = new Float32Array(n * 2);\r\n            var V_tangents = (Vt = new Float32Array(n * 4)); // mind the 4!\r\n            // Position\r\n            for (var i = 0, end = n; i < end; i++) {\r\n                V_position[(i * 2) + 0] = sx[i];\r\n                V_position[(i * 2) + 1] = sy[i];\r\n            }\r\n            // Tangents & norms (need tangents to calculate segments based on scale)\r\n            this.tangents = (T = new Float32Array((n * 2) - 2));\r\n            for (var i = 0, end = n - 1; i < end; i++) {\r\n                T[(i * 2) + 0] = Vp[((i + 1) * 2) + 0] - Vp[(i * 2) + 0];\r\n                T[(i * 2) + 1] = Vp[((i + 1) * 2) + 1] - Vp[(i * 2) + 1];\r\n            }\r\n            for (var i = 0, end = n - 1; i < end; i++) {\r\n                // V['a_tangents'][+1:, :2] = T\r\n                V_tangents[((i + 1) * 4) + 0] = T[(i * 2) + 0];\r\n                V_tangents[((i + 1) * 4) + 1] = T[(i * 2) + 1];\r\n                // V['a_tangents'][:-1, 2:] = T\r\n                V_tangents[(i * 4) + 2] = T[(i * 2) + 0];\r\n                V_tangents[(i * 4) + 3] = T[(i * 2) + 1];\r\n            }\r\n            // V['a_tangents'][0  , :2] = T[0]\r\n            V_tangents[(0 * 4) + 0] = T[0];\r\n            V_tangents[(0 * 4) + 1] = T[1];\r\n            // V['a_tangents'][ -1, 2:] = T[-1]\r\n            V_tangents[((n - 1) * 4) + 2] = T[((n - 2) * 2) + 0];\r\n            V_tangents[((n - 1) * 4) + 3] = T[((n - 2) * 2) + 1];\r\n            // Angles\r\n            var A = new Float32Array(n);\r\n            for (var i = 0, end = n; i < end; i++) {\r\n                A[i] = Math.atan2((Vt[(i * 4) + 0] * Vt[(i * 4) + 3]) - (Vt[(i * 4) + 1] * Vt[(i * 4) + 2]), (Vt[(i * 4) + 0] * Vt[(i * 4) + 2]) + (Vt[(i * 4) + 1] * Vt[(i * 4) + 3]));\r\n            }\r\n            for (var i = 0, end = n - 1; i < end; i++) {\r\n                V_angles[(i * 2) + 0] = A[i];\r\n                V_angles[(i * 2) + 1] = A[i + 1];\r\n            }\r\n            // Step 1: A -- B -- C  =>  A -- B, B' -- C\r\n            // Repeat our array 4 times\r\n            var m = (4 * n) - 4;\r\n            this.V_position = (V_position2 = new Float32Array(m * 2));\r\n            this.V_angles = (V_angles2 = new Float32Array(m * 2));\r\n            this.V_tangents = (V_tangents2 = new Float32Array(m * 4)); // mind the 4!\r\n            this.V_texcoord = (V_texcoord2 = new Float32Array(m * 2));\r\n            var o = 2;\r\n            //\r\n            // Arg, we really need an ndarray thing in JS :/\r\n            for (var i = 0, end = n; i < end; i++) { // all nodes on the line\r\n                for (var j = 0; j < 4; j++) { // the four quad vertices\r\n                    for (var k = 0; k < 2; k++) { // xy\r\n                        V_position2[((((i * 4) + j) - o) * 2) + k] = V_position[(i * 2) + k];\r\n                        V_angles2[(((i * 4) + j) * 2) + k] = V_angles[(i * 2) + k];\r\n                    } // no offset\r\n                    for (var k = 0; k < 4; k++) {\r\n                        V_tangents2[((((i * 4) + j) - o) * 4) + k] = V_tangents[(i * 4) + k];\r\n                    }\r\n                }\r\n            }\r\n            for (var i = 0, end = n; i < end; i++) {\r\n                V_texcoord2[(((i * 4) + 0) * 2) + 0] = -1;\r\n                V_texcoord2[(((i * 4) + 1) * 2) + 0] = -1;\r\n                V_texcoord2[(((i * 4) + 2) * 2) + 0] = +1;\r\n                V_texcoord2[(((i * 4) + 3) * 2) + 0] = +1;\r\n                //\r\n                V_texcoord2[(((i * 4) + 0) * 2) + 1] = -1;\r\n                V_texcoord2[(((i * 4) + 1) * 2) + 1] = +1;\r\n                V_texcoord2[(((i * 4) + 2) * 2) + 1] = -1;\r\n                V_texcoord2[(((i * 4) + 3) * 2) + 1] = +1;\r\n            }\r\n            // Indices\r\n            //I = np.resize( np.array([0,1,2,1,2,3], dtype=np.uint32), (n-1)*(2*3))\r\n            //I += np.repeat( 4*np.arange(n-1), 6)\r\n            var ni = (n - 1) * 6;\r\n            this.I_triangles = (I = new Uint32Array(ni));\r\n            // Order of indices is such that drawing as line_strip reveals the line skeleton\r\n            // Might have implications on culling, if we ever turn that on.\r\n            // Order in paper was: 0 1 2 1 2 3\r\n            for (var i = 0, end = n; i < end; i++) {\r\n                I[(i * 6) + 0] = 0 + (4 * i);\r\n                I[(i * 6) + 1] = 1 + (4 * i);\r\n                I[(i * 6) + 2] = 3 + (4 * i);\r\n                I[(i * 6) + 3] = 2 + (4 * i);\r\n                I[(i * 6) + 4] = 0 + (4 * i);\r\n                I[(i * 6) + 5] = 3 + (4 * i);\r\n            }\r\n        };\r\n        LineGL.prototype._update_scale = function (sx, sy) {\r\n            // Update segment data and cumsum so the length along the line has the\r\n            // scale aspect ratio in it. In the vertex shader we multiply with the\r\n            // \"isotropic part\" of the scale.\r\n            var V_segment2;\r\n            var n = this.nvertices;\r\n            var m = (4 * n) - 4;\r\n            // Prepare arrays\r\n            var T = this.tangents;\r\n            var N = new Float32Array(n - 1);\r\n            var V_segment = new Float32Array(n * 2); // Elements are initialized with 0\r\n            this.V_segment = (V_segment2 = new Float32Array(m * 2));\r\n            // Calculate vector lengths - with scale aspect ratio taken into account\r\n            for (var i = 0, end = n - 1; i < end; i++) {\r\n                N[i] = Math.sqrt(Math.pow((T[(i * 2) + 0] * sx), 2) + Math.pow((T[(i * 2) + 1] * sy), 2));\r\n            }\r\n            // Calculate Segments\r\n            var cumsum = 0;\r\n            for (var i = 0, end = n - 1; i < end; i++) {\r\n                cumsum += N[i];\r\n                V_segment[((i + 1) * 2) + 0] = cumsum;\r\n                V_segment[(i * 2) + 1] = cumsum;\r\n            }\r\n            // Upscale (same loop as in _bake())\r\n            for (var i = 0, end = n; i < end; i++) {\r\n                for (var j = 0; j < 4; j++) {\r\n                    for (var k = 0; k < 2; k++) {\r\n                        V_segment2[(((i * 4) + j) * 2) + k] = V_segment[(i * 2) + k];\r\n                    }\r\n                }\r\n            }\r\n            // Update\r\n            this.cumsum = cumsum; // L[-1] in Nico's code\r\n            this.vbo_segment.set_size(this.V_segment.length * 4);\r\n            this.vbo_segment.set_data(0, this.V_segment);\r\n        };\r\n        return LineGL;\r\n    }(base_1.BaseGLGlyph));\r\n    exports.LineGL = LineGL;\r\n    LineGL.__name__ = \"LineGL\";\r\n}\r\n","/* models\\glyphs\\webgl\\utils\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var program_1 = require(219) /* ./program */;\r\n    exports.Program = program_1.Program;\r\n    var texture_1 = require(221) /* ./texture */;\r\n    exports.Texture2d = texture_1.Texture2d;\r\n    var buffer_1 = require(220) /* ./buffer */;\r\n    exports.IndexBuffer = buffer_1.IndexBuffer;\r\n    exports.VertexBuffer = buffer_1.VertexBuffer;\r\n}\r\n","/* models\\glyphs\\webgl\\utils\\program.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var buffer_1 = require(220) /* ./buffer */;\r\n    var Program = /** @class */ (function () {\r\n        function Program(gl) {\r\n            this.gl = gl;\r\n            this.UTYPEMAP = {\r\n                float: \"uniform1fv\",\r\n                vec2: \"uniform2fv\",\r\n                vec3: \"uniform3fv\",\r\n                vec4: \"uniform4fv\",\r\n                int: \"uniform1iv\",\r\n                ivec2: \"uniform2iv\",\r\n                ivec3: \"uniform3iv\",\r\n                ivec4: \"uniform4iv\",\r\n                bool: \"uniform1iv\",\r\n                bvec2: \"uniform2iv\",\r\n                bvec3: \"uniform3iv\",\r\n                bvec4: \"uniform4iv\",\r\n                mat2: \"uniformMatrix2fv\",\r\n                mat3: \"uniformMatrix3fv\",\r\n                mat4: \"uniformMatrix4fv\",\r\n                sampler1D: \"uniform1i\",\r\n                sampler2D: \"uniform1i\",\r\n                sampler3D: \"uniform1i\",\r\n            };\r\n            this.ATYPEMAP = {\r\n                float: \"vertexAttrib1f\",\r\n                vec2: \"vertexAttrib2f\",\r\n                vec3: \"vertexAttrib3f\",\r\n                vec4: \"vertexAttrib4f\",\r\n            };\r\n            this.ATYPEINFO = {\r\n                float: [1, 5126],\r\n                vec2: [2, 5126],\r\n                vec3: [3, 5126],\r\n                vec4: [4, 5126],\r\n            };\r\n            this._linked = false;\r\n            this._validated = false;\r\n            this._unset_variables = new Set();\r\n            this._known_invalid = new Set();\r\n            this._locations = new Map();\r\n            this._samplers = new Map();\r\n            this._attributes = new Map();\r\n            this.handle = this.gl.createProgram();\r\n        }\r\n        Program.prototype.delete = function () {\r\n            this.gl.deleteProgram(this.handle);\r\n        };\r\n        Program.prototype.activate = function () {\r\n            this.gl.useProgram(this.handle);\r\n        };\r\n        Program.prototype.deactivate = function () {\r\n            this.gl.useProgram(0);\r\n        };\r\n        Program.prototype.set_shaders = function (vert, frag) {\r\n            var e_1, _b;\r\n            // Set GLSL code for the vertex and fragment shader.\r\n            //\r\n            // This function takes care of setting the shading code and\r\n            // compiling+linking it into a working program object that is ready\r\n            // to use.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // vert : str\r\n            //     GLSL code for the vertex shader.\r\n            // frag : str\r\n            //     GLSL code for the fragment shader.\r\n            var gl = this.gl;\r\n            this._linked = false;\r\n            var vert_handle = gl.createShader(gl.VERTEX_SHADER);\r\n            var frag_handle = gl.createShader(gl.FRAGMENT_SHADER);\r\n            var tmp = [\r\n                [vert, vert_handle, \"vertex\"],\r\n                [frag, frag_handle, \"fragment\"],\r\n            ];\r\n            try {\r\n                for (var tmp_1 = tslib_1.__values(tmp), tmp_1_1 = tmp_1.next(); !tmp_1_1.done; tmp_1_1 = tmp_1.next()) {\r\n                    var _c = tslib_1.__read(tmp_1_1.value, 3), code = _c[0], handle = _c[1], type = _c[2];\r\n                    gl.shaderSource(handle, code);\r\n                    gl.compileShader(handle);\r\n                    var status = gl.getShaderParameter(handle, gl.COMPILE_STATUS);\r\n                    if (!status) {\r\n                        var errors = gl.getShaderInfoLog(handle);\r\n                        throw new Error(\"errors in \" + type + \" shader:\\n\" + errors);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (tmp_1_1 && !tmp_1_1.done && (_b = tmp_1.return))\r\n                        _b.call(tmp_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            gl.attachShader(this.handle, vert_handle);\r\n            gl.attachShader(this.handle, frag_handle);\r\n            gl.linkProgram(this.handle);\r\n            if (!gl.getProgramParameter(this.handle, gl.LINK_STATUS)) {\r\n                var logs = gl.getProgramInfoLog(this.handle);\r\n                throw new Error(\"Program link error:\\n\" + logs);\r\n            }\r\n            this._unset_variables = this._get_active_attributes_and_uniforms();\r\n            gl.detachShader(this.handle, vert_handle);\r\n            gl.detachShader(this.handle, frag_handle);\r\n            gl.deleteShader(vert_handle);\r\n            gl.deleteShader(frag_handle);\r\n            this._known_invalid.clear();\r\n            this._linked = true;\r\n        };\r\n        Program.prototype._get_active_attributes_and_uniforms = function () {\r\n            var e_2, _b, e_3, _c, e_4, _d;\r\n            // Retrieve active attributes and uniforms to be able to check that\r\n            // all uniforms/attributes are set by the user.\r\n            var gl = this.gl;\r\n            this._locations.clear();\r\n            var regex = new RegExp(\"(\\\\w+)\\\\s*(\\\\[(\\\\d+)\\\\])\\\\s*\");\r\n            var cu = gl.getProgramParameter(this.handle, gl.ACTIVE_UNIFORMS);\r\n            var ca = gl.getProgramParameter(this.handle, gl.ACTIVE_ATTRIBUTES);\r\n            var attributes = [];\r\n            var uniforms = [];\r\n            var stub5_seq = [\r\n                [attributes, ca, gl.getActiveAttrib, gl.getAttribLocation],\r\n                [uniforms, cu, gl.getActiveUniform, gl.getUniformLocation],\r\n            ];\r\n            try {\r\n                for (var stub5_seq_1 = tslib_1.__values(stub5_seq), stub5_seq_1_1 = stub5_seq_1.next(); !stub5_seq_1_1.done; stub5_seq_1_1 = stub5_seq_1.next()) {\r\n                    var _e = tslib_1.__read(stub5_seq_1_1.value, 4), container = _e[0], count = _e[1], getActive = _e[2], getLocation = _e[3];\r\n                    for (var i = 0; i < count; i += 1) {\r\n                        var info = getActive.call(gl, this.handle, i);\r\n                        var name = info.name;\r\n                        var m = name.match(regex);\r\n                        if (m != null) {\r\n                            var name_1 = m[1];\r\n                            for (var j = 0; j < info.size; j += 1) {\r\n                                container.push([name_1 + \"[\" + j + \"]\", info.type]);\r\n                            }\r\n                        }\r\n                        else {\r\n                            container.push([name, info.type]);\r\n                        }\r\n                        this._locations.set(name, getLocation.call(gl, this.handle, name));\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (stub5_seq_1_1 && !stub5_seq_1_1.done && (_b = stub5_seq_1.return))\r\n                        _b.call(stub5_seq_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            var attrs_and_uniforms = new Set();\r\n            try {\r\n                for (var attributes_1 = tslib_1.__values(attributes), attributes_1_1 = attributes_1.next(); !attributes_1_1.done; attributes_1_1 = attributes_1.next()) {\r\n                    var _f = tslib_1.__read(attributes_1_1.value, 1), name = _f[0];\r\n                    attrs_and_uniforms.add(name);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (attributes_1_1 && !attributes_1_1.done && (_c = attributes_1.return))\r\n                        _c.call(attributes_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var uniforms_1 = tslib_1.__values(uniforms), uniforms_1_1 = uniforms_1.next(); !uniforms_1_1.done; uniforms_1_1 = uniforms_1.next()) {\r\n                    var _g = tslib_1.__read(uniforms_1_1.value, 1), name = _g[0];\r\n                    attrs_and_uniforms.add(name);\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (uniforms_1_1 && !uniforms_1_1.done && (_d = uniforms_1.return))\r\n                        _d.call(uniforms_1);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            return attrs_and_uniforms;\r\n        };\r\n        Program.prototype.set_texture = function (name, value) {\r\n            var _a;\r\n            // Set a texture sampler.\r\n            //\r\n            // A texture is a 2 dimensional grid of colors/intensities that\r\n            // can be applied to a face (or used for other means by providing\r\n            // a regular grid of data).\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // name : str\r\n            //     The name by which the texture is known in the GLSL code.\r\n            // value : Texture2d\r\n            //     The Texture2d object to bind.\r\n            if (!this._linked) {\r\n                throw new Error(\"Cannot set uniform when program has no code\");\r\n            }\r\n            var handle = (_a = this._locations.get(name)) !== null && _a !== void 0 ? _a : -1;\r\n            if (handle < 0) {\r\n                if (!this._known_invalid.has(name)) {\r\n                    this._known_invalid.add(name);\r\n                    console.log(\"\\\"Variable \" + name + \" is not an active texture\");\r\n                }\r\n                return;\r\n            }\r\n            if (this._unset_variables.has(name)) {\r\n                this._unset_variables.delete(name);\r\n            }\r\n            this.activate();\r\n            if (true) {\r\n                var unit = this._samplers.size;\r\n                if (this._samplers.has(name)) {\r\n                    unit = this._samplers.get(name)[2];\r\n                }\r\n                this._samplers.set(name, [value._target, value.handle, unit]);\r\n                this.gl.uniform1i(handle, unit);\r\n            }\r\n        };\r\n        Program.prototype.set_uniform = function (name, type_, value) {\r\n            var _a;\r\n            // Set a uniform value.\r\n            //\r\n            // A uniform is a value that is global to both the vertex and\r\n            // fragment shader.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // name : str\r\n            //     The name by which the uniform is known in the GLSL code.\r\n            // type_ : str\r\n            //     The type of the uniform, e.g. 'float', 'vec2', etc.\r\n            // value : list of scalars\r\n            //     The value for the uniform. Should be a list even for type float.\r\n            if (!this._linked) {\r\n                throw new Error(\"Cannot set uniform when program has no code\");\r\n            }\r\n            var handle = (_a = this._locations.get(name)) !== null && _a !== void 0 ? _a : -1;\r\n            if (handle < 0) {\r\n                if (!this._known_invalid.has(name)) {\r\n                    this._known_invalid.add(name);\r\n                    console.log(\"Variable \" + name + \" is not an active uniform\");\r\n                }\r\n                return;\r\n            }\r\n            if (this._unset_variables.has(name)) {\r\n                this._unset_variables.delete(name);\r\n            }\r\n            var count = 1;\r\n            if (!type_.startsWith(\"mat\")) {\r\n                var a_type = type_ == \"int\" || type_ == \"bool\" ? \"float\" : type_.replace(/^ib/, \"\");\r\n                count = Math.floor(value.length / (this.ATYPEINFO[a_type][0]));\r\n            }\r\n            if (count > 1) {\r\n                for (var j = 0; j < count; j += 1) {\r\n                    if (this._unset_variables.has(name + \"[\" + j + \"]\")) {\r\n                        var name_ = name + \"[\" + j + \"]\";\r\n                        if (this._unset_variables.has(name_)) {\r\n                            this._unset_variables.delete(name_);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var funcname = this.UTYPEMAP[type_];\r\n            this.activate();\r\n            if (type_.startsWith(\"mat\")) {\r\n                this.gl[funcname](handle, false, value);\r\n            }\r\n            else {\r\n                this.gl[funcname](handle, value);\r\n            }\r\n        };\r\n        Program.prototype.set_attribute = function (name, type_, value, stride, offset) {\r\n            if (stride === void 0) {\r\n                stride = 0;\r\n            }\r\n            if (offset === void 0) {\r\n                offset = 0;\r\n            }\r\n            var _a;\r\n            // Set an attribute value.\r\n            //\r\n            // An attribute represents per-vertex data and can only be used\r\n            // in the vertex shader.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // name : str\r\n            //     The name by which the attribute is known in the GLSL code.\r\n            // type_ : str\r\n            //     The type of the attribute, e.g. 'float', 'vec2', etc.\r\n            // value : VertexBuffer, array\r\n            //     If value is a VertexBuffer, it is used (with stride and offset)\r\n            //     for the vertex data. If value is an array, its used to set\r\n            //     the value of all vertices (similar to a uniform).\r\n            // stide : int, default 0\r\n            //     The stride to \"sample\" the vertex data inside the buffer. Unless\r\n            //     multiple vertex data are packed into a single buffer, this should\r\n            //     be zero.\r\n            // offset : int, default 0\r\n            //     The offset to \"sample\" the vertex data inside the buffer. Unless\r\n            //     multiple vertex data are packed into a single buffer, or only\r\n            //     a part of the data must be used, this should probably be zero.\r\n            if (!this._linked) {\r\n                throw new Error(\"Cannot set attribute when program has no code\");\r\n            }\r\n            var handle = (_a = this._locations.get(name)) !== null && _a !== void 0 ? _a : -1;\r\n            if (handle < 0) {\r\n                if (!this._known_invalid.has(name)) {\r\n                    this._known_invalid.add(name);\r\n                    if (value instanceof buffer_1.VertexBuffer && offset > 0) {\r\n                    }\r\n                    else {\r\n                        console.log(\"Variable \" + name + \" is not an active attribute\");\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            if (this._unset_variables.has(name)) {\r\n                this._unset_variables.delete(name);\r\n            }\r\n            this.activate();\r\n            if (!(value instanceof buffer_1.VertexBuffer)) {\r\n                var funcname = this.ATYPEMAP[type_];\r\n                this._attributes.set(name, [null, handle, funcname, value]);\r\n            }\r\n            else {\r\n                var _b = tslib_1.__read(this.ATYPEINFO[type_], 2), size = _b[0], gtype = _b[1];\r\n                var funcname = \"vertexAttribPointer\";\r\n                var args = [size, gtype, false, stride, offset];\r\n                this._attributes.set(name, [value.handle, handle, funcname, args]);\r\n            }\r\n        };\r\n        Program.prototype._pre_draw = function () {\r\n            var e_5, _b, e_6, _c;\r\n            this.activate();\r\n            try {\r\n                for (var _d = tslib_1.__values(this._samplers.values()), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var _f = tslib_1.__read(_e.value, 3), tex_target = _f[0], tex_handle = _f[1], unit = _f[2];\r\n                    this.gl.activeTexture(this.gl.TEXTURE0 + unit);\r\n                    this.gl.bindTexture(tex_target, tex_handle);\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_b = _d.return))\r\n                        _b.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _g = tslib_1.__values(this._attributes.values()), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                    var _j = tslib_1.__read(_h.value, 4), vbo_handle = _j[0], attr_handle = _j[1], funcname = _j[2], args = _j[3];\r\n                    if (vbo_handle != null) {\r\n                        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, vbo_handle);\r\n                        this.gl.enableVertexAttribArray(attr_handle);\r\n                        this.gl[funcname].apply(this.gl, tslib_1.__spread([attr_handle], args));\r\n                    }\r\n                    else {\r\n                        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\r\n                        this.gl.disableVertexAttribArray(attr_handle);\r\n                        this.gl[funcname].apply(this.gl, tslib_1.__spread([attr_handle], args));\r\n                    }\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_h && !_h.done && (_c = _g.return))\r\n                        _c.call(_g);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            if (!this._validated) {\r\n                this._validated = true;\r\n                this._validate();\r\n            }\r\n        };\r\n        Program.prototype._validate = function () {\r\n            if (this._unset_variables.size) {\r\n                console.log(\"Program has unset variables: \" + this._unset_variables);\r\n            }\r\n            this.gl.validateProgram(this.handle);\r\n            if (!this.gl.getProgramParameter(this.handle, this.gl.VALIDATE_STATUS)) {\r\n                console.log(this.gl.getProgramInfoLog(this.handle));\r\n                throw new Error(\"Program validation error\");\r\n            }\r\n        };\r\n        Program.prototype.draw = function (mode, selection) {\r\n            // Draw the current visualization defined by the program.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // mode : GL enum\r\n            //     Can be POINTS, LINES, LINE_LOOP, LINE_STRIP, LINE_FAN, TRIANGLES\r\n            // selection : 2-element tuple or IndexBuffer\r\n            //     The selection to draw, specified either as (first, count) or an\r\n            //     IndexBuffer object.\r\n            if (!this._linked) {\r\n                throw new Error(\"Cannot draw program if code has not been set\");\r\n            }\r\n            if (selection instanceof buffer_1.IndexBuffer) {\r\n                this._pre_draw();\r\n                selection.activate();\r\n                var count = selection.buffer_size / 2;\r\n                var gtype = this.gl.UNSIGNED_SHORT;\r\n                this.gl.drawElements(mode, count, gtype, 0);\r\n                selection.deactivate();\r\n            }\r\n            else {\r\n                var _b = tslib_1.__read(selection, 2), first = _b[0], count = _b[1];\r\n                if (count != 0) {\r\n                    this._pre_draw();\r\n                    this.gl.drawArrays(mode, first, count);\r\n                }\r\n            }\r\n        };\r\n        return Program;\r\n    }());\r\n    exports.Program = Program;\r\n    Program.__name__ = \"Program\";\r\n}\r\n","/* models\\glyphs\\webgl\\utils\\buffer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var Buffer = /** @class */ (function () {\r\n        function Buffer(gl) {\r\n            this.gl = gl;\r\n            this._usage = 35048;\r\n            this.buffer_size = 0;\r\n            this.handle = this.gl.createBuffer();\r\n        }\r\n        Buffer.prototype.delete = function () {\r\n            this.gl.deleteBuffer(this.handle);\r\n        };\r\n        Buffer.prototype.activate = function () {\r\n            this.gl.bindBuffer(this._target, this.handle);\r\n        };\r\n        Buffer.prototype.deactivate = function () {\r\n            this.gl.bindBuffer(this._target, null);\r\n        };\r\n        Buffer.prototype.set_size = function (nbytes) {\r\n            // Set the size of the buffer in bytes.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // nbytes : int\r\n            //     The number of bytes that the buffer needs to hold.\r\n            if (nbytes != this.buffer_size) {\r\n                this.activate();\r\n                this.gl.bufferData(this._target, nbytes, this._usage);\r\n                this.buffer_size = nbytes;\r\n            }\r\n        };\r\n        Buffer.prototype.set_data = function (offset, data) {\r\n            // Set the buffer data.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // offset : int\r\n            //     The offset in bytes for the new data.\r\n            // data : typed array\r\n            //     The data to upload.\r\n            this.activate();\r\n            this.gl.bufferSubData(this._target, offset, data);\r\n        };\r\n        return Buffer;\r\n    }());\r\n    exports.Buffer = Buffer;\r\n    Buffer.__name__ = \"Buffer\";\r\n    var VertexBuffer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VertexBuffer, _super);\r\n        function VertexBuffer() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._target = 34962;\r\n            return _this;\r\n        }\r\n        return VertexBuffer;\r\n    }(Buffer));\r\n    exports.VertexBuffer = VertexBuffer;\r\n    VertexBuffer.__name__ = \"VertexBuffer\";\r\n    var IndexBuffer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(IndexBuffer, _super);\r\n        function IndexBuffer() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._target = 34963;\r\n            return _this;\r\n        }\r\n        return IndexBuffer;\r\n    }(Buffer));\r\n    exports.IndexBuffer = IndexBuffer;\r\n    IndexBuffer.__name__ = \"IndexBuffer\";\r\n}\r\n","/* models\\glyphs\\webgl\\utils\\texture.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var assert_1 = require(126) /* ../../../../core/util/assert */;\r\n    var Texture2d = /** @class */ (function () {\r\n        function Texture2d(gl) {\r\n            this.gl = gl;\r\n            this._target = 3553;\r\n            this._types = {\r\n                Int8Array: 5120,\r\n                Uint8Array: 5121,\r\n                Int16Array: 5122,\r\n                Uint16Array: 5123,\r\n                Int32Array: 5124,\r\n                Uint32Array: 5125,\r\n                Float32Array: 5126,\r\n            };\r\n            this.handle = this.gl.createTexture();\r\n        }\r\n        Texture2d.prototype.delete = function () {\r\n            this.gl.deleteTexture(this.handle);\r\n        };\r\n        Texture2d.prototype.activate = function () {\r\n            this.gl.bindTexture(this._target, this.handle);\r\n        };\r\n        Texture2d.prototype.deactivate = function () {\r\n            this.gl.bindTexture(this._target, 0);\r\n        };\r\n        Texture2d.prototype._get_alignment = function (width) {\r\n            var e_1, _d;\r\n            // Determines a textures byte alignment. If the width isn't a\r\n            // power of 2 we need to adjust the byte alignment of the image.\r\n            // The image height is unimportant.\r\n            //\r\n            // www.opengl.org/wiki/Common_Mistakes#Texture_upload_and_pixel_reads\r\n            var alignments = [4, 8, 2, 1];\r\n            try {\r\n                for (var alignments_1 = tslib_1.__values(alignments), alignments_1_1 = alignments_1.next(); !alignments_1_1.done; alignments_1_1 = alignments_1.next()) {\r\n                    var alignment = alignments_1_1.value;\r\n                    if (width % alignment == 0) {\r\n                        return alignment;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (alignments_1_1 && !alignments_1_1.done && (_d = alignments_1.return))\r\n                        _d.call(alignments_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            assert_1.unreachable();\r\n        };\r\n        Texture2d.prototype.set_wrapping = function (wrap_s, wrap_t) {\r\n            // Set the texture wrapping mode.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // wrap_s : GL enum\r\n            //     The mode to wrap the x dimension. Valid values are REPEAT\r\n            //     CLAMP_TO_EDGE MIRRORED_REPEAT\r\n            // wrap_t : GL enum\r\n            //     The mode to wrap the y dimension. Same options as for wrap_s.\r\n            this.activate();\r\n            this.gl.texParameterf(this._target, this.gl.TEXTURE_WRAP_S, wrap_s);\r\n            this.gl.texParameterf(this._target, this.gl.TEXTURE_WRAP_T, wrap_t);\r\n        };\r\n        Texture2d.prototype.set_interpolation = function (min, mag) {\r\n            // Set the texture interpolation mode\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // min : GL enum\r\n            //     The interpolation mode when minifying (i.e. zoomed out). Valid\r\n            //     values are LINEAR and NEAREST.\r\n            // max : GL enum\r\n            //     The interpolation mode when magnifying (i.e. zoomed in). Valid\r\n            //     values are LINEAR, NEAREST, NEAREST_MIPMAP_NEAREST,\r\n            //     LINEAR_MIPMAP_NEAREST, NEAREST_MIPMAP_LINEAR, LINEAR_MIPMAP_LINEAR.\r\n            this.activate();\r\n            this.gl.texParameterf(this._target, this.gl.TEXTURE_MIN_FILTER, min);\r\n            this.gl.texParameterf(this._target, this.gl.TEXTURE_MAG_FILTER, mag);\r\n        };\r\n        Texture2d.prototype.set_size = function (_d, format) {\r\n            var _e = tslib_1.__read(_d, 2), width = _e[0], height = _e[1];\r\n            var _a, _b, _c;\r\n            // Set the size of the 2D texture.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // shape : tuple of ints\r\n            //     The shape of the data to upload\r\n            // format : GL enum\r\n            //     The format of the texture data. Can be LUMINANCE, LUMINANCE_ALPHA,\r\n            //     RGB, and RGBA.\r\n            if (width != ((_a = this._shape_format) === null || _a === void 0 ? void 0 : _a.width) || height != ((_b = this._shape_format) === null || _b === void 0 ? void 0 : _b.height) || format != ((_c = this._shape_format) === null || _c === void 0 ? void 0 : _c.format)) {\r\n                this._shape_format = { width: width, height: height, format: format };\r\n                this.activate();\r\n                this.gl.texImage2D(this._target, 0, format, width, height, 0, format, this.gl.UNSIGNED_BYTE, null);\r\n            }\r\n        };\r\n        Texture2d.prototype.set_data = function (offset, _d, data) {\r\n            var _e = tslib_1.__read(_d, 2), width = _e[0], height = _e[1];\r\n            // Set the 2D texture data.\r\n            //\r\n            // Parameters\r\n            // ----------\r\n            // offset : tuple of ints\r\n            //     Offset in pixels for each dimension.\r\n            // shape : tuple of ints\r\n            //     The shape of the data to upload\r\n            // data : typed array\r\n            //     The actual pixel data. Can be of any type, but on the GPU the\r\n            //     dat is stored in 8 bit precision.\r\n            this.activate();\r\n            var format = this._shape_format.format;\r\n            var _f = tslib_1.__read(offset, 2), x = _f[0], y = _f[1];\r\n            var gtype = this._types[data.constructor.name];\r\n            if (gtype == null) {\r\n                throw new Error(\"Type \" + data.constructor.name + \" not allowed for texture\");\r\n            }\r\n            var alignment = this._get_alignment(width);\r\n            if (alignment != 4) {\r\n                this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, alignment);\r\n            }\r\n            this.gl.texSubImage2D(this._target, 0, x, y, width, height, format, gtype, data);\r\n            if (alignment != 4) {\r\n                this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 4);\r\n            }\r\n        };\r\n        return Texture2d;\r\n    }());\r\n    exports.Texture2d = Texture2d;\r\n    Texture2d.__name__ = \"Texture2d\";\r\n}\r\n","/* models\\glyphs\\webgl\\base.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var BaseGLGlyph = /** @class */ (function () {\r\n        function BaseGLGlyph(gl, glyph) {\r\n            this.gl = gl;\r\n            this.glyph = glyph;\r\n            this.nvertices = 0;\r\n            this.size_changed = false;\r\n            this.data_changed = false;\r\n            this.visuals_changed = false;\r\n            this.init();\r\n        }\r\n        BaseGLGlyph.prototype.set_data_changed = function () {\r\n            var data_size = this.glyph.data_size;\r\n            if (data_size != this.nvertices) {\r\n                this.nvertices = data_size;\r\n                this.size_changed = true;\r\n            }\r\n            this.data_changed = true;\r\n        };\r\n        BaseGLGlyph.prototype.set_visuals_changed = function () {\r\n            this.visuals_changed = true;\r\n        };\r\n        BaseGLGlyph.prototype.render = function (_ctx, indices, mainglyph) {\r\n            if (indices.length == 0) {\r\n                return true;\r\n            }\r\n            var _a = this.glyph.renderer.plot_view.canvas_view.webgl.canvas, width = _a.width, height = _a.height;\r\n            var trans = {\r\n                pixel_ratio: this.glyph.renderer.plot_view.canvas_view.pixel_ratio,\r\n                width: width,\r\n                height: height,\r\n            };\r\n            this.draw(indices, mainglyph, trans);\r\n            return true;\r\n        };\r\n        return BaseGLGlyph;\r\n    }());\r\n    exports.BaseGLGlyph = BaseGLGlyph;\r\n    BaseGLGlyph.__name__ = \"BaseGLGlyph\";\r\n}\r\n","/* models\\glyphs\\webgl\\line.vert.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.vertex_shader = \"\\nprecision mediump float;\\n\\nconst float PI = 3.14159265358979323846264;\\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\\n\\nuniform float u_pixel_ratio;\\nuniform vec2 u_canvas_size, u_offset;\\nuniform vec2 u_scale_aspect;\\nuniform float u_scale_length;\\n\\nuniform vec4 u_color;\\nuniform float u_antialias;\\nuniform float u_length;\\nuniform float u_linewidth;\\nuniform float u_dash_index;\\nuniform float u_closed;\\n\\nattribute vec2 a_position;\\nattribute vec4 a_tangents;\\nattribute vec2 a_segment;\\nattribute vec2 a_angles;\\nattribute vec2 a_texcoord;\\n\\nvarying vec4  v_color;\\nvarying vec2  v_segment;\\nvarying vec2  v_angles;\\nvarying vec2  v_texcoord;\\nvarying vec2  v_miter;\\nvarying float v_length;\\nvarying float v_linewidth;\\n\\nfloat cross(in vec2 v1, in vec2 v2)\\n{\\n    return v1.x*v2.y - v1.y*v2.x;\\n}\\n\\nfloat signed_distance(in vec2 v1, in vec2 v2, in vec2 v3)\\n{\\n    return cross(v2-v1,v1-v3) / length(v2-v1);\\n}\\n\\nvoid rotate( in vec2 v, in float alpha, out vec2 result )\\n{\\n    float c = cos(alpha);\\n    float s = sin(alpha);\\n    result = vec2( c*v.x - s*v.y,\\n                   s*v.x + c*v.y );\\n}\\n\\nvoid main()\\n{\\n    bool closed = (u_closed > 0.0);\\n\\n    // Attributes and uniforms to varyings\\n    v_color = u_color;\\n    v_linewidth = u_linewidth;\\n    v_segment = a_segment * u_scale_length;\\n    v_length = u_length * u_scale_length;\\n\\n    // Scale to map to pixel coordinates. The original algorithm from the paper\\n    // assumed isotropic scale. We obviously do not have this.\\n    vec2 abs_scale_aspect = abs(u_scale_aspect);\\n    vec2 abs_scale = u_scale_length * abs_scale_aspect;\\n\\n    // Correct angles for aspect ratio\\n    vec2 av;\\n    av = vec2(1.0, tan(a_angles.x)) / abs_scale_aspect;\\n    v_angles.x = atan(av.y, av.x);\\n    av = vec2(1.0, tan(a_angles.y)) / abs_scale_aspect;\\n    v_angles.y = atan(av.y, av.x);\\n\\n    // Thickness below 1 pixel are represented using a 1 pixel thickness\\n    // and a modified alpha\\n    v_color.a = min(v_linewidth, v_color.a);\\n    v_linewidth = max(v_linewidth, 1.0);\\n\\n    // If color is fully transparent we just will discard the fragment anyway\\n    if( v_color.a <= 0.0 ) {\\n        gl_Position = vec4(0.0,0.0,0.0,1.0);\\n        return;\\n    }\\n\\n    // This is the actual half width of the line\\n    float w = ceil(u_antialias+v_linewidth)/2.0;\\n\\n    vec2 position = a_position;\\n\\n    vec2 t1 = normalize(a_tangents.xy * abs_scale_aspect);  // note the scaling for aspect ratio here\\n    vec2 t2 = normalize(a_tangents.zw * abs_scale_aspect);\\n    float u = a_texcoord.x;\\n    float v = a_texcoord.y;\\n    vec2 o1 = vec2( +t1.y, -t1.x);\\n    vec2 o2 = vec2( +t2.y, -t2.x);\\n\\n    // This is a join\\n    // ----------------------------------------------------------------\\n    if( t1 != t2 ) {\\n        float angle = atan (t1.x*t2.y-t1.y*t2.x, t1.x*t2.x+t1.y*t2.y);  // Angle needs recalculation for some reason\\n        vec2 t  = normalize(t1+t2);\\n        vec2 o  = vec2( + t.y, - t.x);\\n\\n        if ( u_dash_index > 0.0 )\\n        {\\n            // Broken angle\\n            // ----------------------------------------------------------------\\n            if( (abs(angle) > THETA) ) {\\n                position += v * w * o / cos(angle/2.0);\\n                float s = sign(angle);\\n                if( angle < 0.0 ) {\\n                    if( u == +1.0 ) {\\n                        u = v_segment.y + v * w * tan(angle/2.0);\\n                        if( v == 1.0 ) {\\n                            position -= 2.0 * w * t1 / sin(angle);\\n                            u -= 2.0 * w / sin(angle);\\n                        }\\n                    } else {\\n                        u = v_segment.x - v * w * tan(angle/2.0);\\n                        if( v == 1.0 ) {\\n                            position += 2.0 * w * t2 / sin(angle);\\n                            u += 2.0*w / sin(angle);\\n                        }\\n                    }\\n                } else {\\n                    if( u == +1.0 ) {\\n                        u = v_segment.y + v * w * tan(angle/2.0);\\n                        if( v == -1.0 ) {\\n                            position += 2.0 * w * t1 / sin(angle);\\n                            u += 2.0 * w / sin(angle);\\n                        }\\n                    } else {\\n                        u = v_segment.x - v * w * tan(angle/2.0);\\n                        if( v == -1.0 ) {\\n                            position -= 2.0 * w * t2 / sin(angle);\\n                            u -= 2.0*w / sin(angle);\\n                        }\\n                    }\\n                }\\n                // Continuous angle\\n                // ------------------------------------------------------------\\n            } else {\\n                position += v * w * o / cos(angle/2.0);\\n                if( u == +1.0 ) u = v_segment.y;\\n                else            u = v_segment.x;\\n            }\\n        }\\n\\n        // Solid line\\n        // --------------------------------------------------------------------\\n        else\\n        {\\n            position.xy += v * w * o / cos(angle/2.0);\\n            if( angle < 0.0 ) {\\n                if( u == +1.0 ) {\\n                    u = v_segment.y + v * w * tan(angle/2.0);\\n                } else {\\n                    u = v_segment.x - v * w * tan(angle/2.0);\\n                }\\n            } else {\\n                if( u == +1.0 ) {\\n                    u = v_segment.y + v * w * tan(angle/2.0);\\n                } else {\\n                    u = v_segment.x - v * w * tan(angle/2.0);\\n                }\\n            }\\n        }\\n\\n    // This is a line start or end (t1 == t2)\\n    // ------------------------------------------------------------------------\\n    } else {\\n        position += v * w * o1;\\n        if( u == -1.0 ) {\\n            u = v_segment.x - w;\\n            position -= w * t1;\\n        } else {\\n            u = v_segment.y + w;\\n            position += w * t2;\\n        }\\n    }\\n\\n    // Miter distance\\n    // ------------------------------------------------------------------------\\n    vec2 t;\\n    vec2 curr = a_position * abs_scale;\\n    if( a_texcoord.x < 0.0 ) {\\n        vec2 next = curr + t2*(v_segment.y-v_segment.x);\\n\\n        rotate( t1, +v_angles.x/2.0, t);\\n        v_miter.x = signed_distance(curr, curr+t, position);\\n\\n        rotate( t2, +v_angles.y/2.0, t);\\n        v_miter.y = signed_distance(next, next+t, position);\\n    } else {\\n        vec2 prev = curr - t1*(v_segment.y-v_segment.x);\\n\\n        rotate( t1, -v_angles.x/2.0,t);\\n        v_miter.x = signed_distance(prev, prev+t, position);\\n\\n        rotate( t2, -v_angles.y/2.0,t);\\n        v_miter.y = signed_distance(curr, curr+t, position);\\n    }\\n\\n    if (!closed && v_segment.x <= 0.0) {\\n        v_miter.x = 1e10;\\n    }\\n    if (!closed && v_segment.y >= v_length)\\n    {\\n        v_miter.y = 1e10;\\n    }\\n\\n    v_texcoord = vec2( u, v*w );\\n\\n    // Calculate position in device coordinates. Note that we\\n    // already scaled with abs scale above.\\n    vec2 normpos = position * sign(u_scale_aspect);\\n    normpos += 0.5;  // make up for Bokeh's offset\\n    normpos /= u_canvas_size / u_pixel_ratio;  // in 0..1\\n    gl_Position = vec4(normpos*2.0-1.0, 0.0, 1.0);\\n    gl_Position.y *= -1.0;\\n}\\n\";\r\n}\r\n","/* models\\glyphs\\webgl\\line.frag.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.fragment_shader = \"\\nprecision mediump float;\\n\\nconst float PI = 3.14159265358979323846264;\\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\\n\\nuniform sampler2D u_dash_atlas;\\n\\nuniform vec2 u_linecaps;\\nuniform float u_miter_limit;\\nuniform float u_linejoin;\\nuniform float u_antialias;\\nuniform float u_dash_phase;\\nuniform float u_dash_period;\\nuniform float u_dash_index;\\nuniform vec2 u_dash_caps;\\nuniform float u_closed;\\n\\nvarying vec4  v_color;\\nvarying vec2  v_segment;\\nvarying vec2  v_angles;\\nvarying vec2  v_texcoord;\\nvarying vec2  v_miter;\\nvarying float v_length;\\nvarying float v_linewidth;\\n\\n// Compute distance to cap ----------------------------------------------------\\nfloat cap( int type, float dx, float dy, float t, float linewidth )\\n{\\n    float d = 0.0;\\n    dx = abs(dx);\\n    dy = abs(dy);\\n    if      (type == 0)  discard;  // None\\n    else if (type == 1)  d = sqrt(dx*dx+dy*dy);  // Round\\n    else if (type == 3)  d = (dx+abs(dy));  // Triangle in\\n    else if (type == 2)  d = max(abs(dy),(t+dx-abs(dy)));  // Triangle out\\n    else if (type == 4)  d = max(dx,dy);  // Square\\n    else if (type == 5)  d = max(dx+t,dy);  // Butt\\n    return d;\\n}\\n\\n// Compute distance to join -------------------------------------------------\\nfloat join( in int type, in float d, in vec2 segment, in vec2 texcoord, in vec2 miter,\\n           in float linewidth )\\n{\\n    // texcoord.x is distance from start\\n    // texcoord.y is distance from centerline\\n    // segment.x and y indicate the limits (as for texcoord.x) for this segment\\n\\n    float dx = texcoord.x;\\n\\n    // Round join\\n    if( type == 1 ) {\\n        if (dx < segment.x) {\\n            d = max(d,length( texcoord - vec2(segment.x,0.0)));\\n            //d = length( texcoord - vec2(segment.x,0.0));\\n        } else if (dx > segment.y) {\\n            d = max(d,length( texcoord - vec2(segment.y,0.0)));\\n            //d = length( texcoord - vec2(segment.y,0.0));\\n        }\\n    }\\n    // Bevel join\\n    else if ( type == 2 ) {\\n        if (dx < segment.x) {\\n            vec2 x = texcoord - vec2(segment.x,0.0);\\n            d = max(d, max(abs(x.x), abs(x.y)));\\n\\n        } else if (dx > segment.y) {\\n            vec2 x = texcoord - vec2(segment.y,0.0);\\n            d = max(d, max(abs(x.x), abs(x.y)));\\n        }\\n        /*  Original code for bevel which does not work for us\\n        if( (dx < segment.x) ||  (dx > segment.y) )\\n            d = max(d, min(abs(x.x),abs(x.y)));\\n        */\\n    }\\n\\n    return d;\\n}\\n\\nvoid main()\\n{\\n    // If color is fully transparent we just discard the fragment\\n    if( v_color.a <= 0.0 ) {\\n        discard;\\n    }\\n\\n    // Test if dash pattern is the solid one (0)\\n    bool solid =  (u_dash_index == 0.0);\\n\\n    // Test if path is closed\\n    bool closed = (u_closed > 0.0);\\n\\n    vec4 color = v_color;\\n    float dx = v_texcoord.x;\\n    float dy = v_texcoord.y;\\n    float t = v_linewidth/2.0-u_antialias;\\n    float width = 1.0;  //v_linewidth; original code had dashes scale with line width, we do not\\n    float d = 0.0;\\n\\n    vec2 linecaps = u_linecaps;\\n    vec2 dash_caps = u_dash_caps;\\n    float line_start = 0.0;\\n    float line_stop = v_length;\\n\\n    // Apply miter limit; fragments too far into the miter are simply discarded\\n    if( (dx < v_segment.x) || (dx > v_segment.y) ) {\\n        float into_miter = max(v_segment.x - dx, dx - v_segment.y);\\n        if (into_miter > u_miter_limit*v_linewidth/2.0)\\n          discard;\\n    }\\n\\n    // Solid line --------------------------------------------------------------\\n    if( solid ) {\\n        d = abs(dy);\\n        if( (!closed) && (dx < line_start) ) {\\n            d = cap( int(u_linecaps.x), abs(dx), abs(dy), t, v_linewidth );\\n        }\\n        else if( (!closed) &&  (dx > line_stop) ) {\\n            d = cap( int(u_linecaps.y), abs(dx)-line_stop, abs(dy), t, v_linewidth );\\n        }\\n        else {\\n            d = join( int(u_linejoin), abs(dy), v_segment, v_texcoord, v_miter, v_linewidth );\\n        }\\n\\n    // Dash line --------------------------------------------------------------\\n    } else {\\n        float segment_start = v_segment.x;\\n        float segment_stop  = v_segment.y;\\n        float segment_center= (segment_start+segment_stop)/2.0;\\n        float freq          = u_dash_period*width;\\n        float u = mod( dx + u_dash_phase*width, freq);\\n        vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\\n        float dash_center= tex.x * width;\\n        float dash_type  = tex.y;\\n        float _start = tex.z * width;\\n        float _stop  = tex.a * width;\\n        float dash_start = dx - u + _start;\\n        float dash_stop  = dx - u + _stop;\\n\\n        // Compute extents of the first dash (the one relative to v_segment.x)\\n        // Note: this could be computed in the vertex shader\\n        if( (dash_stop < segment_start) && (dash_caps.x != 5.0) ) {\\n            float u = mod(segment_start + u_dash_phase*width, freq);\\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\\n            dash_center= tex.x * width;\\n            //dash_type  = tex.y;\\n            float _start = tex.z * width;\\n            float _stop  = tex.a * width;\\n            dash_start = segment_start - u + _start;\\n            dash_stop = segment_start - u + _stop;\\n        }\\n\\n        // Compute extents of the last dash (the one relatives to v_segment.y)\\n        // Note: This could be computed in the vertex shader\\n        else if( (dash_start > segment_stop)  && (dash_caps.y != 5.0) ) {\\n            float u = mod(segment_stop + u_dash_phase*width, freq);\\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\\n            dash_center= tex.x * width;\\n            //dash_type  = tex.y;\\n            float _start = tex.z * width;\\n            float _stop  = tex.a * width;\\n            dash_start = segment_stop - u + _start;\\n            dash_stop  = segment_stop - u + _stop;\\n        }\\n\\n        // This test if the we are dealing with a discontinuous angle\\n        bool discontinuous = ((dx <  segment_center) && abs(v_angles.x) > THETA) ||\\n                             ((dx >= segment_center) && abs(v_angles.y) > THETA);\\n        //if( dx < line_start) discontinuous = false;\\n        //if( dx > line_stop)  discontinuous = false;\\n\\n        float d_join = join( int(u_linejoin), abs(dy),\\n                            v_segment, v_texcoord, v_miter, v_linewidth );\\n\\n        // When path is closed, we do not have room for linecaps, so we make room\\n        // by shortening the total length\\n        if (closed) {\\n             line_start += v_linewidth/2.0;\\n             line_stop  -= v_linewidth/2.0;\\n        }\\n\\n        // We also need to take antialias area into account\\n        //line_start += u_antialias;\\n        //line_stop  -= u_antialias;\\n\\n        // Check is dash stop is before line start\\n        if( dash_stop <= line_start ) {\\n            discard;\\n        }\\n        // Check is dash start is beyond line stop\\n        if( dash_start >= line_stop ) {\\n            discard;\\n        }\\n\\n        // Check if current dash start is beyond segment stop\\n        if( discontinuous ) {\\n            // Dash start is beyond segment, we discard\\n            if( (dash_start > segment_stop) ) {\\n                discard;\\n                //gl_FragColor = vec4(1.0,0.0,0.0,.25); return;\\n            }\\n\\n            // Dash stop is before segment, we discard\\n            if( (dash_stop < segment_start) ) {\\n                discard;  //gl_FragColor = vec4(0.0,1.0,0.0,.25); return;\\n            }\\n\\n            // Special case for round caps (nicer with this)\\n            if( dash_caps.x == 1.0 ) {\\n                if( (u > _stop) && (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0)) {\\n                    discard;\\n                }\\n            }\\n\\n            // Special case for round caps  (nicer with this)\\n            if( dash_caps.y == 1.0 ) {\\n                if( (u < _start) && (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0)) {\\n                    discard;\\n                }\\n            }\\n\\n            // Special case for triangle caps (in & out) and square\\n            // We make sure the cap stop at crossing frontier\\n            if( (dash_caps.x != 1.0) && (dash_caps.x != 5.0) ) {\\n                if( (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0) ) {\\n                    float a = v_angles.x/2.0;\\n                    float x = (segment_start-dx)*cos(a) - dy*sin(a);\\n                    float y = (segment_start-dx)*sin(a) + dy*cos(a);\\n                    if( x > 0.0 ) discard;\\n                    // We transform the cap into square to avoid holes\\n                    dash_caps.x = 4.0;\\n                }\\n            }\\n\\n            // Special case for triangle caps (in & out) and square\\n            // We make sure the cap stop at crossing frontier\\n            if( (dash_caps.y != 1.0) && (dash_caps.y != 5.0) ) {\\n                if( (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0) ) {\\n                    float a = v_angles.y/2.0;\\n                    float x = (dx-segment_stop)*cos(a) - dy*sin(a);\\n                    float y = (dx-segment_stop)*sin(a) + dy*cos(a);\\n                    if( x > 0.0 ) discard;\\n                    // We transform the caps into square to avoid holes\\n                    dash_caps.y = 4.0;\\n                }\\n            }\\n        }\\n\\n        // Line cap at start\\n        if( (dx < line_start) && (dash_start < line_start) && (dash_stop > line_start) ) {\\n            d = cap( int(linecaps.x), dx-line_start, dy, t, v_linewidth);\\n        }\\n        // Line cap at stop\\n        else if( (dx > line_stop) && (dash_stop > line_stop) && (dash_start < line_stop) ) {\\n            d = cap( int(linecaps.y), dx-line_stop, dy, t, v_linewidth);\\n        }\\n        // Dash cap left - dash_type = -1, 0 or 1, but there may be roundoff errors\\n        else if( dash_type < -0.5 ) {\\n            d = cap( int(dash_caps.y), abs(u-dash_center), dy, t, v_linewidth);\\n            if( (dx > line_start) && (dx < line_stop) )\\n                d = max(d,d_join);\\n        }\\n        // Dash cap right\\n        else if( dash_type > 0.5 ) {\\n            d = cap( int(dash_caps.x), abs(dash_center-u), dy, t, v_linewidth);\\n            if( (dx > line_start) && (dx < line_stop) )\\n                d = max(d,d_join);\\n        }\\n        // Dash body (plain)\\n        else {// if( dash_type > -0.5 &&  dash_type < 0.5) {\\n            d = abs(dy);\\n        }\\n\\n        // Line join\\n        if( (dx > line_start) && (dx < line_stop)) {\\n            if( (dx <= segment_start) && (dash_start <= segment_start)\\n                && (dash_stop >= segment_start) ) {\\n                d = d_join;\\n                // Antialias at outer border\\n                float angle = PI/2.+v_angles.x;\\n                float f = abs( (segment_start - dx)*cos(angle) - dy*sin(angle));\\n                d = max(f,d);\\n            }\\n            else if( (dx > segment_stop) && (dash_start <= segment_stop)\\n                     && (dash_stop >= segment_stop) ) {\\n                d = d_join;\\n                // Antialias at outer border\\n                float angle = PI/2.+v_angles.y;\\n                float f = abs((dx - segment_stop)*cos(angle) - dy*sin(angle));\\n                d = max(f,d);\\n            }\\n            else if( dx < (segment_start - v_linewidth/2.)) {\\n                discard;\\n            }\\n            else if( dx > (segment_stop + v_linewidth/2.)) {\\n                discard;\\n            }\\n        }\\n        else if( dx < (segment_start - v_linewidth/2.)) {\\n            discard;\\n        }\\n        else if( dx > (segment_stop + v_linewidth/2.)) {\\n            discard;\\n        }\\n    }\\n\\n    // Distance to border ------------------------------------------------------\\n    d = d - t;\\n    if( d < 0.0 ) {\\n        gl_FragColor = color;\\n    } else {\\n        d /= u_antialias;\\n        gl_FragColor = vec4(color.rgb, exp(-d*d)*color.a);\\n    }\\n}\\n\";\r\n}\r\n","/* models\\glyphs\\patch.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var PatchView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PatchView, _super);\r\n        function PatchView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PatchView.prototype._inner_loop = function (ctx, indices, sx, sy, func) {\r\n            var e_1, _a;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (i == 0) {\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(sx[i], sy[i]);\r\n                        continue;\r\n                    }\r\n                    else if (isNaN(sx[i] + sy[i])) {\r\n                        ctx.closePath();\r\n                        func.apply(ctx);\r\n                        ctx.beginPath();\r\n                        continue;\r\n                    }\r\n                    else\r\n                        ctx.lineTo(sx[i], sy[i]);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_a = indices_1.return))\r\n                        _a.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            ctx.closePath();\r\n            func.call(ctx);\r\n        };\r\n        PatchView.prototype._render = function (ctx, indices, _a) {\r\n            var _this = this;\r\n            var sx = _a.sx, sy = _a.sy;\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_value(ctx);\r\n                this._inner_loop(ctx, indices, sx, sy, ctx.fill);\r\n            }\r\n            this.visuals.hatch.doit2(ctx, 0, function () { return _this._inner_loop(ctx, indices, sx, sy, ctx.fill); }, function () { return _this.renderer.request_render(); });\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_value(ctx);\r\n                this._inner_loop(ctx, indices, sx, sy, ctx.stroke);\r\n            }\r\n        };\r\n        PatchView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        PatchView.prototype._hit_point = function (geometry) {\r\n            var result = new selection_1.Selection();\r\n            if (hittest.point_in_poly(geometry.sx, geometry.sy, this.sx, this.sy)) {\r\n                result.add_to_selected_glyphs(this.model);\r\n                result.view = this;\r\n            }\r\n            return result;\r\n        };\r\n        return PatchView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.PatchView = PatchView;\r\n    PatchView.__name__ = \"PatchView\";\r\n    var Patch = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Patch, _super);\r\n        function Patch(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Patch.init_Patch = function () {\r\n            this.prototype.default_view = PatchView;\r\n            this.mixins([mixins.Line /*Scalar*/, mixins.Fill /*Scalar*/, mixins.Hatch /*Scalar*/]);\r\n        };\r\n        return Patch;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Patch = Patch;\r\n    Patch.__name__ = \"Patch\";\r\n    Patch.init_Patch();\r\n}\r\n","/* models\\glyphs\\harea.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var area_1 = require(227) /* ./area */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var HAreaView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HAreaView, _super);\r\n        function HAreaView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        HAreaView.prototype._index_data = function (index) {\r\n            var min = Math.min, max = Math.max;\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var x1 = this._x1[i];\r\n                var x2 = this._x2[i];\r\n                var y = this._y[i];\r\n                if (isNaN(x1 + x2 + y) || !isFinite(x1 + x2 + y))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(min(x1, x2), y, max(x1, x2), y);\r\n            }\r\n        };\r\n        HAreaView.prototype._inner = function (ctx, sx1, sx2, sy, func) {\r\n            ctx.beginPath();\r\n            for (var i = 0, end = sx1.length; i < end; i++) {\r\n                ctx.lineTo(sx1[i], sy[i]);\r\n            }\r\n            // iterate backwards so that the upper end is below the lower start\r\n            for (var i = sx2.length - 1; i >= 0; i--) {\r\n                ctx.lineTo(sx2[i], sy[i]);\r\n            }\r\n            ctx.closePath();\r\n            func.call(ctx);\r\n        };\r\n        HAreaView.prototype._render = function (ctx, _indices, _a) {\r\n            var _this = this;\r\n            var sx1 = _a.sx1, sx2 = _a.sx2, sy = _a.sy;\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_value(ctx);\r\n                this._inner(ctx, sx1, sx2, sy, ctx.fill);\r\n            }\r\n            this.visuals.hatch.doit2(ctx, 0, function () { return _this._inner(ctx, sx1, sx2, sy, ctx.fill); }, function () { return _this.renderer.request_render(); });\r\n        };\r\n        HAreaView.prototype._hit_point = function (geometry) {\r\n            var L = this.sy.length;\r\n            var sx = new types_1.NumberArray(2 * L);\r\n            var sy = new types_1.NumberArray(2 * L);\r\n            for (var i = 0, end = L; i < end; i++) {\r\n                sx[i] = this.sx1[i];\r\n                sy[i] = this.sy[i];\r\n                sx[L + i] = this.sx2[L - i - 1];\r\n                sy[L + i] = this.sy[L - i - 1];\r\n            }\r\n            var result = new selection_1.Selection();\r\n            if (hittest.point_in_poly(geometry.sx, geometry.sy, sx, sy)) {\r\n                result.add_to_selected_glyphs(this.model);\r\n                result.view = this;\r\n            }\r\n            return result;\r\n        };\r\n        HAreaView.prototype.scenterxy = function (i) {\r\n            var scx = (this.sx1[i] + this.sx2[i]) / 2;\r\n            var scy = this.sy[i];\r\n            return [scx, scy];\r\n        };\r\n        HAreaView.prototype._map_data = function () {\r\n            this.sx1 = this.renderer.xscale.v_compute(this._x1);\r\n            this.sx2 = this.renderer.xscale.v_compute(this._x2);\r\n            this.sy = this.renderer.yscale.v_compute(this._y);\r\n        };\r\n        return HAreaView;\r\n    }(area_1.AreaView));\r\n    exports.HAreaView = HAreaView;\r\n    HAreaView.__name__ = \"HAreaView\";\r\n    var HArea = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HArea, _super);\r\n        function HArea(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        HArea.init_HArea = function () {\r\n            this.prototype.default_view = HAreaView;\r\n            this.define({\r\n                x1: [p.XCoordinateSpec, { field: \"x1\" }],\r\n                x2: [p.XCoordinateSpec, { field: \"x2\" }],\r\n                y: [p.YCoordinateSpec, { field: \"y\" }],\r\n            });\r\n        };\r\n        return HArea;\r\n    }(area_1.Area));\r\n    exports.HArea = HArea;\r\n    HArea.__name__ = \"HArea\";\r\n    HArea.init_HArea();\r\n}\r\n","/* models\\glyphs\\area.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var AreaView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AreaView, _super);\r\n        function AreaView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        AreaView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return AreaView;\r\n    }(glyph_1.GlyphView));\r\n    exports.AreaView = AreaView;\r\n    AreaView.__name__ = \"AreaView\";\r\n    var Area = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Area, _super);\r\n        function Area(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Area.init_Area = function () {\r\n            this.mixins([mixins.Fill /*Scalar*/, mixins.HatchVector]);\r\n        };\r\n        return Area;\r\n    }(glyph_1.Glyph));\r\n    exports.Area = Area;\r\n    Area.__name__ = \"Area\";\r\n    Area.init_Area();\r\n}\r\n","/* models\\glyphs\\varea.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var area_1 = require(227) /* ./area */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var VAreaView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VAreaView, _super);\r\n        function VAreaView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        VAreaView.prototype._index_data = function (index) {\r\n            var min = Math.min, max = Math.max;\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var x = this._x[i];\r\n                var y1 = this._y1[i];\r\n                var y2 = this._y2[i];\r\n                if (isNaN(x + y1 + y2) || !isFinite(x + y1 + y2))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(x, min(y1, y2), x, max(y1, y2));\r\n            }\r\n        };\r\n        VAreaView.prototype._inner = function (ctx, sx, sy1, sy2, func) {\r\n            ctx.beginPath();\r\n            for (var i = 0, end = sy1.length; i < end; i++) {\r\n                ctx.lineTo(sx[i], sy1[i]);\r\n            }\r\n            // iterate backwards so that the upper end is below the lower start\r\n            for (var i = sy2.length - 1; i >= 0; i--) {\r\n                ctx.lineTo(sx[i], sy2[i]);\r\n            }\r\n            ctx.closePath();\r\n            func.call(ctx);\r\n        };\r\n        VAreaView.prototype._render = function (ctx, _indices, _a) {\r\n            var _this = this;\r\n            var sx = _a.sx, sy1 = _a.sy1, sy2 = _a.sy2;\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_value(ctx);\r\n                this._inner(ctx, sx, sy1, sy2, ctx.fill);\r\n            }\r\n            this.visuals.hatch.doit2(ctx, 0, function () { return _this._inner(ctx, sx, sy1, sy2, ctx.fill); }, function () { return _this.renderer.request_render(); });\r\n        };\r\n        VAreaView.prototype.scenterxy = function (i) {\r\n            var scx = this.sx[i];\r\n            var scy = (this.sy1[i] + this.sy2[i]) / 2;\r\n            return [scx, scy];\r\n        };\r\n        VAreaView.prototype._hit_point = function (geometry) {\r\n            var L = this.sx.length;\r\n            var sx = new types_1.NumberArray(2 * L);\r\n            var sy = new types_1.NumberArray(2 * L);\r\n            for (var i = 0, end = L; i < end; i++) {\r\n                sx[i] = this.sx[i];\r\n                sy[i] = this.sy1[i];\r\n                sx[L + i] = this.sx[L - i - 1];\r\n                sy[L + i] = this.sy2[L - i - 1];\r\n            }\r\n            var result = new selection_1.Selection();\r\n            if (hittest.point_in_poly(geometry.sx, geometry.sy, sx, sy)) {\r\n                result.add_to_selected_glyphs(this.model);\r\n                result.view = this;\r\n            }\r\n            return result;\r\n        };\r\n        VAreaView.prototype._map_data = function () {\r\n            this.sx = this.renderer.xscale.v_compute(this._x);\r\n            this.sy1 = this.renderer.yscale.v_compute(this._y1);\r\n            this.sy2 = this.renderer.yscale.v_compute(this._y2);\r\n        };\r\n        return VAreaView;\r\n    }(area_1.AreaView));\r\n    exports.VAreaView = VAreaView;\r\n    VAreaView.__name__ = \"VAreaView\";\r\n    var VArea = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VArea, _super);\r\n        function VArea(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        VArea.init_VArea = function () {\r\n            this.prototype.default_view = VAreaView;\r\n            this.define({\r\n                x: [p.XCoordinateSpec, { field: \"x\" }],\r\n                y1: [p.YCoordinateSpec, { field: \"y1\" }],\r\n                y2: [p.YCoordinateSpec, { field: \"y2\" }],\r\n            });\r\n        };\r\n        return VArea;\r\n    }(area_1.Area));\r\n    exports.VArea = VArea;\r\n    VArea.__name__ = \"VArea\";\r\n    VArea.init_VArea();\r\n}\r\n","/* models\\sources\\cds_view.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var columnar_data_source_1 = require(201) /* ./columnar_data_source */;\r\n    var CDSView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CDSView, _super);\r\n        function CDSView(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CDSView.init_CDSView = function () {\r\n            this.define({\r\n                filters: [p.Array, []],\r\n                source: [p.Instance],\r\n            });\r\n            this.internal({\r\n                indices: [p.Any],\r\n                indices_map: [p.Any, {}],\r\n                masked: [p.Any, null],\r\n            });\r\n        };\r\n        CDSView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.compute_indices();\r\n        };\r\n        CDSView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.properties.filters.change, function () { return _this.compute_indices(); });\r\n            var connect_listeners = function () {\r\n                var fn = function () { return _this.compute_indices(); };\r\n                if (_this.source != null) {\r\n                    _this.connect(_this.source.change, fn);\r\n                    if (_this.source instanceof columnar_data_source_1.ColumnarDataSource) {\r\n                        _this.connect(_this.source.streaming, fn);\r\n                        _this.connect(_this.source.patching, fn);\r\n                    }\r\n                }\r\n            };\r\n            var initialized = this.source != null;\r\n            if (initialized)\r\n                connect_listeners();\r\n            else {\r\n                this.connect(this.properties.source.change, function () {\r\n                    if (!initialized) {\r\n                        connect_listeners();\r\n                        initialized = true;\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        CDSView.prototype.compute_indices = function () {\r\n            var e_1, _b;\r\n            var _a;\r\n            var source = this.source;\r\n            if (source == null)\r\n                return;\r\n            // XXX: if the data source is empty, there still may be one\r\n            // index originating from glyph's scalar values.\r\n            var size = (_a = source.get_length()) !== null && _a !== void 0 ? _a : 1;\r\n            var indices = types_1.Indices.all_set(size);\r\n            try {\r\n                for (var _c = tslib_1.__values(this.filters), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var filter = _d.value;\r\n                    indices.intersect(filter.compute_indices(source));\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            this.indices = indices;\r\n            this._indices = tslib_1.__spread(indices);\r\n            this.indices_map_to_subset();\r\n        };\r\n        CDSView.prototype.indices_map_to_subset = function () {\r\n            this.indices_map = {};\r\n            for (var i = 0; i < this._indices.length; i++) {\r\n                this.indices_map[this._indices[i]] = i;\r\n            }\r\n        };\r\n        CDSView.prototype.convert_selection_from_subset = function (selection_subset) {\r\n            var _this = this;\r\n            var indices = selection_subset.indices.map(function (i) { return _this._indices[i]; });\r\n            return new selection_1.Selection(Object.assign(Object.assign({}, selection_subset.attributes), { indices: indices }));\r\n        };\r\n        CDSView.prototype.convert_selection_to_subset = function (selection_full) {\r\n            var _this = this;\r\n            var indices = selection_full.indices.map(function (i) { return _this.indices_map[i]; });\r\n            return new selection_1.Selection(Object.assign(Object.assign({}, selection_full.attributes), { indices: indices }));\r\n        };\r\n        CDSView.prototype.convert_indices_from_subset = function (indices) {\r\n            var _this = this;\r\n            return indices.map(function (i) { return _this._indices[i]; });\r\n        };\r\n        return CDSView;\r\n    }(model_1.Model));\r\n    exports.CDSView = CDSView;\r\n    CDSView.__name__ = \"CDSView\";\r\n    CDSView.init_CDSView();\r\n}\r\n","/* core\\build_views.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var array_1 = require(124) /* ./util/array */;\r\n    function _build_view(view_cls, model, options) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var view;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        view = new view_cls(Object.assign(Object.assign({}, options), { model: model }));\r\n                        view.initialize();\r\n                        return [4 /*yield*/, view.lazy_initialize()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, view];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function build_view(model, options, cls) {\r\n        if (options === void 0) {\r\n            options = { parent: null };\r\n        }\r\n        if (cls === void 0) {\r\n            cls = function (model) { return model.default_view; };\r\n        }\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var view;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, _build_view(cls(model), model, options)];\r\n                    case 1:\r\n                        view = _a.sent();\r\n                        view.connect_signals();\r\n                        return [2 /*return*/, view];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    exports.build_view = build_view;\r\n    function build_views(view_storage, models, options, cls) {\r\n        if (options === void 0) {\r\n            options = { parent: null };\r\n        }\r\n        if (cls === void 0) {\r\n            cls = function (model) { return model.default_view; };\r\n        }\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var to_remove, to_remove_1, to_remove_1_1, model, created_views, new_models, new_models_1, new_models_1_1, model, view, e_1_1, created_views_1, created_views_1_1, view;\r\n            var e_2, _a, e_1, _b, e_3, _c;\r\n            return tslib_1.__generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        to_remove = array_1.difference(tslib_1.__spread(view_storage.keys()), models);\r\n                        try {\r\n                            for (to_remove_1 = tslib_1.__values(to_remove), to_remove_1_1 = to_remove_1.next(); !to_remove_1_1.done; to_remove_1_1 = to_remove_1.next()) {\r\n                                model = to_remove_1_1.value;\r\n                                view_storage.get(model).remove();\r\n                                view_storage.delete(model);\r\n                            }\r\n                        }\r\n                        catch (e_2_1) {\r\n                            e_2 = { error: e_2_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (to_remove_1_1 && !to_remove_1_1.done && (_a = to_remove_1.return))\r\n                                    _a.call(to_remove_1);\r\n                            }\r\n                            finally {\r\n                                if (e_2)\r\n                                    throw e_2.error;\r\n                            }\r\n                        }\r\n                        created_views = [];\r\n                        new_models = models.filter(function (model) { return !view_storage.has(model); });\r\n                        _d.label = 1;\r\n                    case 1:\r\n                        _d.trys.push([1, 6, 7, 8]);\r\n                        new_models_1 = tslib_1.__values(new_models), new_models_1_1 = new_models_1.next();\r\n                        _d.label = 2;\r\n                    case 2:\r\n                        if (!!new_models_1_1.done)\r\n                            return [3 /*break*/, 5];\r\n                        model = new_models_1_1.value;\r\n                        return [4 /*yield*/, _build_view(cls(model), model, options)];\r\n                    case 3:\r\n                        view = _d.sent();\r\n                        view_storage.set(model, view);\r\n                        created_views.push(view);\r\n                        _d.label = 4;\r\n                    case 4:\r\n                        new_models_1_1 = new_models_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _d.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (new_models_1_1 && !new_models_1_1.done && (_b = new_models_1.return))\r\n                                _b.call(new_models_1);\r\n                        }\r\n                        finally {\r\n                            if (e_1)\r\n                                throw e_1.error;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 8:\r\n                        try {\r\n                            for (created_views_1 = tslib_1.__values(created_views), created_views_1_1 = created_views_1.next(); !created_views_1_1.done; created_views_1_1 = created_views_1.next()) {\r\n                                view = created_views_1_1.value;\r\n                                view.connect_signals();\r\n                            }\r\n                        }\r\n                        catch (e_3_1) {\r\n                            e_3 = { error: e_3_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (created_views_1_1 && !created_views_1_1.done && (_c = created_views_1.return))\r\n                                    _c.call(created_views_1);\r\n                            }\r\n                            finally {\r\n                                if (e_3)\r\n                                    throw e_3.error;\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, created_views];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    exports.build_views = build_views;\r\n    function remove_views(view_storage) {\r\n        var e_4, _a;\r\n        try {\r\n            for (var view_storage_1 = tslib_1.__values(view_storage), view_storage_1_1 = view_storage_1.next(); !view_storage_1_1.done; view_storage_1_1 = view_storage_1.next()) {\r\n                var _b = tslib_1.__read(view_storage_1_1.value, 2), model = _b[0], view = _b[1];\r\n                view.remove();\r\n                view_storage.delete(model);\r\n            }\r\n        }\r\n        catch (e_4_1) {\r\n            e_4 = { error: e_4_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (view_storage_1_1 && !view_storage_1_1.done && (_a = view_storage_1.return))\r\n                    _a.call(view_storage_1);\r\n            }\r\n            finally {\r\n                if (e_4)\r\n                    throw e_4.error;\r\n            }\r\n        }\r\n    }\r\n    exports.remove_views = remove_views;\r\n}\r\n","/* models\\renderers\\graph_renderer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var data_renderer_1 = require(206) /* ./data_renderer */;\r\n    var graph_hit_test_policy_1 = require(232) /* ../graphs/graph_hit_test_policy */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var build_views_1 = require(230) /* ../../core/build_views */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var GraphRendererView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GraphRendererView, _super);\r\n        function GraphRendererView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GraphRendererView.prototype.lazy_initialize = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var graph, xs_ys, x_y, xs_expr, ys_expr, x_expr, y_expr, _a, edge_renderer, node_renderer, parent, _b, _c;\r\n                return tslib_1.__generator(this, function (_d) {\r\n                    switch (_d.label) {\r\n                        case 0: return [4 /*yield*/, _super.prototype.lazy_initialize.call(this)];\r\n                        case 1:\r\n                            _d.sent();\r\n                            graph = this.model;\r\n                            xs_ys = null;\r\n                            x_y = null;\r\n                            xs_expr = {\r\n                                v_compute: function (source) {\r\n                                    assert_1.assert(xs_ys == null);\r\n                                    var _a = tslib_1.__read(xs_ys = graph.layout_provider.get_edge_coordinates(source), 1), xs = _a[0];\r\n                                    return xs;\r\n                                },\r\n                            };\r\n                            ys_expr = {\r\n                                v_compute: function (_source) {\r\n                                    assert_1.assert(xs_ys != null);\r\n                                    var _a = tslib_1.__read(xs_ys, 2), ys = _a[1];\r\n                                    xs_ys = null;\r\n                                    return ys;\r\n                                },\r\n                            };\r\n                            x_expr = {\r\n                                v_compute: function (source) {\r\n                                    assert_1.assert(x_y == null);\r\n                                    var _a = tslib_1.__read(x_y = graph.layout_provider.get_node_coordinates(source), 1), x = _a[0];\r\n                                    return x;\r\n                                },\r\n                            };\r\n                            y_expr = {\r\n                                v_compute: function (_source) {\r\n                                    assert_1.assert(x_y != null);\r\n                                    var _a = tslib_1.__read(x_y, 2), y = _a[1];\r\n                                    x_y = null;\r\n                                    return y;\r\n                                },\r\n                            };\r\n                            _a = this.model, edge_renderer = _a.edge_renderer, node_renderer = _a.node_renderer;\r\n                            edge_renderer.glyph.properties.xs.internal = true;\r\n                            edge_renderer.glyph.properties.ys.internal = true;\r\n                            node_renderer.glyph.properties.x.internal = true;\r\n                            node_renderer.glyph.properties.y.internal = true;\r\n                            edge_renderer.glyph.xs = { expr: xs_expr };\r\n                            edge_renderer.glyph.ys = { expr: ys_expr };\r\n                            node_renderer.glyph.x = { expr: x_expr };\r\n                            node_renderer.glyph.y = { expr: y_expr };\r\n                            parent = this.parent;\r\n                            _b = this;\r\n                            return [4 /*yield*/, build_views_1.build_view(edge_renderer, { parent: parent })];\r\n                        case 2:\r\n                            _b.edge_view = _d.sent();\r\n                            _c = this;\r\n                            return [4 /*yield*/, build_views_1.build_view(node_renderer, { parent: parent })];\r\n                        case 3:\r\n                            _c.node_view = _d.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GraphRendererView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.layout_provider.change, function () {\r\n                _this.edge_view.set_data(false);\r\n                _this.node_view.set_data(false);\r\n                _this.request_render();\r\n            });\r\n        };\r\n        GraphRendererView.prototype.remove = function () {\r\n            this.edge_view.remove();\r\n            this.node_view.remove();\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        GraphRendererView.prototype._render = function () {\r\n            this.edge_view.render();\r\n            this.node_view.render();\r\n        };\r\n        return GraphRendererView;\r\n    }(data_renderer_1.DataRendererView));\r\n    exports.GraphRendererView = GraphRendererView;\r\n    GraphRendererView.__name__ = \"GraphRendererView\";\r\n    var GraphRenderer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GraphRenderer, _super);\r\n        function GraphRenderer(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GraphRenderer.init_GraphRenderer = function () {\r\n            this.prototype.default_view = GraphRendererView;\r\n            this.define({\r\n                layout_provider: [p.Instance],\r\n                node_renderer: [p.Instance],\r\n                edge_renderer: [p.Instance],\r\n                selection_policy: [p.Instance, function () { return new graph_hit_test_policy_1.NodesOnly(); }],\r\n                inspection_policy: [p.Instance, function () { return new graph_hit_test_policy_1.NodesOnly(); }],\r\n            });\r\n        };\r\n        GraphRenderer.prototype.get_selection_manager = function () {\r\n            return this.node_renderer.data_source.selection_manager;\r\n        };\r\n        return GraphRenderer;\r\n    }(data_renderer_1.DataRenderer));\r\n    exports.GraphRenderer = GraphRenderer;\r\n    GraphRenderer.__name__ = \"GraphRenderer\";\r\n    GraphRenderer.init_GraphRenderer();\r\n}\r\n","/* models\\graphs\\graph_hit_test_policy.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var GraphHitTestPolicy = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GraphHitTestPolicy, _super);\r\n        function GraphHitTestPolicy(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GraphHitTestPolicy.prototype._hit_test_nodes = function (geometry, graph_view) {\r\n            if (!graph_view.model.visible)\r\n                return null;\r\n            var hit_test_result = graph_view.node_view.glyph.hit_test(geometry);\r\n            if (hit_test_result == null)\r\n                return null;\r\n            else\r\n                return graph_view.node_view.model.view.convert_selection_from_subset(hit_test_result);\r\n        };\r\n        GraphHitTestPolicy.prototype._hit_test_edges = function (geometry, graph_view) {\r\n            if (!graph_view.model.visible)\r\n                return null;\r\n            var hit_test_result = graph_view.edge_view.glyph.hit_test(geometry);\r\n            if (hit_test_result == null)\r\n                return null;\r\n            else\r\n                return graph_view.edge_view.model.view.convert_selection_from_subset(hit_test_result);\r\n        };\r\n        return GraphHitTestPolicy;\r\n    }(model_1.Model));\r\n    exports.GraphHitTestPolicy = GraphHitTestPolicy;\r\n    GraphHitTestPolicy.__name__ = \"GraphHitTestPolicy\";\r\n    var NodesOnly = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NodesOnly, _super);\r\n        function NodesOnly(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        NodesOnly.prototype.hit_test = function (geometry, graph_view) {\r\n            return this._hit_test_nodes(geometry, graph_view);\r\n        };\r\n        NodesOnly.prototype.do_selection = function (hit_test_result, graph, final, mode) {\r\n            if (hit_test_result == null)\r\n                return false;\r\n            var node_selection = graph.node_renderer.data_source.selected;\r\n            node_selection.update(hit_test_result, final, mode);\r\n            graph.node_renderer.data_source._select.emit();\r\n            return !node_selection.is_empty();\r\n        };\r\n        NodesOnly.prototype.do_inspection = function (hit_test_result, geometry, graph_view, final, mode) {\r\n            if (hit_test_result == null)\r\n                return false;\r\n            var node_inspection = graph_view.model.get_selection_manager().get_or_create_inspector(graph_view.node_view.model);\r\n            node_inspection.update(hit_test_result, final, mode);\r\n            // silently set inspected attr to avoid triggering data_source.change event and rerender\r\n            graph_view.node_view.model.data_source.setv({ inspected: node_inspection }, { silent: true });\r\n            graph_view.node_view.model.data_source.inspect.emit([graph_view.node_view, { geometry: geometry }]);\r\n            return !node_inspection.is_empty();\r\n        };\r\n        return NodesOnly;\r\n    }(GraphHitTestPolicy));\r\n    exports.NodesOnly = NodesOnly;\r\n    NodesOnly.__name__ = \"NodesOnly\";\r\n    var NodesAndLinkedEdges = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NodesAndLinkedEdges, _super);\r\n        function NodesAndLinkedEdges(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        NodesAndLinkedEdges.prototype.hit_test = function (geometry, graph_view) {\r\n            return this._hit_test_nodes(geometry, graph_view);\r\n        };\r\n        NodesAndLinkedEdges.prototype.get_linked_edges = function (node_source, edge_source, mode) {\r\n            var e_1, _a;\r\n            var node_indices = [];\r\n            if (mode == 'selection') {\r\n                node_indices = node_source.selected.indices.map(function (i) { return node_source.data.index[i]; });\r\n            }\r\n            else if (mode == 'inspection') {\r\n                node_indices = node_source.inspected.indices.map(function (i) { return node_source.data.index[i]; });\r\n            }\r\n            var edge_indices = [];\r\n            for (var i = 0; i < edge_source.data.start.length; i++) {\r\n                if (array_1.contains(node_indices, edge_source.data.start[i]) || array_1.contains(node_indices, edge_source.data.end[i]))\r\n                    edge_indices.push(i);\r\n            }\r\n            var linked_edges = new selection_1.Selection();\r\n            try {\r\n                for (var edge_indices_1 = tslib_1.__values(edge_indices), edge_indices_1_1 = edge_indices_1.next(); !edge_indices_1_1.done; edge_indices_1_1 = edge_indices_1.next()) {\r\n                    var i = edge_indices_1_1.value;\r\n                    linked_edges.multiline_indices[i] = [0]; //currently only supports 2-element multilines, so this is all of it\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (edge_indices_1_1 && !edge_indices_1_1.done && (_a = edge_indices_1.return))\r\n                        _a.call(edge_indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            linked_edges.indices = edge_indices;\r\n            return linked_edges;\r\n        };\r\n        NodesAndLinkedEdges.prototype.do_selection = function (hit_test_result, graph, final, mode) {\r\n            if (hit_test_result == null)\r\n                return false;\r\n            var node_selection = graph.node_renderer.data_source.selected;\r\n            node_selection.update(hit_test_result, final, mode);\r\n            var edge_selection = graph.edge_renderer.data_source.selected;\r\n            var linked_edges_selection = this.get_linked_edges(graph.node_renderer.data_source, graph.edge_renderer.data_source, 'selection');\r\n            edge_selection.update(linked_edges_selection, final, mode);\r\n            graph.node_renderer.data_source._select.emit();\r\n            return !node_selection.is_empty();\r\n        };\r\n        NodesAndLinkedEdges.prototype.do_inspection = function (hit_test_result, geometry, graph_view, final, mode) {\r\n            if (hit_test_result == null)\r\n                return false;\r\n            var node_inspection = graph_view.node_view.model.data_source.selection_manager.get_or_create_inspector(graph_view.node_view.model);\r\n            node_inspection.update(hit_test_result, final, mode);\r\n            graph_view.node_view.model.data_source.setv({ inspected: node_inspection }, { silent: true });\r\n            var edge_inspection = graph_view.edge_view.model.data_source.selection_manager.get_or_create_inspector(graph_view.edge_view.model);\r\n            var linked_edges = this.get_linked_edges(graph_view.node_view.model.data_source, graph_view.edge_view.model.data_source, 'inspection');\r\n            edge_inspection.update(linked_edges, final, mode);\r\n            //silently set inspected attr to avoid triggering data_source.change event and rerender\r\n            graph_view.edge_view.model.data_source.setv({ inspected: edge_inspection }, { silent: true });\r\n            graph_view.node_view.model.data_source.inspect.emit([graph_view.node_view, { geometry: geometry }]);\r\n            return !node_inspection.is_empty();\r\n        };\r\n        return NodesAndLinkedEdges;\r\n    }(GraphHitTestPolicy));\r\n    exports.NodesAndLinkedEdges = NodesAndLinkedEdges;\r\n    NodesAndLinkedEdges.__name__ = \"NodesAndLinkedEdges\";\r\n    var EdgesAndLinkedNodes = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EdgesAndLinkedNodes, _super);\r\n        function EdgesAndLinkedNodes(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        EdgesAndLinkedNodes.prototype.hit_test = function (geometry, graph_view) {\r\n            return this._hit_test_edges(geometry, graph_view);\r\n        };\r\n        EdgesAndLinkedNodes.prototype.get_linked_nodes = function (node_source, edge_source, mode) {\r\n            var e_2, _a;\r\n            var edge_indices = [];\r\n            if (mode == 'selection')\r\n                edge_indices = edge_source.selected.indices;\r\n            else if (mode == 'inspection')\r\n                edge_indices = edge_source.inspected.indices;\r\n            var nodes = [];\r\n            try {\r\n                for (var edge_indices_2 = tslib_1.__values(edge_indices), edge_indices_2_1 = edge_indices_2.next(); !edge_indices_2_1.done; edge_indices_2_1 = edge_indices_2.next()) {\r\n                    var i = edge_indices_2_1.value;\r\n                    nodes.push(edge_source.data.start[i]);\r\n                    nodes.push(edge_source.data.end[i]);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (edge_indices_2_1 && !edge_indices_2_1.done && (_a = edge_indices_2.return))\r\n                        _a.call(edge_indices_2);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            var node_indices = array_1.uniq(nodes).map(function (i) { return arrayable_1.indexOf(node_source.data.index, i); });\r\n            return new selection_1.Selection({ indices: node_indices });\r\n        };\r\n        EdgesAndLinkedNodes.prototype.do_selection = function (hit_test_result, graph, final, mode) {\r\n            if (hit_test_result == null)\r\n                return false;\r\n            var edge_selection = graph.edge_renderer.data_source.selected;\r\n            edge_selection.update(hit_test_result, final, mode);\r\n            var node_selection = graph.node_renderer.data_source.selected;\r\n            var linked_nodes = this.get_linked_nodes(graph.node_renderer.data_source, graph.edge_renderer.data_source, 'selection');\r\n            node_selection.update(linked_nodes, final, mode);\r\n            graph.edge_renderer.data_source._select.emit();\r\n            return !edge_selection.is_empty();\r\n        };\r\n        EdgesAndLinkedNodes.prototype.do_inspection = function (hit_test_result, geometry, graph_view, final, mode) {\r\n            if (hit_test_result == null)\r\n                return false;\r\n            var edge_inspection = graph_view.edge_view.model.data_source.selection_manager.get_or_create_inspector(graph_view.edge_view.model);\r\n            edge_inspection.update(hit_test_result, final, mode);\r\n            graph_view.edge_view.model.data_source.setv({ inspected: edge_inspection }, { silent: true });\r\n            var node_inspection = graph_view.node_view.model.data_source.selection_manager.get_or_create_inspector(graph_view.node_view.model);\r\n            var linked_nodes = this.get_linked_nodes(graph_view.node_view.model.data_source, graph_view.edge_view.model.data_source, 'inspection');\r\n            node_inspection.update(linked_nodes, final, mode);\r\n            // silently set inspected attr to avoid triggering data_source.change event and rerender\r\n            graph_view.node_view.model.data_source.setv({ inspected: node_inspection }, { silent: true });\r\n            graph_view.edge_view.model.data_source.inspect.emit([graph_view.edge_view, { geometry: geometry }]);\r\n            return !edge_inspection.is_empty();\r\n        };\r\n        return EdgesAndLinkedNodes;\r\n    }(GraphHitTestPolicy));\r\n    exports.EdgesAndLinkedNodes = EdgesAndLinkedNodes;\r\n    EdgesAndLinkedNodes.__name__ = \"EdgesAndLinkedNodes\";\r\n}\r\n","/* models\\selections\\interaction_policy.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var SelectionPolicy = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SelectionPolicy, _super);\r\n        function SelectionPolicy() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SelectionPolicy.prototype.do_selection = function (hit_test_result, source, final, mode) {\r\n            if (hit_test_result === null) {\r\n                return false;\r\n            }\r\n            else {\r\n                source.selected.update(hit_test_result, final, mode);\r\n                source._select.emit();\r\n                return !source.selected.is_empty();\r\n            }\r\n        };\r\n        return SelectionPolicy;\r\n    }(model_1.Model));\r\n    exports.SelectionPolicy = SelectionPolicy;\r\n    SelectionPolicy.__name__ = \"SelectionPolicy\";\r\n    var IntersectRenderers = /** @class */ (function (_super) {\r\n        tslib_1.__extends(IntersectRenderers, _super);\r\n        function IntersectRenderers() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        IntersectRenderers.prototype.hit_test = function (geometry, renderer_views) {\r\n            var e_1, _a, e_2, _b;\r\n            var hit_test_result_renderers = [];\r\n            try {\r\n                for (var renderer_views_1 = tslib_1.__values(renderer_views), renderer_views_1_1 = renderer_views_1.next(); !renderer_views_1_1.done; renderer_views_1_1 = renderer_views_1.next()) {\r\n                    var r = renderer_views_1_1.value;\r\n                    var result = r.hit_test(geometry);\r\n                    if (result !== null)\r\n                        hit_test_result_renderers.push(result);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderer_views_1_1 && !renderer_views_1_1.done && (_a = renderer_views_1.return))\r\n                        _a.call(renderer_views_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            if (hit_test_result_renderers.length > 0) {\r\n                var hit_test_result = hit_test_result_renderers[0];\r\n                try {\r\n                    for (var hit_test_result_renderers_1 = tslib_1.__values(hit_test_result_renderers), hit_test_result_renderers_1_1 = hit_test_result_renderers_1.next(); !hit_test_result_renderers_1_1.done; hit_test_result_renderers_1_1 = hit_test_result_renderers_1.next()) {\r\n                        var hit_test_result_other = hit_test_result_renderers_1_1.value;\r\n                        hit_test_result.update_through_intersection(hit_test_result_other);\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (hit_test_result_renderers_1_1 && !hit_test_result_renderers_1_1.done && (_b = hit_test_result_renderers_1.return))\r\n                            _b.call(hit_test_result_renderers_1);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n                return hit_test_result;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        return IntersectRenderers;\r\n    }(SelectionPolicy));\r\n    exports.IntersectRenderers = IntersectRenderers;\r\n    IntersectRenderers.__name__ = \"IntersectRenderers\";\r\n    var UnionRenderers = /** @class */ (function (_super) {\r\n        tslib_1.__extends(UnionRenderers, _super);\r\n        function UnionRenderers() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        UnionRenderers.prototype.hit_test = function (geometry, renderer_views) {\r\n            var e_3, _a, e_4, _b;\r\n            var hit_test_result_renderers = [];\r\n            try {\r\n                for (var renderer_views_2 = tslib_1.__values(renderer_views), renderer_views_2_1 = renderer_views_2.next(); !renderer_views_2_1.done; renderer_views_2_1 = renderer_views_2.next()) {\r\n                    var r = renderer_views_2_1.value;\r\n                    var result = r.hit_test(geometry);\r\n                    if (result !== null)\r\n                        hit_test_result_renderers.push(result);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderer_views_2_1 && !renderer_views_2_1.done && (_a = renderer_views_2.return))\r\n                        _a.call(renderer_views_2);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            if (hit_test_result_renderers.length > 0) {\r\n                var hit_test_result = hit_test_result_renderers[0];\r\n                try {\r\n                    for (var hit_test_result_renderers_2 = tslib_1.__values(hit_test_result_renderers), hit_test_result_renderers_2_1 = hit_test_result_renderers_2.next(); !hit_test_result_renderers_2_1.done; hit_test_result_renderers_2_1 = hit_test_result_renderers_2.next()) {\r\n                        var hit_test_result_other = hit_test_result_renderers_2_1.value;\r\n                        hit_test_result.update_through_union(hit_test_result_other);\r\n                    }\r\n                }\r\n                catch (e_4_1) {\r\n                    e_4 = { error: e_4_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (hit_test_result_renderers_2_1 && !hit_test_result_renderers_2_1.done && (_b = hit_test_result_renderers_2.return))\r\n                            _b.call(hit_test_result_renderers_2);\r\n                    }\r\n                    finally {\r\n                        if (e_4)\r\n                            throw e_4.error;\r\n                    }\r\n                }\r\n                return hit_test_result;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        return UnionRenderers;\r\n    }(SelectionPolicy));\r\n    exports.UnionRenderers = UnionRenderers;\r\n    UnionRenderers.__name__ = \"UnionRenderers\";\r\n}\r\n","/* core\\util\\typed_array.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    function concat(array0) {\r\n        var e_1, _a, e_2, _b;\r\n        var arrays = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            arrays[_i - 1] = arguments[_i];\r\n        }\r\n        var n = array0.length;\r\n        try {\r\n            for (var arrays_1 = tslib_1.__values(arrays), arrays_1_1 = arrays_1.next(); !arrays_1_1.done; arrays_1_1 = arrays_1.next()) {\r\n                var array = arrays_1_1.value;\r\n                n += array.length;\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (arrays_1_1 && !arrays_1_1.done && (_a = arrays_1.return))\r\n                    _a.call(arrays_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        var result = new array0.constructor(n);\r\n        result.set(array0, 0);\r\n        var i = array0.length;\r\n        try {\r\n            for (var arrays_2 = tslib_1.__values(arrays), arrays_2_1 = arrays_2.next(); !arrays_2_1.done; arrays_2_1 = arrays_2.next()) {\r\n                var array = arrays_2_1.value;\r\n                result.set(array, i);\r\n                i += array.length;\r\n            }\r\n        }\r\n        catch (e_2_1) {\r\n            e_2 = { error: e_2_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (arrays_2_1 && !arrays_2_1.done && (_b = arrays_2.return))\r\n                    _b.call(arrays_2);\r\n            }\r\n            finally {\r\n                if (e_2)\r\n                    throw e_2.error;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.concat = concat;\r\n}\r\n","/* core\\util\\set.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    function union() {\r\n        var e_1, _a, e_2, _b;\r\n        var sets = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            sets[_i] = arguments[_i];\r\n        }\r\n        var result = new Set();\r\n        try {\r\n            for (var sets_1 = tslib_1.__values(sets), sets_1_1 = sets_1.next(); !sets_1_1.done; sets_1_1 = sets_1.next()) {\r\n                var set = sets_1_1.value;\r\n                try {\r\n                    for (var set_1 = (e_2 = void 0, tslib_1.__values(set)), set_1_1 = set_1.next(); !set_1_1.done; set_1_1 = set_1.next()) {\r\n                        var item = set_1_1.value;\r\n                        result.add(item);\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (set_1_1 && !set_1_1.done && (_b = set_1.return))\r\n                            _b.call(set_1);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (sets_1_1 && !sets_1_1.done && (_a = sets_1.return))\r\n                    _a.call(sets_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.union = union;\r\n    function intersection(set) {\r\n        var e_3, _a, e_4, _b;\r\n        var sets = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            sets[_i - 1] = arguments[_i];\r\n        }\r\n        var result = new Set();\r\n        try {\r\n            top: for (var set_2 = tslib_1.__values(set), set_2_1 = set_2.next(); !set_2_1.done; set_2_1 = set_2.next()) {\r\n                var item = set_2_1.value;\r\n                try {\r\n                    for (var sets_2 = (e_4 = void 0, tslib_1.__values(sets)), sets_2_1 = sets_2.next(); !sets_2_1.done; sets_2_1 = sets_2.next()) {\r\n                        var other = sets_2_1.value;\r\n                        if (!other.has(item))\r\n                            continue top;\r\n                    }\r\n                }\r\n                catch (e_4_1) {\r\n                    e_4 = { error: e_4_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (sets_2_1 && !sets_2_1.done && (_b = sets_2.return))\r\n                            _b.call(sets_2);\r\n                    }\r\n                    finally {\r\n                        if (e_4)\r\n                            throw e_4.error;\r\n                    }\r\n                }\r\n                result.add(item);\r\n            }\r\n        }\r\n        catch (e_3_1) {\r\n            e_3 = { error: e_3_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (set_2_1 && !set_2_1.done && (_a = set_2.return))\r\n                    _a.call(set_2);\r\n            }\r\n            finally {\r\n                if (e_3)\r\n                    throw e_3.error;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.intersection = intersection;\r\n    function difference(set) {\r\n        var e_5, _a;\r\n        var sets = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            sets[_i - 1] = arguments[_i];\r\n        }\r\n        var result = new Set(set);\r\n        try {\r\n            for (var _b = tslib_1.__values(union.apply(void 0, tslib_1.__spread(sets))), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var item = _c.value;\r\n                result.delete(item);\r\n            }\r\n        }\r\n        catch (e_5_1) {\r\n            e_5 = { error: e_5_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return))\r\n                    _a.call(_b);\r\n            }\r\n            finally {\r\n                if (e_5)\r\n                    throw e_5.error;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.difference = difference;\r\n}\r\n","/* document\\events.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var has_props_1 = require(129) /* ../core/has_props */;\r\n    var DocumentEvent = /** @class */ (function () {\r\n        function DocumentEvent(document) {\r\n            this.document = document;\r\n        }\r\n        return DocumentEvent;\r\n    }());\r\n    exports.DocumentEvent = DocumentEvent;\r\n    DocumentEvent.__name__ = \"DocumentEvent\";\r\n    var DocumentEventBatch = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DocumentEventBatch, _super);\r\n        function DocumentEventBatch(document, events, setter_id) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.events = events;\r\n            _this.setter_id = setter_id;\r\n            return _this;\r\n        }\r\n        return DocumentEventBatch;\r\n    }(DocumentEvent));\r\n    exports.DocumentEventBatch = DocumentEventBatch;\r\n    DocumentEventBatch.__name__ = \"DocumentEventBatch\";\r\n    var DocumentChangedEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DocumentChangedEvent, _super);\r\n        function DocumentChangedEvent() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return DocumentChangedEvent;\r\n    }(DocumentEvent));\r\n    exports.DocumentChangedEvent = DocumentChangedEvent;\r\n    DocumentChangedEvent.__name__ = \"DocumentChangedEvent\";\r\n    var MessageSentEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MessageSentEvent, _super);\r\n        function MessageSentEvent(document, msg_type, msg_data) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.msg_type = msg_type;\r\n            _this.msg_data = msg_data;\r\n            return _this;\r\n        }\r\n        MessageSentEvent.prototype.json = function (_references) {\r\n            var value = this.msg_data;\r\n            var value_json = has_props_1.HasProps._value_to_json(value);\r\n            var value_refs = new Set();\r\n            has_props_1.HasProps._value_record_references(value, value_refs, { recursive: true });\r\n            /* XXX: this will cause all referenced models to be reinitialized\r\n            for (const id in value_refs) {\r\n              references[id] = value_refs[id]\r\n            }\r\n            */\r\n            return {\r\n                kind: \"MessageSent\",\r\n                msg_type: this.msg_type,\r\n                msg_data: value_json,\r\n            };\r\n        };\r\n        return MessageSentEvent;\r\n    }(DocumentChangedEvent));\r\n    exports.MessageSentEvent = MessageSentEvent;\r\n    MessageSentEvent.__name__ = \"MessageSentEvent\";\r\n    var ModelChangedEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ModelChangedEvent, _super);\r\n        function ModelChangedEvent(document, model, attr, old, new_, setter_id, hint) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.model = model;\r\n            _this.attr = attr;\r\n            _this.old = old;\r\n            _this.new_ = new_;\r\n            _this.setter_id = setter_id;\r\n            _this.hint = hint;\r\n            return _this;\r\n        }\r\n        ModelChangedEvent.prototype.json = function (references) {\r\n            var e_1, _a;\r\n            if (this.attr === \"id\") {\r\n                throw new Error(\"'id' field should never change, whatever code just set it is wrong\");\r\n            }\r\n            if (this.hint != null)\r\n                return this.hint.json(references);\r\n            var value = this.new_;\r\n            var value_json = has_props_1.HasProps._value_to_json(value);\r\n            var value_refs = new Set();\r\n            has_props_1.HasProps._value_record_references(value, value_refs, { recursive: true });\r\n            if (value_refs.has(this.model) && this.model !== value) {\r\n                // we know we don't want a whole new copy of the obj we're\r\n                // patching unless it's also the value itself\r\n                value_refs.delete(this.model);\r\n            }\r\n            try {\r\n                for (var value_refs_1 = tslib_1.__values(value_refs), value_refs_1_1 = value_refs_1.next(); !value_refs_1_1.done; value_refs_1_1 = value_refs_1.next()) {\r\n                    var ref = value_refs_1_1.value;\r\n                    references.add(ref);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (value_refs_1_1 && !value_refs_1_1.done && (_a = value_refs_1.return))\r\n                        _a.call(value_refs_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return {\r\n                kind: \"ModelChanged\",\r\n                model: this.model.ref(),\r\n                attr: this.attr,\r\n                new: value_json,\r\n            };\r\n        };\r\n        return ModelChangedEvent;\r\n    }(DocumentChangedEvent));\r\n    exports.ModelChangedEvent = ModelChangedEvent;\r\n    ModelChangedEvent.__name__ = \"ModelChangedEvent\";\r\n    var ColumnsPatchedEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColumnsPatchedEvent, _super);\r\n        function ColumnsPatchedEvent(document, column_source, patches) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.column_source = column_source;\r\n            _this.patches = patches;\r\n            return _this;\r\n        }\r\n        ColumnsPatchedEvent.prototype.json = function (_references) {\r\n            return {\r\n                kind: \"ColumnsPatched\",\r\n                column_source: this.column_source,\r\n                patches: this.patches,\r\n            };\r\n        };\r\n        return ColumnsPatchedEvent;\r\n    }(DocumentChangedEvent));\r\n    exports.ColumnsPatchedEvent = ColumnsPatchedEvent;\r\n    ColumnsPatchedEvent.__name__ = \"ColumnsPatchedEvent\";\r\n    var ColumnsStreamedEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColumnsStreamedEvent, _super);\r\n        function ColumnsStreamedEvent(document, column_source, data, rollover) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.column_source = column_source;\r\n            _this.data = data;\r\n            _this.rollover = rollover;\r\n            return _this;\r\n        }\r\n        ColumnsStreamedEvent.prototype.json = function (_references) {\r\n            return {\r\n                kind: \"ColumnsStreamed\",\r\n                column_source: this.column_source,\r\n                data: this.data,\r\n                rollover: this.rollover,\r\n            };\r\n        };\r\n        return ColumnsStreamedEvent;\r\n    }(DocumentChangedEvent));\r\n    exports.ColumnsStreamedEvent = ColumnsStreamedEvent;\r\n    ColumnsStreamedEvent.__name__ = \"ColumnsStreamedEvent\";\r\n    var TitleChangedEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TitleChangedEvent, _super);\r\n        function TitleChangedEvent(document, title, setter_id) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.title = title;\r\n            _this.setter_id = setter_id;\r\n            return _this;\r\n        }\r\n        TitleChangedEvent.prototype.json = function (_references) {\r\n            return {\r\n                kind: \"TitleChanged\",\r\n                title: this.title,\r\n            };\r\n        };\r\n        return TitleChangedEvent;\r\n    }(DocumentChangedEvent));\r\n    exports.TitleChangedEvent = TitleChangedEvent;\r\n    TitleChangedEvent.__name__ = \"TitleChangedEvent\";\r\n    var RootAddedEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RootAddedEvent, _super);\r\n        function RootAddedEvent(document, model, setter_id) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.model = model;\r\n            _this.setter_id = setter_id;\r\n            return _this;\r\n        }\r\n        RootAddedEvent.prototype.json = function (references) {\r\n            has_props_1.HasProps._value_record_references(this.model, references, { recursive: true });\r\n            return {\r\n                kind: \"RootAdded\",\r\n                model: this.model.ref(),\r\n            };\r\n        };\r\n        return RootAddedEvent;\r\n    }(DocumentChangedEvent));\r\n    exports.RootAddedEvent = RootAddedEvent;\r\n    RootAddedEvent.__name__ = \"RootAddedEvent\";\r\n    var RootRemovedEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RootRemovedEvent, _super);\r\n        function RootRemovedEvent(document, model, setter_id) {\r\n            var _this = _super.call(this, document) || this;\r\n            _this.model = model;\r\n            _this.setter_id = setter_id;\r\n            return _this;\r\n        }\r\n        RootRemovedEvent.prototype.json = function (_references) {\r\n            return {\r\n                kind: \"RootRemoved\",\r\n                model: this.model.ref(),\r\n            };\r\n        };\r\n        return RootRemovedEvent;\r\n    }(DocumentChangedEvent));\r\n    exports.RootRemovedEvent = RootRemovedEvent;\r\n    RootRemovedEvent.__name__ = \"RootRemovedEvent\";\r\n}\r\n","/* models\\annotations\\band.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var upper_lower_1 = require(238) /* ./upper_lower */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var BandView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BandView, _super);\r\n        function BandView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BandView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            var update = function () { return _this.set_data(_this.model.source); };\r\n            this.connect(this.model.change, update);\r\n            this.connect(this.model.source.streaming, update);\r\n            this.connect(this.model.source.patching, update);\r\n            this.connect(this.model.source.change, update);\r\n        };\r\n        BandView.prototype._render = function () {\r\n            this._map_data();\r\n            var ctx = this.layer.ctx;\r\n            // Draw the band body\r\n            ctx.beginPath();\r\n            ctx.moveTo(this._lower_sx[0], this._lower_sy[0]);\r\n            for (var i = 0, end = this._lower_sx.length; i < end; i++) {\r\n                ctx.lineTo(this._lower_sx[i], this._lower_sy[i]);\r\n            }\r\n            // iterate backwards so that the upper end is below the lower start\r\n            for (var i = this._upper_sx.length - 1; i >= 0; i--) {\r\n                ctx.lineTo(this._upper_sx[i], this._upper_sy[i]);\r\n            }\r\n            ctx.closePath();\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_value(ctx);\r\n                ctx.fill();\r\n            }\r\n            // Draw the lower band edge\r\n            ctx.beginPath();\r\n            ctx.moveTo(this._lower_sx[0], this._lower_sy[0]);\r\n            for (var i = 0, end = this._lower_sx.length; i < end; i++) {\r\n                ctx.lineTo(this._lower_sx[i], this._lower_sy[i]);\r\n            }\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_value(ctx);\r\n                ctx.stroke();\r\n            }\r\n            // Draw the upper band edge\r\n            ctx.beginPath();\r\n            ctx.moveTo(this._upper_sx[0], this._upper_sy[0]);\r\n            for (var i = 0, end = this._upper_sx.length; i < end; i++) {\r\n                ctx.lineTo(this._upper_sx[i], this._upper_sy[i]);\r\n            }\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_value(ctx);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        return BandView;\r\n    }(upper_lower_1.UpperLowerView));\r\n    exports.BandView = BandView;\r\n    BandView.__name__ = \"BandView\";\r\n    var Band = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Band, _super);\r\n        function Band(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Band.init_Band = function () {\r\n            this.prototype.default_view = BandView;\r\n            this.mixins([mixins.Line /*Scalar*/, mixins.Fill /*Scalar*/]);\r\n            this.override({\r\n                fill_color: \"#fff9ba\",\r\n                fill_alpha: 0.4,\r\n                line_color: \"#cccccc\",\r\n                line_alpha: 0.3,\r\n            });\r\n        };\r\n        return Band;\r\n    }(upper_lower_1.UpperLower));\r\n    exports.Band = Band;\r\n    Band.__name__ = \"Band\";\r\n    Band.init_Band();\r\n}\r\n","/* models\\annotations\\upper_lower.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var column_data_source_1 = require(200) /* ../sources/column_data_source */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var UpperLowerView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(UpperLowerView, _super);\r\n        function UpperLowerView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        UpperLowerView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.set_data(this.model.source);\r\n        };\r\n        UpperLowerView.prototype.set_data = function (source) {\r\n            _super.prototype.set_data.call(this, source);\r\n            this.visuals.warm_cache(source);\r\n            this.plot_view.request_render();\r\n        };\r\n        UpperLowerView.prototype._map_data = function () {\r\n            var frame = this.plot_view.frame;\r\n            var dim = this.model.dimension;\r\n            var xscale = this.coordinates.x_scale;\r\n            var yscale = this.coordinates.y_scale;\r\n            var limit_scale = dim == \"height\" ? yscale : xscale;\r\n            var base_scale = dim == \"height\" ? xscale : yscale;\r\n            var limit_view = dim == \"height\" ? frame.yview : frame.xview;\r\n            var base_view = dim == \"height\" ? frame.xview : frame.yview;\r\n            var _lower_sx;\r\n            if (this.model.properties.lower.units == \"data\")\r\n                _lower_sx = limit_scale.v_compute(this._lower);\r\n            else\r\n                _lower_sx = limit_view.v_compute(this._lower);\r\n            var _upper_sx;\r\n            if (this.model.properties.upper.units == \"data\")\r\n                _upper_sx = limit_scale.v_compute(this._upper);\r\n            else\r\n                _upper_sx = limit_view.v_compute(this._upper);\r\n            var _base_sx;\r\n            if (this.model.properties.base.units == \"data\")\r\n                _base_sx = base_scale.v_compute(this._base);\r\n            else\r\n                _base_sx = base_view.v_compute(this._base);\r\n            var _a = tslib_1.__read(dim == 'height' ? [1, 0] : [0, 1], 2), i = _a[0], j = _a[1];\r\n            var _lower = [_lower_sx, _base_sx];\r\n            var _upper = [_upper_sx, _base_sx];\r\n            this._lower_sx = _lower[i];\r\n            this._lower_sy = _lower[j];\r\n            this._upper_sx = _upper[i];\r\n            this._upper_sy = _upper[j];\r\n        };\r\n        return UpperLowerView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.UpperLowerView = UpperLowerView;\r\n    UpperLowerView.__name__ = \"UpperLowerView\";\r\n    var UpperLower = /** @class */ (function (_super) {\r\n        tslib_1.__extends(UpperLower, _super);\r\n        function UpperLower(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        UpperLower.init_UpperLower = function () {\r\n            this.define({\r\n                lower: [p.DistanceSpec],\r\n                upper: [p.DistanceSpec],\r\n                base: [p.DistanceSpec],\r\n                dimension: [p.Dimension, 'height'],\r\n                source: [p.Instance, function () { return new column_data_source_1.ColumnDataSource(); }],\r\n            });\r\n        };\r\n        return UpperLower;\r\n    }(annotation_1.Annotation));\r\n    exports.UpperLower = UpperLower;\r\n    UpperLower.__name__ = \"UpperLower\";\r\n    UpperLower.init_UpperLower();\r\n}\r\n","/* models\\annotations\\box_annotation.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var bbox_1 = require(194) /* ../../core/util/bbox */;\r\n    exports.EDGE_TOLERANCE = 2.5;\r\n    var BoxAnnotationView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxAnnotationView, _super);\r\n        function BoxAnnotationView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BoxAnnotationView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.plot_view.request_paint(_this); });\r\n            this.connect(this.model.data_update, function () { return _this.plot_view.request_paint(_this); });\r\n        };\r\n        BoxAnnotationView.prototype._render = function () {\r\n            var _this = this;\r\n            // don't render if *all* position are null\r\n            if (this.model.left == null && this.model.right == null && this.model.top == null && this.model.bottom == null) {\r\n                return;\r\n            }\r\n            var frame = this.plot_view.frame;\r\n            var xscale = this.coordinates.x_scale;\r\n            var yscale = this.coordinates.y_scale;\r\n            var _calc_dim = function (dim, dim_units, scale, view, frame_extrema) {\r\n                var sdim;\r\n                if (dim != null) {\r\n                    if (_this.model.screen)\r\n                        sdim = dim;\r\n                    else {\r\n                        if (dim_units == 'data')\r\n                            sdim = scale.compute(dim);\r\n                        else\r\n                            sdim = view.compute(dim);\r\n                    }\r\n                }\r\n                else\r\n                    sdim = frame_extrema;\r\n                return sdim;\r\n            };\r\n            this.sleft = _calc_dim(this.model.left, this.model.left_units, xscale, frame.xview, frame.bbox.left);\r\n            this.sright = _calc_dim(this.model.right, this.model.right_units, xscale, frame.xview, frame.bbox.right);\r\n            this.stop = _calc_dim(this.model.top, this.model.top_units, yscale, frame.yview, frame.bbox.top);\r\n            this.sbottom = _calc_dim(this.model.bottom, this.model.bottom_units, yscale, frame.yview, frame.bbox.bottom);\r\n            this._paint_box(this.sleft, this.sright, this.sbottom, this.stop);\r\n        };\r\n        BoxAnnotationView.prototype._paint_box = function (sleft, sright, sbottom, stop) {\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.rect(sleft, stop, sright - sleft, sbottom - stop);\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_value(ctx);\r\n                ctx.fill();\r\n            }\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_value(ctx);\r\n                ctx.stroke();\r\n            }\r\n            ctx.restore();\r\n        };\r\n        BoxAnnotationView.prototype.interactive_bbox = function () {\r\n            var tol = this.model.properties.line_width.value() + exports.EDGE_TOLERANCE;\r\n            return new bbox_1.BBox({\r\n                x0: this.sleft - tol,\r\n                y0: this.stop - tol,\r\n                x1: this.sright + tol,\r\n                y1: this.sbottom + tol,\r\n            });\r\n        };\r\n        BoxAnnotationView.prototype.interactive_hit = function (sx, sy) {\r\n            if (this.model.in_cursor == null)\r\n                return false;\r\n            var bbox = this.interactive_bbox();\r\n            return bbox.contains(sx, sy);\r\n        };\r\n        BoxAnnotationView.prototype.cursor = function (sx, sy) {\r\n            var tol = 3;\r\n            if (Math.abs(sx - this.sleft) < tol || Math.abs(sx - this.sright) < tol)\r\n                return this.model.ew_cursor;\r\n            else if (Math.abs(sy - this.sbottom) < tol || Math.abs(sy - this.stop) < tol)\r\n                return this.model.ns_cursor;\r\n            else if (sx > this.sleft && sx < this.sright && sy > this.stop && sy < this.sbottom)\r\n                return this.model.in_cursor;\r\n            else\r\n                return null;\r\n        };\r\n        return BoxAnnotationView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.BoxAnnotationView = BoxAnnotationView;\r\n    BoxAnnotationView.__name__ = \"BoxAnnotationView\";\r\n    var BoxAnnotation = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxAnnotation, _super);\r\n        function BoxAnnotation(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        BoxAnnotation.init_BoxAnnotation = function () {\r\n            this.prototype.default_view = BoxAnnotationView;\r\n            this.mixins([mixins.Line /*Scalar*/, mixins.Fill /*Scalar*/]);\r\n            this.define({\r\n                render_mode: [p.RenderMode, 'canvas'],\r\n                top: [p.Number, null],\r\n                top_units: [p.SpatialUnits, 'data'],\r\n                bottom: [p.Number, null],\r\n                bottom_units: [p.SpatialUnits, 'data'],\r\n                left: [p.Number, null],\r\n                left_units: [p.SpatialUnits, 'data'],\r\n                right: [p.Number, null],\r\n                right_units: [p.SpatialUnits, 'data'],\r\n            });\r\n            this.internal({\r\n                screen: [p.Boolean, false],\r\n                ew_cursor: [p.String, null],\r\n                ns_cursor: [p.String, null],\r\n                in_cursor: [p.String, null],\r\n            });\r\n            this.override({\r\n                fill_color: '#fff9ba',\r\n                fill_alpha: 0.4,\r\n                line_color: '#cccccc',\r\n                line_alpha: 0.3,\r\n            });\r\n        };\r\n        BoxAnnotation.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.data_update = new signaling_1.Signal0(this, \"data_update\");\r\n        };\r\n        BoxAnnotation.prototype.update = function (_a) {\r\n            var left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n            this.setv({ left: left, right: right, top: top, bottom: bottom, screen: true }, { silent: true });\r\n            this.data_update.emit();\r\n        };\r\n        return BoxAnnotation;\r\n    }(annotation_1.Annotation));\r\n    exports.BoxAnnotation = BoxAnnotation;\r\n    BoxAnnotation.__name__ = \"BoxAnnotation\";\r\n    BoxAnnotation.init_BoxAnnotation();\r\n}\r\n","/* models\\annotations\\color_bar.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var basic_ticker_1 = require(241) /* ../tickers/basic_ticker */;\r\n    var basic_tick_formatter_1 = require(245) /* ../formatters/basic_tick_formatter */;\r\n    var mappers_1 = require(247) /* ../mappers */;\r\n    var linear_scale_1 = require(260) /* ../scales/linear_scale */;\r\n    var linear_interpolation_scale_1 = require(271) /* ../scales/linear_interpolation_scale */;\r\n    var log_scale_1 = require(272) /* ../scales/log_scale */;\r\n    var range1d_1 = require(273) /* ../ranges/range1d */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var text_util = tslib_1.__importStar(require(274) /* ../../core/util/text */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var SHORT_DIM = 25;\r\n    var LONG_DIM_MIN_SCALAR = 0.3;\r\n    var LONG_DIM_MAX_SCALAR = 0.8;\r\n    var ColorBarView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColorBarView, _super);\r\n        function ColorBarView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ColorBarView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._set_canvas_image();\r\n        };\r\n        ColorBarView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.ticker.change, function () { return _this.plot_view.request_render(); });\r\n            this.connect(this.model.formatter.change, function () { return _this.plot_view.request_render(); });\r\n            if (this.model.color_mapper != null) {\r\n                this.connect(this.model.color_mapper.change, function () {\r\n                    _this._set_canvas_image();\r\n                    _this.plot_view.request_render();\r\n                });\r\n            }\r\n        };\r\n        ColorBarView.prototype._get_size = function () {\r\n            if (this.model.color_mapper == null)\r\n                return { width: 0, height: 0 };\r\n            else {\r\n                var _a = this.compute_legend_dimensions(), width = _a.width, height = _a.height;\r\n                return { width: width, height: height };\r\n            }\r\n        };\r\n        ColorBarView.prototype._set_canvas_image = function () {\r\n            var _a, _b;\r\n            if (this.model.color_mapper == null)\r\n                return;\r\n            var palette = this.model.color_mapper.palette;\r\n            if (this.model.orientation == 'vertical')\r\n                palette = array_1.reversed(palette);\r\n            var w, h;\r\n            switch (this.model.orientation) {\r\n                case \"vertical\": {\r\n                    _a = tslib_1.__read([1, palette.length], 2), w = _a[0], h = _a[1];\r\n                    break;\r\n                }\r\n                case \"horizontal\": {\r\n                    _b = tslib_1.__read([palette.length, 1], 2), w = _b[0], h = _b[1];\r\n                    break;\r\n                }\r\n            }\r\n            var canvas = document.createElement('canvas');\r\n            canvas.width = w;\r\n            canvas.height = h;\r\n            var image_ctx = canvas.getContext('2d');\r\n            var image_data = image_ctx.getImageData(0, 0, w, h);\r\n            // We always want to draw the entire palette linearly, so we create a new\r\n            // LinearColorMapper instance and map a monotonic range of values with\r\n            // length = palette.length to get each palette color in order.\r\n            var cmap = new mappers_1.LinearColorMapper({ palette: palette }).rgba_mapper;\r\n            var buf8 = cmap.v_compute(array_1.range(0, palette.length));\r\n            image_data.data.set(buf8);\r\n            image_ctx.putImageData(image_data, 0, 0);\r\n            this.image = canvas;\r\n        };\r\n        ColorBarView.prototype.compute_legend_dimensions = function () {\r\n            var image_dimensions = this._computed_image_dimensions();\r\n            var _a = tslib_1.__read([image_dimensions.height, image_dimensions.width], 2), image_height = _a[0], image_width = _a[1];\r\n            var label_extent = this._get_label_extent();\r\n            var title_extent = this._title_extent();\r\n            var tick_extent = this._tick_extent();\r\n            var padding = this.model.padding;\r\n            var legend_height, legend_width;\r\n            switch (this.model.orientation) {\r\n                case \"vertical\":\r\n                    legend_height = image_height + title_extent + 2 * padding;\r\n                    legend_width = image_width + tick_extent + label_extent + 2 * padding;\r\n                    break;\r\n                case \"horizontal\":\r\n                    legend_height = image_height + title_extent + tick_extent + label_extent + 2 * padding;\r\n                    legend_width = image_width + 2 * padding;\r\n                    break;\r\n            }\r\n            return { width: legend_width, height: legend_height };\r\n        };\r\n        ColorBarView.prototype.compute_legend_location = function () {\r\n            var legend_dimensions = this.compute_legend_dimensions();\r\n            var _a = tslib_1.__read([legend_dimensions.height, legend_dimensions.width], 2), legend_height = _a[0], legend_width = _a[1];\r\n            var legend_margin = this.model.margin;\r\n            var panel = this.panel != null ? this.panel : this.plot_view.frame;\r\n            var _b = tslib_1.__read(panel.bbox.ranges, 2), hr = _b[0], vr = _b[1];\r\n            var location = this.model.location;\r\n            var sx, sy;\r\n            if (types_1.isString(location)) {\r\n                switch (location) {\r\n                    case 'top_left':\r\n                        sx = hr.start + legend_margin;\r\n                        sy = vr.start + legend_margin;\r\n                        break;\r\n                    case 'top_center':\r\n                        sx = (hr.end + hr.start) / 2 - legend_width / 2;\r\n                        sy = vr.start + legend_margin;\r\n                        break;\r\n                    case 'top_right':\r\n                        sx = hr.end - legend_margin - legend_width;\r\n                        sy = vr.start + legend_margin;\r\n                        break;\r\n                    case 'bottom_right':\r\n                        sx = hr.end - legend_margin - legend_width;\r\n                        sy = vr.end - legend_margin - legend_height;\r\n                        break;\r\n                    case 'bottom_center':\r\n                        sx = (hr.end + hr.start) / 2 - legend_width / 2;\r\n                        sy = vr.end - legend_margin - legend_height;\r\n                        break;\r\n                    case 'bottom_left':\r\n                        sx = hr.start + legend_margin;\r\n                        sy = vr.end - legend_margin - legend_height;\r\n                        break;\r\n                    case 'center_left':\r\n                        sx = hr.start + legend_margin;\r\n                        sy = (vr.end + vr.start) / 2 - legend_height / 2;\r\n                        break;\r\n                    case 'center':\r\n                        sx = (hr.end + hr.start) / 2 - legend_width / 2;\r\n                        sy = (vr.end + vr.start) / 2 - legend_height / 2;\r\n                        break;\r\n                    case 'center_right':\r\n                        sx = hr.end - legend_margin - legend_width;\r\n                        sy = (vr.end + vr.start) / 2 - legend_height / 2;\r\n                        break;\r\n                }\r\n            }\r\n            else if (types_1.isArray(location) && location.length == 2) {\r\n                var _c = tslib_1.__read(location, 2), vx = _c[0], vy = _c[1];\r\n                sx = panel.xview.compute(vx);\r\n                sy = panel.yview.compute(vy) - legend_height;\r\n            }\r\n            else\r\n                assert_1.unreachable();\r\n            return { sx: sx, sy: sy };\r\n        };\r\n        ColorBarView.prototype._render = function () {\r\n            if (this.model.color_mapper == null)\r\n                return;\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            var _a = this.compute_legend_location(), sx = _a.sx, sy = _a.sy;\r\n            ctx.translate(sx, sy);\r\n            this._draw_bbox(ctx);\r\n            var image_offset = this._get_image_offset();\r\n            ctx.translate(image_offset.x, image_offset.y);\r\n            this._draw_image(ctx);\r\n            var tick_info = this.tick_info();\r\n            this._draw_major_ticks(ctx, tick_info);\r\n            this._draw_minor_ticks(ctx, tick_info);\r\n            this._draw_major_labels(ctx, tick_info);\r\n            if (this.model.title)\r\n                this._draw_title(ctx);\r\n            ctx.restore();\r\n        };\r\n        ColorBarView.prototype._draw_bbox = function (ctx) {\r\n            var bbox = this.compute_legend_dimensions();\r\n            ctx.save();\r\n            if (this.visuals.background_fill.doit) {\r\n                this.visuals.background_fill.set_value(ctx);\r\n                ctx.fillRect(0, 0, bbox.width, bbox.height);\r\n            }\r\n            if (this.visuals.border_line.doit) {\r\n                this.visuals.border_line.set_value(ctx);\r\n                ctx.strokeRect(0, 0, bbox.width, bbox.height);\r\n            }\r\n            ctx.restore();\r\n        };\r\n        ColorBarView.prototype._draw_image = function (ctx) {\r\n            var image = this._computed_image_dimensions();\r\n            ctx.save();\r\n            ctx.setImageSmoothingEnabled(false);\r\n            ctx.globalAlpha = this.model.scale_alpha;\r\n            ctx.drawImage(this.image, 0, 0, image.width, image.height);\r\n            if (this.visuals.bar_line.doit) {\r\n                this.visuals.bar_line.set_value(ctx);\r\n                ctx.strokeRect(0, 0, image.width, image.height);\r\n            }\r\n            ctx.restore();\r\n        };\r\n        ColorBarView.prototype._draw_major_ticks = function (ctx, tick_info) {\r\n            if (!this.visuals.major_tick_line.doit)\r\n                return;\r\n            var _a = tslib_1.__read(this._normals(), 2), nx = _a[0], ny = _a[1];\r\n            var image = this._computed_image_dimensions();\r\n            var _b = tslib_1.__read([image.width * nx, image.height * ny], 2), x_offset = _b[0], y_offset = _b[1];\r\n            var _c = tslib_1.__read(tick_info.coords.major, 2), sx = _c[0], sy = _c[1];\r\n            var tin = this.model.major_tick_in;\r\n            var tout = this.model.major_tick_out;\r\n            ctx.save();\r\n            ctx.translate(x_offset, y_offset);\r\n            this.visuals.major_tick_line.set_value(ctx);\r\n            for (var i = 0, end = sx.length; i < end; i++) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(Math.round(sx[i] + nx * tout), Math.round(sy[i] + ny * tout));\r\n                ctx.lineTo(Math.round(sx[i] - nx * tin), Math.round(sy[i] - ny * tin));\r\n                ctx.stroke();\r\n            }\r\n            ctx.restore();\r\n        };\r\n        ColorBarView.prototype._draw_minor_ticks = function (ctx, tick_info) {\r\n            if (!this.visuals.minor_tick_line.doit)\r\n                return;\r\n            var _a = tslib_1.__read(this._normals(), 2), nx = _a[0], ny = _a[1];\r\n            var image = this._computed_image_dimensions();\r\n            var _b = tslib_1.__read([image.width * nx, image.height * ny], 2), x_offset = _b[0], y_offset = _b[1];\r\n            var _c = tslib_1.__read(tick_info.coords.minor, 2), sx = _c[0], sy = _c[1];\r\n            var tin = this.model.minor_tick_in;\r\n            var tout = this.model.minor_tick_out;\r\n            ctx.save();\r\n            ctx.translate(x_offset, y_offset);\r\n            this.visuals.minor_tick_line.set_value(ctx);\r\n            for (var i = 0, end = sx.length; i < end; i++) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(Math.round(sx[i] + nx * tout), Math.round(sy[i] + ny * tout));\r\n                ctx.lineTo(Math.round(sx[i] - nx * tin), Math.round(sy[i] - ny * tin));\r\n                ctx.stroke();\r\n            }\r\n            ctx.restore();\r\n        };\r\n        ColorBarView.prototype._draw_major_labels = function (ctx, tick_info) {\r\n            if (!this.visuals.major_label_text.doit)\r\n                return;\r\n            var _a = tslib_1.__read(this._normals(), 2), nx = _a[0], ny = _a[1];\r\n            var image = this._computed_image_dimensions();\r\n            var _b = tslib_1.__read([image.width * nx, image.height * ny], 2), x_offset = _b[0], y_offset = _b[1];\r\n            var standoff = (this.model.label_standoff + this._tick_extent());\r\n            var _c = tslib_1.__read([standoff * nx, standoff * ny], 2), x_standoff = _c[0], y_standoff = _c[1];\r\n            var _d = tslib_1.__read(tick_info.coords.major, 2), sx = _d[0], sy = _d[1];\r\n            var formatted_labels = tick_info.labels.major;\r\n            this.visuals.major_label_text.set_value(ctx);\r\n            ctx.save();\r\n            ctx.translate(x_offset + x_standoff, y_offset + y_standoff);\r\n            for (var i = 0, end = sx.length; i < end; i++) {\r\n                ctx.fillText(formatted_labels[i], Math.round(sx[i] + nx * this.model.label_standoff), Math.round(sy[i] + ny * this.model.label_standoff));\r\n            }\r\n            ctx.restore();\r\n        };\r\n        ColorBarView.prototype._draw_title = function (ctx) {\r\n            if (!this.visuals.title_text.doit)\r\n                return;\r\n            ctx.save();\r\n            this.visuals.title_text.set_value(ctx);\r\n            ctx.fillText(this.model.title, 0, -this.model.title_standoff);\r\n            ctx.restore();\r\n        };\r\n        /*protected*/ ColorBarView.prototype._get_label_extent = function () {\r\n            var major_labels = this.tick_info().labels.major;\r\n            var label_extent;\r\n            if (!array_1.is_empty(major_labels)) {\r\n                var ctx_1 = this.layer.ctx;\r\n                ctx_1.save();\r\n                this.visuals.major_label_text.set_value(ctx_1);\r\n                switch (this.model.orientation) {\r\n                    case \"vertical\":\r\n                        label_extent = array_1.max((major_labels.map(function (label) { return ctx_1.measureText(label.toString()).width; })));\r\n                        break;\r\n                    case \"horizontal\":\r\n                        label_extent = text_util.measure_font(this.visuals.major_label_text.font_value()).height;\r\n                        break;\r\n                }\r\n                label_extent += this.model.label_standoff;\r\n                ctx_1.restore();\r\n            }\r\n            else\r\n                label_extent = 0;\r\n            return label_extent;\r\n        };\r\n        /*protected*/ ColorBarView.prototype._get_image_offset = function () {\r\n            // Returns image offset relative to legend bounding box\r\n            var x = this.model.padding;\r\n            var y = this.model.padding + this._title_extent();\r\n            return { x: x, y: y };\r\n        };\r\n        // {{{ TODO: state\r\n        ColorBarView.prototype._normals = function () {\r\n            return this.model.orientation == 'vertical' ? [1, 0] : [0, 1];\r\n        };\r\n        ColorBarView.prototype._title_extent = function () {\r\n            var font_value = this.model.title_text_font + \" \" + this.model.title_text_font_size + \" \" + this.model.title_text_font_style;\r\n            var title_extent = this.model.title ? text_util.measure_font(font_value).height + this.model.title_standoff : 0;\r\n            return title_extent;\r\n        };\r\n        ColorBarView.prototype._tick_extent = function () {\r\n            return array_1.max([this.model.major_tick_out, this.model.minor_tick_out]);\r\n        };\r\n        ColorBarView.prototype._computed_image_dimensions = function () {\r\n            /*\r\n            Heuristics to determine ColorBar image dimensions if set to \"auto\"\r\n        \r\n            Note: Returns the height/width values for the ColorBar's scale image, not\r\n            the dimensions of the entire ColorBar.\r\n        \r\n            If the short dimension (the width of a vertical bar or height of a\r\n            horizontal bar) is set to \"auto\", the resulting dimension will be set to\r\n            25 px.\r\n        \r\n            For a ColorBar in a side panel with the long dimension (the height of a\r\n            vertical bar or width of a horizontal bar) set to \"auto\", the\r\n            resulting dimension will be as long as the adjacent frame edge, so that the\r\n            bar \"fits\" to the plot.\r\n        \r\n            For a ColorBar in the plot frame with the long dimension set to \"auto\", the\r\n            resulting dimension will be the greater of:\r\n              * The length of the color palette * 25px\r\n              * The parallel frame dimension * 0.30\r\n                (i.e the frame height for a vertical ColorBar)\r\n            But not greater than:\r\n              * The parallel frame dimension * 0.80\r\n            */\r\n            var frame_height = this.plot_view.frame.bbox.height;\r\n            var frame_width = this.plot_view.frame.bbox.width;\r\n            var title_extent = this._title_extent();\r\n            var height, width;\r\n            switch (this.model.orientation) {\r\n                case \"vertical\": {\r\n                    if (this.model.height == 'auto') {\r\n                        if (this.panel != null)\r\n                            height = frame_height - 2 * this.model.padding - title_extent;\r\n                        else {\r\n                            height = array_1.max([this.model.color_mapper.palette.length * SHORT_DIM, frame_height * LONG_DIM_MIN_SCALAR]);\r\n                            height = array_1.min([height, frame_height * LONG_DIM_MAX_SCALAR - 2 * this.model.padding - title_extent]);\r\n                        }\r\n                    }\r\n                    else\r\n                        height = this.model.height;\r\n                    width = this.model.width == 'auto' ? SHORT_DIM : this.model.width;\r\n                    break;\r\n                }\r\n                case \"horizontal\": {\r\n                    height = this.model.height == 'auto' ? SHORT_DIM : this.model.height;\r\n                    if (this.model.width == 'auto') {\r\n                        if (this.panel != null)\r\n                            width = frame_width - 2 * this.model.padding;\r\n                        else {\r\n                            width = array_1.max([this.model.color_mapper.palette.length * SHORT_DIM, frame_width * LONG_DIM_MIN_SCALAR]);\r\n                            width = array_1.min([width, frame_width * LONG_DIM_MAX_SCALAR - 2 * this.model.padding]);\r\n                        }\r\n                    }\r\n                    else\r\n                        width = this.model.width;\r\n                    break;\r\n                }\r\n            }\r\n            return { width: width, height: height };\r\n        };\r\n        /*protected*/ ColorBarView.prototype._tick_coordinate_scale = function (scale_length) {\r\n            /*\r\n            Creates and returns a scale instance that maps the `color_mapper` range\r\n            (low to high) to a screen space range equal to the length of the ColorBar's\r\n            scale image. The scale is used to calculate the tick coordinates in screen\r\n            coordinates for plotting purposes.\r\n        \r\n            Note: the type of color_mapper has to match the type of scale (i.e.\r\n            a LinearColorMapper will require a corresponding LinearScale instance).\r\n            */\r\n            var ranges = {\r\n                source_range: new range1d_1.Range1d({\r\n                    start: this.model.color_mapper.metrics.min,\r\n                    end: this.model.color_mapper.metrics.max,\r\n                }),\r\n                target_range: new range1d_1.Range1d({\r\n                    start: 0,\r\n                    end: scale_length,\r\n                }),\r\n            };\r\n            var color_mapper = this.model.color_mapper;\r\n            if (color_mapper instanceof mappers_1.LinearColorMapper)\r\n                return new linear_scale_1.LinearScale(ranges);\r\n            else if (color_mapper instanceof mappers_1.LogColorMapper)\r\n                return new log_scale_1.LogScale(ranges);\r\n            else if (color_mapper instanceof mappers_1.ScanningColorMapper) {\r\n                var binning = color_mapper.metrics.binning;\r\n                return new linear_interpolation_scale_1.LinearInterpolationScale(Object.assign(Object.assign({}, ranges), { binning: binning }));\r\n            }\r\n            else {\r\n                // TODO: Categorical*Mapper needs painters\r\n                assert_1.unreachable();\r\n            }\r\n        };\r\n        ColorBarView.prototype._format_major_labels = function (initial_labels, major_ticks) {\r\n            // XXX: passing null as cross_loc probably means MercatorTickFormatters, etc\r\n            // will not function properly in conjunction with colorbars\r\n            var formatted_labels = this.model.formatter.doFormat(initial_labels, null);\r\n            for (var i = 0, end = major_ticks.length; i < end; i++) {\r\n                if (major_ticks[i] in this.model.major_label_overrides)\r\n                    formatted_labels[i] = this.model.major_label_overrides[major_ticks[i]];\r\n            }\r\n            return formatted_labels;\r\n        };\r\n        ColorBarView.prototype.tick_info = function () {\r\n            var image_dimensions = this._computed_image_dimensions();\r\n            var scale_length;\r\n            switch (this.model.orientation) {\r\n                case \"vertical\": {\r\n                    scale_length = image_dimensions.height;\r\n                    break;\r\n                }\r\n                case \"horizontal\": {\r\n                    scale_length = image_dimensions.width;\r\n                    break;\r\n                }\r\n            }\r\n            var scale = this._tick_coordinate_scale(scale_length);\r\n            var _a = tslib_1.__read(this._normals(), 2), i = _a[0], j = _a[1];\r\n            var _b = tslib_1.__read([this.model.color_mapper.metrics.min, this.model.color_mapper.metrics.max], 2), start = _b[0], end = _b[1];\r\n            // XXX: passing null as cross_loc probably means MercatorTickers, etc\r\n            // will not function properly in conjunction with colorbars\r\n            var ticks = this.model.ticker.get_ticks(start, end, null, null, this.model.ticker.desired_num_ticks);\r\n            var majors = ticks.major;\r\n            var minors = ticks.minor;\r\n            var major_coords = [[], []];\r\n            var minor_coords = [[], []];\r\n            for (var ii = 0, _end = majors.length; ii < _end; ii++) {\r\n                if (majors[ii] < start || majors[ii] > end)\r\n                    continue;\r\n                major_coords[i].push(majors[ii]);\r\n                major_coords[j].push(0);\r\n            }\r\n            for (var ii = 0, _end = minors.length; ii < _end; ii++) {\r\n                if (minors[ii] < start || minors[ii] > end)\r\n                    continue;\r\n                minor_coords[i].push(minors[ii]);\r\n                minor_coords[j].push(0);\r\n            }\r\n            var labels = { major: this._format_major_labels(major_coords[i], majors) };\r\n            var coords = {\r\n                major: [[], []],\r\n                minor: [[], []],\r\n            };\r\n            coords.major[i] = scale.v_compute(major_coords[i]);\r\n            coords.minor[i] = scale.v_compute(minor_coords[i]);\r\n            coords.major[j] = major_coords[j];\r\n            coords.minor[j] = minor_coords[j];\r\n            // Because we want the scale to be reversed\r\n            if (this.model.orientation == 'vertical') {\r\n                coords.major[i] = arrayable_1.map(coords.major[i], function (coord) { return scale_length - coord; });\r\n                coords.minor[i] = arrayable_1.map(coords.minor[i], function (coord) { return scale_length - coord; });\r\n            }\r\n            return { coords: coords, labels: labels };\r\n        };\r\n        return ColorBarView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.ColorBarView = ColorBarView;\r\n    ColorBarView.__name__ = \"ColorBarView\";\r\n    var ColorBar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColorBar, _super);\r\n        function ColorBar(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ColorBar.init_ColorBar = function () {\r\n            this.prototype.default_view = ColorBarView;\r\n            this.mixins([\r\n                [\"major_label_\", mixins.Text],\r\n                [\"title_\", mixins.Text],\r\n                [\"major_tick_\", mixins.Line],\r\n                [\"minor_tick_\", mixins.Line],\r\n                [\"border_\", mixins.Line],\r\n                [\"bar_\", mixins.Line],\r\n                [\"background_\", mixins.Fill],\r\n            ]);\r\n            this.define({\r\n                location: [p.Any, 'top_right'],\r\n                orientation: [p.Orientation, 'vertical'],\r\n                title: [p.String],\r\n                title_standoff: [p.Number, 2],\r\n                width: [p.Any, 'auto'],\r\n                height: [p.Any, 'auto'],\r\n                scale_alpha: [p.Number, 1.0],\r\n                ticker: [p.Instance, function () { return new basic_ticker_1.BasicTicker(); }],\r\n                formatter: [p.Instance, function () { return new basic_tick_formatter_1.BasicTickFormatter(); }],\r\n                major_label_overrides: [p.Any, {}],\r\n                color_mapper: [p.Instance],\r\n                label_standoff: [p.Number, 5],\r\n                margin: [p.Number, 30],\r\n                padding: [p.Number, 10],\r\n                major_tick_in: [p.Number, 5],\r\n                major_tick_out: [p.Number, 0],\r\n                minor_tick_in: [p.Number, 0],\r\n                minor_tick_out: [p.Number, 0],\r\n            });\r\n            this.override({\r\n                background_fill_color: \"#ffffff\",\r\n                background_fill_alpha: 0.95,\r\n                bar_line_color: null,\r\n                border_line_color: null,\r\n                major_label_text_align: \"center\",\r\n                major_label_text_baseline: \"middle\",\r\n                major_label_text_font_size: \"11px\",\r\n                major_tick_line_color: \"#ffffff\",\r\n                minor_tick_line_color: null,\r\n                title_text_font_size: \"13px\",\r\n                title_text_font_style: \"italic\",\r\n            });\r\n        };\r\n        return ColorBar;\r\n    }(annotation_1.Annotation));\r\n    exports.ColorBar = ColorBar;\r\n    ColorBar.__name__ = \"ColorBar\";\r\n    ColorBar.init_ColorBar();\r\n}\r\n","/* models\\tickers\\basic_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var adaptive_ticker_1 = require(242) /* ./adaptive_ticker */;\r\n    var BasicTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BasicTicker, _super);\r\n        function BasicTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return BasicTicker;\r\n    }(adaptive_ticker_1.AdaptiveTicker));\r\n    exports.BasicTicker = BasicTicker;\r\n    BasicTicker.__name__ = \"BasicTicker\";\r\n}\r\n","/* models\\tickers\\adaptive_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_ticker_1 = require(243) /* ./continuous_ticker */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    // Forces a number x into a specified range [min_val, max_val].\r\n    function clamp(x, min_val, max_val) {\r\n        return Math.max(min_val, Math.min(max_val, x));\r\n    }\r\n    // A log function with an optional base.\r\n    function log(x, base) {\r\n        if (base === void 0) {\r\n            base = Math.E;\r\n        }\r\n        return Math.log(x) / Math.log(base);\r\n    }\r\n    var AdaptiveTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AdaptiveTicker, _super);\r\n        function AdaptiveTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        AdaptiveTicker.init_AdaptiveTicker = function () {\r\n            this.define({\r\n                base: [p.Number, 10.0],\r\n                mantissas: [p.Array, [1, 2, 5]],\r\n                min_interval: [p.Number, 0.0],\r\n                max_interval: [p.Number],\r\n            });\r\n        };\r\n        // These arguments control the range of possible intervals.  The interval I\r\n        // returned by get_interval() will be the one that most closely matches the\r\n        // desired number of ticks, subject to the following constraints:\r\n        // I = (M * B^N), where\r\n        // M is a member of mantissas,\r\n        // B is base,\r\n        // and N is an integer;\r\n        // and min_interval <= I <= max_interval.\r\n        AdaptiveTicker.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            var prefix_mantissa = array_1.nth(this.mantissas, -1) / this.base;\r\n            var suffix_mantissa = array_1.nth(this.mantissas, 0) * this.base;\r\n            this.extended_mantissas = tslib_1.__spread([prefix_mantissa], this.mantissas, [suffix_mantissa]);\r\n            this.base_factor = this.get_min_interval() === 0.0 ? 1.0 : this.get_min_interval();\r\n        };\r\n        AdaptiveTicker.prototype.get_interval = function (data_low, data_high, desired_n_ticks) {\r\n            var data_range = data_high - data_low;\r\n            var ideal_interval = this.get_ideal_interval(data_low, data_high, desired_n_ticks);\r\n            var interval_exponent = Math.floor(log(ideal_interval / this.base_factor, this.base));\r\n            var ideal_magnitude = Math.pow(this.base, interval_exponent) * this.base_factor;\r\n            // An untested optimization.\r\n            //   const ideal_mantissa = ideal_interval / ideal_magnitude\r\n            //   index = sorted_index(this.extended_mantissas, ideal_mantissa)\r\n            //   candidate_mantissas = this.extended_mantissas[index..index + 1]\r\n            var candidate_mantissas = this.extended_mantissas;\r\n            var errors = candidate_mantissas.map(function (mantissa) {\r\n                return Math.abs(desired_n_ticks - (data_range / (mantissa * ideal_magnitude)));\r\n            });\r\n            var best_mantissa = candidate_mantissas[array_1.argmin(errors)];\r\n            var interval = best_mantissa * ideal_magnitude;\r\n            return clamp(interval, this.get_min_interval(), this.get_max_interval());\r\n        };\r\n        return AdaptiveTicker;\r\n    }(continuous_ticker_1.ContinuousTicker));\r\n    exports.AdaptiveTicker = AdaptiveTicker;\r\n    AdaptiveTicker.__name__ = \"AdaptiveTicker\";\r\n    AdaptiveTicker.init_AdaptiveTicker();\r\n}\r\n","/* models\\tickers\\continuous_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var ticker_1 = require(244) /* ./ticker */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var ContinuousTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ContinuousTicker, _super);\r\n        function ContinuousTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ContinuousTicker.init_ContinuousTicker = function () {\r\n            this.define({\r\n                num_minor_ticks: [p.Number, 5],\r\n                desired_num_ticks: [p.Number, 6],\r\n            });\r\n        };\r\n        ContinuousTicker.prototype.get_ticks = function (data_low, data_high, _range, cross_loc, _) {\r\n            return this.get_ticks_no_defaults(data_low, data_high, cross_loc, this.desired_num_ticks);\r\n        };\r\n        // The version of get_ticks() that does the work (and the version that\r\n        // should be overridden in subclasses).\r\n        ContinuousTicker.prototype.get_ticks_no_defaults = function (data_low, data_high, _cross_loc, desired_n_ticks) {\r\n            var e_1, _a, e_2, _b, e_3, _c;\r\n            var interval = this.get_interval(data_low, data_high, desired_n_ticks);\r\n            var start_factor = Math.floor(data_low / interval);\r\n            var end_factor = Math.ceil(data_high / interval);\r\n            var factors;\r\n            if (!isFinite(start_factor) || !isFinite(end_factor))\r\n                factors = [];\r\n            else\r\n                factors = array_1.range(start_factor, end_factor + 1);\r\n            var ticks = factors\r\n                .map(function (factor) { return factor * interval; })\r\n                .filter(function (tick) { return data_low <= tick && tick <= data_high; });\r\n            var num_minor_ticks = this.num_minor_ticks;\r\n            var minor_ticks = [];\r\n            if (num_minor_ticks > 0 && ticks.length > 0) {\r\n                var minor_interval_1 = interval / num_minor_ticks;\r\n                var minor_offsets = array_1.range(0, num_minor_ticks).map(function (i) { return i * minor_interval_1; });\r\n                try {\r\n                    for (var _d = tslib_1.__values(minor_offsets.slice(1)), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                        var x = _e.value;\r\n                        var mt = ticks[0] - x;\r\n                        if (data_low <= mt && mt <= data_high) {\r\n                            minor_ticks.push(mt);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_e && !_e.done && (_a = _d.return))\r\n                            _a.call(_d);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n                try {\r\n                    for (var ticks_1 = tslib_1.__values(ticks), ticks_1_1 = ticks_1.next(); !ticks_1_1.done; ticks_1_1 = ticks_1.next()) {\r\n                        var tick = ticks_1_1.value;\r\n                        try {\r\n                            for (var minor_offsets_1 = (e_3 = void 0, tslib_1.__values(minor_offsets)), minor_offsets_1_1 = minor_offsets_1.next(); !minor_offsets_1_1.done; minor_offsets_1_1 = minor_offsets_1.next()) {\r\n                                var x = minor_offsets_1_1.value;\r\n                                var mt = tick + x;\r\n                                if (data_low <= mt && mt <= data_high) {\r\n                                    minor_ticks.push(mt);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (e_3_1) {\r\n                            e_3 = { error: e_3_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (minor_offsets_1_1 && !minor_offsets_1_1.done && (_c = minor_offsets_1.return))\r\n                                    _c.call(minor_offsets_1);\r\n                            }\r\n                            finally {\r\n                                if (e_3)\r\n                                    throw e_3.error;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (ticks_1_1 && !ticks_1_1.done && (_b = ticks_1.return))\r\n                            _b.call(ticks_1);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                major: ticks,\r\n                minor: minor_ticks,\r\n            };\r\n        };\r\n        // Returns the smallest interval that can be returned by get_interval().\r\n        ContinuousTicker.prototype.get_min_interval = function () {\r\n            return this.min_interval;\r\n        };\r\n        // Returns the largest interval that can be returned by get_interval().\r\n        ContinuousTicker.prototype.get_max_interval = function () {\r\n            return this.max_interval != null ? this.max_interval : Infinity;\r\n        };\r\n        // Returns the interval size that would produce exactly the number of\r\n        // desired ticks.  (In general we won't use exactly this interval, because\r\n        // we want the ticks to be round numbers.)\r\n        ContinuousTicker.prototype.get_ideal_interval = function (data_low, data_high, desired_n_ticks) {\r\n            var data_range = data_high - data_low;\r\n            return data_range / desired_n_ticks;\r\n        };\r\n        return ContinuousTicker;\r\n    }(ticker_1.Ticker));\r\n    exports.ContinuousTicker = ContinuousTicker;\r\n    ContinuousTicker.__name__ = \"ContinuousTicker\";\r\n    ContinuousTicker.init_ContinuousTicker();\r\n}\r\n","/* models\\tickers\\ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var Ticker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Ticker, _super);\r\n        function Ticker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return Ticker;\r\n    }(model_1.Model));\r\n    exports.Ticker = Ticker;\r\n    Ticker.__name__ = \"Ticker\";\r\n}\r\n","/* models\\formatters\\basic_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var BasicTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BasicTickFormatter, _super);\r\n        function BasicTickFormatter(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.last_precision = 3;\r\n            return _this;\r\n        }\r\n        BasicTickFormatter.init_BasicTickFormatter = function () {\r\n            this.define({\r\n                precision: [p.Any, 'auto'],\r\n                use_scientific: [p.Boolean, true],\r\n                power_limit_high: [p.Number, 5],\r\n                power_limit_low: [p.Number, -3],\r\n            });\r\n        };\r\n        Object.defineProperty(BasicTickFormatter.prototype, \"scientific_limit_low\", {\r\n            get: function () {\r\n                return Math.pow(10.0, this.power_limit_low);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BasicTickFormatter.prototype, \"scientific_limit_high\", {\r\n            get: function () {\r\n                return Math.pow(10.0, this.power_limit_high);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        BasicTickFormatter.prototype._need_sci = function (ticks) {\r\n            var e_1, _a;\r\n            if (!this.use_scientific)\r\n                return false;\r\n            var scientific_limit_high = this.scientific_limit_high;\r\n            var scientific_limit_low = this.scientific_limit_low;\r\n            var zeroish = ticks.length < 2 ? 0 : Math.abs(ticks[1] - ticks[0]) / 10000;\r\n            try {\r\n                for (var ticks_1 = tslib_1.__values(ticks), ticks_1_1 = ticks_1.next(); !ticks_1_1.done; ticks_1_1 = ticks_1.next()) {\r\n                    var tick = ticks_1_1.value;\r\n                    var tick_abs = Math.abs(tick);\r\n                    if (tick_abs <= zeroish)\r\n                        continue;\r\n                    if (tick_abs >= scientific_limit_high || tick_abs <= scientific_limit_low) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (ticks_1_1 && !ticks_1_1.done && (_a = ticks_1.return))\r\n                        _a.call(ticks_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        BasicTickFormatter.prototype._format_with_precision = function (ticks, need_sci, precision) {\r\n            var labels = new Array(ticks.length);\r\n            if (need_sci) {\r\n                for (var i = 0, end = ticks.length; i < end; i++) {\r\n                    labels[i] = ticks[i].toExponential(precision);\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0, end = ticks.length; i < end; i++) {\r\n                    // strip trailing zeros\r\n                    labels[i] = ticks[i].toFixed(precision).replace(/(\\.[0-9]*?)0+$/, \"$1\").replace(/\\.$/, \"\");\r\n                }\r\n            }\r\n            return labels;\r\n        };\r\n        BasicTickFormatter.prototype._auto_precision = function (ticks, need_sci) {\r\n            var labels = new Array(ticks.length);\r\n            var asc = this.last_precision <= 15;\r\n            outer: for (var x = this.last_precision; asc ? x <= 15 : x >= 1; asc ? x++ : x--) {\r\n                if (need_sci) {\r\n                    labels[0] = ticks[0].toExponential(x);\r\n                    for (var i = 1; i < ticks.length; i++) {\r\n                        if (labels[i] == labels[i - 1]) {\r\n                            continue outer;\r\n                        }\r\n                    }\r\n                    this.last_precision = x;\r\n                    break;\r\n                }\r\n                else {\r\n                    labels[0] = ticks[0].toFixed(x).replace(/(\\.[0-9]*?)0+$/, \"$1\").replace(/\\.$/, \"\");\r\n                    for (var i = 1; i < ticks.length; i++) {\r\n                        labels[i] = ticks[i].toFixed(x).replace(/(\\.[0-9]*?)0+$/, \"$1\").replace(/\\.$/, \"\");\r\n                        if (labels[i] == labels[i - 1]) {\r\n                            continue outer;\r\n                        }\r\n                    }\r\n                    this.last_precision = x;\r\n                    break;\r\n                }\r\n            }\r\n            return this.last_precision;\r\n        };\r\n        BasicTickFormatter.prototype.doFormat = function (ticks, _opts) {\r\n            if (ticks.length == 0)\r\n                return [];\r\n            var need_sci = this._need_sci(ticks);\r\n            var precision = this.precision == \"auto\" ? this._auto_precision(ticks, need_sci) : this.precision;\r\n            return this._format_with_precision(ticks, need_sci, precision);\r\n        };\r\n        return BasicTickFormatter;\r\n    }(tick_formatter_1.TickFormatter));\r\n    exports.BasicTickFormatter = BasicTickFormatter;\r\n    BasicTickFormatter.__name__ = \"BasicTickFormatter\";\r\n    BasicTickFormatter.init_BasicTickFormatter();\r\n}\r\n","/* models\\formatters\\tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var TickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TickFormatter, _super);\r\n        function TickFormatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return TickFormatter;\r\n    }(model_1.Model));\r\n    exports.TickFormatter = TickFormatter;\r\n    TickFormatter.__name__ = \"TickFormatter\";\r\n}\r\n","/* models\\mappers\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var categorical_color_mapper_1 = require(248) /* ./categorical_color_mapper */;\r\n    exports.CategoricalColorMapper = categorical_color_mapper_1.CategoricalColorMapper;\r\n    var categorical_marker_mapper_1 = require(253) /* ./categorical_marker_mapper */;\r\n    exports.CategoricalMarkerMapper = categorical_marker_mapper_1.CategoricalMarkerMapper;\r\n    var categorical_pattern_mapper_1 = require(254) /* ./categorical_pattern_mapper */;\r\n    exports.CategoricalPatternMapper = categorical_pattern_mapper_1.CategoricalPatternMapper;\r\n    var continuous_color_mapper_1 = require(255) /* ./continuous_color_mapper */;\r\n    exports.ContinuousColorMapper = continuous_color_mapper_1.ContinuousColorMapper;\r\n    var color_mapper_1 = require(250) /* ./color_mapper */;\r\n    exports.ColorMapper = color_mapper_1.ColorMapper;\r\n    var linear_color_mapper_1 = require(256) /* ./linear_color_mapper */;\r\n    exports.LinearColorMapper = linear_color_mapper_1.LinearColorMapper;\r\n    var log_color_mapper_1 = require(257) /* ./log_color_mapper */;\r\n    exports.LogColorMapper = log_color_mapper_1.LogColorMapper;\r\n    var scanning_color_mapper_1 = require(258) /* ./scanning_color_mapper */;\r\n    exports.ScanningColorMapper = scanning_color_mapper_1.ScanningColorMapper;\r\n    var eqhist_color_mapper_1 = require(259) /* ./eqhist_color_mapper */;\r\n    exports.EqHistColorMapper = eqhist_color_mapper_1.EqHistColorMapper;\r\n}\r\n","/* models\\mappers\\categorical_color_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var categorical_mapper_1 = require(249) /* ./categorical_mapper */;\r\n    var color_mapper_1 = require(250) /* ./color_mapper */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var CategoricalColorMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalColorMapper, _super);\r\n        function CategoricalColorMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CategoricalColorMapper.init_CategoricalColorMapper = function () {\r\n            this.define({\r\n                factors: [p.Array],\r\n                start: [p.Number, 0],\r\n                end: [p.Number],\r\n            });\r\n        };\r\n        CategoricalColorMapper.prototype._v_compute = function (data, values, palette, _a) {\r\n            var nan_color = _a.nan_color;\r\n            categorical_mapper_1.cat_v_compute(data, this.factors, palette, values, this.start, this.end, nan_color);\r\n        };\r\n        return CategoricalColorMapper;\r\n    }(color_mapper_1.ColorMapper));\r\n    exports.CategoricalColorMapper = CategoricalColorMapper;\r\n    CategoricalColorMapper.__name__ = \"CategoricalColorMapper\";\r\n    CategoricalColorMapper.init_CategoricalColorMapper();\r\n}\r\n","/* models\\mappers\\categorical_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    function _cat_equals(a, b) {\r\n        if (a.length != b.length)\r\n            return false;\r\n        for (var i = 0, end = a.length; i < end; i++) {\r\n            if (a[i] !== b[i])\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    exports._cat_equals = _cat_equals;\r\n    function cat_v_compute(data, factors, targets, values, start, end, extra_value) {\r\n        var _loop_1 = function (i, N) {\r\n            var d = data[i];\r\n            var key = void 0;\r\n            if (types_1.isString(d))\r\n                key = arrayable_1.index_of(factors, d);\r\n            else {\r\n                if (start != null) {\r\n                    if (end != null)\r\n                        d = d.slice(start, end);\r\n                    else\r\n                        d = d.slice(start);\r\n                }\r\n                else if (end != null)\r\n                    d = d.slice(0, end);\r\n                if (d.length == 1)\r\n                    key = arrayable_1.index_of(factors, d[0]);\r\n                else\r\n                    key = arrayable_1.find_index(factors, function (x) { return _cat_equals(x, d); });\r\n            }\r\n            var value = void 0;\r\n            if (key < 0 || key >= targets.length)\r\n                value = extra_value;\r\n            else\r\n                value = targets[key];\r\n            values[i] = value;\r\n        };\r\n        for (var i = 0, N = data.length; i < N; i++) {\r\n            _loop_1(i, N);\r\n        }\r\n    }\r\n    exports.cat_v_compute = cat_v_compute;\r\n}\r\n","/* models\\mappers\\color_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var mapper_1 = require(251) /* ./mapper */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var color_1 = require(137) /* ../../core/util/color */;\r\n    var compat_1 = require(147) /* ../../core/util/compat */;\r\n    function _convert_color(color) {\r\n        if (types_1.isNumber(color))\r\n            return color;\r\n        if (color[0] != \"#\")\r\n            color = color_1.color2hex(color);\r\n        if (color.length != 9)\r\n            color = color + 'ff';\r\n        return parseInt(color.slice(1), 16);\r\n    }\r\n    exports._convert_color = _convert_color;\r\n    function _convert_palette(palette) {\r\n        var new_palette = new Uint32Array(palette.length);\r\n        for (var i = 0, end = palette.length; i < end; i++)\r\n            new_palette[i] = _convert_color(palette[i]);\r\n        return new_palette;\r\n    }\r\n    exports._convert_palette = _convert_palette;\r\n    function _uint32_to_rgba(values) {\r\n        if (compat_1.is_little_endian) {\r\n            var view = new DataView(values.buffer);\r\n            for (var i = 0, end = values.length; i < end; i++)\r\n                view.setUint32(i * 4, values[i]);\r\n        }\r\n        return new Uint8Array(values.buffer);\r\n    }\r\n    exports._uint32_to_rgba = _uint32_to_rgba;\r\n    var ColorMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColorMapper, _super);\r\n        function ColorMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ColorMapper.init_ColorMapper = function () {\r\n            this.define({\r\n                palette: [p.Any],\r\n                nan_color: [p.Color, \"gray\"],\r\n            });\r\n        };\r\n        ColorMapper.prototype.v_compute = function (xs) {\r\n            var values = new Array(xs.length);\r\n            this._v_compute(xs, values, this.palette, this._colors(function (c) { return c; }));\r\n            return values;\r\n        };\r\n        Object.defineProperty(ColorMapper.prototype, \"rgba_mapper\", {\r\n            get: function () {\r\n                var self = this;\r\n                var palette = _convert_palette(this.palette);\r\n                var colors = this._colors(_convert_color);\r\n                return {\r\n                    v_compute: function (xs) {\r\n                        var values = new Uint32Array(xs.length);\r\n                        self._v_compute(xs, values, palette, colors);\r\n                        return _uint32_to_rgba(values);\r\n                    },\r\n                };\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ColorMapper.prototype._colors = function (conv) {\r\n            return { nan_color: conv(this.nan_color) };\r\n        };\r\n        return ColorMapper;\r\n    }(mapper_1.Mapper));\r\n    exports.ColorMapper = ColorMapper;\r\n    ColorMapper.__name__ = \"ColorMapper\";\r\n    ColorMapper.init_ColorMapper();\r\n}\r\n","/* models\\mappers\\mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var transform_1 = require(252) /* ../transforms/transform */;\r\n    var Mapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Mapper, _super);\r\n        function Mapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Mapper.prototype.compute = function (_x) {\r\n            // If it's just a single value, then a mapper doesn't really make sense.\r\n            throw new Error(\"mapping single values is not supported\");\r\n        };\r\n        return Mapper;\r\n    }(transform_1.Transform));\r\n    exports.Mapper = Mapper;\r\n    Mapper.__name__ = \"Mapper\";\r\n}\r\n","/* models\\transforms\\transform.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var Transform = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Transform, _super);\r\n        function Transform(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return Transform;\r\n    }(model_1.Model));\r\n    exports.Transform = Transform;\r\n    Transform.__name__ = \"Transform\";\r\n}\r\n","/* models\\mappers\\categorical_marker_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var categorical_mapper_1 = require(249) /* ./categorical_mapper */;\r\n    var mapper_1 = require(251) /* ./mapper */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var CategoricalMarkerMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalMarkerMapper, _super);\r\n        function CategoricalMarkerMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CategoricalMarkerMapper.init_CategoricalMarkerMapper = function () {\r\n            this.define({\r\n                factors: [p.Array],\r\n                markers: [p.Array],\r\n                start: [p.Number, 0],\r\n                end: [p.Number],\r\n                default_value: [p.MarkerType, \"circle\"],\r\n            });\r\n        };\r\n        CategoricalMarkerMapper.prototype.v_compute = function (xs) {\r\n            var values = new Array(xs.length);\r\n            categorical_mapper_1.cat_v_compute(xs, this.factors, this.markers, values, this.start, this.end, this.default_value);\r\n            return values;\r\n        };\r\n        return CategoricalMarkerMapper;\r\n    }(mapper_1.Mapper));\r\n    exports.CategoricalMarkerMapper = CategoricalMarkerMapper;\r\n    CategoricalMarkerMapper.__name__ = \"CategoricalMarkerMapper\";\r\n    CategoricalMarkerMapper.init_CategoricalMarkerMapper();\r\n}\r\n","/* models\\mappers\\categorical_pattern_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var categorical_mapper_1 = require(249) /* ./categorical_mapper */;\r\n    var mapper_1 = require(251) /* ./mapper */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var CategoricalPatternMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalPatternMapper, _super);\r\n        function CategoricalPatternMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CategoricalPatternMapper.init_CategoricalPatternMapper = function () {\r\n            this.define({\r\n                factors: [p.Array],\r\n                patterns: [p.Array],\r\n                start: [p.Number, 0],\r\n                end: [p.Number],\r\n                default_value: [p.HatchPatternType, \" \"],\r\n            });\r\n        };\r\n        CategoricalPatternMapper.prototype.v_compute = function (xs) {\r\n            var values = new Array(xs.length);\r\n            categorical_mapper_1.cat_v_compute(xs, this.factors, this.patterns, values, this.start, this.end, this.default_value);\r\n            return values;\r\n        };\r\n        return CategoricalPatternMapper;\r\n    }(mapper_1.Mapper));\r\n    exports.CategoricalPatternMapper = CategoricalPatternMapper;\r\n    CategoricalPatternMapper.__name__ = \"CategoricalPatternMapper\";\r\n    CategoricalPatternMapper.init_CategoricalPatternMapper();\r\n}\r\n","/* models\\mappers\\continuous_color_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var color_mapper_1 = require(250) /* ./color_mapper */;\r\n    var glyph_renderer_1 = require(205) /* ../renderers/glyph_renderer */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var ContinuousColorMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ContinuousColorMapper, _super);\r\n        function ContinuousColorMapper(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this._scan_data = null;\r\n            return _this;\r\n        }\r\n        ContinuousColorMapper.init_ContinuousColorMapper = function () {\r\n            this.define(function (_a) {\r\n                var Number = _a.Number, String = _a.String, Null = _a.Null, Ref = _a.Ref, Color = _a.Color, Or = _a.Or, Tuple = _a.Tuple, Array = _a.Array;\r\n                return {\r\n                    high: [Or(Number, Null), null],\r\n                    low: [Or(Number, Null), null],\r\n                    high_color: [Or(Color, Null), null],\r\n                    low_color: [Or(Color, Null), null],\r\n                    domain: [Array(Tuple(Ref(glyph_renderer_1.GlyphRenderer), Or(String, Array(String)))), []],\r\n                };\r\n            });\r\n        };\r\n        ContinuousColorMapper.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            var connect_renderers = function () {\r\n                var e_1, _a;\r\n                try {\r\n                    // TODO: if already connected this will bail. However, it won't remove old connections.\r\n                    for (var _b = tslib_1.__values(_this.domain), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                        var _d = tslib_1.__read(_c.value, 1), renderer = _d[0];\r\n                        _this.connect(renderer.view.change, function () { return _this.update_data(); });\r\n                        _this.connect(renderer.data_source.selected.change, function () { return _this.update_data(); });\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_c && !_c.done && (_a = _b.return))\r\n                            _a.call(_b);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            };\r\n            this.connect(this.properties.domain.change, function () { return connect_renderers(); });\r\n            connect_renderers();\r\n        };\r\n        ContinuousColorMapper.prototype.update_data = function () {\r\n            var _a = this, domain = _a.domain, palette = _a.palette;\r\n            var all_data = tslib_1.__spread(this._collect(domain));\r\n            this._scan_data = this.scan(all_data, palette.length);\r\n            this.change.emit();\r\n        };\r\n        Object.defineProperty(ContinuousColorMapper.prototype, \"metrics\", {\r\n            get: function () {\r\n                if (this._scan_data == null) {\r\n                    this.update_data();\r\n                }\r\n                return this._scan_data;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ContinuousColorMapper.prototype._collect = function (domain) {\r\n            var domain_1, domain_1_1, _a, renderer, fields, _loop_1, _b, _c, field, e_2_1, e_3_1;\r\n            var e_3, _d, e_2, _e;\r\n            return tslib_1.__generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 11, 12, 13]);\r\n                        domain_1 = tslib_1.__values(domain), domain_1_1 = domain_1.next();\r\n                        _f.label = 1;\r\n                    case 1:\r\n                        if (!!domain_1_1.done)\r\n                            return [3 /*break*/, 10];\r\n                        _a = tslib_1.__read(domain_1_1.value, 2), renderer = _a[0], fields = _a[1];\r\n                        _loop_1 = function (field) {\r\n                            var array, masked, selected, subset, array_2, array_2_1, subarray, e_4_1;\r\n                            var e_4, _a;\r\n                            return tslib_1.__generator(this, function (_b) {\r\n                                switch (_b.label) {\r\n                                    case 0:\r\n                                        array = renderer.data_source.get_column(field);\r\n                                        array = renderer.view.indices.select(array);\r\n                                        masked = renderer.view.masked;\r\n                                        selected = renderer.data_source.selected.indices;\r\n                                        subset = void 0;\r\n                                        if (masked != null && selected.length > 0)\r\n                                            subset = array_1.intersection(tslib_1.__spread(masked), selected);\r\n                                        else if (masked != null)\r\n                                            subset = tslib_1.__spread(masked);\r\n                                        else if (selected.length > 0)\r\n                                            subset = selected;\r\n                                        if (subset != null) {\r\n                                            array = array_1.map(subset, function (i) { return array[i]; });\r\n                                        }\r\n                                        if (!(array.length > 0 && !types_1.isNumber(array[0])))\r\n                                            return [3 /*break*/, 9];\r\n                                        _b.label = 1;\r\n                                    case 1:\r\n                                        _b.trys.push([1, 6, 7, 8]);\r\n                                        array_2 = (e_4 = void 0, tslib_1.__values(array)), array_2_1 = array_2.next();\r\n                                        _b.label = 2;\r\n                                    case 2:\r\n                                        if (!!array_2_1.done)\r\n                                            return [3 /*break*/, 5];\r\n                                        subarray = array_2_1.value;\r\n                                        return [5 /*yield**/, tslib_1.__values(subarray)];\r\n                                    case 3:\r\n                                        _b.sent();\r\n                                        _b.label = 4;\r\n                                    case 4:\r\n                                        array_2_1 = array_2.next();\r\n                                        return [3 /*break*/, 2];\r\n                                    case 5: return [3 /*break*/, 8];\r\n                                    case 6:\r\n                                        e_4_1 = _b.sent();\r\n                                        e_4 = { error: e_4_1 };\r\n                                        return [3 /*break*/, 8];\r\n                                    case 7:\r\n                                        try {\r\n                                            if (array_2_1 && !array_2_1.done && (_a = array_2.return))\r\n                                                _a.call(array_2);\r\n                                        }\r\n                                        finally {\r\n                                            if (e_4)\r\n                                                throw e_4.error;\r\n                                        }\r\n                                        return [7 /*endfinally*/];\r\n                                    case 8: return [3 /*break*/, 11];\r\n                                    case 9: return [5 /*yield**/, tslib_1.__values(array)];\r\n                                    case 10:\r\n                                        _b.sent();\r\n                                        _b.label = 11;\r\n                                    case 11: return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        };\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        _f.trys.push([2, 7, 8, 9]);\r\n                        _b = (e_2 = void 0, tslib_1.__values(types_1.isArray(fields) ? fields : [fields])), _c = _b.next();\r\n                        _f.label = 3;\r\n                    case 3:\r\n                        if (!!_c.done)\r\n                            return [3 /*break*/, 6];\r\n                        field = _c.value;\r\n                        return [5 /*yield**/, _loop_1(field)];\r\n                    case 4:\r\n                        _f.sent();\r\n                        _f.label = 5;\r\n                    case 5:\r\n                        _c = _b.next();\r\n                        return [3 /*break*/, 3];\r\n                    case 6: return [3 /*break*/, 9];\r\n                    case 7:\r\n                        e_2_1 = _f.sent();\r\n                        e_2 = { error: e_2_1 };\r\n                        return [3 /*break*/, 9];\r\n                    case 8:\r\n                        try {\r\n                            if (_c && !_c.done && (_e = _b.return))\r\n                                _e.call(_b);\r\n                        }\r\n                        finally {\r\n                            if (e_2)\r\n                                throw e_2.error;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 9:\r\n                        domain_1_1 = domain_1.next();\r\n                        return [3 /*break*/, 1];\r\n                    case 10: return [3 /*break*/, 13];\r\n                    case 11:\r\n                        e_3_1 = _f.sent();\r\n                        e_3 = { error: e_3_1 };\r\n                        return [3 /*break*/, 13];\r\n                    case 12:\r\n                        try {\r\n                            if (domain_1_1 && !domain_1_1.done && (_d = domain_1.return))\r\n                                _d.call(domain_1);\r\n                        }\r\n                        finally {\r\n                            if (e_3)\r\n                                throw e_3.error;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 13: return [2 /*return*/];\r\n                }\r\n            });\r\n        };\r\n        ContinuousColorMapper.prototype._v_compute = function (data, values, palette, colors) {\r\n            var nan_color = colors.nan_color;\r\n            var low_color = colors.low_color, high_color = colors.high_color;\r\n            if (low_color == null)\r\n                low_color = palette[0];\r\n            if (high_color == null)\r\n                high_color = palette[palette.length - 1];\r\n            var domain = this.domain;\r\n            var all_data = !array_1.is_empty(domain) ? tslib_1.__spread(this._collect(domain)) : data;\r\n            this._scan_data = this.scan(all_data, palette.length);\r\n            for (var i = 0, end = data.length; i < end; i++) {\r\n                var d = data[i];\r\n                if (isNaN(d))\r\n                    values[i] = nan_color;\r\n                else\r\n                    values[i] = this.cmap(d, palette, low_color, high_color, this._scan_data);\r\n            }\r\n        };\r\n        ContinuousColorMapper.prototype._colors = function (conv) {\r\n            return Object.assign(Object.assign({}, _super.prototype._colors.call(this, conv)), { low_color: this.low_color != null ? conv(this.low_color) : undefined, high_color: this.high_color != null ? conv(this.high_color) : undefined });\r\n        };\r\n        return ContinuousColorMapper;\r\n    }(color_mapper_1.ColorMapper));\r\n    exports.ContinuousColorMapper = ContinuousColorMapper;\r\n    ContinuousColorMapper.__name__ = \"ContinuousColorMapper\";\r\n    ContinuousColorMapper.init_ContinuousColorMapper();\r\n}\r\n","/* models\\mappers\\linear_color_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_color_mapper_1 = require(255) /* ./continuous_color_mapper */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var LinearColorMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LinearColorMapper, _super);\r\n        function LinearColorMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LinearColorMapper.prototype.scan = function (data, n) {\r\n            var low = this.low != null ? this.low : arrayable_1.min(data);\r\n            var high = this.high != null ? this.high : arrayable_1.max(data);\r\n            var norm_factor = 1 / (high - low);\r\n            var normed_interval = 1 / n;\r\n            return { max: high, min: low, norm_factor: norm_factor, normed_interval: normed_interval };\r\n        };\r\n        LinearColorMapper.prototype.cmap = function (d, palette, low_color, high_color, scan_data) {\r\n            // This handles the edge case where d == high, since the code below maps\r\n            // values exactly equal to high to palette.length, which is greater than\r\n            // max_key\r\n            var max_key = palette.length - 1;\r\n            if (d == scan_data.max) {\r\n                return palette[max_key];\r\n            }\r\n            var normed_d = (d - scan_data.min) * scan_data.norm_factor;\r\n            var key = Math.floor(normed_d / scan_data.normed_interval);\r\n            if (key < 0)\r\n                return low_color;\r\n            else if (key > max_key)\r\n                return high_color;\r\n            else\r\n                return palette[key];\r\n        };\r\n        return LinearColorMapper;\r\n    }(continuous_color_mapper_1.ContinuousColorMapper));\r\n    exports.LinearColorMapper = LinearColorMapper;\r\n    LinearColorMapper.__name__ = \"LinearColorMapper\";\r\n}\r\n","/* models\\mappers\\log_color_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_color_mapper_1 = require(255) /* ./continuous_color_mapper */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var LogColorMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LogColorMapper, _super);\r\n        function LogColorMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LogColorMapper.prototype.scan = function (data, n) {\r\n            var low = this.low != null ? this.low : arrayable_1.min(data);\r\n            var high = this.high != null ? this.high : arrayable_1.max(data);\r\n            var scale = n / (Math.log(high) - Math.log(low)); // subtract the low offset\r\n            return { max: high, min: low, scale: scale };\r\n        };\r\n        LogColorMapper.prototype.cmap = function (d, palette, low_color, high_color, scan_data) {\r\n            var max_key = palette.length - 1;\r\n            if (d > scan_data.max) {\r\n                return high_color;\r\n            }\r\n            // This handles the edge case where d == high, since the code below maps\r\n            // values exactly equal to high to palette.length, which is greater than\r\n            // max_key\r\n            if (d == scan_data.max)\r\n                return palette[max_key];\r\n            else if (d < scan_data.min)\r\n                return low_color;\r\n            // Get the key\r\n            var log = Math.log(d) - Math.log(scan_data.min); // subtract the low offset\r\n            var key = Math.floor(log * scan_data.scale);\r\n            // Deal with upper bound\r\n            if (key > max_key) {\r\n                key = max_key;\r\n            }\r\n            return palette[key];\r\n        };\r\n        return LogColorMapper;\r\n    }(continuous_color_mapper_1.ContinuousColorMapper));\r\n    exports.LogColorMapper = LogColorMapper;\r\n    LogColorMapper.__name__ = \"LogColorMapper\";\r\n}\r\n","/* models\\mappers\\scanning_color_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_color_mapper_1 = require(255) /* ./continuous_color_mapper */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var ScanningColorMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ScanningColorMapper, _super);\r\n        function ScanningColorMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ScanningColorMapper.prototype.cmap = function (d, palette, low_color, high_color, edges) {\r\n            if (d < edges.binning[0])\r\n                return low_color;\r\n            if (d > edges.binning[edges.binning.length - 1])\r\n                return high_color;\r\n            var key = arrayable_1.left_edge_index(d, edges.binning);\r\n            return palette[key];\r\n        };\r\n        return ScanningColorMapper;\r\n    }(continuous_color_mapper_1.ContinuousColorMapper));\r\n    exports.ScanningColorMapper = ScanningColorMapper;\r\n    ScanningColorMapper.__name__ = \"ScanningColorMapper\";\r\n}\r\n","/* models\\mappers\\eqhist_color_mapper.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var scanning_color_mapper_1 = require(258) /* ./scanning_color_mapper */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var EqHistColorMapper = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EqHistColorMapper, _super);\r\n        function EqHistColorMapper(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        EqHistColorMapper.init_EqHistColorMapper = function () {\r\n            this.define({\r\n                bins: [p.Int, 256 * 256],\r\n            });\r\n        };\r\n        EqHistColorMapper.prototype.scan = function (data, n) {\r\n            var low = this.low != null ? this.low : arrayable_1.min(data);\r\n            var high = this.high != null ? this.high : arrayable_1.max(data);\r\n            var nbins = this.bins;\r\n            var eq_bin_edges = array_1.linspace(low, high, nbins + 1);\r\n            var hist = arrayable_1.bin_counts(data, eq_bin_edges);\r\n            var eq_bin_centers = new Array(nbins);\r\n            for (var i = 0, length = eq_bin_edges.length; i < length - 1; i++) {\r\n                var left = eq_bin_edges[i];\r\n                var right = eq_bin_edges[i + 1];\r\n                eq_bin_centers[i] = (left + right) / 2;\r\n            }\r\n            // CDFs\r\n            var cdf = array_1.cumsum(hist);\r\n            var cdf_max = cdf[cdf.length - 1];\r\n            var norm_cdf = arrayable_1.map(cdf, function (x) { return x / cdf_max; });\r\n            // Iteratively find as many finite bins as there are colors\r\n            var finite_bins = n - 1;\r\n            var binning = [];\r\n            var iterations = 0;\r\n            var guess = n * 2;\r\n            while ((finite_bins != n) && (iterations < 4) && (finite_bins != 0)) {\r\n                var ratio = guess / finite_bins;\r\n                if (ratio > 1000) {\r\n                    // Abort if distribution is extremely skewed\r\n                    break;\r\n                }\r\n                guess = Math.round(Math.max(n * ratio, n));\r\n                // Interpolate\r\n                var palette_edges = array_1.range(0, guess);\r\n                var palette_cdf = arrayable_1.map(norm_cdf, function (x) { return x * (guess - 1); });\r\n                binning = arrayable_1.interpolate(palette_edges, palette_cdf, eq_bin_centers);\r\n                // Evaluate binning\r\n                var uniq_bins = array_1.uniq(binning);\r\n                finite_bins = uniq_bins.length - 1;\r\n                iterations++;\r\n            }\r\n            if (finite_bins == 0) {\r\n                binning = [low, high];\r\n                for (var j = 0; j < n - 1; j++)\r\n                    binning.push(high);\r\n            }\r\n            else {\r\n                binning = binning.slice(binning.length - n - 1);\r\n                if (finite_bins != n)\r\n                    logging_1.logger.warn(\"EqHistColorMapper warning: Histogram equalization did not converge.\");\r\n            }\r\n            return { min: low, max: high, binning: binning };\r\n        };\r\n        return EqHistColorMapper;\r\n    }(scanning_color_mapper_1.ScanningColorMapper));\r\n    exports.EqHistColorMapper = EqHistColorMapper;\r\n    EqHistColorMapper.__name__ = \"EqHistColorMapper\";\r\n    EqHistColorMapper.init_EqHistColorMapper();\r\n}\r\n","/* models\\scales\\linear_scale.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_scale_1 = require(261) /* ./continuous_scale */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var LinearScale = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LinearScale, _super);\r\n        function LinearScale(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LinearScale.init_LinearScale = function () {\r\n            this.internal({ scan_result: [p.Any] });\r\n        };\r\n        LinearScale.prototype.compute = function (x) {\r\n            return this._linear_compute(x);\r\n        };\r\n        LinearScale.prototype.v_compute = function (xs) {\r\n            return this._linear_v_compute(xs);\r\n        };\r\n        LinearScale.prototype.invert = function (xprime) {\r\n            return this._linear_invert(xprime);\r\n        };\r\n        LinearScale.prototype.v_invert = function (xprimes) {\r\n            return this._linear_v_invert(xprimes);\r\n        };\r\n        return LinearScale;\r\n    }(continuous_scale_1.ContinuousScale));\r\n    exports.LinearScale = LinearScale;\r\n    LinearScale.__name__ = \"LinearScale\";\r\n    LinearScale.init_LinearScale();\r\n}\r\n","/* models\\scales\\continuous_scale.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var scale_1 = require(262) /* ./scale */;\r\n    var ContinuousScale = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ContinuousScale, _super);\r\n        function ContinuousScale(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return ContinuousScale;\r\n    }(scale_1.Scale));\r\n    exports.ContinuousScale = ContinuousScale;\r\n    ContinuousScale.__name__ = \"ContinuousScale\";\r\n}\r\n","/* models\\scales\\scale.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var transforms_1 = require(263) /* ../transforms */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var Scale = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Scale, _super);\r\n        function Scale(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Scale.init_Scale = function () {\r\n            this.internal({\r\n                source_range: [p.Any],\r\n                target_range: [p.Any],\r\n            });\r\n        };\r\n        Scale.prototype.r_compute = function (x0, x1) {\r\n            if (this.target_range.is_reversed)\r\n                return [this.compute(x1), this.compute(x0)];\r\n            else\r\n                return [this.compute(x0), this.compute(x1)];\r\n        };\r\n        Scale.prototype.r_invert = function (sx0, sx1) {\r\n            if (this.target_range.is_reversed)\r\n                return [this.invert(sx1), this.invert(sx0)];\r\n            else\r\n                return [this.invert(sx0), this.invert(sx1)];\r\n        };\r\n        // These are needed by both LinearScale and CategoricalScale and this is the\r\n        // only common ancestor. TODO: Proper MI/Mixin would be better.\r\n        Scale.prototype._linear_compute = function (x) {\r\n            var _a = tslib_1.__read(this._linear_compute_state(), 2), factor = _a[0], offset = _a[1];\r\n            return factor * x + offset;\r\n        };\r\n        Scale.prototype._linear_v_compute = function (xs) {\r\n            var _a = tslib_1.__read(this._linear_compute_state(), 2), factor = _a[0], offset = _a[1];\r\n            var result = new types_1.NumberArray(xs.length);\r\n            for (var i = 0; i < xs.length; i++)\r\n                result[i] = factor * xs[i] + offset;\r\n            return result;\r\n        };\r\n        Scale.prototype._linear_invert = function (xprime) {\r\n            var _a = tslib_1.__read(this._linear_compute_state(), 2), factor = _a[0], offset = _a[1];\r\n            return (xprime - offset) / factor;\r\n        };\r\n        Scale.prototype._linear_v_invert = function (xprimes) {\r\n            var _a = tslib_1.__read(this._linear_compute_state(), 2), factor = _a[0], offset = _a[1];\r\n            var result = new types_1.NumberArray(xprimes.length);\r\n            for (var i = 0; i < xprimes.length; i++)\r\n                result[i] = (xprimes[i] - offset) / factor;\r\n            return result;\r\n        };\r\n        /*protected*/ Scale.prototype._linear_compute_state = function () {\r\n            //\r\n            //  (t1 - t0)       (t1 - t0)\r\n            //  --------- * x - --------- * s0 + t0\r\n            //  (s1 - s0)       (s1 - s0)\r\n            //\r\n            // [  factor  ]     [    offset    ]\r\n            //\r\n            var source_start = this.source_range.start;\r\n            var source_end = this.source_range.end;\r\n            var target_start = this.target_range.start;\r\n            var target_end = this.target_range.end;\r\n            var factor = (target_end - target_start) / (source_end - source_start);\r\n            var offset = -(factor * source_start) + target_start;\r\n            return [factor, offset];\r\n        };\r\n        return Scale;\r\n    }(transforms_1.Transform));\r\n    exports.Scale = Scale;\r\n    Scale.__name__ = \"Scale\";\r\n    Scale.init_Scale();\r\n}\r\n","/* models\\transforms\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var customjs_transform_1 = require(264) /* ./customjs_transform */;\r\n    exports.CustomJSTransform = customjs_transform_1.CustomJSTransform;\r\n    var dodge_1 = require(265) /* ./dodge */;\r\n    exports.Dodge = dodge_1.Dodge;\r\n    var interpolator_1 = require(267) /* ./interpolator */;\r\n    exports.Interpolator = interpolator_1.Interpolator;\r\n    var jitter_1 = require(268) /* ./jitter */;\r\n    exports.Jitter = jitter_1.Jitter;\r\n    var linear_interpolator_1 = require(269) /* ./linear_interpolator */;\r\n    exports.LinearInterpolator = linear_interpolator_1.LinearInterpolator;\r\n    var step_interpolator_1 = require(270) /* ./step_interpolator */;\r\n    exports.StepInterpolator = step_interpolator_1.StepInterpolator;\r\n    var transform_1 = require(252) /* ./transform */;\r\n    exports.Transform = transform_1.Transform;\r\n}\r\n","/* models\\transforms\\customjs_transform.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var transform_1 = require(252) /* ./transform */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var string_1 = require(144) /* ../../core/util/string */;\r\n    var CustomJSTransform = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CustomJSTransform, _super);\r\n        function CustomJSTransform(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CustomJSTransform.init_CustomJSTransform = function () {\r\n            this.define({\r\n                args: [p.Any, {}],\r\n                func: [p.String, \"\"],\r\n                v_func: [p.String, \"\"],\r\n            });\r\n        };\r\n        Object.defineProperty(CustomJSTransform.prototype, \"names\", {\r\n            get: function () {\r\n                return object_1.keys(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CustomJSTransform.prototype, \"values\", {\r\n            get: function () {\r\n                return object_1.values(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CustomJSTransform.prototype._make_transform = function (name, func) {\r\n            return new (Function.bind.apply(Function, tslib_1.__spread([void 0], this.names, [name, string_1.use_strict(func)])))();\r\n        };\r\n        Object.defineProperty(CustomJSTransform.prototype, \"scalar_transform\", {\r\n            get: function () {\r\n                return this._make_transform(\"x\", this.func);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CustomJSTransform.prototype, \"vector_transform\", {\r\n            get: function () {\r\n                return this._make_transform(\"xs\", this.v_func);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CustomJSTransform.prototype.compute = function (x) {\r\n            return this.scalar_transform.apply(this, tslib_1.__spread(this.values, [x]));\r\n        };\r\n        CustomJSTransform.prototype.v_compute = function (xs) {\r\n            return this.vector_transform.apply(this, tslib_1.__spread(this.values, [xs]));\r\n        };\r\n        return CustomJSTransform;\r\n    }(transform_1.Transform));\r\n    exports.CustomJSTransform = CustomJSTransform;\r\n    CustomJSTransform.__name__ = \"CustomJSTransform\";\r\n    CustomJSTransform.init_CustomJSTransform();\r\n}\r\n","/* models\\transforms\\dodge.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var range_transform_1 = require(266) /* ./range_transform */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var Dodge = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Dodge, _super);\r\n        function Dodge(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Dodge.init_Dodge = function () {\r\n            this.define({\r\n                value: [p.Number, 0],\r\n            });\r\n        };\r\n        Dodge.prototype._compute = function (x) {\r\n            return x + this.value;\r\n        };\r\n        return Dodge;\r\n    }(range_transform_1.RangeTransform));\r\n    exports.Dodge = Dodge;\r\n    Dodge.__name__ = \"Dodge\";\r\n    Dodge.init_Dodge();\r\n}\r\n","/* models\\transforms\\range_transform.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var transform_1 = require(252) /* ./transform */;\r\n    var factor_range_1 = require(213) /* ../ranges/factor_range */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var types_2 = require(123) /* ../../core/util/types */;\r\n    var RangeTransform = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RangeTransform, _super);\r\n        function RangeTransform(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        RangeTransform.init_RangeTransform = function () {\r\n            this.define({\r\n                range: [p.Instance],\r\n            });\r\n        };\r\n        RangeTransform.prototype.v_compute = function (xs0) {\r\n            var xs;\r\n            if (this.range instanceof factor_range_1.FactorRange)\r\n                xs = this.range.v_synthetic(xs0);\r\n            else if (types_2.isArrayableOf(xs0, types_2.isNumber))\r\n                xs = xs0;\r\n            else\r\n                throw new Error(\"unexpected\");\r\n            var result = new types_1.NumberArray(xs.length);\r\n            for (var i = 0; i < xs.length; i++) {\r\n                var x = xs[i];\r\n                result[i] = this._compute(x);\r\n            }\r\n            return result;\r\n        };\r\n        RangeTransform.prototype.compute = function (x) {\r\n            if (this.range instanceof factor_range_1.FactorRange)\r\n                return this._compute(this.range.synthetic(x));\r\n            else if (types_2.isNumber(x))\r\n                return this._compute(x);\r\n            else\r\n                throw new Error(\"unexpected\");\r\n        };\r\n        return RangeTransform;\r\n    }(transform_1.Transform));\r\n    exports.RangeTransform = RangeTransform;\r\n    RangeTransform.__name__ = \"RangeTransform\";\r\n    RangeTransform.init_RangeTransform();\r\n}\r\n","/* models\\transforms\\interpolator.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var transform_1 = require(252) /* ./transform */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var types_2 = require(123) /* ../../core/util/types */;\r\n    var Interpolator = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Interpolator, _super);\r\n        function Interpolator(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this._sorted_dirty = true;\r\n            return _this;\r\n        }\r\n        Interpolator.init_Interpolator = function () {\r\n            this.define({\r\n                x: [p.Any],\r\n                y: [p.Any],\r\n                data: [p.Any],\r\n                clip: [p.Boolean, true],\r\n            });\r\n        };\r\n        Interpolator.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.change, function () { return _this._sorted_dirty = true; });\r\n        };\r\n        Interpolator.prototype.v_compute = function (xs) {\r\n            var result = new types_1.NumberArray(xs.length);\r\n            for (var i = 0; i < xs.length; i++) {\r\n                var x = xs[i];\r\n                result[i] = this.compute(x);\r\n            }\r\n            return result;\r\n        };\r\n        Interpolator.prototype.sort = function (descending) {\r\n            if (descending === void 0) {\r\n                descending = false;\r\n            }\r\n            if (!this._sorted_dirty)\r\n                return;\r\n            var tsx;\r\n            var tsy;\r\n            if (types_2.isString(this.x) && types_2.isString(this.y) && this.data != null) {\r\n                var column_names = this.data.columns();\r\n                if (!array_1.includes(column_names, this.x))\r\n                    throw new Error(\"The x parameter does not correspond to a valid column name defined in the data parameter\");\r\n                if (!array_1.includes(column_names, this.y))\r\n                    throw new Error(\"The y parameter does not correspond to a valid column name defined in the data parameter\");\r\n                tsx = this.data.get_column(this.x);\r\n                tsy = this.data.get_column(this.y);\r\n            }\r\n            else if (types_2.isArray(this.x) && types_2.isArray(this.y)) {\r\n                tsx = this.x;\r\n                tsy = this.y;\r\n            }\r\n            else {\r\n                throw new Error(\"parameters 'x' and 'y' must be both either string fields or arrays\");\r\n            }\r\n            if (tsx.length !== tsy.length)\r\n                throw new Error(\"The length for x and y do not match\");\r\n            if (tsx.length < 2)\r\n                throw new Error(\"x and y must have at least two elements to support interpolation\");\r\n            var n = tsx.length;\r\n            var index = new Uint32Array(n);\r\n            for (var i = 0; i < n; i++) {\r\n                index[i] = i;\r\n            }\r\n            var sign = descending ? -1 : 1;\r\n            index.sort(function (i, j) { return sign * (tsx[i] - tsx[j]); });\r\n            this._x_sorted = new types_1.NumberArray(n);\r\n            this._y_sorted = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                this._x_sorted[i] = tsx[index[i]];\r\n                this._y_sorted[i] = tsy[index[i]];\r\n            }\r\n            this._sorted_dirty = false;\r\n        };\r\n        return Interpolator;\r\n    }(transform_1.Transform));\r\n    exports.Interpolator = Interpolator;\r\n    Interpolator.__name__ = \"Interpolator\";\r\n    Interpolator.init_Interpolator();\r\n}\r\n","/* models\\transforms\\jitter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var range_transform_1 = require(266) /* ./range_transform */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var bokeh_math = tslib_1.__importStar(require(125) /* ../../core/util/math */);\r\n    var Jitter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Jitter, _super);\r\n        function Jitter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Jitter.init_Jitter = function () {\r\n            this.define({\r\n                mean: [p.Number, 0],\r\n                width: [p.Number, 1],\r\n                distribution: [p.Distribution, 'uniform'],\r\n            });\r\n        };\r\n        Jitter.prototype.v_compute = function (xs0) {\r\n            if (this.previous_values != null && this.previous_values.length == xs0.length)\r\n                return this.previous_values;\r\n            this.previous_values = _super.prototype.v_compute.call(this, xs0);\r\n            return this.previous_values;\r\n        };\r\n        Jitter.prototype._compute = function (x) {\r\n            switch (this.distribution) {\r\n                case \"uniform\":\r\n                    return x + this.mean + (bokeh_math.random() - 0.5) * this.width;\r\n                case \"normal\":\r\n                    return x + bokeh_math.rnorm(this.mean, this.width);\r\n            }\r\n        };\r\n        return Jitter;\r\n    }(range_transform_1.RangeTransform));\r\n    exports.Jitter = Jitter;\r\n    Jitter.__name__ = \"Jitter\";\r\n    Jitter.init_Jitter();\r\n}\r\n","/* models\\transforms\\linear_interpolator.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var interpolator_1 = require(267) /* ./interpolator */;\r\n    var LinearInterpolator = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LinearInterpolator, _super);\r\n        function LinearInterpolator(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LinearInterpolator.prototype.compute = function (x) {\r\n            this.sort(false);\r\n            if (this.clip) {\r\n                if (x < this._x_sorted[0] || x > this._x_sorted[this._x_sorted.length - 1])\r\n                    return NaN;\r\n            }\r\n            else {\r\n                if (x < this._x_sorted[0])\r\n                    return this._y_sorted[0];\r\n                if (x > this._x_sorted[this._x_sorted.length - 1])\r\n                    return this._y_sorted[this._y_sorted.length - 1];\r\n            }\r\n            if (x == this._x_sorted[0])\r\n                return this._y_sorted[0];\r\n            var ind = array_1.find_last_index(this._x_sorted, function (num) { return num < x; });\r\n            var x1 = this._x_sorted[ind];\r\n            var x2 = this._x_sorted[ind + 1];\r\n            var y1 = this._y_sorted[ind];\r\n            var y2 = this._y_sorted[ind + 1];\r\n            return y1 + (((x - x1) / (x2 - x1)) * (y2 - y1));\r\n        };\r\n        return LinearInterpolator;\r\n    }(interpolator_1.Interpolator));\r\n    exports.LinearInterpolator = LinearInterpolator;\r\n    LinearInterpolator.__name__ = \"LinearInterpolator\";\r\n}\r\n","/* models\\transforms\\step_interpolator.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var interpolator_1 = require(267) /* ./interpolator */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var StepInterpolator = /** @class */ (function (_super) {\r\n        tslib_1.__extends(StepInterpolator, _super);\r\n        function StepInterpolator(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        StepInterpolator.init_StepInterpolator = function () {\r\n            this.define({\r\n                mode: [p.StepMode, \"after\"],\r\n            });\r\n        };\r\n        StepInterpolator.prototype.compute = function (x) {\r\n            this.sort(false);\r\n            if (this.clip) {\r\n                if (x < this._x_sorted[0] || x > this._x_sorted[this._x_sorted.length - 1])\r\n                    return NaN;\r\n            }\r\n            else {\r\n                if (x < this._x_sorted[0])\r\n                    return this._y_sorted[0];\r\n                if (x > this._x_sorted[this._x_sorted.length - 1])\r\n                    return this._y_sorted[this._y_sorted.length - 1];\r\n            }\r\n            var ind;\r\n            switch (this.mode) {\r\n                case \"after\": {\r\n                    ind = array_1.find_last_index(this._x_sorted, function (num) { return x >= num; });\r\n                    break;\r\n                }\r\n                case \"before\": {\r\n                    ind = array_1.find_index(this._x_sorted, function (num) { return x <= num; });\r\n                    break;\r\n                }\r\n                case \"center\": {\r\n                    var diffs = this._x_sorted.map(function (tx) { return Math.abs(tx - x); });\r\n                    var mdiff_1 = array_1.min(diffs);\r\n                    ind = array_1.find_index(diffs, function (num) { return mdiff_1 === num; });\r\n                    break;\r\n                }\r\n                default:\r\n                    throw new Error(\"unknown mode: \" + this.mode);\r\n            }\r\n            return ind != -1 ? this._y_sorted[ind] : NaN;\r\n        };\r\n        return StepInterpolator;\r\n    }(interpolator_1.Interpolator));\r\n    exports.StepInterpolator = StepInterpolator;\r\n    StepInterpolator.__name__ = \"StepInterpolator\";\r\n    StepInterpolator.init_StepInterpolator();\r\n}\r\n","/* models\\scales\\linear_interpolation_scale.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var scale_1 = require(262) /* ./scale */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var LinearInterpolationScale = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LinearInterpolationScale, _super);\r\n        function LinearInterpolationScale(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LinearInterpolationScale.init_LinearInterpolationScale = function () {\r\n            this.internal({ binning: [p.Array] });\r\n        };\r\n        LinearInterpolationScale.prototype.compute = function (x) {\r\n            return x;\r\n        };\r\n        LinearInterpolationScale.prototype.v_compute = function (xs) {\r\n            var _this = this;\r\n            var norm_xs = arrayable_1.norm(xs, this.source_range.start, this.source_range.end);\r\n            var edges_norm = array_1.linspace(0, 1, this.binning.length);\r\n            var interpolated = arrayable_1.interpolate(norm_xs, edges_norm, this.binning);\r\n            var norm_interp = arrayable_1.norm(interpolated, this.source_range.start, this.source_range.end);\r\n            var target_span = this.target_range.end - this.target_range.start;\r\n            var sxs = arrayable_1.map(norm_interp, function (x) { return _this.target_range.start + x * target_span; });\r\n            return new types_1.NumberArray(sxs);\r\n        };\r\n        LinearInterpolationScale.prototype.invert = function (xprime) {\r\n            return xprime;\r\n        };\r\n        LinearInterpolationScale.prototype.v_invert = function (xprimes) {\r\n            return new types_1.NumberArray(xprimes);\r\n        };\r\n        return LinearInterpolationScale;\r\n    }(scale_1.Scale));\r\n    exports.LinearInterpolationScale = LinearInterpolationScale;\r\n    LinearInterpolationScale.__name__ = \"LinearInterpolationScale\";\r\n    LinearInterpolationScale.init_LinearInterpolationScale();\r\n}\r\n","/* models\\scales\\log_scale.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_scale_1 = require(261) /* ./continuous_scale */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var LogScale = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LogScale, _super);\r\n        function LogScale(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LogScale.prototype.compute = function (x) {\r\n            var _a = tslib_1.__read(this._compute_state(), 4), factor = _a[0], offset = _a[1], inter_factor = _a[2], inter_offset = _a[3];\r\n            var value;\r\n            if (inter_factor == 0)\r\n                value = 0;\r\n            else {\r\n                var _x = (Math.log(x) - inter_offset) / inter_factor;\r\n                if (isFinite(_x))\r\n                    value = _x * factor + offset;\r\n                else\r\n                    value = NaN;\r\n            }\r\n            return value;\r\n        };\r\n        LogScale.prototype.v_compute = function (xs) {\r\n            var _a = tslib_1.__read(this._compute_state(), 4), factor = _a[0], offset = _a[1], inter_factor = _a[2], inter_offset = _a[3];\r\n            var result = new types_1.NumberArray(xs.length);\r\n            if (inter_factor == 0) {\r\n                for (var i = 0; i < xs.length; i++)\r\n                    result[i] = 0;\r\n            }\r\n            else {\r\n                for (var i = 0; i < xs.length; i++) {\r\n                    var _x = (Math.log(xs[i]) - inter_offset) / inter_factor;\r\n                    var value = void 0;\r\n                    if (isFinite(_x))\r\n                        value = _x * factor + offset;\r\n                    else\r\n                        value = NaN;\r\n                    result[i] = value;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        LogScale.prototype.invert = function (xprime) {\r\n            var _a = tslib_1.__read(this._compute_state(), 4), factor = _a[0], offset = _a[1], inter_factor = _a[2], inter_offset = _a[3];\r\n            var value = (xprime - offset) / factor;\r\n            return Math.exp(inter_factor * value + inter_offset);\r\n        };\r\n        LogScale.prototype.v_invert = function (xprimes) {\r\n            var _a = tslib_1.__read(this._compute_state(), 4), factor = _a[0], offset = _a[1], inter_factor = _a[2], inter_offset = _a[3];\r\n            var result = new types_1.NumberArray(xprimes.length);\r\n            for (var i = 0; i < xprimes.length; i++) {\r\n                var value = (xprimes[i] - offset) / factor;\r\n                result[i] = Math.exp(inter_factor * value + inter_offset);\r\n            }\r\n            return result;\r\n        };\r\n        LogScale.prototype._get_safe_factor = function (orig_start, orig_end) {\r\n            var _a;\r\n            var start = orig_start < 0 ? 0 : orig_start;\r\n            var end = orig_end < 0 ? 0 : orig_end;\r\n            if (start == end) {\r\n                if (start == 0)\r\n                    _a = tslib_1.__read([1, 10], 2), start = _a[0], end = _a[1];\r\n                else {\r\n                    var log_val = Math.log(start) / Math.log(10);\r\n                    start = Math.pow(10, Math.floor(log_val));\r\n                    if (Math.ceil(log_val) != Math.floor(log_val))\r\n                        end = Math.pow(10, Math.ceil(log_val));\r\n                    else\r\n                        end = Math.pow(10, (Math.ceil(log_val) + 1));\r\n                }\r\n            }\r\n            return [start, end];\r\n        };\r\n        /*protected*/ LogScale.prototype._compute_state = function () {\r\n            var source_start = this.source_range.start;\r\n            var source_end = this.source_range.end;\r\n            var target_start = this.target_range.start;\r\n            var target_end = this.target_range.end;\r\n            var screen_range = target_end - target_start;\r\n            var _a = tslib_1.__read(this._get_safe_factor(source_start, source_end), 2), start = _a[0], end = _a[1];\r\n            var inter_factor;\r\n            var inter_offset;\r\n            if (start == 0) {\r\n                inter_factor = Math.log(end);\r\n                inter_offset = 0;\r\n            }\r\n            else {\r\n                inter_factor = Math.log(end) - Math.log(start);\r\n                inter_offset = Math.log(start);\r\n            }\r\n            var factor = screen_range;\r\n            var offset = target_start;\r\n            return [factor, offset, inter_factor, inter_offset];\r\n        };\r\n        return LogScale;\r\n    }(continuous_scale_1.ContinuousScale));\r\n    exports.LogScale = LogScale;\r\n    LogScale.__name__ = \"LogScale\";\r\n}\r\n","/* models\\ranges\\range1d.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var range_1 = require(214) /* ./range */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var Range1d = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Range1d, _super);\r\n        function Range1d(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Range1d.init_Range1d = function () {\r\n            this.define({\r\n                start: [p.Number, 0],\r\n                end: [p.Number, 1],\r\n                reset_start: [p.Number],\r\n                reset_end: [p.Number],\r\n            });\r\n        };\r\n        Range1d.prototype._set_auto_bounds = function () {\r\n            if (this.bounds == 'auto') {\r\n                var min = Math.min(this.reset_start, this.reset_end);\r\n                var max = Math.max(this.reset_start, this.reset_end);\r\n                this.setv({ bounds: [min, max] }, { silent: true });\r\n            }\r\n        };\r\n        Range1d.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            if (this.reset_start == null) {\r\n                this.reset_start = this.start;\r\n            }\r\n            if (this.reset_end == null) {\r\n                this.reset_end = this.end;\r\n            }\r\n            this._set_auto_bounds();\r\n        };\r\n        Object.defineProperty(Range1d.prototype, \"min\", {\r\n            get: function () {\r\n                return Math.min(this.start, this.end);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Range1d.prototype, \"max\", {\r\n            get: function () {\r\n                return Math.max(this.start, this.end);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Range1d.prototype.reset = function () {\r\n            this._set_auto_bounds();\r\n            if (this.start != this.reset_start || this.end != this.reset_end)\r\n                this.setv({ start: this.reset_start, end: this.reset_end });\r\n            else\r\n                this.change.emit();\r\n        };\r\n        return Range1d;\r\n    }(range_1.Range));\r\n    exports.Range1d = Range1d;\r\n    Range1d.__name__ = \"Range1d\";\r\n    Range1d.init_Range1d();\r\n}\r\n","/* core\\util\\text.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var dom_1 = require(187) /* ../dom */;\r\n    var _font_cache = new Map();\r\n    function measure_font(font) {\r\n        var metrics = _font_cache.get(font);\r\n        if (metrics != null)\r\n            return metrics;\r\n        var text = dom_1.span({ style: { font: font } }, \"Hg\");\r\n        var block = dom_1.div({ style: { display: \"inline-block\", width: \"1px\", height: \"0px\" } });\r\n        var elem = dom_1.div({}, text, block);\r\n        document.body.appendChild(elem);\r\n        try {\r\n            block.style.verticalAlign = \"baseline\";\r\n            var ascent = dom_1.offset(block).top - dom_1.offset(text).top;\r\n            block.style.verticalAlign = \"bottom\";\r\n            var height = dom_1.offset(block).top - dom_1.offset(text).top;\r\n            var result = { height: height, ascent: ascent, descent: height - ascent };\r\n            _font_cache.set(font, result);\r\n            return result;\r\n        }\r\n        finally {\r\n            document.body.removeChild(elem);\r\n        }\r\n    }\r\n    exports.measure_font = measure_font;\r\n    var _text_cache = new Map();\r\n    function measure_text(text, font) {\r\n        var size_cache = _text_cache.get(font);\r\n        if (size_cache != null) {\r\n            var size = size_cache.get(text);\r\n            if (size != null)\r\n                return size;\r\n        }\r\n        else {\r\n            size_cache = new Map();\r\n            _text_cache.set(font, size_cache);\r\n        }\r\n        var el = dom_1.div({ style: { display: \"inline-block\", \"white-space\": \"nowrap\", font: font } }, text);\r\n        document.body.appendChild(el);\r\n        try {\r\n            var _a = el.getBoundingClientRect(), width = _a.width, height = _a.height;\r\n            size_cache.set(text, { width: width, height: height });\r\n            return { width: width, height: height };\r\n        }\r\n        finally {\r\n            document.body.removeChild(el);\r\n        }\r\n    }\r\n    exports.measure_text = measure_text;\r\n}\r\n","/* models\\annotations\\label.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var text_annotation_1 = require(276) /* ./text_annotation */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var LabelView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LabelView, _super);\r\n        function LabelView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LabelView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.visuals.warm_cache();\r\n        };\r\n        LabelView.prototype._get_size = function () {\r\n            var ctx = this.layer.ctx;\r\n            this.visuals.text.set_value(ctx);\r\n            var _a = ctx.measureText(this.model.text), width = _a.width, ascent = _a.ascent;\r\n            return { width: width, height: ascent };\r\n        };\r\n        LabelView.prototype._render = function () {\r\n            // Here because AngleSpec does units transform and label doesn't support specs\r\n            var angle;\r\n            switch (this.model.angle_units) {\r\n                case \"rad\": {\r\n                    angle = -this.model.angle;\r\n                    break;\r\n                }\r\n                case \"deg\": {\r\n                    angle = (-this.model.angle * Math.PI) / 180.0;\r\n                    break;\r\n                }\r\n            }\r\n            var panel = this.panel != null ? this.panel : this.plot_view.frame;\r\n            var xscale = this.coordinates.x_scale;\r\n            var yscale = this.coordinates.y_scale;\r\n            var sx = this.model.x_units == \"data\" ? xscale.compute(this.model.x) : panel.xview.compute(this.model.x);\r\n            var sy = this.model.y_units == \"data\" ? yscale.compute(this.model.y) : panel.yview.compute(this.model.y);\r\n            sx += this.model.x_offset;\r\n            sy -= this.model.y_offset;\r\n            var draw = this.model.render_mode == 'canvas' ? this._canvas_text.bind(this) : this._css_text.bind(this);\r\n            draw(this.layer.ctx, this.model.text, sx, sy, angle);\r\n        };\r\n        return LabelView;\r\n    }(text_annotation_1.TextAnnotationView));\r\n    exports.LabelView = LabelView;\r\n    LabelView.__name__ = \"LabelView\";\r\n    var Label = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Label, _super);\r\n        function Label(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Label.init_Label = function () {\r\n            this.prototype.default_view = LabelView;\r\n            this.mixins([\r\n                mixins.Text /*Scalar*/,\r\n                [\"border_\", mixins.Line],\r\n                [\"background_\", mixins.Fill],\r\n            ]);\r\n            this.define({\r\n                x: [p.Number],\r\n                x_units: [p.SpatialUnits, 'data'],\r\n                y: [p.Number],\r\n                y_units: [p.SpatialUnits, 'data'],\r\n                text: [p.String],\r\n                angle: [p.Angle, 0],\r\n                angle_units: [p.AngleUnits, 'rad'],\r\n                x_offset: [p.Number, 0],\r\n                y_offset: [p.Number, 0],\r\n            });\r\n            this.override({\r\n                background_fill_color: null,\r\n                border_line_color: null,\r\n            });\r\n        };\r\n        return Label;\r\n    }(text_annotation_1.TextAnnotation));\r\n    exports.Label = Label;\r\n    Label.__name__ = \"Label\";\r\n    Label.init_Label();\r\n}\r\n","/* models\\annotations\\text_annotation.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var text_1 = require(274) /* ../../core/util/text */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var TextAnnotationView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TextAnnotationView, _super);\r\n        function TextAnnotationView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.rotate = true;\r\n            return _this;\r\n        }\r\n        TextAnnotationView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            if (this.model.render_mode == 'css') {\r\n                this.el = dom_1.div();\r\n                this.plot_view.canvas_view.add_overlay(this.el);\r\n            }\r\n        };\r\n        TextAnnotationView.prototype.remove = function () {\r\n            if (this.el != null)\r\n                dom_1.remove(this.el);\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        TextAnnotationView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            if (this.model.render_mode == 'css') {\r\n                // dispatch CSS update immediately\r\n                this.connect(this.model.change, function () { return _this.render(); });\r\n            }\r\n            else {\r\n                this.connect(this.model.change, function () { return _this.plot_view.request_render(); });\r\n            }\r\n        };\r\n        TextAnnotationView.prototype.render = function () {\r\n            if (!this.model.visible && this.model.render_mode == \"css\")\r\n                dom_1.undisplay(this.el);\r\n            _super.prototype.render.call(this);\r\n        };\r\n        TextAnnotationView.prototype._calculate_text_dimensions = function (ctx, text) {\r\n            var width = ctx.measureText(text).width;\r\n            var height = text_1.measure_font(this.visuals.text.font_value()).height;\r\n            return [width, height];\r\n        };\r\n        TextAnnotationView.prototype._calculate_bounding_box_dimensions = function (ctx, text) {\r\n            var _a = tslib_1.__read(this._calculate_text_dimensions(ctx, text), 2), width = _a[0], height = _a[1];\r\n            var x_offset;\r\n            switch (ctx.textAlign) {\r\n                case 'left':\r\n                    x_offset = 0;\r\n                    break;\r\n                case 'center':\r\n                    x_offset = -width / 2;\r\n                    break;\r\n                case 'right':\r\n                    x_offset = -width;\r\n                    break;\r\n                default:\r\n                    assert_1.unreachable();\r\n            }\r\n            // guestimated from https://www.w3.org/TR/2dcontext/#dom-context-2d-textbaseline\r\n            var y_offset;\r\n            switch (ctx.textBaseline) {\r\n                case 'top':\r\n                    y_offset = 0.0;\r\n                    break;\r\n                case 'middle':\r\n                    y_offset = -0.5 * height;\r\n                    break;\r\n                case 'bottom':\r\n                    y_offset = -1.0 * height;\r\n                    break;\r\n                case 'alphabetic':\r\n                    y_offset = -0.8 * height;\r\n                    break;\r\n                case 'hanging':\r\n                    y_offset = -0.17 * height;\r\n                    break;\r\n                case 'ideographic':\r\n                    y_offset = -0.83 * height;\r\n                    break;\r\n                default:\r\n                    assert_1.unreachable();\r\n            }\r\n            return [x_offset, y_offset, width, height];\r\n        };\r\n        TextAnnotationView.prototype._canvas_text = function (ctx, text, sx, sy, angle) {\r\n            this.visuals.text.set_value(ctx);\r\n            var bbox_dims = this._calculate_bounding_box_dimensions(ctx, text);\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.translate(sx, sy);\r\n            if (angle)\r\n                ctx.rotate(angle);\r\n            ctx.rect(bbox_dims[0], bbox_dims[1], bbox_dims[2], bbox_dims[3]);\r\n            if (this.visuals.background_fill.doit) {\r\n                this.visuals.background_fill.set_value(ctx);\r\n                ctx.fill();\r\n            }\r\n            if (this.visuals.border_line.doit) {\r\n                this.visuals.border_line.set_value(ctx);\r\n                ctx.stroke();\r\n            }\r\n            if (this.visuals.text.doit) {\r\n                this.visuals.text.set_value(ctx);\r\n                ctx.fillText(text, 0, 0);\r\n            }\r\n            ctx.restore();\r\n        };\r\n        TextAnnotationView.prototype._css_text = function (ctx, text, sx, sy, angle) {\r\n            var el = this.el;\r\n            assert_1.assert(el != null);\r\n            dom_1.undisplay(el);\r\n            this.visuals.text.set_value(ctx);\r\n            var bbox_dims = this._calculate_bounding_box_dimensions(ctx, text);\r\n            // attempt to support vector string-style (\"8 4 8\") line dashing for css mode\r\n            var ld = this.visuals.border_line.line_dash.value();\r\n            var line_dash = ld.length < 2 ? \"solid\" : \"dashed\";\r\n            this.visuals.border_line.set_value(ctx);\r\n            this.visuals.background_fill.set_value(ctx);\r\n            el.style.position = 'absolute';\r\n            el.style.left = sx + bbox_dims[0] + \"px\";\r\n            el.style.top = sy + bbox_dims[1] + \"px\";\r\n            el.style.color = \"\" + this.visuals.text.text_color.value();\r\n            el.style.opacity = \"\" + this.visuals.text.text_alpha.value();\r\n            el.style.font = \"\" + this.visuals.text.font_value();\r\n            el.style.lineHeight = \"normal\"; // needed to prevent ipynb css override\r\n            if (angle) {\r\n                el.style.transform = \"rotate(\" + angle + \"rad)\";\r\n            }\r\n            if (this.visuals.background_fill.doit) {\r\n                el.style.backgroundColor = \"\" + this.visuals.background_fill.color_value();\r\n            }\r\n            if (this.visuals.border_line.doit) {\r\n                el.style.borderStyle = \"\" + line_dash;\r\n                el.style.borderWidth = this.visuals.border_line.line_width.value() + \"px\";\r\n                el.style.borderColor = \"\" + this.visuals.border_line.color_value();\r\n            }\r\n            el.textContent = text;\r\n            dom_1.display(el);\r\n        };\r\n        return TextAnnotationView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.TextAnnotationView = TextAnnotationView;\r\n    TextAnnotationView.__name__ = \"TextAnnotationView\";\r\n    var TextAnnotation = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TextAnnotation, _super);\r\n        function TextAnnotation(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        TextAnnotation.init_TextAnnotation = function () {\r\n            this.define({\r\n                render_mode: [p.RenderMode, \"canvas\"],\r\n            });\r\n        };\r\n        return TextAnnotation;\r\n    }(annotation_1.Annotation));\r\n    exports.TextAnnotation = TextAnnotation;\r\n    TextAnnotation.__name__ = \"TextAnnotation\";\r\n    TextAnnotation.init_TextAnnotation();\r\n}\r\n","/* models\\annotations\\label_set.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var text_annotation_1 = require(276) /* ./text_annotation */;\r\n    var column_data_source_1 = require(200) /* ../sources/column_data_source */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var LabelSetView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LabelSetView, _super);\r\n        function LabelSetView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LabelSetView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.set_data(this.model.source);\r\n            if (this.model.render_mode == 'css') {\r\n                for (var i = 0, end = this._text.length; i < end; i++) {\r\n                    var el = dom_1.div({ style: { display: \"none\" } });\r\n                    this.el.appendChild(el);\r\n                }\r\n            }\r\n        };\r\n        LabelSetView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            if (this.model.render_mode == 'css') {\r\n                // dispatch CSS update immediately\r\n                this.connect(this.model.change, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.render();\r\n                });\r\n                this.connect(this.model.source.streaming, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.render();\r\n                });\r\n                this.connect(this.model.source.patching, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.render();\r\n                });\r\n                this.connect(this.model.source.change, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.render();\r\n                });\r\n            }\r\n            else {\r\n                this.connect(this.model.change, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.plot_view.request_render();\r\n                });\r\n                this.connect(this.model.source.streaming, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.plot_view.request_render();\r\n                });\r\n                this.connect(this.model.source.patching, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.plot_view.request_render();\r\n                });\r\n                this.connect(this.model.source.change, function () {\r\n                    _this.set_data(_this.model.source);\r\n                    _this.plot_view.request_render();\r\n                });\r\n            }\r\n        };\r\n        LabelSetView.prototype.set_data = function (source) {\r\n            _super.prototype.set_data.call(this, source);\r\n            this.visuals.warm_cache(source);\r\n        };\r\n        LabelSetView.prototype._map_data = function () {\r\n            var xscale = this.coordinates.x_scale;\r\n            var yscale = this.coordinates.y_scale;\r\n            var panel = this.panel != null ? this.panel : this.plot_view.frame;\r\n            var sx = this.model.x_units == \"data\" ? xscale.v_compute(this._x) : panel.xview.v_compute(this._x);\r\n            var sy = this.model.y_units == \"data\" ? yscale.v_compute(this._y) : panel.yview.v_compute(this._y);\r\n            return [sx, sy];\r\n        };\r\n        LabelSetView.prototype._render = function () {\r\n            var draw = this.model.render_mode == 'canvas' ? this._v_canvas_text.bind(this) : this._v_css_text.bind(this);\r\n            var ctx = this.layer.ctx;\r\n            var _a = tslib_1.__read(this._map_data(), 2), sx = _a[0], sy = _a[1];\r\n            for (var i = 0, end = this._text.length; i < end; i++) {\r\n                draw(ctx, i, this._text[i], sx[i] + this._x_offset[i], sy[i] - this._y_offset[i], this._angle[i]);\r\n            }\r\n        };\r\n        LabelSetView.prototype._get_size = function () {\r\n            var ctx = this.layer.ctx;\r\n            this.visuals.text.set_value(ctx);\r\n            var _a = ctx.measureText(this._text[0]), width = _a.width, ascent = _a.ascent;\r\n            return { width: width, height: ascent };\r\n        };\r\n        LabelSetView.prototype._v_canvas_text = function (ctx, i, text, sx, sy, angle) {\r\n            this.visuals.text.set_vectorize(ctx, i);\r\n            var bbox_dims = this._calculate_bounding_box_dimensions(ctx, text);\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.translate(sx, sy);\r\n            ctx.rotate(angle);\r\n            ctx.rect(bbox_dims[0], bbox_dims[1], bbox_dims[2], bbox_dims[3]);\r\n            if (this.visuals.background_fill.doit) {\r\n                this.visuals.background_fill.set_vectorize(ctx, i);\r\n                ctx.fill();\r\n            }\r\n            if (this.visuals.border_line.doit) {\r\n                this.visuals.border_line.set_vectorize(ctx, i);\r\n                ctx.stroke();\r\n            }\r\n            if (this.visuals.text.doit) {\r\n                this.visuals.text.set_vectorize(ctx, i);\r\n                ctx.fillText(text, 0, 0);\r\n            }\r\n            ctx.restore();\r\n        };\r\n        LabelSetView.prototype._v_css_text = function (ctx, i, text, sx, sy, angle) {\r\n            var el = this.el.children[i];\r\n            el.textContent = text;\r\n            this.visuals.text.set_vectorize(ctx, i);\r\n            var bbox_dims = this._calculate_bounding_box_dimensions(ctx, text);\r\n            // attempt to support vector-style (\"8 4 8\") line dashing for css mode\r\n            var ld = this.visuals.border_line.line_dash.value();\r\n            var line_dash = ld.length < 2 ? \"solid\" : \"dashed\";\r\n            this.visuals.border_line.set_vectorize(ctx, i);\r\n            this.visuals.background_fill.set_vectorize(ctx, i);\r\n            el.style.position = 'absolute';\r\n            el.style.left = sx + bbox_dims[0] + \"px\";\r\n            el.style.top = sy + bbox_dims[1] + \"px\";\r\n            el.style.color = \"\" + this.visuals.text.text_color.value();\r\n            el.style.opacity = \"\" + this.visuals.text.text_alpha.value();\r\n            el.style.font = \"\" + this.visuals.text.font_value();\r\n            el.style.lineHeight = \"normal\"; // needed to prevent ipynb css override\r\n            if (angle) {\r\n                el.style.transform = \"rotate(\" + angle + \"rad)\";\r\n            }\r\n            if (this.visuals.background_fill.doit) {\r\n                el.style.backgroundColor = \"\" + this.visuals.background_fill.color_value();\r\n            }\r\n            if (this.visuals.border_line.doit) {\r\n                el.style.borderStyle = \"\" + line_dash;\r\n                el.style.borderWidth = this.visuals.border_line.line_width.value() + \"px\";\r\n                el.style.borderColor = \"\" + this.visuals.border_line.color_value();\r\n            }\r\n            dom_1.display(el);\r\n        };\r\n        return LabelSetView;\r\n    }(text_annotation_1.TextAnnotationView));\r\n    exports.LabelSetView = LabelSetView;\r\n    LabelSetView.__name__ = \"LabelSetView\";\r\n    var LabelSet = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LabelSet, _super);\r\n        function LabelSet(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LabelSet.init_LabelSet = function () {\r\n            this.prototype.default_view = LabelSetView;\r\n            this.mixins([\r\n                mixins.TextVector,\r\n                [\"border_\", mixins.LineVector],\r\n                [\"background_\", mixins.FillVector],\r\n            ]);\r\n            this.define({\r\n                x: [p.NumberSpec],\r\n                y: [p.NumberSpec],\r\n                x_units: [p.SpatialUnits, 'data'],\r\n                y_units: [p.SpatialUnits, 'data'],\r\n                text: [p.StringSpec, { field: \"text\" }],\r\n                angle: [p.AngleSpec, 0],\r\n                x_offset: [p.NumberSpec, { value: 0 }],\r\n                y_offset: [p.NumberSpec, { value: 0 }],\r\n                source: [p.Instance, function () { return new column_data_source_1.ColumnDataSource(); }],\r\n            });\r\n            this.override({\r\n                background_fill_color: null,\r\n                border_line_color: null,\r\n            });\r\n        };\r\n        return LabelSet;\r\n    }(text_annotation_1.TextAnnotation));\r\n    exports.LabelSet = LabelSet;\r\n    LabelSet.__name__ = \"LabelSet\";\r\n    LabelSet.init_LabelSet();\r\n}\r\n","/* models\\annotations\\legend.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var text_1 = require(274) /* ../../core/util/text */;\r\n    var bbox_1 = require(194) /* ../../core/util/bbox */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var LegendView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LegendView, _super);\r\n        function LegendView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LegendView.prototype.cursor = function (_sx, _sy) {\r\n            return this.model.click_policy == \"none\" ? null : \"pointer\";\r\n        };\r\n        Object.defineProperty(LegendView.prototype, \"legend_padding\", {\r\n            get: function () {\r\n                return this.visuals.border_line.line_color.value() != null ? this.model.padding : 0;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        LegendView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.plot_view.request_render(); });\r\n            this.connect(this.model.item_change, function () { return _this.plot_view.request_render(); });\r\n        };\r\n        LegendView.prototype.compute_legend_bbox = function () {\r\n            var e_1, _a, e_2, _b;\r\n            var legend_names = this.model.get_legend_names();\r\n            var _c = this.model, glyph_height = _c.glyph_height, glyph_width = _c.glyph_width;\r\n            var _d = this.model, label_height = _d.label_height, label_width = _d.label_width;\r\n            this.max_label_height = array_1.max([text_1.measure_font(this.visuals.label_text.font_value()).height, label_height, glyph_height]);\r\n            // this is to measure text properties\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            this.visuals.label_text.set_value(ctx);\r\n            this.text_widths = new Map();\r\n            try {\r\n                for (var legend_names_1 = tslib_1.__values(legend_names), legend_names_1_1 = legend_names_1.next(); !legend_names_1_1.done; legend_names_1_1 = legend_names_1.next()) {\r\n                    var name = legend_names_1_1.value;\r\n                    this.text_widths.set(name, array_1.max([ctx.measureText(name).width, label_width]));\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (legend_names_1_1 && !legend_names_1_1.done && (_a = legend_names_1.return))\r\n                        _a.call(legend_names_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            this.visuals.title_text.set_value(ctx);\r\n            this.title_height = this.model.title ? text_1.measure_font(this.visuals.title_text.font_value()).height + this.model.title_standoff : 0;\r\n            this.title_width = this.model.title ? ctx.measureText(this.model.title).width : 0;\r\n            ctx.restore();\r\n            var max_label_width = Math.max(array_1.max(tslib_1.__spread(this.text_widths.values())), 0);\r\n            var legend_margin = this.model.margin;\r\n            var legend_padding = this.legend_padding;\r\n            var legend_spacing = this.model.spacing;\r\n            var label_standoff = this.model.label_standoff;\r\n            var legend_height, legend_width;\r\n            if (this.model.orientation == \"vertical\") {\r\n                legend_height = legend_names.length * this.max_label_height + Math.max(legend_names.length - 1, 0) * legend_spacing + 2 * legend_padding + this.title_height;\r\n                legend_width = array_1.max([(max_label_width + glyph_width + label_standoff + 2 * legend_padding), this.title_width + 2 * legend_padding]);\r\n            }\r\n            else {\r\n                var item_width = 2 * legend_padding + Math.max(legend_names.length - 1, 0) * legend_spacing;\r\n                try {\r\n                    for (var _e = tslib_1.__values(this.text_widths), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                        var _g = tslib_1.__read(_f.value, 2), width = _g[1];\r\n                        item_width += array_1.max([width, label_width]) + glyph_width + label_standoff;\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_f && !_f.done && (_b = _e.return))\r\n                            _b.call(_e);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n                legend_width = array_1.max([this.title_width + 2 * legend_padding, item_width]);\r\n                legend_height = this.max_label_height + this.title_height + 2 * legend_padding;\r\n            }\r\n            var panel = this.panel != null ? this.panel : this.plot_view.frame;\r\n            var _h = tslib_1.__read(panel.bbox.ranges, 2), hr = _h[0], vr = _h[1];\r\n            var location = this.model.location;\r\n            var sx, sy;\r\n            if (types_1.isString(location)) {\r\n                switch (location) {\r\n                    case 'top_left':\r\n                        sx = hr.start + legend_margin;\r\n                        sy = vr.start + legend_margin;\r\n                        break;\r\n                    case 'top_center':\r\n                        sx = (hr.end + hr.start) / 2 - legend_width / 2;\r\n                        sy = vr.start + legend_margin;\r\n                        break;\r\n                    case 'top_right':\r\n                        sx = hr.end - legend_margin - legend_width;\r\n                        sy = vr.start + legend_margin;\r\n                        break;\r\n                    case 'bottom_right':\r\n                        sx = hr.end - legend_margin - legend_width;\r\n                        sy = vr.end - legend_margin - legend_height;\r\n                        break;\r\n                    case 'bottom_center':\r\n                        sx = (hr.end + hr.start) / 2 - legend_width / 2;\r\n                        sy = vr.end - legend_margin - legend_height;\r\n                        break;\r\n                    case 'bottom_left':\r\n                        sx = hr.start + legend_margin;\r\n                        sy = vr.end - legend_margin - legend_height;\r\n                        break;\r\n                    case 'center_left':\r\n                        sx = hr.start + legend_margin;\r\n                        sy = (vr.end + vr.start) / 2 - legend_height / 2;\r\n                        break;\r\n                    case 'center':\r\n                        sx = (hr.end + hr.start) / 2 - legend_width / 2;\r\n                        sy = (vr.end + vr.start) / 2 - legend_height / 2;\r\n                        break;\r\n                    case 'center_right':\r\n                        sx = hr.end - legend_margin - legend_width;\r\n                        sy = (vr.end + vr.start) / 2 - legend_height / 2;\r\n                        break;\r\n                }\r\n            }\r\n            else if (types_1.isArray(location) && location.length == 2) {\r\n                var _j = tslib_1.__read(location, 2), vx = _j[0], vy = _j[1];\r\n                sx = panel.xview.compute(vx);\r\n                sy = panel.yview.compute(vy) - legend_height;\r\n            }\r\n            else\r\n                assert_1.unreachable();\r\n            return new bbox_1.BBox({ left: sx, top: sy, width: legend_width, height: legend_height });\r\n        };\r\n        LegendView.prototype.interactive_bbox = function () {\r\n            return this.compute_legend_bbox();\r\n        };\r\n        LegendView.prototype.interactive_hit = function (sx, sy) {\r\n            var bbox = this.interactive_bbox();\r\n            return bbox.contains(sx, sy);\r\n        };\r\n        LegendView.prototype.on_hit = function (sx, sy) {\r\n            var e_3, _a, e_4, _b, _c, _d, e_5, _e, e_6, _f;\r\n            var yoffset;\r\n            var glyph_width = this.model.glyph_width;\r\n            var legend_padding = this.legend_padding;\r\n            var legend_spacing = this.model.spacing;\r\n            var label_standoff = this.model.label_standoff;\r\n            var xoffset = (yoffset = legend_padding);\r\n            var legend_bbox = this.compute_legend_bbox();\r\n            var vertical = this.model.orientation == \"vertical\";\r\n            try {\r\n                for (var _g = tslib_1.__values(this.model.items), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                    var item = _h.value;\r\n                    var labels = item.get_labels_list_from_label_prop();\r\n                    try {\r\n                        for (var labels_1 = (e_4 = void 0, tslib_1.__values(labels)), labels_1_1 = labels_1.next(); !labels_1_1.done; labels_1_1 = labels_1.next()) {\r\n                            var label = labels_1_1.value;\r\n                            var x1 = legend_bbox.x + xoffset;\r\n                            var y1 = legend_bbox.y + yoffset + this.title_height;\r\n                            var w = void 0, h = void 0;\r\n                            if (vertical)\r\n                                _c = tslib_1.__read([legend_bbox.width - 2 * legend_padding, this.max_label_height], 2), w = _c[0], h = _c[1];\r\n                            else\r\n                                _d = tslib_1.__read([this.text_widths.get(label) + glyph_width + label_standoff, this.max_label_height], 2), w = _d[0], h = _d[1];\r\n                            var bbox = new bbox_1.BBox({ left: x1, top: y1, width: w, height: h });\r\n                            if (bbox.contains(sx, sy)) {\r\n                                switch (this.model.click_policy) {\r\n                                    case \"hide\": {\r\n                                        try {\r\n                                            for (var _j = (e_5 = void 0, tslib_1.__values(item.renderers)), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                                                var r = _k.value;\r\n                                                r.visible = !r.visible;\r\n                                            }\r\n                                        }\r\n                                        catch (e_5_1) {\r\n                                            e_5 = { error: e_5_1 };\r\n                                        }\r\n                                        finally {\r\n                                            try {\r\n                                                if (_k && !_k.done && (_e = _j.return))\r\n                                                    _e.call(_j);\r\n                                            }\r\n                                            finally {\r\n                                                if (e_5)\r\n                                                    throw e_5.error;\r\n                                            }\r\n                                        }\r\n                                        break;\r\n                                    }\r\n                                    case \"mute\": {\r\n                                        try {\r\n                                            for (var _l = (e_6 = void 0, tslib_1.__values(item.renderers)), _m = _l.next(); !_m.done; _m = _l.next()) {\r\n                                                var r = _m.value;\r\n                                                r.muted = !r.muted;\r\n                                            }\r\n                                        }\r\n                                        catch (e_6_1) {\r\n                                            e_6 = { error: e_6_1 };\r\n                                        }\r\n                                        finally {\r\n                                            try {\r\n                                                if (_m && !_m.done && (_f = _l.return))\r\n                                                    _f.call(_l);\r\n                                            }\r\n                                            finally {\r\n                                                if (e_6)\r\n                                                    throw e_6.error;\r\n                                            }\r\n                                        }\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                return true;\r\n                            }\r\n                            if (vertical)\r\n                                yoffset += this.max_label_height + legend_spacing;\r\n                            else\r\n                                xoffset += this.text_widths.get(label) + glyph_width + label_standoff + legend_spacing;\r\n                        }\r\n                    }\r\n                    catch (e_4_1) {\r\n                        e_4 = { error: e_4_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (labels_1_1 && !labels_1_1.done && (_b = labels_1.return))\r\n                                _b.call(labels_1);\r\n                        }\r\n                        finally {\r\n                            if (e_4)\r\n                                throw e_4.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_h && !_h.done && (_a = _g.return))\r\n                        _a.call(_g);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        LegendView.prototype._render = function () {\r\n            var e_7, _a;\r\n            if (this.model.items.length == 0)\r\n                return;\r\n            try {\r\n                // set a backref on render so that items can later signal item_change upates\r\n                // on the model to trigger a re-render\r\n                for (var _b = tslib_1.__values(this.model.items), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var item = _c.value;\r\n                    item.legend = this.model;\r\n                }\r\n            }\r\n            catch (e_7_1) {\r\n                e_7 = { error: e_7_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_7)\r\n                        throw e_7.error;\r\n                }\r\n            }\r\n            var ctx = this.layer.ctx;\r\n            var bbox = this.compute_legend_bbox();\r\n            ctx.save();\r\n            this._draw_legend_box(ctx, bbox);\r\n            this._draw_legend_items(ctx, bbox);\r\n            if (this.model.title)\r\n                this._draw_title(ctx, bbox);\r\n            ctx.restore();\r\n        };\r\n        LegendView.prototype._draw_legend_box = function (ctx, bbox) {\r\n            ctx.beginPath();\r\n            ctx.rect(bbox.x, bbox.y, bbox.width, bbox.height);\r\n            this.visuals.background_fill.set_value(ctx);\r\n            ctx.fill();\r\n            if (this.visuals.border_line.doit) {\r\n                this.visuals.border_line.set_value(ctx);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        LegendView.prototype._draw_legend_items = function (ctx, bbox) {\r\n            var e_8, _a;\r\n            var _this = this;\r\n            var _b = this.model, glyph_width = _b.glyph_width, glyph_height = _b.glyph_height;\r\n            var legend_padding = this.legend_padding;\r\n            var legend_spacing = this.model.spacing;\r\n            var label_standoff = this.model.label_standoff;\r\n            var xoffset = legend_padding;\r\n            var yoffset = legend_padding;\r\n            var vertical = this.model.orientation == \"vertical\";\r\n            var _loop_1 = function (item) {\r\n                var e_9, _a, e_10, _b, _c, _d;\r\n                var labels = item.get_labels_list_from_label_prop();\r\n                var field = item.get_field_from_label_prop();\r\n                if (labels.length == 0)\r\n                    return \"continue\";\r\n                var active = (function () {\r\n                    switch (_this.model.click_policy) {\r\n                        case \"none\": return true;\r\n                        case \"hide\": return array_1.every(item.renderers, function (r) { return r.visible; });\r\n                        case \"mute\": return array_1.every(item.renderers, function (r) { return !r.muted; });\r\n                    }\r\n                })();\r\n                try {\r\n                    for (var labels_2 = (e_9 = void 0, tslib_1.__values(labels)), labels_2_1 = labels_2.next(); !labels_2_1.done; labels_2_1 = labels_2.next()) {\r\n                        var label = labels_2_1.value;\r\n                        var x1 = bbox.x + xoffset;\r\n                        var y1 = bbox.y + yoffset + this_1.title_height;\r\n                        var x2 = x1 + glyph_width;\r\n                        var y2 = y1 + glyph_height;\r\n                        if (vertical)\r\n                            yoffset += this_1.max_label_height + legend_spacing;\r\n                        else\r\n                            xoffset += this_1.text_widths.get(label) + glyph_width + label_standoff + legend_spacing;\r\n                        this_1.visuals.label_text.set_value(ctx);\r\n                        ctx.fillText(label, x2 + label_standoff, y1 + this_1.max_label_height / 2.0);\r\n                        try {\r\n                            for (var _e = (e_10 = void 0, tslib_1.__values(item.renderers)), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                                var r = _f.value;\r\n                                var view = this_1.plot_view.renderer_views.get(r);\r\n                                view.draw_legend(ctx, x1, x2, y1, y2, field, label, item.index);\r\n                            }\r\n                        }\r\n                        catch (e_10_1) {\r\n                            e_10 = { error: e_10_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_f && !_f.done && (_b = _e.return))\r\n                                    _b.call(_e);\r\n                            }\r\n                            finally {\r\n                                if (e_10)\r\n                                    throw e_10.error;\r\n                            }\r\n                        }\r\n                        if (!active) {\r\n                            var w = void 0, h = void 0;\r\n                            if (vertical)\r\n                                _c = tslib_1.__read([bbox.width - 2 * legend_padding, this_1.max_label_height], 2), w = _c[0], h = _c[1];\r\n                            else\r\n                                _d = tslib_1.__read([this_1.text_widths.get(label) + glyph_width + label_standoff, this_1.max_label_height], 2), w = _d[0], h = _d[1];\r\n                            ctx.beginPath();\r\n                            ctx.rect(x1, y1, w, h);\r\n                            this_1.visuals.inactive_fill.set_value(ctx);\r\n                            ctx.fill();\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_9_1) {\r\n                    e_9 = { error: e_9_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (labels_2_1 && !labels_2_1.done && (_a = labels_2.return))\r\n                            _a.call(labels_2);\r\n                    }\r\n                    finally {\r\n                        if (e_9)\r\n                            throw e_9.error;\r\n                    }\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var _c = tslib_1.__values(this.model.items), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var item = _d.value;\r\n                    _loop_1(item);\r\n                }\r\n            }\r\n            catch (e_8_1) {\r\n                e_8 = { error: e_8_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return))\r\n                        _a.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_8)\r\n                        throw e_8.error;\r\n                }\r\n            }\r\n        };\r\n        LegendView.prototype._draw_title = function (ctx, bbox) {\r\n            if (!this.visuals.title_text.doit)\r\n                return;\r\n            ctx.save();\r\n            ctx.translate(bbox.x0, bbox.y0 + this.title_height);\r\n            this.visuals.title_text.set_value(ctx);\r\n            ctx.fillText(this.model.title, this.legend_padding, this.legend_padding - this.model.title_standoff);\r\n            ctx.restore();\r\n        };\r\n        LegendView.prototype._get_size = function () {\r\n            var _a = this.compute_legend_bbox(), width = _a.width, height = _a.height;\r\n            return {\r\n                width: width + 2 * this.model.margin,\r\n                height: height + 2 * this.model.margin,\r\n            };\r\n        };\r\n        return LegendView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.LegendView = LegendView;\r\n    LegendView.__name__ = \"LegendView\";\r\n    var Legend = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Legend, _super);\r\n        function Legend(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Legend.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.item_change = new signaling_1.Signal0(this, \"item_change\");\r\n        };\r\n        Legend.init_Legend = function () {\r\n            this.prototype.default_view = LegendView;\r\n            this.mixins([\r\n                [\"label_\", mixins.Text],\r\n                [\"title_\", mixins.Text],\r\n                [\"inactive_\", mixins.Fill],\r\n                [\"border_\", mixins.Line],\r\n                [\"background_\", mixins.Fill],\r\n            ]);\r\n            this.define({\r\n                orientation: [p.Orientation, 'vertical'],\r\n                location: [p.Any, 'top_right'],\r\n                title: [p.String],\r\n                title_standoff: [p.Number, 5],\r\n                label_standoff: [p.Number, 5],\r\n                glyph_height: [p.Number, 20],\r\n                glyph_width: [p.Number, 20],\r\n                label_height: [p.Number, 20],\r\n                label_width: [p.Number, 20],\r\n                margin: [p.Number, 10],\r\n                padding: [p.Number, 10],\r\n                spacing: [p.Number, 3],\r\n                items: [p.Array, []],\r\n                click_policy: [p.Any, \"none\"],\r\n            });\r\n            this.override({\r\n                border_line_color: \"#e5e5e5\",\r\n                border_line_alpha: 0.5,\r\n                border_line_width: 1,\r\n                background_fill_color: \"#ffffff\",\r\n                background_fill_alpha: 0.95,\r\n                inactive_fill_color: \"white\",\r\n                inactive_fill_alpha: 0.7,\r\n                label_text_font_size: \"13px\",\r\n                label_text_baseline: \"middle\",\r\n                title_text_font_size: \"13px\",\r\n                title_text_font_style: \"italic\",\r\n            });\r\n        };\r\n        Legend.prototype.get_legend_names = function () {\r\n            var e_11, _a;\r\n            var legend_names = [];\r\n            try {\r\n                for (var _b = tslib_1.__values(this.items), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var item = _c.value;\r\n                    var labels = item.get_labels_list_from_label_prop();\r\n                    legend_names.push.apply(legend_names, tslib_1.__spread(labels));\r\n                }\r\n            }\r\n            catch (e_11_1) {\r\n                e_11 = { error: e_11_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_11)\r\n                        throw e_11.error;\r\n                }\r\n            }\r\n            return legend_names;\r\n        };\r\n        return Legend;\r\n    }(annotation_1.Annotation));\r\n    exports.Legend = Legend;\r\n    Legend.__name__ = \"Legend\";\r\n    Legend.init_Legend();\r\n}\r\n","/* models\\annotations\\legend_item.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var columnar_data_source_1 = require(201) /* ../sources/columnar_data_source */;\r\n    var vectorization_1 = require(280) /* ../../core/vectorization */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var LegendItem = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LegendItem, _super);\r\n        function LegendItem(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LegendItem.init_LegendItem = function () {\r\n            this.define({\r\n                label: [p.StringSpec, null],\r\n                renderers: [p.Array, []],\r\n                index: [p.Number, null],\r\n            });\r\n        };\r\n        /*protected*/ LegendItem.prototype._check_data_sources_on_renderers = function () {\r\n            var e_1, _b;\r\n            var field = this.get_field_from_label_prop();\r\n            if (field != null) {\r\n                if (this.renderers.length < 1) {\r\n                    return false;\r\n                }\r\n                var source = this.renderers[0].data_source;\r\n                if (source != null) {\r\n                    try {\r\n                        for (var _c = tslib_1.__values(this.renderers), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                            var r = _d.value;\r\n                            if (r.data_source != source) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_1_1) {\r\n                        e_1 = { error: e_1_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_d && !_d.done && (_b = _c.return))\r\n                                _b.call(_c);\r\n                        }\r\n                        finally {\r\n                            if (e_1)\r\n                                throw e_1.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        /*protected*/ LegendItem.prototype._check_field_label_on_data_source = function () {\r\n            var field = this.get_field_from_label_prop();\r\n            if (field != null) {\r\n                if (this.renderers.length < 1) {\r\n                    return false;\r\n                }\r\n                var source = this.renderers[0].data_source;\r\n                if (source != null && !array_1.includes(source.columns(), field)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        LegendItem.prototype.initialize = function () {\r\n            var _this = this;\r\n            _super.prototype.initialize.call(this);\r\n            this.legend = null;\r\n            this.connect(this.change, function () { var _a; return (_a = _this.legend) === null || _a === void 0 ? void 0 : _a.item_change.emit(); });\r\n            // Validate data_sources match\r\n            var data_source_validation = this._check_data_sources_on_renderers();\r\n            if (!data_source_validation)\r\n                logging_1.logger.error(\"Non matching data sources on legend item renderers\");\r\n            // Validate label in data_source\r\n            var field_validation = this._check_field_label_on_data_source();\r\n            if (!field_validation)\r\n                logging_1.logger.error(\"Bad column name on label: \" + this.label);\r\n        };\r\n        LegendItem.prototype.get_field_from_label_prop = function () {\r\n            var label = this.label;\r\n            return vectorization_1.isField(label) ? label.field : null;\r\n        };\r\n        LegendItem.prototype.get_labels_list_from_label_prop = function () {\r\n            // Always return a list of the labels\r\n            if (vectorization_1.isValue(this.label)) {\r\n                var value = this.label.value;\r\n                return value != null ? [value] : [];\r\n            }\r\n            var field = this.get_field_from_label_prop();\r\n            if (field != null) {\r\n                var source = void 0;\r\n                if (this.renderers[0] && this.renderers[0].data_source != null)\r\n                    source = this.renderers[0].data_source;\r\n                else\r\n                    return [\"No source found\"];\r\n                if (source instanceof columnar_data_source_1.ColumnarDataSource) {\r\n                    var data = source.get_column(field);\r\n                    if (data != null)\r\n                        return array_1.uniq(Array.from(data));\r\n                    else\r\n                        return [\"Invalid field\"];\r\n                }\r\n            }\r\n            return [];\r\n        };\r\n        return LegendItem;\r\n    }(model_1.Model));\r\n    exports.LegendItem = LegendItem;\r\n    LegendItem.__name__ = \"LegendItem\";\r\n    LegendItem.init_LegendItem();\r\n}\r\n","/* core\\vectorization.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var types_1 = require(123) /* ./util/types */;\r\n    function isValue(obj) {\r\n        return types_1.isPlainObject(obj) && \"value\" in obj;\r\n    }\r\n    exports.isValue = isValue;\r\n    function isField(obj) {\r\n        return types_1.isPlainObject(obj) && \"field\" in obj;\r\n    }\r\n    exports.isField = isField;\r\n}\r\n","/* models\\annotations\\poly_annotation.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var PolyAnnotationView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyAnnotationView, _super);\r\n        function PolyAnnotationView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PolyAnnotationView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            // need to respond to either normal BB change events or silent\r\n            // \"data only updates\" that tools might want to use\r\n            this.connect(this.model.change, function () { return _this.plot_view.request_render(); });\r\n            this.connect(this.model.data_update, function () { return _this.plot_view.request_render(); });\r\n        };\r\n        PolyAnnotationView.prototype._render = function () {\r\n            var _a = this.model, xs = _a.xs, ys = _a.ys;\r\n            if (xs.length != ys.length)\r\n                return;\r\n            if (xs.length < 3 || ys.length < 3)\r\n                return;\r\n            var frame = this.plot_view.frame;\r\n            var ctx = this.layer.ctx;\r\n            for (var i = 0, end = xs.length; i < end; i++) {\r\n                var sx = void 0;\r\n                if (this.model.xs_units == 'screen')\r\n                    sx = this.model.screen ? xs[i] : frame.xview.compute(xs[i]);\r\n                else\r\n                    throw new Error(\"not implemented\");\r\n                var sy = void 0;\r\n                if (this.model.ys_units == 'screen')\r\n                    sy = this.model.screen ? ys[i] : frame.yview.compute(ys[i]);\r\n                else\r\n                    throw new Error(\"not implemented\");\r\n                if (i == 0) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(sx, sy);\r\n                }\r\n                else {\r\n                    ctx.lineTo(sx, sy);\r\n                }\r\n            }\r\n            ctx.closePath();\r\n            if (this.visuals.line.doit) {\r\n                this.visuals.line.set_value(ctx);\r\n                ctx.stroke();\r\n            }\r\n            if (this.visuals.fill.doit) {\r\n                this.visuals.fill.set_value(ctx);\r\n                ctx.fill();\r\n            }\r\n        };\r\n        return PolyAnnotationView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.PolyAnnotationView = PolyAnnotationView;\r\n    PolyAnnotationView.__name__ = \"PolyAnnotationView\";\r\n    var PolyAnnotation = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyAnnotation, _super);\r\n        function PolyAnnotation(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        PolyAnnotation.init_PolyAnnotation = function () {\r\n            this.prototype.default_view = PolyAnnotationView;\r\n            this.mixins([mixins.Line /*Scalar*/, mixins.Fill /*Scalar*/]);\r\n            this.define({\r\n                xs: [p.Array, []],\r\n                xs_units: [p.SpatialUnits, 'data'],\r\n                ys: [p.Array, []],\r\n                ys_units: [p.SpatialUnits, 'data'],\r\n            });\r\n            this.internal({\r\n                screen: [p.Boolean, false],\r\n            });\r\n            this.override({\r\n                fill_color: \"#fff9ba\",\r\n                fill_alpha: 0.4,\r\n                line_color: \"#cccccc\",\r\n                line_alpha: 0.3,\r\n            });\r\n        };\r\n        PolyAnnotation.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.data_update = new signaling_1.Signal0(this, \"data_update\");\r\n        };\r\n        PolyAnnotation.prototype.update = function (_a) {\r\n            var xs = _a.xs, ys = _a.ys;\r\n            this.setv({ xs: xs, ys: ys, screen: true }, { silent: true });\r\n            this.data_update.emit();\r\n        };\r\n        return PolyAnnotation;\r\n    }(annotation_1.Annotation));\r\n    exports.PolyAnnotation = PolyAnnotation;\r\n    PolyAnnotation.__name__ = \"PolyAnnotation\";\r\n    PolyAnnotation.init_PolyAnnotation();\r\n}\r\n","/* models\\annotations\\slope.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var SlopeView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SlopeView, _super);\r\n        function SlopeView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SlopeView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n        };\r\n        SlopeView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.plot_view.request_render(); });\r\n        };\r\n        SlopeView.prototype._render = function () {\r\n            var gradient = this.model.gradient;\r\n            var y_intercept = this.model.y_intercept;\r\n            if (gradient == null || y_intercept == null) {\r\n                return;\r\n            }\r\n            var frame = this.plot_view.frame;\r\n            var xscale = this.coordinates.x_scale;\r\n            var yscale = this.coordinates.y_scale;\r\n            var sy_start = frame.bbox.top;\r\n            var sy_end = sy_start + frame.bbox.height;\r\n            var y_start = yscale.invert(sy_start);\r\n            var y_end = yscale.invert(sy_end);\r\n            var x_start = (y_start - y_intercept) / gradient;\r\n            var x_end = (y_end - y_intercept) / gradient;\r\n            var sx_start = xscale.compute(x_start);\r\n            var sx_end = xscale.compute(x_end);\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            this.visuals.line.set_value(ctx);\r\n            ctx.moveTo(sx_start, sy_start);\r\n            ctx.lineTo(sx_end, sy_end);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        };\r\n        return SlopeView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.SlopeView = SlopeView;\r\n    SlopeView.__name__ = \"SlopeView\";\r\n    var Slope = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Slope, _super);\r\n        function Slope(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Slope.init_Slope = function () {\r\n            this.prototype.default_view = SlopeView;\r\n            this.mixins(mixins.Line /*Scalar*/);\r\n            this.define({\r\n                gradient: [p.Number, null],\r\n                y_intercept: [p.Number, null],\r\n            });\r\n            this.override({\r\n                line_color: 'black',\r\n            });\r\n        };\r\n        return Slope;\r\n    }(annotation_1.Annotation));\r\n    exports.Slope = Slope;\r\n    Slope.__name__ = \"Slope\";\r\n    Slope.init_Slope();\r\n}\r\n","/* models\\annotations\\span.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var SpanView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SpanView, _super);\r\n        function SpanView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SpanView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.plot_view.request_paint(_this); });\r\n        };\r\n        SpanView.prototype._render = function () {\r\n            var _this = this;\r\n            var location = this.model.location;\r\n            if (location == null) {\r\n                return;\r\n            }\r\n            var frame = this.plot_view.frame;\r\n            var xscale = this.coordinates.x_scale;\r\n            var yscale = this.coordinates.y_scale;\r\n            var _calc_dim = function (scale, view) {\r\n                if (_this.model.location_units == 'data')\r\n                    return scale.compute(location);\r\n                else\r\n                    return _this.model.for_hover ? location : view.compute(location);\r\n            };\r\n            var height, sleft, stop, width;\r\n            if (this.model.dimension == 'width') {\r\n                stop = _calc_dim(yscale, frame.yview);\r\n                sleft = frame.bbox.left;\r\n                width = frame.bbox.width;\r\n                height = this.model.properties.line_width.value();\r\n            }\r\n            else {\r\n                stop = frame.bbox.top;\r\n                sleft = _calc_dim(xscale, frame.xview);\r\n                width = this.model.properties.line_width.value();\r\n                height = frame.bbox.height;\r\n            }\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            this.visuals.line.set_value(ctx);\r\n            ctx.moveTo(sleft, stop);\r\n            if (this.model.dimension == \"width\") {\r\n                ctx.lineTo(sleft + width, stop);\r\n            }\r\n            else {\r\n                ctx.lineTo(sleft, stop + height);\r\n            }\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        };\r\n        return SpanView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.SpanView = SpanView;\r\n    SpanView.__name__ = \"SpanView\";\r\n    var Span = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Span, _super);\r\n        function Span(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Span.init_Span = function () {\r\n            this.prototype.default_view = SpanView;\r\n            this.mixins(mixins.Line /*Scalar*/);\r\n            this.define({\r\n                render_mode: [p.RenderMode, 'canvas'],\r\n                location: [p.Number, null],\r\n                location_units: [p.SpatialUnits, 'data'],\r\n                dimension: [p.Dimension, 'width'],\r\n            });\r\n            this.override({\r\n                line_color: 'black',\r\n            });\r\n            this.internal({\r\n                for_hover: [p.Boolean, false],\r\n            });\r\n        };\r\n        return Span;\r\n    }(annotation_1.Annotation));\r\n    exports.Span = Span;\r\n    Span.__name__ = \"Span\";\r\n    Span.init_Span();\r\n}\r\n","/* models\\annotations\\title.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var text_annotation_1 = require(276) /* ./text_annotation */;\r\n    var visuals_1 = require(189) /* ../../core/visuals */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var TitleView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TitleView, _super);\r\n        function TitleView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TitleView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.visuals.text = new visuals_1.Text(this.model);\r\n        };\r\n        TitleView.prototype._get_location = function () {\r\n            var panel = this.panel;\r\n            var hmargin = this.model.offset;\r\n            var vmargin = 5;\r\n            var sx, sy;\r\n            var bbox = panel.bbox;\r\n            switch (panel.side) {\r\n                case 'above':\r\n                case 'below': {\r\n                    switch (this.model.vertical_align) {\r\n                        case 'top':\r\n                            sy = bbox.top + vmargin;\r\n                            break;\r\n                        case 'middle':\r\n                            sy = bbox.vcenter;\r\n                            break;\r\n                        case 'bottom':\r\n                            sy = bbox.bottom - vmargin;\r\n                            break;\r\n                    }\r\n                    switch (this.model.align) {\r\n                        case 'left':\r\n                            sx = bbox.left + hmargin;\r\n                            break;\r\n                        case 'center':\r\n                            sx = bbox.hcenter;\r\n                            break;\r\n                        case 'right':\r\n                            sx = bbox.right - hmargin;\r\n                            break;\r\n                    }\r\n                    break;\r\n                }\r\n                case 'left': {\r\n                    switch (this.model.vertical_align) {\r\n                        case 'top':\r\n                            sx = bbox.left - vmargin;\r\n                            break;\r\n                        case 'middle':\r\n                            sx = bbox.hcenter;\r\n                            break;\r\n                        case 'bottom':\r\n                            sx = bbox.right + vmargin;\r\n                            break;\r\n                    }\r\n                    switch (this.model.align) {\r\n                        case 'left':\r\n                            sy = bbox.bottom - hmargin;\r\n                            break;\r\n                        case 'center':\r\n                            sy = bbox.vcenter;\r\n                            break;\r\n                        case 'right':\r\n                            sy = bbox.top + hmargin;\r\n                            break;\r\n                    }\r\n                    break;\r\n                }\r\n                case 'right': {\r\n                    switch (this.model.vertical_align) {\r\n                        case 'top':\r\n                            sx = bbox.right - vmargin;\r\n                            break;\r\n                        case 'middle':\r\n                            sx = bbox.hcenter;\r\n                            break;\r\n                        case 'bottom':\r\n                            sx = bbox.left + vmargin;\r\n                            break;\r\n                    }\r\n                    switch (this.model.align) {\r\n                        case 'left':\r\n                            sy = bbox.top + hmargin;\r\n                            break;\r\n                        case 'center':\r\n                            sy = bbox.vcenter;\r\n                            break;\r\n                        case 'right':\r\n                            sy = bbox.bottom - hmargin;\r\n                            break;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            return [sx, sy];\r\n        };\r\n        TitleView.prototype._render = function () {\r\n            var text = this.model.text;\r\n            if (text == null || text.length == 0)\r\n                return;\r\n            this.model.text_baseline = this.model.vertical_align;\r\n            this.model.text_align = this.model.align;\r\n            var _a = tslib_1.__read(this._get_location(), 2), sx = _a[0], sy = _a[1];\r\n            var angle = this.panel.get_label_angle_heuristic('parallel');\r\n            var draw = this.model.render_mode == 'canvas' ? this._canvas_text.bind(this) : this._css_text.bind(this);\r\n            draw(this.layer.ctx, text, sx, sy, angle);\r\n        };\r\n        TitleView.prototype._get_size = function () {\r\n            var text = this.model.text;\r\n            if (text == null || text.length == 0)\r\n                return { width: 0, height: 0 };\r\n            else {\r\n                this.visuals.text.set_value(this.layer.ctx);\r\n                var _a = this.layer.ctx.measureText(text), width = _a.width, ascent = _a.ascent;\r\n                return { width: width, height: ascent * this.visuals.text.text_line_height.value() + 10 };\r\n            }\r\n        };\r\n        return TitleView;\r\n    }(text_annotation_1.TextAnnotationView));\r\n    exports.TitleView = TitleView;\r\n    TitleView.__name__ = \"TitleView\";\r\n    var Title = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Title, _super);\r\n        function Title(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Title.init_Title = function () {\r\n            this.prototype.default_view = TitleView;\r\n            this.mixins([\r\n                [\"border_\", mixins.Line],\r\n                [\"background_\", mixins.Fill],\r\n            ]);\r\n            this.define({\r\n                text: [p.String],\r\n                text_font: [p.Font, 'helvetica'],\r\n                text_font_size: [p.StringSpec, '13px'],\r\n                text_font_style: [p.FontStyle, 'bold'],\r\n                text_color: [p.ColorSpec, '#444444'],\r\n                text_alpha: [p.NumberSpec, 1.0],\r\n                text_line_height: [p.Number, 1.0],\r\n                vertical_align: [p.VerticalAlign, 'bottom'],\r\n                align: [p.TextAlign, 'left'],\r\n                offset: [p.Number, 0],\r\n            });\r\n            this.override({\r\n                background_fill_color: null,\r\n                border_line_color: null,\r\n            });\r\n            this.internal({\r\n                text_align: [p.TextAlign, 'left'],\r\n                text_baseline: [p.TextBaseline, 'bottom'],\r\n            });\r\n        };\r\n        return Title;\r\n    }(text_annotation_1.TextAnnotation));\r\n    exports.Title = Title;\r\n    Title.__name__ = \"Title\";\r\n    Title.init_Title();\r\n}\r\n","/* models\\annotations\\toolbar_panel.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var build_views_1 = require(230) /* ../../core/build_views */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var bbox_1 = require(194) /* ../../core/util/bbox */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var ToolbarPanelView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolbarPanelView, _super);\r\n        function ToolbarPanelView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.rotate = true;\r\n            _this._invalidate_toolbar = true;\r\n            _this._previous_bbox = new bbox_1.BBox();\r\n            return _this;\r\n        }\r\n        ToolbarPanelView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.el = dom_1.div();\r\n            this.plot_view.canvas_view.add_event(this.el);\r\n        };\r\n        ToolbarPanelView.prototype.lazy_initialize = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var _a;\r\n                var _this = this;\r\n                return tslib_1.__generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            _a = this;\r\n                            return [4 /*yield*/, build_views_1.build_view(this.model.toolbar, { parent: this })];\r\n                        case 1:\r\n                            _a._toolbar_view = _b.sent();\r\n                            this.plot_view.visibility_callbacks.push(function (visible) { return _this._toolbar_view.set_visibility(visible); });\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ToolbarPanelView.prototype.remove = function () {\r\n            this._toolbar_view.remove();\r\n            dom_1.remove(this.el);\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        ToolbarPanelView.prototype.render = function () {\r\n            if (!this.model.visible)\r\n                dom_1.undisplay(this.el);\r\n            _super.prototype.render.call(this);\r\n        };\r\n        ToolbarPanelView.prototype._render = function () {\r\n            // TODO: this should be handled by the layout\r\n            var bbox = this.panel.bbox;\r\n            if (!this._previous_bbox.equals(bbox)) {\r\n                dom_1.position(this.el, bbox);\r\n                this._previous_bbox = bbox;\r\n            }\r\n            if (this._invalidate_toolbar) {\r\n                this.el.style.position = \"absolute\";\r\n                this.el.style.overflow = \"hidden\";\r\n                this._toolbar_view.render();\r\n                dom_1.empty(this.el);\r\n                this.el.appendChild(this._toolbar_view.el);\r\n                this._invalidate_toolbar = false;\r\n            }\r\n            dom_1.display(this.el);\r\n        };\r\n        ToolbarPanelView.prototype._get_size = function () {\r\n            var _a = this.model.toolbar, tools = _a.tools, logo = _a.logo;\r\n            return {\r\n                width: tools.length * 30 + (logo != null ? 25 : 0),\r\n                height: 30,\r\n            };\r\n        };\r\n        return ToolbarPanelView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.ToolbarPanelView = ToolbarPanelView;\r\n    ToolbarPanelView.__name__ = \"ToolbarPanelView\";\r\n    var ToolbarPanel = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolbarPanel, _super);\r\n        function ToolbarPanel(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ToolbarPanel.init_ToolbarPanel = function () {\r\n            this.prototype.default_view = ToolbarPanelView;\r\n            this.define({\r\n                toolbar: [p.Instance],\r\n            });\r\n        };\r\n        return ToolbarPanel;\r\n    }(annotation_1.Annotation));\r\n    exports.ToolbarPanel = ToolbarPanel;\r\n    ToolbarPanel.__name__ = \"ToolbarPanel\";\r\n    ToolbarPanel.init_ToolbarPanel();\r\n}\r\n","/* models\\annotations\\tooltip.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var annotation_1 = require(151) /* ./annotation */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var tooltips_1 = require(287) /* ../../styles/tooltips */;\r\n    var mixins_1 = require(288) /* ../../styles/mixins */;\r\n    var tooltips_css_1 = tslib_1.__importDefault(require(289) /* ../../styles/tooltips.css */);\r\n    var arrow_size = 10; // XXX: keep in sync with less\r\n    var TooltipView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TooltipView, _super);\r\n        function TooltipView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TooltipView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.el = dom_1.div({ class: tooltips_1.bk_tooltip });\r\n            dom_1.undisplay(this.el);\r\n            this.plot_view.canvas_view.add_overlay(this.el);\r\n        };\r\n        TooltipView.prototype.remove = function () {\r\n            dom_1.remove(this.el);\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        TooltipView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.content.change, function () { return _this.render(); });\r\n            this.connect(this.model.properties.position.change, function () { return _this._reposition(); });\r\n        };\r\n        TooltipView.prototype.styles = function () {\r\n            return tslib_1.__spread(_super.prototype.styles.call(this), [tooltips_css_1.default]);\r\n        };\r\n        TooltipView.prototype.render = function () {\r\n            if (!this.model.visible)\r\n                dom_1.undisplay(this.el);\r\n            _super.prototype.render.call(this);\r\n        };\r\n        TooltipView.prototype._render = function () {\r\n            var content = this.model.content;\r\n            if (content == null) {\r\n                dom_1.undisplay(this.el);\r\n                return;\r\n            }\r\n            dom_1.empty(this.el);\r\n            dom_1.classes(this.el).toggle(tooltips_1.bk_tooltip_custom, this.model.custom);\r\n            this.el.appendChild(content);\r\n            if (this.model.show_arrow)\r\n                this.el.classList.add(tooltips_1.bk_tooltip_arrow);\r\n        };\r\n        TooltipView.prototype._reposition = function () {\r\n            var _this = this;\r\n            var position = this.model.position;\r\n            if (position == null) {\r\n                dom_1.undisplay(this.el);\r\n                return;\r\n            }\r\n            var _a = tslib_1.__read(position, 2), sx = _a[0], sy = _a[1];\r\n            var side = (function () {\r\n                var area = _this.parent.layout.bbox.relativize();\r\n                var attachment = _this.model.attachment;\r\n                switch (attachment) {\r\n                    case \"horizontal\":\r\n                        return sx < area.hcenter ? \"right\" : \"left\";\r\n                    case \"vertical\":\r\n                        return sy < area.vcenter ? \"below\" : \"above\";\r\n                    default:\r\n                        return attachment;\r\n                }\r\n            })();\r\n            this.el.classList.remove(mixins_1.bk_right);\r\n            this.el.classList.remove(mixins_1.bk_left);\r\n            this.el.classList.remove(mixins_1.bk_above);\r\n            this.el.classList.remove(mixins_1.bk_below);\r\n            dom_1.display(this.el); // XXX: {offset,client}Width() gives 0 when display=\"none\"\r\n            // slightly confusing: side \"left\" (for example) is relative to point that\r\n            // is being annotated but CS class \".bk-left\" is relative to the tooltip itself\r\n            var top;\r\n            var left = null;\r\n            var right = null;\r\n            switch (side) {\r\n                case \"right\":\r\n                    this.el.classList.add(mixins_1.bk_left);\r\n                    left = sx + (this.el.offsetWidth - this.el.clientWidth) + arrow_size;\r\n                    top = sy - this.el.offsetHeight / 2;\r\n                    break;\r\n                case \"left\":\r\n                    this.el.classList.add(mixins_1.bk_right);\r\n                    right = (this.plot_view.layout.bbox.width - sx) + arrow_size;\r\n                    top = sy - this.el.offsetHeight / 2;\r\n                    break;\r\n                case \"below\":\r\n                    this.el.classList.add(mixins_1.bk_above);\r\n                    top = sy + (this.el.offsetHeight - this.el.clientHeight) + arrow_size;\r\n                    left = Math.round(sx - this.el.offsetWidth / 2);\r\n                    break;\r\n                case \"above\":\r\n                    this.el.classList.add(mixins_1.bk_below);\r\n                    top = sy - this.el.offsetHeight - arrow_size;\r\n                    left = Math.round(sx - this.el.offsetWidth / 2);\r\n                    break;\r\n            }\r\n            this.el.style.top = top + \"px\";\r\n            this.el.style.left = left != null ? left + \"px\" : \"auto\";\r\n            this.el.style.right = right != null ? right + \"px\" : \"auto\";\r\n        };\r\n        return TooltipView;\r\n    }(annotation_1.AnnotationView));\r\n    exports.TooltipView = TooltipView;\r\n    TooltipView.__name__ = \"TooltipView\";\r\n    var Tooltip = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Tooltip, _super);\r\n        function Tooltip(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Tooltip.init_Tooltip = function () {\r\n            this.prototype.default_view = TooltipView;\r\n            this.define({\r\n                attachment: [p.TooltipAttachment, 'horizontal'],\r\n                inner_only: [p.Boolean, true],\r\n                show_arrow: [p.Boolean, true],\r\n            });\r\n            this.override({\r\n                level: 'overlay',\r\n            });\r\n            this.internal({\r\n                position: [p.Any, null],\r\n                content: [p.Any, function () { return dom_1.div(); }],\r\n                custom: [p.Any],\r\n            });\r\n        };\r\n        Tooltip.prototype.clear = function () {\r\n            this.position = null;\r\n        };\r\n        return Tooltip;\r\n    }(annotation_1.Annotation));\r\n    exports.Tooltip = Tooltip;\r\n    Tooltip.__name__ = \"Tooltip\";\r\n    Tooltip.init_Tooltip();\r\n}\r\n","/* styles\\tooltips.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_tooltip = \"bk-tooltip\";\r\n    exports.bk_tooltip_arrow = \"bk-tooltip-arrow\";\r\n    exports.bk_tooltip_custom = \"bk-tooltip-custom\";\r\n    exports.bk_tooltip_row_label = \"bk-tooltip-row-label\";\r\n    exports.bk_tooltip_row_value = \"bk-tooltip-row-value\";\r\n    exports.bk_tooltip_color_block = \"bk-tooltip-color-block\";\r\n}\r\n","/* styles\\mixins.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_active = \"bk-active\";\r\n    exports.bk_inline = \"bk-inline\";\r\n    exports.bk_left = \"bk-left\";\r\n    exports.bk_right = \"bk-right\";\r\n    exports.bk_above = \"bk-above\";\r\n    exports.bk_below = \"bk-below\";\r\n    exports.bk_up = \"bk-up\";\r\n    exports.bk_down = \"bk-down\";\r\n    function bk_side(side) {\r\n        switch (side) {\r\n            case \"above\": return exports.bk_above;\r\n            case \"below\": return exports.bk_below;\r\n            case \"left\": return exports.bk_left;\r\n            case \"right\": return exports.bk_right;\r\n        }\r\n    }\r\n    exports.bk_side = bk_side;\r\n}\r\n","/* styles\\tooltips.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root {\\n  /* Same border color used everywhere */\\n  /* Gray of icons */\\n}\\n.bk-root .bk-tooltip {\\n  font-weight: 300;\\n  font-size: 12px;\\n  position: absolute;\\n  padding: 5px;\\n  border: 1px solid #e5e5e5;\\n  color: #2f2f2f;\\n  background-color: white;\\n  pointer-events: none;\\n  opacity: 0.95;\\n  z-index: 100;\\n}\\n.bk-root .bk-tooltip > div:not(:first-child) {\\n  /* gives space when multiple elements are being hovered over */\\n  margin-top: 5px;\\n  border-top: #e5e5e5 1px dashed;\\n}\\n.bk-root .bk-tooltip.bk-left.bk-tooltip-arrow::before {\\n  position: absolute;\\n  margin: -7px 0 0 0;\\n  top: 50%;\\n  width: 0;\\n  height: 0;\\n  border-style: solid;\\n  border-width: 7px 0 7px 0;\\n  border-color: transparent;\\n  content: \\\" \\\";\\n  display: block;\\n  left: -10px;\\n  border-right-width: 10px;\\n  border-right-color: #909599;\\n}\\n.bk-root .bk-tooltip.bk-left::before {\\n  left: -10px;\\n  border-right-width: 10px;\\n  border-right-color: #909599;\\n}\\n.bk-root .bk-tooltip.bk-right.bk-tooltip-arrow::after {\\n  position: absolute;\\n  margin: -7px 0 0 0;\\n  top: 50%;\\n  width: 0;\\n  height: 0;\\n  border-style: solid;\\n  border-width: 7px 0 7px 0;\\n  border-color: transparent;\\n  content: \\\" \\\";\\n  display: block;\\n  right: -10px;\\n  border-left-width: 10px;\\n  border-left-color: #909599;\\n}\\n.bk-root .bk-tooltip.bk-right::after {\\n  right: -10px;\\n  border-left-width: 10px;\\n  border-left-color: #909599;\\n}\\n.bk-root .bk-tooltip.bk-above::before {\\n  position: absolute;\\n  margin: 0 0 0 -7px;\\n  left: 50%;\\n  width: 0;\\n  height: 0;\\n  border-style: solid;\\n  border-width: 0 7px 0 7px;\\n  border-color: transparent;\\n  content: \\\" \\\";\\n  display: block;\\n  top: -10px;\\n  border-bottom-width: 10px;\\n  border-bottom-color: #909599;\\n}\\n.bk-root .bk-tooltip.bk-below::after {\\n  position: absolute;\\n  margin: 0 0 0 -7px;\\n  left: 50%;\\n  width: 0;\\n  height: 0;\\n  border-style: solid;\\n  border-width: 0 7px 0 7px;\\n  border-color: transparent;\\n  content: \\\" \\\";\\n  display: block;\\n  bottom: -10px;\\n  border-top-width: 10px;\\n  border-top-color: #909599;\\n}\\n.bk-root .bk-tooltip-row-label {\\n  text-align: right;\\n  color: #26aae1;\\n  /* blue from toolbar highlighting */\\n}\\n.bk-root .bk-tooltip-row-value {\\n  color: default;\\n  /* seems to be necessary for notebook */\\n}\\n.bk-root .bk-tooltip-color-block {\\n  width: 12px;\\n  height: 12px;\\n  margin-left: 5px;\\n  margin-right: 5px;\\n  outline: #dddddd solid 1px;\\n  display: inline-block;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* models\\annotations\\whisker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var upper_lower_1 = require(238) /* ./upper_lower */;\r\n    var arrow_head_1 = require(199) /* ./arrow_head */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var WhiskerView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WhiskerView, _super);\r\n        function WhiskerView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        WhiskerView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.source.streaming, function () { return _this.set_data(_this.model.source); });\r\n            this.connect(this.model.source.patching, function () { return _this.set_data(_this.model.source); });\r\n            this.connect(this.model.source.change, function () { return _this.set_data(_this.model.source); });\r\n        };\r\n        WhiskerView.prototype._render = function () {\r\n            this._map_data();\r\n            var ctx = this.layer.ctx;\r\n            if (this.visuals.line.doit) {\r\n                for (var i = 0, end = this._lower_sx.length; i < end; i++) {\r\n                    this.visuals.line.set_vectorize(ctx, i);\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(this._lower_sx[i], this._lower_sy[i]);\r\n                    ctx.lineTo(this._upper_sx[i], this._upper_sy[i]);\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n            var angle = this.model.dimension == \"height\" ? 0 : Math.PI / 2;\r\n            if (this.model.lower_head != null) {\r\n                for (var i = 0, end = this._lower_sx.length; i < end; i++) {\r\n                    ctx.save();\r\n                    ctx.translate(this._lower_sx[i], this._lower_sy[i]);\r\n                    ctx.rotate(angle + Math.PI);\r\n                    this.model.lower_head.render(ctx, i);\r\n                    ctx.restore();\r\n                }\r\n            }\r\n            if (this.model.upper_head != null) {\r\n                for (var i = 0, end = this._upper_sx.length; i < end; i++) {\r\n                    ctx.save();\r\n                    ctx.translate(this._upper_sx[i], this._upper_sy[i]);\r\n                    ctx.rotate(angle);\r\n                    this.model.upper_head.render(ctx, i);\r\n                    ctx.restore();\r\n                }\r\n            }\r\n        };\r\n        return WhiskerView;\r\n    }(upper_lower_1.UpperLowerView));\r\n    exports.WhiskerView = WhiskerView;\r\n    WhiskerView.__name__ = \"WhiskerView\";\r\n    var Whisker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Whisker, _super);\r\n        function Whisker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Whisker.init_Whisker = function () {\r\n            this.prototype.default_view = WhiskerView;\r\n            this.mixins(property_mixins_1.LineVector);\r\n            this.define({\r\n                lower_head: [p.Instance, function () { return new arrow_head_1.TeeHead({ level: \"underlay\", size: 10 }); }],\r\n                upper_head: [p.Instance, function () { return new arrow_head_1.TeeHead({ level: \"underlay\", size: 10 }); }],\r\n            });\r\n            this.override({\r\n                level: 'underlay',\r\n            });\r\n        };\r\n        return Whisker;\r\n    }(upper_lower_1.UpperLower));\r\n    exports.Whisker = Whisker;\r\n    Whisker.__name__ = \"Whisker\";\r\n    Whisker.init_Whisker();\r\n}\r\n","/* models\\axes\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var axis_1 = require(292) /* ./axis */;\r\n    exports.Axis = axis_1.Axis;\r\n    var categorical_axis_1 = require(294) /* ./categorical_axis */;\r\n    exports.CategoricalAxis = categorical_axis_1.CategoricalAxis;\r\n    var continuous_axis_1 = require(297) /* ./continuous_axis */;\r\n    exports.ContinuousAxis = continuous_axis_1.ContinuousAxis;\r\n    var datetime_axis_1 = require(298) /* ./datetime_axis */;\r\n    exports.DatetimeAxis = datetime_axis_1.DatetimeAxis;\r\n    var linear_axis_1 = require(299) /* ./linear_axis */;\r\n    exports.LinearAxis = linear_axis_1.LinearAxis;\r\n    var log_axis_1 = require(312) /* ./log_axis */;\r\n    exports.LogAxis = log_axis_1.LogAxis;\r\n    var mercator_axis_1 = require(315) /* ./mercator_axis */;\r\n    exports.MercatorAxis = mercator_axis_1.MercatorAxis;\r\n}\r\n","/* models\\axes\\axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var guide_renderer_1 = require(293) /* ../renderers/guide_renderer */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var factor_range_1 = require(213) /* ../ranges/factor_range */;\r\n    var abs = Math.abs, min = Math.min, max = Math.max;\r\n    var AxisView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AxisView, _super);\r\n        function AxisView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.rotate = true;\r\n            return _this;\r\n        }\r\n        Object.defineProperty(AxisView.prototype, \"panel\", {\r\n            get: function () {\r\n                return this.layout;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AxisView.prototype, \"is_renderable\", {\r\n            get: function () {\r\n                var _b = tslib_1.__read(this.ranges, 2), range = _b[0], cross_range = _b[1];\r\n                return range.is_valid && cross_range.is_valid;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        AxisView.prototype._render = function () {\r\n            var _a;\r\n            if (!this.is_renderable)\r\n                return;\r\n            var extents = {\r\n                tick: this._tick_extent(),\r\n                tick_label: this._tick_label_extents(),\r\n                axis_label: this._axis_label_extent(),\r\n            };\r\n            var tick_coords = this.tick_coords;\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            this._draw_rule(ctx, extents);\r\n            this._draw_major_ticks(ctx, extents, tick_coords);\r\n            this._draw_minor_ticks(ctx, extents, tick_coords);\r\n            this._draw_major_labels(ctx, extents, tick_coords);\r\n            this._draw_axis_label(ctx, extents, tick_coords);\r\n            (_a = this._paint) === null || _a === void 0 ? void 0 : _a.call(this, ctx, extents, tick_coords);\r\n            ctx.restore();\r\n        };\r\n        AxisView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.plot_view.request_layout(); });\r\n        };\r\n        AxisView.prototype.get_size = function () {\r\n            if (this.model.visible && this.model.fixed_location == null && this.is_renderable) {\r\n                var size = this._get_size();\r\n                return { width: 0 /* max */, height: Math.round(size) };\r\n            }\r\n            else\r\n                return { width: 0, height: 0 };\r\n        };\r\n        AxisView.prototype._get_size = function () {\r\n            return this._tick_extent() + this._tick_label_extent() + this._axis_label_extent();\r\n        };\r\n        Object.defineProperty(AxisView.prototype, \"needs_clip\", {\r\n            get: function () {\r\n                return this.model.fixed_location != null;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        // drawing sub functions -----------------------------------------------------\r\n        AxisView.prototype._draw_rule = function (ctx, _extents) {\r\n            if (!this.visuals.axis_line.doit)\r\n                return;\r\n            var _b = tslib_1.__read(this.rule_coords, 2), xs = _b[0], ys = _b[1];\r\n            var _c = tslib_1.__read(this.coordinates.map_to_screen(xs, ys), 2), sxs = _c[0], sys = _c[1];\r\n            var _d = tslib_1.__read(this.normals, 2), nx = _d[0], ny = _d[1];\r\n            var _e = tslib_1.__read(this.offsets, 2), xoff = _e[0], yoff = _e[1];\r\n            this.visuals.axis_line.set_value(ctx);\r\n            ctx.beginPath();\r\n            ctx.moveTo(Math.round(sxs[0] + nx * xoff), Math.round(sys[0] + ny * yoff));\r\n            for (var i = 1; i < sxs.length; i++) {\r\n                var sx = Math.round(sxs[i] + nx * xoff);\r\n                var sy = Math.round(sys[i] + ny * yoff);\r\n                ctx.lineTo(sx, sy);\r\n            }\r\n            ctx.stroke();\r\n        };\r\n        AxisView.prototype._draw_major_ticks = function (ctx, _extents, tick_coords) {\r\n            var tin = this.model.major_tick_in;\r\n            var tout = this.model.major_tick_out;\r\n            var visuals = this.visuals.major_tick_line;\r\n            this._draw_ticks(ctx, tick_coords.major, tin, tout, visuals);\r\n        };\r\n        AxisView.prototype._draw_minor_ticks = function (ctx, _extents, tick_coords) {\r\n            var tin = this.model.minor_tick_in;\r\n            var tout = this.model.minor_tick_out;\r\n            var visuals = this.visuals.minor_tick_line;\r\n            this._draw_ticks(ctx, tick_coords.minor, tin, tout, visuals);\r\n        };\r\n        AxisView.prototype._draw_major_labels = function (ctx, extents, tick_coords) {\r\n            var coords = tick_coords.major;\r\n            var labels = this.compute_labels(coords[this.dimension]);\r\n            var orient = this.model.major_label_orientation;\r\n            var standoff = extents.tick + this.model.major_label_standoff;\r\n            var visuals = this.visuals.major_label_text;\r\n            this._draw_oriented_labels(ctx, labels, coords, orient, this.panel.side, standoff, visuals);\r\n        };\r\n        AxisView.prototype._draw_axis_label = function (ctx, extents, _tick_coords) {\r\n            if (this.model.axis_label == null || this.model.axis_label.length == 0 || this.model.fixed_location != null)\r\n                return;\r\n            var sx;\r\n            var sy;\r\n            var bbox = this.panel.bbox;\r\n            switch (this.panel.side) {\r\n                case \"above\":\r\n                    sx = bbox.hcenter;\r\n                    sy = bbox.bottom;\r\n                    break;\r\n                case \"below\":\r\n                    sx = bbox.hcenter;\r\n                    sy = bbox.top;\r\n                    break;\r\n                case \"left\":\r\n                    sx = bbox.right;\r\n                    sy = bbox.vcenter;\r\n                    break;\r\n                case \"right\":\r\n                    sx = bbox.left;\r\n                    sy = bbox.vcenter;\r\n                    break;\r\n                default:\r\n                    throw new Error(\"unknown side: \" + this.panel.side);\r\n            }\r\n            var coords = [[sx], [sy]];\r\n            var standoff = extents.tick + array_1.sum(extents.tick_label) + this.model.axis_label_standoff;\r\n            var visuals = this.visuals.axis_label_text;\r\n            this._draw_oriented_labels(ctx, [this.model.axis_label], coords, 'parallel', this.panel.side, standoff, visuals, \"screen\");\r\n        };\r\n        AxisView.prototype._draw_ticks = function (ctx, coords, tin, tout, visuals) {\r\n            if (!visuals.doit)\r\n                return;\r\n            var _b = tslib_1.__read(coords, 2), x = _b[0], y = _b[1];\r\n            var _c = tslib_1.__read(this.coordinates.map_to_screen(x, y), 2), sxs = _c[0], sys = _c[1];\r\n            var _d = tslib_1.__read(this.normals, 2), nx = _d[0], ny = _d[1];\r\n            var _e = tslib_1.__read(this.offsets, 2), xoff = _e[0], yoff = _e[1];\r\n            var _f = tslib_1.__read([nx * (xoff - tin), ny * (yoff - tin)], 2), nxin = _f[0], nyin = _f[1];\r\n            var _g = tslib_1.__read([nx * (xoff + tout), ny * (yoff + tout)], 2), nxout = _g[0], nyout = _g[1];\r\n            visuals.set_value(ctx);\r\n            ctx.beginPath();\r\n            for (var i = 0; i < sxs.length; i++) {\r\n                var sx0 = Math.round(sxs[i] + nxout);\r\n                var sy0 = Math.round(sys[i] + nyout);\r\n                var sx1 = Math.round(sxs[i] + nxin);\r\n                var sy1 = Math.round(sys[i] + nyin);\r\n                ctx.moveTo(sx0, sy0);\r\n                ctx.lineTo(sx1, sy1);\r\n            }\r\n            ctx.stroke();\r\n        };\r\n        AxisView.prototype._draw_oriented_labels = function (ctx, labels, coords, orient, _side, standoff, visuals, units) {\r\n            var _b, _c, _d, _e;\r\n            if (units === void 0) {\r\n                units = \"data\";\r\n            }\r\n            if (!visuals.doit || labels.length == 0)\r\n                return;\r\n            var sxs, sys;\r\n            var xoff, yoff;\r\n            if (units == \"screen\") {\r\n                _b = tslib_1.__read(coords, 2), sxs = _b[0], sys = _b[1];\r\n                _c = tslib_1.__read([0, 0], 2), xoff = _c[0], yoff = _c[1];\r\n            }\r\n            else {\r\n                var _f = tslib_1.__read(coords, 2), dxs = _f[0], dys = _f[1];\r\n                _d = tslib_1.__read(this.coordinates.map_to_screen(dxs, dys), 2), sxs = _d[0], sys = _d[1];\r\n                _e = tslib_1.__read(this.offsets, 2), xoff = _e[0], yoff = _e[1];\r\n            }\r\n            var _g = tslib_1.__read(this.normals, 2), nx = _g[0], ny = _g[1];\r\n            var nxd = nx * (xoff + standoff);\r\n            var nyd = ny * (yoff + standoff);\r\n            visuals.set_value(ctx);\r\n            this.panel.apply_label_text_heuristics(ctx, orient);\r\n            var angle;\r\n            if (types_1.isString(orient))\r\n                angle = this.panel.get_label_angle_heuristic(orient);\r\n            else\r\n                angle = -orient;\r\n            for (var i = 0; i < sxs.length; i++) {\r\n                var sx = Math.round(sxs[i] + nxd);\r\n                var sy = Math.round(sys[i] + nyd);\r\n                ctx.translate(sx, sy);\r\n                ctx.rotate(angle);\r\n                ctx.fillText(labels[i], 0, 0);\r\n                ctx.rotate(-angle);\r\n                ctx.translate(-sx, -sy);\r\n            }\r\n        };\r\n        // extents sub functions -----------------------------------------------------\r\n        /*protected*/ AxisView.prototype._axis_label_extent = function () {\r\n            if (this.model.axis_label == null || this.model.axis_label == \"\")\r\n                return 0;\r\n            var standoff = this.model.axis_label_standoff;\r\n            var visuals = this.visuals.axis_label_text;\r\n            return this._oriented_labels_extent([this.model.axis_label], \"parallel\", this.panel.side, standoff, visuals);\r\n        };\r\n        /*protected*/ AxisView.prototype._tick_extent = function () {\r\n            return this.model.major_tick_out;\r\n        };\r\n        /*protected*/ AxisView.prototype._tick_label_extent = function () {\r\n            return array_1.sum(this._tick_label_extents());\r\n        };\r\n        AxisView.prototype._tick_label_extents = function () {\r\n            var coords = this.tick_coords.major;\r\n            var labels = this.compute_labels(coords[this.dimension]);\r\n            var orient = this.model.major_label_orientation;\r\n            var standoff = this.model.major_label_standoff;\r\n            var visuals = this.visuals.major_label_text;\r\n            return [this._oriented_labels_extent(labels, orient, this.panel.side, standoff, visuals)];\r\n        };\r\n        AxisView.prototype._oriented_labels_extent = function (labels, orient, side, standoff, visuals) {\r\n            if (labels.length == 0)\r\n                return 0;\r\n            var ctx = this.layer.ctx;\r\n            visuals.set_value(ctx);\r\n            var hscale;\r\n            var angle;\r\n            if (types_1.isString(orient)) {\r\n                hscale = 1;\r\n                angle = this.panel.get_label_angle_heuristic(orient);\r\n            }\r\n            else {\r\n                hscale = 2;\r\n                angle = -orient;\r\n            }\r\n            angle = Math.abs(angle);\r\n            var c = Math.cos(angle);\r\n            var s = Math.sin(angle);\r\n            var extent = 0;\r\n            for (var i = 0; i < labels.length; i++) {\r\n                var w = ctx.measureText(labels[i]).width * 1.1;\r\n                var h = ctx.measureText(labels[i]).ascent * 0.9;\r\n                var val = void 0;\r\n                if (side == \"above\" || side == \"below\")\r\n                    val = w * s + (h / hscale) * c;\r\n                else\r\n                    val = w * c + (h / hscale) * s;\r\n                // update extent if current value is larger\r\n                if (val > extent)\r\n                    extent = val;\r\n            }\r\n            // only apply the standoff if we already have non-zero extent\r\n            if (extent > 0)\r\n                extent += standoff;\r\n            return extent;\r\n        };\r\n        Object.defineProperty(AxisView.prototype, \"normals\", {\r\n            // {{{ TODO: state\r\n            get: function () {\r\n                return this.panel.normals;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AxisView.prototype, \"dimension\", {\r\n            get: function () {\r\n                return this.panel.dimension;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        AxisView.prototype.compute_labels = function (ticks) {\r\n            var labels = this.model.formatter.doFormat(ticks, this);\r\n            for (var i = 0; i < ticks.length; i++) {\r\n                if (ticks[i] in this.model.major_label_overrides)\r\n                    labels[i] = this.model.major_label_overrides[ticks[i]];\r\n            }\r\n            return labels;\r\n        };\r\n        Object.defineProperty(AxisView.prototype, \"offsets\", {\r\n            get: function () {\r\n                // If we have a fixed_position then we should respect that exactly and\r\n                // not apply any offsets (https://github.com/bokeh/bokeh/issues/8552)\r\n                if (this.model.fixed_location != null)\r\n                    return [0, 0];\r\n                var frame = this.plot_view.frame;\r\n                var _b = tslib_1.__read([0, 0], 2), xoff = _b[0], yoff = _b[1];\r\n                switch (this.panel.side) {\r\n                    case \"below\":\r\n                        yoff = abs(this.panel.bbox.top - frame.bbox.bottom);\r\n                        break;\r\n                    case \"above\":\r\n                        yoff = abs(this.panel.bbox.bottom - frame.bbox.top);\r\n                        break;\r\n                    case \"right\":\r\n                        xoff = abs(this.panel.bbox.left - frame.bbox.right);\r\n                        break;\r\n                    case \"left\":\r\n                        xoff = abs(this.panel.bbox.right - frame.bbox.left);\r\n                        break;\r\n                }\r\n                return [xoff, yoff];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AxisView.prototype, \"ranges\", {\r\n            get: function () {\r\n                var i = this.dimension;\r\n                var j = (i + 1) % 2;\r\n                var ranges = this.coordinates.ranges;\r\n                return [ranges[i], ranges[j]];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AxisView.prototype, \"computed_bounds\", {\r\n            get: function () {\r\n                var _b = tslib_1.__read(this.ranges, 1), range = _b[0];\r\n                var user_bounds = this.model.bounds;\r\n                var range_bounds = [range.min, range.max];\r\n                if (user_bounds == \"auto\")\r\n                    return [range.min, range.max];\r\n                else {\r\n                    var start = void 0;\r\n                    var end = void 0;\r\n                    var _c = tslib_1.__read(user_bounds, 2), user_start = _c[0], user_end = _c[1];\r\n                    var _d = tslib_1.__read(range_bounds, 2), range_start = _d[0], range_end = _d[1];\r\n                    if (abs(user_start - user_end) > abs(range_start - range_end)) {\r\n                        start = max(min(user_start, user_end), range_start);\r\n                        end = min(max(user_start, user_end), range_end);\r\n                    }\r\n                    else {\r\n                        start = min(user_start, user_end);\r\n                        end = max(user_start, user_end);\r\n                    }\r\n                    return [start, end];\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AxisView.prototype, \"rule_coords\", {\r\n            get: function () {\r\n                var i = this.dimension;\r\n                var j = (i + 1) % 2;\r\n                var _b = tslib_1.__read(this.ranges, 1), range = _b[0];\r\n                var _c = tslib_1.__read(this.computed_bounds, 2), start = _c[0], end = _c[1];\r\n                var xs = new Array(2);\r\n                var ys = new Array(2);\r\n                var coords = [xs, ys];\r\n                coords[i][0] = Math.max(start, range.min);\r\n                coords[i][1] = Math.min(end, range.max);\r\n                if (coords[i][0] > coords[i][1])\r\n                    coords[i][0] = coords[i][1] = NaN;\r\n                coords[j][0] = this.loc;\r\n                coords[j][1] = this.loc;\r\n                return coords;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AxisView.prototype, \"tick_coords\", {\r\n            get: function () {\r\n                var i = this.dimension;\r\n                var j = (i + 1) % 2;\r\n                var _b = tslib_1.__read(this.ranges, 1), range = _b[0];\r\n                var _c = tslib_1.__read(this.computed_bounds, 2), start = _c[0], end = _c[1];\r\n                var ticks = this.model.ticker.get_ticks(start, end, range, this.loc, {});\r\n                var majors = ticks.major;\r\n                var minors = ticks.minor;\r\n                var xs = [];\r\n                var ys = [];\r\n                var coords = [xs, ys];\r\n                var minor_xs = [];\r\n                var minor_ys = [];\r\n                var minor_coords = [minor_xs, minor_ys];\r\n                var _d = tslib_1.__read([range.min, range.max], 2), range_min = _d[0], range_max = _d[1];\r\n                for (var ii = 0; ii < majors.length; ii++) {\r\n                    if (majors[ii] < range_min || majors[ii] > range_max)\r\n                        continue;\r\n                    coords[i].push(majors[ii]);\r\n                    coords[j].push(this.loc);\r\n                }\r\n                for (var ii = 0; ii < minors.length; ii++) {\r\n                    if (minors[ii] < range_min || minors[ii] > range_max)\r\n                        continue;\r\n                    minor_coords[i].push(minors[ii]);\r\n                    minor_coords[j].push(this.loc);\r\n                }\r\n                return {\r\n                    major: coords,\r\n                    minor: minor_coords,\r\n                };\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(AxisView.prototype, \"loc\", {\r\n            get: function () {\r\n                var fixed_location = this.model.fixed_location;\r\n                if (fixed_location != null) {\r\n                    if (types_1.isNumber(fixed_location))\r\n                        return fixed_location;\r\n                    var _b = tslib_1.__read(this.ranges, 2), cross_range_1 = _b[1];\r\n                    if (cross_range_1 instanceof factor_range_1.FactorRange)\r\n                        return cross_range_1.synthetic(fixed_location);\r\n                    throw new Error(\"unexpected\");\r\n                }\r\n                var _c = tslib_1.__read(this.ranges, 2), cross_range = _c[1];\r\n                switch (this.panel.side) {\r\n                    case 'left':\r\n                    case 'below':\r\n                        return cross_range.start;\r\n                    case 'right':\r\n                    case 'above':\r\n                        return cross_range.end;\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        // }}}\r\n        AxisView.prototype.serializable_state = function () {\r\n            return Object.assign(Object.assign({}, _super.prototype.serializable_state.call(this)), { bbox: this.layout.bbox.box });\r\n        };\r\n        return AxisView;\r\n    }(guide_renderer_1.GuideRendererView));\r\n    exports.AxisView = AxisView;\r\n    AxisView.__name__ = \"AxisView\";\r\n    var Axis = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Axis, _super);\r\n        function Axis(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Axis.init_Axis = function () {\r\n            this.prototype.default_view = AxisView;\r\n            this.mixins([\r\n                [\"axis_\", mixins.Line],\r\n                [\"major_tick_\", mixins.Line],\r\n                [\"minor_tick_\", mixins.Line],\r\n                [\"major_label_\", mixins.Text],\r\n                [\"axis_label_\", mixins.Text],\r\n            ]);\r\n            this.define({\r\n                bounds: [p.Any, 'auto'],\r\n                ticker: [p.Instance],\r\n                formatter: [p.Instance],\r\n                axis_label: [p.String, ''],\r\n                axis_label_standoff: [p.Int, 5],\r\n                major_label_standoff: [p.Int, 5],\r\n                major_label_orientation: [p.Any, \"horizontal\"],\r\n                major_label_overrides: [p.Any, {}],\r\n                major_tick_in: [p.Number, 2],\r\n                major_tick_out: [p.Number, 6],\r\n                minor_tick_in: [p.Number, 0],\r\n                minor_tick_out: [p.Number, 4],\r\n                fixed_location: [p.Any, null],\r\n            });\r\n            this.override({\r\n                axis_line_color: 'black',\r\n                major_tick_line_color: 'black',\r\n                minor_tick_line_color: 'black',\r\n                major_label_text_font_size: \"11px\",\r\n                major_label_text_align: \"center\",\r\n                major_label_text_baseline: \"alphabetic\",\r\n                axis_label_text_font_size: \"13px\",\r\n                axis_label_text_font_style: \"italic\",\r\n            });\r\n        };\r\n        return Axis;\r\n    }(guide_renderer_1.GuideRenderer));\r\n    exports.Axis = Axis;\r\n    Axis.__name__ = \"Axis\";\r\n    Axis.init_Axis();\r\n}\r\n","/* models\\renderers\\guide_renderer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var renderer_1 = require(185) /* ./renderer */;\r\n    var GuideRendererView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GuideRendererView, _super);\r\n        function GuideRendererView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return GuideRendererView;\r\n    }(renderer_1.RendererView));\r\n    exports.GuideRendererView = GuideRendererView;\r\n    GuideRendererView.__name__ = \"GuideRendererView\";\r\n    var GuideRenderer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GuideRenderer, _super);\r\n        function GuideRenderer(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GuideRenderer.init_GuideRenderer = function () {\r\n            this.override({\r\n                level: \"guide\",\r\n            });\r\n        };\r\n        return GuideRenderer;\r\n    }(renderer_1.Renderer));\r\n    exports.GuideRenderer = GuideRenderer;\r\n    GuideRenderer.__name__ = \"GuideRenderer\";\r\n    GuideRenderer.init_GuideRenderer();\r\n}\r\n","/* models\\axes\\categorical_axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var axis_1 = require(292) /* ./axis */;\r\n    var categorical_ticker_1 = require(295) /* ../tickers/categorical_ticker */;\r\n    var categorical_tick_formatter_1 = require(296) /* ../formatters/categorical_tick_formatter */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var CategoricalAxisView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalAxisView, _super);\r\n        function CategoricalAxisView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CategoricalAxisView.prototype._paint = function (ctx, extents, tick_coords) {\r\n            this._draw_group_separators(ctx, extents, tick_coords);\r\n        };\r\n        CategoricalAxisView.prototype._draw_group_separators = function (ctx, _extents, _tick_coords) {\r\n            var _a;\r\n            var _b = tslib_1.__read(this.ranges, 1), range = _b[0];\r\n            var _c = tslib_1.__read(this.computed_bounds, 2), start = _c[0], end = _c[1];\r\n            if (!range.tops || range.tops.length < 2 || !this.visuals.separator_line.doit)\r\n                return;\r\n            var dim = this.dimension;\r\n            var alt = (dim + 1) % 2;\r\n            var coords = [[], []];\r\n            var ind = 0;\r\n            for (var i = 0; i < range.tops.length - 1; i++) {\r\n                var first = void 0, last = void 0;\r\n                for (var j = ind; j < range.factors.length; j++) {\r\n                    if (range.factors[j][0] == range.tops[i + 1]) {\r\n                        _a = tslib_1.__read([range.factors[j - 1], range.factors[j]], 2), first = _a[0], last = _a[1];\r\n                        ind = j;\r\n                        break;\r\n                    }\r\n                }\r\n                var pt = (range.synthetic(first) + range.synthetic(last)) / 2;\r\n                if (pt > start && pt < end) {\r\n                    coords[dim].push(pt);\r\n                    coords[alt].push(this.loc);\r\n                }\r\n            }\r\n            var tex = this._tick_label_extent();\r\n            this._draw_ticks(ctx, coords, -3, (tex - 6), this.visuals.separator_line);\r\n        };\r\n        CategoricalAxisView.prototype._draw_major_labels = function (ctx, extents, _tick_coords) {\r\n            var info = this._get_factor_info();\r\n            var standoff = extents.tick + this.model.major_label_standoff;\r\n            for (var i = 0; i < info.length; i++) {\r\n                var _a = tslib_1.__read(info[i], 4), labels = _a[0], coords = _a[1], orient = _a[2], visuals = _a[3];\r\n                this._draw_oriented_labels(ctx, labels, coords, orient, this.panel.side, standoff, visuals);\r\n                standoff += extents.tick_label[i];\r\n            }\r\n        };\r\n        CategoricalAxisView.prototype._tick_label_extents = function () {\r\n            var e_1, _a;\r\n            var info = this._get_factor_info();\r\n            var extents = [];\r\n            try {\r\n                for (var info_1 = tslib_1.__values(info), info_1_1 = info_1.next(); !info_1_1.done; info_1_1 = info_1.next()) {\r\n                    var _b = tslib_1.__read(info_1_1.value, 4), labels = _b[0], orient = _b[2], visuals = _b[3];\r\n                    var extent = this._oriented_labels_extent(labels, orient, this.panel.side, this.model.major_label_standoff, visuals);\r\n                    extents.push(extent);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (info_1_1 && !info_1_1.done && (_a = info_1.return))\r\n                        _a.call(info_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return extents;\r\n        };\r\n        CategoricalAxisView.prototype._get_factor_info = function () {\r\n            var _a = tslib_1.__read(this.ranges, 1), range = _a[0];\r\n            var _b = tslib_1.__read(this.computed_bounds, 2), start = _b[0], end = _b[1];\r\n            var loc = this.loc;\r\n            var ticks = this.model.ticker.get_ticks(start, end, range, loc, {});\r\n            var coords = this.tick_coords;\r\n            var info = [];\r\n            if (range.levels == 1) {\r\n                var major = ticks.major;\r\n                var labels = this.model.formatter.doFormat(major, this);\r\n                info.push([labels, coords.major, this.model.major_label_orientation, this.visuals.major_label_text]);\r\n            }\r\n            else if (range.levels == 2) {\r\n                var major = ticks.major.map(function (x) { return x[1]; });\r\n                var labels = this.model.formatter.doFormat(major, this);\r\n                info.push([labels, coords.major, this.model.major_label_orientation, this.visuals.major_label_text]);\r\n                info.push([ticks.tops, coords.tops, this.model.group_label_orientation, this.visuals.group_text]);\r\n            }\r\n            else if (range.levels == 3) {\r\n                var major = ticks.major.map(function (x) { return x[2]; });\r\n                var labels = this.model.formatter.doFormat(major, this);\r\n                var mid_labels = ticks.mids.map(function (x) { return x[1]; });\r\n                info.push([labels, coords.major, this.model.major_label_orientation, this.visuals.major_label_text]);\r\n                info.push([mid_labels, coords.mids, this.model.subgroup_label_orientation, this.visuals.subgroup_text]);\r\n                info.push([ticks.tops, coords.tops, this.model.group_label_orientation, this.visuals.group_text]);\r\n            }\r\n            return info;\r\n        };\r\n        Object.defineProperty(CategoricalAxisView.prototype, \"tick_coords\", {\r\n            // {{{ TODO: state\r\n            get: function () {\r\n                var _this = this;\r\n                var i = this.dimension;\r\n                var j = (i + 1) % 2;\r\n                var _a = tslib_1.__read(this.ranges, 1), range = _a[0];\r\n                var _b = tslib_1.__read(this.computed_bounds, 2), start = _b[0], end = _b[1];\r\n                var ticks = this.model.ticker.get_ticks(start, end, range, this.loc, {});\r\n                var coords = {\r\n                    major: [[], []],\r\n                    mids: [[], []],\r\n                    tops: [[], []],\r\n                    minor: [[], []],\r\n                };\r\n                coords.major[i] = ticks.major;\r\n                coords.major[j] = ticks.major.map(function (_x) { return _this.loc; });\r\n                if (range.levels == 3) {\r\n                    coords.mids[i] = ticks.mids;\r\n                    coords.mids[j] = ticks.mids.map(function (_x) { return _this.loc; });\r\n                }\r\n                if (range.levels > 1) {\r\n                    coords.tops[i] = ticks.tops;\r\n                    coords.tops[j] = ticks.tops.map(function (_x) { return _this.loc; });\r\n                }\r\n                return coords;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return CategoricalAxisView;\r\n    }(axis_1.AxisView));\r\n    exports.CategoricalAxisView = CategoricalAxisView;\r\n    CategoricalAxisView.__name__ = \"CategoricalAxisView\";\r\n    var CategoricalAxis = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalAxis, _super);\r\n        function CategoricalAxis(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CategoricalAxis.init_CategoricalAxis = function () {\r\n            this.prototype.default_view = CategoricalAxisView;\r\n            this.mixins([\r\n                [\"separator_\", mixins.Line],\r\n                [\"group_\", mixins.Text],\r\n                [\"subgroup_\", mixins.Text],\r\n            ]);\r\n            this.define({\r\n                group_label_orientation: [p.Any, \"parallel\"],\r\n                subgroup_label_orientation: [p.Any, \"parallel\"],\r\n            });\r\n            this.override({\r\n                ticker: function () { return new categorical_ticker_1.CategoricalTicker(); },\r\n                formatter: function () { return new categorical_tick_formatter_1.CategoricalTickFormatter(); },\r\n                separator_line_color: \"lightgrey\",\r\n                separator_line_width: 2,\r\n                group_text_font_style: \"bold\",\r\n                group_text_font_size: \"11px\",\r\n                group_text_color: \"grey\",\r\n                subgroup_text_font_style: \"bold\",\r\n                subgroup_text_font_size: \"11px\",\r\n            });\r\n        };\r\n        return CategoricalAxis;\r\n    }(axis_1.Axis));\r\n    exports.CategoricalAxis = CategoricalAxis;\r\n    CategoricalAxis.__name__ = \"CategoricalAxis\";\r\n    CategoricalAxis.init_CategoricalAxis();\r\n}\r\n","/* models\\tickers\\categorical_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var ticker_1 = require(244) /* ./ticker */;\r\n    var CategoricalTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalTicker, _super);\r\n        function CategoricalTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CategoricalTicker.prototype.get_ticks = function (start, end, range, _cross_loc, _) {\r\n            var majors = this._collect(range.factors, range, start, end);\r\n            var tops = this._collect(range.tops || [], range, start, end);\r\n            var mids = this._collect(range.mids || [], range, start, end);\r\n            return {\r\n                major: majors,\r\n                minor: [],\r\n                tops: tops,\r\n                mids: mids,\r\n            };\r\n        };\r\n        CategoricalTicker.prototype._collect = function (factors, range, start, end) {\r\n            var e_1, _a;\r\n            var result = [];\r\n            try {\r\n                for (var factors_1 = tslib_1.__values(factors), factors_1_1 = factors_1.next(); !factors_1_1.done; factors_1_1 = factors_1.next()) {\r\n                    var factor = factors_1_1.value;\r\n                    var coord = range.synthetic(factor);\r\n                    if (coord > start && coord < end)\r\n                        result.push(factor);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (factors_1_1 && !factors_1_1.done && (_a = factors_1.return))\r\n                        _a.call(factors_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        return CategoricalTicker;\r\n    }(ticker_1.Ticker));\r\n    exports.CategoricalTicker = CategoricalTicker;\r\n    CategoricalTicker.__name__ = \"CategoricalTicker\";\r\n}\r\n","/* models\\formatters\\categorical_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var CategoricalTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalTickFormatter, _super);\r\n        function CategoricalTickFormatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CategoricalTickFormatter.prototype.doFormat = function (ticks, _opts) {\r\n            return array_1.copy(ticks);\r\n        };\r\n        return CategoricalTickFormatter;\r\n    }(tick_formatter_1.TickFormatter));\r\n    exports.CategoricalTickFormatter = CategoricalTickFormatter;\r\n    CategoricalTickFormatter.__name__ = \"CategoricalTickFormatter\";\r\n}\r\n","/* models\\axes\\continuous_axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var axis_1 = require(292) /* ./axis */;\r\n    var ContinuousAxis = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ContinuousAxis, _super);\r\n        // TODO: __view_type__: ContinuousAxisView\r\n        function ContinuousAxis(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return ContinuousAxis;\r\n    }(axis_1.Axis));\r\n    exports.ContinuousAxis = ContinuousAxis;\r\n    ContinuousAxis.__name__ = \"ContinuousAxis\";\r\n}\r\n","/* models\\axes\\datetime_axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var linear_axis_1 = require(299) /* ./linear_axis */;\r\n    var datetime_tick_formatter_1 = require(300) /* ../formatters/datetime_tick_formatter */;\r\n    var datetime_ticker_1 = require(305) /* ../tickers/datetime_ticker */;\r\n    var DatetimeAxisView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DatetimeAxisView, _super);\r\n        function DatetimeAxisView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return DatetimeAxisView;\r\n    }(linear_axis_1.LinearAxisView));\r\n    exports.DatetimeAxisView = DatetimeAxisView;\r\n    DatetimeAxisView.__name__ = \"DatetimeAxisView\";\r\n    var DatetimeAxis = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DatetimeAxis, _super);\r\n        function DatetimeAxis(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        DatetimeAxis.init_DatetimeAxis = function () {\r\n            this.prototype.default_view = DatetimeAxisView;\r\n            this.override({\r\n                ticker: function () { return new datetime_ticker_1.DatetimeTicker(); },\r\n                formatter: function () { return new datetime_tick_formatter_1.DatetimeTickFormatter(); },\r\n            });\r\n        };\r\n        return DatetimeAxis;\r\n    }(linear_axis_1.LinearAxis));\r\n    exports.DatetimeAxis = DatetimeAxis;\r\n    DatetimeAxis.__name__ = \"DatetimeAxis\";\r\n    DatetimeAxis.init_DatetimeAxis();\r\n}\r\n","/* models\\axes\\linear_axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var axis_1 = require(292) /* ./axis */;\r\n    var continuous_axis_1 = require(297) /* ./continuous_axis */;\r\n    var basic_tick_formatter_1 = require(245) /* ../formatters/basic_tick_formatter */;\r\n    var basic_ticker_1 = require(241) /* ../tickers/basic_ticker */;\r\n    var LinearAxisView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LinearAxisView, _super);\r\n        function LinearAxisView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return LinearAxisView;\r\n    }(axis_1.AxisView));\r\n    exports.LinearAxisView = LinearAxisView;\r\n    LinearAxisView.__name__ = \"LinearAxisView\";\r\n    var LinearAxis = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LinearAxis, _super);\r\n        function LinearAxis(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LinearAxis.init_LinearAxis = function () {\r\n            this.prototype.default_view = LinearAxisView;\r\n            this.override({\r\n                ticker: function () { return new basic_ticker_1.BasicTicker(); },\r\n                formatter: function () { return new basic_tick_formatter_1.BasicTickFormatter(); },\r\n            });\r\n        };\r\n        return LinearAxis;\r\n    }(continuous_axis_1.ContinuousAxis));\r\n    exports.LinearAxis = LinearAxis;\r\n    LinearAxis.__name__ = \"LinearAxis\";\r\n    LinearAxis.init_LinearAxis();\r\n}\r\n","/* models\\formatters\\datetime_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var timezone_1 = tslib_1.__importDefault(require(301) /* timezone */);\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var templating_1 = require(302) /* ../../core/util/templating */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    function _us(t) {\r\n        // From double-precision unix (millisecond) timestamp get\r\n        // microsecond since last second. Precision seems to run\r\n        // out around the hundreds of nanoseconds scale, so rounding\r\n        // to the nearest microsecond should round to a nice\r\n        // microsecond / millisecond tick.\r\n        return Math.round(((t / 1000) % 1) * 1000000);\r\n    }\r\n    function _array(t) {\r\n        return timezone_1.default(t, \"%Y %m %d %H %M %S\").split(/\\s+/).map(function (e) { return parseInt(e, 10); });\r\n    }\r\n    function _strftime(t, format) {\r\n        if (types_1.isFunction(format)) {\r\n            return format(t);\r\n        }\r\n        else {\r\n            // Python's datetime library augments the microsecond directive %f, which is not\r\n            // supported by the javascript library timezone: http://bigeasy.github.io/timezone/.\r\n            // Use a regular expression to replace %f directive with microseconds.\r\n            // TODO: what should we do for negative microsecond strings?\r\n            var microsecond_replacement_string = templating_1.sprintf(\"$1%06d\", _us(t));\r\n            format = format.replace(/((^|[^%])(%%)*)%f/, microsecond_replacement_string);\r\n            if (format.indexOf(\"%\") == -1) {\r\n                // timezone seems to ignore any strings without any formatting directives,\r\n                // and just return the time argument back instead of the string argument.\r\n                // But we want the string argument, in case a user supplies a format string\r\n                // which doesn't contain a formatting directive or is only using %f.\r\n                return format;\r\n            }\r\n            return timezone_1.default(t, format);\r\n        }\r\n    }\r\n    // Labels of time units, from finest to coarsest.\r\n    var format_order = [\r\n        'microseconds', 'milliseconds', 'seconds', 'minsec', 'minutes', 'hourmin', 'hours', 'days', 'months', 'years',\r\n    ];\r\n    var DatetimeTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DatetimeTickFormatter, _super);\r\n        function DatetimeTickFormatter(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            // Whether or not to strip the leading zeros on tick labels.\r\n            _this.strip_leading_zeros = true;\r\n            return _this;\r\n        }\r\n        DatetimeTickFormatter.init_DatetimeTickFormatter = function () {\r\n            this.define({\r\n                microseconds: [p.Array, ['%fus']],\r\n                milliseconds: [p.Array, ['%3Nms', '%S.%3Ns']],\r\n                seconds: [p.Array, ['%Ss']],\r\n                minsec: [p.Array, [':%M:%S']],\r\n                minutes: [p.Array, [':%M', '%Mm']],\r\n                hourmin: [p.Array, ['%H:%M']],\r\n                hours: [p.Array, ['%Hh', '%H:%M']],\r\n                days: [p.Array, ['%m/%d', '%a%d']],\r\n                months: [p.Array, ['%m/%Y', '%b %Y']],\r\n                years: [p.Array, ['%Y']],\r\n            });\r\n        };\r\n        DatetimeTickFormatter.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            // TODO (bev) trigger update on format change\r\n            this._update_width_formats();\r\n        };\r\n        DatetimeTickFormatter.prototype._update_width_formats = function () {\r\n            var now = +timezone_1.default(new Date());\r\n            var _widths = function (fmt_strings) {\r\n                var sizes = fmt_strings.map(function (fmt_string) { return _strftime(now, fmt_string).length; });\r\n                var sorted = array_1.sort_by(array_1.zip(sizes, fmt_strings), function (_a) {\r\n                    var _b = tslib_1.__read(_a, 1), size = _b[0];\r\n                    return size;\r\n                });\r\n                return array_1.unzip(sorted);\r\n            };\r\n            this._width_formats = {\r\n                microseconds: _widths(this.microseconds),\r\n                milliseconds: _widths(this.milliseconds),\r\n                seconds: _widths(this.seconds),\r\n                minsec: _widths(this.minsec),\r\n                minutes: _widths(this.minutes),\r\n                hourmin: _widths(this.hourmin),\r\n                hours: _widths(this.hours),\r\n                days: _widths(this.days),\r\n                months: _widths(this.months),\r\n                years: _widths(this.years),\r\n            };\r\n        };\r\n        // FIXME There is some unfortunate flicker when panning/zooming near the\r\n        // span boundaries.\r\n        // FIXME Rounding is weird at the 20-us scale and below.\r\n        DatetimeTickFormatter.prototype._get_resolution_str = function (resolution_secs, span_secs) {\r\n            // Our resolution boundaries should not be round numbers, because we want\r\n            // them to fall between the possible tick intervals (which *are* round\r\n            // numbers, as we've worked hard to ensure).  Consequently, we adjust the\r\n            // resolution upwards a small amount (less than any possible step in\r\n            // scales) to make the effective boundaries slightly lower.\r\n            var adjusted_secs = resolution_secs * 1.1;\r\n            switch (false) {\r\n                case !(adjusted_secs < 1e-3): return \"microseconds\";\r\n                case !(adjusted_secs < 1.0): return \"milliseconds\";\r\n                case !(adjusted_secs < 60): return span_secs >= 60 ? \"minsec\" : \"seconds\";\r\n                case !(adjusted_secs < 3600): return span_secs >= 3600 ? \"hourmin\" : \"minutes\";\r\n                case !(adjusted_secs < (24 * 3600)): return \"hours\";\r\n                case !(adjusted_secs < (31 * 24 * 3600)): return \"days\";\r\n                case !(adjusted_secs < (365 * 24 * 3600)): return \"months\";\r\n                default: return \"years\";\r\n            }\r\n        };\r\n        DatetimeTickFormatter.prototype.doFormat = function (ticks, _opts) {\r\n            var e_1, _a, e_2, _b;\r\n            // In order to pick the right set of labels, we need to determine\r\n            // the resolution of the ticks.  We can do this using a ticker if\r\n            // it's provided, or by computing the resolution from the actual\r\n            // ticks we've been given.\r\n            if (ticks.length == 0)\r\n                return [];\r\n            var span = Math.abs(ticks[ticks.length - 1] - ticks[0]) / 1000.0;\r\n            var r = span / (ticks.length - 1);\r\n            var resol = this._get_resolution_str(r, span);\r\n            var _c = tslib_1.__read(this._width_formats[resol], 2), _d = tslib_1.__read(_c[1], 1), format = _d[0];\r\n            // Apply the format to the tick values\r\n            var labels = [];\r\n            var resol_ndx = format_order.indexOf(resol);\r\n            // This dictionary maps the name of a time resolution (in @format_order)\r\n            // to its index in a time.localtime() timetuple.  The default is to map\r\n            // everything to index 0, which is year.  This is not ideal; it might cause\r\n            // a problem with the tick at midnight, january 1st, 0 a.d. being incorrectly\r\n            // promoted at certain tick resolutions.\r\n            var time_tuple_ndx_for_resol = {};\r\n            try {\r\n                for (var format_order_1 = tslib_1.__values(format_order), format_order_1_1 = format_order_1.next(); !format_order_1_1.done; format_order_1_1 = format_order_1.next()) {\r\n                    var fmt = format_order_1_1.value;\r\n                    time_tuple_ndx_for_resol[fmt] = 0;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (format_order_1_1 && !format_order_1_1.done && (_a = format_order_1.return))\r\n                        _a.call(format_order_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            time_tuple_ndx_for_resol.seconds = 5;\r\n            time_tuple_ndx_for_resol.minsec = 4;\r\n            time_tuple_ndx_for_resol.minutes = 4;\r\n            time_tuple_ndx_for_resol.hourmin = 3;\r\n            time_tuple_ndx_for_resol.hours = 3;\r\n            try {\r\n                // As we format each tick, check to see if we are at a boundary of the\r\n                // next higher unit of time.  If so, replace the current format with one\r\n                // from that resolution.  This is not the best heuristic in the world,\r\n                // but it works!  There is some trickiness here due to having to deal\r\n                // with hybrid formats in a reasonable manner.\r\n                for (var ticks_1 = tslib_1.__values(ticks), ticks_1_1 = ticks_1.next(); !ticks_1_1.done; ticks_1_1 = ticks_1.next()) {\r\n                    var t = ticks_1_1.value;\r\n                    var s = void 0, tm = void 0;\r\n                    try {\r\n                        tm = _array(t);\r\n                        s = _strftime(t, format);\r\n                    }\r\n                    catch (error) {\r\n                        logging_1.logger.warn(\"unable to format tick for timestamp value \" + t);\r\n                        logging_1.logger.warn(\" - \" + error);\r\n                        labels.push(\"ERR\");\r\n                        continue;\r\n                    }\r\n                    var hybrid_handled = false;\r\n                    var next_ndx = resol_ndx;\r\n                    // The way to check that we are at the boundary of the next unit of\r\n                    // time is by checking that we have 0 units of the resolution, i.e.\r\n                    // we are at zero minutes, so display hours, or we are at zero seconds,\r\n                    // so display minutes (and if that is zero as well, then display hours).\r\n                    while (tm[time_tuple_ndx_for_resol[format_order[next_ndx]]] == 0) {\r\n                        var next_format = void 0;\r\n                        next_ndx += 1;\r\n                        if (next_ndx == format_order.length)\r\n                            break;\r\n                        if ((resol == \"minsec\" || resol == \"hourmin\") && !hybrid_handled) {\r\n                            if ((resol == \"minsec\" && tm[4] == 0 && tm[5] != 0) || (resol == \"hourmin\" && tm[3] == 0 && tm[4] != 0)) {\r\n                                next_format = this._width_formats[format_order[resol_ndx - 1]][1][0];\r\n                                s = _strftime(t, next_format);\r\n                                break;\r\n                            }\r\n                            else {\r\n                                hybrid_handled = true;\r\n                            }\r\n                        }\r\n                        next_format = this._width_formats[format_order[next_ndx]][1][0];\r\n                        s = _strftime(t, next_format);\r\n                    }\r\n                    // TODO: should expose this in api. %H, %d, etc use leading zeros and\r\n                    // users might prefer to see them lined up correctly.\r\n                    if (this.strip_leading_zeros) {\r\n                        var ss = s.replace(/^0+/g, \"\");\r\n                        if (ss != s && isNaN(parseInt(ss))) {\r\n                            // If the string can now be parsed as starting with an integer, then\r\n                            // leave all zeros stripped, otherwise start with a zero. Hence:\r\n                            // A label such as '000ms' should leave one zero.\r\n                            // A label such as '001ms' or '0-1ms' should not leave a leading zero.\r\n                            ss = \"0\" + ss;\r\n                        }\r\n                        labels.push(ss);\r\n                    }\r\n                    else\r\n                        labels.push(s);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (ticks_1_1 && !ticks_1_1.done && (_b = ticks_1.return))\r\n                        _b.call(ticks_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return labels;\r\n        };\r\n        return DatetimeTickFormatter;\r\n    }(tick_formatter_1.TickFormatter));\r\n    exports.DatetimeTickFormatter = DatetimeTickFormatter;\r\n    DatetimeTickFormatter.__name__ = \"DatetimeTickFormatter\";\r\n    DatetimeTickFormatter.init_DatetimeTickFormatter();\r\n}\r\n","/* timezone\\index.js */ function _(require, module, exports) {\r\n    !function (definition) {\r\n        if (typeof module == \"object\" && module.exports)\r\n            module.exports = definition();\r\n        else if (typeof define == \"function\")\r\n            define(definition);\r\n        else\r\n            this.tz = definition();\r\n    }(function () {\r\n        /*\r\n          function die () {\r\n            console.log.apply(console, __slice.call(arguments, 0));\r\n            return process.exit(1);\r\n          }\r\n        \r\n          function say () { return console.log.apply(console, __slice.call(arguments, 0)) }\r\n        */\r\n        function actualize(entry, rule, year) {\r\n            var actualized, date = rule.day[1];\r\n            do {\r\n                actualized = new Date(Date.UTC(year, rule.month, Math.abs(date++)));\r\n            } while (rule.day[0] < 7 && actualized.getUTCDay() != rule.day[0]);\r\n            actualized = {\r\n                clock: rule.clock,\r\n                sort: actualized.getTime(),\r\n                rule: rule,\r\n                save: rule.save * 6e4,\r\n                offset: entry.offset\r\n            };\r\n            actualized[actualized.clock] = actualized.sort + rule.time * 6e4;\r\n            if (actualized.posix) {\r\n                actualized.wallclock = actualized[actualized.clock] + (entry.offset + rule.saved);\r\n            }\r\n            else {\r\n                actualized.posix = actualized[actualized.clock] - (entry.offset + rule.saved);\r\n            }\r\n            return actualized;\r\n        }\r\n        function find(request, clock, time) {\r\n            var i, I, entry, found, zone = request[request.zone], actualized = [], abbrev, rules, j, year = new Date(time).getUTCFullYear(), off = 1;\r\n            for (i = 1, I = zone.length; i < I; i++)\r\n                if (zone[i][clock] <= time)\r\n                    break;\r\n            entry = zone[i];\r\n            if (entry.rules) {\r\n                rules = request[entry.rules];\r\n                for (j = year + 1; j >= year - off; --j)\r\n                    for (i = 0, I = rules.length; i < I; i++)\r\n                        if (rules[i].from <= j && j <= rules[i].to)\r\n                            actualized.push(actualize(entry, rules[i], j));\r\n                        else if (rules[i].to < j && off == 1)\r\n                            off = j - rules[i].to;\r\n                actualized.sort(function (a, b) { return a.sort - b.sort; });\r\n                for (i = 0, I = actualized.length; i < I; i++) {\r\n                    if (time >= actualized[i][clock] && actualized[i][actualized[i].clock] > entry[actualized[i].clock])\r\n                        found = actualized[i];\r\n                }\r\n            }\r\n            if (found) {\r\n                if (abbrev = /^(.*)\\/(.*)$/.exec(entry.format)) {\r\n                    found.abbrev = abbrev[found.save ? 2 : 1];\r\n                }\r\n                else {\r\n                    found.abbrev = entry.format.replace(/%s/, found.rule.letter);\r\n                }\r\n            }\r\n            return found || entry;\r\n        }\r\n        function convertToWallclock(request, posix) {\r\n            if (request.zone == \"UTC\")\r\n                return posix;\r\n            request.entry = find(request, \"posix\", posix);\r\n            return posix + request.entry.offset + request.entry.save;\r\n        }\r\n        function convertToPOSIX(request, wallclock) {\r\n            if (request.zone == \"UTC\")\r\n                return wallclock;\r\n            var entry, diff;\r\n            request.entry = entry = find(request, \"wallclock\", wallclock);\r\n            diff = wallclock - entry.wallclock;\r\n            return 0 < diff && diff < entry.save ? null : wallclock - entry.offset - entry.save;\r\n        }\r\n        function adjust(request, posix, match) {\r\n            var increment = +(match[1] + 1) // conversion necessary for week day addition\r\n            , offset = match[2] * increment, index = UNITS.indexOf(match[3].toLowerCase()), date;\r\n            if (index > 9) {\r\n                posix += offset * TIME[index - 10];\r\n            }\r\n            else {\r\n                date = new Date(convertToWallclock(request, posix));\r\n                if (index < 7) {\r\n                    while (offset) {\r\n                        date.setUTCDate(date.getUTCDate() + increment);\r\n                        if (date.getUTCDay() == index)\r\n                            offset -= increment;\r\n                    }\r\n                }\r\n                else if (index == 7) {\r\n                    date.setUTCFullYear(date.getUTCFullYear() + offset);\r\n                }\r\n                else if (index == 8) {\r\n                    date.setUTCMonth(date.getUTCMonth() + offset);\r\n                }\r\n                else {\r\n                    date.setUTCDate(date.getUTCDate() + offset);\r\n                }\r\n                if ((posix = convertToPOSIX(request, date.getTime())) == null) {\r\n                    posix = convertToPOSIX(request, date.getTime() + 864e5 * increment) - 864e5 * increment;\r\n                }\r\n            }\r\n            return posix;\r\n        }\r\n        function convert(vargs) {\r\n            if (!vargs.length)\r\n                return \"1.0.23\";\r\n            var request = Object.create(this), adjustments = [], i, I, $, argument, date;\r\n            for (i = 0; i < vargs.length; i++) { // leave the for loop alone, it works.\r\n                argument = vargs[i];\r\n                // https://twitter.com/bigeasy/status/215112186572439552\r\n                if (Array.isArray(argument)) {\r\n                    if (!i && !isNaN(argument[1])) {\r\n                        date = argument;\r\n                    }\r\n                    else {\r\n                        argument.splice.apply(vargs, [i--, 1].concat(argument));\r\n                    }\r\n                }\r\n                else if (isNaN(argument)) {\r\n                    $ = typeof argument;\r\n                    if ($ == \"string\") {\r\n                        if (~argument.indexOf(\"%\")) {\r\n                            request.format = argument;\r\n                        }\r\n                        else if (!i && argument == \"*\") {\r\n                            date = argument;\r\n                        }\r\n                        else if (!i && ($ = /^(\\d{4})-(\\d{2})-(\\d{2})(?:[T\\s](\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d+))?)?(Z|(([+-])(\\d{2}(:\\d{2}){0,2})))?)?$/.exec(argument))) {\r\n                            date = [];\r\n                            date.push.apply(date, $.slice(1, 8));\r\n                            if ($[9]) {\r\n                                date.push($[10] + 1);\r\n                                date.push.apply(date, $[11].split(/:/));\r\n                            }\r\n                            else if ($[8]) {\r\n                                date.push(1);\r\n                            }\r\n                        }\r\n                        else if (/^\\w{2,3}_\\w{2}$/.test(argument)) {\r\n                            request.locale = argument;\r\n                        }\r\n                        else if ($ = UNIT_RE.exec(argument)) {\r\n                            adjustments.push($);\r\n                        }\r\n                        else {\r\n                            request.zone = argument;\r\n                        }\r\n                    }\r\n                    else if ($ == \"function\") {\r\n                        if ($ = argument.call(request))\r\n                            return $;\r\n                    }\r\n                    else if (/^\\w{2,3}_\\w{2}$/.test(argument.name)) {\r\n                        request[argument.name] = argument;\r\n                    }\r\n                    else if (argument.zones) {\r\n                        for ($ in argument.zones)\r\n                            request[$] = argument.zones[$];\r\n                        for ($ in argument.rules)\r\n                            request[$] = argument.rules[$];\r\n                    }\r\n                }\r\n                else if (!i) {\r\n                    date = argument;\r\n                }\r\n            }\r\n            if (!request[request.locale])\r\n                delete request.locale;\r\n            if (!request[request.zone])\r\n                delete request.zone;\r\n            if (date != null) {\r\n                if (date == \"*\") {\r\n                    date = request.clock();\r\n                }\r\n                else if (Array.isArray(date)) {\r\n                    $ = [];\r\n                    I = !date[7];\r\n                    for (i = 0; i < 11; i++)\r\n                        $[i] = +(date[i] || 0); // conversion necessary for decrement\r\n                    --$[1]; // Grr..\r\n                    date = Date.UTC.apply(Date.UTC, $) + -$[7] * ($[8] * 36e5 + $[9] * 6e4 + $[10] * 1e3);\r\n                }\r\n                else {\r\n                    date = Math.floor(date);\r\n                }\r\n                if (!isNaN(date)) {\r\n                    if (I)\r\n                        date = convertToPOSIX(request, date);\r\n                    if (date == null)\r\n                        return date;\r\n                    for (i = 0, I = adjustments.length; i < I; i++) {\r\n                        date = adjust(request, date, adjustments[i]);\r\n                    }\r\n                    if (!request.format)\r\n                        return date;\r\n                    $ = new Date(convertToWallclock(request, date));\r\n                    return request.format.replace(/%([-0_^]?)(:{0,3})(\\d*)(.)/g, function (value, flag, colons, padding, specifier) {\r\n                        var f, fill = \"0\", pad;\r\n                        if (f = request[specifier]) {\r\n                            value = String(f.call(request, $, date, flag, colons.length));\r\n                            if ((flag || f.style) == \"_\")\r\n                                fill = \" \";\r\n                            pad = flag == \"-\" ? 0 : f.pad || 0;\r\n                            while (value.length < pad)\r\n                                value = fill + value;\r\n                            pad = flag == \"-\" ? 0 : padding || f.pad;\r\n                            while (value.length < pad)\r\n                                value = fill + value;\r\n                            if (specifier == \"N\" && pad < value.length)\r\n                                value = value.slice(0, pad);\r\n                            if (flag == \"^\")\r\n                                value = value.toUpperCase();\r\n                        }\r\n                        return value;\r\n                    });\r\n                }\r\n            }\r\n            return function () { return request.convert(arguments); };\r\n        }\r\n        var context = { clock: function () { return +(new Date()); },\r\n            zone: \"UTC\",\r\n            entry: { abbrev: \"UTC\", offset: 0, save: 0 },\r\n            UTC: 1,\r\n            z: function (date, posix, flag, delimiters) {\r\n                var offset = this.entry.offset + this.entry.save, seconds = Math.abs(offset / 1000), parts = [], part = 3600, i, z;\r\n                for (i = 0; i < 3; i++) {\r\n                    parts.push((\"0\" + Math.floor(seconds / part)).slice(-2));\r\n                    seconds %= part;\r\n                    part /= 60;\r\n                }\r\n                if (flag == \"^\" && !offset)\r\n                    return \"Z\";\r\n                if (flag == \"^\")\r\n                    delimiters = 3;\r\n                if (delimiters == 3) {\r\n                    z = parts.join(\":\");\r\n                    z = z.replace(/:00$/, \"\");\r\n                    if (flag != \"^\")\r\n                        z = z.replace(/:00$/, \"\");\r\n                }\r\n                else if (delimiters) {\r\n                    z = parts.slice(0, delimiters + 1).join(\":\");\r\n                    if (flag == \"^\")\r\n                        z = z.replace(/:00$/, \"\");\r\n                }\r\n                else {\r\n                    z = parts.slice(0, 2).join(\"\");\r\n                }\r\n                z = (offset < 0 ? \"-\" : \"+\") + z;\r\n                z = z.replace(/([-+])(0)/, { \"_\": \" $1\", \"-\": \"$1\" }[flag] || \"$1$2\");\r\n                return z;\r\n            },\r\n            \"%\": function (date) { return \"%\"; },\r\n            n: function (date) { return \"\\n\"; },\r\n            t: function (date) { return \"\\t\"; },\r\n            U: function (date) { return weekOfYear(date, 0); },\r\n            W: function (date) { return weekOfYear(date, 1); },\r\n            V: function (date) { return isoWeek(date)[0]; },\r\n            G: function (date) { return isoWeek(date)[1]; },\r\n            g: function (date) { return isoWeek(date)[1] % 100; },\r\n            j: function (date) { return Math.floor((date.getTime() - Date.UTC(date.getUTCFullYear(), 0)) / 864e5) + 1; },\r\n            s: function (date) { return Math.floor(date.getTime() / 1000); },\r\n            C: function (date) { return Math.floor(date.getUTCFullYear() / 100); },\r\n            N: function (date) { return date.getTime() % 1000 * 1000000; },\r\n            m: function (date) { return date.getUTCMonth() + 1; },\r\n            Y: function (date) { return date.getUTCFullYear(); },\r\n            y: function (date) { return date.getUTCFullYear() % 100; },\r\n            H: function (date) { return date.getUTCHours(); },\r\n            M: function (date) { return date.getUTCMinutes(); },\r\n            S: function (date) { return date.getUTCSeconds(); },\r\n            e: function (date) { return date.getUTCDate(); },\r\n            d: function (date) { return date.getUTCDate(); },\r\n            u: function (date) { return date.getUTCDay() || 7; },\r\n            w: function (date) { return date.getUTCDay(); },\r\n            l: function (date) { return date.getUTCHours() % 12 || 12; },\r\n            I: function (date) { return date.getUTCHours() % 12 || 12; },\r\n            k: function (date) { return date.getUTCHours(); },\r\n            Z: function (date) { return this.entry.abbrev; },\r\n            a: function (date) { return this[this.locale].day.abbrev[date.getUTCDay()]; },\r\n            A: function (date) { return this[this.locale].day.full[date.getUTCDay()]; },\r\n            h: function (date) { return this[this.locale].month.abbrev[date.getUTCMonth()]; },\r\n            b: function (date) { return this[this.locale].month.abbrev[date.getUTCMonth()]; },\r\n            B: function (date) { return this[this.locale].month.full[date.getUTCMonth()]; },\r\n            P: function (date) { return this[this.locale].meridiem[Math.floor(date.getUTCHours() / 12)].toLowerCase(); },\r\n            p: function (date) { return this[this.locale].meridiem[Math.floor(date.getUTCHours() / 12)]; },\r\n            R: function (date, posix) { return this.convert([posix, \"%H:%M\"]); },\r\n            T: function (date, posix) { return this.convert([posix, \"%H:%M:%S\"]); },\r\n            D: function (date, posix) { return this.convert([posix, \"%m/%d/%y\"]); },\r\n            F: function (date, posix) { return this.convert([posix, \"%Y-%m-%d\"]); },\r\n            x: function (date, posix) { return this.convert([posix, this[this.locale].date]); },\r\n            r: function (date, posix) { return this.convert([posix, this[this.locale].time12 || '%I:%M:%S']); },\r\n            X: function (date, posix) { return this.convert([posix, this[this.locale].time24]); },\r\n            c: function (date, posix) { return this.convert([posix, this[this.locale].dateTime]); },\r\n            convert: convert,\r\n            locale: \"en_US\",\r\n            en_US: {\r\n                date: \"%m/%d/%Y\",\r\n                time24: \"%I:%M:%S %p\",\r\n                time12: \"%I:%M:%S %p\",\r\n                dateTime: \"%a %d %b %Y %I:%M:%S %p %Z\",\r\n                meridiem: [\"AM\", \"PM\"],\r\n                month: {\r\n                    abbrev: \"Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec\".split(\"|\"),\r\n                    full: \"January|February|March|April|May|June|July|August|September|October|November|December\".split(\"|\")\r\n                },\r\n                day: {\r\n                    abbrev: \"Sun|Mon|Tue|Wed|Thu|Fri|Sat\".split(\"|\"),\r\n                    full: \"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday\".split(\"|\")\r\n                }\r\n            }\r\n        };\r\n        var UNITS = \"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond\", UNIT_RE = new RegExp(\"^\\\\s*([+-])(\\\\d+)\\\\s+(\" + UNITS + \")s?\\\\s*$\", \"i\"), TIME = [36e5, 6e4, 1e3, 1];\r\n        UNITS = UNITS.toLowerCase().split(\"|\");\r\n        \"delmHMSUWVgCIky\".replace(/./g, function (e) { context[e].pad = 2; });\r\n        context.N.pad = 9;\r\n        context.j.pad = 3;\r\n        context.k.style = \"_\";\r\n        context.l.style = \"_\";\r\n        context.e.style = \"_\";\r\n        function weekOfYear(date, startOfWeek) {\r\n            var diff, nyd, weekStart;\r\n            nyd = new Date(Date.UTC(date.getUTCFullYear(), 0));\r\n            diff = Math.floor((date.getTime() - nyd.getTime()) / 864e5);\r\n            if (nyd.getUTCDay() == startOfWeek) {\r\n                weekStart = 0;\r\n            }\r\n            else {\r\n                weekStart = 7 - nyd.getUTCDay() + startOfWeek;\r\n                if (weekStart == 8) {\r\n                    weekStart = 1;\r\n                }\r\n            }\r\n            return diff >= weekStart ? Math.floor((diff - weekStart) / 7) + 1 : 0;\r\n        }\r\n        function isoWeek(date) {\r\n            var nyd, nyy, week;\r\n            nyy = date.getUTCFullYear();\r\n            nyd = new Date(Date.UTC(nyy, 0)).getUTCDay();\r\n            week = weekOfYear(date, 1) + (nyd > 1 && nyd <= 4 ? 1 : 0);\r\n            if (!week) {\r\n                nyy = date.getUTCFullYear() - 1;\r\n                nyd = new Date(Date.UTC(nyy, 0)).getUTCDay();\r\n                week = nyd == 4 || (nyd == 3 && new Date(nyy, 1, 29).getDate() == 29) ? 53 : 52;\r\n                return [week, date.getUTCFullYear() - 1];\r\n            }\r\n            else if (week == 53 && !(nyd == 4 || (nyd == 3 && new Date(nyy, 1, 29).getDate() == 29))) {\r\n                return [1, date.getUTCFullYear() + 1];\r\n            }\r\n            else {\r\n                return [week, date.getUTCFullYear()];\r\n            }\r\n        }\r\n        return function () { return context.convert(arguments); };\r\n    });\r\n}\r\n","/* core\\util\\templating.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var Numbro = tslib_1.__importStar(require(303) /* @bokeh/numbro */);\r\n    var sprintf_js_1 = require(304) /* sprintf-js */;\r\n    var timezone_1 = tslib_1.__importDefault(require(301) /* timezone */);\r\n    var string_1 = require(144) /* ./string */;\r\n    var types_1 = require(123) /* ./types */;\r\n    exports.DEFAULT_FORMATTERS = {\r\n        numeral: function (value, format, _special_vars) { return Numbro.format(value, format); },\r\n        datetime: function (value, format, _special_vars) { return timezone_1.default(value, format); },\r\n        printf: function (value, format, _special_vars) { return sprintf(format, value); },\r\n    };\r\n    function sprintf(format) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return sprintf_js_1.sprintf.apply(void 0, tslib_1.__spread([format], args));\r\n    }\r\n    exports.sprintf = sprintf;\r\n    function basic_formatter(value, _format, _special_vars) {\r\n        if (types_1.isNumber(value)) {\r\n            var format = (function () {\r\n                switch (false) {\r\n                    case Math.floor(value) != value:\r\n                        return \"%d\";\r\n                    case !(Math.abs(value) > 0.1) || !(Math.abs(value) < 1000):\r\n                        return \"%0.3f\";\r\n                    default:\r\n                        return \"%0.3e\";\r\n                }\r\n            })();\r\n            return sprintf(format, value);\r\n        }\r\n        else\r\n            return \"\" + value; // get strings for categorical types\r\n    }\r\n    exports.basic_formatter = basic_formatter;\r\n    function get_formatter(raw_spec, format, formatters) {\r\n        // no format, use default built in formatter\r\n        if (format == null)\r\n            return basic_formatter;\r\n        // format spec in the formatters dict, use that\r\n        if (formatters != null && raw_spec in formatters) {\r\n            var formatter_1 = formatters[raw_spec];\r\n            if (types_1.isString(formatter_1)) {\r\n                if (formatter_1 in exports.DEFAULT_FORMATTERS)\r\n                    return exports.DEFAULT_FORMATTERS[formatter_1];\r\n                else\r\n                    throw new Error(\"Unknown tooltip field formatter type '\" + formatter_1 + \"'\");\r\n            }\r\n            return function (value, format, special_vars) {\r\n                return formatter_1.format(value, format, special_vars);\r\n            };\r\n        }\r\n        // otherwise use \"numeral\" as default\r\n        return exports.DEFAULT_FORMATTERS.numeral;\r\n    }\r\n    exports.get_formatter = get_formatter;\r\n    function _get_special_value(name, special_vars) {\r\n        if (name in special_vars)\r\n            return special_vars[name];\r\n        else\r\n            throw new Error(\"Unknown special variable '$\" + name + \"'\");\r\n    }\r\n    function _get_column_value(name, data_source, i) {\r\n        var column = data_source.get_column(name);\r\n        // missing column\r\n        if (column == null)\r\n            return null;\r\n        // typical (non-image) index\r\n        if (types_1.isNumber(i))\r\n            return column[i];\r\n        // image index\r\n        var data = column[i.index];\r\n        if (types_1.isTypedArray(data) || types_1.isArray(data)) {\r\n            // inspect array of arrays\r\n            if (types_1.isArray(data[0])) {\r\n                var row = data[i.dim2];\r\n                return row[i.dim1];\r\n            }\r\n            else\r\n                return data[i.flat_index]; // inspect flat array\r\n        }\r\n        else\r\n            return data; // inspect per-image scalar data\r\n    }\r\n    function get_value(raw_name, data_source, i, special_vars) {\r\n        if (raw_name[0] == \"$\") {\r\n            var name = raw_name.substring(1);\r\n            return _get_special_value(name, special_vars);\r\n        }\r\n        else {\r\n            var name = raw_name.substring(1).replace(/[{}]/g, \"\");\r\n            return _get_column_value(name, data_source, i);\r\n        }\r\n    }\r\n    exports.get_value = get_value;\r\n    function replace_placeholders(content, data_source, i, formatters, special_vars) {\r\n        if (special_vars === void 0) {\r\n            special_vars = {};\r\n        }\r\n        var str;\r\n        var has_html;\r\n        if (types_1.isString(content)) {\r\n            str = content;\r\n            has_html = false;\r\n        }\r\n        else {\r\n            str = content.html;\r\n            has_html = true;\r\n        }\r\n        // this handles the special case @$name, replacing it with an @var corresponding to special_vars.name\r\n        str = str.replace(/@\\$name/g, function (_match) { return \"@{\" + special_vars.name + \"}\"; });\r\n        //\r\n        // (?:\\$\\w+) - special vars: $x\r\n        // (?:@\\w+) - simple names: @foo\r\n        // (?:@{(?:[^{}]+)})) - full names: @{one two}\r\n        //\r\n        // (?:{([^{}]+)})? - (optional) format for all of the above: @foo{fmt}\r\n        //\r\n        str = str.replace(/((?:\\$\\w+)|(?:@\\w+)|(?:@{(?:[^{}]+)}))(?:{([^{}]+)})?/g, function (_match, spec, format) {\r\n            var value = get_value(spec, data_source, i, special_vars);\r\n            // missing value, return ???\r\n            if (value == null)\r\n                return \"\" + string_1.escape(\"???\");\r\n            // 'safe' format, return the value as-is\r\n            if (format == 'safe') {\r\n                has_html = true;\r\n                return \"\" + value;\r\n            }\r\n            // format and escape everything else\r\n            var formatter = get_formatter(spec, format, formatters);\r\n            return \"\" + string_1.escape(formatter(value, format, special_vars));\r\n        });\r\n        if (!has_html)\r\n            return str;\r\n        else {\r\n            var parser = new DOMParser();\r\n            var document = parser.parseFromString(str, \"text/html\");\r\n            return tslib_1.__spread(document.body.childNodes);\r\n        }\r\n    }\r\n    exports.replace_placeholders = replace_placeholders;\r\n}\r\n","/* @bokeh\\numbro\\numbro.js */ function _(require, module, exports) {\r\n    /*!\r\n     * numbro.js\r\n     * version : 1.6.2\r\n     * author : Fretagsplatsen AB\r\n     * license : MIT\r\n     * http://www.foretagsplatsen.se\r\n     */\r\n    /************************************\r\n        Constants\r\n    ************************************/\r\n    var numbro, VERSION = '1.6.2', \r\n    // internal storage for culture config files\r\n    cultures = {}, \r\n    // Todo: Remove in 2.0.0\r\n    languages = cultures, currentCulture = 'en-US', zeroFormat = null, defaultFormat = '0,0', defaultCurrencyFormat = '0$', \r\n    // check for nodeJS\r\n    hasModule = (typeof module !== 'undefined' && module.exports), \r\n    // default culture\r\n    enUS = {\r\n        delimiters: {\r\n            thousands: ',',\r\n            decimal: '.'\r\n        },\r\n        abbreviations: {\r\n            thousand: 'k',\r\n            million: 'm',\r\n            billion: 'b',\r\n            trillion: 't'\r\n        },\r\n        ordinal: function (number) {\r\n            var b = number % 10;\r\n            return (~~(number % 100 / 10) === 1) ? 'th' :\r\n                (b === 1) ? 'st' :\r\n                    (b === 2) ? 'nd' :\r\n                        (b === 3) ? 'rd' : 'th';\r\n        },\r\n        currency: {\r\n            symbol: '$',\r\n            position: 'prefix'\r\n        },\r\n        defaults: {\r\n            currencyFormat: ',0000 a'\r\n        },\r\n        formats: {\r\n            fourDigits: '0000 a',\r\n            fullWithTwoDecimals: '$ ,0.00',\r\n            fullWithTwoDecimalsNoCurrency: ',0.00'\r\n        }\r\n    };\r\n    /************************************\r\n        Constructors\r\n    ************************************/\r\n    // Numbro prototype object\r\n    function Numbro(number) {\r\n        this._value = number;\r\n    }\r\n    function zeroes(count) {\r\n        var i, ret = '';\r\n        for (i = 0; i < count; i++) {\r\n            ret += '0';\r\n        }\r\n        return ret;\r\n    }\r\n    /**\r\n     * Implementation of toFixed() for numbers with exponent > 21\r\n     *\r\n     *\r\n     */\r\n    function toFixedLarge(value, precision) {\r\n        var mantissa, beforeDec, afterDec, exponent, str;\r\n        str = value.toString();\r\n        mantissa = str.split('e')[0];\r\n        exponent = str.split('e')[1];\r\n        beforeDec = mantissa.split('.')[0];\r\n        afterDec = mantissa.split('.')[1] || '';\r\n        str = beforeDec + afterDec + zeroes(exponent - afterDec.length);\r\n        if (precision > 0) {\r\n            str += '.' + zeroes(precision);\r\n        }\r\n        return str;\r\n    }\r\n    /**\r\n     * Implementation of toFixed() that treats floats more like decimals\r\n     *\r\n     * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n     * problems for accounting- and finance-related software.\r\n     */\r\n    function toFixed(value, precision, roundingFunction, optionals) {\r\n        var power = Math.pow(10, precision), optionalsRegExp, output;\r\n        if (value.toFixed(0).search('e') > -1) {\r\n            // Above 1e21, toFixed returns scientific notation, which\r\n            // is useless and unexpected\r\n            output = toFixedLarge(value, precision);\r\n        }\r\n        else {\r\n            //roundingFunction = (roundingFunction !== undefined ? roundingFunction : Math.round);\r\n            // Multiply up by precision, round accurately, then divide and use native toFixed():\r\n            output = (roundingFunction(value * power) / power).toFixed(precision);\r\n        }\r\n        if (optionals) {\r\n            optionalsRegExp = new RegExp('0{1,' + optionals + '}$');\r\n            output = output.replace(optionalsRegExp, '');\r\n        }\r\n        return output;\r\n    }\r\n    /************************************\r\n        Formatting\r\n    ************************************/\r\n    // determine what type of formatting we need to do\r\n    function formatNumbro(value, format, roundingFunction) {\r\n        var output;\r\n        // TODO: do something with `language`\r\n        // figure out what kind of format we are dealing with\r\n        if (format.indexOf('$') > -1) { // currency!!!!!\r\n            output = formatCurrency(value, format, roundingFunction);\r\n        }\r\n        else if (format.indexOf('%') > -1) { // percentage\r\n            output = formatPercentage(value, format, roundingFunction);\r\n        }\r\n        else if (format.indexOf(':') > -1) { // time\r\n            output = formatTime(value);\r\n        }\r\n        else { // plain ol' numbers or bytes\r\n            output = formatNumber(value, format, roundingFunction);\r\n        }\r\n        // return string\r\n        return output;\r\n    }\r\n    function formatCurrency(value, originalFormat, roundingFunction) {\r\n        var format = originalFormat, symbolIndex = format.indexOf('$'), openParenIndex = format.indexOf('('), plusSignIndex = format.indexOf('+'), minusSignIndex = format.indexOf('-'), space = '', decimalSeparator = '', spliceIndex, output;\r\n        if (format.indexOf('$') === -1) {\r\n            // Use defaults instead of the format provided\r\n            if (cultures[currentCulture].currency.position === 'infix') {\r\n                decimalSeparator = cultures[currentCulture].currency.symbol;\r\n                if (cultures[currentCulture].currency.spaceSeparated) {\r\n                    decimalSeparator = ' ' + decimalSeparator + ' ';\r\n                }\r\n            }\r\n            else if (cultures[currentCulture].currency.spaceSeparated) {\r\n                space = ' ';\r\n            }\r\n        }\r\n        else {\r\n            // check for space before or after currency\r\n            if (format.indexOf(' $') > -1) {\r\n                space = ' ';\r\n                format = format.replace(' $', '');\r\n            }\r\n            else if (format.indexOf('$ ') > -1) {\r\n                space = ' ';\r\n                format = format.replace('$ ', '');\r\n            }\r\n            else {\r\n                format = format.replace('$', '');\r\n            }\r\n        }\r\n        // Format The Number\r\n        output = formatNumber(value, format, roundingFunction, decimalSeparator);\r\n        if (originalFormat.indexOf('$') === -1) {\r\n            // Use defaults instead of the format provided\r\n            switch (cultures[currentCulture].currency.position) {\r\n                case 'postfix':\r\n                    if (output.indexOf(')') > -1) {\r\n                        output = output.split('');\r\n                        output.splice(-1, 0, space + cultures[currentCulture].currency.symbol);\r\n                        output = output.join('');\r\n                    }\r\n                    else {\r\n                        output = output + space + cultures[currentCulture].currency.symbol;\r\n                    }\r\n                    break;\r\n                case 'infix':\r\n                    break;\r\n                case 'prefix':\r\n                    if (output.indexOf('(') > -1 || output.indexOf('-') > -1) {\r\n                        output = output.split('');\r\n                        spliceIndex = Math.max(openParenIndex, minusSignIndex) + 1;\r\n                        output.splice(spliceIndex, 0, cultures[currentCulture].currency.symbol + space);\r\n                        output = output.join('');\r\n                    }\r\n                    else {\r\n                        output = cultures[currentCulture].currency.symbol + space + output;\r\n                    }\r\n                    break;\r\n                default:\r\n                    throw Error('Currency position should be among [\"prefix\", \"infix\", \"postfix\"]');\r\n            }\r\n        }\r\n        else {\r\n            // position the symbol\r\n            if (symbolIndex <= 1) {\r\n                if (output.indexOf('(') > -1 || output.indexOf('+') > -1 || output.indexOf('-') > -1) {\r\n                    output = output.split('');\r\n                    spliceIndex = 1;\r\n                    if (symbolIndex < openParenIndex || symbolIndex < plusSignIndex || symbolIndex < minusSignIndex) {\r\n                        // the symbol appears before the \"(\", \"+\" or \"-\"\r\n                        spliceIndex = 0;\r\n                    }\r\n                    output.splice(spliceIndex, 0, cultures[currentCulture].currency.symbol + space);\r\n                    output = output.join('');\r\n                }\r\n                else {\r\n                    output = cultures[currentCulture].currency.symbol + space + output;\r\n                }\r\n            }\r\n            else {\r\n                if (output.indexOf(')') > -1) {\r\n                    output = output.split('');\r\n                    output.splice(-1, 0, space + cultures[currentCulture].currency.symbol);\r\n                    output = output.join('');\r\n                }\r\n                else {\r\n                    output = output + space + cultures[currentCulture].currency.symbol;\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    }\r\n    function formatPercentage(value, format, roundingFunction) {\r\n        var space = '', output;\r\n        value = value * 100;\r\n        // check for space before %\r\n        if (format.indexOf(' %') > -1) {\r\n            space = ' ';\r\n            format = format.replace(' %', '');\r\n        }\r\n        else {\r\n            format = format.replace('%', '');\r\n        }\r\n        output = formatNumber(value, format, roundingFunction);\r\n        if (output.indexOf(')') > -1) {\r\n            output = output.split('');\r\n            output.splice(-1, 0, space + '%');\r\n            output = output.join('');\r\n        }\r\n        else {\r\n            output = output + space + '%';\r\n        }\r\n        return output;\r\n    }\r\n    function formatTime(value) {\r\n        var hours = Math.floor(value / 60 / 60), minutes = Math.floor((value - (hours * 60 * 60)) / 60), seconds = Math.round(value - (hours * 60 * 60) - (minutes * 60));\r\n        return hours + ':' +\r\n            ((minutes < 10) ? '0' + minutes : minutes) + ':' +\r\n            ((seconds < 10) ? '0' + seconds : seconds);\r\n    }\r\n    function formatNumber(value, format, roundingFunction, sep) {\r\n        var negP = false, signed = false, optDec = false, abbr = '', i, abbrK = false, // force abbreviation to thousands\r\n        abbrM = false, // force abbreviation to millions\r\n        abbrB = false, // force abbreviation to billions\r\n        abbrT = false, // force abbreviation to trillions\r\n        abbrForce = false, // force abbreviation\r\n        bytes = '', ord = '', abs = Math.abs(value), binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'], decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'], min, max, power, totalLength, length, minimumPrecision, pow, w, intPrecision, precision, prefix, postfix, thousands, d = '', forcedNeg = false, neg = false, indexOpenP, size, indexMinus, paren = '', minlen;\r\n        // check if number is zero and a custom zero format has been set\r\n        if (value === 0 && zeroFormat !== null) {\r\n            return zeroFormat;\r\n        }\r\n        if (!isFinite(value)) {\r\n            return '' + value;\r\n        }\r\n        if (format.indexOf('{') === 0) {\r\n            var end = format.indexOf('}');\r\n            if (end === -1) {\r\n                throw Error('Format should also contain a \"}\"');\r\n            }\r\n            prefix = format.slice(1, end);\r\n            format = format.slice(end + 1);\r\n        }\r\n        else {\r\n            prefix = '';\r\n        }\r\n        if (format.indexOf('}') === format.length - 1) {\r\n            var start = format.indexOf('{');\r\n            if (start === -1) {\r\n                throw Error('Format should also contain a \"{\"');\r\n            }\r\n            postfix = format.slice(start + 1, -1);\r\n            format = format.slice(0, start + 1);\r\n        }\r\n        else {\r\n            postfix = '';\r\n        }\r\n        // check for min length\r\n        var info;\r\n        if (format.indexOf('.') === -1) {\r\n            info = format.match(/([0-9]+).*/);\r\n        }\r\n        else {\r\n            info = format.match(/([0-9]+)\\..*/);\r\n        }\r\n        minlen = info === null ? -1 : info[1].length;\r\n        // see if we should use parentheses for negative number or if we should prefix with a sign\r\n        // if both are present we default to parentheses\r\n        if (format.indexOf('-') !== -1) {\r\n            forcedNeg = true;\r\n        }\r\n        if (format.indexOf('(') > -1) {\r\n            negP = true;\r\n            format = format.slice(1, -1);\r\n        }\r\n        else if (format.indexOf('+') > -1) {\r\n            signed = true;\r\n            format = format.replace(/\\+/g, '');\r\n        }\r\n        // see if abbreviation is wanted\r\n        if (format.indexOf('a') > -1) {\r\n            intPrecision = format.split('.')[0].match(/[0-9]+/g) || ['0'];\r\n            intPrecision = parseInt(intPrecision[0], 10);\r\n            // check if abbreviation is specified\r\n            abbrK = format.indexOf('aK') >= 0;\r\n            abbrM = format.indexOf('aM') >= 0;\r\n            abbrB = format.indexOf('aB') >= 0;\r\n            abbrT = format.indexOf('aT') >= 0;\r\n            abbrForce = abbrK || abbrM || abbrB || abbrT;\r\n            // check for space before abbreviation\r\n            if (format.indexOf(' a') > -1) {\r\n                abbr = ' ';\r\n                format = format.replace(' a', '');\r\n            }\r\n            else {\r\n                format = format.replace('a', '');\r\n            }\r\n            totalLength = Math.floor(Math.log(abs) / Math.LN10) + 1;\r\n            minimumPrecision = totalLength % 3;\r\n            minimumPrecision = minimumPrecision === 0 ? 3 : minimumPrecision;\r\n            if (intPrecision && abs !== 0) {\r\n                length = Math.floor(Math.log(abs) / Math.LN10) + 1 - intPrecision;\r\n                pow = 3 * ~~((Math.min(intPrecision, totalLength) - minimumPrecision) / 3);\r\n                abs = abs / Math.pow(10, pow);\r\n                if (format.indexOf('.') === -1 && intPrecision > 3) {\r\n                    format += '[.]';\r\n                    size = length === 0 ? 0 : 3 * ~~(length / 3) - length;\r\n                    size = size < 0 ? size + 3 : size;\r\n                    for (i = 0; i < size; i++) {\r\n                        format += '0';\r\n                    }\r\n                }\r\n            }\r\n            if (Math.floor(Math.log(Math.abs(value)) / Math.LN10) + 1 !== intPrecision) {\r\n                if (abs >= Math.pow(10, 12) && !abbrForce || abbrT) {\r\n                    // trillion\r\n                    abbr = abbr + cultures[currentCulture].abbreviations.trillion;\r\n                    value = value / Math.pow(10, 12);\r\n                }\r\n                else if (abs < Math.pow(10, 12) && abs >= Math.pow(10, 9) && !abbrForce || abbrB) {\r\n                    // billion\r\n                    abbr = abbr + cultures[currentCulture].abbreviations.billion;\r\n                    value = value / Math.pow(10, 9);\r\n                }\r\n                else if (abs < Math.pow(10, 9) && abs >= Math.pow(10, 6) && !abbrForce || abbrM) {\r\n                    // million\r\n                    abbr = abbr + cultures[currentCulture].abbreviations.million;\r\n                    value = value / Math.pow(10, 6);\r\n                }\r\n                else if (abs < Math.pow(10, 6) && abs >= Math.pow(10, 3) && !abbrForce || abbrK) {\r\n                    // thousand\r\n                    abbr = abbr + cultures[currentCulture].abbreviations.thousand;\r\n                    value = value / Math.pow(10, 3);\r\n                }\r\n            }\r\n        }\r\n        // see if we are formatting binary bytes\r\n        if (format.indexOf('b') > -1) {\r\n            // check for space before\r\n            if (format.indexOf(' b') > -1) {\r\n                bytes = ' ';\r\n                format = format.replace(' b', '');\r\n            }\r\n            else {\r\n                format = format.replace('b', '');\r\n            }\r\n            for (power = 0; power <= binarySuffixes.length; power++) {\r\n                min = Math.pow(1024, power);\r\n                max = Math.pow(1024, power + 1);\r\n                if (value >= min && value < max) {\r\n                    bytes = bytes + binarySuffixes[power];\r\n                    if (min > 0) {\r\n                        value = value / min;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // see if we are formatting decimal bytes\r\n        if (format.indexOf('d') > -1) {\r\n            // check for space before\r\n            if (format.indexOf(' d') > -1) {\r\n                bytes = ' ';\r\n                format = format.replace(' d', '');\r\n            }\r\n            else {\r\n                format = format.replace('d', '');\r\n            }\r\n            for (power = 0; power <= decimalSuffixes.length; power++) {\r\n                min = Math.pow(1000, power);\r\n                max = Math.pow(1000, power + 1);\r\n                if (value >= min && value < max) {\r\n                    bytes = bytes + decimalSuffixes[power];\r\n                    if (min > 0) {\r\n                        value = value / min;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // see if ordinal is wanted\r\n        if (format.indexOf('o') > -1) {\r\n            // check for space before\r\n            if (format.indexOf(' o') > -1) {\r\n                ord = ' ';\r\n                format = format.replace(' o', '');\r\n            }\r\n            else {\r\n                format = format.replace('o', '');\r\n            }\r\n            if (cultures[currentCulture].ordinal) {\r\n                ord = ord + cultures[currentCulture].ordinal(value);\r\n            }\r\n        }\r\n        if (format.indexOf('[.]') > -1) {\r\n            optDec = true;\r\n            format = format.replace('[.]', '.');\r\n        }\r\n        w = value.toString().split('.')[0];\r\n        precision = format.split('.')[1];\r\n        thousands = format.indexOf(',');\r\n        if (precision) {\r\n            if (precision.indexOf('*') !== -1) {\r\n                d = toFixed(value, value.toString().split('.')[1].length, roundingFunction);\r\n            }\r\n            else {\r\n                if (precision.indexOf('[') > -1) {\r\n                    precision = precision.replace(']', '');\r\n                    precision = precision.split('[');\r\n                    d = toFixed(value, (precision[0].length + precision[1].length), roundingFunction, precision[1].length);\r\n                }\r\n                else {\r\n                    d = toFixed(value, precision.length, roundingFunction);\r\n                }\r\n            }\r\n            w = d.split('.')[0];\r\n            if (d.split('.')[1].length) {\r\n                var p = sep ? abbr + sep : cultures[currentCulture].delimiters.decimal;\r\n                d = p + d.split('.')[1];\r\n            }\r\n            else {\r\n                d = '';\r\n            }\r\n            if (optDec && Number(d.slice(1)) === 0) {\r\n                d = '';\r\n            }\r\n        }\r\n        else {\r\n            w = toFixed(value, null, roundingFunction);\r\n        }\r\n        // format number\r\n        if (w.indexOf('-') > -1) {\r\n            w = w.slice(1);\r\n            neg = true;\r\n        }\r\n        if (w.length < minlen) {\r\n            w = new Array(minlen - w.length + 1).join('0') + w;\r\n        }\r\n        if (thousands > -1) {\r\n            w = w.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1' +\r\n                cultures[currentCulture].delimiters.thousands);\r\n        }\r\n        if (format.indexOf('.') === 0) {\r\n            w = '';\r\n        }\r\n        indexOpenP = format.indexOf('(');\r\n        indexMinus = format.indexOf('-');\r\n        if (indexOpenP < indexMinus) {\r\n            paren = ((negP && neg) ? '(' : '') + (((forcedNeg && neg) || (!negP && neg)) ? '-' : '');\r\n        }\r\n        else {\r\n            paren = (((forcedNeg && neg) || (!negP && neg)) ? '-' : '') + ((negP && neg) ? '(' : '');\r\n        }\r\n        return prefix +\r\n            paren + ((!neg && signed && value !== 0) ? '+' : '') +\r\n            w + d +\r\n            ((ord) ? ord : '') +\r\n            ((abbr && !sep) ? abbr : '') +\r\n            ((bytes) ? bytes : '') +\r\n            ((negP && neg) ? ')' : '') +\r\n            postfix;\r\n    }\r\n    /************************************\r\n        Top Level Functions\r\n    ************************************/\r\n    numbro = function (input) {\r\n        if (numbro.isNumbro(input)) {\r\n            input = input.value();\r\n        }\r\n        else if (input === 0 || typeof input === 'undefined') {\r\n            input = 0;\r\n        }\r\n        else if (!Number(input)) {\r\n            input = numbro.fn.unformat(input);\r\n        }\r\n        return new Numbro(Number(input));\r\n    };\r\n    // version number\r\n    numbro.version = VERSION;\r\n    // compare numbro object\r\n    numbro.isNumbro = function (obj) {\r\n        return obj instanceof Numbro;\r\n    };\r\n    /**\r\n     * This function allow the user to set a new language with a fallback if\r\n     * the language does not exist. If no fallback language is provided,\r\n     * it fallbacks to english.\r\n     *\r\n     * @deprecated Since in version 1.6.0. It will be deleted in version 2.0\r\n     * `setCulture` should be used instead.\r\n     */\r\n    numbro.setLanguage = function (newLanguage, fallbackLanguage) {\r\n        console.warn('`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead');\r\n        var key = newLanguage, prefix = newLanguage.split('-')[0], matchingLanguage = null;\r\n        if (!languages[key]) {\r\n            Object.keys(languages).forEach(function (language) {\r\n                if (!matchingLanguage && language.split('-')[0] === prefix) {\r\n                    matchingLanguage = language;\r\n                }\r\n            });\r\n            key = matchingLanguage || fallbackLanguage || 'en-US';\r\n        }\r\n        chooseCulture(key);\r\n    };\r\n    /**\r\n     * This function allow the user to set a new culture with a fallback if\r\n     * the culture does not exist. If no fallback culture is provided,\r\n     * it fallbacks to \"en-US\".\r\n     */\r\n    numbro.setCulture = function (newCulture, fallbackCulture) {\r\n        var key = newCulture, suffix = newCulture.split('-')[1], matchingCulture = null;\r\n        if (!cultures[key]) {\r\n            if (suffix) {\r\n                Object.keys(cultures).forEach(function (language) {\r\n                    if (!matchingCulture && language.split('-')[1] === suffix) {\r\n                        matchingCulture = language;\r\n                    }\r\n                });\r\n            }\r\n            key = matchingCulture || fallbackCulture || 'en-US';\r\n        }\r\n        chooseCulture(key);\r\n    };\r\n    /**\r\n     * This function will load languages and then set the global language.  If\r\n     * no arguments are passed in, it will simply return the current global\r\n     * language key.\r\n     *\r\n     * @deprecated Since in version 1.6.0. It will be deleted in version 2.0\r\n     * `culture` should be used instead.\r\n     */\r\n    numbro.language = function (key, values) {\r\n        console.warn('`language` is deprecated since version 1.6.0. Use `culture` instead');\r\n        if (!key) {\r\n            return currentCulture;\r\n        }\r\n        if (key && !values) {\r\n            if (!languages[key]) {\r\n                throw new Error('Unknown language : ' + key);\r\n            }\r\n            chooseCulture(key);\r\n        }\r\n        if (values || !languages[key]) {\r\n            setCulture(key, values);\r\n        }\r\n        return numbro;\r\n    };\r\n    /**\r\n     * This function will load cultures and then set the global culture.  If\r\n     * no arguments are passed in, it will simply return the current global\r\n     * culture code.\r\n     */\r\n    numbro.culture = function (code, values) {\r\n        if (!code) {\r\n            return currentCulture;\r\n        }\r\n        if (code && !values) {\r\n            if (!cultures[code]) {\r\n                throw new Error('Unknown culture : ' + code);\r\n            }\r\n            chooseCulture(code);\r\n        }\r\n        if (values || !cultures[code]) {\r\n            setCulture(code, values);\r\n        }\r\n        return numbro;\r\n    };\r\n    /**\r\n     * This function provides access to the loaded language data.  If\r\n     * no arguments are passed in, it will simply return the current\r\n     * global language object.\r\n     *\r\n     * @deprecated Since in version 1.6.0. It will be deleted in version 2.0\r\n     * `culture` should be used instead.\r\n     */\r\n    numbro.languageData = function (key) {\r\n        console.warn('`languageData` is deprecated since version 1.6.0. Use `cultureData` instead');\r\n        if (!key) {\r\n            return languages[currentCulture];\r\n        }\r\n        if (!languages[key]) {\r\n            throw new Error('Unknown language : ' + key);\r\n        }\r\n        return languages[key];\r\n    };\r\n    /**\r\n     * This function provides access to the loaded culture data.  If\r\n     * no arguments are passed in, it will simply return the current\r\n     * global culture object.\r\n     */\r\n    numbro.cultureData = function (code) {\r\n        if (!code) {\r\n            return cultures[currentCulture];\r\n        }\r\n        if (!cultures[code]) {\r\n            throw new Error('Unknown culture : ' + code);\r\n        }\r\n        return cultures[code];\r\n    };\r\n    numbro.culture('en-US', enUS);\r\n    /**\r\n     * @deprecated Since in version 1.6.0. It will be deleted in version 2.0\r\n     * `cultures` should be used instead.\r\n     */\r\n    numbro.languages = function () {\r\n        console.warn('`languages` is deprecated since version 1.6.0. Use `cultures` instead');\r\n        return languages;\r\n    };\r\n    numbro.cultures = function () {\r\n        return cultures;\r\n    };\r\n    numbro.zeroFormat = function (format) {\r\n        zeroFormat = typeof (format) === 'string' ? format : null;\r\n    };\r\n    numbro.defaultFormat = function (format) {\r\n        defaultFormat = typeof (format) === 'string' ? format : '0.0';\r\n    };\r\n    numbro.defaultCurrencyFormat = function (format) {\r\n        defaultCurrencyFormat = typeof (format) === 'string' ? format : '0$';\r\n    };\r\n    numbro.validate = function (val, culture) {\r\n        var _decimalSep, _thousandSep, _currSymbol, _valArray, _abbrObj, _thousandRegEx, cultureData, temp;\r\n        //coerce val to string\r\n        if (typeof val !== 'string') {\r\n            val += '';\r\n            if (console.warn) {\r\n                console.warn('Numbro.js: Value is not string. It has been co-erced to: ', val);\r\n            }\r\n        }\r\n        //trim whitespaces from either sides\r\n        val = val.trim();\r\n        //if val is just digits return true\r\n        if (!!val.match(/^\\d+$/)) {\r\n            return true;\r\n        }\r\n        //if val is empty return false\r\n        if (val === '') {\r\n            return false;\r\n        }\r\n        //get the decimal and thousands separator from numbro.cultureData\r\n        try {\r\n            //check if the culture is understood by numbro. if not, default it to current culture\r\n            cultureData = numbro.cultureData(culture);\r\n        }\r\n        catch (e) {\r\n            cultureData = numbro.cultureData(numbro.culture());\r\n        }\r\n        //setup the delimiters and currency symbol based on culture\r\n        _currSymbol = cultureData.currency.symbol;\r\n        _abbrObj = cultureData.abbreviations;\r\n        _decimalSep = cultureData.delimiters.decimal;\r\n        if (cultureData.delimiters.thousands === '.') {\r\n            _thousandSep = '\\\\.';\r\n        }\r\n        else {\r\n            _thousandSep = cultureData.delimiters.thousands;\r\n        }\r\n        // validating currency symbol\r\n        temp = val.match(/^[^\\d]+/);\r\n        if (temp !== null) {\r\n            val = val.substr(1);\r\n            if (temp[0] !== _currSymbol) {\r\n                return false;\r\n            }\r\n        }\r\n        //validating abbreviation symbol\r\n        temp = val.match(/[^\\d]+$/);\r\n        if (temp !== null) {\r\n            val = val.slice(0, -1);\r\n            if (temp[0] !== _abbrObj.thousand && temp[0] !== _abbrObj.million &&\r\n                temp[0] !== _abbrObj.billion && temp[0] !== _abbrObj.trillion) {\r\n                return false;\r\n            }\r\n        }\r\n        _thousandRegEx = new RegExp(_thousandSep + '{2}');\r\n        if (!val.match(/[^\\d.,]/g)) {\r\n            _valArray = val.split(_decimalSep);\r\n            if (_valArray.length > 2) {\r\n                return false;\r\n            }\r\n            else {\r\n                if (_valArray.length < 2) {\r\n                    return (!!_valArray[0].match(/^\\d+.*\\d$/) && !_valArray[0].match(_thousandRegEx));\r\n                }\r\n                else {\r\n                    if (_valArray[0].length === 1) {\r\n                        return (!!_valArray[0].match(/^\\d+$/) &&\r\n                            !_valArray[0].match(_thousandRegEx) &&\r\n                            !!_valArray[1].match(/^\\d+$/));\r\n                    }\r\n                    else {\r\n                        return (!!_valArray[0].match(/^\\d+.*\\d$/) &&\r\n                            !_valArray[0].match(_thousandRegEx) &&\r\n                            !!_valArray[1].match(/^\\d+$/));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /************************************\r\n        Helpers\r\n    ************************************/\r\n    function setCulture(code, values) {\r\n        cultures[code] = values;\r\n    }\r\n    function chooseCulture(code) {\r\n        currentCulture = code;\r\n        var defaults = cultures[code].defaults;\r\n        if (defaults && defaults.format) {\r\n            numbro.defaultFormat(defaults.format);\r\n        }\r\n        if (defaults && defaults.currencyFormat) {\r\n            numbro.defaultCurrencyFormat(defaults.currencyFormat);\r\n        }\r\n    }\r\n    function format(input, formatString, language, roundingFunction) {\r\n        if (language != null && language !== numbro.culture()) {\r\n            numbro.setCulture(language);\r\n        }\r\n        return formatNumbro(Number(input), formatString != null ? formatString : defaultFormat, roundingFunction == null ? Math.round : roundingFunction);\r\n    }\r\n    module.exports = { \"format\": format };\r\n}\r\n","/* sprintf-js\\src\\sprintf.js */ function _(require, module, exports) {\r\n    /* global window, exports, define */\r\n    !function () {\r\n        'use strict';\r\n        var re = {\r\n            not_string: /[^s]/,\r\n            not_bool: /[^t]/,\r\n            not_type: /[^T]/,\r\n            not_primitive: /[^v]/,\r\n            number: /[diefg]/,\r\n            numeric_arg: /[bcdiefguxX]/,\r\n            json: /[j]/,\r\n            not_json: /[^j]/,\r\n            text: /^[^\\x25]+/,\r\n            modulo: /^\\x25{2}/,\r\n            placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,\r\n            key: /^([a-z_][a-z_\\d]*)/i,\r\n            key_access: /^\\.([a-z_][a-z_\\d]*)/i,\r\n            index_access: /^\\[(\\d+)\\]/,\r\n            sign: /^[+-]/\r\n        };\r\n        function sprintf(key) {\r\n            // `arguments` is not an array, but should be fine for this call\r\n            return sprintf_format(sprintf_parse(key), arguments);\r\n        }\r\n        function vsprintf(fmt, argv) {\r\n            return sprintf.apply(null, [fmt].concat(argv || []));\r\n        }\r\n        function sprintf_format(parse_tree, argv) {\r\n            var cursor = 1, tree_length = parse_tree.length, arg, output = '', i, k, ph, pad, pad_character, pad_length, is_positive, sign;\r\n            for (i = 0; i < tree_length; i++) {\r\n                if (typeof parse_tree[i] === 'string') {\r\n                    output += parse_tree[i];\r\n                }\r\n                else if (typeof parse_tree[i] === 'object') {\r\n                    ph = parse_tree[i]; // convenience purposes only\r\n                    if (ph.keys) { // keyword argument\r\n                        arg = argv[cursor];\r\n                        for (k = 0; k < ph.keys.length; k++) {\r\n                            if (arg == undefined) {\r\n                                throw new Error(sprintf('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"', ph.keys[k], ph.keys[k - 1]));\r\n                            }\r\n                            arg = arg[ph.keys[k]];\r\n                        }\r\n                    }\r\n                    else if (ph.param_no) { // positional argument (explicit)\r\n                        arg = argv[ph.param_no];\r\n                    }\r\n                    else { // positional argument (implicit)\r\n                        arg = argv[cursor++];\r\n                    }\r\n                    if (re.not_type.test(ph.type) && re.not_primitive.test(ph.type) && arg instanceof Function) {\r\n                        arg = arg();\r\n                    }\r\n                    if (re.numeric_arg.test(ph.type) && (typeof arg !== 'number' && isNaN(arg))) {\r\n                        throw new TypeError(sprintf('[sprintf] expecting number but found %T', arg));\r\n                    }\r\n                    if (re.number.test(ph.type)) {\r\n                        is_positive = arg >= 0;\r\n                    }\r\n                    switch (ph.type) {\r\n                        case 'b':\r\n                            arg = parseInt(arg, 10).toString(2);\r\n                            break;\r\n                        case 'c':\r\n                            arg = String.fromCharCode(parseInt(arg, 10));\r\n                            break;\r\n                        case 'd':\r\n                        case 'i':\r\n                            arg = parseInt(arg, 10);\r\n                            break;\r\n                        case 'j':\r\n                            arg = JSON.stringify(arg, null, ph.width ? parseInt(ph.width) : 0);\r\n                            break;\r\n                        case 'e':\r\n                            arg = ph.precision ? parseFloat(arg).toExponential(ph.precision) : parseFloat(arg).toExponential();\r\n                            break;\r\n                        case 'f':\r\n                            arg = ph.precision ? parseFloat(arg).toFixed(ph.precision) : parseFloat(arg);\r\n                            break;\r\n                        case 'g':\r\n                            arg = ph.precision ? String(Number(arg.toPrecision(ph.precision))) : parseFloat(arg);\r\n                            break;\r\n                        case 'o':\r\n                            arg = (parseInt(arg, 10) >>> 0).toString(8);\r\n                            break;\r\n                        case 's':\r\n                            arg = String(arg);\r\n                            arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n                            break;\r\n                        case 't':\r\n                            arg = String(!!arg);\r\n                            arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n                            break;\r\n                        case 'T':\r\n                            arg = Object.prototype.toString.call(arg).slice(8, -1).toLowerCase();\r\n                            arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n                            break;\r\n                        case 'u':\r\n                            arg = parseInt(arg, 10) >>> 0;\r\n                            break;\r\n                        case 'v':\r\n                            arg = arg.valueOf();\r\n                            arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n                            break;\r\n                        case 'x':\r\n                            arg = (parseInt(arg, 10) >>> 0).toString(16);\r\n                            break;\r\n                        case 'X':\r\n                            arg = (parseInt(arg, 10) >>> 0).toString(16).toUpperCase();\r\n                            break;\r\n                    }\r\n                    if (re.json.test(ph.type)) {\r\n                        output += arg;\r\n                    }\r\n                    else {\r\n                        if (re.number.test(ph.type) && (!is_positive || ph.sign)) {\r\n                            sign = is_positive ? '+' : '-';\r\n                            arg = arg.toString().replace(re.sign, '');\r\n                        }\r\n                        else {\r\n                            sign = '';\r\n                        }\r\n                        pad_character = ph.pad_char ? ph.pad_char === '0' ? '0' : ph.pad_char.charAt(1) : ' ';\r\n                        pad_length = ph.width - (sign + arg).length;\r\n                        pad = ph.width ? (pad_length > 0 ? pad_character.repeat(pad_length) : '') : '';\r\n                        output += ph.align ? sign + arg + pad : (pad_character === '0' ? sign + pad + arg : pad + sign + arg);\r\n                    }\r\n                }\r\n            }\r\n            return output;\r\n        }\r\n        var sprintf_cache = Object.create(null);\r\n        function sprintf_parse(fmt) {\r\n            if (sprintf_cache[fmt]) {\r\n                return sprintf_cache[fmt];\r\n            }\r\n            var _fmt = fmt, match, parse_tree = [], arg_names = 0;\r\n            while (_fmt) {\r\n                if ((match = re.text.exec(_fmt)) !== null) {\r\n                    parse_tree.push(match[0]);\r\n                }\r\n                else if ((match = re.modulo.exec(_fmt)) !== null) {\r\n                    parse_tree.push('%');\r\n                }\r\n                else if ((match = re.placeholder.exec(_fmt)) !== null) {\r\n                    if (match[2]) {\r\n                        arg_names |= 1;\r\n                        var field_list = [], replacement_field = match[2], field_match = [];\r\n                        if ((field_match = re.key.exec(replacement_field)) !== null) {\r\n                            field_list.push(field_match[1]);\r\n                            while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                                if ((field_match = re.key_access.exec(replacement_field)) !== null) {\r\n                                    field_list.push(field_match[1]);\r\n                                }\r\n                                else if ((field_match = re.index_access.exec(replacement_field)) !== null) {\r\n                                    field_list.push(field_match[1]);\r\n                                }\r\n                                else {\r\n                                    throw new SyntaxError('[sprintf] failed to parse named argument key');\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            throw new SyntaxError('[sprintf] failed to parse named argument key');\r\n                        }\r\n                        match[2] = field_list;\r\n                    }\r\n                    else {\r\n                        arg_names |= 2;\r\n                    }\r\n                    if (arg_names === 3) {\r\n                        throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');\r\n                    }\r\n                    parse_tree.push({\r\n                        placeholder: match[0],\r\n                        param_no: match[1],\r\n                        keys: match[2],\r\n                        sign: match[3],\r\n                        pad_char: match[4],\r\n                        align: match[5],\r\n                        width: match[6],\r\n                        precision: match[7],\r\n                        type: match[8]\r\n                    });\r\n                }\r\n                else {\r\n                    throw new SyntaxError('[sprintf] unexpected placeholder');\r\n                }\r\n                _fmt = _fmt.substring(match[0].length);\r\n            }\r\n            return sprintf_cache[fmt] = parse_tree;\r\n        }\r\n        /**\r\n         * export to either browser or node.js\r\n         */\r\n        /* eslint-disable quote-props */\r\n        if (typeof exports !== 'undefined') {\r\n            exports['sprintf'] = sprintf;\r\n            exports['vsprintf'] = vsprintf;\r\n        }\r\n        if (typeof window !== 'undefined') {\r\n            window['sprintf'] = sprintf;\r\n            window['vsprintf'] = vsprintf;\r\n            if (typeof define === 'function' && define['amd']) {\r\n                define(function () {\r\n                    return {\r\n                        'sprintf': sprintf,\r\n                        'vsprintf': vsprintf\r\n                    };\r\n                });\r\n            }\r\n        }\r\n        /* eslint-enable quote-props */\r\n    }(); // eslint-disable-line\r\n}\r\n","/* models\\tickers\\datetime_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var adaptive_ticker_1 = require(242) /* ./adaptive_ticker */;\r\n    var composite_ticker_1 = require(306) /* ./composite_ticker */;\r\n    var days_ticker_1 = require(307) /* ./days_ticker */;\r\n    var months_ticker_1 = require(310) /* ./months_ticker */;\r\n    var years_ticker_1 = require(311) /* ./years_ticker */;\r\n    var util_1 = require(309) /* ./util */;\r\n    var DatetimeTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DatetimeTicker, _super);\r\n        function DatetimeTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        DatetimeTicker.init_DatetimeTicker = function () {\r\n            this.override({\r\n                num_minor_ticks: 0,\r\n                tickers: function () {\r\n                    return [\r\n                        // Sub-second.\r\n                        new adaptive_ticker_1.AdaptiveTicker({\r\n                            mantissas: [1, 2, 5],\r\n                            base: 10,\r\n                            min_interval: 0,\r\n                            max_interval: 500 * util_1.ONE_MILLI,\r\n                            num_minor_ticks: 0,\r\n                        }),\r\n                        // Seconds, minutes.\r\n                        new adaptive_ticker_1.AdaptiveTicker({\r\n                            mantissas: [1, 2, 5, 10, 15, 20, 30],\r\n                            base: 60,\r\n                            min_interval: util_1.ONE_SECOND,\r\n                            max_interval: 30 * util_1.ONE_MINUTE,\r\n                            num_minor_ticks: 0,\r\n                        }),\r\n                        // Hours.\r\n                        new adaptive_ticker_1.AdaptiveTicker({\r\n                            mantissas: [1, 2, 4, 6, 8, 12],\r\n                            base: 24.0,\r\n                            min_interval: util_1.ONE_HOUR,\r\n                            max_interval: 12 * util_1.ONE_HOUR,\r\n                            num_minor_ticks: 0,\r\n                        }),\r\n                        // Days.\r\n                        new days_ticker_1.DaysTicker({ days: array_1.range(1, 32) }),\r\n                        new days_ticker_1.DaysTicker({ days: array_1.range(1, 31, 3) }),\r\n                        new days_ticker_1.DaysTicker({ days: [1, 8, 15, 22] }),\r\n                        new days_ticker_1.DaysTicker({ days: [1, 15] }),\r\n                        // Months.\r\n                        new months_ticker_1.MonthsTicker({ months: array_1.range(0, 12, 1) }),\r\n                        new months_ticker_1.MonthsTicker({ months: array_1.range(0, 12, 2) }),\r\n                        new months_ticker_1.MonthsTicker({ months: array_1.range(0, 12, 4) }),\r\n                        new months_ticker_1.MonthsTicker({ months: array_1.range(0, 12, 6) }),\r\n                        // Years\r\n                        new years_ticker_1.YearsTicker({}),\r\n                    ];\r\n                },\r\n            });\r\n        };\r\n        return DatetimeTicker;\r\n    }(composite_ticker_1.CompositeTicker));\r\n    exports.DatetimeTicker = DatetimeTicker;\r\n    DatetimeTicker.__name__ = \"DatetimeTicker\";\r\n    DatetimeTicker.init_DatetimeTicker();\r\n}\r\n","/* models\\tickers\\composite_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_ticker_1 = require(243) /* ./continuous_ticker */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var CompositeTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CompositeTicker, _super);\r\n        function CompositeTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CompositeTicker.init_CompositeTicker = function () {\r\n            this.define({\r\n                tickers: [p.Array, []],\r\n            });\r\n        };\r\n        Object.defineProperty(CompositeTicker.prototype, \"min_intervals\", {\r\n            // The tickers should be in order of increasing interval size; specifically,\r\n            // if S comes before T, then it should be the case that\r\n            // S.get_max_interval() < T.get_min_interval().\r\n            // FIXME Enforce this automatically.\r\n            get: function () {\r\n                return this.tickers.map(function (ticker) { return ticker.get_min_interval(); });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CompositeTicker.prototype, \"max_intervals\", {\r\n            get: function () {\r\n                return this.tickers.map(function (ticker) { return ticker.get_max_interval(); });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CompositeTicker.prototype, \"min_interval\", {\r\n            get: function () {\r\n                return this.min_intervals[0];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CompositeTicker.prototype, \"max_interval\", {\r\n            get: function () {\r\n                return this.max_intervals[0];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CompositeTicker.prototype.get_best_ticker = function (data_low, data_high, desired_n_ticks) {\r\n            var data_range = data_high - data_low;\r\n            var ideal_interval = this.get_ideal_interval(data_low, data_high, desired_n_ticks);\r\n            var ticker_ndxs = [\r\n                array_1.sorted_index(this.min_intervals, ideal_interval) - 1,\r\n                array_1.sorted_index(this.max_intervals, ideal_interval),\r\n            ];\r\n            var intervals = [\r\n                this.min_intervals[ticker_ndxs[0]],\r\n                this.max_intervals[ticker_ndxs[1]],\r\n            ];\r\n            var errors = intervals.map(function (interval) {\r\n                return Math.abs(desired_n_ticks - (data_range / interval));\r\n            });\r\n            var best_ticker;\r\n            if (array_1.is_empty(errors.filter(function (e) { return !isNaN(e); }))) {\r\n                // this can happen if the data isn't loaded yet, we just default to the first scale\r\n                best_ticker = this.tickers[0];\r\n            }\r\n            else {\r\n                var best_index = array_1.argmin(errors);\r\n                var best_ticker_ndx = ticker_ndxs[best_index];\r\n                best_ticker = this.tickers[best_ticker_ndx];\r\n            }\r\n            return best_ticker;\r\n        };\r\n        CompositeTicker.prototype.get_interval = function (data_low, data_high, desired_n_ticks) {\r\n            var best_ticker = this.get_best_ticker(data_low, data_high, desired_n_ticks);\r\n            return best_ticker.get_interval(data_low, data_high, desired_n_ticks);\r\n        };\r\n        CompositeTicker.prototype.get_ticks_no_defaults = function (data_low, data_high, cross_loc, desired_n_ticks) {\r\n            var best_ticker = this.get_best_ticker(data_low, data_high, desired_n_ticks);\r\n            return best_ticker.get_ticks_no_defaults(data_low, data_high, cross_loc, desired_n_ticks);\r\n        };\r\n        return CompositeTicker;\r\n    }(continuous_ticker_1.ContinuousTicker));\r\n    exports.CompositeTicker = CompositeTicker;\r\n    CompositeTicker.__name__ = \"CompositeTicker\";\r\n    CompositeTicker.init_CompositeTicker();\r\n}\r\n","/* models\\tickers\\days_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var single_interval_ticker_1 = require(308) /* ./single_interval_ticker */;\r\n    var util_1 = require(309) /* ./util */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    // Given a start and end time in millis, returns the shortest array of\r\n    // consecutive months (as Dates) that surrounds both times.\r\n    function date_range_by_month(start_time, end_time) {\r\n        var start_date = util_1.last_month_no_later_than(new Date(start_time));\r\n        var end_date = util_1.last_month_no_later_than(new Date(end_time));\r\n        // XXX This is not a reliable technique in general, but it should be\r\n        // safe when the day of the month is 1.  (The problem case is this:\r\n        // Mar 31 -> Apr 31, which becomes May 1.)\r\n        end_date.setUTCMonth(end_date.getUTCMonth() + 1);\r\n        var dates = [];\r\n        var date = start_date;\r\n        while (true) {\r\n            dates.push(util_1.copy_date(date));\r\n            date.setUTCMonth(date.getUTCMonth() + 1);\r\n            if (date > end_date)\r\n                break;\r\n        }\r\n        return dates;\r\n    }\r\n    var DaysTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DaysTicker, _super);\r\n        function DaysTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        DaysTicker.init_DaysTicker = function () {\r\n            this.define({\r\n                days: [p.Array, []],\r\n            });\r\n            this.override({\r\n                num_minor_ticks: 0,\r\n            });\r\n        };\r\n        DaysTicker.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            var days = this.days;\r\n            if (days.length > 1)\r\n                this.interval = (days[1] - days[0]) * util_1.ONE_DAY;\r\n            else\r\n                this.interval = 31 * util_1.ONE_DAY;\r\n        };\r\n        DaysTicker.prototype.get_ticks_no_defaults = function (data_low, data_high, _cross_loc, _desired_n_ticks) {\r\n            var month_dates = date_range_by_month(data_low, data_high);\r\n            var days = this.days;\r\n            var days_of_month = function (month_date, interval) {\r\n                var e_1, _a;\r\n                var current_month = month_date.getUTCMonth();\r\n                var dates = [];\r\n                try {\r\n                    for (var days_1 = tslib_1.__values(days), days_1_1 = days_1.next(); !days_1_1.done; days_1_1 = days_1.next()) {\r\n                        var day = days_1_1.value;\r\n                        var day_date = util_1.copy_date(month_date);\r\n                        day_date.setUTCDate(day);\r\n                        // We can't use all of the values in this.days, because they may not\r\n                        // fall within the current month.  In fact, if, e.g., our month is 28 days\r\n                        // and we're marking every third day, we don't want day 28 to show up\r\n                        // because it'll be right next to the 1st of the next month.  So we\r\n                        // make sure we have a bit of room before we include a day.\r\n                        // TODO (bev) The above description does not exactly work because JS Date\r\n                        // is broken and will happily consider \"Feb 28 + 3*ONE_DAY\" to have month \"2\"\r\n                        var future_date = new Date(day_date.getTime() + (interval / 2));\r\n                        if (future_date.getUTCMonth() == current_month)\r\n                            dates.push(day_date);\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (days_1_1 && !days_1_1.done && (_a = days_1.return))\r\n                            _a.call(days_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n                return dates;\r\n            };\r\n            var interval = this.interval;\r\n            var day_dates = array_1.concat(month_dates.map(function (date) { return days_of_month(date, interval); }));\r\n            var all_ticks = day_dates.map(function (day_date) { return day_date.getTime(); });\r\n            var ticks_in_range = all_ticks.filter(function (tick) { return data_low <= tick && tick <= data_high; });\r\n            return {\r\n                major: ticks_in_range,\r\n                minor: [],\r\n            };\r\n        };\r\n        return DaysTicker;\r\n    }(single_interval_ticker_1.SingleIntervalTicker));\r\n    exports.DaysTicker = DaysTicker;\r\n    DaysTicker.__name__ = \"DaysTicker\";\r\n    DaysTicker.init_DaysTicker();\r\n}\r\n","/* models\\tickers\\single_interval_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_ticker_1 = require(243) /* ./continuous_ticker */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var SingleIntervalTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SingleIntervalTicker, _super);\r\n        function SingleIntervalTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        SingleIntervalTicker.init_SingleIntervalTicker = function () {\r\n            this.define({\r\n                interval: [p.Number],\r\n            });\r\n        };\r\n        SingleIntervalTicker.prototype.get_interval = function (_data_low, _data_high, _n_desired_ticks) {\r\n            return this.interval;\r\n        };\r\n        Object.defineProperty(SingleIntervalTicker.prototype, \"min_interval\", {\r\n            get: function () {\r\n                return this.interval;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(SingleIntervalTicker.prototype, \"max_interval\", {\r\n            get: function () {\r\n                return this.interval;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return SingleIntervalTicker;\r\n    }(continuous_ticker_1.ContinuousTicker));\r\n    exports.SingleIntervalTicker = SingleIntervalTicker;\r\n    SingleIntervalTicker.__name__ = \"SingleIntervalTicker\";\r\n    SingleIntervalTicker.init_SingleIntervalTicker();\r\n}\r\n","/* models\\tickers\\util.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    // TODO Clear out debugging code, etc.\r\n    // TODO Organize helper functions.\r\n    // TODO The years ticker doesn't always use the roundest numbers; it should\r\n    // probably use a special ticker.\r\n    // TODO Add tests.\r\n    // TODO There used to be a TODO: restore memoization.  So.... do that?\r\n    // TODO Instead of a get_ticks() method, there used to be an auto_ticks()\r\n    // function that took a lot of fancy arguments, but those arguments weren't\r\n    // used anywhere.  Should we restore them?\r\n    // Some time constants, in milliseconds.\r\n    exports.ONE_MILLI = 1.0;\r\n    exports.ONE_SECOND = 1000.0;\r\n    exports.ONE_MINUTE = 60.0 * exports.ONE_SECOND;\r\n    exports.ONE_HOUR = 60 * exports.ONE_MINUTE;\r\n    exports.ONE_DAY = 24 * exports.ONE_HOUR;\r\n    exports.ONE_MONTH = 30 * exports.ONE_DAY; // An approximation, obviously.\r\n    exports.ONE_YEAR = 365 * exports.ONE_DAY;\r\n    // ---------------------------------------------------------------------------\r\n    // Date/time utility functions\r\n    // ---------------------------------------------------------------------------\r\n    // Makes a copy of a date object.\r\n    function copy_date(date) {\r\n        return new Date(date.getTime());\r\n    }\r\n    exports.copy_date = copy_date;\r\n    // Rounds a date down to the month.\r\n    function last_month_no_later_than(date) {\r\n        var new_date = copy_date(date);\r\n        new_date.setUTCDate(1);\r\n        new_date.setUTCHours(0);\r\n        new_date.setUTCMinutes(0);\r\n        new_date.setUTCSeconds(0);\r\n        new_date.setUTCMilliseconds(0);\r\n        return new_date;\r\n    }\r\n    exports.last_month_no_later_than = last_month_no_later_than;\r\n    // Rounds a date down to the year.\r\n    function last_year_no_later_than(date) {\r\n        var new_date = last_month_no_later_than(date);\r\n        new_date.setUTCMonth(0);\r\n        return new_date;\r\n    }\r\n    exports.last_year_no_later_than = last_year_no_later_than;\r\n}\r\n","/* models\\tickers\\months_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var single_interval_ticker_1 = require(308) /* ./single_interval_ticker */;\r\n    var util_1 = require(309) /* ./util */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    // Given a start and end time in millis, returns the shortest array of\r\n    // consecutive years (as Dates) that surrounds both times.\r\n    function date_range_by_year(start_time, end_time) {\r\n        var start_date = util_1.last_year_no_later_than(new Date(start_time));\r\n        var end_date = util_1.last_year_no_later_than(new Date(end_time));\r\n        end_date.setUTCFullYear(end_date.getUTCFullYear() + 1);\r\n        var dates = [];\r\n        var date = start_date;\r\n        while (true) {\r\n            dates.push(util_1.copy_date(date));\r\n            date.setUTCFullYear(date.getUTCFullYear() + 1);\r\n            if (date > end_date)\r\n                break;\r\n        }\r\n        return dates;\r\n    }\r\n    var MonthsTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MonthsTicker, _super);\r\n        function MonthsTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MonthsTicker.init_MonthsTicker = function () {\r\n            this.define({\r\n                months: [p.Array, []],\r\n            });\r\n        };\r\n        MonthsTicker.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            var months = this.months;\r\n            if (months.length > 1)\r\n                this.interval = (months[1] - months[0]) * util_1.ONE_MONTH;\r\n            else\r\n                this.interval = 12 * util_1.ONE_MONTH;\r\n        };\r\n        MonthsTicker.prototype.get_ticks_no_defaults = function (data_low, data_high, _cross_loc, _desired_n_ticks) {\r\n            var year_dates = date_range_by_year(data_low, data_high);\r\n            var months = this.months;\r\n            var months_of_year = function (year_date) {\r\n                return months.map(function (month) {\r\n                    var month_date = util_1.copy_date(year_date);\r\n                    month_date.setUTCMonth(month);\r\n                    return month_date;\r\n                });\r\n            };\r\n            var month_dates = array_1.concat(year_dates.map(months_of_year));\r\n            var all_ticks = month_dates.map(function (month_date) { return month_date.getTime(); });\r\n            var ticks_in_range = all_ticks.filter(function (tick) { return data_low <= tick && tick <= data_high; });\r\n            return {\r\n                major: ticks_in_range,\r\n                minor: [],\r\n            };\r\n        };\r\n        return MonthsTicker;\r\n    }(single_interval_ticker_1.SingleIntervalTicker));\r\n    exports.MonthsTicker = MonthsTicker;\r\n    MonthsTicker.__name__ = \"MonthsTicker\";\r\n    MonthsTicker.init_MonthsTicker();\r\n}\r\n","/* models\\tickers\\years_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var basic_ticker_1 = require(241) /* ./basic_ticker */;\r\n    var single_interval_ticker_1 = require(308) /* ./single_interval_ticker */;\r\n    var util_1 = require(309) /* ./util */;\r\n    var YearsTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(YearsTicker, _super);\r\n        function YearsTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        YearsTicker.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.interval = util_1.ONE_YEAR;\r\n            this.basic_ticker = new basic_ticker_1.BasicTicker({ num_minor_ticks: 0 });\r\n        };\r\n        YearsTicker.prototype.get_ticks_no_defaults = function (data_low, data_high, cross_loc, desired_n_ticks) {\r\n            var start_year = util_1.last_year_no_later_than(new Date(data_low)).getUTCFullYear();\r\n            var end_year = util_1.last_year_no_later_than(new Date(data_high)).getUTCFullYear();\r\n            var years = this.basic_ticker.get_ticks_no_defaults(start_year, end_year, cross_loc, desired_n_ticks).major;\r\n            var all_ticks = years.map(function (year) { return Date.UTC(year, 0, 1); });\r\n            var ticks_in_range = all_ticks.filter(function (tick) { return data_low <= tick && tick <= data_high; });\r\n            return {\r\n                major: ticks_in_range,\r\n                minor: [],\r\n            };\r\n        };\r\n        return YearsTicker;\r\n    }(single_interval_ticker_1.SingleIntervalTicker));\r\n    exports.YearsTicker = YearsTicker;\r\n    YearsTicker.__name__ = \"YearsTicker\";\r\n}\r\n","/* models\\axes\\log_axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var axis_1 = require(292) /* ./axis */;\r\n    var continuous_axis_1 = require(297) /* ./continuous_axis */;\r\n    var log_tick_formatter_1 = require(313) /* ../formatters/log_tick_formatter */;\r\n    var log_ticker_1 = require(314) /* ../tickers/log_ticker */;\r\n    var LogAxisView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LogAxisView, _super);\r\n        function LogAxisView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return LogAxisView;\r\n    }(axis_1.AxisView));\r\n    exports.LogAxisView = LogAxisView;\r\n    LogAxisView.__name__ = \"LogAxisView\";\r\n    var LogAxis = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LogAxis, _super);\r\n        function LogAxis(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LogAxis.init_LogAxis = function () {\r\n            this.prototype.default_view = LogAxisView;\r\n            this.override({\r\n                ticker: function () { return new log_ticker_1.LogTicker(); },\r\n                formatter: function () { return new log_tick_formatter_1.LogTickFormatter(); },\r\n            });\r\n        };\r\n        return LogAxis;\r\n    }(continuous_axis_1.ContinuousAxis));\r\n    exports.LogAxis = LogAxis;\r\n    LogAxis.__name__ = \"LogAxis\";\r\n    LogAxis.init_LogAxis();\r\n}\r\n","/* models\\formatters\\log_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    var basic_tick_formatter_1 = require(245) /* ./basic_tick_formatter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var LogTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LogTickFormatter, _super);\r\n        function LogTickFormatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LogTickFormatter.init_LogTickFormatter = function () {\r\n            this.define({\r\n                ticker: [p.Instance, null],\r\n            });\r\n        };\r\n        LogTickFormatter.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.basic_formatter = new basic_tick_formatter_1.BasicTickFormatter();\r\n        };\r\n        LogTickFormatter.prototype.doFormat = function (ticks, opts) {\r\n            if (ticks.length == 0)\r\n                return [];\r\n            var base = this.ticker != null ? this.ticker.base : 10;\r\n            var small_interval = false;\r\n            var labels = new Array(ticks.length);\r\n            for (var i = 0, end = ticks.length; i < end; i++) {\r\n                labels[i] = base + \"^\" + Math.round(Math.log(ticks[i]) / Math.log(base));\r\n                if (i > 0 && labels[i] == labels[i - 1]) {\r\n                    small_interval = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (small_interval)\r\n                return this.basic_formatter.doFormat(ticks, opts);\r\n            else\r\n                return labels;\r\n        };\r\n        return LogTickFormatter;\r\n    }(tick_formatter_1.TickFormatter));\r\n    exports.LogTickFormatter = LogTickFormatter;\r\n    LogTickFormatter.__name__ = \"LogTickFormatter\";\r\n    LogTickFormatter.init_LogTickFormatter();\r\n}\r\n","/* models\\tickers\\log_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var adaptive_ticker_1 = require(242) /* ./adaptive_ticker */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var LogTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LogTicker, _super);\r\n        function LogTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LogTicker.init_LogTicker = function () {\r\n            this.override({\r\n                mantissas: [1, 5],\r\n            });\r\n        };\r\n        LogTicker.prototype.get_ticks_no_defaults = function (data_low, data_high, _cross_loc, desired_n_ticks) {\r\n            var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f;\r\n            var num_minor_ticks = this.num_minor_ticks;\r\n            var minor_ticks = [];\r\n            var base = this.base;\r\n            var log_low = Math.log(data_low) / Math.log(base);\r\n            var log_high = Math.log(data_high) / Math.log(base);\r\n            var log_interval = log_high - log_low;\r\n            var ticks;\r\n            if (!isFinite(log_interval)) {\r\n                ticks = [];\r\n            }\r\n            else if (log_interval < 2) { // treat as linear ticker\r\n                var interval_1 = this.get_interval(data_low, data_high, desired_n_ticks);\r\n                var start_factor = Math.floor(data_low / interval_1);\r\n                var end_factor = Math.ceil(data_high / interval_1);\r\n                ticks = array_1.range(start_factor, end_factor + 1)\r\n                    .filter(function (factor) { return factor != 0; })\r\n                    .map(function (factor) { return factor * interval_1; })\r\n                    .filter(function (tick) { return data_low <= tick && tick <= data_high; });\r\n                if (num_minor_ticks > 0 && ticks.length > 0) {\r\n                    var minor_interval_1 = interval_1 / num_minor_ticks;\r\n                    var minor_offsets = array_1.range(0, num_minor_ticks).map(function (i) { return i * minor_interval_1; });\r\n                    try {\r\n                        for (var _g = tslib_1.__values(minor_offsets.slice(1)), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                            var x = _h.value;\r\n                            minor_ticks.push(ticks[0] - x);\r\n                        }\r\n                    }\r\n                    catch (e_1_1) {\r\n                        e_1 = { error: e_1_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_h && !_h.done && (_a = _g.return))\r\n                                _a.call(_g);\r\n                        }\r\n                        finally {\r\n                            if (e_1)\r\n                                throw e_1.error;\r\n                        }\r\n                    }\r\n                    try {\r\n                        for (var ticks_1 = tslib_1.__values(ticks), ticks_1_1 = ticks_1.next(); !ticks_1_1.done; ticks_1_1 = ticks_1.next()) {\r\n                            var tick = ticks_1_1.value;\r\n                            try {\r\n                                for (var minor_offsets_1 = (e_3 = void 0, tslib_1.__values(minor_offsets)), minor_offsets_1_1 = minor_offsets_1.next(); !minor_offsets_1_1.done; minor_offsets_1_1 = minor_offsets_1.next()) {\r\n                                    var x = minor_offsets_1_1.value;\r\n                                    minor_ticks.push(tick + x);\r\n                                }\r\n                            }\r\n                            catch (e_3_1) {\r\n                                e_3 = { error: e_3_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (minor_offsets_1_1 && !minor_offsets_1_1.done && (_c = minor_offsets_1.return))\r\n                                        _c.call(minor_offsets_1);\r\n                                }\r\n                                finally {\r\n                                    if (e_3)\r\n                                        throw e_3.error;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_2_1) {\r\n                        e_2 = { error: e_2_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (ticks_1_1 && !ticks_1_1.done && (_b = ticks_1.return))\r\n                                _b.call(ticks_1);\r\n                        }\r\n                        finally {\r\n                            if (e_2)\r\n                                throw e_2.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                var startlog = Math.ceil(log_low * 0.999999);\r\n                var endlog = Math.floor(log_high * 1.000001);\r\n                var interval = Math.ceil((endlog - startlog) / 9.0);\r\n                ticks = array_1.range(startlog - 1, endlog + 1, interval)\r\n                    .map(function (i) { return Math.pow(base, i); });\r\n                if (num_minor_ticks > 0 && ticks.length > 0) {\r\n                    var minor_interval_2 = Math.pow(base, interval) / num_minor_ticks;\r\n                    var minor_offsets = array_1.range(1, num_minor_ticks + 1).map(function (i) { return i * minor_interval_2; });\r\n                    try {\r\n                        for (var minor_offsets_2 = tslib_1.__values(minor_offsets), minor_offsets_2_1 = minor_offsets_2.next(); !minor_offsets_2_1.done; minor_offsets_2_1 = minor_offsets_2.next()) {\r\n                            var x = minor_offsets_2_1.value;\r\n                            minor_ticks.push(ticks[0] / x);\r\n                        }\r\n                    }\r\n                    catch (e_4_1) {\r\n                        e_4 = { error: e_4_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (minor_offsets_2_1 && !minor_offsets_2_1.done && (_d = minor_offsets_2.return))\r\n                                _d.call(minor_offsets_2);\r\n                        }\r\n                        finally {\r\n                            if (e_4)\r\n                                throw e_4.error;\r\n                        }\r\n                    }\r\n                    minor_ticks.push(ticks[0]);\r\n                    try {\r\n                        for (var ticks_2 = tslib_1.__values(ticks), ticks_2_1 = ticks_2.next(); !ticks_2_1.done; ticks_2_1 = ticks_2.next()) {\r\n                            var tick = ticks_2_1.value;\r\n                            try {\r\n                                for (var minor_offsets_3 = (e_6 = void 0, tslib_1.__values(minor_offsets)), minor_offsets_3_1 = minor_offsets_3.next(); !minor_offsets_3_1.done; minor_offsets_3_1 = minor_offsets_3.next()) {\r\n                                    var x = minor_offsets_3_1.value;\r\n                                    minor_ticks.push(tick * x);\r\n                                }\r\n                            }\r\n                            catch (e_6_1) {\r\n                                e_6 = { error: e_6_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (minor_offsets_3_1 && !minor_offsets_3_1.done && (_f = minor_offsets_3.return))\r\n                                        _f.call(minor_offsets_3);\r\n                                }\r\n                                finally {\r\n                                    if (e_6)\r\n                                        throw e_6.error;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_5_1) {\r\n                        e_5 = { error: e_5_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (ticks_2_1 && !ticks_2_1.done && (_e = ticks_2.return))\r\n                                _e.call(ticks_2);\r\n                        }\r\n                        finally {\r\n                            if (e_5)\r\n                                throw e_5.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                major: ticks.filter(function (tick) { return data_low <= tick && tick <= data_high; }),\r\n                minor: minor_ticks.filter(function (tick) { return data_low <= tick && tick <= data_high; }),\r\n            };\r\n        };\r\n        return LogTicker;\r\n    }(adaptive_ticker_1.AdaptiveTicker));\r\n    exports.LogTicker = LogTicker;\r\n    LogTicker.__name__ = \"LogTicker\";\r\n    LogTicker.init_LogTicker();\r\n}\r\n","/* models\\axes\\mercator_axis.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var axis_1 = require(292) /* ./axis */;\r\n    var linear_axis_1 = require(299) /* ./linear_axis */;\r\n    var mercator_tick_formatter_1 = require(316) /* ../formatters/mercator_tick_formatter */;\r\n    var mercator_ticker_1 = require(317) /* ../tickers/mercator_ticker */;\r\n    var MercatorAxisView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MercatorAxisView, _super);\r\n        function MercatorAxisView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return MercatorAxisView;\r\n    }(axis_1.AxisView));\r\n    exports.MercatorAxisView = MercatorAxisView;\r\n    MercatorAxisView.__name__ = \"MercatorAxisView\";\r\n    var MercatorAxis = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MercatorAxis, _super);\r\n        function MercatorAxis(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MercatorAxis.init_MercatorAxis = function () {\r\n            this.prototype.default_view = MercatorAxisView;\r\n            this.override({\r\n                ticker: function () { return new mercator_ticker_1.MercatorTicker({ dimension: \"lat\" }); },\r\n                formatter: function () { return new mercator_tick_formatter_1.MercatorTickFormatter({ dimension: \"lat\" }); },\r\n            });\r\n        };\r\n        return MercatorAxis;\r\n    }(linear_axis_1.LinearAxis));\r\n    exports.MercatorAxis = MercatorAxis;\r\n    MercatorAxis.__name__ = \"MercatorAxis\";\r\n    MercatorAxis.init_MercatorAxis();\r\n}\r\n","/* models\\formatters\\mercator_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var basic_tick_formatter_1 = require(245) /* ./basic_tick_formatter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var MercatorTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MercatorTickFormatter, _super);\r\n        function MercatorTickFormatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MercatorTickFormatter.init_MercatorTickFormatter = function () {\r\n            this.define({\r\n                dimension: [p.LatLon],\r\n            });\r\n        };\r\n        MercatorTickFormatter.prototype.doFormat = function (ticks, opts) {\r\n            if (this.dimension == null)\r\n                throw new Error(\"MercatorTickFormatter.dimension not configured\");\r\n            if (ticks.length == 0)\r\n                return [];\r\n            var n = ticks.length;\r\n            var proj_ticks = new Array(n);\r\n            if (this.dimension == \"lon\") {\r\n                for (var i = 0; i < n; i++) {\r\n                    var _a = tslib_1.__read(projections_1.wgs84_mercator.invert(ticks[i], opts.loc), 1), lon = _a[0];\r\n                    proj_ticks[i] = lon;\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0; i < n; i++) {\r\n                    var _b = tslib_1.__read(projections_1.wgs84_mercator.invert(opts.loc, ticks[i]), 2), lat = _b[1];\r\n                    proj_ticks[i] = lat;\r\n                }\r\n            }\r\n            return _super.prototype.doFormat.call(this, proj_ticks, opts);\r\n        };\r\n        return MercatorTickFormatter;\r\n    }(basic_tick_formatter_1.BasicTickFormatter));\r\n    exports.MercatorTickFormatter = MercatorTickFormatter;\r\n    MercatorTickFormatter.__name__ = \"MercatorTickFormatter\";\r\n    MercatorTickFormatter.init_MercatorTickFormatter();\r\n}\r\n","/* models\\tickers\\mercator_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var basic_ticker_1 = require(241) /* ./basic_ticker */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var MercatorTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MercatorTicker, _super);\r\n        function MercatorTicker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MercatorTicker.init_MercatorTicker = function () {\r\n            this.define({\r\n                dimension: [p.LatLon],\r\n            });\r\n        };\r\n        MercatorTicker.prototype.get_ticks_no_defaults = function (data_low, data_high, cross_loc, desired_n_ticks) {\r\n            var _a;\r\n            if (this.dimension == null) {\r\n                throw new Error(this + \".dimension wasn't configured\");\r\n            }\r\n            _a = tslib_1.__read(projections_1.clip_mercator(data_low, data_high, this.dimension), 2), data_low = _a[0], data_high = _a[1];\r\n            if (this.dimension == \"lon\")\r\n                return this._get_ticks_lon(data_low, data_high, cross_loc, desired_n_ticks);\r\n            else\r\n                return this._get_ticks_lat(data_low, data_high, cross_loc, desired_n_ticks);\r\n        };\r\n        MercatorTicker.prototype._get_ticks_lon = function (data_low, data_high, cross_loc, desired_n_ticks) {\r\n            var e_1, _a, e_2, _b;\r\n            var _c = tslib_1.__read(projections_1.wgs84_mercator.invert(data_low, cross_loc), 1), proj_low = _c[0];\r\n            var _d = tslib_1.__read(projections_1.wgs84_mercator.invert(data_high, cross_loc), 2), proj_high = _d[0], proj_cross_loc = _d[1];\r\n            var proj_ticks = _super.prototype.get_ticks_no_defaults.call(this, proj_low, proj_high, cross_loc, desired_n_ticks);\r\n            var major = [];\r\n            try {\r\n                for (var _e = tslib_1.__values(proj_ticks.major), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var tick = _f.value;\r\n                    if (projections_1.in_bounds(tick, \"lon\")) {\r\n                        var _g = tslib_1.__read(projections_1.wgs84_mercator.compute(tick, proj_cross_loc), 1), lon = _g[0];\r\n                        major.push(lon);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_a = _e.return))\r\n                        _a.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            var minor = [];\r\n            try {\r\n                for (var _h = tslib_1.__values(proj_ticks.minor), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                    var tick = _j.value;\r\n                    if (projections_1.in_bounds(tick, \"lon\")) {\r\n                        var _k = tslib_1.__read(projections_1.wgs84_mercator.compute(tick, proj_cross_loc), 1), lon = _k[0];\r\n                        minor.push(lon);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_j && !_j.done && (_b = _h.return))\r\n                        _b.call(_h);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return { major: major, minor: minor };\r\n        };\r\n        MercatorTicker.prototype._get_ticks_lat = function (data_low, data_high, cross_loc, desired_n_ticks) {\r\n            var e_3, _a, e_4, _b;\r\n            var _c = tslib_1.__read(projections_1.wgs84_mercator.invert(cross_loc, data_low), 2), proj_low = _c[1];\r\n            var _d = tslib_1.__read(projections_1.wgs84_mercator.invert(cross_loc, data_high), 2), proj_cross_loc = _d[0], proj_high = _d[1];\r\n            var proj_ticks = _super.prototype.get_ticks_no_defaults.call(this, proj_low, proj_high, cross_loc, desired_n_ticks);\r\n            var major = [];\r\n            try {\r\n                for (var _e = tslib_1.__values(proj_ticks.major), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var tick = _f.value;\r\n                    if (projections_1.in_bounds(tick, \"lat\")) {\r\n                        var _g = tslib_1.__read(projections_1.wgs84_mercator.compute(proj_cross_loc, tick), 2), lat = _g[1];\r\n                        major.push(lat);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_a = _e.return))\r\n                        _a.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            var minor = [];\r\n            try {\r\n                for (var _h = tslib_1.__values(proj_ticks.minor), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                    var tick = _j.value;\r\n                    if (projections_1.in_bounds(tick, \"lat\")) {\r\n                        var _k = tslib_1.__read(projections_1.wgs84_mercator.compute(proj_cross_loc, tick), 2), lat = _k[1];\r\n                        minor.push(lat);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_j && !_j.done && (_b = _h.return))\r\n                        _b.call(_h);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            return { major: major, minor: minor };\r\n        };\r\n        return MercatorTicker;\r\n    }(basic_ticker_1.BasicTicker));\r\n    exports.MercatorTicker = MercatorTicker;\r\n    MercatorTicker.__name__ = \"MercatorTicker\";\r\n    MercatorTicker.init_MercatorTicker();\r\n}\r\n","/* models\\callbacks\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var customjs_1 = require(319) /* ./customjs */;\r\n    exports.CustomJS = customjs_1.CustomJS;\r\n    var open_url_1 = require(321) /* ./open_url */;\r\n    exports.OpenURL = open_url_1.OpenURL;\r\n}\r\n","/* models\\callbacks\\customjs.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var callback_1 = require(320) /* ./callback */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var string_1 = require(144) /* ../../core/util/string */;\r\n    var CustomJS = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CustomJS, _super);\r\n        function CustomJS(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CustomJS.init_CustomJS = function () {\r\n            this.define({\r\n                args: [p.Any, {}],\r\n                code: [p.String, ''],\r\n            });\r\n        };\r\n        Object.defineProperty(CustomJS.prototype, \"names\", {\r\n            get: function () {\r\n                return object_1.keys(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CustomJS.prototype, \"values\", {\r\n            get: function () {\r\n                return object_1.values(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CustomJS.prototype, \"func\", {\r\n            get: function () {\r\n                var code = string_1.use_strict(this.code);\r\n                return new (Function.bind.apply(Function, tslib_1.__spread([void 0], this.names, [\"cb_obj\", \"cb_data\", code])))();\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CustomJS.prototype.execute = function (cb_obj, cb_data) {\r\n            if (cb_data === void 0) {\r\n                cb_data = {};\r\n            }\r\n            return this.func.apply(cb_obj, this.values.concat(cb_obj, cb_data));\r\n        };\r\n        return CustomJS;\r\n    }(callback_1.Callback));\r\n    exports.CustomJS = CustomJS;\r\n    CustomJS.__name__ = \"CustomJS\";\r\n    CustomJS.init_CustomJS();\r\n}\r\n","/* models\\callbacks\\callback.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var Callback = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Callback, _super);\r\n        function Callback(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return Callback;\r\n    }(model_1.Model));\r\n    exports.Callback = Callback;\r\n    Callback.__name__ = \"Callback\";\r\n}\r\n","/* models\\callbacks\\open_url.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var callback_1 = require(320) /* ./callback */;\r\n    var templating_1 = require(302) /* ../../core/util/templating */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var OpenURL = /** @class */ (function (_super) {\r\n        tslib_1.__extends(OpenURL, _super);\r\n        function OpenURL(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        OpenURL.init_OpenURL = function () {\r\n            this.define({\r\n                url: [p.String, 'http://'],\r\n                same_tab: [p.Boolean, false],\r\n            });\r\n        };\r\n        OpenURL.prototype.execute = function (_cb_obj, _a) {\r\n            var e_1, _b, e_2, _c;\r\n            var _this = this;\r\n            var source = _a.source;\r\n            var open_url = function (i) {\r\n                var url = templating_1.replace_placeholders(_this.url, source, i);\r\n                if (!types_1.isString(url))\r\n                    throw new Error(\"HTML output is not supported in this context\");\r\n                if (_this.same_tab)\r\n                    window.location.href = url;\r\n                else\r\n                    window.open(url);\r\n            };\r\n            var selected = source.selected;\r\n            try {\r\n                for (var _d = tslib_1.__values(selected.indices), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var i = _e.value;\r\n                    open_url(i);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_b = _d.return))\r\n                        _b.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _f = tslib_1.__values(selected.line_indices), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                    var i = _g.value;\r\n                    open_url(i);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_g && !_g.done && (_c = _f.return))\r\n                        _c.call(_f);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            // TODO: multiline_indices: {[key: string]: number[]}\r\n        };\r\n        return OpenURL;\r\n    }(callback_1.Callback));\r\n    exports.OpenURL = OpenURL;\r\n    OpenURL.__name__ = \"OpenURL\";\r\n    OpenURL.init_OpenURL();\r\n}\r\n","/* models\\canvas\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var canvas_1 = require(192) /* ./canvas */;\r\n    exports.Canvas = canvas_1.Canvas;\r\n    var cartesian_frame_1 = require(323) /* ./cartesian_frame */;\r\n    exports.CartesianFrame = cartesian_frame_1.CartesianFrame;\r\n}\r\n","/* models\\canvas\\cartesian_frame.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var categorical_scale_1 = require(324) /* ../scales/categorical_scale */;\r\n    var continuous_scale_1 = require(261) /* ../scales/continuous_scale */;\r\n    var log_scale_1 = require(272) /* ../scales/log_scale */;\r\n    var range1d_1 = require(273) /* ../ranges/range1d */;\r\n    var data_range1d_1 = require(325) /* ../ranges/data_range1d */;\r\n    var factor_range_1 = require(213) /* ../ranges/factor_range */;\r\n    var layout_1 = require(327) /* ../../core/layout */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var CartesianFrame = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CartesianFrame, _super);\r\n        function CartesianFrame(in_x_scale, in_y_scale, x_range, y_range, extra_x_ranges, extra_y_ranges) {\r\n            if (extra_x_ranges === void 0) {\r\n                extra_x_ranges = {};\r\n            }\r\n            if (extra_y_ranges === void 0) {\r\n                extra_y_ranges = {};\r\n            }\r\n            var _this = _super.call(this) || this;\r\n            _this.in_x_scale = in_x_scale;\r\n            _this.in_y_scale = in_y_scale;\r\n            _this.x_range = x_range;\r\n            _this.y_range = y_range;\r\n            _this.extra_x_ranges = extra_x_ranges;\r\n            _this.extra_y_ranges = extra_y_ranges;\r\n            assert_1.assert(in_x_scale.source_range == null && in_x_scale.target_range == null);\r\n            assert_1.assert(in_y_scale.source_range == null && in_y_scale.target_range == null);\r\n            _this._configure_scales();\r\n            return _this;\r\n        }\r\n        CartesianFrame.prototype._get_ranges = function (range, extra_ranges) {\r\n            return new Map(object_1.entries(Object.assign(Object.assign({}, extra_ranges), { default: range })));\r\n        };\r\n        /*protected*/ CartesianFrame.prototype._get_scales = function (scale, ranges, frame_range) {\r\n            var e_1, _a;\r\n            var scales = new Map();\r\n            try {\r\n                for (var ranges_1 = tslib_1.__values(ranges), ranges_1_1 = ranges_1.next(); !ranges_1_1.done; ranges_1_1 = ranges_1.next()) {\r\n                    var _b = tslib_1.__read(ranges_1_1.value, 2), name = _b[0], range = _b[1];\r\n                    if (range instanceof data_range1d_1.DataRange1d || range instanceof range1d_1.Range1d) {\r\n                        if (!(scale instanceof continuous_scale_1.ContinuousScale))\r\n                            throw new Error(\"Range \" + range.type + \" is incompatible is Scale \" + scale.type);\r\n                    }\r\n                    if (range instanceof factor_range_1.FactorRange) {\r\n                        if (!(scale instanceof categorical_scale_1.CategoricalScale))\r\n                            throw new Error(\"Range \" + range.type + \" is incompatible is Scale \" + scale.type);\r\n                    }\r\n                    if (scale instanceof log_scale_1.LogScale && range instanceof data_range1d_1.DataRange1d)\r\n                        range.scale_hint = \"log\";\r\n                    var derived_scale = scale.clone();\r\n                    derived_scale.setv({ source_range: range, target_range: frame_range });\r\n                    scales.set(name, derived_scale);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (ranges_1_1 && !ranges_1_1.done && (_a = ranges_1.return))\r\n                        _a.call(ranges_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return scales;\r\n        };\r\n        CartesianFrame.prototype._configure_frame_ranges = function () {\r\n            // data to/from screen space transform (left-bottom <-> left-top origin)\r\n            var bbox = this.bbox;\r\n            this._x_target = new range1d_1.Range1d({ start: bbox.left, end: bbox.right });\r\n            this._y_target = new range1d_1.Range1d({ start: bbox.bottom, end: bbox.top });\r\n        };\r\n        CartesianFrame.prototype._configure_scales = function () {\r\n            this._configure_frame_ranges();\r\n            this._x_ranges = this._get_ranges(this.x_range, this.extra_x_ranges);\r\n            this._y_ranges = this._get_ranges(this.y_range, this.extra_y_ranges);\r\n            this._x_scales = this._get_scales(this.in_x_scale, this._x_ranges, this._x_target);\r\n            this._y_scales = this._get_scales(this.in_y_scale, this._y_ranges, this._y_target);\r\n        };\r\n        CartesianFrame.prototype._update_scales = function () {\r\n            var e_2, _a, e_3, _b;\r\n            this._configure_frame_ranges();\r\n            try {\r\n                for (var _c = tslib_1.__values(this._x_scales), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), scale = _e[1];\r\n                    scale.target_range = this._x_target;\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return))\r\n                        _a.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _f = tslib_1.__values(this._y_scales), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                    var _h = tslib_1.__read(_g.value, 2), scale = _h[1];\r\n                    scale.target_range = this._y_target;\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_g && !_g.done && (_b = _f.return))\r\n                        _b.call(_f);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n        };\r\n        CartesianFrame.prototype._set_geometry = function (outer, inner) {\r\n            _super.prototype._set_geometry.call(this, outer, inner);\r\n            this._update_scales();\r\n        };\r\n        Object.defineProperty(CartesianFrame.prototype, \"x_ranges\", {\r\n            get: function () {\r\n                return this._x_ranges;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CartesianFrame.prototype, \"y_ranges\", {\r\n            get: function () {\r\n                return this._y_ranges;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CartesianFrame.prototype, \"x_scales\", {\r\n            get: function () {\r\n                return this._x_scales;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CartesianFrame.prototype, \"y_scales\", {\r\n            get: function () {\r\n                return this._y_scales;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CartesianFrame.prototype, \"x_scale\", {\r\n            get: function () {\r\n                return this._x_scales.get(\"default\");\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CartesianFrame.prototype, \"y_scale\", {\r\n            get: function () {\r\n                return this._y_scales.get(\"default\");\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CartesianFrame.prototype, \"xscales\", {\r\n            /** @deprecated */\r\n            get: function () {\r\n                return object_1.to_object(this.x_scales);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CartesianFrame.prototype, \"yscales\", {\r\n            /** @deprecated */\r\n            get: function () {\r\n                return object_1.to_object(this.y_scales);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return CartesianFrame;\r\n    }(layout_1.LayoutItem));\r\n    exports.CartesianFrame = CartesianFrame;\r\n    CartesianFrame.__name__ = \"CartesianFrame\";\r\n}\r\n","/* models\\scales\\categorical_scale.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var scale_1 = require(262) /* ./scale */;\r\n    var CategoricalScale = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CategoricalScale, _super);\r\n        function CategoricalScale(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CategoricalScale.prototype.compute = function (x) {\r\n            return _super.prototype._linear_compute.call(this, this.source_range.synthetic(x));\r\n        };\r\n        CategoricalScale.prototype.v_compute = function (xs) {\r\n            return _super.prototype._linear_v_compute.call(this, this.source_range.v_synthetic(xs));\r\n        };\r\n        CategoricalScale.prototype.invert = function (xprime) {\r\n            return this._linear_invert(xprime);\r\n        };\r\n        CategoricalScale.prototype.v_invert = function (xprimes) {\r\n            return this._linear_v_invert(xprimes);\r\n        };\r\n        return CategoricalScale;\r\n    }(scale_1.Scale));\r\n    exports.CategoricalScale = CategoricalScale;\r\n    CategoricalScale.__name__ = \"CategoricalScale\";\r\n}\r\n","/* models\\ranges\\data_range1d.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var data_range_1 = require(326) /* ./data_range */;\r\n    var glyph_renderer_1 = require(205) /* ../renderers/glyph_renderer */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var bbox = tslib_1.__importStar(require(194) /* ../../core/util/bbox */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var DataRange1d = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DataRange1d, _super);\r\n        function DataRange1d(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.have_updated_interactively = false;\r\n            return _this;\r\n        }\r\n        DataRange1d.init_DataRange1d = function () {\r\n            this.define({\r\n                start: [p.Number],\r\n                end: [p.Number],\r\n                range_padding: [p.Number, 0.1],\r\n                range_padding_units: [p.PaddingUnits, \"percent\"],\r\n                flipped: [p.Boolean, false],\r\n                follow: [p.StartEnd],\r\n                follow_interval: [p.Number],\r\n                default_span: [p.Number, 2],\r\n                only_visible: [p.Boolean, false],\r\n            });\r\n            this.internal({\r\n                scale_hint: [p.String, 'auto'],\r\n            });\r\n        };\r\n        DataRange1d.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._initial_start = this.start;\r\n            this._initial_end = this.end;\r\n            this._initial_range_padding = this.range_padding;\r\n            this._initial_range_padding_units = this.range_padding_units;\r\n            this._initial_follow = this.follow;\r\n            this._initial_follow_interval = this.follow_interval;\r\n            this._initial_default_span = this.default_span;\r\n            this._plot_bounds = new Map();\r\n        };\r\n        Object.defineProperty(DataRange1d.prototype, \"min\", {\r\n            get: function () {\r\n                return Math.min(this.start, this.end);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DataRange1d.prototype, \"max\", {\r\n            get: function () {\r\n                return Math.max(this.start, this.end);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        DataRange1d.prototype.computed_renderers = function () {\r\n            var e_1, _a, e_2, _b;\r\n            // TODO (bev) check that renderers actually configured with this range\r\n            var names = this.names;\r\n            var renderers = this.renderers;\r\n            if (renderers.length == 0) {\r\n                try {\r\n                    for (var _c = tslib_1.__values(this.plots), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var plot = _d.value;\r\n                        var rs = plot.renderers.filter(function (r) { return r instanceof glyph_renderer_1.GlyphRenderer; });\r\n                        renderers = renderers.concat(rs);\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_a = _c.return))\r\n                            _a.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n            if (names.length > 0)\r\n                renderers = renderers.filter(function (r) { return array_1.includes(names, r.name); });\r\n            logging_1.logger.debug(\"computed \" + renderers.length + \" renderers for \" + this);\r\n            try {\r\n                for (var renderers_1 = tslib_1.__values(renderers), renderers_1_1 = renderers_1.next(); !renderers_1_1.done; renderers_1_1 = renderers_1.next()) {\r\n                    var renderer = renderers_1_1.value;\r\n                    logging_1.logger.trace(\" - \" + renderer);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderers_1_1 && !renderers_1_1.done && (_b = renderers_1.return))\r\n                        _b.call(renderers_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return renderers;\r\n        };\r\n        /*protected*/ DataRange1d.prototype._compute_plot_bounds = function (renderers, bounds) {\r\n            var e_3, _a;\r\n            var result = bbox.empty();\r\n            try {\r\n                for (var renderers_2 = tslib_1.__values(renderers), renderers_2_1 = renderers_2.next(); !renderers_2_1.done; renderers_2_1 = renderers_2.next()) {\r\n                    var r = renderers_2_1.value;\r\n                    var rect = bounds.get(r);\r\n                    if (rect != null && (r.visible || !this.only_visible)) {\r\n                        result = bbox.union(result, rect);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderers_2_1 && !renderers_2_1.done && (_a = renderers_2.return))\r\n                        _a.call(renderers_2);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        DataRange1d.prototype.adjust_bounds_for_aspect = function (bounds, ratio) {\r\n            var result = bbox.empty();\r\n            var width = bounds.x1 - bounds.x0;\r\n            if (width <= 0) {\r\n                width = 1.0;\r\n            }\r\n            var height = bounds.y1 - bounds.y0;\r\n            if (height <= 0) {\r\n                height = 1.0;\r\n            }\r\n            var xcenter = 0.5 * (bounds.x1 + bounds.x0);\r\n            var ycenter = 0.5 * (bounds.y1 + bounds.y0);\r\n            if (width < ratio * height) {\r\n                width = ratio * height;\r\n            }\r\n            else {\r\n                height = width / ratio;\r\n            }\r\n            result.x1 = xcenter + 0.5 * width;\r\n            result.x0 = xcenter - 0.5 * width;\r\n            result.y1 = ycenter + 0.5 * height;\r\n            result.y0 = ycenter - 0.5 * height;\r\n            return result;\r\n        };\r\n        /*protected*/ DataRange1d.prototype._compute_min_max = function (plot_bounds, dimension) {\r\n            var e_4, _a, _b, _c;\r\n            var overall = bbox.empty();\r\n            try {\r\n                for (var plot_bounds_1 = tslib_1.__values(plot_bounds), plot_bounds_1_1 = plot_bounds_1.next(); !plot_bounds_1_1.done; plot_bounds_1_1 = plot_bounds_1.next()) {\r\n                    var rect = plot_bounds_1_1.value;\r\n                    overall = bbox.union(overall, rect);\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (plot_bounds_1_1 && !plot_bounds_1_1.done && (_a = plot_bounds_1.return))\r\n                        _a.call(plot_bounds_1);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            var min, max;\r\n            if (dimension == 0)\r\n                _b = tslib_1.__read([overall.x0, overall.x1], 2), min = _b[0], max = _b[1];\r\n            else\r\n                _c = tslib_1.__read([overall.y0, overall.y1], 2), min = _c[0], max = _c[1];\r\n            return [min, max];\r\n        };\r\n        /*protected*/ DataRange1d.prototype._compute_range = function (min, max) {\r\n            var _a;\r\n            var range_padding = this.range_padding; // XXX: ? 0\r\n            var start, end;\r\n            if (this._initial_start != null)\r\n                min = this._initial_start;\r\n            if (this._initial_end != null)\r\n                max = this._initial_end;\r\n            if (this.scale_hint == \"log\") {\r\n                if (isNaN(min) || !isFinite(min) || min <= 0) {\r\n                    if (isNaN(max) || !isFinite(max) || max <= 0)\r\n                        min = 0.1;\r\n                    else\r\n                        min = max / 100;\r\n                    logging_1.logger.warn(\"could not determine minimum data value for log axis, DataRange1d using value \" + min);\r\n                }\r\n                if (isNaN(max) || !isFinite(max) || max <= 0) {\r\n                    if (isNaN(min) || !isFinite(min) || min <= 0)\r\n                        max = 10;\r\n                    else\r\n                        max = min * 100;\r\n                    logging_1.logger.warn(\"could not determine maximum data value for log axis, DataRange1d using value \" + max);\r\n                }\r\n                var center = void 0, span = void 0;\r\n                if (max == min) {\r\n                    span = this.default_span + 0.001;\r\n                    center = Math.log(min) / Math.log(10);\r\n                }\r\n                else {\r\n                    var log_min = void 0, log_max = void 0;\r\n                    if (this.range_padding_units == \"percent\") {\r\n                        log_min = Math.log(min) / Math.log(10);\r\n                        log_max = Math.log(max) / Math.log(10);\r\n                        span = (log_max - log_min) * (1 + range_padding);\r\n                    }\r\n                    else {\r\n                        log_min = Math.log(min - range_padding) / Math.log(10);\r\n                        log_max = Math.log(max + range_padding) / Math.log(10);\r\n                        span = log_max - log_min;\r\n                    }\r\n                    center = (log_min + log_max) / 2.0;\r\n                }\r\n                start = Math.pow(10, (center - span / 2.0));\r\n                end = Math.pow(10, (center + span / 2.0));\r\n            }\r\n            else {\r\n                var span = void 0;\r\n                if (max == min)\r\n                    span = this.default_span;\r\n                else {\r\n                    if (this.range_padding_units == \"percent\")\r\n                        span = (max - min) * (1 + range_padding);\r\n                    else\r\n                        span = (max - min) + 2 * range_padding;\r\n                }\r\n                var center = (max + min) / 2.0;\r\n                start = center - span / 2.0;\r\n                end = center + span / 2.0;\r\n            }\r\n            var follow_sign = +1;\r\n            if (this.flipped) {\r\n                _a = tslib_1.__read([end, start], 2), start = _a[0], end = _a[1];\r\n                follow_sign = -1;\r\n            }\r\n            var follow_interval = this.follow_interval;\r\n            if (follow_interval != null && Math.abs(start - end) > follow_interval) {\r\n                if (this.follow == 'start')\r\n                    end = start + follow_sign * follow_interval;\r\n                else if (this.follow == 'end')\r\n                    start = end - follow_sign * follow_interval;\r\n            }\r\n            return [start, end];\r\n        };\r\n        DataRange1d.prototype.update = function (bounds, dimension, plot, ratio) {\r\n            if (this.have_updated_interactively)\r\n                return;\r\n            var renderers = this.computed_renderers();\r\n            // update the raw data bounds for all renderers we care about\r\n            var total_bounds = this._compute_plot_bounds(renderers, bounds);\r\n            if (ratio != null)\r\n                total_bounds = this.adjust_bounds_for_aspect(total_bounds, ratio);\r\n            this._plot_bounds.set(plot, total_bounds);\r\n            // compute the min/mix for our specified dimension\r\n            var _a = tslib_1.__read(this._compute_min_max(this._plot_bounds.values(), dimension), 2), min = _a[0], max = _a[1];\r\n            // derive start, end from bounds and data range config\r\n            var _b = tslib_1.__read(this._compute_range(min, max), 2), start = _b[0], end = _b[1];\r\n            if (this._initial_start != null) {\r\n                if (this.scale_hint == \"log\") {\r\n                    if (this._initial_start > 0)\r\n                        start = this._initial_start;\r\n                }\r\n                else\r\n                    start = this._initial_start;\r\n            }\r\n            if (this._initial_end != null) {\r\n                if (this.scale_hint == \"log\") {\r\n                    if (this._initial_end > 0)\r\n                        end = this._initial_end;\r\n                }\r\n                else\r\n                    end = this._initial_end;\r\n            }\r\n            // only trigger updates when there are changes\r\n            var _c = tslib_1.__read([this.start, this.end], 2), _start = _c[0], _end = _c[1];\r\n            if (start != _start || end != _end) {\r\n                var new_range = {};\r\n                if (start != _start)\r\n                    new_range.start = start;\r\n                if (end != _end)\r\n                    new_range.end = end;\r\n                this.setv(new_range);\r\n            }\r\n            if (this.bounds == 'auto')\r\n                this.setv({ bounds: [start, end] }, { silent: true });\r\n            this.change.emit();\r\n        };\r\n        DataRange1d.prototype.reset = function () {\r\n            this.have_updated_interactively = false;\r\n            // change events silenced as PlotView.update_dataranges triggers property callbacks\r\n            this.setv({\r\n                range_padding: this._initial_range_padding,\r\n                range_padding_units: this._initial_range_padding_units,\r\n                follow: this._initial_follow,\r\n                follow_interval: this._initial_follow_interval,\r\n                default_span: this._initial_default_span,\r\n            }, { silent: true });\r\n            this.change.emit();\r\n        };\r\n        return DataRange1d;\r\n    }(data_range_1.DataRange));\r\n    exports.DataRange1d = DataRange1d;\r\n    DataRange1d.__name__ = \"DataRange1d\";\r\n    DataRange1d.init_DataRange1d();\r\n}\r\n","/* models\\ranges\\data_range.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var range_1 = require(214) /* ./range */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var DataRange = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DataRange, _super);\r\n        function DataRange(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        DataRange.init_DataRange = function () {\r\n            this.define({\r\n                names: [p.Array, []],\r\n                renderers: [p.Array, []],\r\n            });\r\n        };\r\n        return DataRange;\r\n    }(range_1.Range));\r\n    exports.DataRange = DataRange;\r\n    DataRange.__name__ = \"DataRange\";\r\n    DataRange.init_DataRange();\r\n}\r\n","/* core\\layout\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var types_1 = require(328) /* ./types */;\r\n    exports.Sizeable = types_1.Sizeable;\r\n    exports.SizingPolicy = types_1.SizingPolicy;\r\n    var layoutable_1 = require(329) /* ./layoutable */;\r\n    exports.Layoutable = layoutable_1.Layoutable;\r\n    exports.LayoutItem = layoutable_1.LayoutItem;\r\n    var alignments_1 = require(330) /* ./alignments */;\r\n    exports.HStack = alignments_1.HStack;\r\n    exports.VStack = alignments_1.VStack;\r\n    exports.AnchorLayout = alignments_1.AnchorLayout;\r\n    var grid_1 = require(331) /* ./grid */;\r\n    exports.Grid = grid_1.Grid;\r\n    exports.Row = grid_1.Row;\r\n    exports.Column = grid_1.Column;\r\n    var html_1 = require(332) /* ./html */;\r\n    exports.ContentBox = html_1.ContentBox;\r\n    exports.VariadicBox = html_1.VariadicBox;\r\n}\r\n","/* core\\layout\\types.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var kinds_1 = require(136) /* ../kinds */;\r\n    var min = Math.min, max = Math.max;\r\n    var Sizeable = /** @class */ (function () {\r\n        function Sizeable(size) {\r\n            if (size === void 0) {\r\n                size = {};\r\n            }\r\n            this.width = size.width != null ? size.width : 0;\r\n            this.height = size.height != null ? size.height : 0;\r\n        }\r\n        Sizeable.prototype.bounded_to = function (_a) {\r\n            var width = _a.width, height = _a.height;\r\n            return new Sizeable({\r\n                width: this.width == Infinity && width != null ? width : this.width,\r\n                height: this.height == Infinity && height != null ? height : this.height,\r\n            });\r\n        };\r\n        Sizeable.prototype.expanded_to = function (_a) {\r\n            var width = _a.width, height = _a.height;\r\n            return new Sizeable({\r\n                width: width != Infinity ? max(this.width, width) : this.width,\r\n                height: height != Infinity ? max(this.height, height) : this.height,\r\n            });\r\n        };\r\n        Sizeable.prototype.expand_to = function (_a) {\r\n            var width = _a.width, height = _a.height;\r\n            this.width = max(this.width, width);\r\n            this.height = max(this.height, height);\r\n        };\r\n        Sizeable.prototype.narrowed_to = function (_a) {\r\n            var width = _a.width, height = _a.height;\r\n            return new Sizeable({\r\n                width: min(this.width, width),\r\n                height: min(this.height, height),\r\n            });\r\n        };\r\n        Sizeable.prototype.narrow_to = function (_a) {\r\n            var width = _a.width, height = _a.height;\r\n            this.width = min(this.width, width);\r\n            this.height = min(this.height, height);\r\n        };\r\n        Sizeable.prototype.grow_by = function (_a) {\r\n            var left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n            var width = this.width + left + right;\r\n            var height = this.height + top + bottom;\r\n            return new Sizeable({ width: width, height: height });\r\n        };\r\n        Sizeable.prototype.shrink_by = function (_a) {\r\n            var left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n            var width = max(this.width - left - right, 0);\r\n            var height = max(this.height - top - bottom, 0);\r\n            return new Sizeable({ width: width, height: height });\r\n        };\r\n        Sizeable.prototype.map = function (w_fn, h_fn) {\r\n            return new Sizeable({\r\n                width: w_fn(this.width),\r\n                height: (h_fn != null ? h_fn : w_fn)(this.height),\r\n            });\r\n        };\r\n        return Sizeable;\r\n    }());\r\n    exports.Sizeable = Sizeable;\r\n    Sizeable.__name__ = \"Sizeable\";\r\n    exports.SizingPolicy = kinds_1.Enum(\"fixed\", \"fit\", \"min\", \"max\");\r\n}\r\n","/* core\\layout\\layoutable.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(328) /* ./types */;\r\n    var bbox_1 = require(194) /* ../util/bbox */;\r\n    var min = Math.min, max = Math.max, round = Math.round;\r\n    var Layoutable = /** @class */ (function () {\r\n        function Layoutable() {\r\n            this._bbox = new bbox_1.BBox();\r\n            this._inner_bbox = new bbox_1.BBox();\r\n        }\r\n        Object.defineProperty(Layoutable.prototype, \"bbox\", {\r\n            get: function () {\r\n                return this._bbox;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Layoutable.prototype, \"inner_bbox\", {\r\n            get: function () {\r\n                return this._inner_bbox;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Layoutable.prototype, \"sizing\", {\r\n            get: function () {\r\n                return this._sizing;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Layoutable.prototype.set_sizing = function (sizing) {\r\n            var width_policy = sizing.width_policy || \"fit\";\r\n            var width = sizing.width;\r\n            var min_width = sizing.min_width != null ? sizing.min_width : 0;\r\n            var max_width = sizing.max_width != null ? sizing.max_width : Infinity;\r\n            var height_policy = sizing.height_policy || \"fit\";\r\n            var height = sizing.height;\r\n            var min_height = sizing.min_height != null ? sizing.min_height : 0;\r\n            var max_height = sizing.max_height != null ? sizing.max_height : Infinity;\r\n            var aspect = sizing.aspect;\r\n            var margin = sizing.margin || { top: 0, right: 0, bottom: 0, left: 0 };\r\n            var visible = sizing.visible !== false;\r\n            var halign = sizing.halign || \"start\";\r\n            var valign = sizing.valign || \"start\";\r\n            this._sizing = {\r\n                width_policy: width_policy, min_width: min_width, width: width, max_width: max_width,\r\n                height_policy: height_policy, min_height: min_height, height: height, max_height: max_height,\r\n                aspect: aspect,\r\n                margin: margin,\r\n                visible: visible,\r\n                halign: halign,\r\n                valign: valign,\r\n                size: { width: width, height: height },\r\n                min_size: { width: min_width, height: min_height },\r\n                max_size: { width: max_width, height: max_height },\r\n            };\r\n            this._init();\r\n        };\r\n        Layoutable.prototype._init = function () { };\r\n        Layoutable.prototype._set_geometry = function (outer, inner) {\r\n            this._bbox = outer;\r\n            this._inner_bbox = inner;\r\n        };\r\n        Layoutable.prototype.set_geometry = function (outer, inner) {\r\n            this._set_geometry(outer, inner || outer);\r\n        };\r\n        Layoutable.prototype.is_width_expanding = function () {\r\n            return this.sizing.width_policy == \"max\";\r\n        };\r\n        Layoutable.prototype.is_height_expanding = function () {\r\n            return this.sizing.height_policy == \"max\";\r\n        };\r\n        Layoutable.prototype.apply_aspect = function (viewport, _a) {\r\n            var width = _a.width, height = _a.height;\r\n            var aspect = this.sizing.aspect;\r\n            if (aspect != null) {\r\n                var _b = this.sizing, width_policy = _b.width_policy, height_policy = _b.height_policy;\r\n                var gt = function (width, height) {\r\n                    var policies = { max: 4, fit: 3, min: 2, fixed: 1 };\r\n                    return policies[width] > policies[height];\r\n                };\r\n                if (width_policy != \"fixed\" && height_policy != \"fixed\") {\r\n                    if (width_policy == height_policy) {\r\n                        var w_width = width;\r\n                        var w_height = round(width / aspect);\r\n                        var h_width = round(height * aspect);\r\n                        var h_height = height;\r\n                        var w_diff = Math.abs(viewport.width - w_width) + Math.abs(viewport.height - w_height);\r\n                        var h_diff = Math.abs(viewport.width - h_width) + Math.abs(viewport.height - h_height);\r\n                        if (w_diff <= h_diff) {\r\n                            width = w_width;\r\n                            height = w_height;\r\n                        }\r\n                        else {\r\n                            width = h_width;\r\n                            height = h_height;\r\n                        }\r\n                    }\r\n                    else if (gt(width_policy, height_policy)) {\r\n                        height = round(width / aspect);\r\n                    }\r\n                    else {\r\n                        width = round(height * aspect);\r\n                    }\r\n                }\r\n                else if (width_policy == \"fixed\") {\r\n                    height = round(width / aspect);\r\n                }\r\n                else if (height_policy == \"fixed\") {\r\n                    width = round(height * aspect);\r\n                }\r\n            }\r\n            return { width: width, height: height };\r\n        };\r\n        Layoutable.prototype.measure = function (viewport_size) {\r\n            var _this = this;\r\n            if (!this.sizing.visible)\r\n                return { width: 0, height: 0 };\r\n            var exact_width = function (width) {\r\n                return _this.sizing.width_policy == \"fixed\" && _this.sizing.width != null ? _this.sizing.width : width;\r\n            };\r\n            var exact_height = function (height) {\r\n                return _this.sizing.height_policy == \"fixed\" && _this.sizing.height != null ? _this.sizing.height : height;\r\n            };\r\n            var viewport = new types_1.Sizeable(viewport_size)\r\n                .shrink_by(this.sizing.margin)\r\n                .map(exact_width, exact_height);\r\n            var computed = this._measure(viewport);\r\n            var clipped = this.clip_size(computed);\r\n            var width = exact_width(clipped.width);\r\n            var height = exact_height(clipped.height);\r\n            var size = this.apply_aspect(viewport, { width: width, height: height });\r\n            return Object.assign(Object.assign({}, computed), size);\r\n        };\r\n        Layoutable.prototype.compute = function (viewport) {\r\n            if (viewport === void 0) {\r\n                viewport = {};\r\n            }\r\n            var size_hint = this.measure({\r\n                width: viewport.width != null && this.is_width_expanding() ? viewport.width : Infinity,\r\n                height: viewport.height != null && this.is_height_expanding() ? viewport.height : Infinity,\r\n            });\r\n            var width = size_hint.width, height = size_hint.height;\r\n            var outer = new bbox_1.BBox({ left: 0, top: 0, width: width, height: height });\r\n            var inner = undefined;\r\n            if (size_hint.inner != null) {\r\n                var _a = size_hint.inner, left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n                inner = new bbox_1.BBox({ left: left, top: top, right: width - right, bottom: height - bottom });\r\n            }\r\n            this.set_geometry(outer, inner);\r\n        };\r\n        Object.defineProperty(Layoutable.prototype, \"xview\", {\r\n            get: function () {\r\n                return this.bbox.xview;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Layoutable.prototype, \"yview\", {\r\n            get: function () {\r\n                return this.bbox.yview;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Layoutable.prototype.clip_width = function (width) {\r\n            return max(this.sizing.min_width, min(width, this.sizing.max_width));\r\n        };\r\n        Layoutable.prototype.clip_height = function (height) {\r\n            return max(this.sizing.min_height, min(height, this.sizing.max_height));\r\n        };\r\n        Layoutable.prototype.clip_size = function (_a) {\r\n            var width = _a.width, height = _a.height;\r\n            return {\r\n                width: this.clip_width(width),\r\n                height: this.clip_height(height),\r\n            };\r\n        };\r\n        return Layoutable;\r\n    }());\r\n    exports.Layoutable = Layoutable;\r\n    Layoutable.__name__ = \"Layoutable\";\r\n    var LayoutItem = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LayoutItem, _super);\r\n        function LayoutItem() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        /*\r\n        constructor(readonly measure_fn: (viewport: Size) => Size) {\r\n          super()\r\n        }\r\n        protected _measure(viewport: Size): SizeHint {\r\n          return this.measure_fn(viewport)\r\n        }\r\n        protected _measure(viewport: Size): SizeHint {\r\n          return {\r\n            width: viewport.width != Infinity ? viewport.width : this.sizing.min_width,\r\n            height: viewport.height != Infinity ? viewport.height : this.sizing.min_width,\r\n          }\r\n        }\r\n        */\r\n        LayoutItem.prototype._measure = function (viewport) {\r\n            var _a = this.sizing, width_policy = _a.width_policy, height_policy = _a.height_policy;\r\n            var width;\r\n            if (viewport.width == Infinity) {\r\n                width = this.sizing.width != null ? this.sizing.width : 0;\r\n            }\r\n            else {\r\n                switch (width_policy) {\r\n                    case \"fixed\": {\r\n                        width = this.sizing.width != null ? this.sizing.width : 0;\r\n                        break;\r\n                    }\r\n                    case \"min\": {\r\n                        width = this.sizing.width != null ? min(viewport.width, this.sizing.width) : 0;\r\n                        break;\r\n                    }\r\n                    case \"fit\": {\r\n                        width = this.sizing.width != null ? min(viewport.width, this.sizing.width) : viewport.width;\r\n                        break;\r\n                    }\r\n                    case \"max\": {\r\n                        width = this.sizing.width != null ? max(viewport.width, this.sizing.width) : viewport.width;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            var height;\r\n            if (viewport.height == Infinity) {\r\n                height = this.sizing.height != null ? this.sizing.height : 0;\r\n            }\r\n            else {\r\n                switch (height_policy) {\r\n                    case \"fixed\": {\r\n                        height = this.sizing.height != null ? this.sizing.height : 0;\r\n                        break;\r\n                    }\r\n                    case \"min\": {\r\n                        height = this.sizing.height != null ? min(viewport.height, this.sizing.height) : 0;\r\n                        break;\r\n                    }\r\n                    case \"fit\": {\r\n                        height = this.sizing.height != null ? min(viewport.height, this.sizing.height) : viewport.height;\r\n                        break;\r\n                    }\r\n                    case \"max\": {\r\n                        height = this.sizing.height != null ? max(viewport.height, this.sizing.height) : viewport.height;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return { width: width, height: height };\r\n        };\r\n        return LayoutItem;\r\n    }(Layoutable));\r\n    exports.LayoutItem = LayoutItem;\r\n    LayoutItem.__name__ = \"LayoutItem\";\r\n    var ContentLayoutable = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ContentLayoutable, _super);\r\n        function ContentLayoutable() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ContentLayoutable.prototype._measure = function (viewport) {\r\n            var _this = this;\r\n            var content_size = this._content_size();\r\n            var bounds = viewport\r\n                .bounded_to(this.sizing.size)\r\n                .bounded_to(content_size);\r\n            var width = (function () {\r\n                switch (_this.sizing.width_policy) {\r\n                    case \"fixed\":\r\n                        return _this.sizing.width != null ? _this.sizing.width : content_size.width;\r\n                    case \"min\":\r\n                        return content_size.width;\r\n                    case \"fit\":\r\n                        return bounds.width;\r\n                    case \"max\":\r\n                        return Math.max(content_size.width, bounds.width);\r\n                }\r\n            })();\r\n            var height = (function () {\r\n                switch (_this.sizing.height_policy) {\r\n                    case \"fixed\":\r\n                        return _this.sizing.height != null ? _this.sizing.height : content_size.height;\r\n                    case \"min\":\r\n                        return content_size.height;\r\n                    case \"fit\":\r\n                        return bounds.height;\r\n                    case \"max\":\r\n                        return Math.max(content_size.height, bounds.height);\r\n                }\r\n            })();\r\n            return { width: width, height: height };\r\n        };\r\n        return ContentLayoutable;\r\n    }(Layoutable));\r\n    exports.ContentLayoutable = ContentLayoutable;\r\n    ContentLayoutable.__name__ = \"ContentLayoutable\";\r\n}\r\n","/* core\\layout\\alignments.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layoutable_1 = require(329) /* ./layoutable */;\r\n    var bbox_1 = require(194) /* ../util/bbox */;\r\n    var Stack = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Stack, _super);\r\n        function Stack() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.children = [];\r\n            return _this;\r\n        }\r\n        return Stack;\r\n    }(layoutable_1.Layoutable));\r\n    exports.Stack = Stack;\r\n    Stack.__name__ = \"Stack\";\r\n    var HStack = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HStack, _super);\r\n        function HStack() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        HStack.prototype._measure = function (_viewport) {\r\n            var e_1, _a;\r\n            var width = 0;\r\n            var height = 0;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child = _c.value;\r\n                    var size_hint = child.measure({ width: 0, height: 0 });\r\n                    width += size_hint.width;\r\n                    height = Math.max(height, size_hint.height);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return { width: width, height: height };\r\n        };\r\n        HStack.prototype._set_geometry = function (outer, inner) {\r\n            var e_2, _a;\r\n            _super.prototype._set_geometry.call(this, outer, inner);\r\n            var top = outer.top, bottom = outer.bottom;\r\n            var left = outer.left;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child = _c.value;\r\n                    var width = child.measure({ width: 0, height: 0 }).width;\r\n                    child.set_geometry(new bbox_1.BBox({ left: left, width: width, top: top, bottom: bottom }));\r\n                    left += width;\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        return HStack;\r\n    }(Stack));\r\n    exports.HStack = HStack;\r\n    HStack.__name__ = \"HStack\";\r\n    var VStack = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VStack, _super);\r\n        function VStack() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        VStack.prototype._measure = function (_viewport) {\r\n            var e_3, _a;\r\n            var width = 0;\r\n            var height = 0;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child = _c.value;\r\n                    var size_hint = child.measure({ width: 0, height: 0 });\r\n                    width = Math.max(width, size_hint.width);\r\n                    height += size_hint.height;\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return { width: width, height: height };\r\n        };\r\n        VStack.prototype._set_geometry = function (outer, inner) {\r\n            var e_4, _a;\r\n            _super.prototype._set_geometry.call(this, outer, inner);\r\n            var left = outer.left, right = outer.right;\r\n            var top = outer.top;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child = _c.value;\r\n                    var height = child.measure({ width: 0, height: 0 }).height;\r\n                    child.set_geometry(new bbox_1.BBox({ top: top, height: height, left: left, right: right }));\r\n                    top += height;\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n        };\r\n        return VStack;\r\n    }(Stack));\r\n    exports.VStack = VStack;\r\n    VStack.__name__ = \"VStack\";\r\n    var AnchorLayout = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AnchorLayout, _super);\r\n        function AnchorLayout() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.children = [];\r\n            return _this;\r\n        }\r\n        AnchorLayout.prototype._measure = function (viewport) {\r\n            var e_5, _a;\r\n            var width = 0;\r\n            var height = 0;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var layout = _c.value.layout;\r\n                    var size_hint = layout.measure(viewport);\r\n                    width = Math.max(width, size_hint.width);\r\n                    height = Math.max(height, size_hint.height);\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            return { width: width, height: height };\r\n        };\r\n        AnchorLayout.prototype._set_geometry = function (outer, inner) {\r\n            var e_6, _a;\r\n            _super.prototype._set_geometry.call(this, outer, inner);\r\n            try {\r\n                for (var _b = tslib_1.__values(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = _c.value, layout = _d.layout, anchor = _d.anchor, margin = _d.margin;\r\n                    var left = outer.left, right = outer.right, top = outer.top, bottom = outer.bottom, hcenter = outer.hcenter, vcenter = outer.vcenter;\r\n                    var _e = layout.measure(outer), width = _e.width, height = _e.height;\r\n                    var bbox = void 0;\r\n                    switch (anchor) {\r\n                        case 'top_left':\r\n                            bbox = new bbox_1.BBox({ left: left + margin, top: top + margin, width: width, height: height });\r\n                            break;\r\n                        case 'top_center':\r\n                            bbox = new bbox_1.BBox({ hcenter: hcenter, top: top + margin, width: width, height: height });\r\n                            break;\r\n                        case 'top_right':\r\n                            bbox = new bbox_1.BBox({ right: right - margin, top: top + margin, width: width, height: height });\r\n                            break;\r\n                        case 'bottom_right':\r\n                            bbox = new bbox_1.BBox({ right: right - margin, bottom: bottom - margin, width: width, height: height });\r\n                            break;\r\n                        case 'bottom_center':\r\n                            bbox = new bbox_1.BBox({ hcenter: hcenter, bottom: bottom - margin, width: width, height: height });\r\n                            break;\r\n                        case 'bottom_left':\r\n                            bbox = new bbox_1.BBox({ left: left + margin, bottom: bottom - margin, width: width, height: height });\r\n                            break;\r\n                        case 'center_left':\r\n                            bbox = new bbox_1.BBox({ left: left + margin, vcenter: vcenter, width: width, height: height });\r\n                            break;\r\n                        case 'center':\r\n                            bbox = new bbox_1.BBox({ hcenter: hcenter, vcenter: vcenter, width: width, height: height });\r\n                            break;\r\n                        case 'center_right':\r\n                            bbox = new bbox_1.BBox({ right: right - margin, vcenter: vcenter, width: width, height: height });\r\n                            break;\r\n                    }\r\n                    layout.set_geometry(bbox);\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n        };\r\n        return AnchorLayout;\r\n    }(layoutable_1.Layoutable));\r\n    exports.AnchorLayout = AnchorLayout;\r\n    AnchorLayout.__name__ = \"AnchorLayout\";\r\n}\r\n","/* core\\layout\\grid.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(328) /* ./types */;\r\n    var layoutable_1 = require(329) /* ./layoutable */;\r\n    var types_2 = require(123) /* ../util/types */;\r\n    var bbox_1 = require(194) /* ../util/bbox */;\r\n    var array_1 = require(124) /* ../util/array */;\r\n    var max = Math.max, round = Math.round;\r\n    var DefaultMap = /** @class */ (function () {\r\n        function DefaultMap(def) {\r\n            this.def = def;\r\n            this._map = new Map();\r\n        }\r\n        DefaultMap.prototype.get = function (key) {\r\n            var value = this._map.get(key);\r\n            if (value === undefined) {\r\n                value = this.def();\r\n                this._map.set(key, value);\r\n            }\r\n            return value;\r\n        };\r\n        DefaultMap.prototype.apply = function (key, fn) {\r\n            var value = this.get(key);\r\n            this._map.set(key, fn(value));\r\n        };\r\n        return DefaultMap;\r\n    }());\r\n    DefaultMap.__name__ = \"DefaultMap\";\r\n    var Container = /** @class */ (function () {\r\n        function Container() {\r\n            this._items = [];\r\n            this._nrows = 0;\r\n            this._ncols = 0;\r\n        }\r\n        Object.defineProperty(Container.prototype, \"nrows\", {\r\n            get: function () {\r\n                return this._nrows;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Container.prototype, \"ncols\", {\r\n            get: function () {\r\n                return this._ncols;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Container.prototype.add = function (span, data) {\r\n            var r1 = span.r1, c1 = span.c1;\r\n            this._nrows = max(this._nrows, r1 + 1);\r\n            this._ncols = max(this._ncols, c1 + 1);\r\n            this._items.push({ span: span, data: data });\r\n        };\r\n        Container.prototype.at = function (r, c) {\r\n            var selected = this._items.filter(function (_b) {\r\n                var span = _b.span;\r\n                return span.r0 <= r && r <= span.r1 &&\r\n                    span.c0 <= c && c <= span.c1;\r\n            });\r\n            return selected.map(function (_b) {\r\n                var data = _b.data;\r\n                return data;\r\n            });\r\n        };\r\n        Container.prototype.row = function (r) {\r\n            var selected = this._items.filter(function (_b) {\r\n                var span = _b.span;\r\n                return span.r0 <= r && r <= span.r1;\r\n            });\r\n            return selected.map(function (_b) {\r\n                var data = _b.data;\r\n                return data;\r\n            });\r\n        };\r\n        Container.prototype.col = function (c) {\r\n            var selected = this._items.filter(function (_b) {\r\n                var span = _b.span;\r\n                return span.c0 <= c && c <= span.c1;\r\n            });\r\n            return selected.map(function (_b) {\r\n                var data = _b.data;\r\n                return data;\r\n            });\r\n        };\r\n        Container.prototype.foreach = function (fn) {\r\n            var e_1, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this._items), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = _d.value, span = _e.span, data = _e.data;\r\n                    fn(span, data);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        Container.prototype.map = function (fn) {\r\n            var e_2, _b;\r\n            var result = new Container();\r\n            try {\r\n                for (var _c = tslib_1.__values(this._items), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = _d.value, span = _e.span, data = _e.data;\r\n                    result.add(span, fn(span, data));\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        return Container;\r\n    }());\r\n    Container.__name__ = \"Container\";\r\n    var Grid = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Grid, _super);\r\n        function Grid(items) {\r\n            if (items === void 0) {\r\n                items = [];\r\n            }\r\n            var _this = _super.call(this) || this;\r\n            _this.items = items;\r\n            _this.rows = \"auto\";\r\n            _this.cols = \"auto\";\r\n            _this.spacing = 0;\r\n            _this.absolute = false;\r\n            return _this;\r\n        }\r\n        Grid.prototype.is_width_expanding = function () {\r\n            if (_super.prototype.is_width_expanding.call(this))\r\n                return true;\r\n            if (this.sizing.width_policy == \"fixed\")\r\n                return false;\r\n            var cols = this._state.cols;\r\n            return array_1.some(cols, function (col) { return col.policy == \"max\"; });\r\n        };\r\n        Grid.prototype.is_height_expanding = function () {\r\n            if (_super.prototype.is_height_expanding.call(this))\r\n                return true;\r\n            if (this.sizing.height_policy == \"fixed\")\r\n                return false;\r\n            var rows = this._state.rows;\r\n            return array_1.some(rows, function (row) { return row.policy == \"max\"; });\r\n        };\r\n        Grid.prototype._init = function () {\r\n            var e_3, _b;\r\n            var _this = this;\r\n            _super.prototype._init.call(this);\r\n            var items = new Container();\r\n            try {\r\n                for (var _c = tslib_1.__values(this.items), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = _d.value, layout = _e.layout, row = _e.row, col = _e.col, row_span = _e.row_span, col_span = _e.col_span;\r\n                    if (layout.sizing.visible) {\r\n                        var r0 = row;\r\n                        var c0 = col;\r\n                        var r1 = row + (row_span != null ? row_span : 1) - 1;\r\n                        var c1 = col + (col_span != null ? col_span : 1) - 1;\r\n                        items.add({ r0: r0, c0: c0, r1: r1, c1: c1 }, layout);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            var nrows = items.nrows, ncols = items.ncols;\r\n            var rows = new Array(nrows);\r\n            var _loop_1 = function (y) {\r\n                var row = (function () {\r\n                    var sizing = types_2.isPlainObject(_this.rows) ? _this.rows[y] || _this.rows[\"*\"] : _this.rows;\r\n                    if (sizing == null)\r\n                        return { policy: \"auto\" };\r\n                    else if (types_2.isNumber(sizing))\r\n                        return { policy: \"fixed\", height: sizing };\r\n                    else if (types_2.isString(sizing))\r\n                        return { policy: sizing };\r\n                    else\r\n                        return sizing;\r\n                })();\r\n                var align = row.align || \"auto\";\r\n                if (row.policy == \"fixed\")\r\n                    rows[y] = { policy: \"fixed\", height: row.height, align: align };\r\n                else if (row.policy == \"min\")\r\n                    rows[y] = { policy: \"min\", align: align };\r\n                else if (row.policy == \"fit\" || row.policy == \"max\")\r\n                    rows[y] = { policy: row.policy, flex: row.flex || 1, align: align };\r\n                else if (row.policy == \"auto\") {\r\n                    if (array_1.some(items.row(y), function (layout) { return layout.is_height_expanding(); }))\r\n                        rows[y] = { policy: \"max\", flex: 1, align: align };\r\n                    else\r\n                        rows[y] = { policy: \"min\", align: align };\r\n                }\r\n                else\r\n                    throw new Error(\"unrechable\");\r\n            };\r\n            for (var y = 0; y < nrows; y++) {\r\n                _loop_1(y);\r\n            }\r\n            var cols = new Array(ncols);\r\n            var _loop_2 = function (x) {\r\n                var col = (function () {\r\n                    var sizing = types_2.isPlainObject(_this.cols) ? _this.cols[x] || _this.cols[\"*\"] : _this.cols;\r\n                    if (sizing == null)\r\n                        return { policy: \"auto\" };\r\n                    else if (types_2.isNumber(sizing))\r\n                        return { policy: \"fixed\", width: sizing };\r\n                    else if (types_2.isString(sizing))\r\n                        return { policy: sizing };\r\n                    else\r\n                        return sizing;\r\n                })();\r\n                var align = col.align || \"auto\";\r\n                if (col.policy == \"fixed\")\r\n                    cols[x] = { policy: \"fixed\", width: col.width, align: align };\r\n                else if (col.policy == \"min\")\r\n                    cols[x] = { policy: \"min\", align: align };\r\n                else if (col.policy == \"fit\" || col.policy == \"max\")\r\n                    cols[x] = { policy: col.policy, flex: col.flex || 1, align: align };\r\n                else if (col.policy == \"auto\") {\r\n                    if (array_1.some(items.col(x), function (layout) { return layout.is_width_expanding(); }))\r\n                        cols[x] = { policy: \"max\", flex: 1, align: align };\r\n                    else\r\n                        cols[x] = { policy: \"min\", align: align };\r\n                }\r\n                else\r\n                    throw new Error(\"unrechable\");\r\n            };\r\n            for (var x = 0; x < ncols; x++) {\r\n                _loop_2(x);\r\n            }\r\n            var _f = tslib_1.__read(types_2.isNumber(this.spacing) ? [this.spacing, this.spacing] : this.spacing, 2), rspacing = _f[0], cspacing = _f[1];\r\n            this._state = { items: items, nrows: nrows, ncols: ncols, rows: rows, cols: cols, rspacing: rspacing, cspacing: cspacing };\r\n        };\r\n        Grid.prototype._measure_totals = function (row_heights, col_widths) {\r\n            var _b = this._state, nrows = _b.nrows, ncols = _b.ncols, rspacing = _b.rspacing, cspacing = _b.cspacing;\r\n            return {\r\n                height: array_1.sum(row_heights) + (nrows - 1) * rspacing,\r\n                width: array_1.sum(col_widths) + (ncols - 1) * cspacing,\r\n            };\r\n        };\r\n        Grid.prototype._measure_cells = function (cell_viewport) {\r\n            var _b = this._state, items = _b.items, nrows = _b.nrows, ncols = _b.ncols, rows = _b.rows, cols = _b.cols, rspacing = _b.rspacing, cspacing = _b.cspacing;\r\n            var row_heights = new Array(nrows);\r\n            for (var r = 0; r < nrows; r++) {\r\n                var row = rows[r];\r\n                row_heights[r] = row.policy == \"fixed\" ? row.height : 0;\r\n            }\r\n            var col_widths = new Array(ncols);\r\n            for (var c = 0; c < ncols; c++) {\r\n                var col = cols[c];\r\n                col_widths[c] = col.policy == \"fixed\" ? col.width : 0;\r\n            }\r\n            var size_hints = new Container();\r\n            items.foreach(function (span, layout) {\r\n                var e_4, _b, e_5, _c;\r\n                var r0 = span.r0, c0 = span.c0, r1 = span.r1, c1 = span.c1;\r\n                var rspace = (r1 - r0) * rspacing;\r\n                var cspace = (c1 - c0) * cspacing;\r\n                var height = 0;\r\n                for (var r = r0; r <= r1; r++) {\r\n                    height += cell_viewport(r, c0).height;\r\n                }\r\n                height += rspace;\r\n                var width = 0;\r\n                for (var c = c0; c <= c1; c++) {\r\n                    width += cell_viewport(r0, c).width;\r\n                }\r\n                width += cspace;\r\n                var size_hint = layout.measure({ width: width, height: height });\r\n                size_hints.add(span, { layout: layout, size_hint: size_hint });\r\n                var size = new types_1.Sizeable(size_hint).grow_by(layout.sizing.margin);\r\n                size.height -= rspace;\r\n                size.width -= cspace;\r\n                var radjustable = [];\r\n                for (var r = r0; r <= r1; r++) {\r\n                    var row = rows[r];\r\n                    if (row.policy == \"fixed\")\r\n                        size.height -= row.height;\r\n                    else\r\n                        radjustable.push(r);\r\n                }\r\n                if (size.height > 0) {\r\n                    var rheight = round(size.height / radjustable.length);\r\n                    try {\r\n                        for (var radjustable_1 = tslib_1.__values(radjustable), radjustable_1_1 = radjustable_1.next(); !radjustable_1_1.done; radjustable_1_1 = radjustable_1.next()) {\r\n                            var r = radjustable_1_1.value;\r\n                            row_heights[r] = max(row_heights[r], rheight);\r\n                        }\r\n                    }\r\n                    catch (e_4_1) {\r\n                        e_4 = { error: e_4_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (radjustable_1_1 && !radjustable_1_1.done && (_b = radjustable_1.return))\r\n                                _b.call(radjustable_1);\r\n                        }\r\n                        finally {\r\n                            if (e_4)\r\n                                throw e_4.error;\r\n                        }\r\n                    }\r\n                }\r\n                var cadjustable = [];\r\n                for (var c = c0; c <= c1; c++) {\r\n                    var col = cols[c];\r\n                    if (col.policy == \"fixed\")\r\n                        size.width -= col.width;\r\n                    else\r\n                        cadjustable.push(c);\r\n                }\r\n                if (size.width > 0) {\r\n                    var cwidth = round(size.width / cadjustable.length);\r\n                    try {\r\n                        for (var cadjustable_1 = tslib_1.__values(cadjustable), cadjustable_1_1 = cadjustable_1.next(); !cadjustable_1_1.done; cadjustable_1_1 = cadjustable_1.next()) {\r\n                            var c = cadjustable_1_1.value;\r\n                            col_widths[c] = max(col_widths[c], cwidth);\r\n                        }\r\n                    }\r\n                    catch (e_5_1) {\r\n                        e_5 = { error: e_5_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (cadjustable_1_1 && !cadjustable_1_1.done && (_c = cadjustable_1.return))\r\n                                _c.call(cadjustable_1);\r\n                        }\r\n                        finally {\r\n                            if (e_5)\r\n                                throw e_5.error;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            var size = this._measure_totals(row_heights, col_widths);\r\n            return { size: size, row_heights: row_heights, col_widths: col_widths, size_hints: size_hints };\r\n        };\r\n        Grid.prototype._measure_grid = function (viewport) {\r\n            var _b = this._state, nrows = _b.nrows, ncols = _b.ncols, rows = _b.rows, cols = _b.cols, rspacing = _b.rspacing, cspacing = _b.cspacing;\r\n            var preferred = this._measure_cells(function (y, x) {\r\n                var row = rows[y];\r\n                var col = cols[x];\r\n                return {\r\n                    width: col.policy == \"fixed\" ? col.width : Infinity,\r\n                    height: row.policy == \"fixed\" ? row.height : Infinity,\r\n                };\r\n            });\r\n            var available_height;\r\n            if (this.sizing.height_policy == \"fixed\" && this.sizing.height != null)\r\n                available_height = this.sizing.height;\r\n            else if (viewport.height != Infinity && this.is_height_expanding())\r\n                available_height = viewport.height;\r\n            else\r\n                available_height = preferred.size.height;\r\n            var height_flex = 0;\r\n            for (var y = 0; y < nrows; y++) {\r\n                var row = rows[y];\r\n                if (row.policy == \"fit\" || row.policy == \"max\")\r\n                    height_flex += row.flex;\r\n                else\r\n                    available_height -= preferred.row_heights[y];\r\n            }\r\n            available_height -= (nrows - 1) * rspacing;\r\n            if (height_flex != 0 && available_height > 0) {\r\n                for (var y = 0; y < nrows; y++) {\r\n                    var row = rows[y];\r\n                    if (row.policy == \"fit\" || row.policy == \"max\") {\r\n                        var height = round(available_height * (row.flex / height_flex));\r\n                        available_height -= height;\r\n                        preferred.row_heights[y] = height;\r\n                        height_flex -= row.flex;\r\n                    }\r\n                }\r\n            }\r\n            else if (available_height < 0) {\r\n                var nadjustable = 0;\r\n                for (var y = 0; y < nrows; y++) {\r\n                    var row = rows[y];\r\n                    if (row.policy != \"fixed\")\r\n                        nadjustable++;\r\n                }\r\n                var overflow_height = -available_height;\r\n                for (var y = 0; y < nrows; y++) {\r\n                    var row = rows[y];\r\n                    if (row.policy != \"fixed\") {\r\n                        var height = preferred.row_heights[y];\r\n                        var cutoff = round(overflow_height / nadjustable);\r\n                        preferred.row_heights[y] = max(height - cutoff, 0);\r\n                        overflow_height -= cutoff > height ? height : cutoff;\r\n                        nadjustable--;\r\n                    }\r\n                }\r\n            }\r\n            var available_width;\r\n            if (this.sizing.width_policy == \"fixed\" && this.sizing.width != null)\r\n                available_width = this.sizing.width;\r\n            else if (viewport.width != Infinity && this.is_width_expanding())\r\n                available_width = viewport.width;\r\n            else\r\n                available_width = preferred.size.width;\r\n            var width_flex = 0;\r\n            for (var x = 0; x < ncols; x++) {\r\n                var col = cols[x];\r\n                if (col.policy == \"fit\" || col.policy == \"max\")\r\n                    width_flex += col.flex;\r\n                else\r\n                    available_width -= preferred.col_widths[x];\r\n            }\r\n            available_width -= (ncols - 1) * cspacing;\r\n            if (width_flex != 0 && available_width > 0) {\r\n                for (var x = 0; x < ncols; x++) {\r\n                    var col = cols[x];\r\n                    if (col.policy == \"fit\" || col.policy == \"max\") {\r\n                        var width = round(available_width * (col.flex / width_flex));\r\n                        available_width -= width;\r\n                        preferred.col_widths[x] = width;\r\n                        width_flex -= col.flex;\r\n                    }\r\n                }\r\n            }\r\n            else if (available_width < 0) {\r\n                var nadjustable = 0;\r\n                for (var x = 0; x < ncols; x++) {\r\n                    var col = cols[x];\r\n                    if (col.policy != \"fixed\")\r\n                        nadjustable++;\r\n                }\r\n                var overflow_width = -available_width;\r\n                for (var x = 0; x < ncols; x++) {\r\n                    var col = cols[x];\r\n                    if (col.policy != \"fixed\") {\r\n                        var width = preferred.col_widths[x];\r\n                        var cutoff = round(overflow_width / nadjustable);\r\n                        preferred.col_widths[x] = max(width - cutoff, 0);\r\n                        overflow_width -= cutoff > width ? width : cutoff;\r\n                        nadjustable--;\r\n                    }\r\n                }\r\n            }\r\n            var _c = this._measure_cells(function (y, x) {\r\n                return {\r\n                    width: preferred.col_widths[x],\r\n                    height: preferred.row_heights[y],\r\n                };\r\n            }), row_heights = _c.row_heights, col_widths = _c.col_widths, size_hints = _c.size_hints;\r\n            var size = this._measure_totals(row_heights, col_widths);\r\n            return { size: size, row_heights: row_heights, col_widths: col_widths, size_hints: size_hints };\r\n        };\r\n        Grid.prototype._measure = function (viewport) {\r\n            var size = this._measure_grid(viewport).size;\r\n            return size;\r\n        };\r\n        Grid.prototype._set_geometry = function (outer, inner) {\r\n            _super.prototype._set_geometry.call(this, outer, inner);\r\n            var _b = this._state, nrows = _b.nrows, ncols = _b.ncols, rspacing = _b.rspacing, cspacing = _b.cspacing;\r\n            var _c = this._measure_grid(outer), row_heights = _c.row_heights, col_widths = _c.col_widths, size_hints = _c.size_hints;\r\n            var rows = this._state.rows.map(function (row, r) {\r\n                return Object.assign(Object.assign({}, row), { top: 0, height: row_heights[r], get bottom() { return this.top + this.height; } });\r\n            });\r\n            var cols = this._state.cols.map(function (col, c) {\r\n                return Object.assign(Object.assign({}, col), { left: 0, width: col_widths[c], get right() { return this.left + this.width; } });\r\n            });\r\n            var items = size_hints.map(function (_, item) {\r\n                return Object.assign(Object.assign({}, item), { outer: new bbox_1.BBox(), inner: new bbox_1.BBox() });\r\n            });\r\n            for (var r = 0, top = !this.absolute ? 0 : outer.top; r < nrows; r++) {\r\n                var row = rows[r];\r\n                row.top = top;\r\n                top += row.height + rspacing;\r\n            }\r\n            for (var c = 0, left = !this.absolute ? 0 : outer.left; c < ncols; c++) {\r\n                var col = cols[c];\r\n                col.left = left;\r\n                left += col.width + cspacing;\r\n            }\r\n            function span_width(c0, c1) {\r\n                var width = (c1 - c0) * cspacing;\r\n                for (var c = c0; c <= c1; c++) {\r\n                    width += cols[c].width;\r\n                }\r\n                return width;\r\n            }\r\n            function span_height(r0, r1) {\r\n                var height = (r1 - r0) * rspacing;\r\n                for (var r = r0; r <= r1; r++) {\r\n                    height += rows[r].height;\r\n                }\r\n                return height;\r\n            }\r\n            items.foreach(function (_b, item) {\r\n                var r0 = _b.r0, c0 = _b.c0, r1 = _b.r1, c1 = _b.c1;\r\n                var layout = item.layout, size_hint = item.size_hint;\r\n                var sizing = layout.sizing;\r\n                var width = size_hint.width, height = size_hint.height;\r\n                var span = {\r\n                    width: span_width(c0, c1),\r\n                    height: span_height(r0, r1),\r\n                };\r\n                var halign = c0 == c1 && cols[c0].align != \"auto\" ? cols[c0].align : sizing.halign;\r\n                var valign = r0 == r1 && rows[r0].align != \"auto\" ? rows[r0].align : sizing.valign;\r\n                var left = cols[c0].left;\r\n                if (halign == \"start\")\r\n                    left += sizing.margin.left;\r\n                else if (halign == \"center\")\r\n                    left += round((span.width - width) / 2);\r\n                else if (halign == \"end\")\r\n                    left += span.width - sizing.margin.right - width;\r\n                var top = rows[r0].top;\r\n                if (valign == \"start\")\r\n                    top += sizing.margin.top;\r\n                else if (valign == \"center\")\r\n                    top += round((span.height - height) / 2);\r\n                else if (valign == \"end\")\r\n                    top += span.height - sizing.margin.bottom - height;\r\n                item.outer = new bbox_1.BBox({ left: left, top: top, width: width, height: height });\r\n            });\r\n            var row_aligns = rows.map(function () {\r\n                return {\r\n                    start: new DefaultMap(function () { return 0; }),\r\n                    end: new DefaultMap(function () { return 0; }),\r\n                };\r\n            });\r\n            var col_aligns = cols.map(function () {\r\n                return {\r\n                    start: new DefaultMap(function () { return 0; }),\r\n                    end: new DefaultMap(function () { return 0; }),\r\n                };\r\n            });\r\n            items.foreach(function (_b, _c) {\r\n                var r0 = _b.r0, c0 = _b.c0, r1 = _b.r1, c1 = _b.c1;\r\n                var size_hint = _c.size_hint, outer = _c.outer;\r\n                var inner = size_hint.inner;\r\n                if (inner != null) {\r\n                    row_aligns[r0].start.apply(outer.top, function (v) { return max(v, inner.top); });\r\n                    row_aligns[r1].end.apply(rows[r1].bottom - outer.bottom, function (v) { return max(v, inner.bottom); });\r\n                    col_aligns[c0].start.apply(outer.left, function (v) { return max(v, inner.left); });\r\n                    col_aligns[c1].end.apply(cols[c1].right - outer.right, function (v) { return max(v, inner.right); });\r\n                }\r\n            });\r\n            items.foreach(function (_b, item) {\r\n                var r0 = _b.r0, c0 = _b.c0, r1 = _b.r1, c1 = _b.c1;\r\n                var size_hint = item.size_hint, outer = item.outer;\r\n                function inner_bbox(_b) {\r\n                    var left = _b.left, right = _b.right, top = _b.top, bottom = _b.bottom;\r\n                    var width = outer.width - left - right;\r\n                    var height = outer.height - top - bottom;\r\n                    return new bbox_1.BBox({ left: left, top: top, width: width, height: height });\r\n                }\r\n                if (size_hint.inner != null) {\r\n                    var inner_1 = inner_bbox(size_hint.inner);\r\n                    if (size_hint.align !== false) {\r\n                        var top = row_aligns[r0].start.get(outer.top);\r\n                        var bottom = row_aligns[r1].end.get(rows[r1].bottom - outer.bottom);\r\n                        var left = col_aligns[c0].start.get(outer.left);\r\n                        var right = col_aligns[c1].end.get(cols[c1].right - outer.right);\r\n                        try {\r\n                            inner_1 = inner_bbox({ top: top, bottom: bottom, left: left, right: right });\r\n                        }\r\n                        catch (_a) { }\r\n                    }\r\n                    item.inner = inner_1;\r\n                }\r\n                else\r\n                    item.inner = outer;\r\n            });\r\n            items.foreach(function (_, _b) {\r\n                var layout = _b.layout, outer = _b.outer, inner = _b.inner;\r\n                layout.set_geometry(outer, inner);\r\n            });\r\n        };\r\n        return Grid;\r\n    }(layoutable_1.Layoutable));\r\n    exports.Grid = Grid;\r\n    Grid.__name__ = \"Grid\";\r\n    var Row = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Row, _super);\r\n        function Row(items) {\r\n            var _this = _super.call(this) || this;\r\n            _this.items = items.map(function (item, i) { return ({ layout: item, row: 0, col: i }); });\r\n            _this.rows = \"fit\";\r\n            return _this;\r\n        }\r\n        return Row;\r\n    }(Grid));\r\n    exports.Row = Row;\r\n    Row.__name__ = \"Row\";\r\n    var Column = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Column, _super);\r\n        function Column(items) {\r\n            var _this = _super.call(this) || this;\r\n            _this.items = items.map(function (item, i) { return ({ layout: item, row: i, col: 0 }); });\r\n            _this.cols = \"fit\";\r\n            return _this;\r\n        }\r\n        return Column;\r\n    }(Grid));\r\n    exports.Column = Column;\r\n    Column.__name__ = \"Column\";\r\n}\r\n","/* core\\layout\\html.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layoutable_1 = require(329) /* ./layoutable */;\r\n    var types_1 = require(328) /* ./types */;\r\n    var dom_1 = require(187) /* ../dom */;\r\n    var ContentBox = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ContentBox, _super);\r\n        function ContentBox(el) {\r\n            var _this = _super.call(this) || this;\r\n            _this.content_size = dom_1.unsized(el, function () { return new types_1.Sizeable(dom_1.size(el)); });\r\n            return _this;\r\n        }\r\n        ContentBox.prototype._content_size = function () {\r\n            return this.content_size;\r\n        };\r\n        return ContentBox;\r\n    }(layoutable_1.ContentLayoutable));\r\n    exports.ContentBox = ContentBox;\r\n    ContentBox.__name__ = \"ContentBox\";\r\n    var VariadicBox = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VariadicBox, _super);\r\n        function VariadicBox(el) {\r\n            var _this = _super.call(this) || this;\r\n            _this.el = el;\r\n            return _this;\r\n        }\r\n        VariadicBox.prototype._measure = function (viewport) {\r\n            var _this = this;\r\n            var bounded = new types_1.Sizeable(viewport).bounded_to(this.sizing.size);\r\n            return dom_1.sized(this.el, bounded, function () {\r\n                var content = new types_1.Sizeable(dom_1.content_size(_this.el));\r\n                var _a = dom_1.extents(_this.el), border = _a.border, padding = _a.padding;\r\n                return content.grow_by(border).grow_by(padding).map(Math.ceil);\r\n            });\r\n        };\r\n        return VariadicBox;\r\n    }(layoutable_1.Layoutable));\r\n    exports.VariadicBox = VariadicBox;\r\n    VariadicBox.__name__ = \"VariadicBox\";\r\n    var CachedVariadicBox = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CachedVariadicBox, _super);\r\n        function CachedVariadicBox(el) {\r\n            var _this = _super.call(this, el) || this;\r\n            _this._cache = new Map();\r\n            return _this;\r\n        }\r\n        CachedVariadicBox.prototype._measure = function (viewport) {\r\n            var width = viewport.width, height = viewport.height;\r\n            var key = width + \",\" + height;\r\n            var size_hint = this._cache.get(key);\r\n            if (size_hint == null) {\r\n                size_hint = _super.prototype._measure.call(this, viewport);\r\n                this._cache.set(key, size_hint);\r\n            }\r\n            return size_hint;\r\n        };\r\n        CachedVariadicBox.prototype.invalidate_cache = function () {\r\n            this._cache.clear();\r\n        };\r\n        return CachedVariadicBox;\r\n    }(VariadicBox));\r\n    exports.CachedVariadicBox = CachedVariadicBox;\r\n    CachedVariadicBox.__name__ = \"CachedVariadicBox\";\r\n}\r\n","/* models\\expressions\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var expression_1 = require(334) /* ./expression */;\r\n    exports.Expression = expression_1.Expression;\r\n    var stack_1 = require(335) /* ./stack */;\r\n    exports.Stack = stack_1.Stack;\r\n    var cumsum_1 = require(336) /* ./cumsum */;\r\n    exports.CumSum = cumsum_1.CumSum;\r\n}\r\n","/* models\\expressions\\expression.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var Expression = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Expression, _super);\r\n        function Expression(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Expression.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._connected = new Set();\r\n            this._result = new Map();\r\n        };\r\n        Expression.prototype.v_compute = function (source) {\r\n            var _this = this;\r\n            if (!this._connected.has(source)) {\r\n                this.connect(source.change, function () { return _this._result.delete(source); });\r\n                this.connect(source.patching, function () { return _this._result.delete(source); });\r\n                this.connect(source.streaming, function () { return _this._result.delete(source); });\r\n                this._connected.add(source);\r\n            }\r\n            var result = this._result.get(source);\r\n            if (result == null) {\r\n                result = this._v_compute(source);\r\n                this._result.set(source, result);\r\n            }\r\n            return result;\r\n        };\r\n        return Expression;\r\n    }(model_1.Model));\r\n    exports.Expression = Expression;\r\n    Expression.__name__ = \"Expression\";\r\n}\r\n","/* models\\expressions\\stack.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var expression_1 = require(334) /* ./expression */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var Stack = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Stack, _super);\r\n        function Stack(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Stack.init_Stack = function () {\r\n            this.define({\r\n                fields: [p.Array, []],\r\n            });\r\n        };\r\n        Stack.prototype._v_compute = function (source) {\r\n            var e_1, _b;\r\n            var _a;\r\n            var n = (_a = source.get_length()) !== null && _a !== void 0 ? _a : 0;\r\n            var result = new types_1.NumberArray(n);\r\n            try {\r\n                for (var _c = tslib_1.__values(this.fields), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var f = _d.value;\r\n                    var column = source.data[f];\r\n                    if (column != null) {\r\n                        for (var i = 0, k = Math.min(n, column.length); i < k; i++) {\r\n                            result[i] += column[i];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        return Stack;\r\n    }(expression_1.Expression));\r\n    exports.Stack = Stack;\r\n    Stack.__name__ = \"Stack\";\r\n    Stack.init_Stack();\r\n}\r\n","/* models\\expressions\\cumsum.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var expression_1 = require(334) /* ./expression */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var CumSum = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CumSum, _super);\r\n        function CumSum(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CumSum.init_CumSum = function () {\r\n            this.define({\r\n                field: [p.String],\r\n                include_zero: [p.Boolean, false],\r\n            });\r\n        };\r\n        CumSum.prototype._v_compute = function (source) {\r\n            var result = new types_1.NumberArray(source.get_length() || 0);\r\n            var col = source.data[this.field];\r\n            var offset = this.include_zero ? 1 : 0;\r\n            result[0] = this.include_zero ? 0 : col[0];\r\n            for (var i = 1; i < result.length; i++) {\r\n                result[i] = result[i - 1] + col[i - offset];\r\n            }\r\n            return result;\r\n        };\r\n        return CumSum;\r\n    }(expression_1.Expression));\r\n    exports.CumSum = CumSum;\r\n    CumSum.__name__ = \"CumSum\";\r\n    CumSum.init_CumSum();\r\n}\r\n","/* models\\filters\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var boolean_filter_1 = require(338) /* ./boolean_filter */;\r\n    exports.BooleanFilter = boolean_filter_1.BooleanFilter;\r\n    var customjs_filter_1 = require(340) /* ./customjs_filter */;\r\n    exports.CustomJSFilter = customjs_filter_1.CustomJSFilter;\r\n    var filter_1 = require(339) /* ./filter */;\r\n    exports.Filter = filter_1.Filter;\r\n    var group_filter_1 = require(341) /* ./group_filter */;\r\n    exports.GroupFilter = group_filter_1.GroupFilter;\r\n    var index_filter_1 = require(342) /* ./index_filter */;\r\n    exports.IndexFilter = index_filter_1.IndexFilter;\r\n}\r\n","/* models\\filters\\boolean_filter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var filter_1 = require(339) /* ./filter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var BooleanFilter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BooleanFilter, _super);\r\n        function BooleanFilter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        BooleanFilter.init_BooleanFilter = function () {\r\n            this.define({\r\n                booleans: [p.Array, null],\r\n            });\r\n        };\r\n        BooleanFilter.prototype.compute_indices = function (source) {\r\n            var size = source.length;\r\n            var booleans = this.booleans;\r\n            if (booleans == null) {\r\n                return types_1.Indices.all_set(size);\r\n            }\r\n            else {\r\n                return types_1.Indices.from_booleans(size, booleans);\r\n            }\r\n        };\r\n        return BooleanFilter;\r\n    }(filter_1.Filter));\r\n    exports.BooleanFilter = BooleanFilter;\r\n    BooleanFilter.__name__ = \"BooleanFilter\";\r\n    BooleanFilter.init_BooleanFilter();\r\n}\r\n","/* models\\filters\\filter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var Filter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Filter, _super);\r\n        function Filter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return Filter;\r\n    }(model_1.Model));\r\n    exports.Filter = Filter;\r\n    Filter.__name__ = \"Filter\";\r\n}\r\n","/* models\\filters\\customjs_filter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var filter_1 = require(339) /* ./filter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var types_2 = require(123) /* ../../core/util/types */;\r\n    var string_1 = require(144) /* ../../core/util/string */;\r\n    var CustomJSFilter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CustomJSFilter, _super);\r\n        function CustomJSFilter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CustomJSFilter.init_CustomJSFilter = function () {\r\n            this.define({\r\n                args: [p.Any, {}],\r\n                code: [p.String, ''],\r\n            });\r\n        };\r\n        Object.defineProperty(CustomJSFilter.prototype, \"names\", {\r\n            get: function () {\r\n                return object_1.keys(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CustomJSFilter.prototype, \"values\", {\r\n            get: function () {\r\n                return object_1.values(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CustomJSFilter.prototype, \"func\", {\r\n            get: function () {\r\n                var code = string_1.use_strict(this.code);\r\n                return new (Function.bind.apply(Function, tslib_1.__spread([void 0], this.names, [\"source\", code])))();\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CustomJSFilter.prototype.compute_indices = function (source) {\r\n            var size = source.length;\r\n            var filter = this.func.apply(this, tslib_1.__spread(this.values, [source]));\r\n            if (filter == null)\r\n                return types_1.Indices.all_set(size);\r\n            else if (types_2.isArrayOf(filter, types_2.isInteger))\r\n                return types_1.Indices.from_indices(size, filter);\r\n            else if (types_2.isArrayOf(filter, types_2.isBoolean))\r\n                return types_1.Indices.from_booleans(size, filter);\r\n            else\r\n                throw new Error(\"expect an array of integers or booleans, or null, got \" + filter);\r\n        };\r\n        return CustomJSFilter;\r\n    }(filter_1.Filter));\r\n    exports.CustomJSFilter = CustomJSFilter;\r\n    CustomJSFilter.__name__ = \"CustomJSFilter\";\r\n    CustomJSFilter.init_CustomJSFilter();\r\n}\r\n","/* models\\filters\\group_filter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var filter_1 = require(339) /* ./filter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var GroupFilter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GroupFilter, _super);\r\n        function GroupFilter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GroupFilter.init_GroupFilter = function () {\r\n            this.define({\r\n                column_name: [p.String],\r\n                group: [p.String],\r\n            });\r\n        };\r\n        GroupFilter.prototype.compute_indices = function (source) {\r\n            var column = source.get_column(this.column_name);\r\n            if (column == null) {\r\n                logging_1.logger.warn(this + \": groupby column '\" + this.column_name + \"' not found in the data source\");\r\n                return new types_1.Indices(source.length, 1);\r\n            }\r\n            else {\r\n                var indices = new types_1.Indices(source.length);\r\n                for (var i = 0; i < indices.size; i++) {\r\n                    if (column[i] === this.group)\r\n                        indices.set(i);\r\n                }\r\n                return indices;\r\n            }\r\n        };\r\n        return GroupFilter;\r\n    }(filter_1.Filter));\r\n    exports.GroupFilter = GroupFilter;\r\n    GroupFilter.__name__ = \"GroupFilter\";\r\n    GroupFilter.init_GroupFilter();\r\n}\r\n","/* models\\filters\\index_filter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var filter_1 = require(339) /* ./filter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var IndexFilter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(IndexFilter, _super);\r\n        function IndexFilter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        IndexFilter.init_IndexFilter = function () {\r\n            this.define({\r\n                indices: [p.Array, null],\r\n            });\r\n        };\r\n        IndexFilter.prototype.compute_indices = function (source) {\r\n            var size = source.length;\r\n            var indices = this.indices;\r\n            if (indices == null) {\r\n                return types_1.Indices.all_set(size);\r\n            }\r\n            else {\r\n                return types_1.Indices.from_indices(size, indices);\r\n            }\r\n        };\r\n        return IndexFilter;\r\n    }(filter_1.Filter));\r\n    exports.IndexFilter = IndexFilter;\r\n    IndexFilter.__name__ = \"IndexFilter\";\r\n    IndexFilter.init_IndexFilter();\r\n}\r\n","/* models\\formatters\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var basic_tick_formatter_1 = require(245) /* ./basic_tick_formatter */;\r\n    exports.BasicTickFormatter = basic_tick_formatter_1.BasicTickFormatter;\r\n    var categorical_tick_formatter_1 = require(296) /* ./categorical_tick_formatter */;\r\n    exports.CategoricalTickFormatter = categorical_tick_formatter_1.CategoricalTickFormatter;\r\n    var datetime_tick_formatter_1 = require(300) /* ./datetime_tick_formatter */;\r\n    exports.DatetimeTickFormatter = datetime_tick_formatter_1.DatetimeTickFormatter;\r\n    var func_tick_formatter_1 = require(344) /* ./func_tick_formatter */;\r\n    exports.FuncTickFormatter = func_tick_formatter_1.FuncTickFormatter;\r\n    var log_tick_formatter_1 = require(313) /* ./log_tick_formatter */;\r\n    exports.LogTickFormatter = log_tick_formatter_1.LogTickFormatter;\r\n    var mercator_tick_formatter_1 = require(316) /* ./mercator_tick_formatter */;\r\n    exports.MercatorTickFormatter = mercator_tick_formatter_1.MercatorTickFormatter;\r\n    var numeral_tick_formatter_1 = require(345) /* ./numeral_tick_formatter */;\r\n    exports.NumeralTickFormatter = numeral_tick_formatter_1.NumeralTickFormatter;\r\n    var printf_tick_formatter_1 = require(346) /* ./printf_tick_formatter */;\r\n    exports.PrintfTickFormatter = printf_tick_formatter_1.PrintfTickFormatter;\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    exports.TickFormatter = tick_formatter_1.TickFormatter;\r\n}\r\n","/* models\\formatters\\func_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var string_1 = require(144) /* ../../core/util/string */;\r\n    var FuncTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FuncTickFormatter, _super);\r\n        function FuncTickFormatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        FuncTickFormatter.init_FuncTickFormatter = function () {\r\n            this.define({\r\n                args: [p.Any, {}],\r\n                code: [p.String, ''],\r\n            });\r\n        };\r\n        Object.defineProperty(FuncTickFormatter.prototype, \"names\", {\r\n            get: function () {\r\n                return object_1.keys(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(FuncTickFormatter.prototype, \"values\", {\r\n            get: function () {\r\n                return object_1.values(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /*protected*/ FuncTickFormatter.prototype._make_func = function () {\r\n            var code = string_1.use_strict(this.code);\r\n            return new (Function.bind.apply(Function, tslib_1.__spread([void 0, \"tick\", \"index\", \"ticks\"], this.names, [code])))();\r\n        };\r\n        FuncTickFormatter.prototype.doFormat = function (ticks, _opts) {\r\n            var _this = this;\r\n            var cache = {};\r\n            var func = this._make_func().bind(cache);\r\n            return ticks.map(function (tick, index, ticks) { return func.apply(void 0, tslib_1.__spread([tick, index, ticks], _this.values)); });\r\n        };\r\n        return FuncTickFormatter;\r\n    }(tick_formatter_1.TickFormatter));\r\n    exports.FuncTickFormatter = FuncTickFormatter;\r\n    FuncTickFormatter.__name__ = \"FuncTickFormatter\";\r\n    FuncTickFormatter.init_FuncTickFormatter();\r\n}\r\n","/* models\\formatters\\numeral_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var Numbro = tslib_1.__importStar(require(303) /* @bokeh/numbro */);\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var NumeralTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(NumeralTickFormatter, _super);\r\n        function NumeralTickFormatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        NumeralTickFormatter.init_NumeralTickFormatter = function () {\r\n            this.define({\r\n                // TODO (bev) all of these could be tightened up\r\n                format: [p.String, '0,0'],\r\n                language: [p.String, 'en'],\r\n                rounding: [p.RoundingFunction, 'round'],\r\n            });\r\n        };\r\n        Object.defineProperty(NumeralTickFormatter.prototype, \"_rounding_fn\", {\r\n            get: function () {\r\n                switch (this.rounding) {\r\n                    case \"round\":\r\n                    case \"nearest\":\r\n                        return Math.round;\r\n                    case \"floor\":\r\n                    case \"rounddown\":\r\n                        return Math.floor;\r\n                    case \"ceil\":\r\n                    case \"roundup\":\r\n                        return Math.ceil;\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        NumeralTickFormatter.prototype.doFormat = function (ticks, _opts) {\r\n            var _a = this, format = _a.format, language = _a.language, _rounding_fn = _a._rounding_fn;\r\n            return ticks.map(function (tick) { return Numbro.format(tick, format, language, _rounding_fn); });\r\n        };\r\n        return NumeralTickFormatter;\r\n    }(tick_formatter_1.TickFormatter));\r\n    exports.NumeralTickFormatter = NumeralTickFormatter;\r\n    NumeralTickFormatter.__name__ = \"NumeralTickFormatter\";\r\n    NumeralTickFormatter.init_NumeralTickFormatter();\r\n}\r\n","/* models\\formatters\\printf_tick_formatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var tick_formatter_1 = require(246) /* ./tick_formatter */;\r\n    var templating_1 = require(302) /* ../../core/util/templating */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var PrintfTickFormatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PrintfTickFormatter, _super);\r\n        function PrintfTickFormatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        PrintfTickFormatter.init_PrintfTickFormatter = function () {\r\n            this.define({\r\n                format: [p.String, '%s'],\r\n            });\r\n        };\r\n        PrintfTickFormatter.prototype.doFormat = function (ticks, _opts) {\r\n            var _this = this;\r\n            return ticks.map(function (tick) { return templating_1.sprintf(_this.format, tick); });\r\n        };\r\n        return PrintfTickFormatter;\r\n    }(tick_formatter_1.TickFormatter));\r\n    exports.PrintfTickFormatter = PrintfTickFormatter;\r\n    PrintfTickFormatter.__name__ = \"PrintfTickFormatter\";\r\n    PrintfTickFormatter.init_PrintfTickFormatter();\r\n}\r\n","/* models\\glyphs\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var annular_wedge_1 = require(348) /* ./annular_wedge */;\r\n    exports.AnnularWedge = annular_wedge_1.AnnularWedge;\r\n    var annulus_1 = require(349) /* ./annulus */;\r\n    exports.Annulus = annulus_1.Annulus;\r\n    var arc_1 = require(350) /* ./arc */;\r\n    exports.Arc = arc_1.Arc;\r\n    var bezier_1 = require(351) /* ./bezier */;\r\n    exports.Bezier = bezier_1.Bezier;\r\n    var circle_1 = require(352) /* ./circle */;\r\n    exports.Circle = circle_1.Circle;\r\n    var center_rotatable_1 = require(356) /* ./center_rotatable */;\r\n    exports.CenterRotatable = center_rotatable_1.CenterRotatable;\r\n    var ellipse_1 = require(357) /* ./ellipse */;\r\n    exports.Ellipse = ellipse_1.Ellipse;\r\n    var ellipse_oval_1 = require(358) /* ./ellipse_oval */;\r\n    exports.EllipseOval = ellipse_oval_1.EllipseOval;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    exports.Glyph = glyph_1.Glyph;\r\n    var harea_1 = require(226) /* ./harea */;\r\n    exports.HArea = harea_1.HArea;\r\n    var hbar_1 = require(359) /* ./hbar */;\r\n    exports.HBar = hbar_1.HBar;\r\n    var hex_tile_1 = require(361) /* ./hex_tile */;\r\n    exports.HexTile = hex_tile_1.HexTile;\r\n    var image_1 = require(362) /* ./image */;\r\n    exports.Image = image_1.Image;\r\n    var image_rgba_1 = require(364) /* ./image_rgba */;\r\n    exports.ImageRGBA = image_rgba_1.ImageRGBA;\r\n    var image_url_1 = require(365) /* ./image_url */;\r\n    exports.ImageURL = image_url_1.ImageURL;\r\n    var line_1 = require(207) /* ./line */;\r\n    exports.Line = line_1.Line;\r\n    var multi_line_1 = require(367) /* ./multi_line */;\r\n    exports.MultiLine = multi_line_1.MultiLine;\r\n    var multi_polygons_1 = require(368) /* ./multi_polygons */;\r\n    exports.MultiPolygons = multi_polygons_1.MultiPolygons;\r\n    var oval_1 = require(369) /* ./oval */;\r\n    exports.Oval = oval_1.Oval;\r\n    var patch_1 = require(225) /* ./patch */;\r\n    exports.Patch = patch_1.Patch;\r\n    var patches_1 = require(370) /* ./patches */;\r\n    exports.Patches = patches_1.Patches;\r\n    var quad_1 = require(371) /* ./quad */;\r\n    exports.Quad = quad_1.Quad;\r\n    var quadratic_1 = require(372) /* ./quadratic */;\r\n    exports.Quadratic = quadratic_1.Quadratic;\r\n    var ray_1 = require(373) /* ./ray */;\r\n    exports.Ray = ray_1.Ray;\r\n    var rect_1 = require(374) /* ./rect */;\r\n    exports.Rect = rect_1.Rect;\r\n    var segment_1 = require(375) /* ./segment */;\r\n    exports.Segment = segment_1.Segment;\r\n    var step_1 = require(376) /* ./step */;\r\n    exports.Step = step_1.Step;\r\n    var text_1 = require(377) /* ./text */;\r\n    exports.Text = text_1.Text;\r\n    var varea_1 = require(228) /* ./varea */;\r\n    exports.VArea = varea_1.VArea;\r\n    var vbar_1 = require(378) /* ./vbar */;\r\n    exports.VBar = vbar_1.VBar;\r\n    var wedge_1 = require(379) /* ./wedge */;\r\n    exports.Wedge = wedge_1.Wedge;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    exports.XYGlyph = xy_glyph_1.XYGlyph;\r\n}\r\n","/* models\\glyphs\\annular_wedge.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var math_1 = require(125) /* ../../core/util/math */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var AnnularWedgeView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AnnularWedgeView, _super);\r\n        function AnnularWedgeView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        AnnularWedgeView.prototype._map_data = function () {\r\n            if (this.model.properties.inner_radius.units == \"data\")\r\n                this.sinner_radius = this.sdist(this.renderer.xscale, this._x, this._inner_radius);\r\n            else\r\n                this.sinner_radius = this._inner_radius;\r\n            if (this.model.properties.outer_radius.units == \"data\")\r\n                this.souter_radius = this.sdist(this.renderer.xscale, this._x, this._outer_radius);\r\n            else\r\n                this.souter_radius = this._outer_radius;\r\n            this._angle = new types_1.NumberArray(this._start_angle.length);\r\n            for (var i = 0, end = this._start_angle.length; i < end; i++) {\r\n                this._angle[i] = this._end_angle[i] - this._start_angle[i];\r\n            }\r\n        };\r\n        AnnularWedgeView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, _start_angle = _a._start_angle, _angle = _a._angle, sinner_radius = _a.sinner_radius, souter_radius = _a.souter_radius;\r\n            var direction = this.model.properties.direction.value();\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + sinner_radius[i] + souter_radius[i] + _start_angle[i] + _angle[i]))\r\n                        continue;\r\n                    ctx.translate(sx[i], sy[i]);\r\n                    ctx.rotate(_start_angle[i]);\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(souter_radius[i], 0);\r\n                    ctx.arc(0, 0, souter_radius[i], 0, _angle[i], direction);\r\n                    ctx.rotate(_angle[i]);\r\n                    ctx.lineTo(sinner_radius[i], 0);\r\n                    ctx.arc(0, 0, sinner_radius[i], 0, -_angle[i], !direction);\r\n                    ctx.closePath();\r\n                    ctx.rotate(-_angle[i] - _start_angle[i]);\r\n                    ctx.translate(-sx[i], -sy[i]);\r\n                    if (this.visuals.fill.doit) {\r\n                        this.visuals.fill.set_vectorize(ctx, i);\r\n                        ctx.fill();\r\n                    }\r\n                    if (this.visuals.line.doit) {\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        AnnularWedgeView.prototype._hit_point = function (geometry) {\r\n            var _a, _b, e_2, _c, e_3, _d;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            // check radius first\r\n            var x0, y0;\r\n            var x1, y1;\r\n            if (this.model.properties.outer_radius.units == \"data\") {\r\n                x0 = x - this.max_outer_radius;\r\n                x1 = x + this.max_outer_radius;\r\n                y0 = y - this.max_outer_radius;\r\n                y1 = y + this.max_outer_radius;\r\n            }\r\n            else {\r\n                var sx0 = sx - this.max_outer_radius;\r\n                var sx1 = sx + this.max_outer_radius;\r\n                _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n                var sy0 = sy - this.max_outer_radius;\r\n                var sy1 = sy + this.max_outer_radius;\r\n                _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            }\r\n            var candidates = [];\r\n            try {\r\n                for (var _e = tslib_1.__values(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 })), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var i = _f.value;\r\n                    var or2 = Math.pow(this.souter_radius[i], 2);\r\n                    var ir2 = Math.pow(this.sinner_radius[i], 2);\r\n                    var _g = tslib_1.__read(this.renderer.xscale.r_compute(x, this._x[i]), 2), sx0 = _g[0], sx1 = _g[1];\r\n                    var _h = tslib_1.__read(this.renderer.yscale.r_compute(y, this._y[i]), 2), sy0 = _h[0], sy1 = _h[1];\r\n                    var dist = Math.pow((sx0 - sx1), 2) + Math.pow((sy0 - sy1), 2);\r\n                    if (dist <= or2 && dist >= ir2)\r\n                        candidates.push(i);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_c = _e.return))\r\n                        _c.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            var direction = this.model.properties.direction.value();\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var i = candidates_1_1.value;\r\n                    // NOTE: minus the angle because JS uses non-mathy convention for angles\r\n                    var angle = Math.atan2(sy - this.sy[i], sx - this.sx[i]);\r\n                    if (math_1.angle_between(-angle, -this._start_angle[i], -this._end_angle[i], direction)) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_d = candidates_1.return))\r\n                        _d.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        AnnularWedgeView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        AnnularWedgeView.prototype.scenterxy = function (i) {\r\n            var r = (this.sinner_radius[i] + this.souter_radius[i]) / 2;\r\n            var a = (this._start_angle[i] + this._end_angle[i]) / 2;\r\n            var scx = this.sx[i] + r * Math.cos(a);\r\n            var scy = this.sy[i] + r * Math.sin(a);\r\n            return [scx, scy];\r\n        };\r\n        return AnnularWedgeView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.AnnularWedgeView = AnnularWedgeView;\r\n    AnnularWedgeView.__name__ = \"AnnularWedgeView\";\r\n    var AnnularWedge = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AnnularWedge, _super);\r\n        function AnnularWedge(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        AnnularWedge.init_AnnularWedge = function () {\r\n            this.prototype.default_view = AnnularWedgeView;\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.define({\r\n                direction: [p.Direction, 'anticlock'],\r\n                inner_radius: [p.DistanceSpec],\r\n                outer_radius: [p.DistanceSpec],\r\n                start_angle: [p.AngleSpec],\r\n                end_angle: [p.AngleSpec],\r\n            });\r\n        };\r\n        return AnnularWedge;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.AnnularWedge = AnnularWedge;\r\n    AnnularWedge.__name__ = \"AnnularWedge\";\r\n    AnnularWedge.init_AnnularWedge();\r\n}\r\n","/* models\\glyphs\\annulus.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var compat_1 = require(147) /* ../../core/util/compat */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var AnnulusView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AnnulusView, _super);\r\n        function AnnulusView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        AnnulusView.prototype._map_data = function () {\r\n            if (this.model.properties.inner_radius.units == \"data\")\r\n                this.sinner_radius = this.sdist(this.renderer.xscale, this._x, this._inner_radius);\r\n            else\r\n                this.sinner_radius = this._inner_radius;\r\n            if (this.model.properties.outer_radius.units == \"data\")\r\n                this.souter_radius = this.sdist(this.renderer.xscale, this._x, this._outer_radius);\r\n            else\r\n                this.souter_radius = this._outer_radius;\r\n        };\r\n        AnnulusView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b, e_2, _c;\r\n            var sx = _a.sx, sy = _a.sy, sinner_radius = _a.sinner_radius, souter_radius = _a.souter_radius;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + sinner_radius[i] + souter_radius[i]))\r\n                        continue;\r\n                    // Because this visual has a whole in it, it proved \"challenging\"\r\n                    // for some browsers to render if drawn in one go --- i.e. it did not\r\n                    // work on IE. If we render in two parts (upper and lower part),\r\n                    // it is unambiguous what part should be filled. The line is\r\n                    // better drawn in one go though, otherwise the part where the pieces\r\n                    // meet will not be fully closed due to aa.\r\n                    if (this.visuals.fill.doit) {\r\n                        this.visuals.fill.set_vectorize(ctx, i);\r\n                        ctx.beginPath();\r\n                        if (compat_1.is_ie) {\r\n                            try {\r\n                                // Draw two halves of the donut. Works on IE, but causes an aa line on Safari.\r\n                                for (var _d = (e_2 = void 0, tslib_1.__values([false, true])), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                                    var clockwise = _e.value;\r\n                                    ctx.arc(sx[i], sy[i], sinner_radius[i], 0, Math.PI, clockwise);\r\n                                    ctx.arc(sx[i], sy[i], souter_radius[i], Math.PI, 0, !clockwise);\r\n                                }\r\n                            }\r\n                            catch (e_2_1) {\r\n                                e_2 = { error: e_2_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (_e && !_e.done && (_c = _d.return))\r\n                                        _c.call(_d);\r\n                                }\r\n                                finally {\r\n                                    if (e_2)\r\n                                        throw e_2.error;\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            // Draw donut in one go. Does not work on iE.\r\n                            ctx.arc(sx[i], sy[i], sinner_radius[i], 0, 2 * Math.PI, true);\r\n                            ctx.arc(sx[i], sy[i], souter_radius[i], 2 * Math.PI, 0, false);\r\n                        }\r\n                        ctx.fill();\r\n                    }\r\n                    if (this.visuals.line.doit) {\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.beginPath();\r\n                        ctx.arc(sx[i], sy[i], sinner_radius[i], 0, 2 * Math.PI);\r\n                        ctx.moveTo(sx[i] + souter_radius[i], sy[i]);\r\n                        ctx.arc(sx[i], sy[i], souter_radius[i], 0, 2 * Math.PI);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        AnnulusView.prototype._hit_point = function (geometry) {\r\n            var _a, _b, e_3, _c;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var x0, y0;\r\n            var x1, y1;\r\n            if (this.model.properties.outer_radius.units == \"data\") {\r\n                x0 = x - this.max_outer_radius;\r\n                x1 = x + this.max_outer_radius;\r\n                y0 = y - this.max_outer_radius;\r\n                y1 = y + this.max_outer_radius;\r\n            }\r\n            else {\r\n                var sx0 = sx - this.max_outer_radius;\r\n                var sx1 = sx + this.max_outer_radius;\r\n                _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n                var sy0 = sy - this.max_outer_radius;\r\n                var sy1 = sy + this.max_outer_radius;\r\n                _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            }\r\n            var indices = [];\r\n            try {\r\n                for (var _d = tslib_1.__values(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 })), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var i = _e.value;\r\n                    var or2 = Math.pow(this.souter_radius[i], 2);\r\n                    var ir2 = Math.pow(this.sinner_radius[i], 2);\r\n                    var _f = tslib_1.__read(this.renderer.xscale.r_compute(x, this._x[i]), 2), sx0 = _f[0], sx1 = _f[1];\r\n                    var _g = tslib_1.__read(this.renderer.yscale.r_compute(y, this._y[i]), 2), sy0 = _g[0], sy1 = _g[1];\r\n                    var dist = Math.pow((sx0 - sx1), 2) + Math.pow((sy0 - sy1), 2);\r\n                    if (dist <= or2 && dist >= ir2)\r\n                        indices.push(i);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_c = _d.return))\r\n                        _c.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        AnnulusView.prototype.draw_legend_for_index = function (ctx, _a, index) {\r\n            var x0 = _a.x0, y0 = _a.y0, x1 = _a.x1, y1 = _a.y1;\r\n            var len = index + 1;\r\n            var sx = new Array(len);\r\n            sx[index] = (x0 + x1) / 2;\r\n            var sy = new Array(len);\r\n            sy[index] = (y0 + y1) / 2;\r\n            var r = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.5;\r\n            var sinner_radius = new Array(len);\r\n            sinner_radius[index] = r * 0.4;\r\n            var souter_radius = new Array(len);\r\n            souter_radius[index] = r * 0.8;\r\n            this._render(ctx, [index], { sx: sx, sy: sy, sinner_radius: sinner_radius, souter_radius: souter_radius }); // XXX\r\n        };\r\n        return AnnulusView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.AnnulusView = AnnulusView;\r\n    AnnulusView.__name__ = \"AnnulusView\";\r\n    var Annulus = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Annulus, _super);\r\n        function Annulus(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Annulus.init_Annulus = function () {\r\n            this.prototype.default_view = AnnulusView;\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.define({\r\n                inner_radius: [p.DistanceSpec],\r\n                outer_radius: [p.DistanceSpec],\r\n            });\r\n        };\r\n        return Annulus;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Annulus = Annulus;\r\n    Annulus.__name__ = \"Annulus\";\r\n    Annulus.init_Annulus();\r\n}\r\n","/* models\\glyphs\\arc.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var ArcView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ArcView, _super);\r\n        function ArcView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ArcView.prototype._map_data = function () {\r\n            if (this.model.properties.radius.units == \"data\")\r\n                this.sradius = this.sdist(this.renderer.xscale, this._x, this._radius);\r\n            else\r\n                this.sradius = this._radius;\r\n        };\r\n        ArcView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, sradius = _a.sradius, _start_angle = _a._start_angle, _end_angle = _a._end_angle;\r\n            if (this.visuals.line.doit) {\r\n                var direction = this.model.properties.direction.value();\r\n                try {\r\n                    for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                        var i = indices_1_1.value;\r\n                        if (isNaN(sx[i] + sy[i] + sradius[i] + _start_angle[i] + _end_angle[i]))\r\n                            continue;\r\n                        ctx.beginPath();\r\n                        ctx.arc(sx[i], sy[i], sradius[i], _start_angle[i], _end_angle[i], direction);\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                            _b.call(indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        ArcView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return ArcView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.ArcView = ArcView;\r\n    ArcView.__name__ = \"ArcView\";\r\n    var Arc = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Arc, _super);\r\n        function Arc(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Arc.init_Arc = function () {\r\n            this.prototype.default_view = ArcView;\r\n            this.mixins(property_mixins_1.LineVector);\r\n            this.define({\r\n                direction: [p.Direction, 'anticlock'],\r\n                radius: [p.DistanceSpec],\r\n                start_angle: [p.AngleSpec],\r\n                end_angle: [p.AngleSpec],\r\n            });\r\n        };\r\n        return Arc;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Arc = Arc;\r\n    Arc.__name__ = \"Arc\";\r\n    Arc.init_Arc();\r\n}\r\n","/* models\\glyphs\\bezier.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    // algorithm adapted from http://stackoverflow.com/a/14429749/3406693\r\n    function _cbb(x0, y0, x1, y1, x2, y2, x3, y3) {\r\n        var tvalues = [];\r\n        var bounds = [[], []];\r\n        for (var i = 0; i <= 2; i++) {\r\n            var a = void 0, b = void 0, c = void 0;\r\n            if (i === 0) {\r\n                b = ((6 * x0) - (12 * x1)) + (6 * x2);\r\n                a = (((-3 * x0) + (9 * x1)) - (9 * x2)) + (3 * x3);\r\n                c = (3 * x1) - (3 * x0);\r\n            }\r\n            else {\r\n                b = ((6 * y0) - (12 * y1)) + (6 * y2);\r\n                a = (((-3 * y0) + (9 * y1)) - (9 * y2)) + (3 * y3);\r\n                c = (3 * y1) - (3 * y0);\r\n            }\r\n            if (Math.abs(a) < 1e-12) { // Numerical robustness\r\n                if (Math.abs(b) < 1e-12) // Numerical robustness\r\n                    continue;\r\n                var t = -c / b;\r\n                if (0 < t && t < 1)\r\n                    tvalues.push(t);\r\n                continue;\r\n            }\r\n            var b2ac = (b * b) - (4 * c * a);\r\n            var sqrtb2ac = Math.sqrt(b2ac);\r\n            if (b2ac < 0)\r\n                continue;\r\n            var t1 = (-b + sqrtb2ac) / (2 * a);\r\n            if (0 < t1 && t1 < 1)\r\n                tvalues.push(t1);\r\n            var t2 = (-b - sqrtb2ac) / (2 * a);\r\n            if (0 < t2 && t2 < 1)\r\n                tvalues.push(t2);\r\n        }\r\n        var j = tvalues.length;\r\n        var jlen = j;\r\n        while (j--) {\r\n            var t = tvalues[j];\r\n            var mt = 1 - t;\r\n            var x = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\r\n            bounds[0][j] = x;\r\n            var y = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\r\n            bounds[1][j] = y;\r\n        }\r\n        bounds[0][jlen] = x0;\r\n        bounds[1][jlen] = y0;\r\n        bounds[0][jlen + 1] = x3;\r\n        bounds[1][jlen + 1] = y3;\r\n        return [\r\n            Math.min.apply(Math, tslib_1.__spread(bounds[0])),\r\n            Math.max.apply(Math, tslib_1.__spread(bounds[1])),\r\n            Math.max.apply(Math, tslib_1.__spread(bounds[0])),\r\n            Math.min.apply(Math, tslib_1.__spread(bounds[1])),\r\n        ];\r\n    }\r\n    var BezierView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BezierView, _super);\r\n        function BezierView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BezierView.prototype._project_data = function () {\r\n            projections_1.inplace.project_xy(this._x0, this._y0);\r\n            projections_1.inplace.project_xy(this._x1, this._y1);\r\n        };\r\n        BezierView.prototype._index_data = function (index) {\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                if (isNaN(this._x0[i] + this._x1[i] + this._y0[i] + this._y1[i] + this._cx0[i] + this._cy0[i] + this._cx1[i] + this._cy1[i]))\r\n                    index.add_empty();\r\n                else {\r\n                    var _a = tslib_1.__read(_cbb(this._x0[i], this._y0[i], this._x1[i], this._y1[i], this._cx0[i], this._cy0[i], this._cx1[i], this._cy1[i]), 4), x0 = _a[0], y0 = _a[1], x1 = _a[2], y1 = _a[3];\r\n                    index.add(x0, y0, x1, y1);\r\n                }\r\n            }\r\n        };\r\n        BezierView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx0 = _a.sx0, sy0 = _a.sy0, sx1 = _a.sx1, sy1 = _a.sy1, scx0 = _a.scx0, scy0 = _a.scy0, scx1 = _a.scx1, scy1 = _a.scy1;\r\n            if (this.visuals.line.doit) {\r\n                try {\r\n                    for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                        var i = indices_1_1.value;\r\n                        if (isNaN(sx0[i] + sy0[i] + sx1[i] + sy1[i] + scx0[i] + scy0[i] + scx1[i] + scy1[i]))\r\n                            continue;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(sx0[i], sy0[i]);\r\n                        ctx.bezierCurveTo(scx0[i], scy0[i], scx1[i], scy1[i], sx1[i], sy1[i]);\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                            _b.call(indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        BezierView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        BezierView.prototype.scenterxy = function () {\r\n            throw new Error(this + \".scenterxy() is not implemented\");\r\n        };\r\n        return BezierView;\r\n    }(glyph_1.GlyphView));\r\n    exports.BezierView = BezierView;\r\n    BezierView.__name__ = \"BezierView\";\r\n    var Bezier = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Bezier, _super);\r\n        function Bezier(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Bezier.init_Bezier = function () {\r\n            this.prototype.default_view = BezierView;\r\n            this.define({\r\n                x0: [p.XCoordinateSpec, { field: \"x0\" }],\r\n                y0: [p.YCoordinateSpec, { field: \"y0\" }],\r\n                x1: [p.XCoordinateSpec, { field: \"x1\" }],\r\n                y1: [p.YCoordinateSpec, { field: \"y1\" }],\r\n                cx0: [p.XCoordinateSpec, { field: \"cx0\" }],\r\n                cy0: [p.YCoordinateSpec, { field: \"cy0\" }],\r\n                cx1: [p.XCoordinateSpec, { field: \"cx1\" }],\r\n                cy1: [p.YCoordinateSpec, { field: \"cy1\" }],\r\n            });\r\n            this.mixins(property_mixins_1.LineVector);\r\n        };\r\n        return Bezier;\r\n    }(glyph_1.Glyph));\r\n    exports.Bezier = Bezier;\r\n    Bezier.__name__ = \"Bezier\";\r\n    Bezier.init_Bezier();\r\n}\r\n","/* models\\glyphs\\circle.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var markers_1 = require(353) /* ./webgl/markers */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var CircleView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CircleView, _super);\r\n        function CircleView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CircleView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            var webgl = this.renderer.plot_view.canvas_view.webgl;\r\n            if (webgl != null) {\r\n                this.glglyph = new markers_1.CircleGL(webgl.gl, this);\r\n            }\r\n        };\r\n        CircleView.prototype._map_data = function () {\r\n            // XXX: Order is important here: size is always present (at least\r\n            // a default), but radius is only present if a user specifies it.\r\n            if (this._radius != null) {\r\n                if (this.model.properties.radius.units == \"data\") {\r\n                    switch (this.model.radius_dimension) {\r\n                        case \"x\": {\r\n                            this.sradius = this.sdist(this.renderer.xscale, this._x, this._radius);\r\n                            break;\r\n                        }\r\n                        case \"y\": {\r\n                            this.sradius = this.sdist(this.renderer.yscale, this._y, this._radius);\r\n                            break;\r\n                        }\r\n                        case \"max\": {\r\n                            var sradius_x = this.sdist(this.renderer.xscale, this._x, this._radius);\r\n                            var sradius_y_1 = this.sdist(this.renderer.yscale, this._y, this._radius);\r\n                            this.sradius = arrayable_1.map(sradius_x, function (s, i) { return Math.max(s, sradius_y_1[i]); });\r\n                            break;\r\n                        }\r\n                        case \"min\": {\r\n                            var sradius_x = this.sdist(this.renderer.xscale, this._x, this._radius);\r\n                            var sradius_y_2 = this.sdist(this.renderer.yscale, this._y, this._radius);\r\n                            this.sradius = arrayable_1.map(sradius_x, function (s, i) { return Math.min(s, sradius_y_2[i]); });\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.sradius = this._radius;\r\n                    this.max_size = 2 * this.max_radius;\r\n                }\r\n            }\r\n            else\r\n                this.sradius = arrayable_1.map(this._size, function (s) { return s / 2; });\r\n        };\r\n        CircleView.prototype._mask_data = function () {\r\n            var _a, _b, _c, _d;\r\n            var _e = tslib_1.__read(this.renderer.plot_view.frame.bbox.ranges, 2), hr = _e[0], vr = _e[1];\r\n            var x0, y0;\r\n            var x1, y1;\r\n            if (this._radius != null && this.model.properties.radius.units == \"data\") {\r\n                var sx0 = hr.start;\r\n                var sx1 = hr.end;\r\n                _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n                x0 -= this.max_radius;\r\n                x1 += this.max_radius;\r\n                var sy0 = vr.start;\r\n                var sy1 = vr.end;\r\n                _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n                y0 -= this.max_radius;\r\n                y1 += this.max_radius;\r\n            }\r\n            else {\r\n                var sx0 = hr.start - this.max_size;\r\n                var sx1 = hr.end + this.max_size;\r\n                _c = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _c[0], x1 = _c[1];\r\n                var sy0 = vr.start - this.max_size;\r\n                var sy1 = vr.end + this.max_size;\r\n                _d = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _d[0], y1 = _d[1];\r\n            }\r\n            return this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n        };\r\n        CircleView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, sradius = _a.sradius;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + sradius[i]))\r\n                        continue;\r\n                    ctx.beginPath();\r\n                    ctx.arc(sx[i], sy[i], sradius[i], 0, 2 * Math.PI, false);\r\n                    if (this.visuals.fill.doit) {\r\n                        this.visuals.fill.set_vectorize(ctx, i);\r\n                        ctx.fill();\r\n                    }\r\n                    if (this.visuals.line.doit) {\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        CircleView.prototype._hit_point = function (geometry) {\r\n            var _a, _b, e_2, _c, e_3, _d;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var x0, x1, y0, y1;\r\n            if (this._radius != null && this.model.properties.radius.units == \"data\") {\r\n                x0 = x - this.max_radius;\r\n                x1 = x + this.max_radius;\r\n                y0 = y - this.max_radius;\r\n                y1 = y + this.max_radius;\r\n            }\r\n            else {\r\n                var sx0 = sx - this.max_size;\r\n                var sx1 = sx + this.max_size;\r\n                _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n                var sy0 = sy - this.max_size;\r\n                var sy1 = sy + this.max_size;\r\n                _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            }\r\n            var candidates = this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n            var indices = [];\r\n            if (this._radius != null && this.model.properties.radius.units == \"data\") {\r\n                try {\r\n                    for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                        var i = candidates_1_1.value;\r\n                        var r2 = Math.pow(this.sradius[i], 2);\r\n                        var _e = tslib_1.__read(this.renderer.xscale.r_compute(x, this._x[i]), 2), sx0 = _e[0], sx1 = _e[1];\r\n                        var _f = tslib_1.__read(this.renderer.yscale.r_compute(y, this._y[i]), 2), sy0 = _f[0], sy1 = _f[1];\r\n                        var dist = Math.pow((sx0 - sx1), 2) + Math.pow((sy0 - sy1), 2);\r\n                        if (dist <= r2) {\r\n                            indices.push(i);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (candidates_1_1 && !candidates_1_1.done && (_c = candidates_1.return))\r\n                            _c.call(candidates_1);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                try {\r\n                    for (var candidates_2 = tslib_1.__values(candidates), candidates_2_1 = candidates_2.next(); !candidates_2_1.done; candidates_2_1 = candidates_2.next()) {\r\n                        var i = candidates_2_1.value;\r\n                        var r2 = Math.pow(this.sradius[i], 2);\r\n                        var dist = Math.pow((this.sx[i] - sx), 2) + Math.pow((this.sy[i] - sy), 2);\r\n                        if (dist <= r2) {\r\n                            indices.push(i);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_3_1) {\r\n                    e_3 = { error: e_3_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (candidates_2_1 && !candidates_2_1.done && (_d = candidates_2.return))\r\n                            _d.call(candidates_2);\r\n                    }\r\n                    finally {\r\n                        if (e_3)\r\n                            throw e_3.error;\r\n                    }\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        CircleView.prototype._hit_span = function (geometry) {\r\n            var _a, _b, _c, _d;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var bounds = this.bounds();\r\n            var x0, x1, y0, y1;\r\n            if (geometry.direction == 'h') {\r\n                // use circle bounds instead of current pointer y coordinates\r\n                var sx0 = void 0, sx1 = void 0;\r\n                y0 = bounds.y0;\r\n                y1 = bounds.y1;\r\n                if (this._radius != null && this.model.properties.radius.units == \"data\") {\r\n                    sx0 = sx - this.max_radius;\r\n                    sx1 = sx + this.max_radius;\r\n                    _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n                }\r\n                else {\r\n                    var ms = this.max_size / 2;\r\n                    sx0 = sx - ms;\r\n                    sx1 = sx + ms;\r\n                    _b = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _b[0], x1 = _b[1];\r\n                }\r\n            }\r\n            else {\r\n                // use circle bounds instead of current pointer x coordinates\r\n                var sy0 = void 0, sy1 = void 0;\r\n                x0 = bounds.x0;\r\n                x1 = bounds.x1;\r\n                if (this._radius != null && this.model.properties.radius.units == \"data\") {\r\n                    sy0 = sy - this.max_radius;\r\n                    sy1 = sy + this.max_radius;\r\n                    _c = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _c[0], y1 = _c[1];\r\n                }\r\n                else {\r\n                    var ms = this.max_size / 2;\r\n                    sy0 = sy - ms;\r\n                    sy1 = sy + ms;\r\n                    _d = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _d[0], y1 = _d[1];\r\n                }\r\n            }\r\n            var indices = tslib_1.__spread(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 }));\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        CircleView.prototype._hit_rect = function (geometry) {\r\n            var sx0 = geometry.sx0, sx1 = geometry.sx1, sy0 = geometry.sy0, sy1 = geometry.sy1;\r\n            var _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n            var _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            var indices = tslib_1.__spread(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 }));\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        CircleView.prototype._hit_poly = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            // TODO (bev) use spatial index to pare candidate list\r\n            var candidates = array_1.range(0, this.sx.length);\r\n            var indices = [];\r\n            for (var i = 0, end = candidates.length; i < end; i++) {\r\n                var index = candidates[i];\r\n                if (hittest.point_in_poly(this.sx[i], this.sy[i], sx, sy)) {\r\n                    indices.push(index);\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        // circle does not inherit from marker (since it also accepts radius) so we\r\n        // must supply a draw_legend for it  here\r\n        CircleView.prototype.draw_legend_for_index = function (ctx, _a, index) {\r\n            var x0 = _a.x0, y0 = _a.y0, x1 = _a.x1, y1 = _a.y1;\r\n            // using objects like this seems a little wonky, since the keys are coerced to\r\n            // stings, but it works\r\n            var len = index + 1;\r\n            var sx = new Array(len);\r\n            sx[index] = (x0 + x1) / 2;\r\n            var sy = new Array(len);\r\n            sy[index] = (y0 + y1) / 2;\r\n            var sradius = new Array(len);\r\n            sradius[index] = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.2;\r\n            this._render(ctx, [index], { sx: sx, sy: sy, sradius: sradius }); // XXX\r\n        };\r\n        return CircleView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.CircleView = CircleView;\r\n    CircleView.__name__ = \"CircleView\";\r\n    var Circle = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Circle, _super);\r\n        function Circle(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Circle.init_Circle = function () {\r\n            this.prototype.default_view = CircleView;\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.define({\r\n                angle: [p.AngleSpec, 0],\r\n                size: [p.DistanceSpec, { units: \"screen\", value: 4 }],\r\n                radius: [p.DistanceSpec, undefined, { optional: true }],\r\n                radius_dimension: [p.RadiusDimension, 'x'],\r\n            });\r\n        };\r\n        return Circle;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Circle = Circle;\r\n    Circle.__name__ = \"Circle\";\r\n    Circle.init_Circle();\r\n}\r\n","/* models\\glyphs\\webgl\\markers.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var utils_1 = require(218) /* ./utils */;\r\n    var base_1 = require(222) /* ./base */;\r\n    var markers_vert_1 = require(354) /* ./markers.vert */;\r\n    var markers_frag_1 = require(355) /* ./markers.frag */;\r\n    var circle_1 = require(352) /* ../circle */;\r\n    var arrayable_1 = require(127) /* ../../../core/util/arrayable */;\r\n    var logging_1 = require(134) /* ../../../core/logging */;\r\n    var color_1 = require(137) /* ../../../core/util/color */;\r\n    function attach_float(prog, vbo, att_name, n, visual, name) {\r\n        // Attach a float attribute to the program. Use singleton value if we can,\r\n        // otherwise use VBO to apply array.\r\n        if (!visual.doit) {\r\n            vbo.used = false;\r\n            prog.set_attribute(att_name, 'float', [0]);\r\n        }\r\n        else if (visual[name].is_value) {\r\n            vbo.used = false;\r\n            prog.set_attribute(att_name, 'float', [visual[name].value()]);\r\n        }\r\n        else {\r\n            vbo.used = true;\r\n            var a = new Float32Array(visual.get_array(name));\r\n            vbo.set_size(n * 4);\r\n            vbo.set_data(0, a);\r\n            prog.set_attribute(att_name, 'float', vbo);\r\n        }\r\n    }\r\n    exports.attach_float = attach_float;\r\n    function attach_color(prog, vbo, att_name, n, visual, prefix) {\r\n        // Attach the color attribute to the program. If there's just one color,\r\n        // then use this single color for all vertices (no VBO). Otherwise we\r\n        // create an array and upload that to the VBO, which we attahce to the prog.\r\n        var m = 4;\r\n        var colorname = prefix + '_color';\r\n        var alphaname = prefix + '_alpha';\r\n        if (!visual.doit) {\r\n            // Don't draw (draw transparent)\r\n            vbo.used = false;\r\n            prog.set_attribute(att_name, 'vec4', [0, 0, 0, 0]);\r\n        }\r\n        else {\r\n            // Use vbo; we need an array for both the color and the alpha\r\n            vbo.used = true;\r\n            var colors = void 0;\r\n            if (visual[colorname].is_value) {\r\n                var val = color_1.encode_rgba(color_1.color2rgba(visual[colorname].value()));\r\n                var array = new Uint32Array(n);\r\n                array.fill(val);\r\n                colors = array;\r\n            }\r\n            else\r\n                colors = visual.get_array(colorname);\r\n            var alphas = void 0;\r\n            if (visual[alphaname].is_value) {\r\n                var val = visual[alphaname].value();\r\n                var array = new Float32Array(n);\r\n                array.fill(val);\r\n                alphas = array;\r\n            }\r\n            else\r\n                alphas = visual.get_array(alphaname);\r\n            // Create array of rgbs\r\n            var a = new Float32Array(n * m);\r\n            for (var i = 0, end = n; i < end; i++) {\r\n                var rgba = color_1.decode_rgba(colors[i]);\r\n                if (rgba[3] == 1.0)\r\n                    rgba[3] = alphas[i];\r\n                a.set(rgba, i * m);\r\n            }\r\n            // Attach vbo\r\n            vbo.set_size(n * m * 4);\r\n            vbo.set_data(0, a);\r\n            prog.set_attribute(att_name, 'vec4', vbo);\r\n        }\r\n    }\r\n    exports.attach_color = attach_color;\r\n    // Base class for markers. All markers share the same GLSL, except for one\r\n    // function that defines the marker geometry.\r\n    var MarkerGL = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MarkerGL, _super);\r\n        function MarkerGL() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        MarkerGL.prototype.init = function () {\r\n            var gl = this.gl;\r\n            var vert = markers_vert_1.vertex_shader;\r\n            var frag = markers_frag_1.fragment_shader(this._marker_code);\r\n            // The program\r\n            this.prog = new utils_1.Program(gl);\r\n            this.prog.set_shaders(vert, frag);\r\n            // Real attributes\r\n            this.vbo_sx = new utils_1.VertexBuffer(gl);\r\n            this.prog.set_attribute('a_sx', 'float', this.vbo_sx);\r\n            this.vbo_sy = new utils_1.VertexBuffer(gl);\r\n            this.prog.set_attribute('a_sy', 'float', this.vbo_sy);\r\n            this.vbo_s = new utils_1.VertexBuffer(gl);\r\n            this.prog.set_attribute('a_size', 'float', this.vbo_s);\r\n            this.vbo_a = new utils_1.VertexBuffer(gl);\r\n            this.prog.set_attribute('a_angle', 'float', this.vbo_a);\r\n            // VBO's for attributes (they may not be used if value is singleton)\r\n            this.vbo_linewidth = new utils_1.VertexBuffer(gl);\r\n            this.vbo_fg_color = new utils_1.VertexBuffer(gl);\r\n            this.vbo_bg_color = new utils_1.VertexBuffer(gl);\r\n            this.index_buffer = new utils_1.IndexBuffer(gl);\r\n        };\r\n        MarkerGL.prototype.draw = function (indices, mainGlyph, trans) {\r\n            // The main glyph has the data, *this* glyph has the visuals.\r\n            var mainGlGlyph = mainGlyph.glglyph;\r\n            var nvertices = mainGlGlyph.nvertices;\r\n            // Upload data if we must. Only happens for main glyph.\r\n            if (mainGlGlyph.data_changed) {\r\n                mainGlGlyph._set_data(nvertices);\r\n                if (this.glyph instanceof circle_1.CircleView && this.glyph._radius != null) {\r\n                    // Keep screen radius up-to-date for circle glyph. Only happens when a radius is given\r\n                    this.vbo_s.set_data(0, arrayable_1.map(this.glyph.sradius, function (s) { return s * 2; }));\r\n                }\r\n                mainGlGlyph.data_changed = false;\r\n            }\r\n            // Update visuals if we must. Can happen for all glyphs.\r\n            if (this.visuals_changed) {\r\n                this._set_visuals(nvertices);\r\n                this.visuals_changed = false;\r\n            }\r\n            // Handle transformation to device coordinates\r\n            this.prog.set_uniform('u_pixel_ratio', 'float', [trans.pixel_ratio]);\r\n            this.prog.set_uniform('u_canvas_size', 'vec2', [trans.width, trans.height]);\r\n            // Select buffers from main glyph\r\n            // (which may be this glyph but maybe not if this is a (non)selection glyph)\r\n            this.prog.set_attribute('a_sx', 'float', mainGlGlyph.vbo_sx);\r\n            this.prog.set_attribute('a_sy', 'float', mainGlGlyph.vbo_sy);\r\n            this.prog.set_attribute('a_size', 'float', mainGlGlyph.vbo_s);\r\n            this.prog.set_attribute('a_angle', 'float', mainGlGlyph.vbo_a);\r\n            // Draw directly or using indices. Do not handle indices if they do not\r\n            // fit in a uint16; WebGL 1.0 does not support uint32.\r\n            if (indices.length == 0)\r\n                return;\r\n            else if (indices.length === nvertices)\r\n                this.prog.draw(this.gl.POINTS, [0, nvertices]);\r\n            else if (nvertices < 65535) {\r\n                // On IE the marker size is reduced to 1 px when using an index buffer\r\n                // A MS Edge dev on Twitter said on 24-04-2014: \"gl_PointSize > 1.0 works\r\n                // in DrawArrays; gl_PointSize > 1.0 in DrawElements is coming soon in the\r\n                // next renderer update.\r\n                var ua = window.navigator.userAgent;\r\n                if ((ua.indexOf(\"MSIE \") + ua.indexOf(\"Trident/\") + ua.indexOf(\"Edge/\")) > 0) {\r\n                    logging_1.logger.warn('WebGL warning: IE is known to produce 1px sprites whith selections.');\r\n                }\r\n                this.index_buffer.set_size(indices.length * 2);\r\n                this.index_buffer.set_data(0, new Uint16Array(indices));\r\n                this.prog.draw(this.gl.POINTS, this.index_buffer);\r\n            }\r\n            else {\r\n                // Work around the limit that the indexbuffer must be uint16. We draw in chunks.\r\n                // First collect indices in chunks\r\n                var chunksize = 64000; // 65536\r\n                var chunks = [];\r\n                for (var i = 0, end = Math.ceil(nvertices / chunksize); i < end; i++) {\r\n                    chunks.push([]);\r\n                }\r\n                for (var i = 0, end = indices.length; i < end; i++) {\r\n                    var uint16_index = indices[i] % chunksize;\r\n                    var chunk = Math.floor(indices[i] / chunksize);\r\n                    chunks[chunk].push(uint16_index);\r\n                }\r\n                // Then draw each chunk\r\n                for (var chunk = 0, end = chunks.length; chunk < end; chunk++) {\r\n                    var these_indices = new Uint16Array(chunks[chunk]);\r\n                    var offset = chunk * chunksize * 4;\r\n                    if (these_indices.length === 0) {\r\n                        continue;\r\n                    }\r\n                    this.prog.set_attribute('a_sx', 'float', mainGlGlyph.vbo_sx, 0, offset);\r\n                    this.prog.set_attribute('a_sy', 'float', mainGlGlyph.vbo_sy, 0, offset);\r\n                    this.prog.set_attribute('a_size', 'float', mainGlGlyph.vbo_s, 0, offset);\r\n                    this.prog.set_attribute('a_angle', 'float', mainGlGlyph.vbo_a, 0, offset);\r\n                    if (this.vbo_linewidth.used) {\r\n                        this.prog.set_attribute('a_linewidth', 'float', this.vbo_linewidth, 0, offset);\r\n                    }\r\n                    if (this.vbo_fg_color.used) {\r\n                        this.prog.set_attribute('a_fg_color', 'vec4', this.vbo_fg_color, 0, offset * 4);\r\n                    }\r\n                    if (this.vbo_bg_color.used) {\r\n                        this.prog.set_attribute('a_bg_color', 'vec4', this.vbo_bg_color, 0, offset * 4);\r\n                    }\r\n                    // The actual drawing\r\n                    this.index_buffer.set_size(these_indices.length * 2);\r\n                    this.index_buffer.set_data(0, these_indices);\r\n                    this.prog.draw(this.gl.POINTS, this.index_buffer);\r\n                }\r\n            }\r\n        };\r\n        MarkerGL.prototype._set_data = function (nvertices) {\r\n            var n = nvertices * 4; // in bytes\r\n            // Set buffer size\r\n            this.vbo_sx.set_size(n);\r\n            this.vbo_sy.set_size(n);\r\n            this.vbo_a.set_size(n);\r\n            this.vbo_s.set_size(n);\r\n            this.vbo_sx.set_data(0, this.glyph.sx);\r\n            this.vbo_sy.set_data(0, this.glyph.sy);\r\n            if (this.glyph._angle != null) {\r\n                this.vbo_a.set_data(0, new Float32Array(this.glyph._angle));\r\n            }\r\n            if (this.glyph instanceof circle_1.CircleView && this.glyph._radius != null)\r\n                this.vbo_s.set_data(0, arrayable_1.map(this.glyph.sradius, function (s) { return s * 2; }));\r\n            else\r\n                this.vbo_s.set_data(0, new Float32Array(this.glyph._size));\r\n        };\r\n        MarkerGL.prototype._set_visuals = function (nvertices) {\r\n            attach_float(this.prog, this.vbo_linewidth, 'a_linewidth', nvertices, this.glyph.visuals.line, 'line_width');\r\n            attach_color(this.prog, this.vbo_fg_color, 'a_fg_color', nvertices, this.glyph.visuals.line, 'line');\r\n            attach_color(this.prog, this.vbo_bg_color, 'a_bg_color', nvertices, this.glyph.visuals.fill, 'fill');\r\n            // Static value for antialias. Smaller aa-region to obtain crisper images\r\n            this.prog.set_uniform('u_antialias', 'float', [0.8]);\r\n        };\r\n        return MarkerGL;\r\n    }(base_1.BaseGLGlyph));\r\n    exports.MarkerGL = MarkerGL;\r\n    MarkerGL.__name__ = \"MarkerGL\";\r\n    function mk_marker(code) {\r\n        return /** @class */ (function (_super) {\r\n            tslib_1.__extends(class_1, _super);\r\n            function class_1() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Object.defineProperty(class_1.prototype, \"_marker_code\", {\r\n                get: function () {\r\n                    return code;\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            return class_1;\r\n        }(MarkerGL));\r\n    }\r\n    var glsl = tslib_1.__importStar(require(355) /* ./markers.frag */);\r\n    exports.AsteriskGL = mk_marker(glsl.asterisk);\r\n    exports.CircleGL = mk_marker(glsl.circle);\r\n    exports.CircleCrossGL = mk_marker(glsl.circlecross);\r\n    exports.CircleXGL = mk_marker(glsl.circlex);\r\n    exports.CrossGL = mk_marker(glsl.cross);\r\n    exports.DiamondGL = mk_marker(glsl.diamond);\r\n    exports.DiamondCrossGL = mk_marker(glsl.diamondcross);\r\n    exports.HexGL = mk_marker(glsl.hex);\r\n    exports.InvertedTriangleGL = mk_marker(glsl.invertedtriangle);\r\n    exports.SquareGL = mk_marker(glsl.square);\r\n    exports.SquareCrossGL = mk_marker(glsl.squarecross);\r\n    exports.SquareXGL = mk_marker(glsl.squarex);\r\n    exports.TriangleGL = mk_marker(glsl.triangle);\r\n    exports.XGL = mk_marker(glsl.x);\r\n}\r\n","/* models\\glyphs\\webgl\\markers.vert.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.vertex_shader = \"\\nprecision mediump float;\\nconst float SQRT_2 = 1.4142135623730951;\\n//\\nuniform float u_pixel_ratio;\\nuniform vec2 u_canvas_size;\\nuniform vec2 u_offset;\\nuniform vec2 u_scale;\\nuniform float u_antialias;\\n//\\nattribute float a_sx;\\nattribute float a_sy;\\nattribute float a_size;\\nattribute float a_angle;  // in radians\\nattribute float a_linewidth;\\nattribute vec4  a_fg_color;\\nattribute vec4  a_bg_color;\\n//\\nvarying float v_linewidth;\\nvarying float v_size;\\nvarying vec4  v_fg_color;\\nvarying vec4  v_bg_color;\\nvarying vec2  v_rotation;\\n\\nvoid main (void)\\n{\\n    v_size = a_size * u_pixel_ratio;\\n    v_linewidth = a_linewidth * u_pixel_ratio;\\n    v_fg_color = a_fg_color;\\n    v_bg_color = a_bg_color;\\n    v_rotation = vec2(cos(-a_angle), sin(-a_angle));\\n    vec2 pos = vec2(a_sx, a_sy);  // in pixels\\n    pos += 0.5;  // make up for Bokeh's offset\\n    pos /= u_canvas_size / u_pixel_ratio;  // in 0..1\\n    gl_Position = vec4(pos*2.0-1.0, 0.0, 1.0);\\n    gl_Position.y *= -1.0;\\n    gl_PointSize = SQRT_2 * v_size + 2.0 * (v_linewidth + 1.5*u_antialias);\\n}\\n\";\r\n}\r\n","/* models\\glyphs\\webgl\\markers.frag.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.fragment_shader = function (marker_code) { return \"\\nprecision mediump float;\\nconst float SQRT_2 = 1.4142135623730951;\\nconst float PI = 3.14159265358979323846264;\\n//\\nuniform float u_antialias;\\n//\\nvarying vec4  v_fg_color;\\nvarying vec4  v_bg_color;\\nvarying float v_linewidth;\\nvarying float v_size;\\nvarying vec2  v_rotation;\\n\\n\" + marker_code + \"\\n\\nvec4 outline(float distance, float linewidth, float antialias, vec4 fg_color, vec4 bg_color)\\n{\\n    vec4 frag_color;\\n    float t = linewidth/2.0 - antialias;\\n    float signed_distance = distance;\\n    float border_distance = abs(signed_distance) - t;\\n    float alpha = border_distance/antialias;\\n    alpha = exp(-alpha*alpha);\\n\\n    // If fg alpha is zero, it probably means no outline. To avoid a dark outline\\n    // shining through due to aa, we set the fg color to the bg color. Avoid if (i.e. branching).\\n    float select = float(bool(fg_color.a));\\n    fg_color.rgb = select * fg_color.rgb + (1.0  - select) * bg_color.rgb;\\n    // Similarly, if we want a transparent bg\\n    select = float(bool(bg_color.a));\\n    bg_color.rgb = select * bg_color.rgb + (1.0  - select) * fg_color.rgb;\\n\\n    if( border_distance < 0.0)\\n        frag_color = fg_color;\\n    else if( signed_distance < 0.0 ) {\\n        frag_color = mix(bg_color, fg_color, sqrt(alpha));\\n    } else {\\n        if( abs(signed_distance) < (linewidth/2.0 + antialias) ) {\\n            frag_color = vec4(fg_color.rgb, fg_color.a * alpha);\\n        } else {\\n            discard;\\n        }\\n    }\\n    return frag_color;\\n}\\n\\nvoid main()\\n{\\n    vec2 P = gl_PointCoord.xy - vec2(0.5, 0.5);\\n    P = vec2(v_rotation.x*P.x - v_rotation.y*P.y,\\n             v_rotation.y*P.x + v_rotation.x*P.y);\\n    float point_size = SQRT_2*v_size  + 2.0 * (v_linewidth + 1.5*u_antialias);\\n    float distance = marker(P*point_size, v_size);\\n    gl_FragColor = outline(distance, v_linewidth, u_antialias, v_fg_color, v_bg_color);\\n}\\n\"; };\r\n    exports.circle = \"\\nfloat marker(vec2 P, float size)\\n{\\n    return length(P) - size/2.0;\\n}\\n\";\r\n    exports.square = \"\\nfloat marker(vec2 P, float size)\\n{\\n    return max(abs(P.x), abs(P.y)) - size/2.0;\\n}\\n\";\r\n    exports.diamond = \"\\nfloat marker(vec2 P, float size)\\n{\\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\\n    float r1 = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\\n    return r1 / SQRT_2;\\n}\\n\";\r\n    exports.hex = \"\\nfloat marker(vec2 P, float size)\\n{\\n    vec2 q = abs(P);\\n    return max(q.y * 0.57735 + q.x - 1.0 * size/2.0, q.y - 0.866 * size/2.0);\\n}\\n\";\r\n    exports.triangle = \"\\nfloat marker(vec2 P, float size)\\n{\\n    P.y -= size * 0.3;\\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\\n    float r2 = P.y;\\n    return max(r1 / SQRT_2, r2);  // Intersect diamond with rectangle\\n}\\n\";\r\n    exports.invertedtriangle = \"\\nfloat marker(vec2 P, float size)\\n{\\n    P.y += size * 0.3;\\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\\n    float r2 = - P.y;\\n    return max(r1 / SQRT_2, r2);  // Intersect diamond with rectangle\\n}\\n\";\r\n    exports.cross = \"\\nfloat marker(vec2 P, float size)\\n{\\n    float square = max(abs(P.x), abs(P.y)) - size / 2.5;   // 2.5 is a tweak\\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of \\\"width\\\" for aa\\n    return max(square, cross);\\n}\\n\";\r\n    exports.circlecross = \"\\nfloat marker(vec2 P, float size)\\n{\\n    // Define quadrants\\n    float qs = size / 2.0;  // quadrant size\\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\\n    // Intersect main shape with quadrants (to form cross)\\n    float circle = length(P) - size/2.0;\\n    float c1 = max(circle, s1);\\n    float c2 = max(circle, s2);\\n    float c3 = max(circle, s3);\\n    float c4 = max(circle, s4);\\n    // Union\\n    return min(min(min(c1, c2), c3), c4);\\n}\\n\";\r\n    exports.squarecross = \"\\nfloat marker(vec2 P, float size)\\n{\\n    // Define quadrants\\n    float qs = size / 2.0;  // quadrant size\\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\\n    // Intersect main shape with quadrants (to form cross)\\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\\n    float c1 = max(square, s1);\\n    float c2 = max(square, s2);\\n    float c3 = max(square, s3);\\n    float c4 = max(square, s4);\\n    // Union\\n    return min(min(min(c1, c2), c3), c4);\\n}\\n\";\r\n    exports.diamondcross = \"\\nfloat marker(vec2 P, float size)\\n{\\n    // Define quadrants\\n    float qs = size / 2.0;  // quadrant size\\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\\n    // Intersect main shape with quadrants (to form cross)\\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\\n    float diamond = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\\n    diamond /= SQRT_2;\\n    float c1 = max(diamond, s1);\\n    float c2 = max(diamond, s2);\\n    float c3 = max(diamond, s3);\\n    float c4 = max(diamond, s4);\\n    // Union\\n    return min(min(min(c1, c2), c3), c4);\\n}\\n\";\r\n    exports.x = \"\\nfloat marker(vec2 P, float size)\\n{\\n    float circle = length(P) - size / 1.6;\\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of \\\"width\\\" for aa\\n    return max(circle, X);\\n}\\n\";\r\n    exports.circlex = \"\\nfloat marker(vec2 P, float size)\\n{\\n    float x = P.x - P.y;\\n    float y = P.x + P.y;\\n    // Define quadrants\\n    float qs = size / 2.0;  // quadrant size\\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\\n    // Intersect main shape with quadrants (to form cross)\\n    float circle = length(P) - size/2.0;\\n    float c1 = max(circle, s1);\\n    float c2 = max(circle, s2);\\n    float c3 = max(circle, s3);\\n    float c4 = max(circle, s4);\\n    // Union\\n    float almost = min(min(min(c1, c2), c3), c4);\\n    // In this case, the X is also outside of the main shape\\n    float Xmask = length(P) - size / 1.6;  // a circle\\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of \\\"width\\\" for aa\\n    return min(max(X, Xmask), almost);\\n}\\n\";\r\n    exports.squarex = \"\\nfloat marker(vec2 P, float size)\\n{\\n    float x = P.x - P.y;\\n    float y = P.x + P.y;\\n    // Define quadrants\\n    float qs = size / 2.0;  // quadrant size\\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\\n    // Intersect main shape with quadrants (to form cross)\\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\\n    float c1 = max(square, s1);\\n    float c2 = max(square, s2);\\n    float c3 = max(square, s3);\\n    float c4 = max(square, s4);\\n    // Union\\n    return min(min(min(c1, c2), c3), c4);\\n}\\n\";\r\n    exports.asterisk = \"\\nfloat marker(vec2 P, float size)\\n{\\n    // Masks\\n    float diamond = max(abs(SQRT_2 / 2.0 * (P.x - P.y)), abs(SQRT_2 / 2.0 * (P.x + P.y))) - size / (2.0 * SQRT_2);\\n    float square = max(abs(P.x), abs(P.y)) - size / (2.0 * SQRT_2);\\n    // Shapes\\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of \\\"width\\\" for aa\\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of \\\"width\\\" for aa\\n    // Result is union of masked shapes\\n    return min(max(X, diamond), max(cross, square));\\n}\\n\";\r\n}\r\n","/* models\\glyphs\\center_rotatable.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var CenterRotatableView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CenterRotatableView, _super);\r\n        function CenterRotatableView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return CenterRotatableView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.CenterRotatableView = CenterRotatableView;\r\n    CenterRotatableView.__name__ = \"CenterRotatableView\";\r\n    var CenterRotatable = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CenterRotatable, _super);\r\n        function CenterRotatable(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CenterRotatable.init_CenterRotatable = function () {\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.define({\r\n                angle: [p.AngleSpec, 0],\r\n                width: [p.DistanceSpec],\r\n                height: [p.DistanceSpec],\r\n            });\r\n        };\r\n        return CenterRotatable;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.CenterRotatable = CenterRotatable;\r\n    CenterRotatable.__name__ = \"CenterRotatable\";\r\n    CenterRotatable.init_CenterRotatable();\r\n}\r\n","/* models\\glyphs\\ellipse.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var ellipse_oval_1 = require(358) /* ./ellipse_oval */;\r\n    var EllipseView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EllipseView, _super);\r\n        function EllipseView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return EllipseView;\r\n    }(ellipse_oval_1.EllipseOvalView));\r\n    exports.EllipseView = EllipseView;\r\n    EllipseView.__name__ = \"EllipseView\";\r\n    var Ellipse = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Ellipse, _super);\r\n        function Ellipse(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Ellipse.init_Ellipse = function () {\r\n            this.prototype.default_view = EllipseView;\r\n        };\r\n        return Ellipse;\r\n    }(ellipse_oval_1.EllipseOval));\r\n    exports.Ellipse = Ellipse;\r\n    Ellipse.__name__ = \"Ellipse\";\r\n    Ellipse.init_Ellipse();\r\n}\r\n","/* models\\glyphs\\ellipse_oval.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var center_rotatable_1 = require(356) /* ./center_rotatable */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var EllipseOvalView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EllipseOvalView, _super);\r\n        function EllipseOvalView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        EllipseOvalView.prototype._set_data = function () {\r\n            this.max_w2 = 0;\r\n            if (this.model.properties.width.units == \"data\")\r\n                this.max_w2 = this.max_width / 2;\r\n            this.max_h2 = 0;\r\n            if (this.model.properties.height.units == \"data\")\r\n                this.max_h2 = this.max_height / 2;\r\n        };\r\n        EllipseOvalView.prototype._map_data = function () {\r\n            if (this.model.properties.width.units == \"data\")\r\n                this.sw = this.sdist(this.renderer.xscale, this._x, this._width, 'center');\r\n            else\r\n                this.sw = this._width;\r\n            if (this.model.properties.height.units == \"data\")\r\n                this.sh = this.sdist(this.renderer.yscale, this._y, this._height, 'center');\r\n            else\r\n                this.sh = this._height;\r\n        };\r\n        EllipseOvalView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, sw = _a.sw, sh = _a.sh, _angle = _a._angle;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + sw[i] + sh[i] + _angle[i]))\r\n                        continue;\r\n                    ctx.beginPath();\r\n                    ctx.ellipse(sx[i], sy[i], sw[i] / 2.0, sh[i] / 2.0, _angle[i], 0, 2 * Math.PI);\r\n                    if (this.visuals.fill.doit) {\r\n                        this.visuals.fill.set_vectorize(ctx, i);\r\n                        ctx.fill();\r\n                    }\r\n                    if (this.visuals.line.doit) {\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        EllipseOvalView.prototype._hit_point = function (geometry) {\r\n            var _a, _b, e_2, _c;\r\n            var x0, x1, y0, y1, cond, sx0, sx1, sy0, sy1;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            if (this.model.properties.width.units == \"data\") {\r\n                x0 = x - this.max_width;\r\n                x1 = x + this.max_width;\r\n            }\r\n            else {\r\n                sx0 = sx - this.max_width;\r\n                sx1 = sx + this.max_width;\r\n                _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n            }\r\n            if (this.model.properties.height.units == \"data\") {\r\n                y0 = y - this.max_height;\r\n                y1 = y + this.max_height;\r\n            }\r\n            else {\r\n                sy0 = sy - this.max_height;\r\n                sy1 = sy + this.max_height;\r\n                _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            }\r\n            var candidates = this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var i = candidates_1_1.value;\r\n                    cond = hittest.point_in_ellipse(sx, sy, this._angle[i], this.sh[i] / 2, this.sw[i] / 2, this.sx[i], this.sy[i]);\r\n                    if (cond) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_c = candidates_1.return))\r\n                        _c.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        EllipseOvalView.prototype.draw_legend_for_index = function (ctx, _a, index) {\r\n            var x0 = _a.x0, y0 = _a.y0, x1 = _a.x1, y1 = _a.y1;\r\n            var len = index + 1;\r\n            var sx = new Array(len);\r\n            sx[index] = (x0 + x1) / 2;\r\n            var sy = new Array(len);\r\n            sy[index] = (y0 + y1) / 2;\r\n            var scale = this.sw[index] / this.sh[index];\r\n            var d = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.8;\r\n            var sw = new Array(len);\r\n            var sh = new Array(len);\r\n            if (scale > 1) {\r\n                sw[index] = d;\r\n                sh[index] = d / scale;\r\n            }\r\n            else {\r\n                sw[index] = d * scale;\r\n                sh[index] = d;\r\n            }\r\n            this._render(ctx, [index], { sx: sx, sy: sy, sw: sw, sh: sh, _angle: [0] }); // XXX\r\n        };\r\n        EllipseOvalView.prototype._bounds = function (_a) {\r\n            var x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\r\n            return {\r\n                x0: x0 - this.max_w2,\r\n                x1: x1 + this.max_w2,\r\n                y0: y0 - this.max_h2,\r\n                y1: y1 + this.max_h2,\r\n            };\r\n        };\r\n        return EllipseOvalView;\r\n    }(center_rotatable_1.CenterRotatableView));\r\n    exports.EllipseOvalView = EllipseOvalView;\r\n    EllipseOvalView.__name__ = \"EllipseOvalView\";\r\n    var EllipseOval = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EllipseOval, _super);\r\n        function EllipseOval(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return EllipseOval;\r\n    }(center_rotatable_1.CenterRotatable));\r\n    exports.EllipseOval = EllipseOval;\r\n    EllipseOval.__name__ = \"EllipseOval\";\r\n}\r\n","/* models\\glyphs\\hbar.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var box_1 = require(360) /* ./box */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var HBarView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HBarView, _super);\r\n        function HBarView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        HBarView.prototype.scenterxy = function (i) {\r\n            var scx = (this.sleft[i] + this.sright[i]) / 2;\r\n            var scy = this.sy[i];\r\n            return [scx, scy];\r\n        };\r\n        HBarView.prototype._lrtb = function (i) {\r\n            var l = Math.min(this._left[i], this._right[i]);\r\n            var r = Math.max(this._left[i], this._right[i]);\r\n            var t = this._y[i] + 0.5 * this._height[i];\r\n            var b = this._y[i] - 0.5 * this._height[i];\r\n            return [l, r, t, b];\r\n        };\r\n        HBarView.prototype._map_data = function () {\r\n            this.sy = this.renderer.yscale.v_compute(this._y);\r\n            this.sh = this.sdist(this.renderer.yscale, this._y, this._height, \"center\");\r\n            this.sleft = this.renderer.xscale.v_compute(this._left);\r\n            this.sright = this.renderer.xscale.v_compute(this._right);\r\n            var n = this.sy.length;\r\n            this.stop = new types_1.NumberArray(n);\r\n            this.sbottom = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                this.stop[i] = this.sy[i] - this.sh[i] / 2;\r\n                this.sbottom[i] = this.sy[i] + this.sh[i] / 2;\r\n            }\r\n            this._clamp_viewport();\r\n        };\r\n        return HBarView;\r\n    }(box_1.BoxView));\r\n    exports.HBarView = HBarView;\r\n    HBarView.__name__ = \"HBarView\";\r\n    var HBar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HBar, _super);\r\n        function HBar(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        HBar.init_HBar = function () {\r\n            this.prototype.default_view = HBarView;\r\n            this.define({\r\n                left: [p.XCoordinateSpec, { value: 0 }],\r\n                y: [p.YCoordinateSpec, { field: \"y\" }],\r\n                height: [p.NumberSpec, { value: 1 }],\r\n                right: [p.XCoordinateSpec, { field: \"right\" }],\r\n            });\r\n        };\r\n        return HBar;\r\n    }(box_1.Box));\r\n    exports.HBar = HBar;\r\n    HBar.__name__ = \"HBar\";\r\n    HBar.init_HBar();\r\n}\r\n","/* models\\glyphs\\box.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var BoxView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxView, _super);\r\n        function BoxView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BoxView.prototype.get_anchor_point = function (anchor, i, _spt) {\r\n            var left = Math.min(this.sleft[i], this.sright[i]);\r\n            var right = Math.max(this.sright[i], this.sleft[i]);\r\n            var top = Math.min(this.stop[i], this.sbottom[i]); // screen coordinates !!!\r\n            var bottom = Math.max(this.sbottom[i], this.stop[i]); //\r\n            switch (anchor) {\r\n                case \"top_left\": return { x: left, y: top };\r\n                case \"top_center\": return { x: (left + right) / 2, y: top };\r\n                case \"top_right\": return { x: right, y: top };\r\n                case \"bottom_left\": return { x: left, y: bottom };\r\n                case \"bottom_center\": return { x: (left + right) / 2, y: bottom };\r\n                case \"bottom_right\": return { x: right, y: bottom };\r\n                case \"center_left\": return { x: left, y: (top + bottom) / 2 };\r\n                case \"center\": return { x: (left + right) / 2, y: (top + bottom) / 2 };\r\n                case \"center_right\": return { x: right, y: (top + bottom) / 2 };\r\n                default: return null;\r\n            }\r\n        };\r\n        BoxView.prototype._index_data = function (index) {\r\n            var min = Math.min, max = Math.max;\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var _a = tslib_1.__read(this._lrtb(i), 4), l = _a[0], r = _a[1], t = _a[2], b = _a[3];\r\n                if (isNaN(l + r + t + b) || !isFinite(l + r + t + b))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(min(l, r), min(t, b), max(r, l), max(t, b));\r\n            }\r\n        };\r\n        BoxView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var _this = this;\r\n            var sleft = _a.sleft, sright = _a.sright, stop = _a.stop, sbottom = _a.sbottom;\r\n            var _loop_1 = function (i) {\r\n                if (isNaN(sleft[i] + stop[i] + sright[i] + sbottom[i]))\r\n                    return \"continue\";\r\n                ctx.rect(sleft[i], stop[i], sright[i] - sleft[i], sbottom[i] - stop[i]);\r\n                if (this_1.visuals.fill.doit) {\r\n                    this_1.visuals.fill.set_vectorize(ctx, i);\r\n                    ctx.beginPath();\r\n                    ctx.rect(sleft[i], stop[i], sright[i] - sleft[i], sbottom[i] - stop[i]);\r\n                    ctx.fill();\r\n                }\r\n                this_1.visuals.hatch.doit2(ctx, i, function () {\r\n                    ctx.beginPath();\r\n                    ctx.rect(sleft[i], stop[i], sright[i] - sleft[i], sbottom[i] - stop[i]);\r\n                    ctx.fill();\r\n                }, function () { return _this.renderer.request_render(); });\r\n                if (this_1.visuals.line.doit) {\r\n                    this_1.visuals.line.set_vectorize(ctx, i);\r\n                    ctx.beginPath();\r\n                    ctx.rect(sleft[i], stop[i], sright[i] - sleft[i], sbottom[i] - stop[i]);\r\n                    ctx.stroke();\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    _loop_1(i);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        // We need to clamp the endpoints inside the viewport, because various browser canvas\r\n        // implementations have issues drawing rects with enpoints far outside the viewport\r\n        BoxView.prototype._clamp_viewport = function () {\r\n            var hr = this.renderer.plot_view.frame.bbox.h_range;\r\n            var vr = this.renderer.plot_view.frame.bbox.v_range;\r\n            var n = this.stop.length;\r\n            for (var i = 0; i < n; i++) {\r\n                this.stop[i] = Math.max(this.stop[i], vr.start);\r\n                this.sbottom[i] = Math.min(this.sbottom[i], vr.end);\r\n                this.sleft[i] = Math.max(this.sleft[i], hr.start);\r\n                this.sright[i] = Math.min(this.sright[i], hr.end);\r\n            }\r\n        };\r\n        BoxView.prototype._hit_rect = function (geometry) {\r\n            return this._hit_rect_against_index(geometry);\r\n        };\r\n        BoxView.prototype._hit_point = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var indices = tslib_1.__spread(this.index.indices({ x0: x, y0: y, x1: x, y1: y }));\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        BoxView.prototype._hit_span = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var indices;\r\n            if (geometry.direction == 'v') {\r\n                var y = this.renderer.yscale.invert(sy);\r\n                var hr = this.renderer.plot_view.frame.bbox.h_range;\r\n                var _a = tslib_1.__read(this.renderer.xscale.r_invert(hr.start, hr.end), 2), x0 = _a[0], x1 = _a[1];\r\n                indices = tslib_1.__spread(this.index.indices({ x0: x0, y0: y, x1: x1, y1: y }));\r\n            }\r\n            else {\r\n                var x = this.renderer.xscale.invert(sx);\r\n                var vr = this.renderer.plot_view.frame.bbox.v_range;\r\n                var _b = tslib_1.__read(this.renderer.yscale.r_invert(vr.start, vr.end), 2), y0 = _b[0], y1 = _b[1];\r\n                indices = tslib_1.__spread(this.index.indices({ x0: x, y0: y0, x1: x, y1: y1 }));\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        BoxView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return BoxView;\r\n    }(glyph_1.GlyphView));\r\n    exports.BoxView = BoxView;\r\n    BoxView.__name__ = \"BoxView\";\r\n    var Box = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Box, _super);\r\n        function Box(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Box.init_Box = function () {\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector, property_mixins_1.HatchVector]);\r\n        };\r\n        return Box;\r\n    }(glyph_1.Glyph));\r\n    exports.Box = Box;\r\n    Box.__name__ = \"Box\";\r\n    Box.init_Box();\r\n}\r\n","/* models\\glyphs\\hex_tile.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var HexTileView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HexTileView, _super);\r\n        function HexTileView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        HexTileView.prototype.scenterxy = function (i) {\r\n            var scx = this.sx[i];\r\n            var scy = this.sy[i];\r\n            return [scx, scy];\r\n        };\r\n        HexTileView.prototype._set_data = function () {\r\n            var n = this._q.length;\r\n            var _a = this.model, orientation = _a.orientation, size = _a.size, aspect_scale = _a.aspect_scale;\r\n            this._x = new types_1.NumberArray(n);\r\n            this._y = new types_1.NumberArray(n);\r\n            var sqrt3 = Math.sqrt(3);\r\n            if (orientation == \"pointytop\") {\r\n                for (var i = 0; i < n; i++) {\r\n                    this._x[i] = size * sqrt3 * (this._q[i] + this._r[i] / 2) / aspect_scale;\r\n                    this._y[i] = -size * 3 / 2 * this._r[i];\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0; i < n; i++) {\r\n                    this._x[i] = size * 3 / 2 * this._q[i];\r\n                    this._y[i] = -size * sqrt3 * (this._r[i] + this._q[i] / 2) * aspect_scale;\r\n                }\r\n            }\r\n        };\r\n        HexTileView.prototype._project_data = function () {\r\n            projections_1.inplace.project_xy(this._x, this._y);\r\n        };\r\n        HexTileView.prototype._index_data = function (index) {\r\n            var _a;\r\n            var ysize = this.model.size;\r\n            var xsize = Math.sqrt(3) * ysize / 2;\r\n            if (this.model.orientation == \"flattop\") {\r\n                _a = tslib_1.__read([ysize, xsize], 2), xsize = _a[0], ysize = _a[1];\r\n                ysize *= this.model.aspect_scale;\r\n            }\r\n            else\r\n                xsize /= this.model.aspect_scale;\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var x = this._x[i];\r\n                var y = this._y[i];\r\n                if (isNaN(x + y) || !isFinite(x + y))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(x - xsize, y - ysize, x + xsize, y + ysize);\r\n            }\r\n        };\r\n        // overriding map_data instead of _map_data because the default automatic mappings\r\n        // for other glyphs (with cartesian coordinates) is not useful\r\n        HexTileView.prototype.map_data = function () {\r\n            var _a, _b;\r\n            _a = tslib_1.__read(this.renderer.coordinates.map_to_screen(this._x, this._y), 2), this.sx = _a[0], this.sy = _a[1];\r\n            _b = tslib_1.__read(this._get_unscaled_vertices(), 2), this.svx = _b[0], this.svy = _b[1];\r\n        };\r\n        HexTileView.prototype._get_unscaled_vertices = function () {\r\n            var size = this.model.size;\r\n            var aspect_scale = this.model.aspect_scale;\r\n            if (this.model.orientation == \"pointytop\") {\r\n                var rscale = this.renderer.yscale;\r\n                var hscale = this.renderer.xscale;\r\n                var r = Math.abs(rscale.compute(0) - rscale.compute(size)); // assumes linear scale\r\n                var h = Math.sqrt(3) / 2 * Math.abs(hscale.compute(0) - hscale.compute(size)) / aspect_scale; // assumes linear scale\r\n                var r2 = r / 2.0;\r\n                var svx = [0, -h, -h, 0, h, h];\r\n                var svy = [r, r2, -r2, -r, -r2, r2];\r\n                return [svx, svy];\r\n            }\r\n            else {\r\n                var rscale = this.renderer.xscale;\r\n                var hscale = this.renderer.yscale;\r\n                var r = Math.abs(rscale.compute(0) - rscale.compute(size)); // assumes linear scale\r\n                var h = Math.sqrt(3) / 2 * Math.abs(hscale.compute(0) - hscale.compute(size)) * aspect_scale; // assumes linear scale\r\n                var r2 = r / 2.0;\r\n                var svx = [r, r2, -r2, -r, -r2, r2];\r\n                var svy = [0, -h, -h, 0, h, h];\r\n                return [svx, svy];\r\n            }\r\n        };\r\n        HexTileView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, svx = _a.svx, svy = _a.svy, _scale = _a._scale;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + _scale[i]))\r\n                        continue;\r\n                    ctx.translate(sx[i], sy[i]);\r\n                    ctx.beginPath();\r\n                    for (var j = 0; j < 6; j++) {\r\n                        ctx.lineTo(svx[j] * _scale[i], svy[j] * _scale[i]);\r\n                    }\r\n                    ctx.closePath();\r\n                    ctx.translate(-sx[i], -sy[i]);\r\n                    if (this.visuals.fill.doit) {\r\n                        this.visuals.fill.set_vectorize(ctx, i);\r\n                        ctx.fill();\r\n                    }\r\n                    if (this.visuals.line.doit) {\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        HexTileView.prototype._hit_point = function (geometry) {\r\n            var e_2, _a;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var candidates = this.index.indices({ x0: x, y0: y, x1: x, y1: y });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var i = candidates_1_1.value;\r\n                    if (hittest.point_in_poly(sx - this.sx[i], sy - this.sy[i], this.svx, this.svy)) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return))\r\n                        _a.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        HexTileView.prototype._hit_span = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var indices;\r\n            if (geometry.direction == 'v') {\r\n                var y = this.renderer.yscale.invert(sy);\r\n                var hr = this.renderer.plot_view.frame.bbox.h_range;\r\n                var _a = tslib_1.__read(this.renderer.xscale.r_invert(hr.start, hr.end), 2), x0 = _a[0], x1 = _a[1];\r\n                indices = tslib_1.__spread(this.index.indices({ x0: x0, y0: y, x1: x1, y1: y }));\r\n            }\r\n            else {\r\n                var x = this.renderer.xscale.invert(sx);\r\n                var vr = this.renderer.plot_view.frame.bbox.v_range;\r\n                var _b = tslib_1.__read(this.renderer.yscale.r_invert(vr.start, vr.end), 2), y0 = _b[0], y1 = _b[1];\r\n                indices = tslib_1.__spread(this.index.indices({ x0: x, y0: y0, x1: x, y1: y1 }));\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        HexTileView.prototype._hit_rect = function (geometry) {\r\n            var sx0 = geometry.sx0, sx1 = geometry.sx1, sy0 = geometry.sy0, sy1 = geometry.sy1;\r\n            var _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n            var _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            var indices = tslib_1.__spread(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 }));\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        HexTileView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return HexTileView;\r\n    }(glyph_1.GlyphView));\r\n    exports.HexTileView = HexTileView;\r\n    HexTileView.__name__ = \"HexTileView\";\r\n    var HexTile = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HexTile, _super);\r\n        function HexTile(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        HexTile.init_HexTile = function () {\r\n            this.prototype.default_view = HexTileView;\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.define({\r\n                r: [p.NumberSpec],\r\n                q: [p.NumberSpec],\r\n                size: [p.Number, 1.0],\r\n                aspect_scale: [p.Number, 1.0],\r\n                scale: [p.NumberSpec, 1.0],\r\n                orientation: [p.HexTileOrientation, \"pointytop\"],\r\n            });\r\n            this.override({ line_color: null });\r\n        };\r\n        return HexTile;\r\n    }(glyph_1.Glyph));\r\n    exports.HexTile = HexTile;\r\n    HexTile.__name__ = \"HexTile\";\r\n    HexTile.init_HexTile();\r\n}\r\n","/* models\\glyphs\\image.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var image_base_1 = require(363) /* ./image_base */;\r\n    var linear_color_mapper_1 = require(256) /* ../mappers/linear_color_mapper */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var ImageView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageView, _super);\r\n        function ImageView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ImageView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.color_mapper.change, function () { return _this._update_image(); });\r\n        };\r\n        ImageView.prototype._update_image = function () {\r\n            // Only reset image_data if already initialized\r\n            if (this.image_data != null) {\r\n                this._set_data(null);\r\n                this.renderer.plot_view.request_render();\r\n            }\r\n        };\r\n        ImageView.prototype._flat_img_to_buf8 = function (img) {\r\n            var cmap = this.model.color_mapper.rgba_mapper;\r\n            return cmap.v_compute(img);\r\n        };\r\n        return ImageView;\r\n    }(image_base_1.ImageBaseView));\r\n    exports.ImageView = ImageView;\r\n    ImageView.__name__ = \"ImageView\";\r\n    // NOTE: this needs to be redefined here, because palettes are located in bokeh-api.js bundle\r\n    var Greys9 = function () { return [\"#000000\", \"#252525\", \"#525252\", \"#737373\", \"#969696\", \"#bdbdbd\", \"#d9d9d9\", \"#f0f0f0\", \"#ffffff\"]; };\r\n    var Image = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Image, _super);\r\n        function Image(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Image.init_Image = function () {\r\n            this.prototype.default_view = ImageView;\r\n            this.define({\r\n                color_mapper: [p.Instance, function () { return new linear_color_mapper_1.LinearColorMapper({ palette: Greys9() }); }],\r\n            });\r\n        };\r\n        return Image;\r\n    }(image_base_1.ImageBase));\r\n    exports.Image = Image;\r\n    Image.__name__ = \"Image\";\r\n    Image.init_Image();\r\n}\r\n","/* models\\glyphs\\image_base.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var ndarray_1 = require(145) /* ../../core/util/ndarray */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var ImageBaseView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageBaseView, _super);\r\n        function ImageBaseView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ImageBaseView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.global_alpha.change, function () { return _this.renderer.request_render(); });\r\n        };\r\n        ImageBaseView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var image_data = _a.image_data, sx = _a.sx, sy = _a.sy, sw = _a.sw, sh = _a.sh;\r\n            var old_smoothing = ctx.getImageSmoothingEnabled();\r\n            ctx.setImageSmoothingEnabled(false);\r\n            ctx.globalAlpha = this.model.global_alpha;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (image_data[i] == null || isNaN(sx[i] + sy[i] + sw[i] + sh[i]))\r\n                        continue;\r\n                    var y_offset = sy[i];\r\n                    ctx.translate(0, y_offset);\r\n                    ctx.scale(1, -1);\r\n                    ctx.translate(0, -y_offset);\r\n                    ctx.drawImage(image_data[i], sx[i] | 0, sy[i] | 0, sw[i], sh[i]);\r\n                    ctx.translate(0, y_offset);\r\n                    ctx.scale(1, -1);\r\n                    ctx.translate(0, -y_offset);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            ctx.setImageSmoothingEnabled(old_smoothing);\r\n        };\r\n        ImageBaseView.prototype._set_data = function (indices) {\r\n            this._set_width_heigh_data();\r\n            for (var i = 0, end = this._image.length; i < end; i++) {\r\n                if (indices != null && indices.indexOf(i) < 0)\r\n                    continue;\r\n                var img = this._image[i];\r\n                var flat_img = void 0;\r\n                if (ndarray_1.is_NDArray(img)) {\r\n                    assert_1.assert(img.dimension == 2, \"expected a 2D array\");\r\n                    flat_img = img;\r\n                    this._height[i] = img.shape[0];\r\n                    this._width[i] = img.shape[1];\r\n                }\r\n                else {\r\n                    flat_img = array_1.concat(img);\r\n                    this._height[i] = img.length;\r\n                    this._width[i] = img[0].length;\r\n                }\r\n                var buf8 = this._flat_img_to_buf8(flat_img);\r\n                this._set_image_data_from_buffer(i, buf8);\r\n            }\r\n        };\r\n        ImageBaseView.prototype._index_data = function (index) {\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var _a = tslib_1.__read(this._lrtb(i), 4), l = _a[0], r = _a[1], t = _a[2], b = _a[3];\r\n                if (isNaN(l + r + t + b) || !isFinite(l + r + t + b))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(l, b, r, t);\r\n            }\r\n        };\r\n        ImageBaseView.prototype._lrtb = function (i) {\r\n            var xr = this.renderer.xscale.source_range;\r\n            var x1 = this._x[i];\r\n            var x2 = xr.is_reversed ? x1 - this._dw[i] : x1 + this._dw[i];\r\n            var yr = this.renderer.yscale.source_range;\r\n            var y1 = this._y[i];\r\n            var y2 = yr.is_reversed ? y1 - this._dh[i] : y1 + this._dh[i];\r\n            var _a = tslib_1.__read(x1 < x2 ? [x1, x2] : [x2, x1], 2), l = _a[0], r = _a[1];\r\n            var _b = tslib_1.__read(y1 < y2 ? [y1, y2] : [y2, y1], 2), b = _b[0], t = _b[1];\r\n            return [l, r, t, b];\r\n        };\r\n        ImageBaseView.prototype._set_width_heigh_data = function () {\r\n            if (this.image_data == null || this.image_data.length != this._image.length)\r\n                this.image_data = new Array(this._image.length);\r\n            if (this._width == null || this._width.length != this._image.length)\r\n                this._width = new types_1.NumberArray(this._image.length);\r\n            if (this._height == null || this._height.length != this._image.length)\r\n                this._height = new types_1.NumberArray(this._image.length);\r\n        };\r\n        ImageBaseView.prototype._get_or_create_canvas = function (i) {\r\n            var _image_data = this.image_data[i];\r\n            if (_image_data != null && _image_data.width == this._width[i] &&\r\n                _image_data.height == this._height[i])\r\n                return _image_data;\r\n            else {\r\n                var canvas = document.createElement('canvas');\r\n                canvas.width = this._width[i];\r\n                canvas.height = this._height[i];\r\n                return canvas;\r\n            }\r\n        };\r\n        ImageBaseView.prototype._set_image_data_from_buffer = function (i, buf8) {\r\n            var canvas = this._get_or_create_canvas(i);\r\n            var ctx = canvas.getContext('2d');\r\n            var image_data = ctx.getImageData(0, 0, this._width[i], this._height[i]);\r\n            image_data.data.set(buf8);\r\n            ctx.putImageData(image_data, 0, 0);\r\n            this.image_data[i] = canvas;\r\n        };\r\n        ImageBaseView.prototype._map_data = function () {\r\n            switch (this.model.properties.dw.units) {\r\n                case \"data\": {\r\n                    this.sw = this.sdist(this.renderer.xscale, this._x, this._dw, 'edge', this.model.dilate);\r\n                    break;\r\n                }\r\n                case \"screen\": {\r\n                    this.sw = this._dw;\r\n                    break;\r\n                }\r\n            }\r\n            switch (this.model.properties.dh.units) {\r\n                case \"data\": {\r\n                    this.sh = this.sdist(this.renderer.yscale, this._y, this._dh, 'edge', this.model.dilate);\r\n                    break;\r\n                }\r\n                case \"screen\": {\r\n                    this.sh = this._dh;\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        ImageBaseView.prototype._image_index = function (index, x, y) {\r\n            var _a = tslib_1.__read(this._lrtb(index), 4), l = _a[0], r = _a[1], t = _a[2], b = _a[3];\r\n            var width = this._width[index];\r\n            var height = this._height[index];\r\n            var dx = (r - l) / width;\r\n            var dy = (t - b) / height;\r\n            var dim1 = Math.floor((x - l) / dx);\r\n            var dim2 = Math.floor((y - b) / dy);\r\n            if (this.renderer.xscale.source_range.is_reversed)\r\n                dim1 = width - dim1 - 1;\r\n            if (this.renderer.yscale.source_range.is_reversed)\r\n                dim2 = height - dim2 - 1;\r\n            return { index: index, dim1: dim1, dim2: dim2, flat_index: dim2 * width + dim1 };\r\n        };\r\n        ImageBaseView.prototype._hit_point = function (geometry) {\r\n            var e_2, _a;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var candidates = this.index.indices({ x0: x, x1: x, y0: y, y1: y });\r\n            var result = new selection_1.Selection();\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var index = candidates_1_1.value;\r\n                    if (sx != Infinity && sy != Infinity) {\r\n                        result.image_indices.push(this._image_index(index, x, y));\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return))\r\n                        _a.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        return ImageBaseView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.ImageBaseView = ImageBaseView;\r\n    ImageBaseView.__name__ = \"ImageBaseView\";\r\n    var ImageBase = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageBase, _super);\r\n        function ImageBase(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ImageBase.init_ImageBase = function () {\r\n            this.define({\r\n                image: [p.NDArraySpec],\r\n                dw: [p.DistanceSpec],\r\n                dh: [p.DistanceSpec],\r\n                dilate: [p.Boolean, false],\r\n                global_alpha: [p.Number, 1.0],\r\n            });\r\n        };\r\n        return ImageBase;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.ImageBase = ImageBase;\r\n    ImageBase.__name__ = \"ImageBase\";\r\n    ImageBase.init_ImageBase();\r\n}\r\n","/* models\\glyphs\\image_rgba.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var image_base_1 = require(363) /* ./image_base */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var ImageRGBAView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageRGBAView, _super);\r\n        function ImageRGBAView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ImageRGBAView.prototype._flat_img_to_buf8 = function (img) {\r\n            var array;\r\n            if (types_1.isArray(img)) {\r\n                array = new Uint32Array(img);\r\n            }\r\n            else {\r\n                array = img;\r\n            }\r\n            return new Uint8Array(array.buffer);\r\n        };\r\n        return ImageRGBAView;\r\n    }(image_base_1.ImageBaseView));\r\n    exports.ImageRGBAView = ImageRGBAView;\r\n    ImageRGBAView.__name__ = \"ImageRGBAView\";\r\n    var ImageRGBA = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageRGBA, _super);\r\n        function ImageRGBA(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ImageRGBA.init_ImageRGBA = function () {\r\n            this.prototype.default_view = ImageRGBAView;\r\n        };\r\n        return ImageRGBA;\r\n    }(image_base_1.ImageBase));\r\n    exports.ImageRGBA = ImageRGBA;\r\n    ImageRGBA.__name__ = \"ImageRGBA\";\r\n    ImageRGBA.init_ImageRGBA();\r\n}\r\n","/* models\\glyphs\\image_url.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var image_1 = require(366) /* ../../core/util/image */;\r\n    var ImageURLView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageURLView, _super);\r\n        function ImageURLView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._images_rendered = false;\r\n            return _this;\r\n        }\r\n        ImageURLView.prototype.initialize = function () {\r\n            var _this = this;\r\n            _super.prototype.initialize.call(this);\r\n            this.connect(this.model.properties.global_alpha.change, function () { return _this.renderer.request_render(); });\r\n        };\r\n        ImageURLView.prototype._index_data = function (index) {\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                // TODO: add a proper implementation (same as ImageBase?)\r\n                index.add_empty();\r\n            }\r\n        };\r\n        ImageURLView.prototype._set_data = function () {\r\n            var _a, _b;\r\n            var _this = this;\r\n            if (this.image == null || this.image.length != this._url.length)\r\n                this.image = arrayable_1.map(this._url, function () { return null; });\r\n            var _c = this.model, retry_attempts = _c.retry_attempts, retry_timeout = _c.retry_timeout;\r\n            var _loop_1 = function (i, end) {\r\n                var url = this_1._url[i];\r\n                if (url == null || url == \"\")\r\n                    return \"continue\";\r\n                new image_1.ImageLoader(url, {\r\n                    loaded: function (image) {\r\n                        _this.image[i] = image;\r\n                        _this.renderer.request_render();\r\n                    },\r\n                    attempts: retry_attempts + 1,\r\n                    timeout: retry_timeout,\r\n                });\r\n            };\r\n            var this_1 = this;\r\n            for (var i = 0, end = this._url.length; i < end; i++) {\r\n                _loop_1(i, end);\r\n            }\r\n            var w_data = this.model.properties.w.units == \"data\";\r\n            var h_data = this.model.properties.h.units == \"data\";\r\n            var n = this._x.length;\r\n            var xs = new types_1.NumberArray(w_data ? 2 * n : n);\r\n            var ys = new types_1.NumberArray(h_data ? 2 * n : n);\r\n            var anchor = this.model.anchor;\r\n            function x0x1(x, w) {\r\n                switch (anchor) {\r\n                    case \"top_left\":\r\n                    case \"bottom_left\":\r\n                    case \"center_left\":\r\n                        return [x, x + w];\r\n                    case \"top_center\":\r\n                    case \"bottom_center\":\r\n                    case \"center\":\r\n                        return [x - w / 2, x + w / 2];\r\n                    case \"top_right\":\r\n                    case \"bottom_right\":\r\n                    case \"center_right\":\r\n                        return [x - w, x];\r\n                }\r\n            }\r\n            function y0y1(y, h) {\r\n                switch (anchor) {\r\n                    case \"top_left\":\r\n                    case \"top_center\":\r\n                    case \"top_right\":\r\n                        return [y, y - h];\r\n                    case \"bottom_left\":\r\n                    case \"bottom_center\":\r\n                    case \"bottom_right\":\r\n                        return [y + h, y];\r\n                    case \"center_left\":\r\n                    case \"center\":\r\n                    case \"center_right\":\r\n                        return [y + h / 2, y - h / 2];\r\n                }\r\n            }\r\n            // if the width/height are in screen units, don't try to include them in bounds\r\n            if (w_data) {\r\n                for (var i = 0; i < n; i++) {\r\n                    _a = tslib_1.__read(x0x1(this._x[i], this._w[i]), 2), xs[i] = _a[0], xs[n + i] = _a[1];\r\n                }\r\n            }\r\n            else\r\n                xs.set(this._x, 0);\r\n            if (h_data) {\r\n                for (var i = 0; i < n; i++) {\r\n                    _b = tslib_1.__read(y0y1(this._y[i], this._h[i]), 2), ys[i] = _b[0], ys[n + i] = _b[1];\r\n                }\r\n            }\r\n            else\r\n                ys.set(this._y, 0);\r\n            var _d = tslib_1.__read(arrayable_1.minmax(xs), 2), x0 = _d[0], x1 = _d[1];\r\n            var _e = tslib_1.__read(arrayable_1.minmax(ys), 2), y0 = _e[0], y1 = _e[1];\r\n            this._bounds_rect = { x0: x0, x1: x1, y0: y0, y1: y1 };\r\n        };\r\n        ImageURLView.prototype.has_finished = function () {\r\n            return _super.prototype.has_finished.call(this) && this._images_rendered == true;\r\n        };\r\n        ImageURLView.prototype._map_data = function () {\r\n            // Better to check this.model.w and this.model.h for null since the set_data\r\n            // machinery will have converted this._w and this._w to lists of null\r\n            var ws = this.model.w != null ? this._w : arrayable_1.map(this._x, function () { return NaN; });\r\n            var hs = this.model.h != null ? this._h : arrayable_1.map(this._x, function () { return NaN; });\r\n            switch (this.model.properties.w.units) {\r\n                case \"data\": {\r\n                    this.sw = this.sdist(this.renderer.xscale, this._x, ws, \"edge\", this.model.dilate);\r\n                    break;\r\n                }\r\n                case \"screen\": {\r\n                    this.sw = ws;\r\n                    break;\r\n                }\r\n            }\r\n            switch (this.model.properties.h.units) {\r\n                case \"data\": {\r\n                    this.sh = this.sdist(this.renderer.yscale, this._y, hs, \"edge\", this.model.dilate);\r\n                    break;\r\n                }\r\n                case \"screen\": {\r\n                    this.sh = hs;\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        ImageURLView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var image = _a.image, sx = _a.sx, sy = _a.sy, sw = _a.sw, sh = _a.sh, _angle = _a._angle;\r\n            // TODO (bev): take actual border width into account when clipping\r\n            var frame = this.renderer.plot_view.frame;\r\n            ctx.rect(frame.bbox.left + 1, frame.bbox.top + 1, frame.bbox.width - 2, frame.bbox.height - 2);\r\n            ctx.clip();\r\n            var finished = true;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + _angle[i]))\r\n                        continue;\r\n                    var img = image[i];\r\n                    if (img == null) {\r\n                        finished = false;\r\n                        continue;\r\n                    }\r\n                    this._render_image(ctx, i, img, sx, sy, sw, sh, _angle);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            if (finished && !this._images_rendered) {\r\n                this._images_rendered = true;\r\n                this.notify_finished();\r\n            }\r\n        };\r\n        ImageURLView.prototype._final_sx_sy = function (anchor, sx, sy, sw, sh) {\r\n            switch (anchor) {\r\n                case 'top_left': return [sx, sy];\r\n                case 'top_center': return [sx - (sw / 2), sy];\r\n                case 'top_right': return [sx - sw, sy];\r\n                case 'center_right': return [sx - sw, sy - (sh / 2)];\r\n                case 'bottom_right': return [sx - sw, sy - sh];\r\n                case 'bottom_center': return [sx - (sw / 2), sy - sh];\r\n                case 'bottom_left': return [sx, sy - sh];\r\n                case 'center_left': return [sx, sy - (sh / 2)];\r\n                case 'center': return [sx - (sw / 2), sy - (sh / 2)];\r\n            }\r\n        };\r\n        ImageURLView.prototype._render_image = function (ctx, i, image, sx, sy, sw, sh, angle) {\r\n            if (isNaN(sw[i]))\r\n                sw[i] = image.width;\r\n            if (isNaN(sh[i]))\r\n                sh[i] = image.height;\r\n            var anchor = this.model.anchor;\r\n            var _a = tslib_1.__read(this._final_sx_sy(anchor, sx[i], sy[i], sw[i], sh[i]), 2), sxi = _a[0], syi = _a[1];\r\n            ctx.save();\r\n            ctx.globalAlpha = this.model.global_alpha;\r\n            var sw2 = sw[i] / 2;\r\n            var sh2 = sh[i] / 2;\r\n            if (angle[i]) {\r\n                ctx.translate(sxi, syi);\r\n                //rotation about center of image\r\n                ctx.translate(sw2, sh2);\r\n                ctx.rotate(angle[i]);\r\n                ctx.translate(-sw2, -sh2);\r\n                ctx.drawImage(image, 0, 0, sw[i], sh[i]);\r\n                ctx.translate(sw2, sh2);\r\n                ctx.rotate(-angle[i]);\r\n                ctx.translate(-sw2, -sh2);\r\n                ctx.translate(-sxi, -syi);\r\n            }\r\n            else\r\n                ctx.drawImage(image, sxi, syi, sw[i], sh[i]);\r\n            ctx.restore();\r\n        };\r\n        ImageURLView.prototype.bounds = function () {\r\n            return this._bounds_rect;\r\n        };\r\n        return ImageURLView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.ImageURLView = ImageURLView;\r\n    ImageURLView.__name__ = \"ImageURLView\";\r\n    var ImageURL = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageURL, _super);\r\n        function ImageURL(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ImageURL.init_ImageURL = function () {\r\n            this.prototype.default_view = ImageURLView;\r\n            this.define({\r\n                url: [p.StringSpec],\r\n                anchor: [p.Anchor, 'top_left'],\r\n                global_alpha: [p.Number, 1.0],\r\n                angle: [p.AngleSpec, 0],\r\n                w: [p.DistanceSpec],\r\n                h: [p.DistanceSpec],\r\n                dilate: [p.Boolean, false],\r\n                retry_attempts: [p.Number, 0],\r\n                retry_timeout: [p.Number, 0],\r\n            });\r\n        };\r\n        return ImageURL;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.ImageURL = ImageURL;\r\n    ImageURL.__name__ = \"ImageURL\";\r\n    ImageURL.init_ImageURL();\r\n}\r\n","/* core\\util\\image.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var logging_1 = require(134) /* ../logging */;\r\n    var ImageLoader = /** @class */ (function () {\r\n        function ImageLoader(url, options) {\r\n            var _this = this;\r\n            if (options === void 0) {\r\n                options = {};\r\n            }\r\n            this._image = new Image();\r\n            this._finished = false;\r\n            var _a = options.attempts, attempts = _a === void 0 ? 1 : _a, _b = options.timeout, timeout = _b === void 0 ? 1 : _b;\r\n            this.promise = new Promise(function (resolve, _reject) {\r\n                _this._image.crossOrigin = \"anonymous\";\r\n                var retries = 0;\r\n                _this._image.onerror = function () {\r\n                    if (++retries == attempts) {\r\n                        var message = \"unable to load \" + url + \" image after \" + attempts + \" attempts\";\r\n                        logging_1.logger.warn(message);\r\n                        if (_this._image.crossOrigin != null) {\r\n                            logging_1.logger.warn(\"attempting to load \" + url + \" without a cross origin policy\");\r\n                            _this._image.crossOrigin = null;\r\n                            retries = 0;\r\n                        }\r\n                        else {\r\n                            if (options.failed != null)\r\n                                options.failed();\r\n                            return; // XXX reject(new Error(message))\r\n                        }\r\n                    }\r\n                    setTimeout(function () { return _this._image.src = url; }, timeout);\r\n                };\r\n                _this._image.onload = function () {\r\n                    _this._finished = true;\r\n                    if (options.loaded != null)\r\n                        options.loaded(_this._image);\r\n                    resolve(_this._image);\r\n                };\r\n                _this._image.src = url;\r\n            });\r\n        }\r\n        Object.defineProperty(ImageLoader.prototype, \"finished\", {\r\n            get: function () {\r\n                return this._finished;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ImageLoader.prototype, \"image\", {\r\n            get: function () {\r\n                return this._image;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ImageLoader;\r\n    }());\r\n    exports.ImageLoader = ImageLoader;\r\n    ImageLoader.__name__ = \"ImageLoader\";\r\n}\r\n","/* models\\glyphs\\multi_line.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var MultiLineView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MultiLineView, _super);\r\n        function MultiLineView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        MultiLineView.prototype._project_data = function () {\r\n            projections_1.inplace.project_xy(this._xs.array, this._ys.array);\r\n        };\r\n        MultiLineView.prototype._index_data = function (index) {\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var xsi = this._xs.get(i);\r\n                if (xsi.length == 0) {\r\n                    index.add_empty();\r\n                    continue;\r\n                }\r\n                var ysi = this._ys.get(i);\r\n                if (ysi.length == 0) {\r\n                    index.add_empty();\r\n                    continue;\r\n                }\r\n                var _a = tslib_1.__read(arrayable_1.minmax(xsi), 2), x0 = _a[0], x1 = _a[1];\r\n                var _b = tslib_1.__read(arrayable_1.minmax(ysi), 2), y0 = _b[0], y1 = _b[1];\r\n                index.add(x0, y0, x1, y1);\r\n            }\r\n        };\r\n        MultiLineView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sxs = _a.sxs, sys = _a.sys;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    var sx = sxs.get(i);\r\n                    var sy = sys.get(i);\r\n                    this.visuals.line.set_vectorize(ctx, i);\r\n                    for (var j = 0, end = sx.length; j < end; j++) {\r\n                        if (j == 0) {\r\n                            ctx.beginPath();\r\n                            ctx.moveTo(sx[j], sy[j]);\r\n                            continue;\r\n                        }\r\n                        else if (isNaN(sx[j]) || isNaN(sy[j])) {\r\n                            ctx.stroke();\r\n                            ctx.beginPath();\r\n                            continue;\r\n                        }\r\n                        else\r\n                            ctx.lineTo(sx[j], sy[j]);\r\n                    }\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        MultiLineView.prototype._hit_point = function (geometry) {\r\n            var point = { x: geometry.sx, y: geometry.sy };\r\n            var shortest = 9999;\r\n            var hits = new Map();\r\n            for (var i = 0, end = this.sxs.length; i < end; i++) {\r\n                var threshold = Math.max(2, this.visuals.line.cache_select('line_width', i) / 2);\r\n                var sxsi = this.sxs.get(i);\r\n                var sysi = this.sys.get(i);\r\n                var points = null;\r\n                for (var j = 0, endj = sxsi.length - 1; j < endj; j++) {\r\n                    var p0 = { x: sxsi[j], y: sysi[j] };\r\n                    var p1 = { x: sxsi[j + 1], y: sysi[j + 1] };\r\n                    var dist = hittest.dist_to_segment(point, p0, p1);\r\n                    if (dist < threshold && dist < shortest) {\r\n                        shortest = dist;\r\n                        points = [j];\r\n                    }\r\n                }\r\n                if (points != null) {\r\n                    hits.set(i, points);\r\n                }\r\n            }\r\n            return new selection_1.Selection({\r\n                indices: tslib_1.__spread(hits.keys()),\r\n                multiline_indices: object_1.to_object(hits),\r\n            });\r\n        };\r\n        MultiLineView.prototype._hit_span = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var val;\r\n            var vs;\r\n            if (geometry.direction == 'v') {\r\n                val = this.renderer.yscale.invert(sy);\r\n                vs = this._ys;\r\n            }\r\n            else {\r\n                val = this.renderer.xscale.invert(sx);\r\n                vs = this._xs;\r\n            }\r\n            var hits = new Map();\r\n            for (var i = 0, end = vs.length; i < end; i++) {\r\n                var vsi = vs.get(i);\r\n                var points = [];\r\n                for (var j = 0, endj = vsi.length - 1; j < endj; j++) {\r\n                    if (vsi[j] <= val && val <= vsi[j + 1])\r\n                        points.push(j);\r\n                }\r\n                if (points.length > 0) {\r\n                    hits.set(i, points);\r\n                }\r\n            }\r\n            return new selection_1.Selection({\r\n                indices: tslib_1.__spread(hits.keys()),\r\n                multiline_indices: object_1.to_object(hits),\r\n            });\r\n        };\r\n        MultiLineView.prototype.get_interpolation_hit = function (i, point_i, geometry) {\r\n            var xsi = this._xs.get(i);\r\n            var ysi = this._ys.get(i);\r\n            var x2 = xsi[point_i];\r\n            var y2 = ysi[point_i];\r\n            var x3 = xsi[point_i + 1];\r\n            var y3 = ysi[point_i + 1];\r\n            return utils_1.line_interpolation(this.renderer, geometry, x2, y2, x3, y3);\r\n        };\r\n        MultiLineView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        MultiLineView.prototype.scenterxy = function () {\r\n            throw new Error(this + \".scenterxy() is not implemented\");\r\n        };\r\n        return MultiLineView;\r\n    }(glyph_1.GlyphView));\r\n    exports.MultiLineView = MultiLineView;\r\n    MultiLineView.__name__ = \"MultiLineView\";\r\n    var MultiLine = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MultiLine, _super);\r\n        function MultiLine(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MultiLine.init_MultiLine = function () {\r\n            this.prototype.default_view = MultiLineView;\r\n            this.define({\r\n                xs: [p.XCoordinateSeqSpec, { field: \"xs\" }],\r\n                ys: [p.YCoordinateSeqSpec, { field: \"ys\" }],\r\n            });\r\n            this.mixins(property_mixins_1.LineVector);\r\n        };\r\n        return MultiLine;\r\n    }(glyph_1.Glyph));\r\n    exports.MultiLine = MultiLine;\r\n    MultiLine.__name__ = \"MultiLine\";\r\n    MultiLine.init_MultiLine();\r\n}\r\n","/* models\\glyphs\\multi_polygons.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var spatial_1 = require(210) /* ../../core/util/spatial */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var arrayable_2 = require(127) /* ../../core/util/arrayable */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var MultiPolygonsView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MultiPolygonsView, _super);\r\n        function MultiPolygonsView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        MultiPolygonsView.prototype._project_data = function () {\r\n            // TODO\r\n        };\r\n        MultiPolygonsView.prototype._index_data = function (index) {\r\n            var min = Math.min, max = Math.max;\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var xsi = this._xs[i];\r\n                var ysi = this._ys[i];\r\n                if (xsi.length == 0 || ysi.length == 0) {\r\n                    index.add_empty();\r\n                    continue;\r\n                }\r\n                var xi0 = +Infinity;\r\n                var xi1 = -Infinity;\r\n                var yi0 = +Infinity;\r\n                var yi1 = -Infinity;\r\n                for (var j = 0, endj = xsi.length; j < endj; j++) {\r\n                    var xsij = xsi[j][0]; // do not use holes\r\n                    var ysij = ysi[j][0]; // do not use holes\r\n                    if (xsij.length != 0 && ysij.length != 0) {\r\n                        var _a = tslib_1.__read(arrayable_1.minmax(xsij), 2), xij0 = _a[0], xij1 = _a[1];\r\n                        var _b = tslib_1.__read(arrayable_1.minmax(ysij), 2), yij0 = _b[0], yij1 = _b[1];\r\n                        xi0 = min(xi0, xij0);\r\n                        xi1 = max(xi1, xij1);\r\n                        yi0 = min(yi0, yij0);\r\n                        yi1 = max(yi1, yij1);\r\n                    }\r\n                }\r\n                if (!isFinite(xi0 + xi1 + yi0 + yi1))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(xi0, yi0, xi1, yi1);\r\n            }\r\n            this._hole_index = this._index_hole_data();\r\n        };\r\n        MultiPolygonsView.prototype._index_hole_data = function () {\r\n            var min = Math.min, max = Math.max;\r\n            var data_size = this.data_size;\r\n            var index = new spatial_1.SpatialIndex(data_size);\r\n            for (var i = 0; i < data_size; i++) {\r\n                var xsi = this._xs[i];\r\n                var ysi = this._ys[i];\r\n                if (xsi.length == 0 || ysi.length == 0) {\r\n                    index.add_empty();\r\n                    continue;\r\n                }\r\n                var xi0 = +Infinity;\r\n                var xi1 = -Infinity;\r\n                var yi0 = +Infinity;\r\n                var yi1 = -Infinity;\r\n                for (var j = 0, endj = xsi.length; j < endj; j++) {\r\n                    var xsij = xsi[j];\r\n                    var ysij = ysi[j];\r\n                    if (xsij.length > 1 && ysij.length > 1) {\r\n                        for (var k = 1, endk = xsij.length; k < endk; k++) {\r\n                            var _a = tslib_1.__read(arrayable_1.minmax(xsij[k]), 2), xij0 = _a[0], xij1 = _a[1];\r\n                            var _b = tslib_1.__read(arrayable_1.minmax(ysij[k]), 2), yij0 = _b[0], yij1 = _b[1];\r\n                            xi0 = min(xi0, xij0);\r\n                            xi1 = max(xi1, xij1);\r\n                            yi0 = min(yi0, yij0);\r\n                            yi1 = max(yi1, yij1);\r\n                        }\r\n                    }\r\n                }\r\n                if (!isFinite(xi0 + xi1 + yi0 + yi1))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(xi0, yi0, xi1, yi1);\r\n            }\r\n            index.finish();\r\n            return index;\r\n        };\r\n        MultiPolygonsView.prototype._mask_data = function () {\r\n            var xr = this.renderer.plot_view.frame.x_range;\r\n            var _a = tslib_1.__read([xr.min, xr.max], 2), x0 = _a[0], x1 = _a[1];\r\n            var yr = this.renderer.plot_view.frame.y_range;\r\n            var _b = tslib_1.__read([yr.min, yr.max], 2), y0 = _b[0], y1 = _b[1];\r\n            return this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n        };\r\n        MultiPolygonsView.prototype._inner_loop = function (ctx, sx, sy) {\r\n            ctx.beginPath();\r\n            for (var j = 0, endj = sx.length; j < endj; j++) {\r\n                for (var k = 0, endk = sx[j].length; k < endk; k++) {\r\n                    var _sx = sx[j][k];\r\n                    var _sy = sy[j][k];\r\n                    for (var l = 0, endl = _sx.length; l < endl; l++) {\r\n                        if (l == 0) {\r\n                            ctx.moveTo(_sx[l], _sy[l]);\r\n                            continue;\r\n                        }\r\n                        else\r\n                            ctx.lineTo(_sx[l], _sy[l]);\r\n                    }\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n        };\r\n        MultiPolygonsView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var _this = this;\r\n            var sxs = _a.sxs, sys = _a.sys;\r\n            if (this.visuals.fill.doit || this.visuals.line.doit) {\r\n                var _loop_1 = function (i) {\r\n                    var _a = tslib_1.__read([sxs[i], sys[i]], 2), sx = _a[0], sy = _a[1];\r\n                    if (this_1.visuals.fill.doit) {\r\n                        this_1.visuals.fill.set_vectorize(ctx, i);\r\n                        this_1._inner_loop(ctx, sx, sy);\r\n                        ctx.fill(\"evenodd\");\r\n                    }\r\n                    this_1.visuals.hatch.doit2(ctx, i, function () {\r\n                        _this._inner_loop(ctx, sx, sy);\r\n                        ctx.fill(\"evenodd\");\r\n                    }, function () { return _this.renderer.request_render(); });\r\n                    if (this_1.visuals.line.doit) {\r\n                        this_1.visuals.line.set_vectorize(ctx, i);\r\n                        this_1._inner_loop(ctx, sx, sy);\r\n                        ctx.stroke();\r\n                    }\r\n                };\r\n                var this_1 = this;\r\n                try {\r\n                    for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                        var i = indices_1_1.value;\r\n                        _loop_1(i);\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                            _b.call(indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        MultiPolygonsView.prototype._hit_rect = function (geometry) {\r\n            var e_2, _a;\r\n            var sx0 = geometry.sx0, sx1 = geometry.sx1, sy0 = geometry.sy0, sy1 = geometry.sy1;\r\n            var xs = [sx0, sx1, sx1, sx0];\r\n            var ys = [sy0, sy0, sy1, sy1];\r\n            var _b = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _b[0], x1 = _b[1];\r\n            var _c = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _c[0], y1 = _c[1];\r\n            var candidates = this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var index = candidates_1_1.value;\r\n                    var sxss = this.sxs[index];\r\n                    var syss = this.sys[index];\r\n                    var hit = true;\r\n                    for (var j = 0, endj = sxss.length; j < endj; j++) {\r\n                        for (var k = 0, endk = sxss[j][0].length; k < endk; k++) {\r\n                            var sx = sxss[j][0][k];\r\n                            var sy = syss[j][0][k];\r\n                            if (!hittest.point_in_poly(sx, sy, xs, ys)) {\r\n                                hit = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (!hit)\r\n                            break;\r\n                    }\r\n                    if (hit) {\r\n                        indices.push(index);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return))\r\n                        _a.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        MultiPolygonsView.prototype._hit_point = function (geometry) {\r\n            var e_3, _a;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var candidates = this.index.indices({ x0: x, y0: y, x1: x, y1: y });\r\n            var hole_candidates = this._hole_index.indices({ x0: x, y0: y, x1: x, y1: y });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_2 = tslib_1.__values(candidates), candidates_2_1 = candidates_2.next(); !candidates_2_1.done; candidates_2_1 = candidates_2.next()) {\r\n                    var index = candidates_2_1.value;\r\n                    var sxs = this.sxs[index];\r\n                    var sys = this.sys[index];\r\n                    for (var j = 0, endj = sxs.length; j < endj; j++) {\r\n                        var nk = sxs[j].length;\r\n                        if (hittest.point_in_poly(sx, sy, sxs[j][0], sys[j][0])) {\r\n                            if (nk == 1) {\r\n                                indices.push(index);\r\n                            }\r\n                            else if (!hole_candidates.get(index)) {\r\n                                indices.push(index);\r\n                            }\r\n                            else if (nk > 1) {\r\n                                var in_a_hole = false;\r\n                                for (var k = 1; k < nk; k++) {\r\n                                    var sxs_k = sxs[j][k];\r\n                                    var sys_k = sys[j][k];\r\n                                    if (hittest.point_in_poly(sx, sy, sxs_k, sys_k)) {\r\n                                        in_a_hole = true;\r\n                                        break;\r\n                                    }\r\n                                    else {\r\n                                        continue;\r\n                                    }\r\n                                }\r\n                                if (!in_a_hole) {\r\n                                    indices.push(index);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_2_1 && !candidates_2_1.done && (_a = candidates_2.return))\r\n                        _a.call(candidates_2);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        MultiPolygonsView.prototype._get_snap_coord = function (array) {\r\n            return arrayable_2.sum(array) / array.length;\r\n        };\r\n        MultiPolygonsView.prototype.scenterxy = function (i, sx, sy) {\r\n            if (this.sxs[i].length == 1) {\r\n                // We don't have discontinuous objects so we're ok\r\n                var scx = this._get_snap_coord(this.sxs[i][0][0]);\r\n                var scy = this._get_snap_coord(this.sys[i][0][0]);\r\n                return [scx, scy];\r\n            }\r\n            else {\r\n                // We have discontinuous objects, so we need to find which\r\n                // one we're in, we can use point_in_poly again\r\n                var sxs = this.sxs[i];\r\n                var sys = this.sys[i];\r\n                for (var j = 0, end = sxs.length; j < end; j++) {\r\n                    if (hittest.point_in_poly(sx, sy, sxs[j][0], sys[j][0])) {\r\n                        var scx = this._get_snap_coord(sxs[j][0]);\r\n                        var scy = this._get_snap_coord(sys[j][0]);\r\n                        return [scx, scy];\r\n                    }\r\n                }\r\n            }\r\n            assert_1.unreachable();\r\n        };\r\n        MultiPolygonsView.prototype.map_data = function () {\r\n            var n_i = this._xs.length;\r\n            this.sxs = new Array(n_i);\r\n            this.sys = new Array(n_i);\r\n            for (var i = 0; i < n_i; i++) {\r\n                var n_j = this._xs[i].length;\r\n                this.sxs[i] = new Array(n_j);\r\n                this.sys[i] = new Array(n_j);\r\n                for (var j = 0; j < n_j; j++) {\r\n                    var n_k = this._xs[i][j].length;\r\n                    this.sxs[i][j] = new Array(n_k);\r\n                    this.sys[i][j] = new Array(n_k);\r\n                    for (var k = 0; k < n_k; k++) {\r\n                        var _a = tslib_1.__read(this.renderer.coordinates.map_to_screen(this._xs[i][j][k], this._ys[i][j][k]), 2), sx = _a[0], sy = _a[1];\r\n                        this.sxs[i][j][k] = sx;\r\n                        this.sys[i][j][k] = sy;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        MultiPolygonsView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return MultiPolygonsView;\r\n    }(glyph_1.GlyphView));\r\n    exports.MultiPolygonsView = MultiPolygonsView;\r\n    MultiPolygonsView.__name__ = \"MultiPolygonsView\";\r\n    var MultiPolygons = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MultiPolygons, _super);\r\n        function MultiPolygons(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MultiPolygons.init_MultiPolygons = function () {\r\n            this.prototype.default_view = MultiPolygonsView;\r\n            this.define({\r\n                xs: [p.XCoordinateSeqSeqSeqSpec, { field: \"xs\" }],\r\n                ys: [p.YCoordinateSeqSeqSeqSpec, { field: \"ys\" }],\r\n            });\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector, property_mixins_1.HatchVector]);\r\n        };\r\n        return MultiPolygons;\r\n    }(glyph_1.Glyph));\r\n    exports.MultiPolygons = MultiPolygons;\r\n    MultiPolygons.__name__ = \"MultiPolygons\";\r\n    MultiPolygons.init_MultiPolygons();\r\n}\r\n","/* models\\glyphs\\oval.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var ellipse_oval_1 = require(358) /* ./ellipse_oval */;\r\n    var OvalView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(OvalView, _super);\r\n        function OvalView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        OvalView.prototype._map_data = function () {\r\n            _super.prototype._map_data.call(this);\r\n            // oval drawn from bezier curves = ellipse with width reduced by 3/4\r\n            var sw = this.sw;\r\n            var n = sw.length;\r\n            for (var i = 0; i < n; i++) {\r\n                sw[i] *= 0.75;\r\n            }\r\n        };\r\n        return OvalView;\r\n    }(ellipse_oval_1.EllipseOvalView));\r\n    exports.OvalView = OvalView;\r\n    OvalView.__name__ = \"OvalView\";\r\n    var Oval = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Oval, _super);\r\n        function Oval(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Oval.init_Oval = function () {\r\n            this.prototype.default_view = OvalView;\r\n        };\r\n        return Oval;\r\n    }(ellipse_oval_1.EllipseOval));\r\n    exports.Oval = Oval;\r\n    Oval.__name__ = \"Oval\";\r\n    Oval.init_Oval();\r\n}\r\n","/* models\\glyphs\\patches.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var PatchesView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PatchesView, _super);\r\n        function PatchesView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PatchesView.prototype._project_data = function () {\r\n            projections_1.inplace.project_xy(this._xs.array, this._ys.array);\r\n        };\r\n        PatchesView.prototype._index_data = function (index) {\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var xsi = this._xs.get(i);\r\n                var ysi = this._ys.get(i);\r\n                if (xsi.length == 0)\r\n                    index.add_empty();\r\n                else {\r\n                    var _a = tslib_1.__read(arrayable_1.minmax(xsi), 2), x0 = _a[0], x1 = _a[1];\r\n                    var _b = tslib_1.__read(arrayable_1.minmax(ysi), 2), y0 = _b[0], y1 = _b[1];\r\n                    index.add(x0, y0, x1, y1);\r\n                }\r\n            }\r\n        };\r\n        PatchesView.prototype._mask_data = function () {\r\n            var xr = this.renderer.plot_view.frame.x_range;\r\n            var _a = tslib_1.__read([xr.min, xr.max], 2), x0 = _a[0], x1 = _a[1];\r\n            var yr = this.renderer.plot_view.frame.y_range;\r\n            var _b = tslib_1.__read([yr.min, yr.max], 2), y0 = _b[0], y1 = _b[1];\r\n            return this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n        };\r\n        PatchesView.prototype._inner_loop = function (ctx, sx, sy, func) {\r\n            for (var j = 0, end = sx.length; j < end; j++) {\r\n                if (j == 0) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(sx[j], sy[j]);\r\n                    continue;\r\n                }\r\n                else if (isNaN(sx[j] + sy[j])) {\r\n                    ctx.closePath();\r\n                    func.apply(ctx);\r\n                    ctx.beginPath();\r\n                    continue;\r\n                }\r\n                else\r\n                    ctx.lineTo(sx[j], sy[j]);\r\n            }\r\n            ctx.closePath();\r\n            func.call(ctx);\r\n        };\r\n        PatchesView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var _this = this;\r\n            var sxs = _a.sxs, sys = _a.sys;\r\n            var _loop_1 = function (i) {\r\n                var sx = sxs.get(i);\r\n                var sy = sys.get(i);\r\n                if (this_1.visuals.fill.doit) {\r\n                    this_1.visuals.fill.set_vectorize(ctx, i);\r\n                    this_1._inner_loop(ctx, sx, sy, ctx.fill);\r\n                }\r\n                this_1.visuals.hatch.doit2(ctx, i, function () { return _this._inner_loop(ctx, sx, sy, ctx.fill); }, function () { return _this.renderer.request_render(); });\r\n                if (this_1.visuals.line.doit) {\r\n                    this_1.visuals.line.set_vectorize(ctx, i);\r\n                    this_1._inner_loop(ctx, sx, sy, ctx.stroke);\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    _loop_1(i);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        PatchesView.prototype._hit_rect = function (geometry) {\r\n            var e_2, _a;\r\n            var sx0 = geometry.sx0, sx1 = geometry.sx1, sy0 = geometry.sy0, sy1 = geometry.sy1;\r\n            var xs = [sx0, sx1, sx1, sx0];\r\n            var ys = [sy0, sy0, sy1, sy1];\r\n            var _b = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _b[0], x1 = _b[1];\r\n            var _c = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _c[0], y1 = _c[1];\r\n            var candidates = this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var index = candidates_1_1.value;\r\n                    var sxss = this.sxs.get(index);\r\n                    var syss = this.sys.get(index);\r\n                    var hit = true;\r\n                    for (var j = 0, endj = sxss.length; j < endj; j++) {\r\n                        var sx = sxss[j];\r\n                        var sy = syss[j];\r\n                        if (!hittest.point_in_poly(sx, sy, xs, ys)) {\r\n                            hit = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (hit) {\r\n                        indices.push(index);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return))\r\n                        _a.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        PatchesView.prototype._hit_point = function (geometry) {\r\n            var e_3, _a;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var candidates = this.index.indices({ x0: x, y0: y, x1: x, y1: y });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_2 = tslib_1.__values(candidates), candidates_2_1 = candidates_2.next(); !candidates_2_1.done; candidates_2_1 = candidates_2.next()) {\r\n                    var index = candidates_2_1.value;\r\n                    var sxsi = this.sxs.get(index);\r\n                    var sysi = this.sys.get(index);\r\n                    var n = sxsi.length;\r\n                    for (var k = 0, j = 0;; j++) {\r\n                        if (isNaN(sxsi[j]) || j == n) {\r\n                            var sxsi_kj = sxsi.subarray(k, j);\r\n                            var sysi_kj = sysi.subarray(k, j);\r\n                            if (hittest.point_in_poly(sx, sy, sxsi_kj, sysi_kj)) {\r\n                                indices.push(index);\r\n                                break;\r\n                            }\r\n                            k = j + 1;\r\n                        }\r\n                        if (j == n)\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_2_1 && !candidates_2_1.done && (_a = candidates_2.return))\r\n                        _a.call(candidates_2);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        PatchesView.prototype._get_snap_coord = function (array) {\r\n            return arrayable_1.sum(array) / array.length;\r\n        };\r\n        PatchesView.prototype.scenterxy = function (i, sx, sy) {\r\n            var sxsi = this.sxs.get(i);\r\n            var sysi = this.sys.get(i);\r\n            var n = sxsi.length;\r\n            var has_nan = false;\r\n            for (var k = 0, j = 0;; j++) {\r\n                var this_nan = isNaN(sxsi[j]);\r\n                has_nan = has_nan || this_nan;\r\n                if (j == n && !has_nan) {\r\n                    var scx = this._get_snap_coord(sxsi);\r\n                    var scy = this._get_snap_coord(sysi);\r\n                    return [scx, scy];\r\n                }\r\n                if (this_nan || j == n) {\r\n                    var sxsi_kj = sxsi.subarray(k, j);\r\n                    var sysi_kj = sysi.subarray(k, j);\r\n                    if (hittest.point_in_poly(sx, sy, sxsi_kj, sysi_kj)) {\r\n                        var scx = this._get_snap_coord(sxsi_kj);\r\n                        var scy = this._get_snap_coord(sysi_kj);\r\n                        return [scx, scy];\r\n                    }\r\n                    k = j + 1;\r\n                }\r\n                if (j == n)\r\n                    break;\r\n            }\r\n            assert_1.unreachable();\r\n        };\r\n        PatchesView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return PatchesView;\r\n    }(glyph_1.GlyphView));\r\n    exports.PatchesView = PatchesView;\r\n    PatchesView.__name__ = \"PatchesView\";\r\n    var Patches = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Patches, _super);\r\n        function Patches(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Patches.init_Patches = function () {\r\n            this.prototype.default_view = PatchesView;\r\n            this.define({\r\n                xs: [p.XCoordinateSeqSpec, { field: \"xs\" }],\r\n                ys: [p.YCoordinateSeqSpec, { field: \"ys\" }],\r\n            });\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector, property_mixins_1.HatchVector]);\r\n        };\r\n        return Patches;\r\n    }(glyph_1.Glyph));\r\n    exports.Patches = Patches;\r\n    Patches.__name__ = \"Patches\";\r\n    Patches.init_Patches();\r\n}\r\n","/* models\\glyphs\\quad.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var box_1 = require(360) /* ./box */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var QuadView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(QuadView, _super);\r\n        function QuadView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        QuadView.prototype.scenterxy = function (i) {\r\n            var scx = (this.sleft[i] + this.sright[i]) / 2;\r\n            var scy = (this.stop[i] + this.sbottom[i]) / 2;\r\n            return [scx, scy];\r\n        };\r\n        QuadView.prototype._lrtb = function (i) {\r\n            var l = this._left[i];\r\n            var r = this._right[i];\r\n            var t = this._top[i];\r\n            var b = this._bottom[i];\r\n            return [l, r, t, b];\r\n        };\r\n        return QuadView;\r\n    }(box_1.BoxView));\r\n    exports.QuadView = QuadView;\r\n    QuadView.__name__ = \"QuadView\";\r\n    var Quad = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Quad, _super);\r\n        function Quad(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Quad.init_Quad = function () {\r\n            this.prototype.default_view = QuadView;\r\n            this.define({\r\n                right: [p.XCoordinateSpec, { field: \"right\" }],\r\n                bottom: [p.YCoordinateSpec, { field: \"bottom\" }],\r\n                left: [p.XCoordinateSpec, { field: \"left\" }],\r\n                top: [p.YCoordinateSpec, { field: \"top\" }],\r\n            });\r\n        };\r\n        return Quad;\r\n    }(box_1.Box));\r\n    exports.Quad = Quad;\r\n    Quad.__name__ = \"Quad\";\r\n    Quad.init_Quad();\r\n}\r\n","/* models\\glyphs\\quadratic.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    // Formula from: http://pomax.nihongoresources.com/pages/bezier/\r\n    //\r\n    // if segment is quadratic bezier do:\r\n    //   for both directions do:\r\n    //     if control between start and end, compute linear bounding box\r\n    //     otherwise, compute\r\n    //       bound = u(1-t)^2 + 2v(1-t)t + wt^2\r\n    //         (with t = ((u-v) / (u-2v+w)), with {u = start, v = control, w = end})\r\n    //       if control precedes start, min = bound, otherwise max = bound\r\n    function _qbb(u, v, w) {\r\n        if (v == (u + w) / 2)\r\n            return [u, w];\r\n        else {\r\n            var t = (u - v) / ((u - (2 * v)) + w);\r\n            var bd = (u * Math.pow((1 - t), 2)) + (2 * v * (1 - t) * t) + (w * Math.pow(t, 2));\r\n            return [Math.min(u, w, bd), Math.max(u, w, bd)];\r\n        }\r\n    }\r\n    var QuadraticView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(QuadraticView, _super);\r\n        function QuadraticView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        QuadraticView.prototype._project_data = function () {\r\n            projections_1.inplace.project_xy(this._x0, this._y0);\r\n            projections_1.inplace.project_xy(this._x1, this._y1);\r\n        };\r\n        QuadraticView.prototype._index_data = function (index) {\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                if (isNaN(this._x0[i] + this._x1[i] + this._y0[i] + this._y1[i] + this._cx[i] + this._cy[i]))\r\n                    index.add_empty();\r\n                else {\r\n                    var _a = tslib_1.__read(_qbb(this._x0[i], this._cx[i], this._x1[i]), 2), x0 = _a[0], x1 = _a[1];\r\n                    var _b = tslib_1.__read(_qbb(this._y0[i], this._cy[i], this._y1[i]), 2), y0 = _b[0], y1 = _b[1];\r\n                    index.add(x0, y0, x1, y1);\r\n                }\r\n            }\r\n        };\r\n        QuadraticView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx0 = _a.sx0, sy0 = _a.sy0, sx1 = _a.sx1, sy1 = _a.sy1, scx = _a.scx, scy = _a.scy;\r\n            if (this.visuals.line.doit) {\r\n                try {\r\n                    for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                        var i = indices_1_1.value;\r\n                        if (isNaN(sx0[i] + sy0[i] + sx1[i] + sy1[i] + scx[i] + scy[i]))\r\n                            continue;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(sx0[i], sy0[i]);\r\n                        ctx.quadraticCurveTo(scx[i], scy[i], sx1[i], sy1[i]);\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                            _b.call(indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        QuadraticView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        QuadraticView.prototype.scenterxy = function () {\r\n            throw new Error(this + \".scenterxy() is not implemented\");\r\n        };\r\n        return QuadraticView;\r\n    }(glyph_1.GlyphView));\r\n    exports.QuadraticView = QuadraticView;\r\n    QuadraticView.__name__ = \"QuadraticView\";\r\n    var Quadratic = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Quadratic, _super);\r\n        function Quadratic(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Quadratic.init_Quadratic = function () {\r\n            this.prototype.default_view = QuadraticView;\r\n            this.define({\r\n                x0: [p.XCoordinateSpec, { field: \"x0\" }],\r\n                y0: [p.YCoordinateSpec, { field: \"y0\" }],\r\n                x1: [p.XCoordinateSpec, { field: \"x1\" }],\r\n                y1: [p.YCoordinateSpec, { field: \"y1\" }],\r\n                cx: [p.XCoordinateSpec, { field: \"cx\" }],\r\n                cy: [p.YCoordinateSpec, { field: \"cy\" }],\r\n            });\r\n            this.mixins(property_mixins_1.LineVector);\r\n        };\r\n        return Quadratic;\r\n    }(glyph_1.Glyph));\r\n    exports.Quadratic = Quadratic;\r\n    Quadratic.__name__ = \"Quadratic\";\r\n    Quadratic.init_Quadratic();\r\n}\r\n","/* models\\glyphs\\ray.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var RayView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RayView, _super);\r\n        function RayView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        RayView.prototype._map_data = function () {\r\n            if (this.model.properties.length.units == \"data\")\r\n                this.slength = this.sdist(this.renderer.xscale, this._x, this._length);\r\n            else\r\n                this.slength = this._length;\r\n        };\r\n        RayView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, slength = _a.slength, _angle = _a._angle;\r\n            if (this.visuals.line.doit) {\r\n                var width = this.renderer.plot_view.frame.bbox.width;\r\n                var height = this.renderer.plot_view.frame.bbox.height;\r\n                var inf_len = 2 * (width + height);\r\n                for (var i = 0, end = slength.length; i < end; i++) {\r\n                    if (slength[i] == 0)\r\n                        slength[i] = inf_len;\r\n                }\r\n                try {\r\n                    for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                        var i = indices_1_1.value;\r\n                        if (isNaN(sx[i] + sy[i] + _angle[i] + slength[i]))\r\n                            continue;\r\n                        ctx.translate(sx[i], sy[i]);\r\n                        ctx.rotate(_angle[i]);\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(0, 0);\r\n                        ctx.lineTo(slength[i], 0);\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                        ctx.rotate(-_angle[i]);\r\n                        ctx.translate(-sx[i], -sy[i]);\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                            _b.call(indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        RayView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return RayView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.RayView = RayView;\r\n    RayView.__name__ = \"RayView\";\r\n    var Ray = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Ray, _super);\r\n        function Ray(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Ray.init_Ray = function () {\r\n            this.prototype.default_view = RayView;\r\n            this.mixins(property_mixins_1.LineVector);\r\n            this.define({\r\n                length: [p.DistanceSpec],\r\n                angle: [p.AngleSpec],\r\n            });\r\n        };\r\n        return Ray;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Ray = Ray;\r\n    Ray.__name__ = \"Ray\";\r\n    Ray.init_Ray();\r\n}\r\n","/* models\\glyphs\\rect.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var center_rotatable_1 = require(356) /* ./center_rotatable */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var arrayable_1 = require(127) /* ../../core/util/arrayable */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var RectView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RectView, _super);\r\n        function RectView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        RectView.prototype._set_data = function () {\r\n            this.max_w2 = 0;\r\n            if (this.model.properties.width.units == \"data\")\r\n                this.max_w2 = this.max_width / 2;\r\n            this.max_h2 = 0;\r\n            if (this.model.properties.height.units == \"data\")\r\n                this.max_h2 = this.max_height / 2;\r\n        };\r\n        RectView.prototype._map_data = function () {\r\n            var _a, _b;\r\n            if (this.model.properties.width.units == \"data\")\r\n                _a = tslib_1.__read(this._map_dist_corner_for_data_side_length(this._x, this._width, this.renderer.xscale), 2), this.sw = _a[0], this.sx0 = _a[1];\r\n            else {\r\n                this.sw = this._width;\r\n                var n_1 = this.sx.length;\r\n                this.sx0 = new types_1.NumberArray(n_1);\r\n                for (var i = 0; i < n_1; i++)\r\n                    this.sx0[i] = this.sx[i] - this.sw[i] / 2;\r\n            }\r\n            if (this.model.properties.height.units == \"data\")\r\n                _b = tslib_1.__read(this._map_dist_corner_for_data_side_length(this._y, this._height, this.renderer.yscale), 2), this.sh = _b[0], this.sy1 = _b[1];\r\n            else {\r\n                this.sh = this._height;\r\n                var n_2 = this.sy.length;\r\n                this.sy1 = new types_1.NumberArray(n_2);\r\n                for (var i = 0; i < n_2; i++)\r\n                    this.sy1[i] = this.sy[i] - this.sh[i] / 2;\r\n            }\r\n            var n = this.sw.length;\r\n            this.ssemi_diag = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++)\r\n                this.ssemi_diag[i] = Math.sqrt((this.sw[i] / 2 * this.sw[i]) / 2 + (this.sh[i] / 2 * this.sh[i]) / 2);\r\n        };\r\n        RectView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b, e_2, _c;\r\n            var sx = _a.sx, sy = _a.sy, sx0 = _a.sx0, sy1 = _a.sy1, sw = _a.sw, sh = _a.sh, _angle = _a._angle;\r\n            if (this.visuals.fill.doit) {\r\n                try {\r\n                    for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                        var i = indices_1_1.value;\r\n                        if (isNaN(sx[i] + sy[i] + sx0[i] + sy1[i] + sw[i] + sh[i] + _angle[i]))\r\n                            continue;\r\n                        //no need to test the return value, we call fillRect for every glyph anyway\r\n                        this.visuals.fill.set_vectorize(ctx, i);\r\n                        if (_angle[i]) {\r\n                            ctx.translate(sx[i], sy[i]);\r\n                            ctx.rotate(_angle[i]);\r\n                            ctx.fillRect(-sw[i] / 2, -sh[i] / 2, sw[i], sh[i]);\r\n                            ctx.rotate(-_angle[i]);\r\n                            ctx.translate(-sx[i], -sy[i]);\r\n                        }\r\n                        else\r\n                            ctx.fillRect(sx0[i], sy1[i], sw[i], sh[i]);\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                            _b.call(indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n            if (this.visuals.line.doit) {\r\n                ctx.beginPath();\r\n                try {\r\n                    for (var indices_2 = tslib_1.__values(indices), indices_2_1 = indices_2.next(); !indices_2_1.done; indices_2_1 = indices_2.next()) {\r\n                        var i = indices_2_1.value;\r\n                        if (isNaN(sx[i] + sy[i] + sx0[i] + sy1[i] + sw[i] + sh[i] + _angle[i]))\r\n                            continue;\r\n                        // fillRect does not fill zero-height or -width rects, but rect(...)\r\n                        // does seem to stroke them (1px wide or tall). Explicitly ignore rects\r\n                        // with zero width or height to be consistent\r\n                        if (sw[i] == 0 || sh[i] == 0)\r\n                            continue;\r\n                        if (_angle[i]) {\r\n                            ctx.translate(sx[i], sy[i]);\r\n                            ctx.rotate(_angle[i]);\r\n                            ctx.rect(-sw[i] / 2, -sh[i] / 2, sw[i], sh[i]);\r\n                            ctx.rotate(-_angle[i]);\r\n                            ctx.translate(-sx[i], -sy[i]);\r\n                        }\r\n                        else\r\n                            ctx.rect(sx0[i], sy1[i], sw[i], sh[i]);\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                        ctx.beginPath();\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_2_1 && !indices_2_1.done && (_c = indices_2.return))\r\n                            _c.call(indices_2);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n                ctx.stroke();\r\n            }\r\n        };\r\n        RectView.prototype._hit_rect = function (geometry) {\r\n            return this._hit_rect_against_index(geometry);\r\n        };\r\n        RectView.prototype._hit_point = function (geometry) {\r\n            var e_3, _a;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            var n = this.sx0.length;\r\n            var scenter_x = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                scenter_x[i] = this.sx0[i] + this.sw[i] / 2;\r\n            }\r\n            var scenter_y = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                scenter_y[i] = this.sy1[i] + this.sh[i] / 2;\r\n            }\r\n            var max_x2_ddist = arrayable_1.max(this._ddist(0, scenter_x, this.ssemi_diag));\r\n            var max_y2_ddist = arrayable_1.max(this._ddist(1, scenter_y, this.ssemi_diag));\r\n            var x0 = x - max_x2_ddist;\r\n            var x1 = x + max_x2_ddist;\r\n            var y0 = y - max_y2_ddist;\r\n            var y1 = y + max_y2_ddist;\r\n            var width_in;\r\n            var height_in;\r\n            var indices = [];\r\n            try {\r\n                for (var _b = tslib_1.__values(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 })), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var i = _c.value;\r\n                    if (this._angle[i]) {\r\n                        var s = Math.sin(-this._angle[i]);\r\n                        var c = Math.cos(-this._angle[i]);\r\n                        var px = c * (sx - this.sx[i]) - s * (sy - this.sy[i]) + this.sx[i];\r\n                        var py = s * (sx - this.sx[i]) + c * (sy - this.sy[i]) + this.sy[i];\r\n                        sx = px;\r\n                        sy = py;\r\n                        width_in = Math.abs(this.sx[i] - sx) <= this.sw[i] / 2;\r\n                        height_in = Math.abs(this.sy[i] - sy) <= this.sh[i] / 2;\r\n                    }\r\n                    else {\r\n                        var dx = sx - this.sx0[i];\r\n                        var dy = sy - this.sy1[i];\r\n                        width_in = 0 <= dx && dx <= this.sw[i];\r\n                        height_in = 0 <= dy && dy <= this.sh[i];\r\n                    }\r\n                    if (width_in && height_in) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        RectView.prototype._map_dist_corner_for_data_side_length = function (coord, side_length, scale) {\r\n            var n = coord.length;\r\n            var pt0 = new Float64Array(n);\r\n            var pt1 = new Float64Array(n);\r\n            for (var i = 0; i < n; i++) {\r\n                pt0[i] = coord[i] - side_length[i] / 2;\r\n                pt1[i] = coord[i] + side_length[i] / 2;\r\n            }\r\n            var spt0 = scale.v_compute(pt0);\r\n            var spt1 = scale.v_compute(pt1);\r\n            var sside_length = this.sdist(scale, pt0, side_length, 'edge', this.model.dilate);\r\n            var spt_corner = spt0;\r\n            for (var i = 0; i < n; i++) {\r\n                var spt0i = spt0[i];\r\n                var spt1i = spt1[i];\r\n                if (!isNaN(spt0i + spt1i) && spt0i != spt1i) {\r\n                    spt_corner = spt0i < spt1i ? spt0 : spt1;\r\n                    break;\r\n                }\r\n            }\r\n            return [sside_length, spt_corner];\r\n        };\r\n        RectView.prototype._ddist = function (dim, spts, spans) {\r\n            var scale = dim == 0 ? this.renderer.xscale : this.renderer.yscale;\r\n            var spt0 = spts;\r\n            var m = spt0.length;\r\n            var spt1 = new types_1.NumberArray(m);\r\n            for (var i = 0; i < m; i++)\r\n                spt1[i] = spt0[i] + spans[i];\r\n            var pt0 = scale.v_invert(spt0);\r\n            var pt1 = scale.v_invert(spt1);\r\n            var n = pt0.length;\r\n            var ddist = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++)\r\n                ddist[i] = Math.abs(pt1[i] - pt0[i]);\r\n            return ddist;\r\n        };\r\n        RectView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        RectView.prototype._bounds = function (_a) {\r\n            var x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\r\n            return {\r\n                x0: x0 - this.max_w2,\r\n                x1: x1 + this.max_w2,\r\n                y0: y0 - this.max_h2,\r\n                y1: y1 + this.max_h2,\r\n            };\r\n        };\r\n        return RectView;\r\n    }(center_rotatable_1.CenterRotatableView));\r\n    exports.RectView = RectView;\r\n    RectView.__name__ = \"RectView\";\r\n    var Rect = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Rect, _super);\r\n        function Rect(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Rect.init_Rect = function () {\r\n            this.prototype.default_view = RectView;\r\n            this.define({\r\n                dilate: [p.Boolean, false],\r\n            });\r\n        };\r\n        return Rect;\r\n    }(center_rotatable_1.CenterRotatable));\r\n    exports.Rect = Rect;\r\n    Rect.__name__ = \"Rect\";\r\n    Rect.init_Rect();\r\n}\r\n","/* models\\glyphs\\segment.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var glyph_1 = require(209) /* ./glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var SegmentView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SegmentView, _super);\r\n        function SegmentView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SegmentView.prototype._project_data = function () {\r\n            projections_1.inplace.project_xy(this._x0, this._y0);\r\n            projections_1.inplace.project_xy(this._x1, this._y1);\r\n        };\r\n        SegmentView.prototype._index_data = function (index) {\r\n            var min = Math.min, max = Math.max;\r\n            var data_size = this.data_size;\r\n            for (var i = 0; i < data_size; i++) {\r\n                var x0 = this._x0[i];\r\n                var x1 = this._x1[i];\r\n                var y0 = this._y0[i];\r\n                var y1 = this._y1[i];\r\n                if (isNaN(x0 + x1 + y0 + y1))\r\n                    index.add_empty();\r\n                else\r\n                    index.add(min(x0, x1), min(y0, y1), max(x0, x1), max(y0, y1));\r\n            }\r\n        };\r\n        SegmentView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx0 = _a.sx0, sy0 = _a.sy0, sx1 = _a.sx1, sy1 = _a.sy1;\r\n            if (this.visuals.line.doit) {\r\n                try {\r\n                    for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                        var i = indices_1_1.value;\r\n                        if (isNaN(sx0[i] + sy0[i] + sx1[i] + sy1[i]))\r\n                            continue;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(sx0[i], sy0[i]);\r\n                        ctx.lineTo(sx1[i], sy1[i]);\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                            _b.call(indices_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        SegmentView.prototype._hit_point = function (geometry) {\r\n            var e_2, _a;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var point = { x: sx, y: sy };\r\n            var lw_voffset = 2; // FIXME: Use maximum of segments line_width/2 instead of magic constant 2\r\n            var _b = tslib_1.__read(this.renderer.xscale.r_invert(sx - lw_voffset, sx + lw_voffset), 2), x0 = _b[0], x1 = _b[1];\r\n            var _c = tslib_1.__read(this.renderer.yscale.r_invert(sy - lw_voffset, sy + lw_voffset), 2), y0 = _c[0], y1 = _c[1];\r\n            var candidates = this.index.indices({ x0: x0, y0: y0, x1: x1, y1: y1 });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var i = candidates_1_1.value;\r\n                    var threshold2 = Math.pow(Math.max(2, this.visuals.line.cache_select('line_width', i) / 2), 2);\r\n                    var p0 = { x: this.sx0[i], y: this.sy0[i] };\r\n                    var p1 = { x: this.sx1[i], y: this.sy1[i] };\r\n                    var dist2 = hittest.dist_to_segment_squared(point, p0, p1);\r\n                    if (dist2 < threshold2) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return))\r\n                        _a.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        SegmentView.prototype._hit_span = function (geometry) {\r\n            var _a, _b, e_3, _c;\r\n            var _d = tslib_1.__read(this.renderer.plot_view.frame.bbox.ranges, 2), hr = _d[0], vr = _d[1];\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var v0;\r\n            var v1;\r\n            var val;\r\n            if (geometry.direction == 'v') {\r\n                val = this.renderer.yscale.invert(sy);\r\n                _a = tslib_1.__read([this._y0, this._y1], 2), v0 = _a[0], v1 = _a[1];\r\n            }\r\n            else {\r\n                val = this.renderer.xscale.invert(sx);\r\n                _b = tslib_1.__read([this._x0, this._x1], 2), v0 = _b[0], v1 = _b[1];\r\n            }\r\n            var indices = [];\r\n            var _e = tslib_1.__read(this.renderer.xscale.r_invert(hr.start, hr.end), 2), x0 = _e[0], x1 = _e[1];\r\n            var _f = tslib_1.__read(this.renderer.yscale.r_invert(vr.start, vr.end), 2), y0 = _f[0], y1 = _f[1];\r\n            var candidates = this.index.indices({ x0: x0, y0: y0, x1: x1, y1: y1 });\r\n            try {\r\n                for (var candidates_2 = tslib_1.__values(candidates), candidates_2_1 = candidates_2.next(); !candidates_2_1.done; candidates_2_1 = candidates_2.next()) {\r\n                    var i = candidates_2_1.value;\r\n                    if ((v0[i] <= val && val <= v1[i]) || (v1[i] <= val && val <= v0[i]))\r\n                        indices.push(i);\r\n                    var threshold = 1.5 + (this.visuals.line.cache_select('line_width', i) / 2); // Maximum pixel difference to detect hit\r\n                    if (v0[i] == v1[i]) {\r\n                        if (geometry.direction == 'h') {\r\n                            if (Math.abs(this.sx0[i] - sx) <= threshold) {\r\n                                indices.push(i);\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (Math.abs(this.sy0[i] - sy) <= threshold) {\r\n                                indices.push(i);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_2_1 && !candidates_2_1.done && (_c = candidates_2.return))\r\n                        _c.call(candidates_2);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        SegmentView.prototype.scenterxy = function (i) {\r\n            var scx = (this.sx0[i] + this.sx1[i]) / 2;\r\n            var scy = (this.sy0[i] + this.sy1[i]) / 2;\r\n            return [scx, scy];\r\n        };\r\n        SegmentView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return SegmentView;\r\n    }(glyph_1.GlyphView));\r\n    exports.SegmentView = SegmentView;\r\n    SegmentView.__name__ = \"SegmentView\";\r\n    var Segment = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Segment, _super);\r\n        function Segment(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Segment.init_Segment = function () {\r\n            this.prototype.default_view = SegmentView;\r\n            this.define({\r\n                x0: [p.XCoordinateSpec, { field: \"x0\" }],\r\n                y0: [p.YCoordinateSpec, { field: \"y0\" }],\r\n                x1: [p.XCoordinateSpec, { field: \"x1\" }],\r\n                y1: [p.YCoordinateSpec, { field: \"y1\" }],\r\n            });\r\n            this.mixins(property_mixins_1.LineVector);\r\n        };\r\n        return Segment;\r\n    }(glyph_1.Glyph));\r\n    exports.Segment = Segment;\r\n    Segment.__name__ = \"Segment\";\r\n    Segment.init_Segment();\r\n}\r\n","/* models\\glyphs\\step.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var StepView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(StepView, _super);\r\n        function StepView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        StepView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b, _c, _d, _e, _f, _g, _h;\r\n            var sx = _a.sx, sy = _a.sy;\r\n            var drawing = false;\r\n            var last_index = null;\r\n            this.visuals.line.set_value(ctx);\r\n            var L = indices.length;\r\n            if (L < 2)\r\n                return;\r\n            ctx.beginPath();\r\n            ctx.moveTo(sx[0], sy[0]);\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    var x1 = void 0, x2 = void 0;\r\n                    var y1 = void 0, y2 = void 0;\r\n                    switch (this.model.mode) {\r\n                        case \"before\": {\r\n                            _c = tslib_1.__read([sx[i - 1], sy[i]], 2), x1 = _c[0], y1 = _c[1];\r\n                            _d = tslib_1.__read([sx[i], sy[i]], 2), x2 = _d[0], y2 = _d[1];\r\n                            break;\r\n                        }\r\n                        case \"after\": {\r\n                            _e = tslib_1.__read([sx[i], sy[i - 1]], 2), x1 = _e[0], y1 = _e[1];\r\n                            _f = tslib_1.__read([sx[i], sy[i]], 2), x2 = _f[0], y2 = _f[1];\r\n                            break;\r\n                        }\r\n                        case \"center\": {\r\n                            var xm = (sx[i - 1] + sx[i]) / 2;\r\n                            _g = tslib_1.__read([xm, sy[i - 1]], 2), x1 = _g[0], y1 = _g[1];\r\n                            _h = tslib_1.__read([xm, sy[i]], 2), x2 = _h[0], y2 = _h[1];\r\n                            break;\r\n                        }\r\n                        default:\r\n                            throw new Error(\"unexpected\");\r\n                    }\r\n                    if (drawing) {\r\n                        if (!isFinite(sx[i] + sy[i])) {\r\n                            ctx.stroke();\r\n                            ctx.beginPath();\r\n                            drawing = false;\r\n                            last_index = i;\r\n                            continue;\r\n                        }\r\n                        if (last_index != null && i - last_index > 1) {\r\n                            ctx.stroke();\r\n                            drawing = false;\r\n                        }\r\n                    }\r\n                    if (drawing) {\r\n                        ctx.lineTo(x1, y1);\r\n                        ctx.lineTo(x2, y2);\r\n                    }\r\n                    else {\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(sx[i], sy[i]);\r\n                        drawing = true;\r\n                    }\r\n                    last_index = i;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            ctx.lineTo(sx[L - 1], sy[L - 1]);\r\n            ctx.stroke();\r\n        };\r\n        StepView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_line_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        return StepView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.StepView = StepView;\r\n    StepView.__name__ = \"StepView\";\r\n    var Step = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Step, _super);\r\n        function Step(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Step.init_Step = function () {\r\n            this.prototype.default_view = StepView;\r\n            this.mixins(property_mixins_1.LineVector);\r\n            this.define({\r\n                mode: [p.StepMode, \"before\"],\r\n            });\r\n        };\r\n        return Step;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Step = Step;\r\n    Step.__name__ = \"Step\";\r\n    Step.init_Step();\r\n}\r\n","/* models\\glyphs\\text.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var text_1 = require(274) /* ../../core/util/text */;\r\n    var assert_1 = require(126) /* ../../core/util/assert */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var TextView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TextView, _super);\r\n        function TextView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TextView.prototype._rotate_point = function (x, y, xoff, yoff, angle) {\r\n            var sxr = (x - xoff) * Math.cos(angle) - (y - yoff) * Math.sin(angle) + xoff;\r\n            var syr = (x - xoff) * Math.sin(angle) + (y - yoff) * Math.cos(angle) + yoff;\r\n            return [sxr, syr];\r\n        };\r\n        TextView.prototype._text_bounds = function (x0, y0, width, height) {\r\n            var xvals = [x0, x0 + width, x0 + width, x0, x0];\r\n            var yvals = [y0, y0, y0 - height, y0 - height, y0];\r\n            return [xvals, yvals];\r\n        };\r\n        TextView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b, e_2, _c;\r\n            var sx = _a.sx, sy = _a.sy, _x_offset = _a._x_offset, _y_offset = _a._y_offset, _angle = _a._angle, _text = _a._text;\r\n            this._sys = [];\r\n            this._sxs = [];\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    this._sxs[i] = [];\r\n                    this._sys[i] = [];\r\n                    if (isNaN(sx[i] + sy[i] + _x_offset[i] + _y_offset[i] + _angle[i]) || _text[i] == null)\r\n                        continue;\r\n                    if (this.visuals.text.doit) {\r\n                        var text = \"\" + _text[i];\r\n                        ctx.save();\r\n                        ctx.translate(sx[i] + _x_offset[i], sy[i] + _y_offset[i]);\r\n                        ctx.rotate(_angle[i]);\r\n                        this.visuals.text.set_vectorize(ctx, i);\r\n                        var font = this.visuals.text.cache_select(\"font\", i);\r\n                        var height = text_1.measure_font(font).height;\r\n                        var line_height = this.visuals.text.text_line_height.value() * height;\r\n                        if (text.indexOf(\"\\n\") == -1) {\r\n                            ctx.fillText(text, 0, 0);\r\n                            var x0 = sx[i] + _x_offset[i];\r\n                            var y0 = sy[i] + _y_offset[i];\r\n                            var width = ctx.measureText(text).width;\r\n                            var _d = tslib_1.__read(this._text_bounds(x0, y0, width, line_height), 2), xvalues = _d[0], yvalues = _d[1];\r\n                            this._sxs[i].push(xvalues);\r\n                            this._sys[i].push(yvalues);\r\n                        }\r\n                        else {\r\n                            var lines = text.split(\"\\n\");\r\n                            var block_height = line_height * lines.length;\r\n                            var baseline = this.visuals.text.cache_select(\"text_baseline\", i);\r\n                            var y = void 0;\r\n                            switch (baseline) {\r\n                                case \"top\": {\r\n                                    y = 0;\r\n                                    break;\r\n                                }\r\n                                case \"middle\": {\r\n                                    y = (-block_height / 2) + (line_height / 2);\r\n                                    break;\r\n                                }\r\n                                case \"bottom\": {\r\n                                    y = -block_height + line_height;\r\n                                    break;\r\n                                }\r\n                                default: {\r\n                                    y = 0;\r\n                                    console.warn(\"'\" + baseline + \"' baseline not supported with multi line text\");\r\n                                }\r\n                            }\r\n                            try {\r\n                                for (var lines_1 = (e_2 = void 0, tslib_1.__values(lines)), lines_1_1 = lines_1.next(); !lines_1_1.done; lines_1_1 = lines_1.next()) {\r\n                                    var line = lines_1_1.value;\r\n                                    ctx.fillText(line, 0, y);\r\n                                    var x0 = sx[i] + _x_offset[i];\r\n                                    var y0 = y + sy[i] + _y_offset[i];\r\n                                    var width = ctx.measureText(line).width;\r\n                                    var _e = tslib_1.__read(this._text_bounds(x0, y0, width, line_height), 2), xvalues = _e[0], yvalues = _e[1];\r\n                                    this._sxs[i].push(xvalues);\r\n                                    this._sys[i].push(yvalues);\r\n                                    y += line_height;\r\n                                }\r\n                            }\r\n                            catch (e_2_1) {\r\n                                e_2 = { error: e_2_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (lines_1_1 && !lines_1_1.done && (_c = lines_1.return))\r\n                                        _c.call(lines_1);\r\n                                }\r\n                                finally {\r\n                                    if (e_2)\r\n                                        throw e_2.error;\r\n                                }\r\n                            }\r\n                        }\r\n                        ctx.restore();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        TextView.prototype._hit_point = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var indices = [];\r\n            for (var i = 0; i < this._sxs.length; i++) {\r\n                var sxs = this._sxs[i];\r\n                var sys = this._sys[i];\r\n                var n = sxs.length;\r\n                for (var j = 0, endj = n; j < endj; j++) {\r\n                    var _a = tslib_1.__read(this._rotate_point(sx, sy, sxs[n - 1][0], sys[n - 1][0], -this._angle[i]), 2), sxr = _a[0], syr = _a[1];\r\n                    if (hittest.point_in_poly(sxr, syr, sxs[j], sys[j])) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        TextView.prototype.scenterxy = function (i) {\r\n            var sxs = this._sxs[i];\r\n            var sys = this._sys[i];\r\n            assert_1.assert(sxs.length != 0 && sys.length != 0);\r\n            var sx0 = sxs[0][0];\r\n            var sy0 = sys[0][0];\r\n            var sxc = (sxs[0][2] + sx0) / 2;\r\n            var syc = (sys[0][2] + sy0) / 2;\r\n            var _a = tslib_1.__read(this._rotate_point(sxc, syc, sx0, sy0, this._angle[i]), 2), sxcr = _a[0], sycr = _a[1];\r\n            return [sxcr, sycr];\r\n        };\r\n        return TextView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.TextView = TextView;\r\n    TextView.__name__ = \"TextView\";\r\n    var Text = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Text, _super);\r\n        function Text(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Text.init_Text = function () {\r\n            this.prototype.default_view = TextView;\r\n            this.mixins(property_mixins_1.TextVector);\r\n            this.define({\r\n                text: [p.NullStringSpec, { field: \"text\" }],\r\n                angle: [p.AngleSpec, 0],\r\n                x_offset: [p.NumberSpec, 0],\r\n                y_offset: [p.NumberSpec, 0],\r\n            });\r\n        };\r\n        return Text;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Text = Text;\r\n    Text.__name__ = \"Text\";\r\n    Text.init_Text();\r\n}\r\n","/* models\\glyphs\\vbar.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var box_1 = require(360) /* ./box */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var VBarView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VBarView, _super);\r\n        function VBarView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        VBarView.prototype.scenterxy = function (i) {\r\n            var scx = this.sx[i];\r\n            var scy = (this.stop[i] + this.sbottom[i]) / 2;\r\n            return [scx, scy];\r\n        };\r\n        VBarView.prototype._lrtb = function (i) {\r\n            var l = this._x[i] - (this._width[i] / 2);\r\n            var r = this._x[i] + (this._width[i] / 2);\r\n            var t = Math.max(this._top[i], this._bottom[i]);\r\n            var b = Math.min(this._top[i], this._bottom[i]);\r\n            return [l, r, t, b];\r\n        };\r\n        VBarView.prototype._map_data = function () {\r\n            this.sx = this.renderer.xscale.v_compute(this._x);\r\n            this.sw = this.sdist(this.renderer.xscale, this._x, this._width, \"center\");\r\n            this.stop = this.renderer.yscale.v_compute(this._top);\r\n            this.sbottom = this.renderer.yscale.v_compute(this._bottom);\r\n            var n = this.sx.length;\r\n            this.sleft = new types_1.NumberArray(n);\r\n            this.sright = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                this.sleft[i] = this.sx[i] - this.sw[i] / 2;\r\n                this.sright[i] = this.sx[i] + this.sw[i] / 2;\r\n            }\r\n            this._clamp_viewport();\r\n        };\r\n        return VBarView;\r\n    }(box_1.BoxView));\r\n    exports.VBarView = VBarView;\r\n    VBarView.__name__ = \"VBarView\";\r\n    var VBar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(VBar, _super);\r\n        function VBar(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        VBar.init_VBar = function () {\r\n            this.prototype.default_view = VBarView;\r\n            this.define({\r\n                x: [p.XCoordinateSpec, { field: \"x\" }],\r\n                bottom: [p.YCoordinateSpec, { value: 0 }],\r\n                width: [p.NumberSpec, { value: 1 }],\r\n                top: [p.YCoordinateSpec, { field: \"top\" }],\r\n            });\r\n        };\r\n        return VBar;\r\n    }(box_1.Box));\r\n    exports.VBar = VBar;\r\n    VBar.__name__ = \"VBar\";\r\n    VBar.init_VBar();\r\n}\r\n","/* models\\glyphs\\wedge.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ./xy_glyph */;\r\n    var utils_1 = require(215) /* ./utils */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var math_1 = require(125) /* ../../core/util/math */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var WedgeView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WedgeView, _super);\r\n        function WedgeView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        WedgeView.prototype._map_data = function () {\r\n            if (this.model.properties.radius.units == \"data\")\r\n                this.sradius = this.sdist(this.renderer.xscale, this._x, this._radius);\r\n            else\r\n                this.sradius = this._radius;\r\n        };\r\n        WedgeView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, sradius = _a.sradius, _start_angle = _a._start_angle, _end_angle = _a._end_angle;\r\n            var direction = this.model.properties.direction.value();\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + sradius[i] + _start_angle[i] + _end_angle[i]))\r\n                        continue;\r\n                    ctx.beginPath();\r\n                    ctx.arc(sx[i], sy[i], sradius[i], _start_angle[i], _end_angle[i], direction);\r\n                    ctx.lineTo(sx[i], sy[i]);\r\n                    ctx.closePath();\r\n                    if (this.visuals.fill.doit) {\r\n                        this.visuals.fill.set_vectorize(ctx, i);\r\n                        ctx.fill();\r\n                    }\r\n                    if (this.visuals.line.doit) {\r\n                        this.visuals.line.set_vectorize(ctx, i);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        WedgeView.prototype._hit_point = function (geometry) {\r\n            var _a, _b, e_2, _c, _d, _e, e_3, _f;\r\n            var dist, sx0, sx1, sy0, sy1, x0, x1, y0, y1;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var x = this.renderer.xscale.invert(sx);\r\n            var y = this.renderer.yscale.invert(sy);\r\n            // check diameter first\r\n            var max_diameter = 2 * this.max_radius;\r\n            if (this.model.properties.radius.units === \"data\") {\r\n                x0 = x - max_diameter;\r\n                x1 = x + max_diameter;\r\n                y0 = y - max_diameter;\r\n                y1 = y + max_diameter;\r\n            }\r\n            else {\r\n                sx0 = sx - max_diameter;\r\n                sx1 = sx + max_diameter;\r\n                _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n                sy0 = sy - max_diameter;\r\n                sy1 = sy + max_diameter;\r\n                _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            }\r\n            var candidates = [];\r\n            try {\r\n                for (var _g = tslib_1.__values(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 })), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                    var i = _h.value;\r\n                    var r2 = Math.pow(this.sradius[i], 2);\r\n                    _d = tslib_1.__read(this.renderer.xscale.r_compute(x, this._x[i]), 2), sx0 = _d[0], sx1 = _d[1];\r\n                    _e = tslib_1.__read(this.renderer.yscale.r_compute(y, this._y[i]), 2), sy0 = _e[0], sy1 = _e[1];\r\n                    dist = Math.pow((sx0 - sx1), 2) + Math.pow((sy0 - sy1), 2);\r\n                    if (dist <= r2) {\r\n                        candidates.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_h && !_h.done && (_c = _g.return))\r\n                        _c.call(_g);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            var direction = this.model.properties.direction.value();\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var i = candidates_1_1.value;\r\n                    // NOTE: minus the angle because JS uses non-mathy convention for angles\r\n                    var angle = Math.atan2(sy - this.sy[i], sx - this.sx[i]);\r\n                    if (math_1.angle_between(-angle, -this._start_angle[i], -this._end_angle[i], direction)) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_f = candidates_1.return))\r\n                        _f.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        WedgeView.prototype.draw_legend_for_index = function (ctx, bbox, index) {\r\n            utils_1.generic_area_legend(this.visuals, ctx, bbox, index);\r\n        };\r\n        WedgeView.prototype.scenterxy = function (i) {\r\n            var r = this.sradius[i] / 2;\r\n            var a = (this._start_angle[i] + this._end_angle[i]) / 2;\r\n            var scx = this.sx[i] + r * Math.cos(a);\r\n            var scy = this.sy[i] + r * Math.sin(a);\r\n            return [scx, scy];\r\n        };\r\n        return WedgeView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.WedgeView = WedgeView;\r\n    WedgeView.__name__ = \"WedgeView\";\r\n    var Wedge = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Wedge, _super);\r\n        function Wedge(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Wedge.init_Wedge = function () {\r\n            this.prototype.default_view = WedgeView;\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.define({\r\n                direction: [p.Direction, 'anticlock'],\r\n                radius: [p.DistanceSpec],\r\n                start_angle: [p.AngleSpec],\r\n                end_angle: [p.AngleSpec],\r\n            });\r\n        };\r\n        return Wedge;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Wedge = Wedge;\r\n    Wedge.__name__ = \"Wedge\";\r\n    Wedge.init_Wedge();\r\n}\r\n","/* models\\graphs\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    tslib_1.__exportStar(require(232) /* ./graph_hit_test_policy */, exports);\r\n    tslib_1.__exportStar(require(381) /* ./layout_provider */, exports);\r\n    tslib_1.__exportStar(require(382) /* ./static_layout_provider */, exports);\r\n}\r\n","/* models\\graphs\\layout_provider.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var LayoutProvider = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LayoutProvider, _super);\r\n        function LayoutProvider(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return LayoutProvider;\r\n    }(model_1.Model));\r\n    exports.LayoutProvider = LayoutProvider;\r\n    LayoutProvider.__name__ = \"LayoutProvider\";\r\n}\r\n","/* models\\graphs\\static_layout_provider.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layout_provider_1 = require(381) /* ./layout_provider */;\r\n    var types_1 = require(139) /* ../../core/types */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var StaticLayoutProvider = /** @class */ (function (_super) {\r\n        tslib_1.__extends(StaticLayoutProvider, _super);\r\n        function StaticLayoutProvider(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        StaticLayoutProvider.init_StaticLayoutProvider = function () {\r\n            this.define({\r\n                graph_layout: [p.Any, {}],\r\n            });\r\n        };\r\n        StaticLayoutProvider.prototype.get_node_coordinates = function (node_source) {\r\n            var index = node_source.data.index;\r\n            var n = index.length;\r\n            var xs = new types_1.NumberArray(n);\r\n            var ys = new types_1.NumberArray(n);\r\n            for (var i = 0; i < n; i++) {\r\n                var point = this.graph_layout[index[i]];\r\n                var _a = tslib_1.__read(point !== null && point !== void 0 ? point : [NaN, NaN], 2), x = _a[0], y = _a[1];\r\n                xs[i] = x;\r\n                ys[i] = y;\r\n            }\r\n            return [xs, ys];\r\n        };\r\n        StaticLayoutProvider.prototype.get_edge_coordinates = function (edge_source) {\r\n            var starts = edge_source.data.start;\r\n            var ends = edge_source.data.end;\r\n            var n = starts.length;\r\n            var xs = [];\r\n            var ys = [];\r\n            var has_paths = edge_source.data.xs != null && edge_source.data.ys != null;\r\n            for (var i = 0; i < n; i++) {\r\n                var in_layout = this.graph_layout[starts[i]] != null && this.graph_layout[ends[i]] != null;\r\n                if (has_paths && in_layout) {\r\n                    xs.push(edge_source.data.xs[i]);\r\n                    ys.push(edge_source.data.ys[i]);\r\n                }\r\n                else {\r\n                    var start = void 0, end = void 0;\r\n                    if (in_layout) {\r\n                        start = this.graph_layout[starts[i]];\r\n                        end = this.graph_layout[ends[i]];\r\n                    }\r\n                    else {\r\n                        start = [NaN, NaN];\r\n                        end = [NaN, NaN];\r\n                    }\r\n                    xs.push([start[0], end[0]]);\r\n                    ys.push([start[1], end[1]]);\r\n                }\r\n            }\r\n            return [xs, ys];\r\n        };\r\n        return StaticLayoutProvider;\r\n    }(layout_provider_1.LayoutProvider));\r\n    exports.StaticLayoutProvider = StaticLayoutProvider;\r\n    StaticLayoutProvider.__name__ = \"StaticLayoutProvider\";\r\n    StaticLayoutProvider.init_StaticLayoutProvider();\r\n}\r\n","/* models\\grids\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var grid_1 = require(384) /* ./grid */;\r\n    exports.Grid = grid_1.Grid;\r\n}\r\n","/* models\\grids\\grid.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var guide_renderer_1 = require(293) /* ../renderers/guide_renderer */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var GridView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GridView, _super);\r\n        function GridView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GridView.prototype._render = function () {\r\n            var ctx = this.layer.ctx;\r\n            ctx.save();\r\n            this._draw_regions(ctx);\r\n            this._draw_minor_grids(ctx);\r\n            this._draw_grids(ctx);\r\n            ctx.restore();\r\n        };\r\n        GridView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.request_render(); });\r\n        };\r\n        GridView.prototype._draw_regions = function (ctx) {\r\n            var _this = this;\r\n            if (!this.visuals.band_fill.doit && !this.visuals.band_hatch.doit)\r\n                return;\r\n            this.visuals.band_fill.set_value(ctx);\r\n            var _a = tslib_1.__read(this.grid_coords('major', false), 2), xs = _a[0], ys = _a[1];\r\n            var _loop_1 = function (i) {\r\n                if (i % 2 != 1)\r\n                    return \"continue\";\r\n                var _a = tslib_1.__read(this_1.coordinates.map_to_screen(xs[i], ys[i]), 2), sx0 = _a[0], sy0 = _a[1];\r\n                var _b = tslib_1.__read(this_1.coordinates.map_to_screen(xs[i + 1], ys[i + 1]), 2), sx1 = _b[0], sy1 = _b[1];\r\n                if (this_1.visuals.band_fill.doit)\r\n                    ctx.fillRect(sx0[0], sy0[0], sx1[1] - sx0[0], sy1[1] - sy0[0]);\r\n                this_1.visuals.band_hatch.doit2(ctx, i, function () {\r\n                    ctx.fillRect(sx0[0], sy0[0], sx1[1] - sx0[0], sy1[1] - sy0[0]);\r\n                }, function () { return _this.request_render(); });\r\n            };\r\n            var this_1 = this;\r\n            for (var i = 0; i < xs.length - 1; i++) {\r\n                _loop_1(i);\r\n            }\r\n        };\r\n        GridView.prototype._draw_grids = function (ctx) {\r\n            if (!this.visuals.grid_line.doit)\r\n                return;\r\n            var _a = tslib_1.__read(this.grid_coords('major'), 2), xs = _a[0], ys = _a[1];\r\n            this._draw_grid_helper(ctx, this.visuals.grid_line, xs, ys);\r\n        };\r\n        GridView.prototype._draw_minor_grids = function (ctx) {\r\n            if (!this.visuals.minor_grid_line.doit)\r\n                return;\r\n            var _a = tslib_1.__read(this.grid_coords('minor'), 2), xs = _a[0], ys = _a[1];\r\n            this._draw_grid_helper(ctx, this.visuals.minor_grid_line, xs, ys);\r\n        };\r\n        GridView.prototype._draw_grid_helper = function (ctx, visuals, xs, ys) {\r\n            visuals.set_value(ctx);\r\n            ctx.beginPath();\r\n            for (var i = 0; i < xs.length; i++) {\r\n                var _a = tslib_1.__read(this.coordinates.map_to_screen(xs[i], ys[i]), 2), sx = _a[0], sy = _a[1];\r\n                ctx.moveTo(Math.round(sx[0]), Math.round(sy[0]));\r\n                for (var i_1 = 1; i_1 < sx.length; i_1++) {\r\n                    ctx.lineTo(Math.round(sx[i_1]), Math.round(sy[i_1]));\r\n                }\r\n            }\r\n            ctx.stroke();\r\n        };\r\n        // {{{ TODO: state\r\n        GridView.prototype.ranges = function () {\r\n            var i = this.model.dimension;\r\n            var j = (i + 1) % 2;\r\n            var ranges = this.coordinates.ranges;\r\n            return [ranges[i], ranges[j]];\r\n        };\r\n        GridView.prototype.computed_bounds = function () {\r\n            var _a, e_1, _b, _c;\r\n            var _d = tslib_1.__read(this.ranges(), 1), range = _d[0];\r\n            var user_bounds = this.model.bounds;\r\n            var range_bounds = [range.min, range.max];\r\n            var start;\r\n            var end;\r\n            if (types_1.isArray(user_bounds)) {\r\n                start = Math.min(user_bounds[0], user_bounds[1]);\r\n                end = Math.max(user_bounds[0], user_bounds[1]);\r\n                if (start < range_bounds[0])\r\n                    start = range_bounds[0];\r\n                // XXX:\r\n                //else if (start > range_bounds[1])\r\n                //  start = null\r\n                if (end > range_bounds[1])\r\n                    end = range_bounds[1];\r\n                // XXX:\r\n                //else if (end < range_bounds[0])\r\n                //  end = null\r\n            }\r\n            else {\r\n                _a = tslib_1.__read(range_bounds, 2), start = _a[0], end = _a[1];\r\n                try {\r\n                    for (var _e = tslib_1.__values(this.plot_view.axis_views), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                        var axis_view = _f.value;\r\n                        if (axis_view.dimension == this.model.dimension\r\n                            && axis_view.model.x_range_name == this.model.x_range_name\r\n                            && axis_view.model.y_range_name == this.model.y_range_name) {\r\n                            _c = tslib_1.__read(axis_view.computed_bounds, 2), start = _c[0], end = _c[1];\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_f && !_f.done && (_b = _e.return))\r\n                            _b.call(_e);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n            }\r\n            return [start, end];\r\n        };\r\n        GridView.prototype.grid_coords = function (location, exclude_ends) {\r\n            var _a;\r\n            if (exclude_ends === void 0) {\r\n                exclude_ends = true;\r\n            }\r\n            var i = this.model.dimension;\r\n            var j = (i + 1) % 2;\r\n            var _b = tslib_1.__read(this.ranges(), 2), range = _b[0], cross_range = _b[1];\r\n            var _c = tslib_1.__read(this.computed_bounds(), 2), start = _c[0], end = _c[1];\r\n            _a = tslib_1.__read([Math.min(start, end), Math.max(start, end)], 2), start = _a[0], end = _a[1];\r\n            var coords = [[], []];\r\n            // TODO: (bev) using cross_range.min for cross_loc is a bit of a cheat. Since we\r\n            // currently only support \"straight line\" grids, this should be OK for now. If\r\n            // we ever want to support \"curved\" grids, e.g. for some projections, we may\r\n            // have to communicate more than just a single cross location.\r\n            var ticker = this.model.get_ticker();\r\n            if (ticker == null) {\r\n                return coords;\r\n            }\r\n            var ticks = ticker.get_ticks(start, end, range, cross_range.min, {})[location];\r\n            var min = range.min;\r\n            var max = range.max;\r\n            var cmin = cross_range.min;\r\n            var cmax = cross_range.max;\r\n            if (!exclude_ends) {\r\n                if (ticks[0] != min)\r\n                    ticks.splice(0, 0, min);\r\n                if (ticks[ticks.length - 1] != max)\r\n                    ticks.push(max);\r\n            }\r\n            for (var ii = 0; ii < ticks.length; ii++) {\r\n                if ((ticks[ii] == min || ticks[ii] == max) && exclude_ends)\r\n                    continue;\r\n                var dim_i = [];\r\n                var dim_j = [];\r\n                var N = 2;\r\n                for (var n = 0; n < N; n++) {\r\n                    var loc = cmin + (cmax - cmin) / (N - 1) * n;\r\n                    dim_i.push(ticks[ii]);\r\n                    dim_j.push(loc);\r\n                }\r\n                coords[i].push(dim_i);\r\n                coords[j].push(dim_j);\r\n            }\r\n            return coords;\r\n        };\r\n        return GridView;\r\n    }(guide_renderer_1.GuideRendererView));\r\n    exports.GridView = GridView;\r\n    GridView.__name__ = \"GridView\";\r\n    var Grid = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Grid, _super);\r\n        function Grid(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Grid.init_Grid = function () {\r\n            this.prototype.default_view = GridView;\r\n            this.mixins([\r\n                [\"grid_\", mixins.Line],\r\n                [\"minor_grid_\", mixins.Line],\r\n                [\"band_\", mixins.Fill],\r\n                [\"band_\", mixins.Hatch],\r\n            ]);\r\n            this.define({\r\n                bounds: [p.Any, 'auto'],\r\n                dimension: [p.Any, 0],\r\n                axis: [p.Instance],\r\n                ticker: [p.Instance],\r\n            });\r\n            this.override({\r\n                level: \"underlay\",\r\n                band_fill_color: null,\r\n                band_fill_alpha: 0,\r\n                grid_line_color: '#e5e5e5',\r\n                minor_grid_line_color: null,\r\n            });\r\n        };\r\n        Grid.prototype.get_ticker = function () {\r\n            if (this.ticker != null) {\r\n                return this.ticker;\r\n            }\r\n            if (this.axis != null) {\r\n                return this.axis.ticker;\r\n            }\r\n            return null;\r\n        };\r\n        return Grid;\r\n    }(guide_renderer_1.GuideRenderer));\r\n    exports.Grid = Grid;\r\n    Grid.__name__ = \"Grid\";\r\n    Grid.init_Grid();\r\n}\r\n","/* models\\layouts\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var box_1 = require(386) /* ./box */;\r\n    exports.Box = box_1.Box;\r\n    var column_1 = require(389) /* ./column */;\r\n    exports.Column = column_1.Column;\r\n    var grid_box_1 = require(390) /* ./grid_box */;\r\n    exports.GridBox = grid_box_1.GridBox;\r\n    var html_box_1 = require(391) /* ./html_box */;\r\n    exports.HTMLBox = html_box_1.HTMLBox;\r\n    var layout_dom_1 = require(387) /* ./layout_dom */;\r\n    exports.LayoutDOM = layout_dom_1.LayoutDOM;\r\n    var row_1 = require(392) /* ./row */;\r\n    exports.Row = row_1.Row;\r\n    var spacer_1 = require(393) /* ./spacer */;\r\n    exports.Spacer = spacer_1.Spacer;\r\n    var tabs_1 = require(394) /* ./tabs */;\r\n    exports.Panel = tabs_1.Panel;\r\n    exports.Tabs = tabs_1.Tabs;\r\n    var widget_box_1 = require(401) /* ./widget_box */;\r\n    exports.WidgetBox = widget_box_1.WidgetBox;\r\n}\r\n","/* models\\layouts\\box.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layout_dom_1 = require(387) /* ./layout_dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var BoxView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxView, _super);\r\n        function BoxView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BoxView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.children.change, function () { return _this.rebuild(); });\r\n        };\r\n        Object.defineProperty(BoxView.prototype, \"child_models\", {\r\n            get: function () {\r\n                return this.model.children;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return BoxView;\r\n    }(layout_dom_1.LayoutDOMView));\r\n    exports.BoxView = BoxView;\r\n    BoxView.__name__ = \"BoxView\";\r\n    var Box = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Box, _super);\r\n        function Box(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Box.init_Box = function () {\r\n            this.define({\r\n                children: [p.Array, []],\r\n                spacing: [p.Number, 0],\r\n            });\r\n        };\r\n        return Box;\r\n    }(layout_dom_1.LayoutDOM));\r\n    exports.Box = Box;\r\n    Box.__name__ = \"Box\";\r\n    Box.init_Box();\r\n}\r\n","/* models\\layouts\\layout_dom.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var enums_1 = require(135) /* ../../core/enums */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var build_views_1 = require(230) /* ../../core/build_views */;\r\n    var dom_view_1 = require(193) /* ../../core/dom_view */;\r\n    var layout_1 = require(327) /* ../../core/layout */;\r\n    var root_1 = require(388) /* ../../styles/root */;\r\n    var canvas_1 = require(192) /* ../canvas/canvas */;\r\n    var LayoutDOMView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LayoutDOMView, _super);\r\n        function LayoutDOMView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._idle_notified = false;\r\n            _this._offset_parent = null;\r\n            _this._viewport = {};\r\n            return _this;\r\n        }\r\n        LayoutDOMView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.el.style.position = this.is_root ? \"relative\" : \"absolute\";\r\n            this._child_views = new Map();\r\n        };\r\n        LayoutDOMView.prototype.lazy_initialize = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.build_child_views()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LayoutDOMView.prototype.remove = function () {\r\n            var e_1, _a;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.child_views), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child_view = _c.value;\r\n                    child_view.remove();\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            this._child_views.clear();\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        LayoutDOMView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            if (this.is_root) {\r\n                this._on_resize = function () { return _this.resize_layout(); };\r\n                window.addEventListener(\"resize\", this._on_resize);\r\n                this._parent_observer = setInterval(function () {\r\n                    var offset_parent = _this.el.offsetParent;\r\n                    if (_this._offset_parent != offset_parent) {\r\n                        _this._offset_parent = offset_parent;\r\n                        if (offset_parent != null) {\r\n                            _this.compute_viewport();\r\n                            _this.invalidate_layout();\r\n                        }\r\n                    }\r\n                }, 250);\r\n            }\r\n            var p = this.model.properties;\r\n            this.on_change([\r\n                p.width, p.height,\r\n                p.min_width, p.min_height,\r\n                p.max_width, p.max_height,\r\n                p.margin,\r\n                p.width_policy, p.height_policy, p.sizing_mode,\r\n                p.aspect_ratio,\r\n                p.visible,\r\n            ], function () { return _this.invalidate_layout(); });\r\n            this.on_change([\r\n                p.background,\r\n                p.css_classes,\r\n            ], function () { return _this.invalidate_render(); });\r\n        };\r\n        LayoutDOMView.prototype.disconnect_signals = function () {\r\n            if (this._parent_observer != null)\r\n                clearTimeout(this._parent_observer);\r\n            if (this._on_resize != null)\r\n                window.removeEventListener(\"resize\", this._on_resize);\r\n            _super.prototype.disconnect_signals.call(this);\r\n        };\r\n        LayoutDOMView.prototype.css_classes = function () {\r\n            return _super.prototype.css_classes.call(this).concat(this.model.css_classes);\r\n        };\r\n        Object.defineProperty(LayoutDOMView.prototype, \"child_views\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return this.child_models.map(function (child) { return _this._child_views.get(child); });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        LayoutDOMView.prototype.build_child_views = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, build_views_1.build_views(this._child_views, this.child_models, { parent: this })];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LayoutDOMView.prototype.render = function () {\r\n            var _a, e_2, _b;\r\n            _super.prototype.render.call(this);\r\n            dom_1.empty(this.el); // XXX: this should be in super\r\n            var background = this.model.background;\r\n            this.el.style.backgroundColor = background != null ? background : \"\";\r\n            (_a = dom_1.classes(this.el).clear()).add.apply(_a, tslib_1.__spread(this.css_classes()));\r\n            try {\r\n                for (var _c = tslib_1.__values(this.child_views), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var child_view = _d.value;\r\n                    this.el.appendChild(child_view.el);\r\n                    child_view.render();\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        LayoutDOMView.prototype.update_layout = function () {\r\n            var e_3, _a;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.child_views), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child_view = _c.value;\r\n                    child_view.update_layout();\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            this._update_layout();\r\n        };\r\n        LayoutDOMView.prototype.update_position = function () {\r\n            var e_4, _a;\r\n            this.el.style.display = this.model.visible ? \"block\" : \"none\";\r\n            var margin = this.is_root ? this.layout.sizing.margin : undefined;\r\n            dom_1.position(this.el, this.layout.bbox, margin);\r\n            try {\r\n                for (var _b = tslib_1.__values(this.child_views), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child_view = _c.value;\r\n                    child_view.update_position();\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n        };\r\n        LayoutDOMView.prototype.after_layout = function () {\r\n            var e_5, _a;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.child_views), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child_view = _c.value;\r\n                    child_view.after_layout();\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            this._has_finished = true;\r\n        };\r\n        LayoutDOMView.prototype.compute_viewport = function () {\r\n            this._viewport = this._viewport_size();\r\n        };\r\n        LayoutDOMView.prototype.renderTo = function (element) {\r\n            element.appendChild(this.el);\r\n            this._offset_parent = this.el.offsetParent;\r\n            this.compute_viewport();\r\n            this.build();\r\n        };\r\n        LayoutDOMView.prototype.build = function () {\r\n            this.assert_root();\r\n            this.render();\r\n            this.update_layout();\r\n            this.compute_layout();\r\n            return this;\r\n        };\r\n        LayoutDOMView.prototype.rebuild = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.build_child_views()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            this.invalidate_render();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LayoutDOMView.prototype.compute_layout = function () {\r\n            var start = Date.now();\r\n            this.layout.compute(this._viewport);\r\n            this.update_position();\r\n            this.after_layout();\r\n            logging_1.logger.debug(\"layout computed in \" + (Date.now() - start) + \" ms\");\r\n            this.notify_finished();\r\n        };\r\n        LayoutDOMView.prototype.resize_layout = function () {\r\n            this.root.compute_viewport();\r\n            this.root.compute_layout();\r\n        };\r\n        LayoutDOMView.prototype.invalidate_layout = function () {\r\n            this.root.update_layout();\r\n            this.root.compute_layout();\r\n        };\r\n        LayoutDOMView.prototype.invalidate_render = function () {\r\n            this.render();\r\n            this.invalidate_layout();\r\n        };\r\n        LayoutDOMView.prototype.has_finished = function () {\r\n            var e_6, _a;\r\n            if (!_super.prototype.has_finished.call(this))\r\n                return false;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.child_views), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var child_view = _c.value;\r\n                    if (!child_view.has_finished())\r\n                        return false;\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        LayoutDOMView.prototype.notify_finished = function () {\r\n            if (!this.is_root)\r\n                this.root.notify_finished();\r\n            else {\r\n                if (!this._idle_notified && this.has_finished()) {\r\n                    if (this.model.document != null) {\r\n                        this._idle_notified = true;\r\n                        this.model.document.notify_idle(this.model);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        LayoutDOMView.prototype._width_policy = function () {\r\n            return this.model.width != null ? \"fixed\" : \"fit\";\r\n        };\r\n        LayoutDOMView.prototype._height_policy = function () {\r\n            return this.model.height != null ? \"fixed\" : \"fit\";\r\n        };\r\n        LayoutDOMView.prototype.box_sizing = function () {\r\n            var _a;\r\n            var _b = this.model, width_policy = _b.width_policy, height_policy = _b.height_policy, aspect_ratio = _b.aspect_ratio;\r\n            if (width_policy == \"auto\")\r\n                width_policy = this._width_policy();\r\n            if (height_policy == \"auto\")\r\n                height_policy = this._height_policy();\r\n            var sizing_mode = this.model.sizing_mode;\r\n            if (sizing_mode != null) {\r\n                if (sizing_mode == \"fixed\")\r\n                    width_policy = height_policy = \"fixed\";\r\n                else if (sizing_mode == \"stretch_both\")\r\n                    width_policy = height_policy = \"max\";\r\n                else if (sizing_mode == \"stretch_width\")\r\n                    width_policy = \"max\";\r\n                else if (sizing_mode == \"stretch_height\")\r\n                    height_policy = \"max\";\r\n                else {\r\n                    if (aspect_ratio == null)\r\n                        aspect_ratio = \"auto\";\r\n                    switch (sizing_mode) {\r\n                        case \"scale_width\":\r\n                            width_policy = \"max\";\r\n                            height_policy = \"min\";\r\n                            break;\r\n                        case \"scale_height\":\r\n                            width_policy = \"min\";\r\n                            height_policy = \"max\";\r\n                            break;\r\n                        case \"scale_both\":\r\n                            width_policy = \"max\";\r\n                            height_policy = \"max\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            var sizing = { width_policy: width_policy, height_policy: height_policy };\r\n            var _c = this.model, min_width = _c.min_width, min_height = _c.min_height;\r\n            if (min_width != null)\r\n                sizing.min_width = min_width;\r\n            if (min_height != null)\r\n                sizing.min_height = min_height;\r\n            var _d = this.model, width = _d.width, height = _d.height;\r\n            if (width != null)\r\n                sizing.width = width;\r\n            if (height != null)\r\n                sizing.height = height;\r\n            var _e = this.model, max_width = _e.max_width, max_height = _e.max_height;\r\n            if (max_width != null)\r\n                sizing.max_width = max_width;\r\n            if (max_height != null)\r\n                sizing.max_height = max_height;\r\n            if (aspect_ratio == \"auto\" && width != null && height != null)\r\n                sizing.aspect = width / height;\r\n            else if (types_1.isNumber(aspect_ratio))\r\n                sizing.aspect = aspect_ratio;\r\n            var margin = this.model.margin;\r\n            if (margin != null) {\r\n                if (types_1.isNumber(margin))\r\n                    sizing.margin = { top: margin, right: margin, bottom: margin, left: margin };\r\n                else if (margin.length == 2) {\r\n                    var _f = tslib_1.__read(margin, 2), vertical = _f[0], horizontal = _f[1];\r\n                    sizing.margin = { top: vertical, right: horizontal, bottom: vertical, left: horizontal };\r\n                }\r\n                else {\r\n                    var _g = tslib_1.__read(margin, 4), top = _g[0], right = _g[1], bottom = _g[2], left = _g[3];\r\n                    sizing.margin = { top: top, right: right, bottom: bottom, left: left };\r\n                }\r\n            }\r\n            sizing.visible = this.model.visible;\r\n            var align = this.model.align;\r\n            if (types_1.isArray(align))\r\n                _a = tslib_1.__read(align, 2), sizing.halign = _a[0], sizing.valign = _a[1];\r\n            else\r\n                sizing.halign = sizing.valign = align;\r\n            return sizing;\r\n        };\r\n        LayoutDOMView.prototype._viewport_size = function () {\r\n            var _this = this;\r\n            return dom_1.undisplayed(this.el, function () {\r\n                var measuring = _this.el;\r\n                while (measuring = measuring.parentElement) {\r\n                    // .bk-root element doesn't bring any value\r\n                    if (measuring.classList.contains(root_1.bk_root))\r\n                        continue;\r\n                    // we reached <body> element, so use viewport size\r\n                    if (measuring == document.body) {\r\n                        var _a = dom_1.extents(document.body).margin, left_1 = _a.left, right_1 = _a.right, top_1 = _a.top, bottom_1 = _a.bottom;\r\n                        var width_1 = Math.ceil(document.documentElement.clientWidth - left_1 - right_1);\r\n                        var height_1 = Math.ceil(document.documentElement.clientHeight - top_1 - bottom_1);\r\n                        return { width: width_1, height: height_1 };\r\n                    }\r\n                    // stop on first element with sensible dimensions\r\n                    var _b = dom_1.extents(measuring).padding, left = _b.left, right = _b.right, top = _b.top, bottom = _b.bottom;\r\n                    var _c = measuring.getBoundingClientRect(), width = _c.width, height = _c.height;\r\n                    var inner_width = Math.ceil(width - left - right);\r\n                    var inner_height = Math.ceil(height - top - bottom);\r\n                    if (inner_width > 0 || inner_height > 0)\r\n                        return {\r\n                            width: inner_width > 0 ? inner_width : undefined,\r\n                            height: inner_height > 0 ? inner_height : undefined,\r\n                        };\r\n                }\r\n                // this element is detached from DOM\r\n                return {};\r\n            });\r\n        };\r\n        LayoutDOMView.prototype.export = function (type, hidpi) {\r\n            var e_7, _a;\r\n            if (hidpi === void 0) {\r\n                hidpi = true;\r\n            }\r\n            var output_backend = type == \"png\" ? \"canvas\" : \"svg\";\r\n            var composite = new canvas_1.CanvasLayer(output_backend, hidpi);\r\n            var _b = this.layout.bbox, width = _b.width, height = _b.height;\r\n            composite.resize(width, height);\r\n            try {\r\n                for (var _c = tslib_1.__values(this.child_views), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var view = _d.value;\r\n                    var region = view.export(type, hidpi);\r\n                    var _e = view.layout.bbox, x = _e.x, y = _e.y;\r\n                    composite.ctx.drawImage(region.canvas, x, y);\r\n                }\r\n            }\r\n            catch (e_7_1) {\r\n                e_7 = { error: e_7_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return))\r\n                        _a.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_7)\r\n                        throw e_7.error;\r\n                }\r\n            }\r\n            return composite;\r\n        };\r\n        LayoutDOMView.prototype.serializable_state = function () {\r\n            return Object.assign(Object.assign({}, _super.prototype.serializable_state.call(this)), { bbox: this.layout.bbox.box, children: this.child_views.map(function (child) { return child.serializable_state(); }) });\r\n        };\r\n        return LayoutDOMView;\r\n    }(dom_view_1.DOMView));\r\n    exports.LayoutDOMView = LayoutDOMView;\r\n    LayoutDOMView.__name__ = \"LayoutDOMView\";\r\n    var LayoutDOM = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LayoutDOM, _super);\r\n        function LayoutDOM(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LayoutDOM.init_LayoutDOM = function () {\r\n            this.define(function (types) {\r\n                var Boolean = types.Boolean, Number = types.Number, String = types.String, Null = types.Null, Auto = types.Auto, Color = types.Color, Array = types.Array, Tuple = types.Tuple, Or = types.Or;\r\n                var Number2 = Tuple(Number, Number);\r\n                var Number4 = Tuple(Number, Number, Number, Number);\r\n                return {\r\n                    width: [Or(Number, Null), null],\r\n                    height: [Or(Number, Null), null],\r\n                    min_width: [Or(Number, Null), null],\r\n                    min_height: [Or(Number, Null), null],\r\n                    max_width: [Or(Number, Null), null],\r\n                    max_height: [Or(Number, Null), null],\r\n                    margin: [Or(Number, Number2, Number4), [0, 0, 0, 0]],\r\n                    width_policy: [Or(layout_1.SizingPolicy, Auto), \"auto\"],\r\n                    height_policy: [Or(layout_1.SizingPolicy, Auto), \"auto\"],\r\n                    aspect_ratio: [Or(Number, Auto, Null), null],\r\n                    sizing_mode: [Or(enums_1.SizingMode, Null), null],\r\n                    visible: [Boolean, true],\r\n                    disabled: [Boolean, false],\r\n                    align: [Or(enums_1.Align, Tuple(enums_1.Align, enums_1.Align)), \"start\"],\r\n                    background: [Or(Color, Null), null],\r\n                    css_classes: [Array(String), []],\r\n                };\r\n            });\r\n        };\r\n        return LayoutDOM;\r\n    }(model_1.Model));\r\n    exports.LayoutDOM = LayoutDOM;\r\n    LayoutDOM.__name__ = \"LayoutDOM\";\r\n    LayoutDOM.init_LayoutDOM();\r\n}\r\n","/* styles\\root.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_root = \"bk-root\";\r\n}\r\n","/* models\\layouts\\column.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var box_1 = require(386) /* ./box */;\r\n    var grid_1 = require(331) /* ../../core/layout/grid */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var ColumnView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ColumnView, _super);\r\n        function ColumnView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ColumnView.prototype._update_layout = function () {\r\n            var items = this.child_views.map(function (child) { return child.layout; });\r\n            this.layout = new grid_1.Column(items);\r\n            this.layout.rows = this.model.rows;\r\n            this.layout.spacing = [this.model.spacing, 0];\r\n            this.layout.set_sizing(this.box_sizing());\r\n        };\r\n        return ColumnView;\r\n    }(box_1.BoxView));\r\n    exports.ColumnView = ColumnView;\r\n    ColumnView.__name__ = \"ColumnView\";\r\n    var Column = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Column, _super);\r\n        function Column(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Column.init_Column = function () {\r\n            this.prototype.default_view = ColumnView;\r\n            this.define({\r\n                rows: [p.Any, \"auto\"],\r\n            });\r\n        };\r\n        return Column;\r\n    }(box_1.Box));\r\n    exports.Column = Column;\r\n    Column.__name__ = \"Column\";\r\n    Column.init_Column();\r\n}\r\n","/* models\\layouts\\grid_box.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layout_dom_1 = require(387) /* ./layout_dom */;\r\n    var grid_1 = require(331) /* ../../core/layout/grid */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var GridBoxView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GridBoxView, _super);\r\n        function GridBoxView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GridBoxView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.children.change, function () { return _this.rebuild(); });\r\n        };\r\n        Object.defineProperty(GridBoxView.prototype, \"child_models\", {\r\n            get: function () {\r\n                return this.model.children.map(function (_a) {\r\n                    var _b = tslib_1.__read(_a, 1), child = _b[0];\r\n                    return child;\r\n                });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        GridBoxView.prototype._update_layout = function () {\r\n            var e_1, _a;\r\n            this.layout = new grid_1.Grid();\r\n            this.layout.rows = this.model.rows;\r\n            this.layout.cols = this.model.cols;\r\n            this.layout.spacing = this.model.spacing;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.model.children), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = tslib_1.__read(_c.value, 5), child = _d[0], row = _d[1], col = _d[2], row_span = _d[3], col_span = _d[4];\r\n                    var child_view = this._child_views.get(child);\r\n                    this.layout.items.push({ layout: child_view.layout, row: row, col: col, row_span: row_span, col_span: col_span });\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            this.layout.set_sizing(this.box_sizing());\r\n        };\r\n        return GridBoxView;\r\n    }(layout_dom_1.LayoutDOMView));\r\n    exports.GridBoxView = GridBoxView;\r\n    GridBoxView.__name__ = \"GridBoxView\";\r\n    var GridBox = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GridBox, _super);\r\n        function GridBox(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GridBox.init_GridBox = function () {\r\n            this.prototype.default_view = GridBoxView;\r\n            this.define({\r\n                children: [p.Array, []],\r\n                rows: [p.Any, \"auto\"],\r\n                cols: [p.Any, \"auto\"],\r\n                spacing: [p.Any, 0],\r\n            });\r\n        };\r\n        return GridBox;\r\n    }(layout_dom_1.LayoutDOM));\r\n    exports.GridBox = GridBox;\r\n    GridBox.__name__ = \"GridBox\";\r\n    GridBox.init_GridBox();\r\n}\r\n","/* models\\layouts\\html_box.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layout_dom_1 = require(387) /* ../layouts/layout_dom */;\r\n    var layout_1 = require(327) /* ../../core/layout */;\r\n    var HTMLBoxView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HTMLBoxView, _super);\r\n        function HTMLBoxView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(HTMLBoxView.prototype, \"child_models\", {\r\n            get: function () {\r\n                return [];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        HTMLBoxView.prototype._update_layout = function () {\r\n            this.layout = new layout_1.ContentBox(this.el);\r\n            this.layout.set_sizing(this.box_sizing());\r\n        };\r\n        return HTMLBoxView;\r\n    }(layout_dom_1.LayoutDOMView));\r\n    exports.HTMLBoxView = HTMLBoxView;\r\n    HTMLBoxView.__name__ = \"HTMLBoxView\";\r\n    var HTMLBox = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HTMLBox, _super);\r\n        function HTMLBox(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        return HTMLBox;\r\n    }(layout_dom_1.LayoutDOM));\r\n    exports.HTMLBox = HTMLBox;\r\n    HTMLBox.__name__ = \"HTMLBox\";\r\n}\r\n","/* models\\layouts\\row.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var box_1 = require(386) /* ./box */;\r\n    var grid_1 = require(331) /* ../../core/layout/grid */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var RowView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RowView, _super);\r\n        function RowView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        RowView.prototype._update_layout = function () {\r\n            var items = this.child_views.map(function (child) { return child.layout; });\r\n            this.layout = new grid_1.Row(items);\r\n            this.layout.cols = this.model.cols;\r\n            this.layout.spacing = [0, this.model.spacing];\r\n            this.layout.set_sizing(this.box_sizing());\r\n        };\r\n        return RowView;\r\n    }(box_1.BoxView));\r\n    exports.RowView = RowView;\r\n    RowView.__name__ = \"RowView\";\r\n    var Row = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Row, _super);\r\n        function Row(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Row.init_Row = function () {\r\n            this.prototype.default_view = RowView;\r\n            this.define({\r\n                cols: [p.Any, \"auto\"],\r\n            });\r\n        };\r\n        return Row;\r\n    }(box_1.Box));\r\n    exports.Row = Row;\r\n    Row.__name__ = \"Row\";\r\n    Row.init_Row();\r\n}\r\n","/* models\\layouts\\spacer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layout_dom_1 = require(387) /* ./layout_dom */;\r\n    var layout_1 = require(327) /* ../../core/layout */;\r\n    var SpacerView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SpacerView, _super);\r\n        function SpacerView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(SpacerView.prototype, \"child_models\", {\r\n            get: function () {\r\n                return [];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        SpacerView.prototype._update_layout = function () {\r\n            this.layout = new layout_1.LayoutItem();\r\n            this.layout.set_sizing(this.box_sizing());\r\n        };\r\n        return SpacerView;\r\n    }(layout_dom_1.LayoutDOMView));\r\n    exports.SpacerView = SpacerView;\r\n    SpacerView.__name__ = \"SpacerView\";\r\n    var Spacer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Spacer, _super);\r\n        function Spacer(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Spacer.init_Spacer = function () {\r\n            this.prototype.default_view = SpacerView;\r\n        };\r\n        return Spacer;\r\n    }(layout_dom_1.LayoutDOM));\r\n    exports.Spacer = Spacer;\r\n    Spacer.__name__ = \"Spacer\";\r\n    Spacer.init_Spacer();\r\n}\r\n","/* models\\layouts\\tabs.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var layout_1 = require(327) /* ../../core/layout */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var layout_dom_1 = require(387) /* ./layout_dom */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var mixins_1 = require(288) /* ../../styles/mixins */;\r\n    var tabs_1 = require(395) /* ../../styles/tabs */;\r\n    var buttons_1 = require(396) /* ../../styles/buttons */;\r\n    var menus_1 = require(397) /* ../../styles/menus */;\r\n    var buttons_css_1 = tslib_1.__importDefault(require(398) /* ../../styles/buttons.css */);\r\n    var menus_css_1 = tslib_1.__importDefault(require(399) /* ../../styles/menus.css */);\r\n    var tabs_css_1 = tslib_1.__importDefault(require(400) /* ../../styles/tabs.css */);\r\n    var TabsView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TabsView, _super);\r\n        function TabsView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TabsView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.tabs.change, function () { return _this.rebuild(); });\r\n            this.connect(this.model.properties.active.change, function () { return _this.on_active_change(); });\r\n        };\r\n        TabsView.prototype.styles = function () {\r\n            return tslib_1.__spread(_super.prototype.styles.call(this), [buttons_css_1.default, menus_css_1.default, tabs_css_1.default]);\r\n        };\r\n        Object.defineProperty(TabsView.prototype, \"child_models\", {\r\n            get: function () {\r\n                return this.model.tabs.map(function (tab) { return tab.child; });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        TabsView.prototype._update_layout = function () {\r\n            var loc = this.model.tabs_location;\r\n            var vertical = loc == \"above\" || loc == \"below\";\r\n            // XXX: this is a hack, this should be handled by \"fit\" policy in grid layout\r\n            var _a = this, scroll_el = _a.scroll_el, headers_el = _a.headers_el;\r\n            this.header = new /** @class */ (function (_super) {\r\n                tslib_1.__extends(class_1, _super);\r\n                function class_1() {\r\n                    return _super !== null && _super.apply(this, arguments) || this;\r\n                }\r\n                class_1.prototype._measure = function (viewport) {\r\n                    var min_headers = 3;\r\n                    var scroll = dom_1.size(scroll_el);\r\n                    var headers = dom_1.children(headers_el).slice(0, min_headers).map(function (el) { return dom_1.size(el); });\r\n                    var _a = _super.prototype._measure.call(this, viewport), width = _a.width, height = _a.height;\r\n                    if (vertical) {\r\n                        var min_width = scroll.width + array_1.sum(headers.map(function (size) { return size.width; }));\r\n                        return { width: viewport.width != Infinity ? viewport.width : min_width, height: height };\r\n                    }\r\n                    else {\r\n                        var min_height = scroll.height + array_1.sum(headers.map(function (size) { return size.height; }));\r\n                        return { width: width, height: viewport.height != Infinity ? viewport.height : min_height };\r\n                    }\r\n                };\r\n                return class_1;\r\n            }(layout_1.ContentBox))(this.header_el);\r\n            if (vertical)\r\n                this.header.set_sizing({ width_policy: \"fit\", height_policy: \"fixed\" });\r\n            else\r\n                this.header.set_sizing({ width_policy: \"fixed\", height_policy: \"fit\" });\r\n            var row = 1;\r\n            var col = 1;\r\n            switch (loc) {\r\n                case \"above\":\r\n                    row -= 1;\r\n                    break;\r\n                case \"below\":\r\n                    row += 1;\r\n                    break;\r\n                case \"left\":\r\n                    col -= 1;\r\n                    break;\r\n                case \"right\":\r\n                    col += 1;\r\n                    break;\r\n            }\r\n            var header = { layout: this.header, row: row, col: col };\r\n            var panels = this.child_views.map(function (child_view) {\r\n                return { layout: child_view.layout, row: 1, col: 1 };\r\n            });\r\n            this.layout = new layout_1.Grid(tslib_1.__spread([header], panels));\r\n            this.layout.set_sizing(this.box_sizing());\r\n        };\r\n        TabsView.prototype.update_position = function () {\r\n            var e_1, _a;\r\n            _super.prototype.update_position.call(this);\r\n            this.header_el.style.position = \"absolute\"; // XXX: do it in position()\r\n            dom_1.position(this.header_el, this.header.bbox);\r\n            var loc = this.model.tabs_location;\r\n            var vertical = loc == \"above\" || loc == \"below\";\r\n            var scroll_el_size = dom_1.size(this.scroll_el);\r\n            var headers_el_size = dom_1.scroll_size(this.headers_el);\r\n            if (vertical) {\r\n                var width = this.header.bbox.width;\r\n                if (headers_el_size.width > width) {\r\n                    this.wrapper_el.style.maxWidth = width - scroll_el_size.width + \"px\";\r\n                    dom_1.display(this.scroll_el);\r\n                }\r\n                else {\r\n                    this.wrapper_el.style.maxWidth = \"\";\r\n                    dom_1.undisplay(this.scroll_el);\r\n                }\r\n            }\r\n            else {\r\n                var height = this.header.bbox.height;\r\n                if (headers_el_size.height > height) {\r\n                    this.wrapper_el.style.maxHeight = height - scroll_el_size.height + \"px\";\r\n                    dom_1.display(this.scroll_el);\r\n                }\r\n                else {\r\n                    this.wrapper_el.style.maxHeight = \"\";\r\n                    dom_1.undisplay(this.scroll_el);\r\n                }\r\n            }\r\n            var child_views = this.child_views;\r\n            try {\r\n                for (var child_views_1 = tslib_1.__values(child_views), child_views_1_1 = child_views_1.next(); !child_views_1_1.done; child_views_1_1 = child_views_1.next()) {\r\n                    var child_view = child_views_1_1.value;\r\n                    dom_1.hide(child_view.el);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (child_views_1_1 && !child_views_1_1.done && (_a = child_views_1.return))\r\n                        _a.call(child_views_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            var tab = child_views[this.model.active];\r\n            if (tab != null)\r\n                dom_1.show(tab.el);\r\n        };\r\n        TabsView.prototype.render = function () {\r\n            var _this = this;\r\n            _super.prototype.render.call(this);\r\n            var active = this.model.active;\r\n            var loc = this.model.tabs_location;\r\n            var vertical = loc == \"above\" || loc == \"below\";\r\n            var headers = this.model.tabs.map(function (tab, i) {\r\n                var el = dom_1.div({ class: [tabs_1.bk_tab, i == active ? mixins_1.bk_active : null] }, tab.title);\r\n                el.addEventListener(\"click\", function (event) {\r\n                    if (event.target == event.currentTarget)\r\n                        _this.change_active(i);\r\n                });\r\n                if (tab.closable) {\r\n                    var close_el = dom_1.div({ class: tabs_1.bk_close });\r\n                    close_el.addEventListener(\"click\", function (event) {\r\n                        if (event.target == event.currentTarget) {\r\n                            _this.model.tabs = array_1.remove_at(_this.model.tabs, i);\r\n                            var ntabs = _this.model.tabs.length;\r\n                            if (_this.model.active > ntabs - 1)\r\n                                _this.model.active = ntabs - 1;\r\n                        }\r\n                    });\r\n                    el.appendChild(close_el);\r\n                }\r\n                return el;\r\n            });\r\n            this.headers_el = dom_1.div({ class: [tabs_1.bk_headers] }, headers);\r\n            this.wrapper_el = dom_1.div({ class: tabs_1.bk_headers_wrapper }, this.headers_el);\r\n            var left_el = dom_1.div({ class: [buttons_1.bk_btn, buttons_1.bk_btn_default], disabled: \"\" }, dom_1.div({ class: [menus_1.bk_caret, mixins_1.bk_left] }));\r\n            var right_el = dom_1.div({ class: [buttons_1.bk_btn, buttons_1.bk_btn_default] }, dom_1.div({ class: [menus_1.bk_caret, mixins_1.bk_right] }));\r\n            var scroll_index = 0;\r\n            var do_scroll = function (dir) {\r\n                return function () {\r\n                    var ntabs = _this.model.tabs.length;\r\n                    if (dir == \"left\")\r\n                        scroll_index = Math.max(scroll_index - 1, 0);\r\n                    else\r\n                        scroll_index = Math.min(scroll_index + 1, ntabs - 1);\r\n                    if (scroll_index == 0)\r\n                        left_el.setAttribute(\"disabled\", \"\");\r\n                    else\r\n                        left_el.removeAttribute(\"disabled\");\r\n                    if (scroll_index == ntabs - 1)\r\n                        right_el.setAttribute(\"disabled\", \"\");\r\n                    else\r\n                        right_el.removeAttribute(\"disabled\");\r\n                    var sizes = dom_1.children(_this.headers_el)\r\n                        .slice(0, scroll_index)\r\n                        .map(function (el) { return el.getBoundingClientRect(); });\r\n                    if (vertical) {\r\n                        var left = -array_1.sum(sizes.map(function (size) { return size.width; }));\r\n                        _this.headers_el.style.left = left + \"px\";\r\n                    }\r\n                    else {\r\n                        var top = -array_1.sum(sizes.map(function (size) { return size.height; }));\r\n                        _this.headers_el.style.top = top + \"px\";\r\n                    }\r\n                };\r\n            };\r\n            left_el.addEventListener(\"click\", do_scroll(\"left\"));\r\n            right_el.addEventListener(\"click\", do_scroll(\"right\"));\r\n            this.scroll_el = dom_1.div({ class: buttons_1.bk_btn_group }, left_el, right_el);\r\n            this.header_el = dom_1.div({ class: [tabs_1.bk_tabs_header, mixins_1.bk_side(loc)] }, this.scroll_el, this.wrapper_el);\r\n            this.el.appendChild(this.header_el);\r\n        };\r\n        TabsView.prototype.change_active = function (i) {\r\n            if (i != this.model.active) {\r\n                this.model.active = i;\r\n            }\r\n        };\r\n        TabsView.prototype.on_active_change = function () {\r\n            var e_2, _a, e_3, _b;\r\n            var i = this.model.active;\r\n            var headers = dom_1.children(this.headers_el);\r\n            try {\r\n                for (var headers_1 = tslib_1.__values(headers), headers_1_1 = headers_1.next(); !headers_1_1.done; headers_1_1 = headers_1.next()) {\r\n                    var el = headers_1_1.value;\r\n                    el.classList.remove(mixins_1.bk_active);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (headers_1_1 && !headers_1_1.done && (_a = headers_1.return))\r\n                        _a.call(headers_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            headers[i].classList.add(mixins_1.bk_active);\r\n            var child_views = this.child_views;\r\n            try {\r\n                for (var child_views_2 = tslib_1.__values(child_views), child_views_2_1 = child_views_2.next(); !child_views_2_1.done; child_views_2_1 = child_views_2.next()) {\r\n                    var child_view = child_views_2_1.value;\r\n                    dom_1.hide(child_view.el);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (child_views_2_1 && !child_views_2_1.done && (_b = child_views_2.return))\r\n                        _b.call(child_views_2);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            dom_1.show(child_views[i].el);\r\n        };\r\n        return TabsView;\r\n    }(layout_dom_1.LayoutDOMView));\r\n    exports.TabsView = TabsView;\r\n    TabsView.__name__ = \"TabsView\";\r\n    var Tabs = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Tabs, _super);\r\n        function Tabs(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Tabs.init_Tabs = function () {\r\n            this.prototype.default_view = TabsView;\r\n            this.define({\r\n                tabs: [p.Array, []],\r\n                tabs_location: [p.Location, \"above\"],\r\n                active: [p.Number, 0],\r\n            });\r\n        };\r\n        return Tabs;\r\n    }(layout_dom_1.LayoutDOM));\r\n    exports.Tabs = Tabs;\r\n    Tabs.__name__ = \"Tabs\";\r\n    Tabs.init_Tabs();\r\n    var Panel = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Panel, _super);\r\n        function Panel(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Panel.init_Panel = function () {\r\n            this.define({\r\n                title: [p.String, \"\"],\r\n                child: [p.Instance],\r\n                closable: [p.Boolean, false],\r\n            });\r\n        };\r\n        return Panel;\r\n    }(model_1.Model));\r\n    exports.Panel = Panel;\r\n    Panel.__name__ = \"Panel\";\r\n    Panel.init_Panel();\r\n}\r\n","/* styles\\tabs.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_tabs_header = \"bk-tabs-header\";\r\n    exports.bk_headers_wrapper = \"bk-headers-wrapper\";\r\n    exports.bk_headers = \"bk-headers\";\r\n    exports.bk_tab = \"bk-tab\";\r\n    exports.bk_close = \"bk-close\";\r\n}\r\n","/* styles\\buttons.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_btn = \"bk-btn\";\r\n    exports.bk_btn_group = \"bk-btn-group\";\r\n    exports.bk_btn_default = \"bk-btn-default\";\r\n    exports.bk_btn_primary = \"bk-btn-primary\";\r\n    exports.bk_btn_success = \"bk-btn-success\";\r\n    exports.bk_btn_warning = \"bk-btn-warning\";\r\n    exports.bk_btn_danger = \"bk-btn-danger\";\r\n    function bk_btn_type(button_type) {\r\n        switch (button_type) {\r\n            case \"default\": return exports.bk_btn_default;\r\n            case \"primary\": return exports.bk_btn_primary;\r\n            case \"success\": return exports.bk_btn_success;\r\n            case \"warning\": return exports.bk_btn_warning;\r\n            case \"danger\": return exports.bk_btn_danger;\r\n        }\r\n    }\r\n    exports.bk_btn_type = bk_btn_type;\r\n    exports.bk_dropdown_toggle = \"bk-dropdown-toggle\";\r\n}\r\n","/* styles\\menus.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_menu = \"bk-menu\";\r\n    exports.bk_caret = \"bk-caret\";\r\n    exports.bk_divider = \"bk-divider\";\r\n}\r\n","/* styles\\buttons.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root .bk-btn {\\n  height: 100%;\\n  display: inline-block;\\n  text-align: center;\\n  vertical-align: middle;\\n  white-space: nowrap;\\n  cursor: pointer;\\n  padding: 6px 12px;\\n  font-size: 12px;\\n  border: 1px solid transparent;\\n  border-radius: 4px;\\n  outline: 0;\\n  user-select: none;\\n  -ms-user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n}\\n.bk-root .bk-btn:hover,\\n.bk-root .bk-btn:focus {\\n  text-decoration: none;\\n}\\n.bk-root .bk-btn:active,\\n.bk-root .bk-btn.bk-active {\\n  background-image: none;\\n  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\\n}\\n.bk-root .bk-btn[disabled] {\\n  cursor: not-allowed;\\n  pointer-events: none;\\n  opacity: 0.65;\\n  box-shadow: none;\\n}\\n.bk-root .bk-btn-default {\\n  color: #333;\\n  background-color: #fff;\\n  border-color: #ccc;\\n}\\n.bk-root .bk-btn-default:hover {\\n  background-color: #f5f5f5;\\n  border-color: #b8b8b8;\\n}\\n.bk-root .bk-btn-default.bk-active {\\n  background-color: #ebebeb;\\n  border-color: #adadad;\\n}\\n.bk-root .bk-btn-default[disabled],\\n.bk-root .bk-btn-default[disabled]:hover,\\n.bk-root .bk-btn-default[disabled]:focus,\\n.bk-root .bk-btn-default[disabled]:active,\\n.bk-root .bk-btn-default[disabled].bk-active {\\n  background-color: #e6e6e6;\\n  border-color: #ccc;\\n}\\n.bk-root .bk-btn-primary {\\n  color: #fff;\\n  background-color: #428bca;\\n  border-color: #357ebd;\\n}\\n.bk-root .bk-btn-primary:hover {\\n  background-color: #3681c1;\\n  border-color: #2c699e;\\n}\\n.bk-root .bk-btn-primary.bk-active {\\n  background-color: #3276b1;\\n  border-color: #285e8e;\\n}\\n.bk-root .bk-btn-primary[disabled],\\n.bk-root .bk-btn-primary[disabled]:hover,\\n.bk-root .bk-btn-primary[disabled]:focus,\\n.bk-root .bk-btn-primary[disabled]:active,\\n.bk-root .bk-btn-primary[disabled].bk-active {\\n  background-color: #506f89;\\n  border-color: #357ebd;\\n}\\n.bk-root .bk-btn-success {\\n  color: #fff;\\n  background-color: #5cb85c;\\n  border-color: #4cae4c;\\n}\\n.bk-root .bk-btn-success:hover {\\n  background-color: #4eb24e;\\n  border-color: #409240;\\n}\\n.bk-root .bk-btn-success.bk-active {\\n  background-color: #47a447;\\n  border-color: #398439;\\n}\\n.bk-root .bk-btn-success[disabled],\\n.bk-root .bk-btn-success[disabled]:hover,\\n.bk-root .bk-btn-success[disabled]:focus,\\n.bk-root .bk-btn-success[disabled]:active,\\n.bk-root .bk-btn-success[disabled].bk-active {\\n  background-color: #667b66;\\n  border-color: #4cae4c;\\n}\\n.bk-root .bk-btn-warning {\\n  color: #fff;\\n  background-color: #f0ad4e;\\n  border-color: #eea236;\\n}\\n.bk-root .bk-btn-warning:hover {\\n  background-color: #eea43b;\\n  border-color: #e89014;\\n}\\n.bk-root .bk-btn-warning.bk-active {\\n  background-color: #ed9c28;\\n  border-color: #d58512;\\n}\\n.bk-root .bk-btn-warning[disabled],\\n.bk-root .bk-btn-warning[disabled]:hover,\\n.bk-root .bk-btn-warning[disabled]:focus,\\n.bk-root .bk-btn-warning[disabled]:active,\\n.bk-root .bk-btn-warning[disabled].bk-active {\\n  background-color: #c89143;\\n  border-color: #eea236;\\n}\\n.bk-root .bk-btn-danger {\\n  color: #fff;\\n  background-color: #d9534f;\\n  border-color: #d43f3a;\\n}\\n.bk-root .bk-btn-danger:hover {\\n  background-color: #d5433e;\\n  border-color: #bd2d29;\\n}\\n.bk-root .bk-btn-danger.bk-active {\\n  background-color: #d2322d;\\n  border-color: #ac2925;\\n}\\n.bk-root .bk-btn-danger[disabled],\\n.bk-root .bk-btn-danger[disabled]:hover,\\n.bk-root .bk-btn-danger[disabled]:focus,\\n.bk-root .bk-btn-danger[disabled]:active,\\n.bk-root .bk-btn-danger[disabled].bk-active {\\n  background-color: #a55350;\\n  border-color: #d43f3a;\\n}\\n.bk-root .bk-btn-group {\\n  height: 100%;\\n  display: flex;\\n  display: -webkit-flex;\\n  flex-wrap: nowrap;\\n  -webkit-flex-wrap: nowrap;\\n  align-items: center;\\n  -webkit-align-items: center;\\n  flex-direction: row;\\n  -webkit-flex-direction: row;\\n}\\n.bk-root .bk-btn-group > .bk-btn {\\n  flex-grow: 1;\\n  -webkit-flex-grow: 1;\\n}\\n.bk-root .bk-btn-group > .bk-btn + .bk-btn {\\n  margin-left: -1px;\\n}\\n.bk-root .bk-btn-group > .bk-btn:first-child:not(:last-child) {\\n  border-bottom-right-radius: 0;\\n  border-top-right-radius: 0;\\n}\\n.bk-root .bk-btn-group > .bk-btn:not(:first-child):last-child {\\n  border-bottom-left-radius: 0;\\n  border-top-left-radius: 0;\\n}\\n.bk-root .bk-btn-group > .bk-btn:not(:first-child):not(:last-child) {\\n  border-radius: 0;\\n}\\n.bk-root .bk-btn-group .bk-dropdown-toggle {\\n  flex: 0 0 0;\\n  -webkit-flex: 0 0 0;\\n  padding: 6px 6px;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* styles\\menus.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root .bk-menu-icon {\\n  width: 28px;\\n  height: 28px;\\n  background-size: 60%;\\n  background-color: transparent;\\n  background-repeat: no-repeat;\\n  background-position: center center;\\n}\\n.bk-root .bk-context-menu {\\n  position: absolute;\\n  display: inline-flex;\\n  display: -webkit-inline-flex;\\n  flex-wrap: nowrap;\\n  -webkit-flex-wrap: nowrap;\\n  user-select: none;\\n  -ms-user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  width: auto;\\n  height: auto;\\n  z-index: 100;\\n  cursor: pointer;\\n  font-size: 12px;\\n  background-color: #fff;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\\n}\\n.bk-root .bk-context-menu.bk-horizontal {\\n  flex-direction: row;\\n  -webkit-flex-direction: row;\\n}\\n.bk-root .bk-context-menu.bk-vertical {\\n  flex-direction: column;\\n  -webkit-flex-direction: column;\\n}\\n.bk-root .bk-context-menu > .bk-divider {\\n  cursor: default;\\n  overflow: hidden;\\n  background-color: #e5e5e5;\\n}\\n.bk-root .bk-context-menu.bk-horizontal > .bk-divider {\\n  width: 1px;\\n  margin: 5px 0;\\n}\\n.bk-root .bk-context-menu.bk-vertical > .bk-divider {\\n  height: 1px;\\n  margin: 0 5px;\\n}\\n.bk-root .bk-context-menu > :not(.bk-divider) {\\n  border: 1px solid transparent;\\n}\\n.bk-root .bk-context-menu > :not(.bk-divider).bk-active {\\n  border-color: #26aae1;\\n}\\n.bk-root .bk-context-menu > :not(.bk-divider):hover {\\n  background-color: #f9f9f9;\\n}\\n.bk-root .bk-context-menu.bk-horizontal > :not(.bk-divider):first-child {\\n  border-top-left-radius: 4px;\\n  border-bottom-left-radius: 4px;\\n}\\n.bk-root .bk-context-menu.bk-horizontal > :not(.bk-divider):last-child {\\n  border-top-right-radius: 4px;\\n  border-bottom-right-radius: 4px;\\n}\\n.bk-root .bk-context-menu.bk-vertical > :not(.bk-divider):first-child {\\n  border-top-left-radius: 4px;\\n  border-top-right-radius: 4px;\\n}\\n.bk-root .bk-context-menu.bk-vertical > :not(.bk-divider):last-child {\\n  border-bottom-left-radius: 4px;\\n  border-bottom-right-radius: 4px;\\n}\\n.bk-root .bk-menu {\\n  position: absolute;\\n  left: 0;\\n  width: 100%;\\n  z-index: 100;\\n  cursor: pointer;\\n  font-size: 12px;\\n  background-color: #fff;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\\n}\\n.bk-root .bk-menu.bk-above {\\n  bottom: 100%;\\n}\\n.bk-root .bk-menu.bk-below {\\n  top: 100%;\\n}\\n.bk-root .bk-menu > .bk-divider {\\n  height: 1px;\\n  margin: 7.5px 0;\\n  overflow: hidden;\\n  background-color: #e5e5e5;\\n}\\n.bk-root .bk-menu > :not(.bk-divider) {\\n  padding: 6px 12px;\\n}\\n.bk-root .bk-menu > :not(.bk-divider):hover,\\n.bk-root .bk-menu > :not(.bk-divider).bk-active {\\n  background-color: #e6e6e6;\\n}\\n.bk-root .bk-caret {\\n  display: inline-block;\\n  vertical-align: middle;\\n  width: 0;\\n  height: 0;\\n  margin: 0 5px;\\n}\\n.bk-root .bk-caret.bk-down {\\n  border-top: 4px solid;\\n}\\n.bk-root .bk-caret.bk-up {\\n  border-bottom: 4px solid;\\n}\\n.bk-root .bk-caret.bk-down,\\n.bk-root .bk-caret.bk-up {\\n  border-right: 4px solid transparent;\\n  border-left: 4px solid transparent;\\n}\\n.bk-root .bk-caret.bk-left {\\n  border-right: 4px solid;\\n}\\n.bk-root .bk-caret.bk-right {\\n  border-left: 4px solid;\\n}\\n.bk-root .bk-caret.bk-left,\\n.bk-root .bk-caret.bk-right {\\n  border-top: 4px solid transparent;\\n  border-bottom: 4px solid transparent;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* styles\\tabs.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root .bk-tabs-header {\\n  display: flex;\\n  display: -webkit-flex;\\n  flex-wrap: nowrap;\\n  -webkit-flex-wrap: nowrap;\\n  align-items: center;\\n  -webkit-align-items: center;\\n  overflow: hidden;\\n  user-select: none;\\n  -ms-user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n}\\n.bk-root .bk-tabs-header .bk-btn-group {\\n  height: auto;\\n  margin-right: 5px;\\n}\\n.bk-root .bk-tabs-header .bk-btn-group > .bk-btn {\\n  flex-grow: 0;\\n  -webkit-flex-grow: 0;\\n  height: auto;\\n  padding: 4px 4px;\\n}\\n.bk-root .bk-tabs-header .bk-headers-wrapper {\\n  flex-grow: 1;\\n  -webkit-flex-grow: 1;\\n  overflow: hidden;\\n  color: #666666;\\n}\\n.bk-root .bk-tabs-header.bk-above .bk-headers-wrapper {\\n  border-bottom: 1px solid #e6e6e6;\\n}\\n.bk-root .bk-tabs-header.bk-right .bk-headers-wrapper {\\n  border-left: 1px solid #e6e6e6;\\n}\\n.bk-root .bk-tabs-header.bk-below .bk-headers-wrapper {\\n  border-top: 1px solid #e6e6e6;\\n}\\n.bk-root .bk-tabs-header.bk-left .bk-headers-wrapper {\\n  border-right: 1px solid #e6e6e6;\\n}\\n.bk-root .bk-tabs-header.bk-above,\\n.bk-root .bk-tabs-header.bk-below {\\n  flex-direction: row;\\n  -webkit-flex-direction: row;\\n}\\n.bk-root .bk-tabs-header.bk-above .bk-headers,\\n.bk-root .bk-tabs-header.bk-below .bk-headers {\\n  flex-direction: row;\\n  -webkit-flex-direction: row;\\n}\\n.bk-root .bk-tabs-header.bk-left,\\n.bk-root .bk-tabs-header.bk-right {\\n  flex-direction: column;\\n  -webkit-flex-direction: column;\\n}\\n.bk-root .bk-tabs-header.bk-left .bk-headers,\\n.bk-root .bk-tabs-header.bk-right .bk-headers {\\n  flex-direction: column;\\n  -webkit-flex-direction: column;\\n}\\n.bk-root .bk-tabs-header .bk-headers {\\n  position: relative;\\n  display: flex;\\n  display: -webkit-flex;\\n  flex-wrap: nowrap;\\n  -webkit-flex-wrap: nowrap;\\n  align-items: center;\\n  -webkit-align-items: center;\\n}\\n.bk-root .bk-tabs-header .bk-tab {\\n  padding: 4px 8px;\\n  border: solid transparent;\\n  white-space: nowrap;\\n  cursor: pointer;\\n}\\n.bk-root .bk-tabs-header .bk-tab:hover {\\n  background-color: #f2f2f2;\\n}\\n.bk-root .bk-tabs-header .bk-tab.bk-active {\\n  color: #4d4d4d;\\n  background-color: white;\\n  border-color: #e6e6e6;\\n}\\n.bk-root .bk-tabs-header .bk-tab .bk-close {\\n  margin-left: 10px;\\n}\\n.bk-root .bk-tabs-header.bk-above .bk-tab {\\n  border-width: 3px 1px 0px 1px;\\n  border-radius: 4px 4px 0 0;\\n}\\n.bk-root .bk-tabs-header.bk-right .bk-tab {\\n  border-width: 1px 3px 1px 0px;\\n  border-radius: 0 4px 4px 0;\\n}\\n.bk-root .bk-tabs-header.bk-below .bk-tab {\\n  border-width: 0px 1px 3px 1px;\\n  border-radius: 0 0 4px 4px;\\n}\\n.bk-root .bk-tabs-header.bk-left .bk-tab {\\n  border-width: 1px 0px 1px 3px;\\n  border-radius: 4px 0 0 4px;\\n}\\n.bk-root .bk-close {\\n  display: inline-block;\\n  width: 10px;\\n  height: 10px;\\n  vertical-align: middle;\\n  background-image: url('data:image/svg+xml;utf8,      <svg viewPort=\\\"0 0 10 10\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">        <line x1=\\\"1\\\" y1=\\\"9\\\" x2=\\\"9\\\" y2=\\\"1\\\" stroke=\\\"gray\\\" stroke-width=\\\"2\\\"/>        <line x1=\\\"1\\\" y1=\\\"1\\\" x2=\\\"9\\\" y2=\\\"9\\\" stroke=\\\"gray\\\" stroke-width=\\\"2\\\"/>      </svg>');\\n}\\n.bk-root .bk-close:hover {\\n  background-image: url('data:image/svg+xml;utf8,      <svg viewPort=\\\"0 0 10 10\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">        <line x1=\\\"1\\\" y1=\\\"9\\\" x2=\\\"9\\\" y2=\\\"1\\\" stroke=\\\"red\\\" stroke-width=\\\"2\\\"/>        <line x1=\\\"1\\\" y1=\\\"1\\\" x2=\\\"9\\\" y2=\\\"9\\\" stroke=\\\"red\\\" stroke-width=\\\"2\\\"/>      </svg>');\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* models\\layouts\\widget_box.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var column_1 = require(389) /* ./column */;\r\n    var WidgetBoxView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WidgetBoxView, _super);\r\n        function WidgetBoxView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return WidgetBoxView;\r\n    }(column_1.ColumnView));\r\n    exports.WidgetBoxView = WidgetBoxView;\r\n    WidgetBoxView.__name__ = \"WidgetBoxView\";\r\n    var WidgetBox = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WidgetBox, _super);\r\n        function WidgetBox(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        WidgetBox.init_WidgetBox = function () {\r\n            this.prototype.default_view = WidgetBoxView;\r\n        };\r\n        return WidgetBox;\r\n    }(column_1.Column));\r\n    exports.WidgetBox = WidgetBox;\r\n    WidgetBox.__name__ = \"WidgetBox\";\r\n    WidgetBox.init_WidgetBox();\r\n}\r\n","/* models\\markers\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    tslib_1.__exportStar(require(403) /* ./defs */, exports);\r\n    var marker_1 = require(404) /* ./marker */;\r\n    exports.Marker = marker_1.Marker;\r\n    var scatter_1 = require(405) /* ./scatter */;\r\n    exports.Scatter = scatter_1.Scatter;\r\n}\r\n","/* models\\markers\\defs.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var marker_1 = require(404) /* ./marker */;\r\n    var glmarks = tslib_1.__importStar(require(353) /* ../glyphs/webgl/markers */);\r\n    var SQ3 = Math.sqrt(3);\r\n    function _one_line(ctx, r) {\r\n        ctx.moveTo(-r, 0);\r\n        ctx.lineTo(r, 0);\r\n    }\r\n    function _one_x(ctx, r) {\r\n        ctx.rotate(Math.PI / 4);\r\n        _one_cross(ctx, r);\r\n        ctx.rotate(-Math.PI / 4);\r\n    }\r\n    function _one_y(ctx, r) {\r\n        var h = r * SQ3;\r\n        var a = h / 3;\r\n        ctx.moveTo(-h / 2, -a);\r\n        ctx.lineTo(0, 0);\r\n        ctx.lineTo(h / 2, -a);\r\n        ctx.lineTo(0, 0);\r\n        ctx.lineTo(0, r);\r\n    }\r\n    function _one_cross(ctx, r) {\r\n        ctx.moveTo(0, r);\r\n        ctx.lineTo(0, -r);\r\n        ctx.moveTo(-r, 0);\r\n        ctx.lineTo(r, 0);\r\n    }\r\n    function _one_dot(ctx, r) {\r\n        ctx.beginPath();\r\n        ctx.arc(0, 0, r / 4, 0, 2 * Math.PI, false);\r\n        ctx.closePath();\r\n    }\r\n    function _one_diamond(ctx, r) {\r\n        ctx.moveTo(0, r);\r\n        ctx.lineTo(r / 1.5, 0);\r\n        ctx.lineTo(0, -r);\r\n        ctx.lineTo(-r / 1.5, 0);\r\n        ctx.closePath();\r\n    }\r\n    function _one_hex(ctx, r) {\r\n        var r2 = r / 2;\r\n        var h = SQ3 * r2;\r\n        ctx.moveTo(r, 0);\r\n        ctx.lineTo(r2, -h);\r\n        ctx.lineTo(-r2, -h);\r\n        ctx.lineTo(-r, 0);\r\n        ctx.lineTo(-r2, h);\r\n        ctx.lineTo(r2, h);\r\n        ctx.closePath();\r\n    }\r\n    function _one_tri(ctx, r) {\r\n        var h = r * SQ3;\r\n        var a = h / 3;\r\n        ctx.moveTo(-r, a);\r\n        ctx.lineTo(r, a);\r\n        ctx.lineTo(0, a - h);\r\n        ctx.closePath();\r\n    }\r\n    function asterisk(ctx, i, r, line, _fill) {\r\n        _one_cross(ctx, r);\r\n        _one_x(ctx, r);\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function circle(ctx, i, r, line, fill) {\r\n        ctx.arc(0, 0, r, 0, 2 * Math.PI, false);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function circle_cross(ctx, i, r, line, fill) {\r\n        ctx.arc(0, 0, r, 0, 2 * Math.PI, false);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            _one_cross(ctx, r);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function circle_dot(ctx, i, r, line, fill) {\r\n        circle(ctx, i, r, line, fill);\r\n        dot(ctx, i, r, line, fill);\r\n    }\r\n    function circle_y(ctx, i, r, line, fill) {\r\n        ctx.arc(0, 0, r, 0, 2 * Math.PI, false);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            _one_y(ctx, r);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function circle_x(ctx, i, r, line, fill) {\r\n        ctx.arc(0, 0, r, 0, 2 * Math.PI, false);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            _one_x(ctx, r);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function cross(ctx, i, r, line, _fill) {\r\n        _one_cross(ctx, r);\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function diamond(ctx, i, r, line, fill) {\r\n        _one_diamond(ctx, r);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function diamond_cross(ctx, i, r, line, fill) {\r\n        _one_diamond(ctx, r);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.moveTo(0, r);\r\n            ctx.lineTo(0, -r);\r\n            ctx.moveTo(-r / 1.5, 0);\r\n            ctx.lineTo(r / 1.5, 0);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function diamond_dot(ctx, i, r, line, fill) {\r\n        diamond(ctx, i, r, line, fill);\r\n        dot(ctx, i, r, line, fill);\r\n    }\r\n    function dot(ctx, i, r, line, _fill) {\r\n        _one_dot(ctx, r);\r\n        line.set_vectorize(ctx, i);\r\n        ctx.fillStyle = ctx.strokeStyle; // NOTE: dots use line color for fill to match\r\n        ctx.fill();\r\n    }\r\n    function hex(ctx, i, r, line, fill) {\r\n        _one_hex(ctx, r);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function hex_dot(ctx, i, r, line, fill) {\r\n        hex(ctx, i, r, line, fill);\r\n        dot(ctx, i, r, line, fill);\r\n    }\r\n    function inverted_triangle(ctx, i, r, line, fill) {\r\n        ctx.rotate(Math.PI);\r\n        _one_tri(ctx, r);\r\n        ctx.rotate(-Math.PI);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function plus(ctx, i, r, line, fill) {\r\n        var a = 3 * r / 8;\r\n        var b = r;\r\n        var xs = [a, a, b, b, a, a, -a, -a, -b, -b, -a, -a];\r\n        var ys = [b, a, a, -a, -a, -b, -b, -a, -a, a, a, b];\r\n        ctx.moveTo(xs[0], ys[0]);\r\n        for (i = 1; i < 12; i++)\r\n            ctx.lineTo(xs[i], ys[i]);\r\n        ctx.closePath();\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function square(ctx, i, r, line, fill) {\r\n        var size = 2 * r;\r\n        ctx.rect(-r, -r, size, size);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function square_pin(ctx, i, r, line, fill) {\r\n        var a = 3 * r / 8;\r\n        ctx.moveTo(-r, -r);\r\n        /* eslint-disable space-in-parens */\r\n        ctx.quadraticCurveTo(0, -a, r, -r);\r\n        ctx.quadraticCurveTo(a, 0, r, r);\r\n        ctx.quadraticCurveTo(0, a, -r, r);\r\n        ctx.quadraticCurveTo(-a, 0, -r, -r);\r\n        /* eslint-ensable space-in-parens */\r\n        ctx.closePath();\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function square_cross(ctx, i, r, line, fill) {\r\n        var size = 2 * r;\r\n        ctx.rect(-r, -r, size, size);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            _one_cross(ctx, r);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function square_dot(ctx, i, r, line, fill) {\r\n        square(ctx, i, r, line, fill);\r\n        dot(ctx, i, r, line, fill);\r\n    }\r\n    function square_x(ctx, i, r, line, fill) {\r\n        var size = 2 * r;\r\n        ctx.rect(-r, -r, size, size);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.moveTo(-r, r);\r\n            ctx.lineTo(r, -r);\r\n            ctx.moveTo(-r, -r);\r\n            ctx.lineTo(r, r);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function triangle(ctx, i, r, line, fill) {\r\n        _one_tri(ctx, r);\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function triangle_dot(ctx, i, r, line, fill) {\r\n        triangle(ctx, i, r, line, fill);\r\n        dot(ctx, i, r, line, fill);\r\n    }\r\n    function triangle_pin(ctx, i, r, line, fill) {\r\n        var h = r * SQ3;\r\n        var a = h / 3;\r\n        var b = 3 * a / 8;\r\n        ctx.moveTo(-r, a);\r\n        ctx.quadraticCurveTo(0, b, r, a);\r\n        ctx.quadraticCurveTo(SQ3 * b / 2, b / 2, 0, a - h);\r\n        ctx.quadraticCurveTo(-SQ3 * b / 2, b / 2, -r, a);\r\n        ctx.closePath();\r\n        if (fill.doit) {\r\n            fill.set_vectorize(ctx, i);\r\n            ctx.fill();\r\n        }\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function dash(ctx, i, r, line, _fill) {\r\n        _one_line(ctx, r);\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function x(ctx, i, r, line, _fill) {\r\n        _one_x(ctx, r);\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function y(ctx, i, r, line, _fill) {\r\n        _one_y(ctx, r);\r\n        if (line.doit) {\r\n            line.set_vectorize(ctx, i);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function _mk_model(type, f, glglyph_cls) {\r\n        var _a;\r\n        var view = /** @class */ (function (_super) {\r\n            tslib_1.__extends(view, _super);\r\n            function view() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            view.initClass = function () {\r\n                this.prototype._render_one = f;\r\n                this.prototype.glglyph_cls = glglyph_cls;\r\n            };\r\n            return view;\r\n        }(marker_1.MarkerView));\r\n        view.initClass();\r\n        var model = (_a = /** @class */ (function (_super) {\r\n            tslib_1.__extends(_a, _super);\r\n            function _a() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            _a.initClass = function () {\r\n                this.prototype.default_view = view;\r\n            };\r\n            return _a;\r\n        }(marker_1.Marker)),\r\n            _a.__name__ = type,\r\n            _a);\r\n        model.initClass();\r\n        return model;\r\n    }\r\n    // markers are final, so no need to export views\r\n    exports.Asterisk = _mk_model('Asterisk', asterisk, glmarks.AsteriskGL);\r\n    exports.CircleCross = _mk_model('CircleCross', circle_cross, glmarks.CircleCrossGL);\r\n    exports.CircleDot = _mk_model('CircleDot', circle_dot);\r\n    exports.CircleY = _mk_model('CircleY', circle_y);\r\n    exports.CircleX = _mk_model('CircleX', circle_x, glmarks.CircleXGL);\r\n    exports.Cross = _mk_model('Cross', cross, glmarks.CrossGL);\r\n    exports.Dash = _mk_model('Dash', dash);\r\n    exports.Diamond = _mk_model('Diamond', diamond, glmarks.DiamondGL);\r\n    exports.DiamondCross = _mk_model('DiamondCross', diamond_cross, glmarks.DiamondCrossGL);\r\n    exports.DiamondDot = _mk_model('DiamondDot', diamond_dot);\r\n    exports.Dot = _mk_model('Dot', dot);\r\n    exports.Hex = _mk_model('Hex', hex, glmarks.HexGL);\r\n    exports.HexDot = _mk_model('HexDot', hex_dot);\r\n    exports.InvertedTriangle = _mk_model('InvertedTriangle', inverted_triangle, glmarks.InvertedTriangleGL);\r\n    exports.Plus = _mk_model('Plus', plus);\r\n    exports.Square = _mk_model('Square', square, glmarks.SquareGL);\r\n    exports.SquareCross = _mk_model('SquareCross', square_cross, glmarks.SquareCrossGL);\r\n    exports.SquareDot = _mk_model('SquareDot', square_dot);\r\n    exports.SquarePin = _mk_model('SquarePin', square_pin);\r\n    exports.SquareX = _mk_model('SquareX', square_x, glmarks.SquareXGL);\r\n    exports.Triangle = _mk_model('Triangle', triangle, glmarks.TriangleGL);\r\n    exports.TriangleDot = _mk_model('TriangleDot', triangle_dot);\r\n    exports.TrianglePin = _mk_model('TrianglePin', triangle_pin);\r\n    exports.X = _mk_model('X', x, glmarks.XGL);\r\n    exports.Y = _mk_model('Y', y);\r\n    exports.marker_funcs = {\r\n        asterisk: asterisk,\r\n        circle: circle,\r\n        circle_cross: circle_cross,\r\n        circle_dot: circle_dot,\r\n        circle_y: circle_y,\r\n        circle_x: circle_x,\r\n        cross: cross,\r\n        diamond: diamond,\r\n        diamond_dot: diamond_dot,\r\n        diamond_cross: diamond_cross,\r\n        dot: dot,\r\n        hex: hex,\r\n        hex_dot: hex_dot,\r\n        inverted_triangle: inverted_triangle,\r\n        plus: plus,\r\n        square: square,\r\n        square_cross: square_cross,\r\n        square_dot: square_dot,\r\n        square_pin: square_pin,\r\n        square_x: square_x,\r\n        triangle: triangle,\r\n        triangle_dot: triangle_dot,\r\n        triangle_pin: triangle_pin,\r\n        dash: dash,\r\n        x: x,\r\n        y: y,\r\n    };\r\n}\r\n","/* models\\markers\\marker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var xy_glyph_1 = require(208) /* ../glyphs/xy_glyph */;\r\n    var property_mixins_1 = require(143) /* ../../core/property_mixins */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../core/hittest */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var selection_1 = require(203) /* ../selections/selection */;\r\n    var MarkerView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MarkerView, _super);\r\n        function MarkerView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        MarkerView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            var webgl = this.renderer.plot_view.canvas_view.webgl;\r\n            if (webgl != null && this.glglyph_cls != null) {\r\n                this.glglyph = new this.glglyph_cls(webgl.gl, this);\r\n            }\r\n        };\r\n        MarkerView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, _size = _a._size, _angle = _a._angle;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + _size[i] + _angle[i]))\r\n                        continue;\r\n                    var r = _size[i] / 2;\r\n                    ctx.beginPath();\r\n                    ctx.translate(sx[i], sy[i]);\r\n                    if (_angle[i])\r\n                        ctx.rotate(_angle[i]);\r\n                    this._render_one(ctx, i, r, this.visuals.line, this.visuals.fill);\r\n                    if (_angle[i])\r\n                        ctx.rotate(-_angle[i]);\r\n                    ctx.translate(-sx[i], -sy[i]);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        MarkerView.prototype._mask_data = function () {\r\n            // dilate the inner screen region by max_size and map back to data space for use in spatial query\r\n            var hr = this.renderer.plot_view.frame.bbox.h_range;\r\n            var sx0 = hr.start - this.max_size;\r\n            var sx1 = hr.end + this.max_size;\r\n            var _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n            var vr = this.renderer.plot_view.frame.bbox.v_range;\r\n            var sy0 = vr.start - this.max_size;\r\n            var sy1 = vr.end + this.max_size;\r\n            var _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            return this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n        };\r\n        MarkerView.prototype._hit_point = function (geometry) {\r\n            var e_2, _a;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var sx0 = sx - this.max_size;\r\n            var sx1 = sx + this.max_size;\r\n            var _b = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _b[0], x1 = _b[1];\r\n            var sy0 = sy - this.max_size;\r\n            var sy1 = sy + this.max_size;\r\n            var _c = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _c[0], y1 = _c[1];\r\n            var candidates = this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 });\r\n            var indices = [];\r\n            try {\r\n                for (var candidates_1 = tslib_1.__values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\r\n                    var i = candidates_1_1.value;\r\n                    var s2 = this._size[i] / 2;\r\n                    if (Math.abs(this.sx[i] - sx) <= s2 && Math.abs(this.sy[i] - sy) <= s2) {\r\n                        indices.push(i);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return))\r\n                        _a.call(candidates_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        MarkerView.prototype._hit_span = function (geometry) {\r\n            var _a, _b;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var bounds = this.bounds();\r\n            var ms = this.max_size / 2;\r\n            var x0, x1, y0, y1;\r\n            if (geometry.direction == 'h') {\r\n                y0 = bounds.y0;\r\n                y1 = bounds.y1;\r\n                var sx0 = sx - ms;\r\n                var sx1 = sx + ms;\r\n                _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n            }\r\n            else {\r\n                x0 = bounds.x0;\r\n                x1 = bounds.x1;\r\n                var sy0 = sy - ms;\r\n                var sy1 = sy + ms;\r\n                _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            }\r\n            var indices = tslib_1.__spread(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 }));\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        MarkerView.prototype._hit_rect = function (geometry) {\r\n            var sx0 = geometry.sx0, sx1 = geometry.sx1, sy0 = geometry.sy0, sy1 = geometry.sy1;\r\n            var _a = tslib_1.__read(this.renderer.xscale.r_invert(sx0, sx1), 2), x0 = _a[0], x1 = _a[1];\r\n            var _b = tslib_1.__read(this.renderer.yscale.r_invert(sy0, sy1), 2), y0 = _b[0], y1 = _b[1];\r\n            var indices = tslib_1.__spread(this.index.indices({ x0: x0, x1: x1, y0: y0, y1: y1 }));\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        MarkerView.prototype._hit_poly = function (geometry) {\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            // TODO (bev) use spatial index to pare candidate list\r\n            var candidates = array_1.range(0, this.sx.length);\r\n            var indices = [];\r\n            for (var i = 0, end = candidates.length; i < end; i++) {\r\n                var index = candidates[i];\r\n                if (hittest.point_in_poly(this.sx[i], this.sy[i], sx, sy)) {\r\n                    indices.push(index);\r\n                }\r\n            }\r\n            return new selection_1.Selection({ indices: indices });\r\n        };\r\n        MarkerView.prototype._get_legend_args = function (_a, index) {\r\n            var x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\r\n            // using objects like this seems a little wonky, since the keys are coerced to strings, but it works\r\n            var len = index + 1;\r\n            var sx = new Array(len);\r\n            sx[index] = (x0 + x1) / 2;\r\n            var sy = new Array(len);\r\n            sy[index] = (y0 + y1) / 2;\r\n            var size = new Array(len);\r\n            size[index] = Math.min(Math.abs(x1 - x0), Math.abs(y1 - y0)) * 0.4;\r\n            var angle = new Array(len);\r\n            angle[index] = 0; // don't attempt to match glyph angle\r\n            return { sx: sx, sy: sy, _size: size, _angle: angle };\r\n        };\r\n        MarkerView.prototype.draw_legend_for_index = function (ctx, _a, index) {\r\n            var x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\r\n            var args = this._get_legend_args({ x0: x0, x1: x1, y0: y0, y1: y1 }, index);\r\n            this._render(ctx, [index], args); // XXX\r\n        };\r\n        return MarkerView;\r\n    }(xy_glyph_1.XYGlyphView));\r\n    exports.MarkerView = MarkerView;\r\n    MarkerView.__name__ = \"MarkerView\";\r\n    var Marker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Marker, _super);\r\n        function Marker(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Marker.init_Marker = function () {\r\n            this.mixins([property_mixins_1.LineVector, property_mixins_1.FillVector]);\r\n            this.define({\r\n                size: [p.DistanceSpec, { units: \"screen\", value: 4 }],\r\n                angle: [p.AngleSpec, 0],\r\n            });\r\n        };\r\n        return Marker;\r\n    }(xy_glyph_1.XYGlyph));\r\n    exports.Marker = Marker;\r\n    Marker.__name__ = \"Marker\";\r\n    Marker.init_Marker();\r\n}\r\n","/* models\\markers\\scatter.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var marker_1 = require(404) /* ./marker */;\r\n    var defs_1 = require(403) /* ./defs */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var ScatterView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ScatterView, _super);\r\n        function ScatterView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ScatterView.prototype._render = function (ctx, indices, _a) {\r\n            var e_1, _b;\r\n            var sx = _a.sx, sy = _a.sy, _size = _a._size, _angle = _a._angle, _marker = _a._marker;\r\n            try {\r\n                for (var indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\r\n                    var i = indices_1_1.value;\r\n                    if (isNaN(sx[i] + sy[i] + _size[i] + _angle[i]) || _marker[i] == null)\r\n                        continue;\r\n                    var r = _size[i] / 2;\r\n                    ctx.beginPath();\r\n                    ctx.translate(sx[i], sy[i]);\r\n                    if (_angle[i])\r\n                        ctx.rotate(_angle[i]);\r\n                    defs_1.marker_funcs[_marker[i]](ctx, i, r, this.visuals.line, this.visuals.fill);\r\n                    if (_angle[i])\r\n                        ctx.rotate(-_angle[i]);\r\n                    ctx.translate(-sx[i], -sy[i]);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (indices_1_1 && !indices_1_1.done && (_b = indices_1.return))\r\n                        _b.call(indices_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        ScatterView.prototype.draw_legend_for_index = function (ctx, _a, index) {\r\n            var x0 = _a.x0, x1 = _a.x1, y0 = _a.y0, y1 = _a.y1;\r\n            var args = this._get_legend_args({ x0: x0, x1: x1, y0: y0, y1: y1 }, index);\r\n            var len = index + 1;\r\n            var marker = new Array(len);\r\n            marker[index] = this._marker[index];\r\n            args._marker = marker;\r\n            this._render(ctx, [index], args); // XXX\r\n        };\r\n        return ScatterView;\r\n    }(marker_1.MarkerView));\r\n    exports.ScatterView = ScatterView;\r\n    ScatterView.__name__ = \"ScatterView\";\r\n    var Scatter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Scatter, _super);\r\n        function Scatter(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Scatter.init_Scatter = function () {\r\n            this.prototype.default_view = ScatterView;\r\n            this.define({\r\n                marker: [p.MarkerSpec, { value: \"circle\" }],\r\n            });\r\n        };\r\n        return Scatter;\r\n    }(marker_1.Marker));\r\n    exports.Scatter = Scatter;\r\n    Scatter.__name__ = \"Scatter\";\r\n    Scatter.init_Scatter();\r\n}\r\n","/* models\\plots\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var gmap_plot_1 = require(407) /* ./gmap_plot */;\r\n    exports.MapOptions = gmap_plot_1.MapOptions;\r\n    var gmap_plot_2 = require(407) /* ./gmap_plot */;\r\n    exports.GMapOptions = gmap_plot_2.GMapOptions;\r\n    var gmap_plot_3 = require(407) /* ./gmap_plot */;\r\n    exports.GMapPlot = gmap_plot_3.GMapPlot;\r\n    var plot_1 = require(408) /* ./plot */;\r\n    exports.Plot = plot_1.Plot;\r\n}\r\n","/* models\\plots\\gmap_plot.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var plot_1 = require(408) /* ./plot */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var model_1 = require(196) /* ../../model */;\r\n    var range1d_1 = require(273) /* ../ranges/range1d */;\r\n    var gmap_plot_canvas_1 = require(434) /* ./gmap_plot_canvas */;\r\n    exports.GMapPlotView = gmap_plot_canvas_1.GMapPlotView;\r\n    var MapOptions = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MapOptions, _super);\r\n        function MapOptions(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MapOptions.init_MapOptions = function () {\r\n            this.define({\r\n                lat: [p.Number],\r\n                lng: [p.Number],\r\n                zoom: [p.Number, 12],\r\n            });\r\n        };\r\n        return MapOptions;\r\n    }(model_1.Model));\r\n    exports.MapOptions = MapOptions;\r\n    MapOptions.__name__ = \"MapOptions\";\r\n    MapOptions.init_MapOptions();\r\n    var GMapOptions = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GMapOptions, _super);\r\n        function GMapOptions(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GMapOptions.init_GMapOptions = function () {\r\n            this.define({\r\n                map_type: [p.String, \"roadmap\"],\r\n                scale_control: [p.Boolean, false],\r\n                styles: [p.String],\r\n                tilt: [p.Int, 45],\r\n            });\r\n        };\r\n        return GMapOptions;\r\n    }(MapOptions));\r\n    exports.GMapOptions = GMapOptions;\r\n    GMapOptions.__name__ = \"GMapOptions\";\r\n    GMapOptions.init_GMapOptions();\r\n    var GMapPlot = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GMapPlot, _super);\r\n        function GMapPlot(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GMapPlot.init_GMapPlot = function () {\r\n            this.prototype.default_view = gmap_plot_canvas_1.GMapPlotView;\r\n            // This seems to be necessary so that everything can initialize.\r\n            // Feels very clumsy, but I'm not sure how the properties system wants\r\n            // to handle something like this situation.\r\n            this.define({\r\n                map_options: [p.Instance],\r\n                api_key: [p.String],\r\n            });\r\n            this.override({\r\n                x_range: function () { return new range1d_1.Range1d(); },\r\n                y_range: function () { return new range1d_1.Range1d(); },\r\n            });\r\n        };\r\n        GMapPlot.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.use_map = true;\r\n            if (!this.api_key)\r\n                logging_1.logger.error(\"api_key is required. See https://developers.google.com/maps/documentation/javascript/get-api-key for more information on how to obtain your own.\");\r\n        };\r\n        return GMapPlot;\r\n    }(plot_1.Plot));\r\n    exports.GMapPlot = GMapPlot;\r\n    GMapPlot.__name__ = \"GMapPlot\";\r\n    GMapPlot.init_GMapPlot();\r\n}\r\n","/* models\\plots\\plot.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var mixins = tslib_1.__importStar(require(143) /* ../../core/property_mixins */);\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var layout_dom_1 = require(387) /* ../layouts/layout_dom */;\r\n    var title_1 = require(284) /* ../annotations/title */;\r\n    var linear_scale_1 = require(260) /* ../scales/linear_scale */;\r\n    var toolbar_1 = require(409) /* ../tools/toolbar */;\r\n    var column_data_source_1 = require(200) /* ../sources/column_data_source */;\r\n    var glyph_renderer_1 = require(205) /* ../renderers/glyph_renderer */;\r\n    var data_range1d_1 = require(325) /* ../ranges/data_range1d */;\r\n    var plot_canvas_1 = require(427) /* ./plot_canvas */;\r\n    exports.PlotView = plot_canvas_1.PlotView;\r\n    var Plot = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Plot, _super);\r\n        function Plot(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Plot.init_Plot = function () {\r\n            this.prototype.default_view = plot_canvas_1.PlotView;\r\n            this.mixins([\r\n                [\"outline_\", mixins.Line],\r\n                [\"background_\", mixins.Fill],\r\n                [\"border_\", mixins.Fill],\r\n            ]);\r\n            this.define({\r\n                toolbar: [p.Instance, function () { return new toolbar_1.Toolbar(); }],\r\n                toolbar_location: [p.Location, 'right'],\r\n                toolbar_sticky: [p.Boolean, true],\r\n                plot_width: [p.Number, 600],\r\n                plot_height: [p.Number, 600],\r\n                frame_width: [p.Number, null],\r\n                frame_height: [p.Number, null],\r\n                title: [p.Any, function () { return new title_1.Title({ text: \"\" }); }],\r\n                title_location: [p.Location, 'above'],\r\n                above: [p.Array, []],\r\n                below: [p.Array, []],\r\n                left: [p.Array, []],\r\n                right: [p.Array, []],\r\n                center: [p.Array, []],\r\n                renderers: [p.Array, []],\r\n                x_range: [p.Instance, function () { return new data_range1d_1.DataRange1d(); }],\r\n                extra_x_ranges: [p.Any, {}],\r\n                y_range: [p.Instance, function () { return new data_range1d_1.DataRange1d(); }],\r\n                extra_y_ranges: [p.Any, {}],\r\n                x_scale: [p.Instance, function () { return new linear_scale_1.LinearScale(); }],\r\n                y_scale: [p.Instance, function () { return new linear_scale_1.LinearScale(); }],\r\n                lod_factor: [p.Number, 10],\r\n                lod_interval: [p.Number, 300],\r\n                lod_threshold: [p.Number, 2000],\r\n                lod_timeout: [p.Number, 500],\r\n                hidpi: [p.Boolean, true],\r\n                output_backend: [p.OutputBackend, \"canvas\"],\r\n                min_border: [p.Number, 5],\r\n                min_border_top: [p.Number, null],\r\n                min_border_left: [p.Number, null],\r\n                min_border_bottom: [p.Number, null],\r\n                min_border_right: [p.Number, null],\r\n                inner_width: [p.Number],\r\n                inner_height: [p.Number],\r\n                outer_width: [p.Number],\r\n                outer_height: [p.Number],\r\n                match_aspect: [p.Boolean, false],\r\n                aspect_scale: [p.Number, 1],\r\n                reset_policy: [p.ResetPolicy, \"standard\"],\r\n            });\r\n            this.override({\r\n                outline_line_color: \"#e5e5e5\",\r\n                border_fill_color: \"#ffffff\",\r\n                background_fill_color: \"#ffffff\",\r\n            });\r\n        };\r\n        Object.defineProperty(Plot.prototype, \"width\", {\r\n            // TODO: change this when we drop ES5 compatibility (https://github.com/microsoft/TypeScript/issues/338)\r\n            get: function () {\r\n                // const width = super.width\r\n                var width = this.properties.width.get_value();\r\n                return width != null ? width : this.plot_width;\r\n            },\r\n            set: function (width) {\r\n                this.setv({ width: width, plot_width: width });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Plot.prototype, \"height\", {\r\n            get: function () {\r\n                // const height = super.height\r\n                var height = this.properties.height.get_value();\r\n                return height != null ? height : this.plot_height;\r\n            },\r\n            set: function (height) {\r\n                this.setv({ height: height, plot_height: height });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Plot.prototype._doc_attached = function () {\r\n            _super.prototype._doc_attached.call(this);\r\n            this._push_changes([\r\n                [this.properties.inner_height, null, this.inner_height],\r\n                [this.properties.inner_width, null, this.inner_width],\r\n            ]);\r\n        };\r\n        Plot.prototype.initialize = function () {\r\n            var e_1, _a, e_2, _b;\r\n            _super.prototype.initialize.call(this);\r\n            this.reset = new signaling_1.Signal0(this, \"reset\");\r\n            try {\r\n                for (var _c = tslib_1.__values(object_1.values(this.extra_x_ranges).concat(this.x_range)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var xr = _d.value;\r\n                    var plots = xr.plots;\r\n                    if (types_1.isArray(plots)) {\r\n                        plots = plots.concat(this);\r\n                        xr.setv({ plots: plots }, { silent: true });\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return))\r\n                        _a.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _e = tslib_1.__values(object_1.values(this.extra_y_ranges).concat(this.y_range)), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var yr = _f.value;\r\n                    var plots = yr.plots;\r\n                    if (types_1.isArray(plots)) {\r\n                        plots = plots.concat(this);\r\n                        yr.setv({ plots: plots }, { silent: true });\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_b = _e.return))\r\n                        _b.call(_e);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        Plot.prototype.add_layout = function (renderer, side) {\r\n            var _a;\r\n            if (side === void 0) {\r\n                side = \"center\";\r\n            }\r\n            var renderers = this.properties[side].get_value();\r\n            this.setv((_a = {}, _a[side] = tslib_1.__spread(renderers, [renderer]), _a));\r\n        };\r\n        Plot.prototype.remove_layout = function (renderer) {\r\n            var del = function (items) {\r\n                array_1.remove_by(items, function (item) { return item == renderer; });\r\n            };\r\n            del(this.left);\r\n            del(this.right);\r\n            del(this.above);\r\n            del(this.below);\r\n            del(this.center);\r\n        };\r\n        Plot.prototype.add_renderers = function () {\r\n            var renderers = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                renderers[_i] = arguments[_i];\r\n            }\r\n            this.renderers = this.renderers.concat(renderers);\r\n        };\r\n        Plot.prototype.add_glyph = function (glyph, source, extra_attrs) {\r\n            if (source === void 0) {\r\n                source = new column_data_source_1.ColumnDataSource();\r\n            }\r\n            if (extra_attrs === void 0) {\r\n                extra_attrs = {};\r\n            }\r\n            var attrs = Object.assign(Object.assign({}, extra_attrs), { data_source: source, glyph: glyph });\r\n            var renderer = new glyph_renderer_1.GlyphRenderer(attrs);\r\n            this.add_renderers(renderer);\r\n            return renderer;\r\n        };\r\n        Plot.prototype.add_tools = function () {\r\n            var tools = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                tools[_i] = arguments[_i];\r\n            }\r\n            this.toolbar.tools = this.toolbar.tools.concat(tools);\r\n        };\r\n        Object.defineProperty(Plot.prototype, \"panels\", {\r\n            get: function () {\r\n                return tslib_1.__spread(this.side_panels, this.center);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Plot.prototype, \"side_panels\", {\r\n            get: function () {\r\n                var _a = this, above = _a.above, below = _a.below, left = _a.left, right = _a.right;\r\n                return array_1.concat([above, below, left, right]);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Plot;\r\n    }(layout_dom_1.LayoutDOM));\r\n    exports.Plot = Plot;\r\n    Plot.__name__ = \"Plot\";\r\n    Plot.init_Plot();\r\n}\r\n","/* models\\tools\\toolbar.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var inspect_tool_1 = require(410) /* ./inspectors/inspect_tool */;\r\n    var toolbar_base_1 = require(420) /* ./toolbar_base */;\r\n    var _get_active_attr = function (et) {\r\n        switch (et) {\r\n            case 'tap': return 'active_tap';\r\n            case 'pan': return 'active_drag';\r\n            case 'pinch':\r\n            case 'scroll': return 'active_scroll';\r\n            case 'multi': return 'active_multi';\r\n        }\r\n        return null;\r\n    };\r\n    var _supports_auto = function (et) {\r\n        return et == 'tap' || et == 'pan';\r\n    };\r\n    var Toolbar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Toolbar, _super);\r\n        function Toolbar(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Toolbar.init_Toolbar = function () {\r\n            this.prototype.default_view = toolbar_base_1.ToolbarBaseView;\r\n            this.define({\r\n                active_drag: [p.Any, 'auto'],\r\n                active_inspect: [p.Any, 'auto'],\r\n                active_scroll: [p.Any, 'auto'],\r\n                active_tap: [p.Any, 'auto'],\r\n                active_multi: [p.Any, null],\r\n            });\r\n        };\r\n        Toolbar.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            var _a = this.properties, tools = _a.tools, active_drag = _a.active_drag, active_inspect = _a.active_inspect, active_scroll = _a.active_scroll, active_tap = _a.active_tap, active_multi = _a.active_multi;\r\n            this.on_change([tools, active_drag, active_inspect, active_scroll, active_tap, active_multi], function () { return _this._init_tools(); });\r\n        };\r\n        Toolbar.prototype._init_tools = function () {\r\n            var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f;\r\n            var _this = this;\r\n            _super.prototype._init_tools.call(this);\r\n            if (this.active_inspect == 'auto') {\r\n                // do nothing as all tools are active be default\r\n            }\r\n            else if (this.active_inspect instanceof inspect_tool_1.InspectTool) {\r\n                var found = false;\r\n                try {\r\n                    for (var _g = tslib_1.__values(this.inspectors), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                        var inspector = _h.value;\r\n                        if (inspector != this.active_inspect)\r\n                            inspector.active = false;\r\n                        else\r\n                            found = true;\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_h && !_h.done && (_a = _g.return))\r\n                            _a.call(_g);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n                if (!found) {\r\n                    this.active_inspect = null;\r\n                }\r\n            }\r\n            else if (types_1.isArray(this.active_inspect)) {\r\n                var active_inspect = array_1.intersection(this.active_inspect, this.inspectors);\r\n                if (active_inspect.length != this.active_inspect.length) {\r\n                    this.active_inspect = active_inspect;\r\n                }\r\n                try {\r\n                    for (var _j = tslib_1.__values(this.inspectors), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                        var inspector = _k.value;\r\n                        if (!array_1.includes(this.active_inspect, inspector))\r\n                            inspector.active = false;\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_k && !_k.done && (_b = _j.return))\r\n                            _b.call(_j);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n            else if (this.active_inspect == null) {\r\n                try {\r\n                    for (var _l = tslib_1.__values(this.inspectors), _m = _l.next(); !_m.done; _m = _l.next()) {\r\n                        var inspector = _m.value;\r\n                        inspector.active = false;\r\n                    }\r\n                }\r\n                catch (e_3_1) {\r\n                    e_3 = { error: e_3_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_m && !_m.done && (_c = _l.return))\r\n                            _c.call(_l);\r\n                    }\r\n                    finally {\r\n                        if (e_3)\r\n                            throw e_3.error;\r\n                    }\r\n                }\r\n            }\r\n            var _activate_gesture = function (tool) {\r\n                if (tool.active) {\r\n                    // tool was activated by a proxy, but we need to finish configuration manually\r\n                    _this._active_change(tool);\r\n                }\r\n                else\r\n                    tool.active = true;\r\n            };\r\n            try {\r\n                // Connecting signals has to be done before changing the active state of the tools.\r\n                for (var _o = tslib_1.__values(object_1.values(this.gestures)), _p = _o.next(); !_p.done; _p = _o.next()) {\r\n                    var gesture = _p.value;\r\n                    gesture.tools = array_1.sort_by(gesture.tools, function (tool) { return tool.default_order; });\r\n                    var _loop_1 = function (tool) {\r\n                        this_1.connect(tool.properties.active.change, function () { return _this._active_change(tool); });\r\n                    };\r\n                    var this_1 = this;\r\n                    try {\r\n                        for (var _q = (e_5 = void 0, tslib_1.__values(gesture.tools)), _r = _q.next(); !_r.done; _r = _q.next()) {\r\n                            var tool = _r.value;\r\n                            _loop_1(tool);\r\n                        }\r\n                    }\r\n                    catch (e_5_1) {\r\n                        e_5 = { error: e_5_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_r && !_r.done && (_e = _q.return))\r\n                                _e.call(_q);\r\n                        }\r\n                        finally {\r\n                            if (e_5)\r\n                                throw e_5.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_p && !_p.done && (_d = _o.return))\r\n                        _d.call(_o);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _s = tslib_1.__values(object_1.entries(this.gestures)), _t = _s.next(); !_t.done; _t = _s.next()) {\r\n                    var _u = tslib_1.__read(_t.value, 2), et = _u[0], gesture = _u[1];\r\n                    var active_attr = _get_active_attr(et);\r\n                    if (active_attr) {\r\n                        var active_tool = this[active_attr];\r\n                        if (active_tool == 'auto') {\r\n                            if (gesture.tools.length != 0 && _supports_auto(et)) {\r\n                                _activate_gesture(gesture.tools[0]);\r\n                            }\r\n                        }\r\n                        else if (active_tool != null) {\r\n                            if (array_1.includes(this.tools, active_tool)) {\r\n                                _activate_gesture(active_tool);\r\n                            }\r\n                            else {\r\n                                this[active_attr] = null;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_t && !_t.done && (_f = _s.return))\r\n                        _f.call(_s);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n        };\r\n        return Toolbar;\r\n    }(toolbar_base_1.ToolbarBase));\r\n    exports.Toolbar = Toolbar;\r\n    Toolbar.__name__ = \"Toolbar\";\r\n    Toolbar.init_Toolbar();\r\n}\r\n","/* models\\tools\\inspectors\\inspect_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var button_tool_1 = require(411) /* ../button_tool */;\r\n    var on_off_button_1 = require(419) /* ../on_off_button */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var InspectToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(InspectToolView, _super);\r\n        function InspectToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return InspectToolView;\r\n    }(button_tool_1.ButtonToolView));\r\n    exports.InspectToolView = InspectToolView;\r\n    InspectToolView.__name__ = \"InspectToolView\";\r\n    var InspectTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(InspectTool, _super);\r\n        function InspectTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.event_type = \"move\";\r\n            return _this;\r\n        }\r\n        InspectTool.init_InspectTool = function () {\r\n            this.prototype.button_view = on_off_button_1.OnOffButtonView;\r\n            this.define({\r\n                toggleable: [p.Boolean, true],\r\n            });\r\n            this.override({\r\n                active: true,\r\n            });\r\n        };\r\n        return InspectTool;\r\n    }(button_tool_1.ButtonTool));\r\n    exports.InspectTool = InspectTool;\r\n    InspectTool.__name__ = \"InspectTool\";\r\n    InspectTool.init_InspectTool();\r\n}\r\n","/* models\\tools\\button_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var hammerjs_1 = tslib_1.__importDefault(require(412) /* hammerjs */);\r\n    var dom_view_1 = require(193) /* ../../core/dom_view */;\r\n    var tool_1 = require(413) /* ./tool */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var string_1 = require(144) /* ../../core/util/string */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var toolbar_1 = require(414) /* ../../styles/toolbar */;\r\n    var toolbar_css_1 = tslib_1.__importDefault(require(415) /* ../../styles/toolbar.css */);\r\n    var icons_css_1 = tslib_1.__importDefault(require(416) /* ../../styles/icons.css */);\r\n    var menus_css_1 = tslib_1.__importDefault(require(399) /* ../../styles/menus.css */);\r\n    var menus_1 = require(417) /* ../../core/util/menus */;\r\n    var ButtonToolButtonView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ButtonToolButtonView, _super);\r\n        function ButtonToolButtonView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ButtonToolButtonView.prototype.initialize = function () {\r\n            var _this = this;\r\n            _super.prototype.initialize.call(this);\r\n            var items = this.model.menu;\r\n            if (items != null) {\r\n                var location = this.parent.model.toolbar_location;\r\n                var reverse = location == \"left\" || location == \"above\";\r\n                var orientation = this.parent.model.horizontal ? \"vertical\" : \"horizontal\";\r\n                this._menu = new menus_1.ContextMenu(!reverse ? items : array_1.reversed(items), {\r\n                    orientation: orientation,\r\n                    prevent_hide: function (event) { return event.target == _this.el; },\r\n                });\r\n            }\r\n            this._hammer = new hammerjs_1.default(this.el, {\r\n                touchAction: \"auto\",\r\n                inputClass: hammerjs_1.default.TouchMouseInput,\r\n            });\r\n            this.connect(this.model.change, function () { return _this.render(); });\r\n            this._hammer.on(\"tap\", function (e) {\r\n                var _a;\r\n                if ((_a = _this._menu) === null || _a === void 0 ? void 0 : _a.is_open) {\r\n                    _this._menu.hide();\r\n                    return;\r\n                }\r\n                if (e.target == _this.el) {\r\n                    _this._clicked();\r\n                }\r\n            });\r\n            this._hammer.on(\"press\", function () { return _this._pressed(); });\r\n        };\r\n        ButtonToolButtonView.prototype.remove = function () {\r\n            var _a;\r\n            this._hammer.destroy();\r\n            (_a = this._menu) === null || _a === void 0 ? void 0 : _a.remove();\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        ButtonToolButtonView.prototype.styles = function () {\r\n            return tslib_1.__spread(_super.prototype.styles.call(this), [toolbar_css_1.default, icons_css_1.default, menus_css_1.default]);\r\n        };\r\n        ButtonToolButtonView.prototype.css_classes = function () {\r\n            return _super.prototype.css_classes.call(this).concat(toolbar_1.bk_toolbar_button);\r\n        };\r\n        ButtonToolButtonView.prototype.render = function () {\r\n            dom_1.empty(this.el);\r\n            var icon = this.model.computed_icon;\r\n            if (types_1.isString(icon)) {\r\n                if (string_1.startsWith(icon, \"data:image\"))\r\n                    this.el.style.backgroundImage = \"url('\" + icon + \"')\";\r\n                else\r\n                    this.el.classList.add(icon);\r\n            }\r\n            this.el.title = this.model.tooltip;\r\n            if (this._menu != null) {\r\n                this.root.el.appendChild(this._menu.el);\r\n            }\r\n        };\r\n        ButtonToolButtonView.prototype._pressed = function () {\r\n            var _this = this;\r\n            var _a;\r\n            var _b = this.el.getBoundingClientRect(), left = _b.left, top = _b.top, right = _b.right, bottom = _b.bottom;\r\n            var at = (function () {\r\n                switch (_this.parent.model.toolbar_location) {\r\n                    case \"right\":\r\n                        return { right: left, top: top };\r\n                    case \"left\":\r\n                        return { left: right, top: top };\r\n                    case \"above\":\r\n                        return { left: left, top: bottom };\r\n                    case \"below\":\r\n                        return { left: left, bottom: top };\r\n                }\r\n            })();\r\n            (_a = this._menu) === null || _a === void 0 ? void 0 : _a.toggle(at);\r\n        };\r\n        return ButtonToolButtonView;\r\n    }(dom_view_1.DOMView));\r\n    exports.ButtonToolButtonView = ButtonToolButtonView;\r\n    ButtonToolButtonView.__name__ = \"ButtonToolButtonView\";\r\n    var ButtonToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ButtonToolView, _super);\r\n        function ButtonToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return ButtonToolView;\r\n    }(tool_1.ToolView));\r\n    exports.ButtonToolView = ButtonToolView;\r\n    ButtonToolView.__name__ = \"ButtonToolView\";\r\n    var ButtonTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ButtonTool, _super);\r\n        function ButtonTool(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ButtonTool.init_ButtonTool = function () {\r\n            this.internal({\r\n                disabled: [p.Boolean, false],\r\n            });\r\n        };\r\n        Object.defineProperty(ButtonTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this.tool_name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ButtonTool.prototype, \"computed_icon\", {\r\n            get: function () {\r\n                return this.icon;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ButtonTool.prototype, \"menu\", {\r\n            get: function () {\r\n                return null;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ButtonTool;\r\n    }(tool_1.Tool));\r\n    exports.ButtonTool = ButtonTool;\r\n    ButtonTool.__name__ = \"ButtonTool\";\r\n    ButtonTool.init_ButtonTool();\r\n}\r\n","/* hammerjs\\hammer.js */ function _(require, module, exports) {\r\n    /*! Hammer.JS - v2.0.7 - 2016-04-22\r\n     * http://hammerjs.github.io/\r\n     *\r\n     * Copyright (c) 2016 Jorik Tangelder;\r\n     * Licensed under the MIT license */\r\n    (function (window, document, exportName, undefined) {\r\n        'use strict';\r\n        var VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\r\n        var TEST_ELEMENT = document.createElement('div');\r\n        var TYPE_FUNCTION = 'function';\r\n        var round = Math.round;\r\n        var abs = Math.abs;\r\n        var now = Date.now;\r\n        /**\r\n         * set a timeout with a given scope\r\n         * @param {Function} fn\r\n         * @param {Number} timeout\r\n         * @param {Object} context\r\n         * @returns {number}\r\n         */\r\n        function setTimeoutContext(fn, timeout, context) {\r\n            return setTimeout(bindFn(fn, context), timeout);\r\n        }\r\n        /**\r\n         * if the argument is an array, we want to execute the fn on each entry\r\n         * if it aint an array we don't want to do a thing.\r\n         * this is used by all the methods that accept a single and array argument.\r\n         * @param {*|Array} arg\r\n         * @param {String} fn\r\n         * @param {Object} [context]\r\n         * @returns {Boolean}\r\n         */\r\n        function invokeArrayArg(arg, fn, context) {\r\n            if (Array.isArray(arg)) {\r\n                each(arg, context[fn], context);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        /**\r\n         * walk objects and arrays\r\n         * @param {Object} obj\r\n         * @param {Function} iterator\r\n         * @param {Object} context\r\n         */\r\n        function each(obj, iterator, context) {\r\n            var i;\r\n            if (!obj) {\r\n                return;\r\n            }\r\n            if (obj.forEach) {\r\n                obj.forEach(iterator, context);\r\n            }\r\n            else if (obj.length !== undefined) {\r\n                i = 0;\r\n                while (i < obj.length) {\r\n                    iterator.call(context, obj[i], i, obj);\r\n                    i++;\r\n                }\r\n            }\r\n            else {\r\n                for (i in obj) {\r\n                    obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\r\n                }\r\n            }\r\n        }\r\n        /**\r\n         * wrap a method with a deprecation warning and stack trace\r\n         * @param {Function} method\r\n         * @param {String} name\r\n         * @param {String} message\r\n         * @returns {Function} A new function wrapping the supplied method.\r\n         */\r\n        function deprecate(method, name, message) {\r\n            var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\r\n            return function () {\r\n                var e = new Error('get-stack-trace');\r\n                var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\r\n                    .replace(/^\\s+at\\s+/gm, '')\r\n                    .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\r\n                var log = window.console && (window.console.warn || window.console.log);\r\n                if (log) {\r\n                    log.call(window.console, deprecationMessage, stack);\r\n                }\r\n                return method.apply(this, arguments);\r\n            };\r\n        }\r\n        /**\r\n         * extend object.\r\n         * means that properties in dest will be overwritten by the ones in src.\r\n         * @param {Object} target\r\n         * @param {...Object} objects_to_assign\r\n         * @returns {Object} target\r\n         */\r\n        var assign;\r\n        if (typeof Object.assign !== 'function') {\r\n            assign = function assign(target) {\r\n                if (target === undefined || target === null) {\r\n                    throw new TypeError('Cannot convert undefined or null to object');\r\n                }\r\n                var output = Object(target);\r\n                for (var index = 1; index < arguments.length; index++) {\r\n                    var source = arguments[index];\r\n                    if (source !== undefined && source !== null) {\r\n                        for (var nextKey in source) {\r\n                            if (source.hasOwnProperty(nextKey)) {\r\n                                output[nextKey] = source[nextKey];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return output;\r\n            };\r\n        }\r\n        else {\r\n            assign = Object.assign;\r\n        }\r\n        /**\r\n         * extend object.\r\n         * means that properties in dest will be overwritten by the ones in src.\r\n         * @param {Object} dest\r\n         * @param {Object} src\r\n         * @param {Boolean} [merge=false]\r\n         * @returns {Object} dest\r\n         */\r\n        var extend = deprecate(function extend(dest, src, merge) {\r\n            var keys = Object.keys(src);\r\n            var i = 0;\r\n            while (i < keys.length) {\r\n                if (!merge || (merge && dest[keys[i]] === undefined)) {\r\n                    dest[keys[i]] = src[keys[i]];\r\n                }\r\n                i++;\r\n            }\r\n            return dest;\r\n        }, 'extend', 'Use `assign`.');\r\n        /**\r\n         * merge the values from src in the dest.\r\n         * means that properties that exist in dest will not be overwritten by src\r\n         * @param {Object} dest\r\n         * @param {Object} src\r\n         * @returns {Object} dest\r\n         */\r\n        var merge = deprecate(function merge(dest, src) {\r\n            return extend(dest, src, true);\r\n        }, 'merge', 'Use `assign`.');\r\n        /**\r\n         * simple class inheritance\r\n         * @param {Function} child\r\n         * @param {Function} base\r\n         * @param {Object} [properties]\r\n         */\r\n        function inherit(child, base, properties) {\r\n            var baseP = base.prototype, childP;\r\n            childP = child.prototype = Object.create(baseP);\r\n            childP.constructor = child;\r\n            childP._super = baseP;\r\n            if (properties) {\r\n                assign(childP, properties);\r\n            }\r\n        }\r\n        /**\r\n         * simple function bind\r\n         * @param {Function} fn\r\n         * @param {Object} context\r\n         * @returns {Function}\r\n         */\r\n        function bindFn(fn, context) {\r\n            return function boundFn() {\r\n                return fn.apply(context, arguments);\r\n            };\r\n        }\r\n        /**\r\n         * let a boolean value also be a function that must return a boolean\r\n         * this first item in args will be used as the context\r\n         * @param {Boolean|Function} val\r\n         * @param {Array} [args]\r\n         * @returns {Boolean}\r\n         */\r\n        function boolOrFn(val, args) {\r\n            if (typeof val == TYPE_FUNCTION) {\r\n                return val.apply(args ? args[0] || undefined : undefined, args);\r\n            }\r\n            return val;\r\n        }\r\n        /**\r\n         * use the val2 when val1 is undefined\r\n         * @param {*} val1\r\n         * @param {*} val2\r\n         * @returns {*}\r\n         */\r\n        function ifUndefined(val1, val2) {\r\n            return (val1 === undefined) ? val2 : val1;\r\n        }\r\n        /**\r\n         * addEventListener with multiple events at once\r\n         * @param {EventTarget} target\r\n         * @param {String} types\r\n         * @param {Function} handler\r\n         */\r\n        function addEventListeners(target, types, handler) {\r\n            each(splitStr(types), function (type) {\r\n                target.addEventListener(type, handler, false);\r\n            });\r\n        }\r\n        /**\r\n         * removeEventListener with multiple events at once\r\n         * @param {EventTarget} target\r\n         * @param {String} types\r\n         * @param {Function} handler\r\n         */\r\n        function removeEventListeners(target, types, handler) {\r\n            each(splitStr(types), function (type) {\r\n                target.removeEventListener(type, handler, false);\r\n            });\r\n        }\r\n        /**\r\n         * find if a node is in the given parent\r\n         * @method hasParent\r\n         * @param {HTMLElement} node\r\n         * @param {HTMLElement} parent\r\n         * @return {Boolean} found\r\n         */\r\n        function hasParent(node, parent) {\r\n            while (node) {\r\n                if (node == parent) {\r\n                    return true;\r\n                }\r\n                node = node.parentNode;\r\n            }\r\n            return false;\r\n        }\r\n        /**\r\n         * small indexOf wrapper\r\n         * @param {String} str\r\n         * @param {String} find\r\n         * @returns {Boolean} found\r\n         */\r\n        function inStr(str, find) {\r\n            return str.indexOf(find) > -1;\r\n        }\r\n        /**\r\n         * split string on whitespace\r\n         * @param {String} str\r\n         * @returns {Array} words\r\n         */\r\n        function splitStr(str) {\r\n            return str.trim().split(/\\s+/g);\r\n        }\r\n        /**\r\n         * find if a array contains the object using indexOf or a simple polyFill\r\n         * @param {Array} src\r\n         * @param {String} find\r\n         * @param {String} [findByKey]\r\n         * @return {Boolean|Number} false when not found, or the index\r\n         */\r\n        function inArray(src, find, findByKey) {\r\n            if (src.indexOf && !findByKey) {\r\n                return src.indexOf(find);\r\n            }\r\n            else {\r\n                var i = 0;\r\n                while (i < src.length) {\r\n                    if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\r\n                        return i;\r\n                    }\r\n                    i++;\r\n                }\r\n                return -1;\r\n            }\r\n        }\r\n        /**\r\n         * convert array-like objects to real arrays\r\n         * @param {Object} obj\r\n         * @returns {Array}\r\n         */\r\n        function toArray(obj) {\r\n            return Array.prototype.slice.call(obj, 0);\r\n        }\r\n        /**\r\n         * unique array with objects based on a key (like 'id') or just by the array's value\r\n         * @param {Array} src [{id:1},{id:2},{id:1}]\r\n         * @param {String} [key]\r\n         * @param {Boolean} [sort=False]\r\n         * @returns {Array} [{id:1},{id:2}]\r\n         */\r\n        function uniqueArray(src, key, sort) {\r\n            var results = [];\r\n            var values = [];\r\n            var i = 0;\r\n            while (i < src.length) {\r\n                var val = key ? src[i][key] : src[i];\r\n                if (inArray(values, val) < 0) {\r\n                    results.push(src[i]);\r\n                }\r\n                values[i] = val;\r\n                i++;\r\n            }\r\n            if (sort) {\r\n                if (!key) {\r\n                    results = results.sort();\r\n                }\r\n                else {\r\n                    results = results.sort(function sortUniqueArray(a, b) {\r\n                        return a[key] > b[key];\r\n                    });\r\n                }\r\n            }\r\n            return results;\r\n        }\r\n        /**\r\n         * get the prefixed property\r\n         * @param {Object} obj\r\n         * @param {String} property\r\n         * @returns {String|Undefined} prefixed\r\n         */\r\n        function prefixed(obj, property) {\r\n            var prefix, prop;\r\n            var camelProp = property[0].toUpperCase() + property.slice(1);\r\n            var i = 0;\r\n            while (i < VENDOR_PREFIXES.length) {\r\n                prefix = VENDOR_PREFIXES[i];\r\n                prop = (prefix) ? prefix + camelProp : property;\r\n                if (prop in obj) {\r\n                    return prop;\r\n                }\r\n                i++;\r\n            }\r\n            return undefined;\r\n        }\r\n        /**\r\n         * get a unique id\r\n         * @returns {number} uniqueId\r\n         */\r\n        var _uniqueId = 1;\r\n        function uniqueId() {\r\n            return _uniqueId++;\r\n        }\r\n        /**\r\n         * get the window object of an element\r\n         * @param {HTMLElement} element\r\n         * @returns {DocumentView|Window}\r\n         */\r\n        function getWindowForElement(element) {\r\n            var doc = element.ownerDocument || element;\r\n            return (doc.defaultView || doc.parentWindow || window);\r\n        }\r\n        var MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\r\n        var SUPPORT_TOUCH = ('ontouchstart' in window);\r\n        var SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\r\n        var SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\r\n        var INPUT_TYPE_TOUCH = 'touch';\r\n        var INPUT_TYPE_PEN = 'pen';\r\n        var INPUT_TYPE_MOUSE = 'mouse';\r\n        var INPUT_TYPE_KINECT = 'kinect';\r\n        var COMPUTE_INTERVAL = 25;\r\n        var INPUT_START = 1;\r\n        var INPUT_MOVE = 2;\r\n        var INPUT_END = 4;\r\n        var INPUT_CANCEL = 8;\r\n        var DIRECTION_NONE = 1;\r\n        var DIRECTION_LEFT = 2;\r\n        var DIRECTION_RIGHT = 4;\r\n        var DIRECTION_UP = 8;\r\n        var DIRECTION_DOWN = 16;\r\n        var DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\r\n        var DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\r\n        var DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\r\n        var PROPS_XY = ['x', 'y'];\r\n        var PROPS_CLIENT_XY = ['clientX', 'clientY'];\r\n        /**\r\n         * create new input type manager\r\n         * @param {Manager} manager\r\n         * @param {Function} callback\r\n         * @returns {Input}\r\n         * @constructor\r\n         */\r\n        function Input(manager, callback) {\r\n            var self = this;\r\n            this.manager = manager;\r\n            this.callback = callback;\r\n            this.element = manager.element;\r\n            this.target = manager.options.inputTarget;\r\n            // smaller wrapper around the handler, for the scope and the enabled state of the manager,\r\n            // so when disabled the input events are completely bypassed.\r\n            this.domHandler = function (ev) {\r\n                if (boolOrFn(manager.options.enable, [manager])) {\r\n                    self.handler(ev);\r\n                }\r\n            };\r\n            this.init();\r\n        }\r\n        Input.prototype = {\r\n            /**\r\n             * should handle the inputEvent data and trigger the callback\r\n             * @virtual\r\n             */\r\n            handler: function () { },\r\n            /**\r\n             * bind the events\r\n             */\r\n            init: function () {\r\n                this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\r\n                this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\r\n                this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\r\n            },\r\n            /**\r\n             * unbind the events\r\n             */\r\n            destroy: function () {\r\n                this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\r\n                this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\r\n                this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\r\n            }\r\n        };\r\n        /**\r\n         * create new input type manager\r\n         * called by the Manager constructor\r\n         * @param {Hammer} manager\r\n         * @returns {Input}\r\n         */\r\n        function createInputInstance(manager) {\r\n            var Type;\r\n            var inputClass = manager.options.inputClass;\r\n            if (inputClass) {\r\n                Type = inputClass;\r\n            }\r\n            else if (SUPPORT_POINTER_EVENTS) {\r\n                Type = PointerEventInput;\r\n            }\r\n            else if (SUPPORT_ONLY_TOUCH) {\r\n                Type = TouchInput;\r\n            }\r\n            else if (!SUPPORT_TOUCH) {\r\n                Type = MouseInput;\r\n            }\r\n            else {\r\n                Type = TouchMouseInput;\r\n            }\r\n            return new (Type)(manager, inputHandler);\r\n        }\r\n        /**\r\n         * handle input events\r\n         * @param {Manager} manager\r\n         * @param {String} eventType\r\n         * @param {Object} input\r\n         */\r\n        function inputHandler(manager, eventType, input) {\r\n            var pointersLen = input.pointers.length;\r\n            var changedPointersLen = input.changedPointers.length;\r\n            var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\r\n            var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\r\n            input.isFirst = !!isFirst;\r\n            input.isFinal = !!isFinal;\r\n            if (isFirst) {\r\n                manager.session = {};\r\n            }\r\n            // source event is the normalized value of the domEvents\r\n            // like 'touchstart, mouseup, pointerdown'\r\n            input.eventType = eventType;\r\n            // compute scale, rotation etc\r\n            computeInputData(manager, input);\r\n            // emit secret event\r\n            manager.emit('hammer.input', input);\r\n            manager.recognize(input);\r\n            manager.session.prevInput = input;\r\n        }\r\n        /**\r\n         * extend the data with some usable properties like scale, rotate, velocity etc\r\n         * @param {Object} manager\r\n         * @param {Object} input\r\n         */\r\n        function computeInputData(manager, input) {\r\n            var session = manager.session;\r\n            var pointers = input.pointers;\r\n            var pointersLength = pointers.length;\r\n            // store the first input to calculate the distance and direction\r\n            if (!session.firstInput) {\r\n                session.firstInput = simpleCloneInputData(input);\r\n            }\r\n            // to compute scale and rotation we need to store the multiple touches\r\n            if (pointersLength > 1 && !session.firstMultiple) {\r\n                session.firstMultiple = simpleCloneInputData(input);\r\n            }\r\n            else if (pointersLength === 1) {\r\n                session.firstMultiple = false;\r\n            }\r\n            var firstInput = session.firstInput;\r\n            var firstMultiple = session.firstMultiple;\r\n            var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\r\n            var center = input.center = getCenter(pointers);\r\n            input.timeStamp = now();\r\n            input.deltaTime = input.timeStamp - firstInput.timeStamp;\r\n            input.angle = getAngle(offsetCenter, center);\r\n            input.distance = getDistance(offsetCenter, center);\r\n            computeDeltaXY(session, input);\r\n            input.offsetDirection = getDirection(input.deltaX, input.deltaY);\r\n            var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\r\n            input.overallVelocityX = overallVelocity.x;\r\n            input.overallVelocityY = overallVelocity.y;\r\n            input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\r\n            input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\r\n            input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\r\n            input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\r\n                session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\r\n            computeIntervalInputData(session, input);\r\n            // find the correct target\r\n            var target = manager.element;\r\n            if (hasParent(input.srcEvent.target, target)) {\r\n                target = input.srcEvent.target;\r\n            }\r\n            input.target = target;\r\n        }\r\n        function computeDeltaXY(session, input) {\r\n            var center = input.center;\r\n            var offset = session.offsetDelta || {};\r\n            var prevDelta = session.prevDelta || {};\r\n            var prevInput = session.prevInput || {};\r\n            if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\r\n                prevDelta = session.prevDelta = {\r\n                    x: prevInput.deltaX || 0,\r\n                    y: prevInput.deltaY || 0\r\n                };\r\n                offset = session.offsetDelta = {\r\n                    x: center.x,\r\n                    y: center.y\r\n                };\r\n            }\r\n            input.deltaX = prevDelta.x + (center.x - offset.x);\r\n            input.deltaY = prevDelta.y + (center.y - offset.y);\r\n        }\r\n        /**\r\n         * velocity is calculated every x ms\r\n         * @param {Object} session\r\n         * @param {Object} input\r\n         */\r\n        function computeIntervalInputData(session, input) {\r\n            var last = session.lastInterval || input, deltaTime = input.timeStamp - last.timeStamp, velocity, velocityX, velocityY, direction;\r\n            if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\r\n                var deltaX = input.deltaX - last.deltaX;\r\n                var deltaY = input.deltaY - last.deltaY;\r\n                var v = getVelocity(deltaTime, deltaX, deltaY);\r\n                velocityX = v.x;\r\n                velocityY = v.y;\r\n                velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\r\n                direction = getDirection(deltaX, deltaY);\r\n                session.lastInterval = input;\r\n            }\r\n            else {\r\n                // use latest velocity info if it doesn't overtake a minimum period\r\n                velocity = last.velocity;\r\n                velocityX = last.velocityX;\r\n                velocityY = last.velocityY;\r\n                direction = last.direction;\r\n            }\r\n            input.velocity = velocity;\r\n            input.velocityX = velocityX;\r\n            input.velocityY = velocityY;\r\n            input.direction = direction;\r\n        }\r\n        /**\r\n         * create a simple clone from the input used for storage of firstInput and firstMultiple\r\n         * @param {Object} input\r\n         * @returns {Object} clonedInputData\r\n         */\r\n        function simpleCloneInputData(input) {\r\n            // make a simple copy of the pointers because we will get a reference if we don't\r\n            // we only need clientXY for the calculations\r\n            var pointers = [];\r\n            var i = 0;\r\n            while (i < input.pointers.length) {\r\n                pointers[i] = {\r\n                    clientX: round(input.pointers[i].clientX),\r\n                    clientY: round(input.pointers[i].clientY)\r\n                };\r\n                i++;\r\n            }\r\n            return {\r\n                timeStamp: now(),\r\n                pointers: pointers,\r\n                center: getCenter(pointers),\r\n                deltaX: input.deltaX,\r\n                deltaY: input.deltaY\r\n            };\r\n        }\r\n        /**\r\n         * get the center of all the pointers\r\n         * @param {Array} pointers\r\n         * @return {Object} center contains `x` and `y` properties\r\n         */\r\n        function getCenter(pointers) {\r\n            var pointersLength = pointers.length;\r\n            // no need to loop when only one touch\r\n            if (pointersLength === 1) {\r\n                return {\r\n                    x: round(pointers[0].clientX),\r\n                    y: round(pointers[0].clientY)\r\n                };\r\n            }\r\n            var x = 0, y = 0, i = 0;\r\n            while (i < pointersLength) {\r\n                x += pointers[i].clientX;\r\n                y += pointers[i].clientY;\r\n                i++;\r\n            }\r\n            return {\r\n                x: round(x / pointersLength),\r\n                y: round(y / pointersLength)\r\n            };\r\n        }\r\n        /**\r\n         * calculate the velocity between two points. unit is in px per ms.\r\n         * @param {Number} deltaTime\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         * @return {Object} velocity `x` and `y`\r\n         */\r\n        function getVelocity(deltaTime, x, y) {\r\n            return {\r\n                x: x / deltaTime || 0,\r\n                y: y / deltaTime || 0\r\n            };\r\n        }\r\n        /**\r\n         * get the direction between two points\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         * @return {Number} direction\r\n         */\r\n        function getDirection(x, y) {\r\n            if (x === y) {\r\n                return DIRECTION_NONE;\r\n            }\r\n            if (abs(x) >= abs(y)) {\r\n                return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\r\n            }\r\n            return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\r\n        }\r\n        /**\r\n         * calculate the absolute distance between two points\r\n         * @param {Object} p1 {x, y}\r\n         * @param {Object} p2 {x, y}\r\n         * @param {Array} [props] containing x and y keys\r\n         * @return {Number} distance\r\n         */\r\n        function getDistance(p1, p2, props) {\r\n            if (!props) {\r\n                props = PROPS_XY;\r\n            }\r\n            var x = p2[props[0]] - p1[props[0]], y = p2[props[1]] - p1[props[1]];\r\n            return Math.sqrt((x * x) + (y * y));\r\n        }\r\n        /**\r\n         * calculate the angle between two coordinates\r\n         * @param {Object} p1\r\n         * @param {Object} p2\r\n         * @param {Array} [props] containing x and y keys\r\n         * @return {Number} angle\r\n         */\r\n        function getAngle(p1, p2, props) {\r\n            if (!props) {\r\n                props = PROPS_XY;\r\n            }\r\n            var x = p2[props[0]] - p1[props[0]], y = p2[props[1]] - p1[props[1]];\r\n            return Math.atan2(y, x) * 180 / Math.PI;\r\n        }\r\n        /**\r\n         * calculate the rotation degrees between two pointersets\r\n         * @param {Array} start array of pointers\r\n         * @param {Array} end array of pointers\r\n         * @return {Number} rotation\r\n         */\r\n        function getRotation(start, end) {\r\n            return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\r\n        }\r\n        /**\r\n         * calculate the scale factor between two pointersets\r\n         * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\r\n         * @param {Array} start array of pointers\r\n         * @param {Array} end array of pointers\r\n         * @return {Number} scale\r\n         */\r\n        function getScale(start, end) {\r\n            return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\r\n        }\r\n        var MOUSE_INPUT_MAP = {\r\n            mousedown: INPUT_START,\r\n            mousemove: INPUT_MOVE,\r\n            mouseup: INPUT_END\r\n        };\r\n        var MOUSE_ELEMENT_EVENTS = 'mousedown';\r\n        var MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\r\n        /**\r\n         * Mouse events input\r\n         * @constructor\r\n         * @extends Input\r\n         */\r\n        function MouseInput() {\r\n            this.evEl = MOUSE_ELEMENT_EVENTS;\r\n            this.evWin = MOUSE_WINDOW_EVENTS;\r\n            this.pressed = false; // mousedown state\r\n            Input.apply(this, arguments);\r\n        }\r\n        inherit(MouseInput, Input, {\r\n            /**\r\n             * handle mouse events\r\n             * @param {Object} ev\r\n             */\r\n            handler: function MEhandler(ev) {\r\n                var eventType = MOUSE_INPUT_MAP[ev.type];\r\n                // on start we want to have the left mouse button down\r\n                if (eventType & INPUT_START && ev.button === 0) {\r\n                    this.pressed = true;\r\n                }\r\n                if (eventType & INPUT_MOVE && ev.which !== 1) {\r\n                    eventType = INPUT_END;\r\n                }\r\n                // mouse must be down\r\n                if (!this.pressed) {\r\n                    return;\r\n                }\r\n                if (eventType & INPUT_END) {\r\n                    this.pressed = false;\r\n                }\r\n                this.callback(this.manager, eventType, {\r\n                    pointers: [ev],\r\n                    changedPointers: [ev],\r\n                    pointerType: INPUT_TYPE_MOUSE,\r\n                    srcEvent: ev\r\n                });\r\n            }\r\n        });\r\n        var POINTER_INPUT_MAP = {\r\n            pointerdown: INPUT_START,\r\n            pointermove: INPUT_MOVE,\r\n            pointerup: INPUT_END,\r\n            pointercancel: INPUT_CANCEL,\r\n            pointerout: INPUT_CANCEL\r\n        };\r\n        // in IE10 the pointer types is defined as an enum\r\n        var IE10_POINTER_TYPE_ENUM = {\r\n            2: INPUT_TYPE_TOUCH,\r\n            3: INPUT_TYPE_PEN,\r\n            4: INPUT_TYPE_MOUSE,\r\n            5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\r\n        };\r\n        var POINTER_ELEMENT_EVENTS = 'pointerdown';\r\n        var POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\r\n        // IE10 has prefixed support, and case-sensitive\r\n        if (window.MSPointerEvent && !window.PointerEvent) {\r\n            POINTER_ELEMENT_EVENTS = 'MSPointerDown';\r\n            POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\r\n        }\r\n        /**\r\n         * Pointer events input\r\n         * @constructor\r\n         * @extends Input\r\n         */\r\n        function PointerEventInput() {\r\n            this.evEl = POINTER_ELEMENT_EVENTS;\r\n            this.evWin = POINTER_WINDOW_EVENTS;\r\n            Input.apply(this, arguments);\r\n            this.store = (this.manager.session.pointerEvents = []);\r\n        }\r\n        inherit(PointerEventInput, Input, {\r\n            /**\r\n             * handle mouse events\r\n             * @param {Object} ev\r\n             */\r\n            handler: function PEhandler(ev) {\r\n                var store = this.store;\r\n                var removePointer = false;\r\n                var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\r\n                var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\r\n                var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\r\n                var isTouch = (pointerType == INPUT_TYPE_TOUCH);\r\n                // get index of the event in the store\r\n                var storeIndex = inArray(store, ev.pointerId, 'pointerId');\r\n                // start and mouse must be down\r\n                if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\r\n                    if (storeIndex < 0) {\r\n                        store.push(ev);\r\n                        storeIndex = store.length - 1;\r\n                    }\r\n                }\r\n                else if (eventType & (INPUT_END | INPUT_CANCEL)) {\r\n                    removePointer = true;\r\n                }\r\n                // it not found, so the pointer hasn't been down (so it's probably a hover)\r\n                if (storeIndex < 0) {\r\n                    return;\r\n                }\r\n                // update the event in the store\r\n                store[storeIndex] = ev;\r\n                this.callback(this.manager, eventType, {\r\n                    pointers: store,\r\n                    changedPointers: [ev],\r\n                    pointerType: pointerType,\r\n                    srcEvent: ev\r\n                });\r\n                if (removePointer) {\r\n                    // remove from the store\r\n                    store.splice(storeIndex, 1);\r\n                }\r\n            }\r\n        });\r\n        var SINGLE_TOUCH_INPUT_MAP = {\r\n            touchstart: INPUT_START,\r\n            touchmove: INPUT_MOVE,\r\n            touchend: INPUT_END,\r\n            touchcancel: INPUT_CANCEL\r\n        };\r\n        var SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\r\n        var SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\r\n        /**\r\n         * Touch events input\r\n         * @constructor\r\n         * @extends Input\r\n         */\r\n        function SingleTouchInput() {\r\n            this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\r\n            this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\r\n            this.started = false;\r\n            Input.apply(this, arguments);\r\n        }\r\n        inherit(SingleTouchInput, Input, {\r\n            handler: function TEhandler(ev) {\r\n                var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\r\n                // should we handle the touch events?\r\n                if (type === INPUT_START) {\r\n                    this.started = true;\r\n                }\r\n                if (!this.started) {\r\n                    return;\r\n                }\r\n                var touches = normalizeSingleTouches.call(this, ev, type);\r\n                // when done, reset the started state\r\n                if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\r\n                    this.started = false;\r\n                }\r\n                this.callback(this.manager, type, {\r\n                    pointers: touches[0],\r\n                    changedPointers: touches[1],\r\n                    pointerType: INPUT_TYPE_TOUCH,\r\n                    srcEvent: ev\r\n                });\r\n            }\r\n        });\r\n        /**\r\n         * @this {TouchInput}\r\n         * @param {Object} ev\r\n         * @param {Number} type flag\r\n         * @returns {undefined|Array} [all, changed]\r\n         */\r\n        function normalizeSingleTouches(ev, type) {\r\n            var all = toArray(ev.touches);\r\n            var changed = toArray(ev.changedTouches);\r\n            if (type & (INPUT_END | INPUT_CANCEL)) {\r\n                all = uniqueArray(all.concat(changed), 'identifier', true);\r\n            }\r\n            return [all, changed];\r\n        }\r\n        var TOUCH_INPUT_MAP = {\r\n            touchstart: INPUT_START,\r\n            touchmove: INPUT_MOVE,\r\n            touchend: INPUT_END,\r\n            touchcancel: INPUT_CANCEL\r\n        };\r\n        var TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\r\n        /**\r\n         * Multi-user touch events input\r\n         * @constructor\r\n         * @extends Input\r\n         */\r\n        function TouchInput() {\r\n            this.evTarget = TOUCH_TARGET_EVENTS;\r\n            this.targetIds = {};\r\n            Input.apply(this, arguments);\r\n        }\r\n        inherit(TouchInput, Input, {\r\n            handler: function MTEhandler(ev) {\r\n                var type = TOUCH_INPUT_MAP[ev.type];\r\n                var touches = getTouches.call(this, ev, type);\r\n                if (!touches) {\r\n                    return;\r\n                }\r\n                this.callback(this.manager, type, {\r\n                    pointers: touches[0],\r\n                    changedPointers: touches[1],\r\n                    pointerType: INPUT_TYPE_TOUCH,\r\n                    srcEvent: ev\r\n                });\r\n            }\r\n        });\r\n        /**\r\n         * @this {TouchInput}\r\n         * @param {Object} ev\r\n         * @param {Number} type flag\r\n         * @returns {undefined|Array} [all, changed]\r\n         */\r\n        function getTouches(ev, type) {\r\n            var allTouches = toArray(ev.touches);\r\n            var targetIds = this.targetIds;\r\n            // when there is only one touch, the process can be simplified\r\n            if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\r\n                targetIds[allTouches[0].identifier] = true;\r\n                return [allTouches, allTouches];\r\n            }\r\n            var i, targetTouches, changedTouches = toArray(ev.changedTouches), changedTargetTouches = [], target = this.target;\r\n            // get target touches from touches\r\n            targetTouches = allTouches.filter(function (touch) {\r\n                return hasParent(touch.target, target);\r\n            });\r\n            // collect touches\r\n            if (type === INPUT_START) {\r\n                i = 0;\r\n                while (i < targetTouches.length) {\r\n                    targetIds[targetTouches[i].identifier] = true;\r\n                    i++;\r\n                }\r\n            }\r\n            // filter changed touches to only contain touches that exist in the collected target ids\r\n            i = 0;\r\n            while (i < changedTouches.length) {\r\n                if (targetIds[changedTouches[i].identifier]) {\r\n                    changedTargetTouches.push(changedTouches[i]);\r\n                }\r\n                // cleanup removed touches\r\n                if (type & (INPUT_END | INPUT_CANCEL)) {\r\n                    delete targetIds[changedTouches[i].identifier];\r\n                }\r\n                i++;\r\n            }\r\n            if (!changedTargetTouches.length) {\r\n                return;\r\n            }\r\n            return [\r\n                // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\r\n                uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\r\n                changedTargetTouches\r\n            ];\r\n        }\r\n        /**\r\n         * Combined touch and mouse input\r\n         *\r\n         * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\r\n         * This because touch devices also emit mouse events while doing a touch.\r\n         *\r\n         * @constructor\r\n         * @extends Input\r\n         */\r\n        var DEDUP_TIMEOUT = 2500;\r\n        var DEDUP_DISTANCE = 25;\r\n        function TouchMouseInput() {\r\n            Input.apply(this, arguments);\r\n            var handler = bindFn(this.handler, this);\r\n            this.touch = new TouchInput(this.manager, handler);\r\n            this.mouse = new MouseInput(this.manager, handler);\r\n            this.primaryTouch = null;\r\n            this.lastTouches = [];\r\n        }\r\n        inherit(TouchMouseInput, Input, {\r\n            /**\r\n             * handle mouse and touch events\r\n             * @param {Hammer} manager\r\n             * @param {String} inputEvent\r\n             * @param {Object} inputData\r\n             */\r\n            handler: function TMEhandler(manager, inputEvent, inputData) {\r\n                var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH), isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\r\n                if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\r\n                    return;\r\n                }\r\n                // when we're in a touch event, record touches to  de-dupe synthetic mouse event\r\n                if (isTouch) {\r\n                    recordTouches.call(this, inputEvent, inputData);\r\n                }\r\n                else if (isMouse && isSyntheticEvent.call(this, inputData)) {\r\n                    return;\r\n                }\r\n                this.callback(manager, inputEvent, inputData);\r\n            },\r\n            /**\r\n             * remove the event listeners\r\n             */\r\n            destroy: function destroy() {\r\n                this.touch.destroy();\r\n                this.mouse.destroy();\r\n            }\r\n        });\r\n        function recordTouches(eventType, eventData) {\r\n            if (eventType & INPUT_START) {\r\n                this.primaryTouch = eventData.changedPointers[0].identifier;\r\n                setLastTouch.call(this, eventData);\r\n            }\r\n            else if (eventType & (INPUT_END | INPUT_CANCEL)) {\r\n                setLastTouch.call(this, eventData);\r\n            }\r\n        }\r\n        function setLastTouch(eventData) {\r\n            var touch = eventData.changedPointers[0];\r\n            if (touch.identifier === this.primaryTouch) {\r\n                var lastTouch = { x: touch.clientX, y: touch.clientY };\r\n                this.lastTouches.push(lastTouch);\r\n                var lts = this.lastTouches;\r\n                var removeLastTouch = function () {\r\n                    var i = lts.indexOf(lastTouch);\r\n                    if (i > -1) {\r\n                        lts.splice(i, 1);\r\n                    }\r\n                };\r\n                setTimeout(removeLastTouch, DEDUP_TIMEOUT);\r\n            }\r\n        }\r\n        function isSyntheticEvent(eventData) {\r\n            var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\r\n            for (var i = 0; i < this.lastTouches.length; i++) {\r\n                var t = this.lastTouches[i];\r\n                var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\r\n                if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        var PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\r\n        var NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\r\n        // magical touchAction value\r\n        var TOUCH_ACTION_COMPUTE = 'compute';\r\n        var TOUCH_ACTION_AUTO = 'auto';\r\n        var TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\r\n        var TOUCH_ACTION_NONE = 'none';\r\n        var TOUCH_ACTION_PAN_X = 'pan-x';\r\n        var TOUCH_ACTION_PAN_Y = 'pan-y';\r\n        var TOUCH_ACTION_MAP = getTouchActionProps();\r\n        /**\r\n         * Touch Action\r\n         * sets the touchAction property or uses the js alternative\r\n         * @param {Manager} manager\r\n         * @param {String} value\r\n         * @constructor\r\n         */\r\n        function TouchAction(manager, value) {\r\n            this.manager = manager;\r\n            this.set(value);\r\n        }\r\n        TouchAction.prototype = {\r\n            /**\r\n             * set the touchAction value on the element or enable the polyfill\r\n             * @param {String} value\r\n             */\r\n            set: function (value) {\r\n                // find out the touch-action by the event handlers\r\n                if (value == TOUCH_ACTION_COMPUTE) {\r\n                    value = this.compute();\r\n                }\r\n                if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\r\n                    this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\r\n                }\r\n                this.actions = value.toLowerCase().trim();\r\n            },\r\n            /**\r\n             * just re-set the touchAction value\r\n             */\r\n            update: function () {\r\n                this.set(this.manager.options.touchAction);\r\n            },\r\n            /**\r\n             * compute the value for the touchAction property based on the recognizer's settings\r\n             * @returns {String} value\r\n             */\r\n            compute: function () {\r\n                var actions = [];\r\n                each(this.manager.recognizers, function (recognizer) {\r\n                    if (boolOrFn(recognizer.options.enable, [recognizer])) {\r\n                        actions = actions.concat(recognizer.getTouchAction());\r\n                    }\r\n                });\r\n                return cleanTouchActions(actions.join(' '));\r\n            },\r\n            /**\r\n             * this method is called on each input cycle and provides the preventing of the browser behavior\r\n             * @param {Object} input\r\n             */\r\n            preventDefaults: function (input) {\r\n                var srcEvent = input.srcEvent;\r\n                var direction = input.offsetDirection;\r\n                // if the touch action did prevented once this session\r\n                if (this.manager.session.prevented) {\r\n                    srcEvent.preventDefault();\r\n                    return;\r\n                }\r\n                var actions = this.actions;\r\n                var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\r\n                var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\r\n                var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\r\n                if (hasNone) {\r\n                    //do not prevent defaults if this is a tap gesture\r\n                    var isTapPointer = input.pointers.length === 1;\r\n                    var isTapMovement = input.distance < 2;\r\n                    var isTapTouchTime = input.deltaTime < 250;\r\n                    if (isTapPointer && isTapMovement && isTapTouchTime) {\r\n                        return;\r\n                    }\r\n                }\r\n                if (hasPanX && hasPanY) {\r\n                    // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\r\n                    return;\r\n                }\r\n                if (hasNone ||\r\n                    (hasPanY && direction & DIRECTION_HORIZONTAL) ||\r\n                    (hasPanX && direction & DIRECTION_VERTICAL)) {\r\n                    return this.preventSrc(srcEvent);\r\n                }\r\n            },\r\n            /**\r\n             * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\r\n             * @param {Object} srcEvent\r\n             */\r\n            preventSrc: function (srcEvent) {\r\n                this.manager.session.prevented = true;\r\n                srcEvent.preventDefault();\r\n            }\r\n        };\r\n        /**\r\n         * when the touchActions are collected they are not a valid value, so we need to clean things up. *\r\n         * @param {String} actions\r\n         * @returns {*}\r\n         */\r\n        function cleanTouchActions(actions) {\r\n            // none\r\n            if (inStr(actions, TOUCH_ACTION_NONE)) {\r\n                return TOUCH_ACTION_NONE;\r\n            }\r\n            var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\r\n            var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\r\n            // if both pan-x and pan-y are set (different recognizers\r\n            // for different directions, e.g. horizontal pan but vertical swipe?)\r\n            // we need none (as otherwise with pan-x pan-y combined none of these\r\n            // recognizers will work, since the browser would handle all panning\r\n            if (hasPanX && hasPanY) {\r\n                return TOUCH_ACTION_NONE;\r\n            }\r\n            // pan-x OR pan-y\r\n            if (hasPanX || hasPanY) {\r\n                return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\r\n            }\r\n            // manipulation\r\n            if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\r\n                return TOUCH_ACTION_MANIPULATION;\r\n            }\r\n            return TOUCH_ACTION_AUTO;\r\n        }\r\n        function getTouchActionProps() {\r\n            if (!NATIVE_TOUCH_ACTION) {\r\n                return false;\r\n            }\r\n            var touchMap = {};\r\n            var cssSupports = window.CSS && window.CSS.supports;\r\n            ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function (val) {\r\n                // If css.supports is not supported but there is native touch-action assume it supports\r\n                // all values. This is the case for IE 10 and 11.\r\n                touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\r\n            });\r\n            return touchMap;\r\n        }\r\n        /**\r\n         * Recognizer flow explained; *\r\n         * All recognizers have the initial state of POSSIBLE when a input session starts.\r\n         * The definition of a input session is from the first input until the last input, with all it's movement in it. *\r\n         * Example session for mouse-input: mousedown -> mousemove -> mouseup\r\n         *\r\n         * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\r\n         * which determines with state it should be.\r\n         *\r\n         * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\r\n         * POSSIBLE to give it another change on the next cycle.\r\n         *\r\n         *               Possible\r\n         *                  |\r\n         *            +-----+---------------+\r\n         *            |                     |\r\n         *      +-----+-----+               |\r\n         *      |           |               |\r\n         *   Failed      Cancelled          |\r\n         *                          +-------+------+\r\n         *                          |              |\r\n         *                      Recognized       Began\r\n         *                                         |\r\n         *                                      Changed\r\n         *                                         |\r\n         *                                  Ended/Recognized\r\n         */\r\n        var STATE_POSSIBLE = 1;\r\n        var STATE_BEGAN = 2;\r\n        var STATE_CHANGED = 4;\r\n        var STATE_ENDED = 8;\r\n        var STATE_RECOGNIZED = STATE_ENDED;\r\n        var STATE_CANCELLED = 16;\r\n        var STATE_FAILED = 32;\r\n        /**\r\n         * Recognizer\r\n         * Every recognizer needs to extend from this class.\r\n         * @constructor\r\n         * @param {Object} options\r\n         */\r\n        function Recognizer(options) {\r\n            this.options = assign({}, this.defaults, options || {});\r\n            this.id = uniqueId();\r\n            this.manager = null;\r\n            // default is enable true\r\n            this.options.enable = ifUndefined(this.options.enable, true);\r\n            this.state = STATE_POSSIBLE;\r\n            this.simultaneous = {};\r\n            this.requireFail = [];\r\n        }\r\n        Recognizer.prototype = {\r\n            /**\r\n             * @virtual\r\n             * @type {Object}\r\n             */\r\n            defaults: {},\r\n            /**\r\n             * set options\r\n             * @param {Object} options\r\n             * @return {Recognizer}\r\n             */\r\n            set: function (options) {\r\n                assign(this.options, options);\r\n                // also update the touchAction, in case something changed about the directions/enabled state\r\n                this.manager && this.manager.touchAction.update();\r\n                return this;\r\n            },\r\n            /**\r\n             * recognize simultaneous with an other recognizer.\r\n             * @param {Recognizer} otherRecognizer\r\n             * @returns {Recognizer} this\r\n             */\r\n            recognizeWith: function (otherRecognizer) {\r\n                if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\r\n                    return this;\r\n                }\r\n                var simultaneous = this.simultaneous;\r\n                otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n                if (!simultaneous[otherRecognizer.id]) {\r\n                    simultaneous[otherRecognizer.id] = otherRecognizer;\r\n                    otherRecognizer.recognizeWith(this);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * drop the simultaneous link. it doesnt remove the link on the other recognizer.\r\n             * @param {Recognizer} otherRecognizer\r\n             * @returns {Recognizer} this\r\n             */\r\n            dropRecognizeWith: function (otherRecognizer) {\r\n                if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\r\n                    return this;\r\n                }\r\n                otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n                delete this.simultaneous[otherRecognizer.id];\r\n                return this;\r\n            },\r\n            /**\r\n             * recognizer can only run when an other is failing\r\n             * @param {Recognizer} otherRecognizer\r\n             * @returns {Recognizer} this\r\n             */\r\n            requireFailure: function (otherRecognizer) {\r\n                if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\r\n                    return this;\r\n                }\r\n                var requireFail = this.requireFail;\r\n                otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n                if (inArray(requireFail, otherRecognizer) === -1) {\r\n                    requireFail.push(otherRecognizer);\r\n                    otherRecognizer.requireFailure(this);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * drop the requireFailure link. it does not remove the link on the other recognizer.\r\n             * @param {Recognizer} otherRecognizer\r\n             * @returns {Recognizer} this\r\n             */\r\n            dropRequireFailure: function (otherRecognizer) {\r\n                if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\r\n                    return this;\r\n                }\r\n                otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\r\n                var index = inArray(this.requireFail, otherRecognizer);\r\n                if (index > -1) {\r\n                    this.requireFail.splice(index, 1);\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * has require failures boolean\r\n             * @returns {boolean}\r\n             */\r\n            hasRequireFailures: function () {\r\n                return this.requireFail.length > 0;\r\n            },\r\n            /**\r\n             * if the recognizer can recognize simultaneous with an other recognizer\r\n             * @param {Recognizer} otherRecognizer\r\n             * @returns {Boolean}\r\n             */\r\n            canRecognizeWith: function (otherRecognizer) {\r\n                return !!this.simultaneous[otherRecognizer.id];\r\n            },\r\n            /**\r\n             * You should use `tryEmit` instead of `emit` directly to check\r\n             * that all the needed recognizers has failed before emitting.\r\n             * @param {Object} input\r\n             */\r\n            emit: function (input) {\r\n                var self = this;\r\n                var state = this.state;\r\n                function emit(event) {\r\n                    self.manager.emit(event, input);\r\n                }\r\n                // 'panstart' and 'panmove'\r\n                if (state < STATE_ENDED) {\r\n                    emit(self.options.event + stateStr(state));\r\n                }\r\n                emit(self.options.event); // simple 'eventName' events\r\n                if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\r\n                    emit(input.additionalEvent);\r\n                }\r\n                // panend and pancancel\r\n                if (state >= STATE_ENDED) {\r\n                    emit(self.options.event + stateStr(state));\r\n                }\r\n            },\r\n            /**\r\n             * Check that all the require failure recognizers has failed,\r\n             * if true, it emits a gesture event,\r\n             * otherwise, setup the state to FAILED.\r\n             * @param {Object} input\r\n             */\r\n            tryEmit: function (input) {\r\n                if (this.canEmit()) {\r\n                    return this.emit(input);\r\n                }\r\n                // it's failing anyway\r\n                this.state = STATE_FAILED;\r\n            },\r\n            /**\r\n             * can we emit?\r\n             * @returns {boolean}\r\n             */\r\n            canEmit: function () {\r\n                var i = 0;\r\n                while (i < this.requireFail.length) {\r\n                    if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\r\n                        return false;\r\n                    }\r\n                    i++;\r\n                }\r\n                return true;\r\n            },\r\n            /**\r\n             * update the recognizer\r\n             * @param {Object} inputData\r\n             */\r\n            recognize: function (inputData) {\r\n                // make a new copy of the inputData\r\n                // so we can change the inputData without messing up the other recognizers\r\n                var inputDataClone = assign({}, inputData);\r\n                // is is enabled and allow recognizing?\r\n                if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\r\n                    this.reset();\r\n                    this.state = STATE_FAILED;\r\n                    return;\r\n                }\r\n                // reset when we've reached the end\r\n                if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\r\n                    this.state = STATE_POSSIBLE;\r\n                }\r\n                this.state = this.process(inputDataClone);\r\n                // the recognizer has recognized a gesture\r\n                // so trigger an event\r\n                if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\r\n                    this.tryEmit(inputDataClone);\r\n                }\r\n            },\r\n            /**\r\n             * return the state of the recognizer\r\n             * the actual recognizing happens in this method\r\n             * @virtual\r\n             * @param {Object} inputData\r\n             * @returns {Const} STATE\r\n             */\r\n            process: function (inputData) { },\r\n            /**\r\n             * return the preferred touch-action\r\n             * @virtual\r\n             * @returns {Array}\r\n             */\r\n            getTouchAction: function () { },\r\n            /**\r\n             * called when the gesture isn't allowed to recognize\r\n             * like when another is being recognized or it is disabled\r\n             * @virtual\r\n             */\r\n            reset: function () { }\r\n        };\r\n        /**\r\n         * get a usable string, used as event postfix\r\n         * @param {Const} state\r\n         * @returns {String} state\r\n         */\r\n        function stateStr(state) {\r\n            if (state & STATE_CANCELLED) {\r\n                return 'cancel';\r\n            }\r\n            else if (state & STATE_ENDED) {\r\n                return 'end';\r\n            }\r\n            else if (state & STATE_CHANGED) {\r\n                return 'move';\r\n            }\r\n            else if (state & STATE_BEGAN) {\r\n                return 'start';\r\n            }\r\n            return '';\r\n        }\r\n        /**\r\n         * direction cons to string\r\n         * @param {Const} direction\r\n         * @returns {String}\r\n         */\r\n        function directionStr(direction) {\r\n            if (direction == DIRECTION_DOWN) {\r\n                return 'down';\r\n            }\r\n            else if (direction == DIRECTION_UP) {\r\n                return 'up';\r\n            }\r\n            else if (direction == DIRECTION_LEFT) {\r\n                return 'left';\r\n            }\r\n            else if (direction == DIRECTION_RIGHT) {\r\n                return 'right';\r\n            }\r\n            return '';\r\n        }\r\n        /**\r\n         * get a recognizer by name if it is bound to a manager\r\n         * @param {Recognizer|String} otherRecognizer\r\n         * @param {Recognizer} recognizer\r\n         * @returns {Recognizer}\r\n         */\r\n        function getRecognizerByNameIfManager(otherRecognizer, recognizer) {\r\n            var manager = recognizer.manager;\r\n            if (manager) {\r\n                return manager.get(otherRecognizer);\r\n            }\r\n            return otherRecognizer;\r\n        }\r\n        /**\r\n         * This recognizer is just used as a base for the simple attribute recognizers.\r\n         * @constructor\r\n         * @extends Recognizer\r\n         */\r\n        function AttrRecognizer() {\r\n            Recognizer.apply(this, arguments);\r\n        }\r\n        inherit(AttrRecognizer, Recognizer, {\r\n            /**\r\n             * @namespace\r\n             * @memberof AttrRecognizer\r\n             */\r\n            defaults: {\r\n                /**\r\n                 * @type {Number}\r\n                 * @default 1\r\n                 */\r\n                pointers: 1\r\n            },\r\n            /**\r\n             * Used to check if it the recognizer receives valid input, like input.distance > 10.\r\n             * @memberof AttrRecognizer\r\n             * @param {Object} input\r\n             * @returns {Boolean} recognized\r\n             */\r\n            attrTest: function (input) {\r\n                var optionPointers = this.options.pointers;\r\n                return optionPointers === 0 || input.pointers.length === optionPointers;\r\n            },\r\n            /**\r\n             * Process the input and return the state for the recognizer\r\n             * @memberof AttrRecognizer\r\n             * @param {Object} input\r\n             * @returns {*} State\r\n             */\r\n            process: function (input) {\r\n                var state = this.state;\r\n                var eventType = input.eventType;\r\n                var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\r\n                var isValid = this.attrTest(input);\r\n                // on cancel input and we've recognized before, return STATE_CANCELLED\r\n                if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\r\n                    return state | STATE_CANCELLED;\r\n                }\r\n                else if (isRecognized || isValid) {\r\n                    if (eventType & INPUT_END) {\r\n                        return state | STATE_ENDED;\r\n                    }\r\n                    else if (!(state & STATE_BEGAN)) {\r\n                        return STATE_BEGAN;\r\n                    }\r\n                    return state | STATE_CHANGED;\r\n                }\r\n                return STATE_FAILED;\r\n            }\r\n        });\r\n        /**\r\n         * Pan\r\n         * Recognized when the pointer is down and moved in the allowed direction.\r\n         * @constructor\r\n         * @extends AttrRecognizer\r\n         */\r\n        function PanRecognizer() {\r\n            AttrRecognizer.apply(this, arguments);\r\n            this.pX = null;\r\n            this.pY = null;\r\n        }\r\n        inherit(PanRecognizer, AttrRecognizer, {\r\n            /**\r\n             * @namespace\r\n             * @memberof PanRecognizer\r\n             */\r\n            defaults: {\r\n                event: 'pan',\r\n                threshold: 10,\r\n                pointers: 1,\r\n                direction: DIRECTION_ALL\r\n            },\r\n            getTouchAction: function () {\r\n                var direction = this.options.direction;\r\n                var actions = [];\r\n                if (direction & DIRECTION_HORIZONTAL) {\r\n                    actions.push(TOUCH_ACTION_PAN_Y);\r\n                }\r\n                if (direction & DIRECTION_VERTICAL) {\r\n                    actions.push(TOUCH_ACTION_PAN_X);\r\n                }\r\n                return actions;\r\n            },\r\n            directionTest: function (input) {\r\n                var options = this.options;\r\n                var hasMoved = true;\r\n                var distance = input.distance;\r\n                var direction = input.direction;\r\n                var x = input.deltaX;\r\n                var y = input.deltaY;\r\n                // lock to axis?\r\n                if (!(direction & options.direction)) {\r\n                    if (options.direction & DIRECTION_HORIZONTAL) {\r\n                        direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\r\n                        hasMoved = x != this.pX;\r\n                        distance = Math.abs(input.deltaX);\r\n                    }\r\n                    else {\r\n                        direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\r\n                        hasMoved = y != this.pY;\r\n                        distance = Math.abs(input.deltaY);\r\n                    }\r\n                }\r\n                input.direction = direction;\r\n                return hasMoved && distance > options.threshold && direction & options.direction;\r\n            },\r\n            attrTest: function (input) {\r\n                return AttrRecognizer.prototype.attrTest.call(this, input) &&\r\n                    (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\r\n            },\r\n            emit: function (input) {\r\n                this.pX = input.deltaX;\r\n                this.pY = input.deltaY;\r\n                var direction = directionStr(input.direction);\r\n                if (direction) {\r\n                    input.additionalEvent = this.options.event + direction;\r\n                }\r\n                this._super.emit.call(this, input);\r\n            }\r\n        });\r\n        /**\r\n         * Pinch\r\n         * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\r\n         * @constructor\r\n         * @extends AttrRecognizer\r\n         */\r\n        function PinchRecognizer() {\r\n            AttrRecognizer.apply(this, arguments);\r\n        }\r\n        inherit(PinchRecognizer, AttrRecognizer, {\r\n            /**\r\n             * @namespace\r\n             * @memberof PinchRecognizer\r\n             */\r\n            defaults: {\r\n                event: 'pinch',\r\n                threshold: 0,\r\n                pointers: 2\r\n            },\r\n            getTouchAction: function () {\r\n                return [TOUCH_ACTION_NONE];\r\n            },\r\n            attrTest: function (input) {\r\n                return this._super.attrTest.call(this, input) &&\r\n                    (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\r\n            },\r\n            emit: function (input) {\r\n                if (input.scale !== 1) {\r\n                    var inOut = input.scale < 1 ? 'in' : 'out';\r\n                    input.additionalEvent = this.options.event + inOut;\r\n                }\r\n                this._super.emit.call(this, input);\r\n            }\r\n        });\r\n        /**\r\n         * Press\r\n         * Recognized when the pointer is down for x ms without any movement.\r\n         * @constructor\r\n         * @extends Recognizer\r\n         */\r\n        function PressRecognizer() {\r\n            Recognizer.apply(this, arguments);\r\n            this._timer = null;\r\n            this._input = null;\r\n        }\r\n        inherit(PressRecognizer, Recognizer, {\r\n            /**\r\n             * @namespace\r\n             * @memberof PressRecognizer\r\n             */\r\n            defaults: {\r\n                event: 'press',\r\n                pointers: 1,\r\n                time: 251,\r\n                threshold: 9 // a minimal movement is ok, but keep it low\r\n            },\r\n            getTouchAction: function () {\r\n                return [TOUCH_ACTION_AUTO];\r\n            },\r\n            process: function (input) {\r\n                var options = this.options;\r\n                var validPointers = input.pointers.length === options.pointers;\r\n                var validMovement = input.distance < options.threshold;\r\n                var validTime = input.deltaTime > options.time;\r\n                this._input = input;\r\n                // we only allow little movement\r\n                // and we've reached an end event, so a tap is possible\r\n                if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\r\n                    this.reset();\r\n                }\r\n                else if (input.eventType & INPUT_START) {\r\n                    this.reset();\r\n                    this._timer = setTimeoutContext(function () {\r\n                        this.state = STATE_RECOGNIZED;\r\n                        this.tryEmit();\r\n                    }, options.time, this);\r\n                }\r\n                else if (input.eventType & INPUT_END) {\r\n                    return STATE_RECOGNIZED;\r\n                }\r\n                return STATE_FAILED;\r\n            },\r\n            reset: function () {\r\n                clearTimeout(this._timer);\r\n            },\r\n            emit: function (input) {\r\n                if (this.state !== STATE_RECOGNIZED) {\r\n                    return;\r\n                }\r\n                if (input && (input.eventType & INPUT_END)) {\r\n                    this.manager.emit(this.options.event + 'up', input);\r\n                }\r\n                else {\r\n                    this._input.timeStamp = now();\r\n                    this.manager.emit(this.options.event, this._input);\r\n                }\r\n            }\r\n        });\r\n        /**\r\n         * Rotate\r\n         * Recognized when two or more pointer are moving in a circular motion.\r\n         * @constructor\r\n         * @extends AttrRecognizer\r\n         */\r\n        function RotateRecognizer() {\r\n            AttrRecognizer.apply(this, arguments);\r\n        }\r\n        inherit(RotateRecognizer, AttrRecognizer, {\r\n            /**\r\n             * @namespace\r\n             * @memberof RotateRecognizer\r\n             */\r\n            defaults: {\r\n                event: 'rotate',\r\n                threshold: 0,\r\n                pointers: 2\r\n            },\r\n            getTouchAction: function () {\r\n                return [TOUCH_ACTION_NONE];\r\n            },\r\n            attrTest: function (input) {\r\n                return this._super.attrTest.call(this, input) &&\r\n                    (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\r\n            }\r\n        });\r\n        /**\r\n         * Swipe\r\n         * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\r\n         * @constructor\r\n         * @extends AttrRecognizer\r\n         */\r\n        function SwipeRecognizer() {\r\n            AttrRecognizer.apply(this, arguments);\r\n        }\r\n        inherit(SwipeRecognizer, AttrRecognizer, {\r\n            /**\r\n             * @namespace\r\n             * @memberof SwipeRecognizer\r\n             */\r\n            defaults: {\r\n                event: 'swipe',\r\n                threshold: 10,\r\n                velocity: 0.3,\r\n                direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\r\n                pointers: 1\r\n            },\r\n            getTouchAction: function () {\r\n                return PanRecognizer.prototype.getTouchAction.call(this);\r\n            },\r\n            attrTest: function (input) {\r\n                var direction = this.options.direction;\r\n                var velocity;\r\n                if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\r\n                    velocity = input.overallVelocity;\r\n                }\r\n                else if (direction & DIRECTION_HORIZONTAL) {\r\n                    velocity = input.overallVelocityX;\r\n                }\r\n                else if (direction & DIRECTION_VERTICAL) {\r\n                    velocity = input.overallVelocityY;\r\n                }\r\n                return this._super.attrTest.call(this, input) &&\r\n                    direction & input.offsetDirection &&\r\n                    input.distance > this.options.threshold &&\r\n                    input.maxPointers == this.options.pointers &&\r\n                    abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\r\n            },\r\n            emit: function (input) {\r\n                var direction = directionStr(input.offsetDirection);\r\n                if (direction) {\r\n                    this.manager.emit(this.options.event + direction, input);\r\n                }\r\n                this.manager.emit(this.options.event, input);\r\n            }\r\n        });\r\n        /**\r\n         * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\r\n         * between the given interval and position. The delay option can be used to recognize multi-taps without firing\r\n         * a single tap.\r\n         *\r\n         * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\r\n         * multi-taps being recognized.\r\n         * @constructor\r\n         * @extends Recognizer\r\n         */\r\n        function TapRecognizer() {\r\n            Recognizer.apply(this, arguments);\r\n            // previous time and center,\r\n            // used for tap counting\r\n            this.pTime = false;\r\n            this.pCenter = false;\r\n            this._timer = null;\r\n            this._input = null;\r\n            this.count = 0;\r\n        }\r\n        inherit(TapRecognizer, Recognizer, {\r\n            /**\r\n             * @namespace\r\n             * @memberof PinchRecognizer\r\n             */\r\n            defaults: {\r\n                event: 'tap',\r\n                pointers: 1,\r\n                taps: 1,\r\n                interval: 300,\r\n                time: 250,\r\n                threshold: 9,\r\n                posThreshold: 10 // a multi-tap can be a bit off the initial position\r\n            },\r\n            getTouchAction: function () {\r\n                return [TOUCH_ACTION_MANIPULATION];\r\n            },\r\n            process: function (input) {\r\n                var options = this.options;\r\n                var validPointers = input.pointers.length === options.pointers;\r\n                var validMovement = input.distance < options.threshold;\r\n                var validTouchTime = input.deltaTime < options.time;\r\n                this.reset();\r\n                if ((input.eventType & INPUT_START) && (this.count === 0)) {\r\n                    return this.failTimeout();\r\n                }\r\n                // we only allow little movement\r\n                // and we've reached an end event, so a tap is possible\r\n                if (validMovement && validTouchTime && validPointers) {\r\n                    if (input.eventType != INPUT_END) {\r\n                        return this.failTimeout();\r\n                    }\r\n                    var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\r\n                    var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\r\n                    this.pTime = input.timeStamp;\r\n                    this.pCenter = input.center;\r\n                    if (!validMultiTap || !validInterval) {\r\n                        this.count = 1;\r\n                    }\r\n                    else {\r\n                        this.count += 1;\r\n                    }\r\n                    this._input = input;\r\n                    // if tap count matches we have recognized it,\r\n                    // else it has began recognizing...\r\n                    var tapCount = this.count % options.taps;\r\n                    if (tapCount === 0) {\r\n                        // no failing requirements, immediately trigger the tap event\r\n                        // or wait as long as the multitap interval to trigger\r\n                        if (!this.hasRequireFailures()) {\r\n                            return STATE_RECOGNIZED;\r\n                        }\r\n                        else {\r\n                            this._timer = setTimeoutContext(function () {\r\n                                this.state = STATE_RECOGNIZED;\r\n                                this.tryEmit();\r\n                            }, options.interval, this);\r\n                            return STATE_BEGAN;\r\n                        }\r\n                    }\r\n                }\r\n                return STATE_FAILED;\r\n            },\r\n            failTimeout: function () {\r\n                this._timer = setTimeoutContext(function () {\r\n                    this.state = STATE_FAILED;\r\n                }, this.options.interval, this);\r\n                return STATE_FAILED;\r\n            },\r\n            reset: function () {\r\n                clearTimeout(this._timer);\r\n            },\r\n            emit: function () {\r\n                if (this.state == STATE_RECOGNIZED) {\r\n                    this._input.tapCount = this.count;\r\n                    this.manager.emit(this.options.event, this._input);\r\n                }\r\n            }\r\n        });\r\n        /**\r\n         * Simple way to create a manager with a default set of recognizers.\r\n         * @param {HTMLElement} element\r\n         * @param {Object} [options]\r\n         * @constructor\r\n         */\r\n        function Hammer(element, options) {\r\n            options = options || {};\r\n            options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\r\n            return new Manager(element, options);\r\n        }\r\n        /**\r\n         * @const {string}\r\n         */\r\n        Hammer.VERSION = '2.0.7';\r\n        /**\r\n         * default settings\r\n         * @namespace\r\n         */\r\n        Hammer.defaults = {\r\n            /**\r\n             * set if DOM events are being triggered.\r\n             * But this is slower and unused by simple implementations, so disabled by default.\r\n             * @type {Boolean}\r\n             * @default false\r\n             */\r\n            domEvents: false,\r\n            /**\r\n             * The value for the touchAction property/fallback.\r\n             * When set to `compute` it will magically set the correct value based on the added recognizers.\r\n             * @type {String}\r\n             * @default compute\r\n             */\r\n            touchAction: TOUCH_ACTION_COMPUTE,\r\n            /**\r\n             * @type {Boolean}\r\n             * @default true\r\n             */\r\n            enable: true,\r\n            /**\r\n             * EXPERIMENTAL FEATURE -- can be removed/changed\r\n             * Change the parent input target element.\r\n             * If Null, then it is being set the to main element.\r\n             * @type {Null|EventTarget}\r\n             * @default null\r\n             */\r\n            inputTarget: null,\r\n            /**\r\n             * force an input class\r\n             * @type {Null|Function}\r\n             * @default null\r\n             */\r\n            inputClass: null,\r\n            /**\r\n             * Default recognizer setup when calling `Hammer()`\r\n             * When creating a new Manager these will be skipped.\r\n             * @type {Array}\r\n             */\r\n            preset: [\r\n                // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\r\n                [RotateRecognizer, { enable: false }],\r\n                [PinchRecognizer, { enable: false }, ['rotate']],\r\n                [SwipeRecognizer, { direction: DIRECTION_HORIZONTAL }],\r\n                [PanRecognizer, { direction: DIRECTION_HORIZONTAL }, ['swipe']],\r\n                [TapRecognizer],\r\n                [TapRecognizer, { event: 'doubletap', taps: 2 }, ['tap']],\r\n                [PressRecognizer]\r\n            ],\r\n            /**\r\n             * Some CSS properties can be used to improve the working of Hammer.\r\n             * Add them to this method and they will be set when creating a new Manager.\r\n             * @namespace\r\n             */\r\n            cssProps: {\r\n                /**\r\n                 * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\r\n                 * @type {String}\r\n                 * @default 'none'\r\n                 */\r\n                userSelect: 'none',\r\n                /**\r\n                 * Disable the Windows Phone grippers when pressing an element.\r\n                 * @type {String}\r\n                 * @default 'none'\r\n                 */\r\n                touchSelect: 'none',\r\n                /**\r\n                 * Disables the default callout shown when you touch and hold a touch target.\r\n                 * On iOS, when you touch and hold a touch target such as a link, Safari displays\r\n                 * a callout containing information about the link. This property allows you to disable that callout.\r\n                 * @type {String}\r\n                 * @default 'none'\r\n                 */\r\n                touchCallout: 'none',\r\n                /**\r\n                 * Specifies whether zooming is enabled. Used by IE10>\r\n                 * @type {String}\r\n                 * @default 'none'\r\n                 */\r\n                contentZooming: 'none',\r\n                /**\r\n                 * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\r\n                 * @type {String}\r\n                 * @default 'none'\r\n                 */\r\n                userDrag: 'none',\r\n                /**\r\n                 * Overrides the highlight color shown when the user taps a link or a JavaScript\r\n                 * clickable element in iOS. This property obeys the alpha value, if specified.\r\n                 * @type {String}\r\n                 * @default 'rgba(0,0,0,0)'\r\n                 */\r\n                tapHighlightColor: 'rgba(0,0,0,0)'\r\n            }\r\n        };\r\n        var STOP = 1;\r\n        var FORCED_STOP = 2;\r\n        /**\r\n         * Manager\r\n         * @param {HTMLElement} element\r\n         * @param {Object} [options]\r\n         * @constructor\r\n         */\r\n        function Manager(element, options) {\r\n            this.options = assign({}, Hammer.defaults, options || {});\r\n            this.options.inputTarget = this.options.inputTarget || element;\r\n            this.handlers = {};\r\n            this.session = {};\r\n            this.recognizers = [];\r\n            this.oldCssProps = {};\r\n            this.element = element;\r\n            this.input = createInputInstance(this);\r\n            this.touchAction = new TouchAction(this, this.options.touchAction);\r\n            toggleCssProps(this, true);\r\n            each(this.options.recognizers, function (item) {\r\n                var recognizer = this.add(new (item[0])(item[1]));\r\n                item[2] && recognizer.recognizeWith(item[2]);\r\n                item[3] && recognizer.requireFailure(item[3]);\r\n            }, this);\r\n        }\r\n        Manager.prototype = {\r\n            /**\r\n             * set options\r\n             * @param {Object} options\r\n             * @returns {Manager}\r\n             */\r\n            set: function (options) {\r\n                assign(this.options, options);\r\n                // Options that need a little more setup\r\n                if (options.touchAction) {\r\n                    this.touchAction.update();\r\n                }\r\n                if (options.inputTarget) {\r\n                    // Clean up existing event listeners and reinitialize\r\n                    this.input.destroy();\r\n                    this.input.target = options.inputTarget;\r\n                    this.input.init();\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * stop recognizing for this session.\r\n             * This session will be discarded, when a new [input]start event is fired.\r\n             * When forced, the recognizer cycle is stopped immediately.\r\n             * @param {Boolean} [force]\r\n             */\r\n            stop: function (force) {\r\n                this.session.stopped = force ? FORCED_STOP : STOP;\r\n            },\r\n            /**\r\n             * run the recognizers!\r\n             * called by the inputHandler function on every movement of the pointers (touches)\r\n             * it walks through all the recognizers and tries to detect the gesture that is being made\r\n             * @param {Object} inputData\r\n             */\r\n            recognize: function (inputData) {\r\n                var session = this.session;\r\n                if (session.stopped) {\r\n                    return;\r\n                }\r\n                // run the touch-action polyfill\r\n                this.touchAction.preventDefaults(inputData);\r\n                var recognizer;\r\n                var recognizers = this.recognizers;\r\n                // this holds the recognizer that is being recognized.\r\n                // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\r\n                // if no recognizer is detecting a thing, it is set to `null`\r\n                var curRecognizer = session.curRecognizer;\r\n                // reset when the last recognizer is recognized\r\n                // or when we're in a new session\r\n                if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\r\n                    curRecognizer = session.curRecognizer = null;\r\n                }\r\n                var i = 0;\r\n                while (i < recognizers.length) {\r\n                    recognizer = recognizers[i];\r\n                    // find out if we are allowed try to recognize the input for this one.\r\n                    // 1.   allow if the session is NOT forced stopped (see the .stop() method)\r\n                    // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\r\n                    //      that is being recognized.\r\n                    // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\r\n                    //      this can be setup with the `recognizeWith()` method on the recognizer.\r\n                    if (session.stopped !== FORCED_STOP && ( // 1\r\n                    !curRecognizer || recognizer == curRecognizer || // 2\r\n                        recognizer.canRecognizeWith(curRecognizer))) { // 3\r\n                        recognizer.recognize(inputData);\r\n                    }\r\n                    else {\r\n                        recognizer.reset();\r\n                    }\r\n                    // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\r\n                    // current active recognizer. but only if we don't already have an active recognizer\r\n                    if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\r\n                        curRecognizer = session.curRecognizer = recognizer;\r\n                    }\r\n                    i++;\r\n                }\r\n            },\r\n            /**\r\n             * get a recognizer by its event name.\r\n             * @param {Recognizer|String} recognizer\r\n             * @returns {Recognizer|Null}\r\n             */\r\n            get: function (recognizer) {\r\n                if (recognizer instanceof Recognizer) {\r\n                    return recognizer;\r\n                }\r\n                var recognizers = this.recognizers;\r\n                for (var i = 0; i < recognizers.length; i++) {\r\n                    if (recognizers[i].options.event == recognizer) {\r\n                        return recognizers[i];\r\n                    }\r\n                }\r\n                return null;\r\n            },\r\n            /**\r\n             * add a recognizer to the manager\r\n             * existing recognizers with the same event name will be removed\r\n             * @param {Recognizer} recognizer\r\n             * @returns {Recognizer|Manager}\r\n             */\r\n            add: function (recognizer) {\r\n                if (invokeArrayArg(recognizer, 'add', this)) {\r\n                    return this;\r\n                }\r\n                // remove existing\r\n                var existing = this.get(recognizer.options.event);\r\n                if (existing) {\r\n                    this.remove(existing);\r\n                }\r\n                this.recognizers.push(recognizer);\r\n                recognizer.manager = this;\r\n                this.touchAction.update();\r\n                return recognizer;\r\n            },\r\n            /**\r\n             * remove a recognizer by name or instance\r\n             * @param {Recognizer|String} recognizer\r\n             * @returns {Manager}\r\n             */\r\n            remove: function (recognizer) {\r\n                if (invokeArrayArg(recognizer, 'remove', this)) {\r\n                    return this;\r\n                }\r\n                recognizer = this.get(recognizer);\r\n                // let's make sure this recognizer exists\r\n                if (recognizer) {\r\n                    var recognizers = this.recognizers;\r\n                    var index = inArray(recognizers, recognizer);\r\n                    if (index !== -1) {\r\n                        recognizers.splice(index, 1);\r\n                        this.touchAction.update();\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * bind event\r\n             * @param {String} events\r\n             * @param {Function} handler\r\n             * @returns {EventEmitter} this\r\n             */\r\n            on: function (events, handler) {\r\n                if (events === undefined) {\r\n                    return;\r\n                }\r\n                if (handler === undefined) {\r\n                    return;\r\n                }\r\n                var handlers = this.handlers;\r\n                each(splitStr(events), function (event) {\r\n                    handlers[event] = handlers[event] || [];\r\n                    handlers[event].push(handler);\r\n                });\r\n                return this;\r\n            },\r\n            /**\r\n             * unbind event, leave emit blank to remove all handlers\r\n             * @param {String} events\r\n             * @param {Function} [handler]\r\n             * @returns {EventEmitter} this\r\n             */\r\n            off: function (events, handler) {\r\n                if (events === undefined) {\r\n                    return;\r\n                }\r\n                var handlers = this.handlers;\r\n                each(splitStr(events), function (event) {\r\n                    if (!handler) {\r\n                        delete handlers[event];\r\n                    }\r\n                    else {\r\n                        handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\r\n                    }\r\n                });\r\n                return this;\r\n            },\r\n            /**\r\n             * emit event to the listeners\r\n             * @param {String} event\r\n             * @param {Object} data\r\n             */\r\n            emit: function (event, data) {\r\n                // we also want to trigger dom events\r\n                if (this.options.domEvents) {\r\n                    triggerDomEvent(event, data);\r\n                }\r\n                // no handlers, so skip it all\r\n                var handlers = this.handlers[event] && this.handlers[event].slice();\r\n                if (!handlers || !handlers.length) {\r\n                    return;\r\n                }\r\n                data.type = event;\r\n                data.preventDefault = function () {\r\n                    data.srcEvent.preventDefault();\r\n                };\r\n                var i = 0;\r\n                while (i < handlers.length) {\r\n                    handlers[i](data);\r\n                    i++;\r\n                }\r\n            },\r\n            /**\r\n             * destroy the manager and unbinds all events\r\n             * it doesn't unbind dom events, that is the user own responsibility\r\n             */\r\n            destroy: function () {\r\n                this.element && toggleCssProps(this, false);\r\n                this.handlers = {};\r\n                this.session = {};\r\n                this.input.destroy();\r\n                this.element = null;\r\n            }\r\n        };\r\n        /**\r\n         * add/remove the css properties as defined in manager.options.cssProps\r\n         * @param {Manager} manager\r\n         * @param {Boolean} add\r\n         */\r\n        function toggleCssProps(manager, add) {\r\n            var element = manager.element;\r\n            if (!element.style) {\r\n                return;\r\n            }\r\n            var prop;\r\n            each(manager.options.cssProps, function (value, name) {\r\n                prop = prefixed(element.style, name);\r\n                if (add) {\r\n                    manager.oldCssProps[prop] = element.style[prop];\r\n                    element.style[prop] = value;\r\n                }\r\n                else {\r\n                    element.style[prop] = manager.oldCssProps[prop] || '';\r\n                }\r\n            });\r\n            if (!add) {\r\n                manager.oldCssProps = {};\r\n            }\r\n        }\r\n        /**\r\n         * trigger dom event\r\n         * @param {String} event\r\n         * @param {Object} data\r\n         */\r\n        function triggerDomEvent(event, data) {\r\n            var gestureEvent = document.createEvent('Event');\r\n            gestureEvent.initEvent(event, true, true);\r\n            gestureEvent.gesture = data;\r\n            data.target.dispatchEvent(gestureEvent);\r\n        }\r\n        assign(Hammer, {\r\n            INPUT_START: INPUT_START,\r\n            INPUT_MOVE: INPUT_MOVE,\r\n            INPUT_END: INPUT_END,\r\n            INPUT_CANCEL: INPUT_CANCEL,\r\n            STATE_POSSIBLE: STATE_POSSIBLE,\r\n            STATE_BEGAN: STATE_BEGAN,\r\n            STATE_CHANGED: STATE_CHANGED,\r\n            STATE_ENDED: STATE_ENDED,\r\n            STATE_RECOGNIZED: STATE_RECOGNIZED,\r\n            STATE_CANCELLED: STATE_CANCELLED,\r\n            STATE_FAILED: STATE_FAILED,\r\n            DIRECTION_NONE: DIRECTION_NONE,\r\n            DIRECTION_LEFT: DIRECTION_LEFT,\r\n            DIRECTION_RIGHT: DIRECTION_RIGHT,\r\n            DIRECTION_UP: DIRECTION_UP,\r\n            DIRECTION_DOWN: DIRECTION_DOWN,\r\n            DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\r\n            DIRECTION_VERTICAL: DIRECTION_VERTICAL,\r\n            DIRECTION_ALL: DIRECTION_ALL,\r\n            Manager: Manager,\r\n            Input: Input,\r\n            TouchAction: TouchAction,\r\n            TouchInput: TouchInput,\r\n            MouseInput: MouseInput,\r\n            PointerEventInput: PointerEventInput,\r\n            TouchMouseInput: TouchMouseInput,\r\n            SingleTouchInput: SingleTouchInput,\r\n            Recognizer: Recognizer,\r\n            AttrRecognizer: AttrRecognizer,\r\n            Tap: TapRecognizer,\r\n            Pan: PanRecognizer,\r\n            Swipe: SwipeRecognizer,\r\n            Pinch: PinchRecognizer,\r\n            Rotate: RotateRecognizer,\r\n            Press: PressRecognizer,\r\n            on: addEventListeners,\r\n            off: removeEventListeners,\r\n            each: each,\r\n            merge: merge,\r\n            extend: extend,\r\n            assign: assign,\r\n            inherit: inherit,\r\n            bindFn: bindFn,\r\n            prefixed: prefixed\r\n        });\r\n        // this prevents errors when Hammer is loaded in the presence of an AMD\r\n        //  style loader but by script tag, not by the loader.\r\n        var freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\r\n        freeGlobal.Hammer = Hammer;\r\n        if (typeof define === 'function' && define.amd) {\r\n            define(function () {\r\n                return Hammer;\r\n            });\r\n        }\r\n        else if (typeof module != 'undefined' && module.exports) {\r\n            module.exports = Hammer;\r\n        }\r\n        else {\r\n            window[exportName] = Hammer;\r\n        }\r\n    })(window, document, 'Hammer');\r\n}\r\n","/* models\\tools\\tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var view_1 = require(186) /* ../../core/view */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var ToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolView, _super);\r\n        function ToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(ToolView.prototype, \"plot_view\", {\r\n            get: function () {\r\n                return this.parent;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolView.prototype, \"plot_model\", {\r\n            get: function () {\r\n                return this.parent.model;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.active.change, function () {\r\n                if (_this.model.active)\r\n                    _this.activate();\r\n                else\r\n                    _this.deactivate();\r\n            });\r\n        };\r\n        // activate is triggered by toolbar ui actions\r\n        ToolView.prototype.activate = function () { };\r\n        // deactivate is triggered by toolbar ui actions\r\n        ToolView.prototype.deactivate = function () { };\r\n        return ToolView;\r\n    }(view_1.View));\r\n    exports.ToolView = ToolView;\r\n    ToolView.__name__ = \"ToolView\";\r\n    var Tool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Tool, _super);\r\n        function Tool(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Tool.init_Tool = function () {\r\n            this.prototype._known_aliases = new Map();\r\n            this.internal({\r\n                active: [p.Boolean, false],\r\n            });\r\n        };\r\n        Object.defineProperty(Tool.prototype, \"synthetic_renderers\", {\r\n            get: function () {\r\n                return [];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        // utility function to return a tool name, modified\r\n        // by the active dimensions. Used by tools that have dimensions\r\n        Tool.prototype._get_dim_tooltip = function (name, dims) {\r\n            switch (dims) {\r\n                case \"width\": return name + \" (x-axis)\";\r\n                case \"height\": return name + \" (y-axis)\";\r\n                case \"both\": return name;\r\n            }\r\n        };\r\n        // utility function to get limits along both dimensions, given\r\n        // optional dimensional constraints\r\n        Tool.prototype._get_dim_limits = function (_a, _b, frame, dims) {\r\n            var _c = tslib_1.__read(_a, 2), sx0 = _c[0], sy0 = _c[1];\r\n            var _d = tslib_1.__read(_b, 2), sx1 = _d[0], sy1 = _d[1];\r\n            var hr = frame.bbox.h_range;\r\n            var sxlim;\r\n            if (dims == 'width' || dims == 'both') {\r\n                sxlim = [array_1.min([sx0, sx1]), array_1.max([sx0, sx1])];\r\n                sxlim = [array_1.max([sxlim[0], hr.start]), array_1.min([sxlim[1], hr.end])];\r\n            }\r\n            else\r\n                sxlim = [hr.start, hr.end];\r\n            var vr = frame.bbox.v_range;\r\n            var sylim;\r\n            if (dims == 'height' || dims == 'both') {\r\n                sylim = [array_1.min([sy0, sy1]), array_1.max([sy0, sy1])];\r\n                sylim = [array_1.max([sylim[0], vr.start]), array_1.min([sylim[1], vr.end])];\r\n            }\r\n            else\r\n                sylim = [vr.start, vr.end];\r\n            return [sxlim, sylim];\r\n        };\r\n        Tool.register_alias = function (name, fn) {\r\n            this.prototype._known_aliases.set(name, fn);\r\n        };\r\n        Tool.from_string = function (name) {\r\n            var fn = this.prototype._known_aliases.get(name);\r\n            if (fn != null)\r\n                return fn();\r\n            else {\r\n                var names = tslib_1.__spread(this.prototype._known_aliases.keys());\r\n                throw new Error(\"unexpected tool name '\" + name + \"', possible tools are \" + names.join(\", \"));\r\n            }\r\n        };\r\n        return Tool;\r\n    }(model_1.Model));\r\n    exports.Tool = Tool;\r\n    Tool.__name__ = \"Tool\";\r\n    Tool.init_Tool();\r\n}\r\n","/* styles\\toolbar.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_toolbar = \"bk-toolbar\";\r\n    exports.bk_toolbar_hidden = \"bk-toolbar-hidden\";\r\n    exports.bk_toolbar_button = \"bk-toolbar-button\";\r\n    exports.bk_button_bar = \"bk-button-bar\";\r\n    exports.bk_toolbar_button_custom_action = \"bk-toolbar-button-custom-action\";\r\n}\r\n","/* styles\\toolbar.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root .bk-toolbar-hidden {\\n  visibility: hidden;\\n  opacity: 0;\\n  transition: visibility 0.3s linear, opacity 0.3s linear;\\n}\\n.bk-root .bk-toolbar,\\n.bk-root .bk-button-bar {\\n  display: flex;\\n  display: -webkit-flex;\\n  flex-wrap: nowrap;\\n  -webkit-flex-wrap: nowrap;\\n  align-items: center;\\n  -webkit-align-items: center;\\n  user-select: none;\\n  -ms-user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n}\\n.bk-root .bk-toolbar .bk-logo {\\n  flex-shrink: 0;\\n  -webkit-flex-shrink: 0;\\n}\\n.bk-root .bk-toolbar.bk-above,\\n.bk-root .bk-toolbar.bk-below {\\n  flex-direction: row;\\n  -webkit-flex-direction: row;\\n  justify-content: flex-end;\\n  -webkit-justify-content: flex-end;\\n}\\n.bk-root .bk-toolbar.bk-above .bk-button-bar,\\n.bk-root .bk-toolbar.bk-below .bk-button-bar {\\n  display: flex;\\n  display: -webkit-flex;\\n  flex-direction: row;\\n  -webkit-flex-direction: row;\\n}\\n.bk-root .bk-toolbar.bk-above .bk-logo,\\n.bk-root .bk-toolbar.bk-below .bk-logo {\\n  order: 1;\\n  -webkit-order: 1;\\n  margin-left: 5px;\\n  margin-right: 0px;\\n}\\n.bk-root .bk-toolbar.bk-left,\\n.bk-root .bk-toolbar.bk-right {\\n  flex-direction: column;\\n  -webkit-flex-direction: column;\\n  justify-content: flex-start;\\n  -webkit-justify-content: flex-start;\\n}\\n.bk-root .bk-toolbar.bk-left .bk-button-bar,\\n.bk-root .bk-toolbar.bk-right .bk-button-bar {\\n  display: flex;\\n  display: -webkit-flex;\\n  flex-direction: column;\\n  -webkit-flex-direction: column;\\n}\\n.bk-root .bk-toolbar.bk-left .bk-logo,\\n.bk-root .bk-toolbar.bk-right .bk-logo {\\n  order: 0;\\n  -webkit-order: 0;\\n  margin-bottom: 5px;\\n  margin-top: 0px;\\n}\\n.bk-root .bk-toolbar-button {\\n  width: 30px;\\n  height: 30px;\\n  cursor: pointer;\\n  background-size: 60% 60%;\\n  background-origin: border-box;\\n  background-color: transparent;\\n  background-repeat: no-repeat;\\n  background-position: center center;\\n}\\n.bk-root .bk-toolbar-button:hover {\\n  background-color: rgba(192, 192, 192, 0.15);\\n}\\n.bk-root .bk-toolbar-button:focus {\\n  outline: none;\\n}\\n.bk-root .bk-toolbar-button::-moz-focus-inner {\\n  border: 0;\\n}\\n.bk-root .bk-toolbar.bk-above .bk-toolbar-button {\\n  border-bottom: 2px solid transparent;\\n}\\n.bk-root .bk-toolbar.bk-above .bk-toolbar-button.bk-active {\\n  border-bottom-color: #26aae1;\\n}\\n.bk-root .bk-toolbar.bk-below .bk-toolbar-button {\\n  border-top: 2px solid transparent;\\n}\\n.bk-root .bk-toolbar.bk-below .bk-toolbar-button.bk-active {\\n  border-top-color: #26aae1;\\n}\\n.bk-root .bk-toolbar.bk-right .bk-toolbar-button {\\n  border-left: 2px solid transparent;\\n}\\n.bk-root .bk-toolbar.bk-right .bk-toolbar-button.bk-active {\\n  border-left-color: #26aae1;\\n}\\n.bk-root .bk-toolbar.bk-left .bk-toolbar-button {\\n  border-right: 2px solid transparent;\\n}\\n.bk-root .bk-toolbar.bk-left .bk-toolbar-button.bk-active {\\n  border-right-color: #26aae1;\\n}\\n.bk-root .bk-button-bar + .bk-button-bar:before {\\n  content: \\\" \\\";\\n  display: inline-block;\\n  background-color: lightgray;\\n}\\n.bk-root .bk-toolbar.bk-above .bk-button-bar + .bk-button-bar:before,\\n.bk-root .bk-toolbar.bk-below .bk-button-bar + .bk-button-bar:before {\\n  height: 10px;\\n  width: 1px;\\n}\\n.bk-root .bk-toolbar.bk-left .bk-button-bar + .bk-button-bar:before,\\n.bk-root .bk-toolbar.bk-right .bk-button-bar + .bk-button-bar:before {\\n  height: 1px;\\n  width: 10px;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* styles\\icons.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root .bk-tool-icon-copy-to-clipboard {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUSDBoBvcHQeQAAAG9JREFUWMNjXLhsJcNAAiaGAQYwB/xHwh/Q+ITEkfHQCwEWND4jmeb8H/JpgBwfI6cNBhLSEkqaGXRpgFRAcZoZsmlg1AGjDhh1wKgDRh0w6gCaVcf/R2wIkNqw+D9s0wADvUNiyIYA47BJAwPuAAAj/Cjd0TCN6wAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-replace-mode {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxokK3gniQAAAHpJREFUWMNjXLhsJcNAAiaGAQajDhhwB7DgEP+PxmeksvjgDwFcLmYkUh2hkBj8IcBIZXsYh1w2/I8v3sgAOM0bLYhGc8GgrwuICgldfQO88pcvXvg/aOuCUQeM5oLRuoCFCJcTbOMh5XOiW0JDNhdQS3y0IBp1ABwAAF8KGrhC1Eg6AAAAAElFTkSuQmCC\\\");\\n}\\n.bk-root .bk-tool-icon-append-mode {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxkZWD04WwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAoUlEQVRYw+1WQQ6AIAwrhO8Y/bIXEz9jIMSDr8ETCUEPQzA4pMeFLKNbu4l5WR0CDOMEALBGIzMuQIBEZQjPgP9JLjwTfBjY9sO9lZsFA9IafZng3BlIyVefgd8XQFZBAWe8jfNxwsDhir6rzoCiPiy1K+J8/FRQemv2XfAdFcQ9znU4Viqg9ta1qYJ+D1BnAIBrkgGVOrXNqUA9rbyZm/AEzFh4jEeY/soAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-intersect-mode {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxkrkOpp2wAAAPhJREFUWMPtV1EKwjAMTUavI3oawR/vtn5srJdREfzwMvHHQlcT2mpdMzFfWxiP5r2+JMN+mAiCOB72CABgR1cln4oOGocJnuMTSxWk8jMm7OggYkYXA9gPE3uyd8NXHONJ+eYMdE/NqCJmEZ5ZqlJJ4sUksKN7cYSaPoCZFWR1QI+Xm1fBACU63Cw22x0AAJxudwrffVwvZ+JmQdAHZkw0d4EpAMCw8k87pMdbnwtizQumJYv3nwV6XOA1qbUT/oQLUJgFRbsiNwFVucBIlyR3p0tdMp+XmFjfLKi1LatyAXtCRjPWBdL3Ke3VuACJKFfDr/xFN2fgAR/Go0qaLlmEAAAAAElFTkSuQmCC\\\");\\n}\\n.bk-root .bk-tool-icon-subtract-mode {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxgsF5XNOQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABFUlEQVRYw9VWUQqDMAxNpWfxQxD1MoP97G7zQ5mH2RTZYLtM9lWoMbXtxLXNX4OG9r28l4hrd0PQoqxqAACYpxH25C/nkwCHyCBwSPoS09k1T5Fo+4EiExcC4v584xGFmyIXHBLRISAVZyZufUPVa4rcrwmPDgr93ylo+2GliLRUYHK6th/o/6r7nfLpqaCsagEA8Hh9FmcNKeRmgeYDC+SCq0B6FFi8/BcV6BdR9cL3gCv3ijPKOacsn3rBEcjmaVxpfGcg4wHxzgJJnc6241Hn23DERFRAu1bNcWa3Q0uXi62XR6sCaWoSejbtdLYmU3kTEunNgj0bUbQqYG/IcMaqwPS9jftoVCAQ0ZVDJwf0zQdH4AsyW6fpQu4YegAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-clear-selection {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUGEhcuan3d3wAAAoRJREFUWMPtlzFP3EAQhd+b3TNSzg0N5TWXLkJQUUaKhIQ4fgP/g5ArrriE/I3opEgRrZtIVJR0FJQ010SioUmEZHtnUpwN9gWHGA5BJCy58MraffvmfZ41v3z9hqe8BE98vQh4cgG+Ydzmnrng8efvQJNi/uN7dznx/B3ggtfhf4ehNdUttRzBDIm/2VTiiWCG1HK0nc+3UWtq8BQIiEEakEQOADBIA4QCQmBqoHBhFNR27ikQSmGdYCdTqCpEHMDZmEKRWUBEv1gBDg5SzRJnpopILWICgWuRYflLamuzxB2BmtYqSRIka5VWU8QduXO+1hRc5YZu5GAwmP2ZJzND0IBu5HCV2+NQcAhAVRsnC2IbPzPdSjzd6to6VtfWkXi6YLaVWr7xoAwkfpb8MnC3SH7rKSMBe4M0jA/OTicFIbtCGRIyNbURhcf3ErCd6YwA1m0HgAxhw1NGQnlXBHG4kylVlSJuH0RfIP2CkL2I/qS1gIAAQiBl1QwFggIHtyxgrxK5PgyfC0JWKoT0HLh8LwoietB4TYKaIl7yeNURxB05UtMxDOcVQlZIrlRKdK6m47gjR/fuBRQihyLArtNeJD50Izcx2Eczu7iFkIug4VM3cpOr3MKDekFED0fWUHv9Zq0kpLnridjhY3XDg7NTN0jDrhO3X7O9Wg7wwyANu4mnayNg3gmbu0tCNoUyBNGv2l4rB9EXynA7082FOxAQLhU6rQVO9T2AvWowFToNCJcPORGxIRcnpjZSKATSU9NxvOQnAPArDSaQoUKnNI4iufkGtD4P3EHIcWZhz4HLceSOyrR3Izf5memPAL2cX3yhAkonysZVaWLBkd9dw1Ivv2a/AYPkK+ty1U1DAAAAAElFTkSuQmCC\\\");\\n}\\n.bk-root .bk-tool-icon-box-select {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg0kduFrowAAAIdJREFUWMPtVtEKwCAI9KL//4e9DPZ3+wP3KgOjNZouFYI4C8q7s7DtB1lGIeMoRMRinCLXg/ML3EcFqpjjloOyZxRntxpwQ8HsgHYARKFAtSFrCg3TCdMFCE1BuuALEXJLjC4qENsFVXCESZw38/kWLOkC/K4PcOc/Hj03WkoDT3EaWW9egQul6CUbq90JTwAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-box-zoom {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg82t254aQAAAkBJREFUWMPN11+E1FEUB/DPTFn2qaeIpcSwr5NlUyJiKWVXWUqvlUh/iE3RY9mUekkPPURtLKNRrFJEeuphGfUUaVliiX1aVjGs6aG7+XX9ZnZ+d2fTl2vmnHvPPfeee/79Sk+may2/UQq/q7Qu+bAJoxjHIKqB/wlfUMcMVqI9bLZ+DGIKwzlzQ2GcxCx2xwvKOUKlaHTiX8bHNspjDONHkOmJBW5jIof/FvPh/06MZOb6cRc7cGn1AKUE5cdzlM/gAr5F/O24H3xkFRfxAbVygvK+cIsspjGWo1zgjeFpxL+BvnLw7laBA4xjIFJwrgu52DoVjKdY4HBEX8dSF3JLYe1fe6UcYCii3xWQjdfuSTnAtoheKCC7GNED5Zx4L4qt61jbTLHA94geKSC7P7ZeShQ0Inoi1IJuEOeORooFXkV0FZNdZs5qvFfKAeqYy7nZ6yg//HG0MBfffh71lFrQDCW2EvEP4mt4okZUDftz9rmGZkotmMxJRtlisy+MTniAWrty3AlXw0hFM2TD89l+oNsoOJXjbIs4EpqNtTCLXbiZ0g+M4mFObj8U3vsNjoZCVcmk60ZwthpepLZkB/AsivWfOJZxtpUQHfWib7KWDwzjeegBZJSdKFiE2qJTFFTwElsi/unQ/awXrU4WGMD7nOJxBY/1EO2iYConq93CHT1GOwucjdqnRyFz+VcHmMNefMY9nNkA3SWUOoXhQviSWQ4huLIRFlirFixnQq/XaKXUgg2xQNGv4V7x/RcW+AXPB3h7H1PaiQAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-zoom-in {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgsUBmL8iQAAA2JJREFUWMO9l12IlFUYx3//MzPrLpSjkm5oN4FFIWVEl66IQlFYwtLOzozsjHdGRSCRF0sfBEXRVV0FQuQiLm5CZNBFgRRaRLVFhbJ2EdiN5gbK7toObTPn6eYdPTvNzPvOBz5Xh/ec5/n/n89zXtEHmZqeSXSuXBz/3zfdKvBWJHQrwZuRcP0El+QkbQXeBX6WZEgm6TtJk5lM5o4Lc+cV6qpf4Ga20Tm338zeATItVK9Ker6yvPzp4NDQ3+XieGsCU9MzTYumGbhz7m4ze9/MHgvBgItACrgfGAj2jgAvAYs3wlEujjc13kii8YyZrXXOfWhmo9GnFUlvOOemarVapVqtkslksmb2KjARqL62ecuWN9NxbRInzrldAXhV0uFSIfdew7G/gNLU9MwS8CwSmE3Oz88fcXG5blfpqVRq0Ix8VIAAX0XgrVL7HDCHGcCaWrV60LUBN8Dae58aQIxEqcA592I9M610JL0cpG/U9TIHJNKY3RV5z0R+7Nd4HZ0P1g/2RMBuegLAsRMnb4vT8d5vqKfMzOgtAlADrkmqGywmiMBTwfr3dC9j1Xv/r6Tvg/5/5ejxE6cO7M9faVbQZrYNOFSPmqQvVo9FKexvi5uWX58943aM7DwAfBDY+FbSCxP5sdkGx55GeguzrUEXPaSo2pFkAbiSZQCAzZJOmdkjwd6SpB/M7KykQTPbA2wDhoIzRzcNDx9MJwGNIXdJ0mEzmwbujL7dbma7gd03A7lKfnTOvf74nl0r6bonTUbujRSUCrm2d4L3/kvn3JPe+8+BDW2i9o+kT7z3kxP5sYsA6W47oE64TsR7P9tQL4vA2mh9WdIscKxUyJ0M7aR7acOGzikD65EQLEjaa2ZXzMwDFeB6qZBbbLTRE4EGeSaozNOZgYFf8qP7lmIvs354n0qlHpB0T7B9Ogl4IgJJrmjv/SiQjbrkD+BMUkfSbYATPdckrTOzkciWAXOlQu5cYgLdPEIapud9wMOR9zVJH3ViKx333mtHMJvNuoWFhZ3A+ojMcja77njXBEKwJJfTcqUyCIQ34Mf7nnh0paMnXacFuGoC1mr3AtuDfLzd8Zuyl+rfuGn4HLAD+Az4qZQf+61TAj0Noj8vX6oC35SL43u7teG6rf5+iXppwW7/JUL5D03qaFRvvUe+AAAAAElFTkSuQmCC\\\");\\n}\\n.bk-root .bk-tool-icon-zoom-out {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgsHgty9VwAAA0FJREFUWMO9l09oXFUUxn/fmXlpItppi22k7UJBRSlVkCytSAuKUloIdjKT0El3FXVXdVFKRVAQV7qQohsNwdA0UFvBhYtqUVyIVlRaogtFQVq7qSTVjA3z3nHzBq/jvPmTN/Ss7rv3nvN99/y794kByMzcfE/7picn/jenmwWeRUI3E7wdCRskuCSTdDfwBvCtJEdySV9KOhpF0e0/LF5SqKtBgbv7ZjObcvfXgShD9Zqk5+orKx8Oj4z8NT05kU1gZm6+bdK0Azezu9z9hLs/HoIBvwAF4H5gKFh7B3gBWFY3460kWve4+3oze9fdx9OpVUmvmNlMHMf1RqNBFEUldz8OHAxUX9q6bduryut+Sfvc/Wz62ZD0fK1afjND9y3gGSRwv1GMojstTxUUCoVhdyopEYDzKXjWwZ4FFnEHWBc3Goet00m7lZlZYQixKw0FZnakGZksHUnHgvCN5/KARBH37enpOVg58H13HV0Kxg/kIuD/ngSA2ZMLt3bTSZJkUzNk7k4+D0AM/CGpaXCyBw/sC8Y/qZd2GpZiuL9YLN4Sx/HpoP5/c/exQ1OVq+1yyt13SLoArEsJnMjlgfOffvK3u58Kprab2QezJxfG2iTzUzI70wRPG9jbmpmb95SNB9mpzp7/j2yVdNbdx4K565K+cvfPJQ27+x5gBzAS7Hlvy+jo4WIvoC3kWpcvS3rR3eeAO9K529x9N7C7zX6AC2b28hN7Hl1Vt44niVq13LUjmtlYkiQfA5s6eO+GpDNJkhw9NFX5ueNt2ARodyF1IHIN2JiOl4H16fiKpK+B2Vq1vBAqFAf4IJkGNiIhWJK0192vunsC1IE/a9XycquNXARa5OnApeeioaHvKuP7r3dTGsiLqFAo7JR0T7B8rhfwXARa2us4UEqr5Ffgs151i/08oTNKdIO770ptObBYq5Yv5ibQq/sl3Qc8lJ4+lnSqH1vFfp9koZRKJVtaWnqkWXqSVkqlDe+vmUDWpZMlK/X6MBDegKf3P/nYaj8ErN9fqZBYEsf3Ag8G8Xit33BaniTcvGX0IvAw8BHwTa1y4Md+CeRqRL9fudwAvpienNi7Vhu21uwflOT+L+i1X2TJP57iUvUFtHWsAAAAAElFTkSuQmCC\\\");\\n}\\n.bk-root .bk-tool-icon-help {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABltpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDpBODVDNDBDMzIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpBODVDNDBDNDIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDpBODVDNDBDMTIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpBODVDNDBDMjIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPGRjOnN1YmplY3Q+CiAgICAgICAgICAgIDxyZGY6U2VxLz4KICAgICAgICAgPC9kYzpzdWJqZWN0PgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNjoxMToyOCAxMToxMTo4MjwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAzLjY8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cphjt2AAAAT7SURBVFgJxRdbaFxFdGb2bhui227BWrsVKYgf2kJUbP9EUPuzEB803WTXJjH61Q/7Ya1+CMYKEVTsh4J/EpvY7BoabUiNiA8s1p+4KIhpoUUEselHqyS76TbZ3HuP58ydc3d2u4+IkQxczpz3mZkzZ86VYpXjvenpjZsLhUcliE4AuUuASAgptmt1EFdwPiclzIIUUwubNn17OJlcXo1p2UpodHRiux9xB1Eug1+slbzhFxGOKc851tu7/0oznYYBDA8Pt0U2tL8KQryIq2tvZqQhD0QJHRz3yqWhgYGBpXpydQMwqz6NCnurleCSADkJEfgKfOePqL80R/wV1ZaQyr1LenKfkPCkEPKeaj0xg7vxVL3duCmA0Vyuw/fl52hgBxsBED+h4Cv9z3R/zbRm8MTJTx7HQN7GQB6w5C4L4SX7M5lfLBpurjXMyvNIShiyi0l1pL8n9b7EDGPR8fHxzSsQ6XDB3618/xqo6Pk25V5MpVJllgHM1BO58RdQ612kOYZ+GXdij70TYQB05mpj+1kU5G2fB+l3PZtOf8NGx6ambnMXb3yAxg8wjSEG6OKKR9oicBQD+ZvpH2Wzj0lQpxCPG9qMv1x6hHNCsSAlHM7ZOa682vlI9tRDbvHGbD3nZAPpDoD/3JIrLpAs26UFkC3EMUA99hpfGtEBfJjNJnS2Gwnadnvl+Xw+iuc3DAJuNyIaSCHpilVldyDjjUxj3WDZIAhxhHHyRcdNuA7AAfUaXzVKODpzFiZ4/uLvh5G+m2no+C/pyIf7MqlEJB7bpqR6nXkEUfbeawuLaZsW2ISfNQ2vtaktQlGFQyIVGT0o2+2EC4iQNGwjBIN9qdQ5Qg4mk4X4rW3vCClLtowE2FOFUxKDfNmiZci3ovKKRFPh4FK9q4Zbdr+lKKJiA13TcHR2dmLBgdmQ0GAS2MZaEowY+XbAk09IvgtYZGp16SyvFhaHcIUh645t8T9DBCcnz5zZ4hZLu3DzK2QlL1QQa0Y+pHiJKPSuOGj3PmZTheM5w2TwqBxnvBZOTk7G5gvXJ5Aelms8wnJURL+olSWcfEhf6gDoUXPMq6ZlqbzWU2pE+3hi4s6F68tfIj9cBMlikr7Z0/P0b/X0yIcUXsDCF1WhtL4OROHaXk+xlkbV0Cu732Nmhc4peaWSg73pA8dq5RkvO37ldUTfXCKZv2q45MkhvG87WQEzpCCUSvV1d9GONBy3lMvgKSwrZig8gjAietWY0QriylO2jIo4yVbOSb7KB/qmI9BPKjHpSSXYauRyn92Nq9/Kcrj13x3s3v8D481glQ/0raiNYgX9njPSBOImbrHZePl+tfFmc9sH+Xaoh8NjOKSVdDMhjjYzQLy+dFceH5+IJQf9VYXX4tROg4ZFU8m31M3mfPEqUoJqCGJfvWpo2xnNfdrhC28n06SCeSzNZxlvBINGRXCtKS7EY1uV6V7HWAm38y1cXaXsMcOCvr9ySPj+af7A1U2HJXHzVNvUXVLIGyPf+jV0pf8GHoN+TLAyPkidTCi2RpPApmnR0Bd1zGRaB/B8Oj2HSw7LLbVR1MmskW8RdEWVXSJf3JbpAMgRtc4IZoxTh9qotQjCasm46M0YX9pV1VmbpvRH5OwwgdRtSg2vKaAz/1dNKVtb17Y8DCL4HVufHxMOYl1/zTgIgiYvBnFKfaNp3YjTdPz3n9Na8//X7/k/O1tdwopcZlcAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-hover {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4oVHp0SwAAAQJJREFUWMPtlsENgzAMRb8RQ5VJItFDOgaZAMaAA0iZpN3KPZSoEEHSQBCViI/G8pfNt/KAFFcPshPdoAGgZkYVVYjQAFCyFLN8tlAbXRwAxp61nc9XCkGERpZCxRDvBl0zoxp7K98GAACxxH29srNNmPsK2l7zHoHHXZDr+/9vwDfB3kgeSB5IHkgeOH0DmesJjSXi6pUvkYt5u9teVy6aWREDM0D0BRvmGRV5N6DsQkMzI64FidtI5t3AOKWaFhuioY8dlYf9TO1PREUh/9HVeAqzIThHgWZ6MuNmC1jiL1mK4pAzlKUojEmNsxcmL0J60tazWjLZFpClPbd9BMJfL95145YajN5RHQAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-crosshair {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADEUlEQVRYR81XXVIaQRCeHqug8CXmBNETaE4gniDwIgpVspxAbxC9ATkBkCpQ8gKeQDiB5AQxNyAvUlrldr7eHxyGXZi1rMJ5opbp7m++7un+htSGF204vsoMoNXrlzSpfWa1oxQfhAegCZGaEtPorHo8znIoJwCt6+td8uk7ApUQCIHTF4BNAWzImq8ap6cP68CsBdDp9i9ZqXM7ML79g/EnCWD+jgMKENKqWT+tXK0CkQqgNRjs0OxpQIqKhoMxaG6/6JeRnK7T6yO2UvVqhYSlLX+ryORfgKn9ORDFIy7ky41yGcwsr0QAQfDH5zucOswx819fs4egI9OFCcD8DjBF7VNbEX0JzdWEt3NHSSASAcCxBDqMgt/623kvyTgNgNjJIfTjk4D4FqaJR1715MjmYAmA5Bx3AwUXQL+t105KaTlcBSC26XRvhjEIoLiq1yqXpr8FAGG16/ug4IT27fxBWu7EiQuAiImJpEMKE6nYM30uAIDDttSUOPfJP7JzbjPhAiBIh9QE67vIvoOi9WJfCwDavf40ulpjbCqmUf+W753ezURuh7Dg1SqflwAEHU6pgfyBq9Y4qx0LG++2fnZ/eUzcstmdM2AWH+jfc+liWdBJfSENf8Lifi3GVwC9mybOfi5dzatWVrbbLIHNva8p5h/16gkaFiLGGxbufkoE6XguwePiXLF3XmMfCUCUAqtKXU7sumd1CowOuJEi3Pg1FBpjitIGhyvVSfvmjci6ZR+rFQfDiPVE2jFYeICQ+PoewwjC5h7CZld6DBdyu6nDSKgzOyIMhmhK5TTqXYbRorZYM46TmpKAAOrGWwSJJekSB1yqJNOzp1Gs7YJ0EDeySDIMtJbQHh6Kf/uFfNFZkolJICRmz0P8DKWZuIG2g1hpok+Mk0Qphs0h9lzMtWRoNvYLuVImUWrmPJDlBKeRBDfATGOpHkhw670QSHWGLLckmF1PTsMlYqMJpyUbiO0weiMMceqLVTcotnMCYAYJJbcuQrVgZFP0NOOJYpr62pf3AmrHfWUG4O7abefGAfwH7EXSMJafOlYAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-lasso-select {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgwlGP1qdAAABMBJREFUWMO9V1uIVVUY/r61z57ZMx4DnbzgkbQXL5iCJphlWdpIGY4jpFBkEiU9ZNaDRRcITcIwMwgxoQtU2IMXdAZfMjFvpERXYiSbysyBEXFmyuHMnLP32uvrwT2xnY5nxvHQ93Jg7fWv71/r//7L4a59TRgqJk+Z6v3a+sv0OI5nk5wu6VaSVZImAThHsgjgrKTvM5nMUWvtmf5n8HodCIKgOgzDhc65pSTrJQWDsSNpJX1ljHnDOfdT37oZLLHv+8OMMasKhcIJ59xHAJYMlhwAJGUAzJfUTHLFuFzOG5QDU6dNMyQfs9Yedc5tBpAD4IYYNQGoBrDtQnt7/b0LFrJsCHzfn2itfQfAnZLiazytA3AaQAuAiwDaEgeNpGkkswAWSBqRONB38b88z5uTKePt6iiKXkk8jq+iJC5LOmiMaTLGHLPWhmWeHr7vV0dRtATAapAzIVmSo51zyzIlbm2stesFPA6pKk0r6Ryg93y/ek8YFvPOOTg3cDSiKCoC2OP7/rEoirYm4rUkF12lAWNM1lr7lqQn0+QA8gI2jBg5cj6Aj8OwmB+KAKIoukhyp6SRJAUgl0ndPLDWPi9pJQCbuviXvu+/GIZhW1dnJ24UJFuTjCCA2ADA8sYGWmsXS3qmL94kDYAtkh4Nw7ANlQJ5U6INT1KrAYC9zQdykl7nFSj5fXp5Y8NWVBhy7mUAjqShMYdMXV2dJ2klyRwAJ8lIeuGWCRMP7N7frEqSG2OmAFhKshNAp5wrmO7u7jEAngPQm1S2z2pqapr+OPt7XEly0oxwzq2RdFmSD2AMgKKJouhhAL4kA+Cs53l7e3t7uytJHgRBreTWkXwkKVJnJD0B4GAGwIJE9R6AFufc6UqSZ7PZbD6ff5dkA4CQZEHSqwAOISmXtwGIE+F1SeqqIP8d+Xz+C0mLJYWSAODteXffczjdDQNJ0BWMCoLg5gqIbRTJNwHsljQhUb0luWPM2LE7Thw/9m/5NCT/TByxAOYWi8X6/gdWV1dnfN8fNRBxJpMZTXKdc+6IpFVJWAEgkvSJpA0X2tvtVTaSjgOYBCAEEADYSHK87/sfhmEYA9gShuEDkgzJHyWtB/B1irQ2juP7ADxkrX0wOUOpzmdpzEY590HJ7Ni1r2kSyZOSiv2+hSRjSTXp/QAukzySNJOJkmalyNIl10hqMcasdc61XDNcQRD8BnITgNp+36r6kfcNFMMlLQGwTNLMEuQGQBfJl2bdPru+HDkAZAqFQux53jZHEsC6aw0eg2gylNRBcqcx5v04ji999+03AwsWAOI4Lsy9a94WkisAnE5a5WCJYwCfA1g7LJudI2lTHMeXBm1faiQzxkyRtF3S5CTupeAB+KG2tnZFT0/P30NO2VKLzrmfAbwGMipjG5Oc0dPTc0Md05SZ5U4Q2FxChErtEYD7jTGNQ3UgM8Asv90Yc9I5LSKRlXSI5CxJa0jWSALJjKRnAewfkniT+vwf7N7fXHK9rq7O7+jo+BTA/NRrdBpjnnLOnUrvXd7YMPQXSBunneno6IhIHgYwW1JtkgmBpBkATlVMAwOk3nFJ+VSoqgCMr6gIy2FcLtdKspAedyQN/98caDt/3kpyabUmf8WvG/8A1vODTBVE/0MAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-pan {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4lKssI9gAAAOtJREFUWMPVll0KwyAMgNPgoc0JzDX2Mtgp3csKErSamGabIEUo/T6bHz0ezxdsjPJ5kvUDaROem7VJAp3gufkbtwtI+JYEOsHNEugIN0mgM1wtsVoF1MnyKtZHZBW4DVxoMh6jaAW0MTfnBAbALyUwCD6UwEB4VyJN4FXx4aqUAACgFLjzrsRP9AECAP4Cm88QtJeJrGivdeNdPpko+j1H7XzUB+6WYHmo4eDk4wj41XFMEfBZGXpK0F/eB+QhVcXslVo7i6eANjF5NYSojCN7wi05MJNgbfKiMaPZA75TBVKCrWWbnGrb3DPePZ9Bcbe/QecAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-xpan {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4X4hxZdgAAAMpJREFUWMPtlsEKwjAMhr/pwOOedINJe/PobWXCfAIvgo/nA4heOiilZQqN2yE5lpD/I38SWt3uD9aMHSuHAiiAAmwaYCqoM/0KMABtQYDW11wEaHyiEei28bWb8LGOkk5C4iEEgE11YBQWDyHGuAMD0CeS30IQPfACbC3o+Vd2bOIOWMCtoO1mC+ap3CfmoCokFs/SZd6E0ILjnzrhvFbyEJ2FIZzXyB6iZ3AkjITn8WOdSbbAoaD4NSW+tIZdQYBOPyQKoAAKkIsPv0se4A/1UC0AAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-ypan {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4anK0lywAAAMVJREFUWMPtlzEKwzAMRX/S7rlpIMXeOnaLaME36FLo8XqCdNFghGljyc4kgQi2Q/SUj0F/eL7eMMTKz6j9wNlYPGRrFcSoLH4XxQPvdQeYuPOlcLbw2dRTgqvoXEaolWM0aP4LYm0NkHYWzyFSSwlmzjw2sR6OvAXNwgEcwAEcwAEcwAEcoGYk20SiMCHlmVoCzACoojEqjHBmCeJOCOo1lgPA7Q8E8TvdjMmHuzsV3NFD4w+1t+Ai/gTx3qHuOFqdMQB8ASMwJX0IEHOeAAAAAElFTkSuQmCC\\\");\\n}\\n.bk-root .bk-tool-icon-range {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABCJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjMyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zMjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpzdWJqZWN0PgogICAgICAgICAgICA8cmRmOkJhZy8+CiAgICAgICAgIDwvZGM6c3ViamVjdD4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTgtMDQtMjhUMTQ6MDQ6NDk8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPlBpeGVsbWF0b3IgMy43PC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrsrWBhAAAD60lEQVRYCcVWv2scRxSemZ097SHbSeWkcYwwclDhzr1Q5T6QE1LghP6BGNIYJGRWNlaZItiFK1mr+JAu4HQu0kjpU8sgF3ITAsaFg0hOvt2Zyfvmdsa7a610Unx44Zgf773vvfneezPHNzrbhn3CT3xC3wPXYOC8LDzqdi8YY/gwh4BeknS/2th6dr2kf94AOp3OFyWgMyziOPbMDxV9FTtJnl1ut795Xd0/YQ0/vtYQwMT1KXWCfr2IjOWwtNehwN4xL9ykTrm6Pzl58yLn3J+mKh9mXbT3uRjGEDph+O8/TjfP5dBp7Ha7AX7O3o5nZeD/0E/OGyXntDgzA0X6qmCnrVutVlrUWV9f/3xo+pwhGDhvEPHOjoxnZjJggXmMHzBQ7NGNp9vxk61fr0HR7e/u7pZzCGHlc7qwBYYTT7tJYSx1AQzppyFPft5apta9w7SKcn0b7P7+/jCsDQ5mbc0dCmIJGDN0ehdcjsmkm6A6KUeKFOTE11PLxrC7Ukqh3ylL2fT0NAP9q6ur6rRCJJYsbKB0JsbCKMuy+xREePDyxQPCz+Crlw062QcA5wBOOt1l6vIl2WiI9F1fN6Q+BBqit6hEC4Hk08GQJMn4myjSP7RavVxgdaVUh/3U6HCMsPr9pYnJKRziHtWQ+un58+hGs6nsjQSjpuTyKGN3CX+FBwHXSiEVgjP+O8X6N12kIePES+GzTKAkGbNp8yJsGUMVzz8jPKReiyAQRimy5/cjye5RpF8utFp/+nwmT7d/NMzcFkS7yjJNGDaPURQxIQThEQy0SyF4l5WJYYhBa816vZ6dU7A6CAhbZVow/pDe0O9hVOoCi13r4BgBAvJHqMSQL2vE/iH6IAXEwgrRVUmBoRRwnwJQT98xEeVeSUyB4dJ5nwJBKdCFFGRmUCcu7rwIYypCTblaChuNBhWODrman5ub+4v0rMNBt8z6Ezh7GksJQpCbm79cMQE7QBFm/X6f0rjWnv8WRYg/QdbUpwDAEBy8vPyA8rNGzg3a8MiElwiM7dAtRqNoNptjGPM1laVxP9umWEMGLOKhKUOJDtBwDmzsw9fC/CzHr9SGuCTi2LbbKvVtmqXpCjMihBFa79Wrt5fGx9PDzc3fmu32Lf8qFliwU9emKhBSp+kRKn/hu9k1COEDbFdt/BoKWOAkuEbdVYyoIXv8+I/QK9dMHEb1Knb7MHOv8LFFOsjzCVHWOD7Ltn+MXCRF4729vWMDK+p8rLkvwjLg4N4v741m5YuwCI9CvHp1Ha8gFdBoPnQAkGsYYGxxcfEI7QQlFCTGUXwjAz4tWF+EpymOWu7fglE7qsOvrYE6g4+9/x/vhRbMdLOCFgAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-polygon-select {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEjc1OfiVKAAAAe1JREFUWMPt1r9rU1EUB/DPK0XbqphFHETo4OCiFhwF0V1KHbRSROLqon+AUMVRRFBwEbRFMBiV+mMW/wIxi5OD1kERRVKRJHUwLvfBTZrU5OWBGXLgQu7Jfe98z/ec7z0vKa88b2q1BDtRHdAPBaylm1NzsxsOjPnPNt6WSWprbft+/c3I3zOAjhT1Y4+fvcjEQJIXnVECSa+AhqIHqlHH5lWCZoe+Gk4GRgDG86j9SAUdlDBSQaZhlOkuHyoVdJmsw98D1S5fM4NYM1LCpqM+Lwa240oLgmZzpVZvzKT75VLZcqksSZKWlQeAy/iORVwIvh31xvotvK7VG3Px4aWHj3Jl4C2uYSvq+Bn8v6LLbaVWb9zsBiKLCvbiNG7gLm7jAYqbPHMJMziZ9lsKoh8GtqCEVVzHftwJn+TFHp4/hg8BSCYVfMOZoPEv2NZGdy9WCGUr9toDR3E2/H4V6nwRe/BmgN65H1ZhvMuB3XiKIyFoGefwO6ysVkUlrNUNsyAK/jli533Q+Y8cJFvAeXyMS1CI/jiMr/gUtD2LQwMGr4R3p7bY3oQHQ5b38CT4D2AXXg6YcQXHpyYnlqKsi5iOAVSwL9zd7zJ09r+Cpwq72omFMazjT9Dnibym0dTkRDUKrrgwH7MwXVyYB38BstaGDfLUTsgAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-redo {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4itK+dVQAAAaFJREFUWMPt1L1rFFEUBfDfJDaBBSslIFjbaSFp1FJQFMVCHkzhKIqdUYOCoBgErVz8rCwiTDMwBCIKipDWyip/gxAIWAmBgBC0eYFh2Gx2l9lFcA5M8e59782Zc84dWrT435Hs1siLchqn43MS0zgW22vYxjesYjVLw3YjBPKinMUTBOwf8J5fKLGYpWFjJAJ5Uc7gIW6jM6Kim3iNZ1katgYmEL/6I+YasvY7Lg6iRpIX5VF8wuEe/XV8wGf8jN6LWTiAc7iEQ7ucPZ+lYW0vAtfwvlbfwCKW9gpXDOv1mJvZHiSO91MiyYsyiQSuxtpXXM7SsDmM5nlRdrCMMz3sOJWl4Xevc/vwBzdwAl+yNNwZxfRI+GxelK9ikHcwh8d4NNR/YFRES1ZwoTYdR7I0rNf3TzVNIGbmSvR/Bx08mIgCFSVu4l2ltIWD9WxNGR+W8KOynqnZ0rwCeVG+wa0hjrxtWoF5dAfc28V8Mib/n+Nev5dnabg/zgw87aNEN/bHOwVRiRe4Wym9zNKwMKkpgIWKEt24njxiJlq0aPFv4i9ZWXMSPPhE/QAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-reset {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4gWqH8eQAABLdJREFUWMPtlktsVGUUx3/nfvfOlLQaY2IiRRMQIRpI0PjamJhoVASDvNpCpYw1vJQYSVwZwIVQF6wwRHmkAUof9ElrI6VqDAXcID4TF0IiYQMkSlTokNCZ+b7jove2t+NMH7rQBWd3v+989/zP+Z8X3Jb/WGQySvUNTQBJESkNguAVYIWqzhaRhwBU9WcR+QXoymazn6jqzUQiMQSQzWZRVdal1vwzAI2tHQBPOuc2AbWTdOyQ53n7nHNfRwee51GzqoIQMCLDpr3x/tLQ0oZzrk5Vj0/BOEBt+KYuOlBVGlrahr0Wob27t3gEjnZ2AyQzmUwHsDgP6J/AYRE553neDwDOuUdU9QngNeCumK4TkRMhZUORcYC1qysLA6iuSQHIwkWLD6lqapQsuSmwTVV3h99I7EcAR462A2xR2Ilq6ehTaejvO1774kuLNALR33eclsaGsQDe3fYegHl43vyNwEeqGl1963mm2jl7YZRTQ82qlWP4HM6ZToC5ztkW4LHQoALru7s6Di5dvlIj/e6ujrEAWoZDn8hmMjXATMACGaAVuBjXTVVXFc/AxhaA+4zvn1DV+eHxVWPMAmvtb5GeMWZyZVhI2rt7qVy2pOh9U1snwIPW2vMi4oWJuBPYHkVAVScPoKmtkzVVK6cEMsyJraHhiCqJqJUwj/JRz7TW1iSSyR2rVyylqa0Ta+24Ic8vXaAEmDFc/l5Z2A/80OibuVyuz/f9ElUdHCmvw82t5HK5h6y1PYhsz2YyGw43t2KtBZHIGwB6+j4rCkBVUdV7gXrggnPuu8h4eP+xMeZS2D0rJYZ6AdAMzAt1b4nI26p6IFZOY8pugijcKSIHVLUK0LyST4vnrVfnWr3mjmP4QTATaERkXkypRFX3isjmuHdRJEK6Ckqquopp06bdKCkp2Sgi7XnGLcg7gzeutwNIiPYc8HixqIrIOlU9ONVIhHPEd851icgSVXUiskVV94gIqoonIt0i8gfQCfwae38e6BWRXuBZz5jZ8VbaOE4EIqlZVUEQBLlkMplS1QER2RwkEnsSyaREDUzyeNsvIhvCMqkH1kdIJ2o+k8iJB1LVVRfjZ6nqqlEAIbdVQGto8Lrv+/dbawcjAL7vc+6bs+zetetfLSHxniIFGofGGsU2oC7eOCbDfZ7nQawBOSAX74SF9oEPImOq+r7nmVmxb5raukZa8UReGmNmhbMkAwwBH467EYVZe49z7kdgenj8k7V2oTHm8kgdWcvrNdVFjR8cHkYzjDH9wLjDaEwEzpwa4MypgWvAjtjxfGNMj4jMiT+M+kFsZI/Q6Pv+HGNMT8w4wI7TAyevxXVPD5z8+zD64tRXAMHVK1eaVLUyVvuDqroV2BOnJF4ZIedviUidqt4Re9s+vbx8zZXLl7PR2+nl5Tz/zNOFp2FzxzGAklw22wUsLLaSKXwf8vhosZUM6PeDYEUum70VHfpBwKsVyyfeikOP6oBNwN1TrLbfgX3A1kKLzKeff8nLLzw38T5wZDgxn1LnNk5lLRfP26/OnR2hwfNYW2Atn9RCsrf+EECyrKysDFimqhXhyjY3VLkAXBKRDqA7nU6nS0tLhyIj6XSaN9bVclv+l/IXAmkwvZc+jNUAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-save {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4UexUIzAAAAIRJREFUWMNjXLhs5X+GAQRMDAMMWJDYjGhyf7CoIQf8x2H+f0KGM9M7BBio5FNcITo408CoA0YdQM1cwEhtB/ylgqMkCJmFLwrOQguj/xTg50hmkeyARAYGhlNUCIXjDAwM0eREwTUGBgbz0Ww46oBRB4w6YNQBow4YdcCIahP+H5EhAAAH2R8hH3Rg0QAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-tap-select {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NzIwRUFGMDYyMjE2ODExOTdBNUNBNjVEQTY5OTRDRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCOTJBQzE0RDQ0RDUxMUU0QTE0ODk2NTE1M0M0MkZENCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCOTJBQzE0QzQ0RDUxMUU0QTE0ODk2NTE1M0M0MkZENCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTQ0QzIwMUM1RjIxNjgxMUE3QkFFMzhGRjc2NTI3MjgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzcyMEVBRjA2MjIxNjgxMTk3QTVDQTY1REE2OTk0Q0UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6eYZ88AAADLklEQVR42rSXf2TUYRzHv7tuGcfE6Vwb5zLSSjEj7Y9KWqfEmFZJP+yPMdKKmUrrn0iUfjhWlLFi6YfNrF+StBoTo39iYkTGco4xxxG59P7k/T2PT8/37nu3bx9ezvPj+zyf5/PreS78bGLS8SmrwE6yje3NHJsDBTALpknBz6JhH3NiYAB0gHqPOVv52wJ6QQ48BzdAttTioRJjdeA8mAHHS2xuk3p+M8M16ipVQE49Ds6CiFO9RLjGONf05QLx6wPQaBlbBlPgJVgkP0ETiIJ2sB/E1XfimjfgBOOlKDUqCGOcqBcQnw6BYW5YTo4wbvQhMmCfGRemC2rBiGXzWUb+kM/NRZ6CHWBM9ce5R61NgX6ayhSJ5EPlItlDRNkz4JbFHf06BkSzHjXxM+gDv1S/mPUo2AXWgt9UUHL/IVhS8yUV1/EbV3o4N+NaoE9Fu/i827K5pNYHnqAVJECShWmAaddpscYFFXwR7vnXBRGlnUN/L6kqKJlxnRUuDbaDBiL+vst5d4gpcpBrqk/2jIgCKVUolhntplzivHmwh4stGOPfwBWwl/2dpp8p7xjQZqFLiQJtauKkivYm+kzccpK57yXfOUe+P23JqAnVbhMFmlXntCWnxbT31am9ZJ4BJifsUmNTqt0cYhA5ypympPg7VkEKunPbVb8cIG+0kyHLJZNR7fUMooUKFHAPkfQo58VLK+RzwRDd4FdWG9mjpaAXzqkJa1R7kQttqEABWXMjOOxxVRfnhRm5URX1prk/0pQHwNcKlchZ+jdpC+hFdVqO0my9Hj5dkYgCn1Rfh/KdlNDHrJhPqlDih+IfBd6qwpOgEqYMsorJ2HtWxtagLJDn/W3KRfPOZhoeBJfZPgVeGKeKrkQBh5dLXl25Ny3pc4/1fkTdbvFqFQgbxWeYD0hXulhQ0pYiM1jG547fcbMQpVnHTZEn9W3ljsCzwHxCdVteNHIZvQa7/7cC7nV6zHIfyFP9EXjFa7YxKAVqPP4bxhhoLWW+z9JyCb6M/MREg59/RlmmXbmneIybB+YC/ay+yrffqEddDzwGvKxxDmzhc0tc80XVgblqFfgjwAAPubcGjAOl1wAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-undo {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4em8Dh0gAAAatJREFUWMPt1rFrFFEQBvDfGhACASshkL/ALpWVrSAKEQV5sIULWlgZNSgIFkGIVQ412gkBt1lYLERREFJqJRaW1oHAoZUQsDqwecWy7N3tbe6C4H2wxc682Zn3zTfvLXPM8b8j6RqYF+UCzsfnHBawGt3fMcAX7GEvS8NgKgXkRbmMxwg41TLsN0psZmnodyogL8pFPMIdLHUk7hA7eJKl4U/rAuKu3+HslFr/FZezNPSTFslX8QErDe4DvMVH/Iq9F7VwGpdwZUjsPtaSFjv/1vCBPjaxO0xcNbHejLpZrrlvJCMCT+JzA+2fcC1Lw+GE4l3CG1yIptfjCtiKoqtiJ0vD3aM0Py/K57iIMxgkQxat4EdN7e9xdRzlk+LEEPvDWvIDXJ928sYxjL36icWK+VaWhlezOIqbGFirJd/H7szugrwoX+D2BDEvszSsT5OBdfRaru/F9dPXQF6U27g/KnmWhgctxqyzBrZGMNGL/rHI0nDkKXiKexXTsywNGx0OnFbFNk3BRoWJXnw//j+ivCi32/S8CxPVNiWOAdUiJtXITIqYY45/Cn8B2D97FYW2H+IAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-wheel-pan {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgswOmEYWAAABddJREFUWMO9l09oXNcVxn/n3vc0fzRjj2RHyIZ6ERuy6CarxJtS0pQSCsXNpqGFWK5tTHAwyqIGN7VdEts1LV04BEoxdlJnUbfNogtDCYWQRZOSxtAUCoFiJY0pWJVUjeTKM9LMe+9+Xcyb8ZMychuofeHCffeee7/vnXvOuefYlV/+mv932//tb91z/Y2rvxmMHQ+4FcEfOIGN4A+UwDDwoQScc7vM7AIwB8yZ2QXn3K77Ab6OgJnVgeOSbkqaBiaACUnTkm4Cx3OZzwf+qzcRQup1zNZ9RwDe+0YI4YKZTUn6zCGSMLOfAF/03r+QZdnyfwO+ePEiI6N1nPMgMDMkETLRbd2mXG8gCbd9YiIKIUxLKoLfBN7I+80+CUlTIYTp7RMT0b3Af37p8kh5y9gZcy4Fzt+5szqSaxkzUR7dwtrKMmaGW242d0t6vrD/He/90865o865o977p4F3Ctp4frnZ3L0Z+OryUrVSrZ0z8ZxhHjhcq1XPrS43q/0flDlK9XpPA2ma7gMeyvfPx3H8TJZlH4YQWiGEVpZlH8Zx/Awwn8s8lKbpvmq1ahvB641SXNk6dhLskNA2MIBtwKHK1vGTW8bKMRbAMgyPqWeETxUM8VSSJAv52JmZA0iSZMHMThWwnipXKp8hsLLcSaIR92oU8xjSayCQXotiHotG3Ku3m+0EOQwPQCDggMf7BzQajSs5eAk4B5zLx4O1vD2eJMmAQKliscgASJMw21pansFs1swQ/DNLmUmTMNuXX+taXHTDaj5OW612R1JZ0nFJJ/J+XFJ5aWmpA6S5bHV8fHsPHFU6q3pJCjtFxtrKMuXRLUUXXxdrRLazFOtUolZlsGhmACsgnHPTwJnCnjP5HMBKLotzxsTE9rgDL0t6LoriKsDIaB31ZEK+JxQJRHFUBR2NqLw8OTkZR0OC0ntm9k1JWU7OA4vD/mZ+YfElsANmNEKi75vztzB5M8uAr+bx48me88g757PQ1U5zNg52YH7hX8l6f+4Fi3c3BqHNmkI4YQOV2MGCNu9qHPYCewfzbrC+XSGcWEcgTRKA3wFfyzdDz5d+D3x9CIcfA4eBbQS9LscskgfLnHNPAnslvS/pbZDHLLPADpx9N9fqpSIBH8cxWZY9m6bpb4Ev5fN/iKLo2TRNgdx/eo8Wk5O7Ts/N/SOSdMjHdj4kmgkIEJLJzPZKetvMTkIvFLsR25Ml2gfuF5M7vnA66sdooJYkCSGERe/9VAjhzRxoKk3Tvg3U8nulVqvx8cyNpER2umM+SdOkbc5B8JhpqBdIgTRR24h+lpKen731aRIN7thscH9Zlv0d2F8YD2TIX7F2uw3A7ZWV1a0TYz9ca8cJZHRbuRuaDfUCw9/qJHamPOKToAwHtHN6lMvlSkH2o7wDMDo6WuGuQbbn5+YAKNcb3J5fSvrhtTY+vsOPuD1IOyRhMOkj9kSx29HfXB5RUnS964NT2+3vbGbxG9auO2cDNuV6A8NTb5TitBuOpQkfYD2vwOxgmvBB2g3Hto5X42EJyVsFlztbKpXGNgqVSqUxSWcLU2+tdToa9hasLjfPYlwGa+bTi8Dl1dvNsyvNtQQL9MO2w+HM7BqwlAtPdrvdq9773WAVsIr3fne3270KTOYyS2Z2bbXdHhogKmPj7YWF+VOSXs/v/9KdO+0fVBrjbRkgB/KIDBnYu9f/7D+ZmfmRxPd6qwB8YmZXcq1MAQ/nJhTM+OnDe/a8+PGNG9lm19V/D1Qw7HXZlcRa69+U6w38l5/4ipxzf5X0CPBILjcGPJH34pVcc8692FxcXLlXRnTwwH7+9P4f8aWe3fY59LIqo1NMyQBCCHNmdgx4BegUWefjDvCKmR0LIcz9L8nokSNH+PRvH4HC3YQ098pSbevg24qlmZmNmtmjkg4D3+j/tZldkvQXSa3PW5ptlpL3ZaIN99OS9F7+IgKUgSyEkNyv2nHT7DZX0dr9rpjua2l2r4rogRAYVqZvnPsPqVnpEXjEaB4AAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-wheel-zoom {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgskILvMJQAABTtJREFUWMPdl1+MXVUVxn/fPvf2zrSFmUKnoBCUdjRoVaIxEpO2JhilMYBCtBQS2hejpg1Uo2NUrIFAoyGmtiE+GHwQGtvQJhqDmKYRBv+URFsFDNCSptH60DJTO3dKnX/33rM/H7rvsDu9M20fDMaVnGTvtb69z7fWXmvtc/TEzqd4OyXwNsv/FwFJQVI/sA14SZKRLOlPkr5TrVYXHz70quYkEEK4TtI2YAgYkrQthHDdhV5uuw+43/ZrwCbgRttgY/tjtrc0m83X3/f+D6ydnJhYcB4BSZcBA7aP2d4ELAGW2N5k+xgwkDB0IH19CGGH7R8B1aQeAf4KvAw0ku4K2zu7uru3ApdPEyiKohd4TNKjtjt5h6RHgccSNrddbvuHtm9Jqoak7xVF8WFgdavV+pSk5cCObNmXgK++85prCj3z28HKqZMnH7D9YAY4BvwujT8BvCuL1INX9vVt+dfwcCvNb7f9q2RuSfrGvWu/sL2Nf3LX7pzvj4ENSGBPVarVd4fRkZFltjdmoMGiKO4IIWwIIWwoiuIOYDDzeOPoyMiyFLkum7WJCMDztrcrTTrIRuAQZ6NcK1utL4dWq/VZoC8BhqvV6l1lWb4YYxyLMY6VZflitVq9CxhOmL60hhCKeYiV7WMKIXw9jT1HpXw3c+bOAKzOjJubzebJrKQCQLPZPClpc7bP6rMYKtjXth2OMf7tIkr11Wz8oQDc1Fb09vY+kQw1YAuwJY2nbUluAnCWpKkaFl6IQIzxivaR2SYA89sJVK/Xp2x32R6w/a30DNjuqtfrU0ArYecDCEqgLqm94T0dEm9mBG7PxkdDlkBnkhebgIezNQ8nHcCZPL9ijE1Jf/bZZoPtzbavmqNZLbf9tSxq+yoduuJ+SZ+zXSZyBXCqU+d8fvC5yRUrV+0G2j3g2hDCLyXd/+Su3QdnvP/zCuH72LWsgf2k0oHlH2c2odlkxcpVEdgr6aDtjyb8x20/J+mA7T9I6rL9SWA5dne2/GdXLl58qNJh398An85yTMA+4DOz8Dgu6Zu2dwJXJ91ltm8Gbp7Fgb+EEB4aHhpq5CEtACqVyr3AC0AlPS8k3TSmQ2YPhhBuS/1/LpmS9JTtNTHGfwBU2uUALARotVqniqJYH2Pck85pfavVaufAwnQvnHc0McaDKVptebN94QAnJB0EdtjekydyZXqjs/0ZgLIs/w6sy8bnYGYJ63pgERKC05JutT1kOwITwL9tvzlzUQUYB+Zjs2DBgu6xsbGJZHstByZbezregcBXeCsEz1bnzXt5anLyzLq71zDLxTRdVgemdx0fv2e2w5thO5DbiqL4oKT3ZKpnpyYnz+SY2ZpTAPZmJfdIrVZbNBNUq9UW2X4kU+2dcf53Aj1pj2PA7y/6m1DS00A9za9uNBq7iqJYBuoGdRdFsazRaOzKSqye1rTbaa/tlbYrqXQP2X4FIA9/J1l39xrC0v7+w5IeB8XkwS1lWe6TGJAYKMty31tfO4qSHl/a3384I3CDpI+kzC4lnRfrue6GytEjR8oQwlY73gC0L4qlth/q0M1/LYWtR48cKQF6enrC6dOnVwGLEpnxnp7en4+O1i/tszzGOCTpPmB7ahb57QUwBWyXdF+McWg6MScmuoA8OX8xOlpvXGz422XYTsB/SnpA0h7bX5R0WzI9HUL4qe2XbI+dk3xl+V7gxoztD5jRI+YK/zkEEokx2/uB/RdzIfUtueqVN04cXwF8G3iHY3z9Urw/j8ClyhsnjrcS2Vv/J/8NLxT+/zqBTkcxU/cfEkyEAu3kmjAAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-box-edit {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4QfHjM1QAAAGRJREFUWMNjXLhsJcNAAiaGAQYsDAwM/+lsJ+OgCwGsLqMB+D8o08CoA0YdMOqAUQewDFQdMBoFIyoN/B/U7YFRB7DQIc7xyo9GwbBMA4xDqhxgISH1klXbDYk0QOseEeOgDgEAIS0JQleje6IAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-freehand-draw {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADTElEQVRYCeWWTWwMYRjH/88721X1lZJIGxJxcEE4OOiBgzjXWh8TJKR76kWacOBGxdEJIdk4VChZI/phidRBHMRRIr7DSUiaSCRFRM3u88gz+o7Z6bBTdjmYZPf9eJ55fv/5zzvvDPC/H9QsA66Olo9Ga+/MdR+Ljm2/KQIULsz9FqItGdOfJKLhApLgVkiSCGODjWit7QpKWy+TNrFeXvzKVUT8NiTVaIgDcbiCFJ7GiT8WkARXAdYBK0Lbhi/CenArRNskuM7/tgNp4ArQ42dwjf3WY5gWTqC7O/NbNn2Xkfw/YwdSw/We14HP2IEZwX+y9cZ9SH0LmgFP7UCz4KkENBNeV0Cz4b8U8DfgKiDxMWwUXETqLvJpCQpXZfawbzS7t9v5pL19cHBwfja7YA0y/lyCM0+E5hv5+piZXwKYcF23as+37bTXsQVqgkL0p/34fHR7DcBtbetFsBmGDwMOJCggYG55yw7dMlk6DuC1Bdu2RsCU9TYWQq2IoGbsreZ5NzvEqfSBsIsIy8OTbcdgiRHeh4o8AFAEwDakbY2AaCCpH7V9aGhoUUUy3UyVbkPYFuYLDlUZH8XBpwxkK0Dbgxg5HcVi0ent7a0RULMIozaHBSMfF9b2SzdutFcFB2FkwMIJOG6qfteXOa1nHZ48tyefuwyfT9s6wtzZ3t7eZse2DR2I228TtHXzuWCx9g8MtK5cuHCZTH4tiHEOa4xFngvTyS8f35d6enomiCi4/foEXBkZaQuukChL4FYA2Whd7YcC4gEdW3CpdL3LtGAVCVYJywEyTpAuJKeMOKXZs/Bw947C50KhUFOG4cwz35cjWNBlHGeD53n3xsfHP/T19U1qciggar8Fa4I3PHobIotBWBtc2hSiChyZxVzM53Pv7FVH6Tp3uVy+g0r1ImD2GjIrQGYIxjnfuXTZGICS5k/bBwJoubwEFX4TLah9EXomJGMA3za+f9913Yl4TnzsDQ+vE6YTZOjHh4ngibstt1pzQwd04F0bPStEBpXqRoBeQ/AKghfBnOEKgS+Q7z91Xfdz/HGKg8Ox7z8iYD9z6wqTkZFgnvhMGP9VZ2or1XVkPM9z0mytSfVsHa1RLBZbLoyNzUnK+ydz3wC6I9x+lwbngwAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-poly-draw {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEjglo9eZgwAAAc5JREFUWMPt1zFrU1EUB/DfS4OmVTGDIChCP4BgnQXRxVHqIJUupp9AB8VBQcRBQUXIB9DWQoMRiXZzcnQSA34A7aAuHSJKkgo2LvfBrU3aJnlYkBy4vHcP557zP/9z3r33JdXa647N0kHSZd5Nn0rSxc8G3cXp85sMcnZZ8vge3osZ+l3vB8CWFA0iL14t79h210swAjACMAIwAjACkB90D/8/GchI9ve4nPwTBh5E9ws7OepzGWb9EddSn51Op9ZstadSg4VK1UKlKkmSDSMLALewiuNh/hVJq71Wxttmqz0dG88vPc+MgWP4grvYG3SLOBrZFFFrttqPe4HIDxh4GSei+98iSlusuYopXEAjBtEPA3tQwUpwluAbDm4TPJUz+BTW9l2Ce6G7L0X/Bw8D3T/7SKKIDzHg7QCcxjvcQAEtXAnrrg/RP0/DKPbqgcN4iVOR7gcO4dcQgRuoh7HSqwlP4n20m63jJu5n8MkWMYfP3UowhzdR8FU8w9iQwevBdyq3/27CMRzAE5yLuvsRLg+ZcR1nJ8YL81HWJUzGAPaFZwe/Q5MdyYDyNHgjzO90YyGHtVDncuiJchaHw8R4oREFV5qdiVmYLM3OgD9k5209/atmIAAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-point-draw {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEiERGWPELgAAA4RJREFUWMO1lr1uG1cQhb9ztdRSP7AF1QxgwKlcuZSqRC9gWUUUINWqTh5AnaFOnVPEteQmRuhCURqWsSqqc9IolREXdEvQBElxtdw7KURSFEVKu4w8wAKLxdw9Z+bMnRmZGXfZ29//II8th4WwGVNyIoQLYB5vxA9Caq04iUd9A+7ZlsNC2I7TdSd2hZXMJKlnTqp9jtl/GBaqoyQ0noFKpUIzBicYYc+DEFpxkglc4oVJa5gvDn8v1xV2irG3FM4NSVwjUKlUaMcpJhCGmSEJQ6QGD8M5WnHCd8+f3QCXpPLx8WNwv0j6Bm9FMK7FJ3WBE+R/2t7c/GBmFvSBrzRTCsyTDjXrxUgEMtpxynJYmJoBJ4VAybwVARgvL7Oik0okCodnKpVKX7P0leiVMb0VvbJT+upznK4vh0GIeQwwQStJkHQD3MwsCALTJRG7Qrdrj5m/djgYaIa0hlkRdJk26XEgC9txurccBtVW3IudBImmZuACUP+ZlIDBt9FKcubYNTcAH/X0RYM1E7utJPlqe+uZzPxUcEkiSS4sTT95n15Mud0xWC0o2PAWOCdK3KYZlFxfM+tHOcnMzNr1es18ug+cgsVjP4yBU/Ppfrter1m/+l0+zYygML1xRVHU7TSb1cSzBzoBzszsH+AMdJJ49jrNZjWKou6wBnwOzcyndBpNbuueURR1Dw8Pq35p9cc5p/Dy9Dypt7jXrtdGwQECS9NPhr6Gq6txUzNigE6zydLK6lTw12/KT4FGFEUfJX2YJNONq5tVs4ODA7sD/DnwJ/BoADZuE3tHFs12dna6d4C/BI6AlbyzI8ii2TTw12/KK33gb2cdXsNZoAntbZC2SeO4c9592k/5eNQbiwvFd1kJuFGwLJr1wSPg/SwpvyFBHufOeXcFeAlE97U/uCxOY+P3b+Bn4B3Q+L8EdJfD4a+/AbC4UBzPxiPg3wlHZquB28Cn2IuR9x3gr3uV4DbwfvSDOvi4uFA8BDZmIRHkjHpS9Ht9iRqd8+5G3g05mAGcQbsdiX5QJ428G7Kygo8XYdb1/K4NWVmjzkNge2sz84bs+ELmpDDLtqWsNZBXgvmw8CTtpWVMT7x5YWBjLARnwZfKQNYN2U2LPvrh+5nBt7c2M2/It9bArCTKR8eZN+SJ13AScPnoODeRdqNenH+wul5w2gUr2WUjMFAt8bZ/0axX/wNnv4H8vTFb1QAAAABJRU5ErkJggg==\\\");\\n}\\n.bk-root .bk-tool-icon-poly-edit {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gELFi46qJmxxAAABV9JREFUWMOdl19vFFUYxn9n9u9sCyylUIzWUoMQBAWCMdEEIt6xIRQSLIEKtvHe6AcA4yeQb7CAUNJy0daLeomJN8SEULAC2kBBapBKoLvbmdl/c14vdmY7u91tF95kknPOnHmf95znPc97Ro2OTeBbdjFDT3c32ZxVHUOE9kSMB0/m6ExuoJn1H+ur6Y+OTfD50SMN5168OgrAlyf7CfuD+z7+iDs3p8hkLUQ0iFQ/yFl5Nm/qonfHVva+s32Zw9GxCYILsZ08tpNfBhbs+1YN4OH9+7huGdECSBVfqUosbsllfmauBqiR+cCNwOr7AEo8pPHJnymXykhg5fUWjoQpl0vVvhZhbSzGoUOHqgBlt6B6uruj2Zy1E9jo0fhfeyL2x4Mnc8VErK0KUEOB64JSyptfG4RSytsJjUJVxw2lsFy3urL9nx1Qd25ObctkrVMi+jQivd7U2ZyV/3Hzpq7h3h1b/7p9Y0o8v8rwAbTWrGpSocN/FGDlbAI0Rl23PCBan0Ok158H9Ipwzi25A/Mzc9Gl/BYx/E4kYqC1NKRARNAaDCNUM27Z+Zr+ouXs0q4+LSLBHPYCFkTkC6uU39kwCdsS7WRKmaYUiAhdnZ3MPX2K4+QjQI+C94A93rMzm8ltMwyDeDzWjMZeEb2pYQDdW3vITU2jtUZ5QThOPgm8C7wP7J15OPsBsB3oWpGnVWisCeDS1VHj4vBI92+/3tgB7Ab2AruAXiDBK5oIOkhtkEYRNRuJhObrd8Dl9ewf4D5wG7hVLpen29vb5wzD+BrkbBMaL3d1dk5nsrnlFDTTFWAWmAZueWD3gCemGde2k2fw1Al1YXhEvjozoO49eczdqekrWmsc2zlrmvEKOGoW1GUjFLqSk2KpJrCLwyMCPAP+BO54QL8DM6YZX/ClsP9YnwKkXnIBP4jdIpJRpdJTCYdMwwi98KU0Hjc/dDILNyUcwTCWdOSMJ0TRmBktGRhLugu0xyLk7CIqVNm+0bGJptl1YXikD0grpY4Rjc4a8Fbgdab/6OGbAJeCUuyJnnHmZH9pbSyGuBXV8NUwlUpR1EWyixmSyTWEwqGlJ2Swbo2JXbAAfgDGgGQA9I1A9t1tlq0AxrXxn0ilUpw4fhQqYkH/sT41OTnJJwf2s6FjI5mshdYa7bqVR2uezr9MJmJt14FvGrh/O9D+e6UkM/xyCuCqEKCYnJyUTKFQrZDHjxzGshwWLQcRsOz8Hi85P23id0ug/XilAMLBmm4tPGdoaKjSH5+oAGrhwvBI9SjZTn4QSK9yenoD7dlrExPoJlXW8G8ytpNHxRKk02lGxsdRKFwXLNvx5yY94HQLGhGk4LFCYQSqaE0AwWM1eOoEbR0dKBSW7bC4mKuffxs4D/wCLKwQQPAUzIkslfp6cVomROWSolh0GjldAM4nzDi2k9/i5UAzC9aKfwNJ3zgJg9YEvN6+C7SHgKm69+sD7RfNnKTTaZRPQfAut4oFV//IS7gkcB34VlVo8kGzphlfB+DU+TfNGBpZtRastvrvARJmfMF28ge9sc2B9/PNnCilMIDwK6y8/ow/Ai4kvILTljAXvDvEvrqKSUs60KolzPjBxspavQD2tKqCAGF/Ba+xE/Wbilu54wZV8NEKF5fXzQHl/bh4hUsE0WAXSlDMYcQSrQXgCmsTseXHsJkNnjqBFGwKJaHsKlxtUHYVhbLCzr1kaOA4bcn1y1Swmb+iLpJKpVrfgdpfsiVVCYcgluwgnU7jEgJ4s5UkLFtWYyHyEg0/N1q1tmQH+YXnAMFr97Nmv3p+0QsHQRsF8qpBOE5+rb9Nkaj50tVQKjqh4OU3GNL/1/So3vuUgbAAAAAASUVORK5CYII=\\\");\\n}\\n.bk-root .bk-tool-icon-line-edit {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAG/3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarVdpknSpDfzPKXwEJBDLccQW4Rv4+E4BtXR198znCdeLLijgQUoppWg3//Pv5f6FDwefXJRcUk3J4xNrrKzoFH8+pyUf9/f+8J3C7y/j7jnBGApow/mZ5l2vGJfXCzne8fZ13OV+9yl3ozvx2DDYyXbauCDvRoHPON3frl5Imt7MuX8hH0seiz9/xwxnDMFgYMczUPD7m89J4fwp/iK+OVRbiMf6gm8K4bv/3NN1Pzjw2fvwn+93PLzccTZ6mJU+/HTHSX723/bSOyLi58n8jmiqz/798+a/tUZZax7rNCKOakzXqIcpu4eFDe483kh4Mv4E/byfiqd49R2OHzC1Od/woxLD44siDVJaNHfbqQNi5MkZLXPnsMdKyFy5gwwCHXhocXahhhEK+OhgLmCYn1hon1vtPBxWcPIgrGTCZrR5fHvc58A/fb5stJaFOZEvT18BF1t8AYYxZ99YBUJoXZ/K9i+50/jPjxEbwKBsNxcYqL6dLZrQK7bC5jl4cVga/Ql5yuNuABfhbAEYCmDAJwpCiXxmzkTwYwE/CuQcIjcwQOKEB1ByDCGBnMJ2Nt7JtNey8BmGvIAICSlkUFODgqwYJSbkW0EIqZMgUUSSZClSRVNIMUlKKSfTKc0hxyw55ZxLrllLKLFISSWXUmrRyjVAxsTVVHMttVZVHKpRsZdivWKgcQstNmmp5VZabdoRPj126annXnrtOniEAQlwI408yqhDJ02E0oxTZpp5llmnLsTaCisuWWnlVVZd+mTtsvqVtU/m/po1uqzxJsrW5RdrGM75sQWZnIhxBsY4EhjPxgACmo0zXyhGNuaMM185uBCEgVKMnEHGGBiMk1gWPbl7Mfcrbw7e/V9545+Yc0bd/4M5Z9S9Mfedtx9YG7rlNmyCLAvhUyhkQPrNhvO5AJFnrZIR0plaLL5liQYdDi5TubaIokFDkmoFEB8CzxZVxemssDqthPhUblPgW1iQU5g6XwNwyVI7bUFRm035iNziMkgWvEso2SXnsJfveR0Y4SlVF8YWC1pVQhJiQa8JwDvlMNIxAfq3F7GDObHU1LlhzlZaWwNp6BvACxAgInGXlllMGZCpEnZHrGA6GM2718xuFcz7YdUQxzEEfjdWz4GlkcwaonT0pgA6mB25grPILtnSMhuCpsGhmMU6uJbixJs4lbKHqh+wos1jW2rchyGRCIvN9MXu+KAmMSfAlIKVvi/tybhCPJZCu2Ow9pLdyo427+X2ovMBmKNu8PA0zgl3fS0PB1DWWkVYB47bkyiJHhkFPzTzCjzn4Dq1mqoIWzCmcDGsHQmQAQdEHsixK1IXESd5rLU7THVJNV8obHS8sZeN0G5Jdt5pQTVKCCbgK1hItTS8o92iEZpuWJ/oC2r/0+zTmhvFXoaMVKRe27altDtid6OvG1hENVwBnC61KKugNoemOiPCCNb3GoHAZOFuDxxPsD+07nbSPcr/o1Zmc4jARhotrA5F5ZcjP9rPk90vR8A+k028A+8+5wKlHVID542sMzMCuXktkRzUCpE+xCBZywjNcJITx0II9x5948CekBl4XaC5OCX2nCyObdwN3HwQh5DWL/BBEkhDYHn/vpXNgZkVTZs8rj+HO8JFC6qvDVhgAEQSYCDyC86rMhG1WPzAVB9ZldDWG6EzDcFiqJBDvFS8mXDv3SK2LPoguVB2kwUx7UL5KqZWiEzocsbvSjNnaYDNtcYJuA5cDcsrvHd6yCxGjqvl9+wh3Qh8Kc9py8sNW8ncU8qwxdPj1qIGfrPqlXeoS4/JLa/LwRLTCtxuSoZUT+2Su6kXW3QNacYQbId6NUKVbROpviybFSPQQL9lhB2MamEnFyB9Y+hrG1+xBg+L0QG2TZdTdlcsBdq9oHdt9Bu5/IM9+Nfh1AwrSqlboTA6Bgq568A7UfbaMrZjoQZhQphofvNw93+bN+5X7FYKBgLmRid+tSdV6c02A4R0cHwKobmoMt5+6WI9XNISFIywpf6RMd5/a91vE78FzVHIFmxud4woyJx76OMTCa4yhgN3iJO2VfRPFMv9sYTxFzU+1eWeYS52pwOoSJldZY6koib4P1O427rbeUrNZfu44hWjz5ZSuu/vKPpimoXbLkfxWSPetvxDWG5jQSaZCxA3ad+p6rlttDhK+YwwK1LHVe0drDtorc5vnQ1247g58vewDtU7L3DRwrG4dhCUDRKKOtYr2dXHtpt+33d1WZmfkAHdl7Q8ENF+CNgB+nOw29n5F7SeNo/ckbu4laLTCdqJLHjmhJbKzmrCEX7zULrhefuHmu0V/1nbP1pnb6FaT7sOxn4pvWkfrYhYtCeJ4Xv+kOXrroIs1eHWXN1/AfzaY94ms5vaAAABg2lDQ1BJQ0MgcHJvZmlsZQAAeJx9kT1Iw0AcxV/TSkUqDnYQUchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8AoVFhmhUaBzTdNtPJhJjNrYrhV4QwjAgGIMrMMuYkKQXf8XWPAF/v4jzL/9yfo1fNWwwIiMSzzDBt4g3i6U3b4LxPHGUlWSU+Jx4z6YLEj1xXPH7jXHRZ4JlRM5OeJ44Si8UOVjqYlUyNeIo4pmo65QtZj1XOW5y1So217slfGMnrK8tcpzmEJBaxBAkiFNRQRgU24rTqpFhI037Cxz/o+iVyKeQqg5FjAVVokF0/+B/87tYqTE54SZEE0PXiOB8jQHgXaNYd5/vYcZonQPAZuNLb/moDmPkkvd7WYkdA3zZwcd3WlD3gcgcYeDJkU3alIE2hUADez+ibckD/LdCz5vXW2sfpA5ChrlI3wMEhMFqk7HWfd3d39vbvmVZ/P2aecqIM1FFZAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AQdDBkQmV+argAABM5JREFUWMOtl9trHFUcxz9n9jYzm7Tb9JIWGtqUllLwVgRBQWl90S6lTaGmF6E2/4H+A4r+A0offdlWodL4kEZw9bG+iC9iKqLF0os0EBq02dtcdmdnfj7szGZ2M5vulv5g4JwzZ873+7ufUfMLi0RSa1TZNzVFrW511xBhzMxx79EyOwrbGSSzZ073zOcXFnlv5lTi3mvfzAPwwYVZ0tHiq6+/xu+/LlGtWYgEINL9oG657N41yfSRgxw9cHjDgfMLi8QVsR0X23E3gMXnkXQJ3L9zB99vI4EA0sVXqsPF93xW7y73ACVJBJwE1j8HUBIi3Sz/QNtrIzHN+yWdSdNue915IMKWXI4TJ050Adp+U+2bmkrV6tZeYAXwEJExMyf3Hi0rM5fvAvS4wPdBKRW6vZeEUiq0RIBCddddpymu0+rRbPvEzkPVmmWLBA1EdGAbYNctt7V712QwfeSgd/uXJQnPVVoEEAQBTxXpuEMELNtNNFW1WrsrQdBCRImQEeE/wBUh53v+7tW7y5n1+BZRIoJSioXvy3itdgclURSZTBrP87AdV57G1TT0d4GPgC+Bw8Ca7bifATsTgzBvjlH1qgNdICJM7tjB8soKw4jtuD+Gw3c229e1wF+P/uHPpT86rhBBRHActwAcAl4EjgIvAYcFJnlOoq5dv6EBU8AR4OUQ6AVgGjATwuC5YUdZ4A+z+1mBTUM/AKwqpZSIpPfu2VP7+/6DYEMMPE9N83lzq23ZWwxDd4GaQnmgUloqperSCpKC8HGCXz8G7NANU8CWUKPzsUDbyLPVyjYC39e0VMZx3Ccoha4b4lQqbUlnsBqNWCXpEMgKfA38DNSBcdPQr4zlMtTtFiqlulmQmJv9ks2idUZGZMjZmZMAfBUvxWHR0y5dmPV2FcbPG9ncFdPQS3nTuAJQLBZpBS1qjSqFwjipdGr9SWlsHTewm9ZmnngMKAaV9nBd+/bmdxSLRc6dnemm3+yZ06pcLvPGW2+yfWIn1ZpFEAQEvt95goCV1TXMXH4zAt4woaRF7RTAVylAUS6Xpdpsdjvk2VMnsSyHhuVEZTh+xgywBhwLfZIdKRfj7dWqPGFubq7T428ukslkaHttLNsZ9P3nwIfh+DhwS4EO9DA0zByBCE2n1fPxpQuznSCaX1js9nFp2pjbtqGhobQ0jUY9CbgALERah3IM+El1rNqTaqaph5W1uYGAFrfA5YvnyE9MoFBYtjMI/BXgQR/4pqVDZL3V9/cYrX+x7SnsXh/H5TLwW2iBQbVLNgn65CDsrSPOIJOXwmdQ4fRHrZilUqmXwNXrNzbbfxv4ArgFVBLeJ95oDEMHwHHcvvUcRqEwuBf0SSUEB9gfxsAgAkO1kcj/WvwKPaR8EhvPAUvRtdIMtR1FtBH37w8DEeChaehXw/xfAnzHcVOjEkhHrIe0Qlz7T8PuWLEd9+2w9KphgUUgQJ7JAgAPDT13NTrJyOYqIilrlEwQv/NPMTSByxfPIU37eCqtq2zWmPYDjbavaLYVdn2NuffPjqRJK2hRLBaHzoK+X7L1QE+nIFeYoFQqkTVMaTn2UOe1LWtwEJqGzqgRnS9M4Fb+3XBJGfSrFzW9dBw0icioJBzHzUXdMJM18APwWo6Kmy1O6X+V8UHDotBqogAAAABJRU5ErkJggg==\\\");\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* core\\util\\menus.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var dom_1 = require(187) /* ../dom */;\r\n    var iterator_1 = require(418) /* ./iterator */;\r\n    //import menus_css from \"styles/menus.css\"\r\n    var styles = tslib_1.__importStar(require(397) /* ../../styles/menus */);\r\n    var ContextMenu = /** @class */ (function () {\r\n        function ContextMenu(items, options) {\r\n            var _this = this;\r\n            if (options === void 0) {\r\n                options = {};\r\n            }\r\n            this.items = items;\r\n            this.options = options;\r\n            this.el = dom_1.div();\r\n            this._open = false;\r\n            this._item_click = function (i) {\r\n                var _a;\r\n                (_a = _this.items[i]) === null || _a === void 0 ? void 0 : _a.handler();\r\n                _this.hide();\r\n            };\r\n            this._on_mousedown = function (event) {\r\n                var _a, _b;\r\n                var target = event.target;\r\n                if (target instanceof Node && _this.el.contains(target))\r\n                    return;\r\n                if ((_b = (_a = _this.options).prevent_hide) === null || _b === void 0 ? void 0 : _b.call(_a, event))\r\n                    return;\r\n                _this.hide();\r\n            };\r\n            this._on_keydown = function (event) {\r\n                if (event.keyCode == dom_1.Keys.Esc)\r\n                    _this.hide();\r\n            };\r\n            this._on_blur = function () {\r\n                _this.hide();\r\n            };\r\n            dom_1.undisplay(this.el);\r\n        }\r\n        Object.defineProperty(ContextMenu.prototype, \"is_open\", {\r\n            get: function () {\r\n                return this._open;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ContextMenu.prototype, \"can_open\", {\r\n            get: function () {\r\n                return this.items.length != 0;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ContextMenu.prototype.remove = function () {\r\n            dom_1.remove(this.el);\r\n            this._unlisten();\r\n        };\r\n        ContextMenu.prototype._listen = function () {\r\n            document.addEventListener(\"mousedown\", this._on_mousedown);\r\n            document.addEventListener(\"keydown\", this._on_keydown);\r\n            window.addEventListener(\"blur\", this._on_blur);\r\n        };\r\n        ContextMenu.prototype._unlisten = function () {\r\n            document.removeEventListener(\"mousedown\", this._on_mousedown);\r\n            document.removeEventListener(\"keydown\", this._on_keydown);\r\n            window.removeEventListener(\"blur\", this._on_blur);\r\n        };\r\n        ContextMenu.prototype._position = function (at) {\r\n            var parent_el = this.el.parentElement;\r\n            if (parent_el != null) {\r\n                var parent = parent_el.getBoundingClientRect();\r\n                this.el.style.left = at.left != null ? at.left - parent.left + \"px\" : \"\";\r\n                this.el.style.top = at.top != null ? at.top - parent.top + \"px\" : \"\";\r\n                this.el.style.right = at.right != null ? parent.right - at.right + \"px\" : \"\";\r\n                this.el.style.bottom = at.bottom != null ? parent.bottom - at.bottom + \"px\" : \"\";\r\n            }\r\n        };\r\n        /*\r\n        styles(): string[] {\r\n          return [...super.styles(), menus_css]\r\n        }\r\n        */\r\n        ContextMenu.prototype.render = function () {\r\n            var e_1, _c;\r\n            var _this = this;\r\n            var _a, _b;\r\n            dom_1.empty(this.el, true);\r\n            var orientation = (_a = this.options.orientation) !== null && _a !== void 0 ? _a : \"vertical\";\r\n            dom_1.classes(this.el).add(\"bk-context-menu\", \"bk-\" + orientation);\r\n            var _loop_1 = function (item, i) {\r\n                var el = void 0;\r\n                if (item == null) {\r\n                    el = dom_1.div({ class: styles.bk_divider });\r\n                }\r\n                else if (item.if != null && !item.if()) {\r\n                    return \"continue\";\r\n                }\r\n                else {\r\n                    var icon = item.icon != null ? dom_1.div({ class: [\"bk-menu-icon\", item.icon] }) : null;\r\n                    el = dom_1.div({ class: ((_b = item.active) === null || _b === void 0 ? void 0 : _b.call(item)) ? \"bk-active\" : null, title: item.tooltip }, icon, item.label);\r\n                }\r\n                el.addEventListener(\"click\", function () { return _this._item_click(i); });\r\n                this_1.el.appendChild(el);\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var _d = tslib_1.__values(iterator_1.enumerate(this.items)), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var _f = tslib_1.__read(_e.value, 2), item = _f[0], i = _f[1];\r\n                    _loop_1(item, i);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_c = _d.return))\r\n                        _c.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        ContextMenu.prototype.show = function (at) {\r\n            if (this.items.length == 0)\r\n                return;\r\n            if (!this._open) {\r\n                this.render();\r\n                if (this.el.children.length == 0)\r\n                    return;\r\n                this._position(at !== null && at !== void 0 ? at : { left: 0, top: 0 });\r\n                dom_1.display(this.el);\r\n                this._listen();\r\n                this._open = true;\r\n            }\r\n        };\r\n        ContextMenu.prototype.hide = function () {\r\n            if (this._open) {\r\n                this._open = false;\r\n                this._unlisten();\r\n                dom_1.undisplay(this.el);\r\n            }\r\n        };\r\n        ContextMenu.prototype.toggle = function (at) {\r\n            this._open ? this.hide() : this.show(at);\r\n        };\r\n        return ContextMenu;\r\n    }());\r\n    exports.ContextMenu = ContextMenu;\r\n    ContextMenu.__name__ = \"ContextMenu\";\r\n}\r\n","/* core\\util\\iterator.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var array_1 = require(124) /* ./array */;\r\n    function enumerate(seq) {\r\n        var i, seq_1, seq_1_1, item, e_1_1;\r\n        var e_1, _a;\r\n        return tslib_1.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    i = 0;\r\n                    _b.label = 1;\r\n                case 1:\r\n                    _b.trys.push([1, 6, 7, 8]);\r\n                    seq_1 = tslib_1.__values(seq), seq_1_1 = seq_1.next();\r\n                    _b.label = 2;\r\n                case 2:\r\n                    if (!!seq_1_1.done)\r\n                        return [3 /*break*/, 5];\r\n                    item = seq_1_1.value;\r\n                    return [4 /*yield*/, [item, i++]];\r\n                case 3:\r\n                    _b.sent();\r\n                    _b.label = 4;\r\n                case 4:\r\n                    seq_1_1 = seq_1.next();\r\n                    return [3 /*break*/, 2];\r\n                case 5: return [3 /*break*/, 8];\r\n                case 6:\r\n                    e_1_1 = _b.sent();\r\n                    e_1 = { error: e_1_1 };\r\n                    return [3 /*break*/, 8];\r\n                case 7:\r\n                    try {\r\n                        if (seq_1_1 && !seq_1_1.done && (_a = seq_1.return))\r\n                            _a.call(seq_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                    return [7 /*endfinally*/];\r\n                case 8: return [2 /*return*/];\r\n            }\r\n        });\r\n    }\r\n    exports.enumerate = enumerate;\r\n    // https://docs.python.org/3.8/library/itertools.html#itertools.combinations\r\n    function combinations(seq, r) {\r\n        var n, indices, k, _a, _b, i, _c, _d, j;\r\n        var e_2, _e, e_3, _f;\r\n        return tslib_1.__generator(this, function (_g) {\r\n            switch (_g.label) {\r\n                case 0:\r\n                    n = seq.length;\r\n                    if (r > n)\r\n                        return [2 /*return*/];\r\n                    indices = array_1.range(r);\r\n                    return [4 /*yield*/, indices.map(function (i) { return seq[i]; })];\r\n                case 1:\r\n                    _g.sent();\r\n                    _g.label = 2;\r\n                case 2:\r\n                    if (!true)\r\n                        return [3 /*break*/, 4];\r\n                    k = void 0;\r\n                    try {\r\n                        for (_a = (e_2 = void 0, tslib_1.__values(array_1.reversed(array_1.range(r)))), _b = _a.next(); !_b.done; _b = _a.next()) {\r\n                            i = _b.value;\r\n                            if (indices[i] != i + n - r) {\r\n                                k = i;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_2_1) {\r\n                        e_2 = { error: e_2_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_b && !_b.done && (_e = _a.return))\r\n                                _e.call(_a);\r\n                        }\r\n                        finally {\r\n                            if (e_2)\r\n                                throw e_2.error;\r\n                        }\r\n                    }\r\n                    if (k == null)\r\n                        return [2 /*return*/];\r\n                    indices[k] += 1;\r\n                    try {\r\n                        for (_c = (e_3 = void 0, tslib_1.__values(array_1.range(k + 1, r))), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                            j = _d.value;\r\n                            indices[j] = indices[j - 1] + 1;\r\n                        }\r\n                    }\r\n                    catch (e_3_1) {\r\n                        e_3 = { error: e_3_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_d && !_d.done && (_f = _c.return))\r\n                                _f.call(_c);\r\n                        }\r\n                        finally {\r\n                            if (e_3)\r\n                                throw e_3.error;\r\n                        }\r\n                    }\r\n                    return [4 /*yield*/, indices.map(function (i) { return seq[i]; })];\r\n                case 3:\r\n                    _g.sent();\r\n                    return [3 /*break*/, 2];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }\r\n    exports.combinations = combinations;\r\n    function subsets(seq) {\r\n        var _a, _b, k, e_4_1;\r\n        var e_4, _c;\r\n        return tslib_1.__generator(this, function (_d) {\r\n            switch (_d.label) {\r\n                case 0:\r\n                    _d.trys.push([0, 5, 6, 7]);\r\n                    _a = tslib_1.__values(array_1.range(seq.length + 1)), _b = _a.next();\r\n                    _d.label = 1;\r\n                case 1:\r\n                    if (!!_b.done)\r\n                        return [3 /*break*/, 4];\r\n                    k = _b.value;\r\n                    return [5 /*yield**/, tslib_1.__values(combinations(seq, k))];\r\n                case 2:\r\n                    _d.sent();\r\n                    _d.label = 3;\r\n                case 3:\r\n                    _b = _a.next();\r\n                    return [3 /*break*/, 1];\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    e_4_1 = _d.sent();\r\n                    e_4 = { error: e_4_1 };\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    try {\r\n                        if (_b && !_b.done && (_c = _a.return))\r\n                            _c.call(_a);\r\n                    }\r\n                    finally {\r\n                        if (e_4)\r\n                            throw e_4.error;\r\n                    }\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }\r\n    exports.subsets = subsets;\r\n}\r\n","/* models\\tools\\on_off_button.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var button_tool_1 = require(411) /* ./button_tool */;\r\n    var mixins_1 = require(288) /* ../../styles/mixins */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var OnOffButtonView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(OnOffButtonView, _super);\r\n        function OnOffButtonView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        OnOffButtonView.prototype.render = function () {\r\n            _super.prototype.render.call(this);\r\n            dom_1.classes(this.el).toggle(mixins_1.bk_active, this.model.active);\r\n        };\r\n        OnOffButtonView.prototype._clicked = function () {\r\n            var active = this.model.active;\r\n            this.model.active = !active;\r\n        };\r\n        return OnOffButtonView;\r\n    }(button_tool_1.ButtonToolButtonView));\r\n    exports.OnOffButtonView = OnOffButtonView;\r\n    OnOffButtonView.__name__ = \"OnOffButtonView\";\r\n}\r\n","/* models\\tools\\toolbar_base.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var build_views_1 = require(230) /* ../../core/build_views */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var dom_view_1 = require(193) /* ../../core/dom_view */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var gesture_tool_1 = require(421) /* ./gestures/gesture_tool */;\r\n    var action_tool_1 = require(422) /* ./actions/action_tool */;\r\n    var help_tool_1 = require(423) /* ./actions/help_tool */;\r\n    var inspect_tool_1 = require(410) /* ./inspectors/inspect_tool */;\r\n    var toolbar_1 = require(414) /* ../../styles/toolbar */;\r\n    var logo_1 = require(425) /* ../../styles/logo */;\r\n    var mixins_1 = require(288) /* ../../styles/mixins */;\r\n    var toolbar_css_1 = tslib_1.__importDefault(require(415) /* ../../styles/toolbar.css */);\r\n    var logo_css_1 = tslib_1.__importDefault(require(426) /* ../../styles/logo.css */);\r\n    var ToolbarViewModel = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolbarViewModel, _super);\r\n        function ToolbarViewModel(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ToolbarViewModel.init_ToolbarViewModel = function () {\r\n            this.define({\r\n                _visible: [p.Any, null],\r\n                autohide: [p.Boolean, false],\r\n            });\r\n        };\r\n        Object.defineProperty(ToolbarViewModel.prototype, \"visible\", {\r\n            get: function () {\r\n                return (!this.autohide) ? true : (this._visible == null) ? false : this._visible;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ToolbarViewModel;\r\n    }(model_1.Model));\r\n    exports.ToolbarViewModel = ToolbarViewModel;\r\n    ToolbarViewModel.__name__ = \"ToolbarViewModel\";\r\n    ToolbarViewModel.init_ToolbarViewModel();\r\n    var ToolbarBaseView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolbarBaseView, _super);\r\n        function ToolbarBaseView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ToolbarBaseView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._tool_button_views = new Map();\r\n            this._toolbar_view_model = new ToolbarViewModel({ autohide: this.model.autohide });\r\n        };\r\n        ToolbarBaseView.prototype.lazy_initialize = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this._build_tool_button_views()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ToolbarBaseView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.tools.change, function () {\r\n                return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                    return tslib_1.__generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0: return [4 /*yield*/, this._build_tool_button_views()];\r\n                            case 1:\r\n                                _a.sent();\r\n                                this.render();\r\n                                return [2 /*return*/];\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n            this.connect(this.model.properties.autohide.change, function () {\r\n                _this._toolbar_view_model.autohide = _this.model.autohide;\r\n                _this._on_visible_change();\r\n            });\r\n            this.connect(this._toolbar_view_model.properties._visible.change, function () { return _this._on_visible_change(); });\r\n        };\r\n        ToolbarBaseView.prototype.styles = function () {\r\n            return tslib_1.__spread(_super.prototype.styles.call(this), [toolbar_css_1.default, logo_css_1.default]);\r\n        };\r\n        ToolbarBaseView.prototype.remove = function () {\r\n            build_views_1.remove_views(this._tool_button_views);\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        ToolbarBaseView.prototype._build_tool_button_views = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var tools;\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            tools = (this.model._proxied_tools != null ? this.model._proxied_tools : this.model.tools);\r\n                            return [4 /*yield*/, build_views_1.build_views(this._tool_button_views, tools, { parent: this }, function (tool) { return tool.button_view; })];\r\n                        case 1:\r\n                            _a.sent(); // XXX: no ButtonToolButton model\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ToolbarBaseView.prototype.set_visibility = function (visible) {\r\n            if (visible != this._toolbar_view_model._visible) {\r\n                this._toolbar_view_model._visible = visible;\r\n            }\r\n        };\r\n        ToolbarBaseView.prototype._on_visible_change = function () {\r\n            var visible = this._toolbar_view_model.visible;\r\n            var hidden_class = toolbar_1.bk_toolbar_hidden;\r\n            if (this.el.classList.contains(hidden_class) && visible) {\r\n                this.el.classList.remove(hidden_class);\r\n            }\r\n            else if (!visible) {\r\n                this.el.classList.add(hidden_class);\r\n            }\r\n        };\r\n        ToolbarBaseView.prototype.render = function () {\r\n            var e_1, _a, e_2, _b, e_3, _c;\r\n            var _this = this;\r\n            dom_1.empty(this.el);\r\n            this.el.classList.add(toolbar_1.bk_toolbar);\r\n            this.el.classList.add(mixins_1.bk_side(this.model.toolbar_location));\r\n            this._toolbar_view_model.autohide = this.model.autohide;\r\n            this._on_visible_change();\r\n            if (this.model.logo != null) {\r\n                var gray = this.model.logo === \"grey\" ? logo_1.bk_grey : null;\r\n                var logo = dom_1.a({ href: \"https://bokeh.org/\", target: \"_blank\", class: [logo_1.bk_logo, logo_1.bk_logo_small, gray] });\r\n                this.el.appendChild(logo);\r\n            }\r\n            try {\r\n                for (var _d = tslib_1.__values(this._tool_button_views), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var _f = tslib_1.__read(_e.value, 2), button_view = _f[1];\r\n                    button_view.render();\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_a = _d.return))\r\n                        _a.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            var bars = [];\r\n            var el = function (tool) {\r\n                return _this._tool_button_views.get(tool).el;\r\n            };\r\n            var gestures = this.model.gestures;\r\n            try {\r\n                for (var _g = tslib_1.__values(object_1.values(gestures)), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                    var gesture = _h.value;\r\n                    bars.push(gesture.tools.map(el));\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_h && !_h.done && (_b = _g.return))\r\n                        _b.call(_g);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            bars.push(this.model.actions.map(el));\r\n            bars.push(this.model.inspectors.filter(function (tool) { return tool.toggleable; }).map(el));\r\n            try {\r\n                for (var bars_1 = tslib_1.__values(bars), bars_1_1 = bars_1.next(); !bars_1_1.done; bars_1_1 = bars_1.next()) {\r\n                    var bar = bars_1_1.value;\r\n                    if (bar.length !== 0) {\r\n                        var el_1 = dom_1.div({ class: toolbar_1.bk_button_bar }, bar);\r\n                        this.el.appendChild(el_1);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (bars_1_1 && !bars_1_1.done && (_c = bars_1.return))\r\n                        _c.call(bars_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n        };\r\n        ToolbarBaseView.prototype.update_layout = function () { };\r\n        ToolbarBaseView.prototype.update_position = function () { };\r\n        ToolbarBaseView.prototype.after_layout = function () {\r\n            this._has_finished = true;\r\n        };\r\n        return ToolbarBaseView;\r\n    }(dom_view_1.DOMView));\r\n    exports.ToolbarBaseView = ToolbarBaseView;\r\n    ToolbarBaseView.__name__ = \"ToolbarBaseView\";\r\n    function createGestureMap() {\r\n        return {\r\n            pan: { tools: [], active: null },\r\n            scroll: { tools: [], active: null },\r\n            pinch: { tools: [], active: null },\r\n            tap: { tools: [], active: null },\r\n            doubletap: { tools: [], active: null },\r\n            press: { tools: [], active: null },\r\n            pressup: { tools: [], active: null },\r\n            rotate: { tools: [], active: null },\r\n            move: { tools: [], active: null },\r\n            multi: { tools: [], active: null },\r\n        };\r\n    }\r\n    var ToolbarBase = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolbarBase, _super);\r\n        function ToolbarBase(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ToolbarBase.init_ToolbarBase = function () {\r\n            this.prototype.default_view = ToolbarBaseView;\r\n            this.define({\r\n                tools: [p.Array, []],\r\n                logo: [p.Logo, 'normal'],\r\n                autohide: [p.Boolean, false],\r\n            });\r\n            this.internal({\r\n                gestures: [p.Any, createGestureMap],\r\n                actions: [p.Array, []],\r\n                inspectors: [p.Array, []],\r\n                help: [p.Array, []],\r\n                toolbar_location: [p.Location, 'right'],\r\n            });\r\n        };\r\n        ToolbarBase.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._init_tools();\r\n        };\r\n        ToolbarBase.prototype._init_tools = function () {\r\n            var e_4, _a, e_5, _b, e_6, _c;\r\n            var _this = this;\r\n            // The only purpose of this function is to avoid unnecessary property churning.\r\n            var tools_changed = function (old_tools, new_tools) {\r\n                if (old_tools.length != new_tools.length) {\r\n                    return true;\r\n                }\r\n                var new_ids = new Set(new_tools.map(function (t) { return t.id; }));\r\n                return array_1.some(old_tools, function (t) { return !new_ids.has(t.id); });\r\n            };\r\n            var new_inspectors = this.tools.filter(function (t) { return t instanceof inspect_tool_1.InspectTool; });\r\n            if (tools_changed(this.inspectors, new_inspectors)) {\r\n                this.inspectors = new_inspectors;\r\n            }\r\n            var new_help = this.tools.filter(function (t) { return t instanceof help_tool_1.HelpTool; });\r\n            if (tools_changed(this.help, new_help)) {\r\n                this.help = new_help;\r\n            }\r\n            var new_actions = this.tools.filter(function (t) { return t instanceof action_tool_1.ActionTool; });\r\n            if (tools_changed(this.actions, new_actions)) {\r\n                this.actions = new_actions;\r\n            }\r\n            var check_event_type = function (et, tool) {\r\n                if (!(et in _this.gestures)) {\r\n                    logging_1.logger.warn(\"Toolbar: unknown event type '\" + et + \"' for tool: \" + tool);\r\n                }\r\n            };\r\n            var new_gestures = createGestureMap();\r\n            try {\r\n                for (var _d = tslib_1.__values(this.tools), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var tool = _e.value;\r\n                    if (tool instanceof gesture_tool_1.GestureTool && tool.event_type) {\r\n                        if (types_1.isString(tool.event_type)) {\r\n                            new_gestures[tool.event_type].tools.push(tool);\r\n                            check_event_type(tool.event_type, tool);\r\n                        }\r\n                        else {\r\n                            new_gestures.multi.tools.push(tool);\r\n                            try {\r\n                                for (var _f = (e_5 = void 0, tslib_1.__values(tool.event_type)), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                                    var et = _g.value;\r\n                                    check_event_type(et, tool);\r\n                                }\r\n                            }\r\n                            catch (e_5_1) {\r\n                                e_5 = { error: e_5_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (_g && !_g.done && (_b = _f.return))\r\n                                        _b.call(_f);\r\n                                }\r\n                                finally {\r\n                                    if (e_5)\r\n                                        throw e_5.error;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_a = _d.return))\r\n                        _a.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            var _loop_1 = function (et) {\r\n                var gm = this_1.gestures[et];\r\n                if (tools_changed(gm.tools, new_gestures[et].tools)) {\r\n                    gm.tools = new_gestures[et].tools;\r\n                }\r\n                if (gm.active && array_1.every(gm.tools, function (t) { return t.id != gm.active.id; })) {\r\n                    gm.active = null;\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var _h = tslib_1.__values(Object.keys(new_gestures)), _j = _h.next(); !_j.done; _j = _h.next()) {\r\n                    var et = _j.value;\r\n                    _loop_1(et);\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_j && !_j.done && (_c = _h.return))\r\n                        _c.call(_h);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n        };\r\n        Object.defineProperty(ToolbarBase.prototype, \"horizontal\", {\r\n            get: function () {\r\n                return this.toolbar_location === \"above\" || this.toolbar_location === \"below\";\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolbarBase.prototype, \"vertical\", {\r\n            get: function () {\r\n                return this.toolbar_location === \"left\" || this.toolbar_location === \"right\";\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ToolbarBase.prototype._active_change = function (tool) {\r\n            var e_7, _a;\r\n            var event_type = tool.event_type;\r\n            if (event_type == null)\r\n                return;\r\n            var event_types = types_1.isString(event_type) ? [event_type] : event_type;\r\n            try {\r\n                for (var event_types_1 = tslib_1.__values(event_types), event_types_1_1 = event_types_1.next(); !event_types_1_1.done; event_types_1_1 = event_types_1.next()) {\r\n                    var et = event_types_1_1.value;\r\n                    if (tool.active) {\r\n                        var currently_active_tool = this.gestures[et].active;\r\n                        if (currently_active_tool != null && tool != currently_active_tool) {\r\n                            logging_1.logger.debug(\"Toolbar: deactivating tool: \" + currently_active_tool + \" for event type '\" + et + \"'\");\r\n                            currently_active_tool.active = false;\r\n                        }\r\n                        this.gestures[et].active = tool;\r\n                        logging_1.logger.debug(\"Toolbar: activating tool: \" + tool + \" for event type '\" + et + \"'\");\r\n                    }\r\n                    else\r\n                        this.gestures[et].active = null;\r\n                }\r\n            }\r\n            catch (e_7_1) {\r\n                e_7 = { error: e_7_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (event_types_1_1 && !event_types_1_1.done && (_a = event_types_1.return))\r\n                        _a.call(event_types_1);\r\n                }\r\n                finally {\r\n                    if (e_7)\r\n                        throw e_7.error;\r\n                }\r\n            }\r\n        };\r\n        return ToolbarBase;\r\n    }(model_1.Model));\r\n    exports.ToolbarBase = ToolbarBase;\r\n    ToolbarBase.__name__ = \"ToolbarBase\";\r\n    ToolbarBase.init_ToolbarBase();\r\n}\r\n","/* models\\tools\\gestures\\gesture_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var button_tool_1 = require(411) /* ../button_tool */;\r\n    var on_off_button_1 = require(419) /* ../on_off_button */;\r\n    var GestureToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GestureToolView, _super);\r\n        function GestureToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return GestureToolView;\r\n    }(button_tool_1.ButtonToolView));\r\n    exports.GestureToolView = GestureToolView;\r\n    GestureToolView.__name__ = \"GestureToolView\";\r\n    var GestureTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GestureTool, _super);\r\n        function GestureTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.button_view = on_off_button_1.OnOffButtonView;\r\n            return _this;\r\n        }\r\n        return GestureTool;\r\n    }(button_tool_1.ButtonTool));\r\n    exports.GestureTool = GestureTool;\r\n    GestureTool.__name__ = \"GestureTool\";\r\n}\r\n","/* models\\tools\\actions\\action_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var button_tool_1 = require(411) /* ../button_tool */;\r\n    var signaling_1 = require(130) /* ../../../core/signaling */;\r\n    var ActionToolButtonView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ActionToolButtonView, _super);\r\n        function ActionToolButtonView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ActionToolButtonView.prototype._clicked = function () {\r\n            this.model.do.emit(undefined);\r\n        };\r\n        return ActionToolButtonView;\r\n    }(button_tool_1.ButtonToolButtonView));\r\n    exports.ActionToolButtonView = ActionToolButtonView;\r\n    ActionToolButtonView.__name__ = \"ActionToolButtonView\";\r\n    var ActionToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ActionToolView, _super);\r\n        function ActionToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ActionToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.do, function (arg) { return _this.doit(arg); });\r\n        };\r\n        return ActionToolView;\r\n    }(button_tool_1.ButtonToolView));\r\n    exports.ActionToolView = ActionToolView;\r\n    ActionToolView.__name__ = \"ActionToolView\";\r\n    var ActionTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ActionTool, _super);\r\n        function ActionTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.button_view = ActionToolButtonView;\r\n            _this.do = new signaling_1.Signal(_this, \"do\");\r\n            return _this;\r\n        }\r\n        return ActionTool;\r\n    }(button_tool_1.ButtonTool));\r\n    exports.ActionTool = ActionTool;\r\n    ActionTool.__name__ = \"ActionTool\";\r\n}\r\n","/* models\\tools\\actions\\help_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var action_tool_1 = require(422) /* ./action_tool */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var HelpToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HelpToolView, _super);\r\n        function HelpToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        HelpToolView.prototype.doit = function () {\r\n            window.open(this.model.redirect);\r\n        };\r\n        return HelpToolView;\r\n    }(action_tool_1.ActionToolView));\r\n    exports.HelpToolView = HelpToolView;\r\n    HelpToolView.__name__ = \"HelpToolView\";\r\n    var HelpTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HelpTool, _super);\r\n        function HelpTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Help\";\r\n            _this.icon = icons_1.bk_tool_icon_help;\r\n            return _this;\r\n        }\r\n        HelpTool.init_HelpTool = function () {\r\n            this.prototype.default_view = HelpToolView;\r\n            this.define({\r\n                help_tooltip: [p.String, 'Click the question mark to learn more about Bokeh plot tools.'],\r\n                redirect: [p.String, 'https://docs.bokeh.org/en/latest/docs/user_guide/tools.html'],\r\n            });\r\n            this.register_alias(\"help\", function () { return new HelpTool(); });\r\n        };\r\n        Object.defineProperty(HelpTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this.help_tooltip;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return HelpTool;\r\n    }(action_tool_1.ActionTool));\r\n    exports.HelpTool = HelpTool;\r\n    HelpTool.__name__ = \"HelpTool\";\r\n    HelpTool.init_HelpTool();\r\n}\r\n","/* styles\\icons.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_tool_icon_box_select = \"bk-tool-icon-box-select\";\r\n    exports.bk_tool_icon_box_zoom = \"bk-tool-icon-box-zoom\";\r\n    exports.bk_tool_icon_zoom_in = \"bk-tool-icon-zoom-in\";\r\n    exports.bk_tool_icon_zoom_out = \"bk-tool-icon-zoom-out\";\r\n    exports.bk_tool_icon_help = \"bk-tool-icon-help\";\r\n    exports.bk_tool_icon_hover = \"bk-tool-icon-hover\";\r\n    exports.bk_tool_icon_crosshair = \"bk-tool-icon-crosshair\";\r\n    exports.bk_tool_icon_lasso_select = \"bk-tool-icon-lasso-select\";\r\n    exports.bk_tool_icon_pan = \"bk-tool-icon-pan\";\r\n    exports.bk_tool_icon_xpan = \"bk-tool-icon-xpan\";\r\n    exports.bk_tool_icon_ypan = \"bk-tool-icon-ypan\";\r\n    exports.bk_tool_icon_range = \"bk-tool-icon-range\";\r\n    exports.bk_tool_icon_polygon_select = \"bk-tool-icon-polygon-select\";\r\n    exports.bk_tool_icon_redo = \"bk-tool-icon-redo\";\r\n    exports.bk_tool_icon_reset = \"bk-tool-icon-reset\";\r\n    exports.bk_tool_icon_save = \"bk-tool-icon-save\";\r\n    exports.bk_tool_icon_tap_select = \"bk-tool-icon-tap-select\";\r\n    exports.bk_tool_icon_undo = \"bk-tool-icon-undo\";\r\n    exports.bk_tool_icon_wheel_pan = \"bk-tool-icon-wheel-pan\";\r\n    exports.bk_tool_icon_wheel_zoom = \"bk-tool-icon-wheel-zoom\";\r\n    exports.bk_tool_icon_box_edit = \"bk-tool-icon-box-edit\";\r\n    exports.bk_tool_icon_freehand_draw = \"bk-tool-icon-freehand-draw\";\r\n    exports.bk_tool_icon_poly_draw = \"bk-tool-icon-poly-draw\";\r\n    exports.bk_tool_icon_point_draw = \"bk-tool-icon-point-draw\";\r\n    exports.bk_tool_icon_poly_edit = \"bk-tool-icon-poly-edit\";\r\n    exports.bk_tool_icon_line_edit = \"bk-tool-icon-line-edit\";\r\n}\r\n","/* styles\\logo.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_logo = \"bk-logo\";\r\n    exports.bk_logo_notebook = \"bk-logo-notebook\";\r\n    exports.bk_logo_small = \"bk-logo-small\";\r\n    exports.bk_grey = \"bk-grey\";\r\n}\r\n","/* styles\\logo.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root .bk-logo {\\n  margin: 5px;\\n  position: relative;\\n  display: block;\\n  background-repeat: no-repeat;\\n}\\n.bk-root .bk-logo.bk-grey {\\n  filter: url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale\\\");\\n  /* Firefox 10+, Firefox on Android */\\n  filter: gray;\\n  /* IE6-9 */\\n  -webkit-filter: grayscale(100%);\\n  /* Chrome 19+, Safari 6+, Safari 6+ iOS */\\n}\\n.bk-root .bk-logo-small {\\n  width: 20px;\\n  height: 20px;\\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);\\n}\\n.bk-root .bk-logo-notebook {\\n  display: inline-block;\\n  vertical-align: middle;\\n  margin-right: 5px;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* models\\plots\\plot_canvas.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var __rest = (this && this.__rest) || function (s, e) {\r\n        var t = {};\r\n        for (var p in s)\r\n            if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n                t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    };\r\n    var cartesian_frame_1 = require(323) /* ../canvas/cartesian_frame */;\r\n    var canvas_1 = require(192) /* ../canvas/canvas */;\r\n    var data_range1d_1 = require(325) /* ../ranges/data_range1d */;\r\n    var glyph_renderer_1 = require(205) /* ../renderers/glyph_renderer */;\r\n    var layout_dom_1 = require(387) /* ../layouts/layout_dom */;\r\n    var title_1 = require(284) /* ../annotations/title */;\r\n    var axis_1 = require(292) /* ../axes/axis */;\r\n    var toolbar_panel_1 = require(285) /* ../annotations/toolbar_panel */;\r\n    var bokeh_events_1 = require(428) /* ../../core/bokeh_events */;\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var build_views_1 = require(230) /* ../../core/build_views */;\r\n    var ui_events_1 = require(429) /* ../../core/ui_events */;\r\n    var visuals_1 = require(189) /* ../../core/visuals */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var throttle_1 = require(431) /* ../../core/util/throttle */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var alignments_1 = require(330) /* ../../core/layout/alignments */;\r\n    var border_1 = require(432) /* ../../core/layout/border */;\r\n    var side_panel_1 = require(433) /* ../../core/layout/side_panel */;\r\n    var grid_1 = require(331) /* ../../core/layout/grid */;\r\n    var bbox_1 = require(194) /* ../../core/util/bbox */;\r\n    var PlotView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PlotView, _super);\r\n        function PlotView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._outer_bbox = new bbox_1.BBox();\r\n            _this._inner_bbox = new bbox_1.BBox();\r\n            _this._needs_paint = true;\r\n            _this._needs_layout = false;\r\n            _this._invalidated_painters = new Set();\r\n            _this._invalidate_all = true;\r\n            return _this;\r\n        }\r\n        Object.defineProperty(PlotView.prototype, \"is_paused\", {\r\n            get: function () {\r\n                return this._is_paused != null && this._is_paused !== 0;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(PlotView.prototype, \"child_models\", {\r\n            get: function () {\r\n                return [];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        PlotView.prototype.pause = function () {\r\n            if (this._is_paused == null)\r\n                this._is_paused = 1;\r\n            else\r\n                this._is_paused += 1;\r\n        };\r\n        PlotView.prototype.unpause = function (no_render) {\r\n            if (no_render === void 0) {\r\n                no_render = false;\r\n            }\r\n            if (this._is_paused == null)\r\n                throw new Error(\"wasn't paused\");\r\n            this._is_paused -= 1;\r\n            if (this._is_paused == 0 && !no_render)\r\n                this.request_paint();\r\n        };\r\n        // TODO: this needs to be removed\r\n        PlotView.prototype.request_render = function () {\r\n            this.request_paint();\r\n        };\r\n        PlotView.prototype.request_paint = function (to_invalidate) {\r\n            if (to_invalidate != null) {\r\n                this._invalidated_painters.add(to_invalidate);\r\n            }\r\n            else {\r\n                this._invalidate_all = true;\r\n            }\r\n            if (!this.is_paused) {\r\n                var promise_1 = this.throttled_paint();\r\n                this._ready = this._ready.then(function () { return promise_1; });\r\n            }\r\n        };\r\n        PlotView.prototype.request_layout = function () {\r\n            this._needs_layout = true;\r\n            this.request_paint();\r\n        };\r\n        PlotView.prototype.reset = function () {\r\n            if (this.model.reset_policy == \"standard\") {\r\n                this.clear_state();\r\n                this.reset_range();\r\n                this.reset_selection();\r\n            }\r\n            this.model.trigger_event(new bokeh_events_1.Reset());\r\n        };\r\n        PlotView.prototype.remove = function () {\r\n            this.ui_event_bus.destroy();\r\n            build_views_1.remove_views(this.renderer_views);\r\n            build_views_1.remove_views(this.tool_views);\r\n            this.canvas_view.remove();\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        PlotView.prototype.render = function () {\r\n            _super.prototype.render.call(this);\r\n            this.el.appendChild(this.canvas_view.el);\r\n            this.canvas_view.render();\r\n        };\r\n        PlotView.prototype.initialize = function () {\r\n            var _this = this;\r\n            this.pause();\r\n            _super.prototype.initialize.call(this);\r\n            this.state_changed = new signaling_1.Signal0(this, \"state_changed\");\r\n            this.lod_started = false;\r\n            this.visuals = new visuals_1.Visuals(this.model); // XXX\r\n            this._initial_state_info = {\r\n                selection: new Map(),\r\n                dimensions: { width: 0, height: 0 },\r\n            };\r\n            this.visibility_callbacks = [];\r\n            this.state = { history: [], index: -1 };\r\n            var _b = this.model, hidpi = _b.hidpi, output_backend = _b.output_backend;\r\n            this.canvas = new canvas_1.Canvas({ hidpi: hidpi, output_backend: output_backend });\r\n            this.frame = new cartesian_frame_1.CartesianFrame(this.model.x_scale, this.model.y_scale, this.model.x_range, this.model.y_range, this.model.extra_x_ranges, this.model.extra_y_ranges);\r\n            this.throttled_paint = throttle_1.throttle(function () { return _this.repaint(); }, 1000 / 60);\r\n            var _c = this.model, title_location = _c.title_location, title = _c.title;\r\n            if (title_location != null && title != null) {\r\n                this._title = title instanceof title_1.Title ? title : new title_1.Title({ text: title });\r\n            }\r\n            var _d = this.model, toolbar_location = _d.toolbar_location, toolbar = _d.toolbar;\r\n            if (toolbar_location != null && toolbar != null) {\r\n                this._toolbar = new toolbar_panel_1.ToolbarPanel({ toolbar: toolbar });\r\n                toolbar.toolbar_location = toolbar_location;\r\n            }\r\n            this.renderer_views = new Map();\r\n            this.tool_views = new Map();\r\n        };\r\n        PlotView.prototype.lazy_initialize = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var _b;\r\n                return tslib_1.__generator(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            _b = this;\r\n                            return [4 /*yield*/, build_views_1.build_view(this.canvas, { parent: this })];\r\n                        case 1:\r\n                            _b.canvas_view = _c.sent();\r\n                            this.ui_event_bus = new ui_events_1.UIEvents(this, this.model.toolbar, this.canvas_view.events_el);\r\n                            return [4 /*yield*/, this.build_renderer_views()];\r\n                        case 2:\r\n                            _c.sent();\r\n                            return [4 /*yield*/, this.build_tool_views()];\r\n                        case 3:\r\n                            _c.sent();\r\n                            this.update_dataranges();\r\n                            this.unpause(true);\r\n                            logging_1.logger.debug(\"PlotView initialized\");\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        PlotView.prototype._width_policy = function () {\r\n            return this.model.frame_width == null ? _super.prototype._width_policy.call(this) : \"min\";\r\n        };\r\n        PlotView.prototype._height_policy = function () {\r\n            return this.model.frame_height == null ? _super.prototype._height_policy.call(this) : \"min\";\r\n        };\r\n        PlotView.prototype._update_layout = function () {\r\n            var _this = this;\r\n            this.layout = new border_1.BorderLayout();\r\n            this.layout.set_sizing(this.box_sizing());\r\n            var _b = this.model, frame_width = _b.frame_width, frame_height = _b.frame_height;\r\n            this.layout.center_panel = this.frame;\r\n            this.layout.center_panel.set_sizing(Object.assign(Object.assign({}, (frame_width != null ? { width_policy: \"fixed\", width: frame_width } : { width_policy: \"fit\" })), (frame_height != null ? { height_policy: \"fixed\", height: frame_height } : { height_policy: \"fit\" })));\r\n            var above = array_1.copy(this.model.above);\r\n            var below = array_1.copy(this.model.below);\r\n            var left = array_1.copy(this.model.left);\r\n            var right = array_1.copy(this.model.right);\r\n            var get_side = function (side) {\r\n                switch (side) {\r\n                    case \"above\": return above;\r\n                    case \"below\": return below;\r\n                    case \"left\": return left;\r\n                    case \"right\": return right;\r\n                }\r\n            };\r\n            var _c = this.model, title_location = _c.title_location, title = _c.title;\r\n            if (title_location != null && title != null) {\r\n                get_side(title_location).push(this._title);\r\n            }\r\n            var _d = this.model, toolbar_location = _d.toolbar_location, toolbar = _d.toolbar;\r\n            if (toolbar_location != null && toolbar != null) {\r\n                var panels = get_side(toolbar_location);\r\n                var push_toolbar = true;\r\n                if (this.model.toolbar_sticky) {\r\n                    for (var i = 0; i < panels.length; i++) {\r\n                        var panel = panels[i];\r\n                        if (panel instanceof title_1.Title) {\r\n                            if (toolbar_location == \"above\" || toolbar_location == \"below\")\r\n                                panels[i] = [panel, this._toolbar];\r\n                            else\r\n                                panels[i] = [this._toolbar, panel];\r\n                            push_toolbar = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (push_toolbar)\r\n                    panels.push(this._toolbar);\r\n            }\r\n            var set_layout = function (side, model) {\r\n                var view = _this.renderer_views.get(model);\r\n                return view.layout = new side_panel_1.SidePanel(side, view);\r\n            };\r\n            var set_layouts = function (side, panels) {\r\n                var e_1, _b;\r\n                var horizontal = side == \"above\" || side == \"below\";\r\n                var layouts = [];\r\n                try {\r\n                    for (var panels_1 = tslib_1.__values(panels), panels_1_1 = panels_1.next(); !panels_1_1.done; panels_1_1 = panels_1.next()) {\r\n                        var panel = panels_1_1.value;\r\n                        if (types_1.isArray(panel)) {\r\n                            var items = panel.map(function (subpanel) {\r\n                                var _b;\r\n                                var item = set_layout(side, subpanel);\r\n                                if (subpanel instanceof toolbar_panel_1.ToolbarPanel) {\r\n                                    var dim = horizontal ? \"width_policy\" : \"height_policy\";\r\n                                    item.set_sizing(Object.assign(Object.assign({}, item.sizing), (_b = {}, _b[dim] = \"min\", _b)));\r\n                                }\r\n                                return item;\r\n                            });\r\n                            var layout = void 0;\r\n                            if (horizontal) {\r\n                                layout = new grid_1.Row(items);\r\n                                layout.set_sizing({ width_policy: \"max\", height_policy: \"min\" });\r\n                            }\r\n                            else {\r\n                                layout = new grid_1.Column(items);\r\n                                layout.set_sizing({ width_policy: \"min\", height_policy: \"max\" });\r\n                            }\r\n                            layout.absolute = true;\r\n                            layouts.push(layout);\r\n                        }\r\n                        else\r\n                            layouts.push(set_layout(side, panel));\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (panels_1_1 && !panels_1_1.done && (_b = panels_1.return))\r\n                            _b.call(panels_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n                return layouts;\r\n            };\r\n            var min_border = this.model.min_border != null ? this.model.min_border : 0;\r\n            this.layout.min_border = {\r\n                left: this.model.min_border_left != null ? this.model.min_border_left : min_border,\r\n                top: this.model.min_border_top != null ? this.model.min_border_top : min_border,\r\n                right: this.model.min_border_right != null ? this.model.min_border_right : min_border,\r\n                bottom: this.model.min_border_bottom != null ? this.model.min_border_bottom : min_border,\r\n            };\r\n            var top_panel = new alignments_1.VStack();\r\n            var bottom_panel = new alignments_1.VStack();\r\n            var left_panel = new alignments_1.HStack();\r\n            var right_panel = new alignments_1.HStack();\r\n            top_panel.children = array_1.reversed(set_layouts(\"above\", above));\r\n            bottom_panel.children = set_layouts(\"below\", below);\r\n            left_panel.children = array_1.reversed(set_layouts(\"left\", left));\r\n            right_panel.children = set_layouts(\"right\", right);\r\n            top_panel.set_sizing({ width_policy: \"fit\", height_policy: \"min\" /*, min_height: this.layout.min_border.top*/ });\r\n            bottom_panel.set_sizing({ width_policy: \"fit\", height_policy: \"min\" /*, min_height: this.layout.min_width.bottom*/ });\r\n            left_panel.set_sizing({ width_policy: \"min\", height_policy: \"fit\" /*, min_width: this.layout.min_width.left*/ });\r\n            right_panel.set_sizing({ width_policy: \"min\", height_policy: \"fit\" /*, min_width: this.layout.min_width.right*/ });\r\n            this.layout.top_panel = top_panel;\r\n            this.layout.bottom_panel = bottom_panel;\r\n            this.layout.left_panel = left_panel;\r\n            this.layout.right_panel = right_panel;\r\n        };\r\n        Object.defineProperty(PlotView.prototype, \"axis_views\", {\r\n            get: function () {\r\n                var e_2, _b;\r\n                var views = [];\r\n                try {\r\n                    for (var _c = tslib_1.__values(this.renderer_views), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var _e = tslib_1.__read(_d.value, 2), renderer_view = _e[1];\r\n                        if (renderer_view instanceof axis_1.AxisView)\r\n                            views.push(renderer_view);\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n                return views;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        PlotView.prototype.set_cursor = function (cursor) {\r\n            if (cursor === void 0) {\r\n                cursor = \"default\";\r\n            }\r\n            this.canvas_view.el.style.cursor = cursor;\r\n        };\r\n        PlotView.prototype.set_toolbar_visibility = function (visible) {\r\n            var e_3, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this.visibility_callbacks), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var callback = _d.value;\r\n                    callback(visible);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n        };\r\n        PlotView.prototype.update_dataranges = function () {\r\n            var e_4, _b, e_5, _c, e_6, _d, e_7, _e, e_8, _f, e_9, _g, e_10, _h;\r\n            // Update any DataRange1ds here\r\n            var bounds = new Map();\r\n            var log_bounds = new Map();\r\n            var calculate_log_bounds = false;\r\n            try {\r\n                for (var _j = tslib_1.__values(this.frame.x_ranges), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                    var _l = tslib_1.__read(_k.value, 2), xr = _l[1];\r\n                    if (xr instanceof data_range1d_1.DataRange1d && xr.scale_hint == \"log\")\r\n                        calculate_log_bounds = true;\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_k && !_k.done && (_b = _j.return))\r\n                        _b.call(_j);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _m = tslib_1.__values(this.frame.y_ranges), _o = _m.next(); !_o.done; _o = _m.next()) {\r\n                    var _p = tslib_1.__read(_o.value, 2), yr = _p[1];\r\n                    if (yr instanceof data_range1d_1.DataRange1d && yr.scale_hint == \"log\")\r\n                        calculate_log_bounds = true;\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_o && !_o.done && (_c = _m.return))\r\n                        _c.call(_m);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _q = tslib_1.__values(this.renderer_views), _r = _q.next(); !_r.done; _r = _q.next()) {\r\n                    var _s = tslib_1.__read(_r.value, 2), renderer = _s[0], renderer_view = _s[1];\r\n                    if (renderer_view instanceof glyph_renderer_1.GlyphRendererView) {\r\n                        var bds = renderer_view.glyph.bounds();\r\n                        if (bds != null)\r\n                            bounds.set(renderer, bds);\r\n                        if (calculate_log_bounds) {\r\n                            var log_bds = renderer_view.glyph.log_bounds();\r\n                            if (log_bds != null)\r\n                                log_bounds.set(renderer, log_bds);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_r && !_r.done && (_d = _q.return))\r\n                        _d.call(_q);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            var follow_enabled = false;\r\n            var has_bounds = false;\r\n            var _t = this.frame.bbox, width = _t.width, height = _t.height;\r\n            var r;\r\n            if (this.model.match_aspect !== false && width != 0 && height != 0)\r\n                r = (1 / this.model.aspect_scale) * (width / height);\r\n            try {\r\n                for (var _u = tslib_1.__values(this.frame.x_ranges), _v = _u.next(); !_v.done; _v = _u.next()) {\r\n                    var _w = tslib_1.__read(_v.value, 2), xr = _w[1];\r\n                    if (xr instanceof data_range1d_1.DataRange1d) {\r\n                        var bounds_to_use = xr.scale_hint == \"log\" ? log_bounds : bounds;\r\n                        xr.update(bounds_to_use, 0, this.model, r);\r\n                        if (xr.follow) {\r\n                            follow_enabled = true;\r\n                        }\r\n                    }\r\n                    if (xr.bounds != null)\r\n                        has_bounds = true;\r\n                }\r\n            }\r\n            catch (e_7_1) {\r\n                e_7 = { error: e_7_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_v && !_v.done && (_e = _u.return))\r\n                        _e.call(_u);\r\n                }\r\n                finally {\r\n                    if (e_7)\r\n                        throw e_7.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _x = tslib_1.__values(this.frame.y_ranges), _y = _x.next(); !_y.done; _y = _x.next()) {\r\n                    var _z = tslib_1.__read(_y.value, 2), yr = _z[1];\r\n                    if (yr instanceof data_range1d_1.DataRange1d) {\r\n                        var bounds_to_use = yr.scale_hint == \"log\" ? log_bounds : bounds;\r\n                        yr.update(bounds_to_use, 1, this.model, r);\r\n                        if (yr.follow) {\r\n                            follow_enabled = true;\r\n                        }\r\n                    }\r\n                    if (yr.bounds != null)\r\n                        has_bounds = true;\r\n                }\r\n            }\r\n            catch (e_8_1) {\r\n                e_8 = { error: e_8_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_y && !_y.done && (_f = _x.return))\r\n                        _f.call(_x);\r\n                }\r\n                finally {\r\n                    if (e_8)\r\n                        throw e_8.error;\r\n                }\r\n            }\r\n            if (follow_enabled && has_bounds) {\r\n                logging_1.logger.warn('Follow enabled so bounds are unset.');\r\n                try {\r\n                    for (var _0 = tslib_1.__values(this.frame.x_ranges), _1 = _0.next(); !_1.done; _1 = _0.next()) {\r\n                        var _2 = tslib_1.__read(_1.value, 2), xr = _2[1];\r\n                        xr.bounds = null;\r\n                    }\r\n                }\r\n                catch (e_9_1) {\r\n                    e_9 = { error: e_9_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_1 && !_1.done && (_g = _0.return))\r\n                            _g.call(_0);\r\n                    }\r\n                    finally {\r\n                        if (e_9)\r\n                            throw e_9.error;\r\n                    }\r\n                }\r\n                try {\r\n                    for (var _3 = tslib_1.__values(this.frame.y_ranges), _4 = _3.next(); !_4.done; _4 = _3.next()) {\r\n                        var _5 = tslib_1.__read(_4.value, 2), yr = _5[1];\r\n                        yr.bounds = null;\r\n                    }\r\n                }\r\n                catch (e_10_1) {\r\n                    e_10 = { error: e_10_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_4 && !_4.done && (_h = _3.return))\r\n                            _h.call(_3);\r\n                    }\r\n                    finally {\r\n                        if (e_10)\r\n                            throw e_10.error;\r\n                    }\r\n                }\r\n            }\r\n            this.range_update_timestamp = Date.now();\r\n        };\r\n        PlotView.prototype.push_state = function (type, new_info) {\r\n            var _b = this.state, history = _b.history, index = _b.index;\r\n            var prev_info = history[index] != null ? history[index].info : {};\r\n            var info = Object.assign(Object.assign(Object.assign({}, this._initial_state_info), prev_info), new_info);\r\n            this.state.history = this.state.history.slice(0, this.state.index + 1);\r\n            this.state.history.push({ type: type, info: info });\r\n            this.state.index = this.state.history.length - 1;\r\n            this.state_changed.emit();\r\n        };\r\n        PlotView.prototype.clear_state = function () {\r\n            this.state = { history: [], index: -1 };\r\n            this.state_changed.emit();\r\n        };\r\n        PlotView.prototype.can_undo = function () {\r\n            return this.state.index >= 0;\r\n        };\r\n        PlotView.prototype.can_redo = function () {\r\n            return this.state.index < this.state.history.length - 1;\r\n        };\r\n        PlotView.prototype.undo = function () {\r\n            if (this.can_undo()) {\r\n                this.state.index -= 1;\r\n                this._do_state_change(this.state.index);\r\n                this.state_changed.emit();\r\n            }\r\n        };\r\n        PlotView.prototype.redo = function () {\r\n            if (this.can_redo()) {\r\n                this.state.index += 1;\r\n                this._do_state_change(this.state.index);\r\n                this.state_changed.emit();\r\n            }\r\n        };\r\n        PlotView.prototype._do_state_change = function (index) {\r\n            var info = this.state.history[index] != null ? this.state.history[index].info : this._initial_state_info;\r\n            if (info.range != null)\r\n                this.update_range(info.range);\r\n            if (info.selection != null)\r\n                this.update_selection(info.selection);\r\n        };\r\n        PlotView.prototype.get_selection = function () {\r\n            var e_11, _b;\r\n            var selection = new Map();\r\n            try {\r\n                for (var _c = tslib_1.__values(this.model.renderers), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var renderer = _d.value;\r\n                    if (renderer instanceof glyph_renderer_1.GlyphRenderer) {\r\n                        var selected = renderer.data_source.selected;\r\n                        selection.set(renderer, selected);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_11_1) {\r\n                e_11 = { error: e_11_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_11)\r\n                        throw e_11.error;\r\n                }\r\n            }\r\n            return selection;\r\n        };\r\n        PlotView.prototype.update_selection = function (selections) {\r\n            var e_12, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this.model.renderers), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var renderer = _d.value;\r\n                    if (!(renderer instanceof glyph_renderer_1.GlyphRenderer))\r\n                        continue;\r\n                    var ds = renderer.data_source;\r\n                    if (selections != null) {\r\n                        var selection = selections.get(renderer);\r\n                        if (selection != null) {\r\n                            ds.selected.update(selection, true);\r\n                        }\r\n                    }\r\n                    else\r\n                        ds.selection_manager.clear();\r\n                }\r\n            }\r\n            catch (e_12_1) {\r\n                e_12 = { error: e_12_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_12)\r\n                        throw e_12.error;\r\n                }\r\n            }\r\n        };\r\n        PlotView.prototype.reset_selection = function () {\r\n            this.update_selection(null);\r\n        };\r\n        PlotView.prototype._update_ranges_together = function (range_info_iter) {\r\n            var e_13, _b, e_14, _c;\r\n            // Get weight needed to scale the diff of the range to honor interval limits\r\n            var weight = 1.0;\r\n            try {\r\n                for (var range_info_iter_1 = tslib_1.__values(range_info_iter), range_info_iter_1_1 = range_info_iter_1.next(); !range_info_iter_1_1.done; range_info_iter_1_1 = range_info_iter_1.next()) {\r\n                    var _d = tslib_1.__read(range_info_iter_1_1.value, 2), rng = _d[0], range_info = _d[1];\r\n                    weight = Math.min(weight, this._get_weight_to_constrain_interval(rng, range_info));\r\n                }\r\n            }\r\n            catch (e_13_1) {\r\n                e_13 = { error: e_13_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (range_info_iter_1_1 && !range_info_iter_1_1.done && (_b = range_info_iter_1.return))\r\n                        _b.call(range_info_iter_1);\r\n                }\r\n                finally {\r\n                    if (e_13)\r\n                        throw e_13.error;\r\n                }\r\n            }\r\n            // Apply shared weight to all ranges\r\n            if (weight < 1) {\r\n                try {\r\n                    for (var range_info_iter_2 = tslib_1.__values(range_info_iter), range_info_iter_2_1 = range_info_iter_2.next(); !range_info_iter_2_1.done; range_info_iter_2_1 = range_info_iter_2.next()) {\r\n                        var _e = tslib_1.__read(range_info_iter_2_1.value, 2), rng = _e[0], range_info = _e[1];\r\n                        range_info.start = weight * range_info.start + (1 - weight) * rng.start;\r\n                        range_info.end = weight * range_info.end + (1 - weight) * rng.end;\r\n                    }\r\n                }\r\n                catch (e_14_1) {\r\n                    e_14 = { error: e_14_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (range_info_iter_2_1 && !range_info_iter_2_1.done && (_c = range_info_iter_2.return))\r\n                            _c.call(range_info_iter_2);\r\n                    }\r\n                    finally {\r\n                        if (e_14)\r\n                            throw e_14.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        PlotView.prototype._update_ranges_individually = function (range_info_iter, is_panning, is_scrolling, maintain_focus) {\r\n            var e_15, _b, e_16, _c;\r\n            var hit_bound = false;\r\n            try {\r\n                for (var range_info_iter_3 = tslib_1.__values(range_info_iter), range_info_iter_3_1 = range_info_iter_3.next(); !range_info_iter_3_1.done; range_info_iter_3_1 = range_info_iter_3.next()) {\r\n                    var _d = tslib_1.__read(range_info_iter_3_1.value, 2), rng = _d[0], range_info = _d[1];\r\n                    // Limit range interval first. Note that for scroll events,\r\n                    // the interval has already been limited for all ranges simultaneously\r\n                    if (!is_scrolling) {\r\n                        var weight = this._get_weight_to_constrain_interval(rng, range_info);\r\n                        if (weight < 1) {\r\n                            range_info.start = weight * range_info.start + (1 - weight) * rng.start;\r\n                            range_info.end = weight * range_info.end + (1 - weight) * rng.end;\r\n                        }\r\n                    }\r\n                    // Prevent range from going outside limits\r\n                    // Also ensure that range keeps the same delta when panning/scrolling\r\n                    if (rng.bounds != null && rng.bounds != \"auto\") { // check `auto` for type-checking purpose\r\n                        var _e = tslib_1.__read(rng.bounds, 2), min = _e[0], max = _e[1];\r\n                        var new_interval = Math.abs(range_info.end - range_info.start);\r\n                        if (rng.is_reversed) {\r\n                            if (min != null) {\r\n                                if (min >= range_info.end) {\r\n                                    hit_bound = true;\r\n                                    range_info.end = min;\r\n                                    if (is_panning || is_scrolling) {\r\n                                        range_info.start = min + new_interval;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (max != null) {\r\n                                if (max <= range_info.start) {\r\n                                    hit_bound = true;\r\n                                    range_info.start = max;\r\n                                    if (is_panning || is_scrolling) {\r\n                                        range_info.end = max - new_interval;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (min != null) {\r\n                                if (min >= range_info.start) {\r\n                                    hit_bound = true;\r\n                                    range_info.start = min;\r\n                                    if (is_panning || is_scrolling) {\r\n                                        range_info.end = min + new_interval;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (max != null) {\r\n                                if (max <= range_info.end) {\r\n                                    hit_bound = true;\r\n                                    range_info.end = max;\r\n                                    if (is_panning || is_scrolling) {\r\n                                        range_info.start = max - new_interval;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_15_1) {\r\n                e_15 = { error: e_15_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (range_info_iter_3_1 && !range_info_iter_3_1.done && (_b = range_info_iter_3.return))\r\n                        _b.call(range_info_iter_3);\r\n                }\r\n                finally {\r\n                    if (e_15)\r\n                        throw e_15.error;\r\n                }\r\n            }\r\n            // Cancel the event when hitting a bound while scrolling. This ensures that\r\n            // the scroll-zoom tool maintains its focus position. Setting `maintain_focus`\r\n            // to false results in a more \"gliding\" behavior, allowing one to\r\n            // zoom out more smoothly, at the cost of losing the focus position.\r\n            if (is_scrolling && hit_bound && maintain_focus)\r\n                return;\r\n            try {\r\n                for (var range_info_iter_4 = tslib_1.__values(range_info_iter), range_info_iter_4_1 = range_info_iter_4.next(); !range_info_iter_4_1.done; range_info_iter_4_1 = range_info_iter_4.next()) {\r\n                    var _f = tslib_1.__read(range_info_iter_4_1.value, 2), rng = _f[0], range_info = _f[1];\r\n                    rng.have_updated_interactively = true;\r\n                    if (rng.start != range_info.start || rng.end != range_info.end)\r\n                        rng.setv(range_info);\r\n                }\r\n            }\r\n            catch (e_16_1) {\r\n                e_16 = { error: e_16_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (range_info_iter_4_1 && !range_info_iter_4_1.done && (_c = range_info_iter_4.return))\r\n                        _c.call(range_info_iter_4);\r\n                }\r\n                finally {\r\n                    if (e_16)\r\n                        throw e_16.error;\r\n                }\r\n            }\r\n        };\r\n        PlotView.prototype._get_weight_to_constrain_interval = function (rng, range_info) {\r\n            // Get the weight by which a range-update can be applied\r\n            // to still honor the interval limits (including the implicit\r\n            // max interval imposed by the bounds)\r\n            var min_interval = rng.min_interval;\r\n            var max_interval = rng.max_interval;\r\n            // Express bounds as a max_interval. By doing this, the application of\r\n            // bounds and interval limits can be applied independent from each-other.\r\n            if (rng.bounds != null && rng.bounds != \"auto\") { // check `auto` for type-checking purpose\r\n                var _b = tslib_1.__read(rng.bounds, 2), min = _b[0], max = _b[1];\r\n                if (min != null && max != null) {\r\n                    var max_interval2 = Math.abs(max - min);\r\n                    max_interval = max_interval != null ? Math.min(max_interval, max_interval2) : max_interval2;\r\n                }\r\n            }\r\n            var weight = 1.0;\r\n            if (min_interval != null || max_interval != null) {\r\n                var old_interval = Math.abs(rng.end - rng.start);\r\n                var new_interval = Math.abs(range_info.end - range_info.start);\r\n                if (min_interval > 0 && new_interval < min_interval) {\r\n                    weight = (old_interval - min_interval) / (old_interval - new_interval);\r\n                }\r\n                if (max_interval > 0 && new_interval > max_interval) {\r\n                    weight = (max_interval - old_interval) / (new_interval - old_interval);\r\n                }\r\n                weight = Math.max(0.0, Math.min(1.0, weight));\r\n            }\r\n            return weight;\r\n        };\r\n        PlotView.prototype.update_range = function (range_info, is_panning, is_scrolling, maintain_focus) {\r\n            var e_17, _b, e_18, _c, e_19, _d, e_20, _e;\r\n            if (is_panning === void 0) {\r\n                is_panning = false;\r\n            }\r\n            if (is_scrolling === void 0) {\r\n                is_scrolling = false;\r\n            }\r\n            if (maintain_focus === void 0) {\r\n                maintain_focus = true;\r\n            }\r\n            this.pause();\r\n            var _f = this.frame, x_ranges = _f.x_ranges, y_ranges = _f.y_ranges;\r\n            if (range_info == null) {\r\n                try {\r\n                    for (var x_ranges_1 = tslib_1.__values(x_ranges), x_ranges_1_1 = x_ranges_1.next(); !x_ranges_1_1.done; x_ranges_1_1 = x_ranges_1.next()) {\r\n                        var _g = tslib_1.__read(x_ranges_1_1.value, 2), range = _g[1];\r\n                        range.reset();\r\n                    }\r\n                }\r\n                catch (e_17_1) {\r\n                    e_17 = { error: e_17_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (x_ranges_1_1 && !x_ranges_1_1.done && (_b = x_ranges_1.return))\r\n                            _b.call(x_ranges_1);\r\n                    }\r\n                    finally {\r\n                        if (e_17)\r\n                            throw e_17.error;\r\n                    }\r\n                }\r\n                try {\r\n                    for (var y_ranges_1 = tslib_1.__values(y_ranges), y_ranges_1_1 = y_ranges_1.next(); !y_ranges_1_1.done; y_ranges_1_1 = y_ranges_1.next()) {\r\n                        var _h = tslib_1.__read(y_ranges_1_1.value, 2), range = _h[1];\r\n                        range.reset();\r\n                    }\r\n                }\r\n                catch (e_18_1) {\r\n                    e_18 = { error: e_18_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (y_ranges_1_1 && !y_ranges_1_1.done && (_c = y_ranges_1.return))\r\n                            _c.call(y_ranges_1);\r\n                    }\r\n                    finally {\r\n                        if (e_18)\r\n                            throw e_18.error;\r\n                    }\r\n                }\r\n                this.update_dataranges();\r\n            }\r\n            else {\r\n                var range_info_iter = [];\r\n                try {\r\n                    for (var x_ranges_2 = tslib_1.__values(x_ranges), x_ranges_2_1 = x_ranges_2.next(); !x_ranges_2_1.done; x_ranges_2_1 = x_ranges_2.next()) {\r\n                        var _j = tslib_1.__read(x_ranges_2_1.value, 2), name = _j[0], range = _j[1];\r\n                        range_info_iter.push([range, range_info.xrs.get(name)]);\r\n                    }\r\n                }\r\n                catch (e_19_1) {\r\n                    e_19 = { error: e_19_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (x_ranges_2_1 && !x_ranges_2_1.done && (_d = x_ranges_2.return))\r\n                            _d.call(x_ranges_2);\r\n                    }\r\n                    finally {\r\n                        if (e_19)\r\n                            throw e_19.error;\r\n                    }\r\n                }\r\n                try {\r\n                    for (var y_ranges_2 = tslib_1.__values(y_ranges), y_ranges_2_1 = y_ranges_2.next(); !y_ranges_2_1.done; y_ranges_2_1 = y_ranges_2.next()) {\r\n                        var _k = tslib_1.__read(y_ranges_2_1.value, 2), name = _k[0], range = _k[1];\r\n                        range_info_iter.push([range, range_info.yrs.get(name)]);\r\n                    }\r\n                }\r\n                catch (e_20_1) {\r\n                    e_20 = { error: e_20_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (y_ranges_2_1 && !y_ranges_2_1.done && (_e = y_ranges_2.return))\r\n                            _e.call(y_ranges_2);\r\n                    }\r\n                    finally {\r\n                        if (e_20)\r\n                            throw e_20.error;\r\n                    }\r\n                }\r\n                if (is_scrolling) {\r\n                    this._update_ranges_together(range_info_iter); // apply interval bounds while keeping aspect\r\n                }\r\n                this._update_ranges_individually(range_info_iter, is_panning, is_scrolling, maintain_focus);\r\n            }\r\n            this.unpause();\r\n        };\r\n        PlotView.prototype.reset_range = function () {\r\n            this.update_range(null);\r\n        };\r\n        PlotView.prototype._invalidate_layout = function () {\r\n            var _this = this;\r\n            var needs_layout = function () {\r\n                var e_21, _b;\r\n                try {\r\n                    for (var _c = tslib_1.__values(_this.model.side_panels), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var panel = _d.value;\r\n                        var view = _this.renderer_views.get(panel);\r\n                        if (view.layout.has_size_changed())\r\n                            return true;\r\n                    }\r\n                }\r\n                catch (e_21_1) {\r\n                    e_21 = { error: e_21_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_21)\r\n                            throw e_21.error;\r\n                    }\r\n                }\r\n                return false;\r\n            };\r\n            if (needs_layout())\r\n                this.root.compute_layout();\r\n        };\r\n        PlotView.prototype.get_renderer_views = function () {\r\n            var _this = this;\r\n            return this.computed_renderers.map(function (r) { return _this.renderer_views.get(r); });\r\n        };\r\n        PlotView.prototype.build_renderer_views = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var _b, above, below, left, right, center, renderers, _c, _d, tool;\r\n                var _e, e_22, _f, _g;\r\n                return tslib_1.__generator(this, function (_h) {\r\n                    switch (_h.label) {\r\n                        case 0:\r\n                            this.computed_renderers = [];\r\n                            _b = this.model, above = _b.above, below = _b.below, left = _b.left, right = _b.right, center = _b.center, renderers = _b.renderers;\r\n                            (_e = this.computed_renderers).push.apply(_e, tslib_1.__spread(above, below, left, right, center, renderers));\r\n                            if (this._title != null)\r\n                                this.computed_renderers.push(this._title);\r\n                            if (this._toolbar != null)\r\n                                this.computed_renderers.push(this._toolbar);\r\n                            try {\r\n                                for (_c = tslib_1.__values(this.model.toolbar.tools), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                                    tool = _d.value;\r\n                                    if (tool.overlay != null)\r\n                                        this.computed_renderers.push(tool.overlay);\r\n                                    (_g = this.computed_renderers).push.apply(_g, tslib_1.__spread(tool.synthetic_renderers));\r\n                                }\r\n                            }\r\n                            catch (e_22_1) {\r\n                                e_22 = { error: e_22_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (_d && !_d.done && (_f = _c.return))\r\n                                        _f.call(_c);\r\n                                }\r\n                                finally {\r\n                                    if (e_22)\r\n                                        throw e_22.error;\r\n                                }\r\n                            }\r\n                            return [4 /*yield*/, build_views_1.build_views(this.renderer_views, this.computed_renderers, { parent: this })];\r\n                        case 1:\r\n                            _h.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        PlotView.prototype.build_tool_views = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var tool_models, new_tool_views;\r\n                var _this = this;\r\n                return tslib_1.__generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            tool_models = this.model.toolbar.tools;\r\n                            return [4 /*yield*/, build_views_1.build_views(this.tool_views, tool_models, { parent: this })];\r\n                        case 1:\r\n                            new_tool_views = _b.sent();\r\n                            new_tool_views.map(function (tool_view) { return _this.ui_event_bus.register_tool(tool_view); });\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        PlotView.prototype.connect_signals = function () {\r\n            var e_23, _b, e_24, _c;\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            var _d = this.frame, x_ranges = _d.x_ranges, y_ranges = _d.y_ranges;\r\n            try {\r\n                for (var x_ranges_3 = tslib_1.__values(x_ranges), x_ranges_3_1 = x_ranges_3.next(); !x_ranges_3_1.done; x_ranges_3_1 = x_ranges_3.next()) {\r\n                    var _e = tslib_1.__read(x_ranges_3_1.value, 2), range = _e[1];\r\n                    this.connect(range.change, function () { _this._needs_layout = true; _this.request_paint(); });\r\n                }\r\n            }\r\n            catch (e_23_1) {\r\n                e_23 = { error: e_23_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (x_ranges_3_1 && !x_ranges_3_1.done && (_b = x_ranges_3.return))\r\n                        _b.call(x_ranges_3);\r\n                }\r\n                finally {\r\n                    if (e_23)\r\n                        throw e_23.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var y_ranges_3 = tslib_1.__values(y_ranges), y_ranges_3_1 = y_ranges_3.next(); !y_ranges_3_1.done; y_ranges_3_1 = y_ranges_3.next()) {\r\n                    var _f = tslib_1.__read(y_ranges_3_1.value, 2), range = _f[1];\r\n                    this.connect(range.change, function () { _this._needs_layout = true; _this.request_paint(); });\r\n                }\r\n            }\r\n            catch (e_24_1) {\r\n                e_24 = { error: e_24_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (y_ranges_3_1 && !y_ranges_3_1.done && (_c = y_ranges_3.return))\r\n                        _c.call(y_ranges_3);\r\n                }\r\n                finally {\r\n                    if (e_24)\r\n                        throw e_24.error;\r\n                }\r\n            }\r\n            var _g = this.model.properties, plot_width = _g.plot_width, plot_height = _g.plot_height;\r\n            this.on_change([plot_width, plot_height], function () { return _this.invalidate_layout(); });\r\n            var _h = this.model.properties, above = _h.above, below = _h.below, left = _h.left, right = _h.right, center = _h.center, renderers = _h.renderers;\r\n            this.on_change([above, below, left, right, center, renderers], function () {\r\n                return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                    return tslib_1.__generator(this, function (_b) {\r\n                        switch (_b.label) {\r\n                            case 0: return [4 /*yield*/, this.build_renderer_views()];\r\n                            case 1: return [2 /*return*/, _b.sent()];\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n            this.connect(this.model.toolbar.properties.tools.change, function () {\r\n                return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                    return tslib_1.__generator(this, function (_b) {\r\n                        switch (_b.label) {\r\n                            case 0: return [4 /*yield*/, this.build_renderer_views()];\r\n                            case 1:\r\n                                _b.sent();\r\n                                return [4 /*yield*/, this.build_tool_views()];\r\n                            case 2:\r\n                                _b.sent();\r\n                                return [2 /*return*/];\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n            this.connect(this.model.change, function () { return _this.request_paint(); });\r\n            this.connect(this.model.reset, function () { return _this.reset(); });\r\n        };\r\n        PlotView.prototype.set_initial_range = function () {\r\n            var e_25, _b, e_26, _c;\r\n            // check for good values for ranges before setting initial range\r\n            var good_vals = true;\r\n            var _d = this.frame, x_ranges = _d.x_ranges, y_ranges = _d.y_ranges;\r\n            var xrs = new Map();\r\n            var yrs = new Map();\r\n            try {\r\n                for (var x_ranges_4 = tslib_1.__values(x_ranges), x_ranges_4_1 = x_ranges_4.next(); !x_ranges_4_1.done; x_ranges_4_1 = x_ranges_4.next()) {\r\n                    var _e = tslib_1.__read(x_ranges_4_1.value, 2), name = _e[0], range = _e[1];\r\n                    var start = range.start, end = range.end;\r\n                    if (start == null || end == null || isNaN(start + end)) {\r\n                        good_vals = false;\r\n                        break;\r\n                    }\r\n                    xrs.set(name, { start: start, end: end });\r\n                }\r\n            }\r\n            catch (e_25_1) {\r\n                e_25 = { error: e_25_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (x_ranges_4_1 && !x_ranges_4_1.done && (_b = x_ranges_4.return))\r\n                        _b.call(x_ranges_4);\r\n                }\r\n                finally {\r\n                    if (e_25)\r\n                        throw e_25.error;\r\n                }\r\n            }\r\n            if (good_vals) {\r\n                try {\r\n                    for (var y_ranges_4 = tslib_1.__values(y_ranges), y_ranges_4_1 = y_ranges_4.next(); !y_ranges_4_1.done; y_ranges_4_1 = y_ranges_4.next()) {\r\n                        var _f = tslib_1.__read(y_ranges_4_1.value, 2), name = _f[0], range = _f[1];\r\n                        var start = range.start, end = range.end;\r\n                        if (start == null || end == null || isNaN(start + end)) {\r\n                            good_vals = false;\r\n                            break;\r\n                        }\r\n                        yrs.set(name, { start: start, end: end });\r\n                    }\r\n                }\r\n                catch (e_26_1) {\r\n                    e_26 = { error: e_26_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (y_ranges_4_1 && !y_ranges_4_1.done && (_c = y_ranges_4.return))\r\n                            _c.call(y_ranges_4);\r\n                    }\r\n                    finally {\r\n                        if (e_26)\r\n                            throw e_26.error;\r\n                    }\r\n                }\r\n            }\r\n            if (good_vals) {\r\n                this._initial_state_info.range = { xrs: xrs, yrs: yrs };\r\n                logging_1.logger.debug(\"initial ranges set\");\r\n            }\r\n            else\r\n                logging_1.logger.warn('could not set initial ranges');\r\n        };\r\n        PlotView.prototype.has_finished = function () {\r\n            var e_27, _b;\r\n            if (!_super.prototype.has_finished.call(this))\r\n                return false;\r\n            if (this.model.visible) {\r\n                try {\r\n                    for (var _c = tslib_1.__values(this.renderer_views), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var _e = tslib_1.__read(_d.value, 2), renderer_view = _e[1];\r\n                        if (!renderer_view.has_finished())\r\n                            return false;\r\n                    }\r\n                }\r\n                catch (e_27_1) {\r\n                    e_27 = { error: e_27_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return))\r\n                            _b.call(_c);\r\n                    }\r\n                    finally {\r\n                        if (e_27)\r\n                            throw e_27.error;\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        PlotView.prototype.after_layout = function () {\r\n            _super.prototype.after_layout.call(this);\r\n            this._needs_layout = false;\r\n            this.model.setv({\r\n                inner_width: Math.round(this.frame.bbox.width),\r\n                inner_height: Math.round(this.frame.bbox.height),\r\n                outer_width: Math.round(this.layout.bbox.width),\r\n                outer_height: Math.round(this.layout.bbox.height),\r\n            }, { no_change: true });\r\n            if (this.model.match_aspect !== false) {\r\n                this.pause();\r\n                this.update_dataranges();\r\n                this.unpause(true);\r\n            }\r\n            if (!this._outer_bbox.equals(this.layout.bbox)) {\r\n                var _b = this.layout.bbox, width = _b.width, height = _b.height;\r\n                this.canvas_view.resize(width, height);\r\n                this._outer_bbox = this.layout.bbox;\r\n                this._invalidate_all = true;\r\n                this._needs_paint = true;\r\n            }\r\n            if (!this._inner_bbox.equals(this.frame.inner_bbox)) {\r\n                this._inner_bbox = this.layout.inner_bbox;\r\n                this._needs_paint = true;\r\n            }\r\n            if (this._needs_paint) {\r\n                // XXX: can't be this.request_paint(), because it would trigger back-and-forth\r\n                // layout recomputing feedback loop between plots. Plots are also much more\r\n                // responsive this way, especially in interactive mode.\r\n                this.paint();\r\n            }\r\n        };\r\n        PlotView.prototype.repaint = function () {\r\n            if (this._needs_layout)\r\n                this._invalidate_layout();\r\n            this.paint();\r\n        };\r\n        PlotView.prototype.paint = function () {\r\n            var e_28, _b, e_29, _c;\r\n            var _this = this;\r\n            if (this.is_paused || !this.model.visible)\r\n                return;\r\n            logging_1.logger.trace(\"PlotView.paint() for \" + this.model.id);\r\n            var document = this.model.document;\r\n            if (document != null) {\r\n                var interactive_duration = document.interactive_duration();\r\n                if (interactive_duration >= 0 && interactive_duration < this.model.lod_interval) {\r\n                    setTimeout(function () {\r\n                        if (document.interactive_duration() > _this.model.lod_timeout) {\r\n                            document.interactive_stop();\r\n                        }\r\n                        _this.request_paint();\r\n                    }, this.model.lod_timeout);\r\n                }\r\n                else\r\n                    document.interactive_stop();\r\n            }\r\n            try {\r\n                for (var _d = tslib_1.__values(this.renderer_views), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var _f = tslib_1.__read(_e.value, 2), renderer_view = _f[1];\r\n                    if (this.range_update_timestamp == null ||\r\n                        (renderer_view instanceof glyph_renderer_1.GlyphRendererView && renderer_view.set_data_timestamp > this.range_update_timestamp)) {\r\n                        this.update_dataranges();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_28_1) {\r\n                e_28 = { error: e_28_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_b = _d.return))\r\n                        _b.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_28)\r\n                        throw e_28.error;\r\n                }\r\n            }\r\n            var do_primary = false;\r\n            var do_overlays = false;\r\n            if (this._invalidate_all) {\r\n                do_primary = true;\r\n                do_overlays = true;\r\n            }\r\n            else {\r\n                try {\r\n                    for (var _g = tslib_1.__values(this._invalidated_painters), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                        var painter = _h.value;\r\n                        var level = painter.model.level;\r\n                        if (level != \"overlay\")\r\n                            do_primary = true;\r\n                        else\r\n                            do_overlays = true;\r\n                        if (do_primary && do_overlays)\r\n                            break;\r\n                    }\r\n                }\r\n                catch (e_29_1) {\r\n                    e_29 = { error: e_29_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_h && !_h.done && (_c = _g.return))\r\n                            _c.call(_g);\r\n                    }\r\n                    finally {\r\n                        if (e_29)\r\n                            throw e_29.error;\r\n                    }\r\n                }\r\n            }\r\n            this._invalidated_painters.clear();\r\n            this._invalidate_all = false;\r\n            var frame_box = [\r\n                this.frame.bbox.left,\r\n                this.frame.bbox.top,\r\n                this.frame.bbox.width,\r\n                this.frame.bbox.height,\r\n            ];\r\n            var _j = this.canvas_view, primary = _j.primary, overlays = _j.overlays;\r\n            if (do_primary) {\r\n                primary.prepare();\r\n                this.canvas_view.prepare_webgl(frame_box);\r\n                this.canvas_view.clear_webgl();\r\n                this._map_hook(primary.ctx, frame_box);\r\n                this._paint_empty(primary.ctx, frame_box);\r\n                this._paint_outline(primary.ctx, frame_box);\r\n                this._paint_levels(primary.ctx, \"image\", frame_box, true);\r\n                this._paint_levels(primary.ctx, \"underlay\", frame_box, true);\r\n                this._paint_levels(primary.ctx, \"glyph\", frame_box, true);\r\n                this._paint_levels(primary.ctx, \"guide\", frame_box, false);\r\n                this._paint_levels(primary.ctx, \"annotation\", frame_box, false);\r\n                primary.finish();\r\n            }\r\n            if (do_overlays) {\r\n                overlays.prepare();\r\n                this._paint_levels(overlays.ctx, \"overlay\", frame_box, false);\r\n                overlays.finish();\r\n            }\r\n            if (this._initial_state_info.range == null)\r\n                this.set_initial_range();\r\n            this._needs_paint = false;\r\n        };\r\n        PlotView.prototype._paint_levels = function (ctx, level, clip_region, global_clip) {\r\n            var e_30, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this.computed_renderers), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var renderer = _d.value;\r\n                    if (renderer.level != level)\r\n                        continue;\r\n                    var renderer_view = this.renderer_views.get(renderer);\r\n                    ctx.save();\r\n                    if (global_clip || renderer_view.needs_clip) {\r\n                        ctx.beginPath();\r\n                        ctx.rect.apply(ctx, tslib_1.__spread(clip_region));\r\n                        ctx.clip();\r\n                    }\r\n                    renderer_view.render();\r\n                    ctx.restore();\r\n                    if (renderer_view.has_webgl && renderer_view.needs_webgl_blit) {\r\n                        this.canvas_view.blit_webgl(ctx);\r\n                        this.canvas_view.clear_webgl();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_30_1) {\r\n                e_30 = { error: e_30_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_30)\r\n                        throw e_30.error;\r\n                }\r\n            }\r\n        };\r\n        PlotView.prototype._map_hook = function (_ctx, _frame_box) { };\r\n        PlotView.prototype._paint_empty = function (ctx, frame_box) {\r\n            var _b = tslib_1.__read([0, 0, this.layout.bbox.width, this.layout.bbox.height], 4), cx = _b[0], cy = _b[1], cw = _b[2], ch = _b[3];\r\n            var _c = tslib_1.__read(frame_box, 4), fx = _c[0], fy = _c[1], fw = _c[2], fh = _c[3];\r\n            if (this.visuals.border_fill.doit) {\r\n                this.visuals.border_fill.set_value(ctx);\r\n                ctx.fillRect(cx, cy, cw, ch);\r\n                ctx.clearRect(fx, fy, fw, fh);\r\n            }\r\n            if (this.visuals.background_fill.doit) {\r\n                this.visuals.background_fill.set_value(ctx);\r\n                ctx.fillRect(fx, fy, fw, fh);\r\n            }\r\n        };\r\n        PlotView.prototype._paint_outline = function (ctx, frame_box) {\r\n            if (this.visuals.outline_line.doit) {\r\n                ctx.save();\r\n                this.visuals.outline_line.set_value(ctx);\r\n                var _b = tslib_1.__read(frame_box, 4), x0 = _b[0], y0 = _b[1], w = _b[2], h = _b[3];\r\n                // XXX: shrink outline region by 1px to make right and bottom lines visible\r\n                // if they are on the edge of the canvas.\r\n                if (x0 + w == this.layout.bbox.width) {\r\n                    w -= 1;\r\n                }\r\n                if (y0 + h == this.layout.bbox.height) {\r\n                    h -= 1;\r\n                }\r\n                ctx.strokeRect(x0, y0, w, h);\r\n                ctx.restore();\r\n            }\r\n        };\r\n        PlotView.prototype.to_blob = function () {\r\n            return this.canvas_view.to_blob();\r\n        };\r\n        PlotView.prototype.export = function (type, hidpi) {\r\n            if (hidpi === void 0) {\r\n                hidpi = true;\r\n            }\r\n            var output_backend = type == \"png\" ? \"canvas\" : \"svg\";\r\n            var composite = new canvas_1.CanvasLayer(output_backend, hidpi);\r\n            var _b = this.layout.bbox, width = _b.width, height = _b.height;\r\n            composite.resize(width, height);\r\n            var canvas = this.canvas_view.compose().canvas;\r\n            composite.ctx.drawImage(canvas, 0, 0);\r\n            return composite;\r\n        };\r\n        PlotView.prototype.serializable_state = function () {\r\n            var _a = _super.prototype.serializable_state.call(this), children = _a.children, state = __rest(_a, [\"children\"]);\r\n            var renderers = this.get_renderer_views()\r\n                .map(function (view) { return view.serializable_state(); })\r\n                .filter(function (item) { return \"bbox\" in item; });\r\n            return Object.assign(Object.assign({}, state), { children: tslib_1.__spread(children, renderers) }); // XXX\r\n        };\r\n        return PlotView;\r\n    }(layout_dom_1.LayoutDOMView));\r\n    exports.PlotView = PlotView;\r\n    PlotView.__name__ = \"PlotView\";\r\n}\r\n","/* core\\bokeh_events.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\r\n            r = Reflect.decorate(decorators, target, key, desc);\r\n        else\r\n            for (var i = decorators.length - 1; i >= 0; i--)\r\n                if (d = decorators[i])\r\n                    r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    };\r\n    function event(event_name) {\r\n        return function (cls) {\r\n            cls.prototype.event_name = event_name;\r\n        };\r\n    }\r\n    var BokehEvent = /** @class */ (function () {\r\n        function BokehEvent() {\r\n        }\r\n        BokehEvent.prototype.to_json = function () {\r\n            var event_name = this.event_name;\r\n            return { event_name: event_name, event_values: this._to_json() };\r\n        };\r\n        return BokehEvent;\r\n    }());\r\n    exports.BokehEvent = BokehEvent;\r\n    BokehEvent.__name__ = \"BokehEvent\";\r\n    var ModelEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ModelEvent, _super);\r\n        function ModelEvent() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.origin = null;\r\n            return _this;\r\n        }\r\n        ModelEvent.prototype._to_json = function () {\r\n            return { model: this.origin };\r\n        };\r\n        return ModelEvent;\r\n    }(BokehEvent));\r\n    exports.ModelEvent = ModelEvent;\r\n    ModelEvent.__name__ = \"ModelEvent\";\r\n    var DocumentReady = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DocumentReady, _super);\r\n        function DocumentReady() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        DocumentReady.prototype._to_json = function () {\r\n            return {};\r\n        };\r\n        return DocumentReady;\r\n    }(BokehEvent));\r\n    exports.DocumentReady = DocumentReady;\r\n    DocumentReady.__name__ = \"DocumentReady\";\r\n    exports.DocumentReady = DocumentReady = __decorate([\r\n        event(\"document_ready\")\r\n    ], DocumentReady);\r\n    var ButtonClick = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ButtonClick, _super);\r\n        function ButtonClick() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return ButtonClick;\r\n    }(ModelEvent));\r\n    exports.ButtonClick = ButtonClick;\r\n    ButtonClick.__name__ = \"ButtonClick\";\r\n    exports.ButtonClick = ButtonClick = __decorate([\r\n        event(\"button_click\")\r\n    ], ButtonClick);\r\n    var MenuItemClick = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MenuItemClick, _super);\r\n        function MenuItemClick(item) {\r\n            var _this = _super.call(this) || this;\r\n            _this.item = item;\r\n            return _this;\r\n        }\r\n        MenuItemClick.prototype._to_json = function () {\r\n            var item = this.item;\r\n            return Object.assign(Object.assign({}, _super.prototype._to_json.call(this)), { item: item });\r\n        };\r\n        return MenuItemClick;\r\n    }(ModelEvent));\r\n    exports.MenuItemClick = MenuItemClick;\r\n    MenuItemClick.__name__ = \"MenuItemClick\";\r\n    exports.MenuItemClick = MenuItemClick = __decorate([\r\n        event(\"menu_item_click\")\r\n    ], MenuItemClick);\r\n    // A UIEvent is an event originating on a canvas this includes.\r\n    // DOM events such as keystrokes as well as hammer events and LOD events.\r\n    var UIEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(UIEvent, _super);\r\n        function UIEvent() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return UIEvent;\r\n    }(ModelEvent));\r\n    exports.UIEvent = UIEvent;\r\n    UIEvent.__name__ = \"UIEvent\";\r\n    var LODStart = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LODStart, _super);\r\n        function LODStart() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return LODStart;\r\n    }(UIEvent));\r\n    exports.LODStart = LODStart;\r\n    LODStart.__name__ = \"LODStart\";\r\n    exports.LODStart = LODStart = __decorate([\r\n        event(\"lodstart\")\r\n    ], LODStart);\r\n    var LODEnd = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LODEnd, _super);\r\n        function LODEnd() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return LODEnd;\r\n    }(UIEvent));\r\n    exports.LODEnd = LODEnd;\r\n    LODEnd.__name__ = \"LODEnd\";\r\n    exports.LODEnd = LODEnd = __decorate([\r\n        event(\"lodend\")\r\n    ], LODEnd);\r\n    var SelectionGeometry = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SelectionGeometry, _super);\r\n        function SelectionGeometry(geometry, final) {\r\n            var _this = _super.call(this) || this;\r\n            _this.geometry = geometry;\r\n            _this.final = final;\r\n            return _this;\r\n        }\r\n        SelectionGeometry.prototype._to_json = function () {\r\n            var _a = this, geometry = _a.geometry, final = _a.final;\r\n            return Object.assign(Object.assign({}, _super.prototype._to_json.call(this)), { geometry: geometry, final: final });\r\n        };\r\n        return SelectionGeometry;\r\n    }(UIEvent));\r\n    exports.SelectionGeometry = SelectionGeometry;\r\n    SelectionGeometry.__name__ = \"SelectionGeometry\";\r\n    exports.SelectionGeometry = SelectionGeometry = __decorate([\r\n        event(\"selectiongeometry\")\r\n    ], SelectionGeometry);\r\n    var Reset = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Reset, _super);\r\n        function Reset() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return Reset;\r\n    }(UIEvent));\r\n    exports.Reset = Reset;\r\n    Reset.__name__ = \"Reset\";\r\n    exports.Reset = Reset = __decorate([\r\n        event(\"reset\")\r\n    ], Reset);\r\n    var PointEvent = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PointEvent, _super);\r\n        function PointEvent(sx, sy, x, y) {\r\n            var _this = _super.call(this) || this;\r\n            _this.sx = sx;\r\n            _this.sy = sy;\r\n            _this.x = x;\r\n            _this.y = y;\r\n            return _this;\r\n        }\r\n        PointEvent.prototype._to_json = function () {\r\n            var _a = this, sx = _a.sx, sy = _a.sy, x = _a.x, y = _a.y;\r\n            return Object.assign(Object.assign({}, _super.prototype._to_json.call(this)), { sx: sx, sy: sy, x: x, y: y });\r\n        };\r\n        return PointEvent;\r\n    }(UIEvent));\r\n    exports.PointEvent = PointEvent;\r\n    PointEvent.__name__ = \"PointEvent\";\r\n    var Pan = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Pan, _super);\r\n        /* TODO: direction: -1 | 1 */\r\n        function Pan(sx, sy, x, y, delta_x, delta_y) {\r\n            var _this = _super.call(this, sx, sy, x, y) || this;\r\n            _this.sx = sx;\r\n            _this.sy = sy;\r\n            _this.x = x;\r\n            _this.y = y;\r\n            _this.delta_x = delta_x;\r\n            _this.delta_y = delta_y;\r\n            return _this;\r\n        }\r\n        Pan.prototype._to_json = function () {\r\n            var _a = this, delta_x = _a.delta_x, delta_y = _a.delta_y /*, direction*/;\r\n            return Object.assign(Object.assign({}, _super.prototype._to_json.call(this)), { delta_x: delta_x, delta_y: delta_y /*, direction*/ });\r\n        };\r\n        return Pan;\r\n    }(PointEvent));\r\n    exports.Pan = Pan;\r\n    Pan.__name__ = \"Pan\";\r\n    exports.Pan = Pan = __decorate([\r\n        event(\"pan\")\r\n    ], Pan);\r\n    var Pinch = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Pinch, _super);\r\n        function Pinch(sx, sy, x, y, scale) {\r\n            var _this = _super.call(this, sx, sy, x, y) || this;\r\n            _this.sx = sx;\r\n            _this.sy = sy;\r\n            _this.x = x;\r\n            _this.y = y;\r\n            _this.scale = scale;\r\n            return _this;\r\n        }\r\n        Pinch.prototype._to_json = function () {\r\n            var scale = this.scale;\r\n            return Object.assign(Object.assign({}, _super.prototype._to_json.call(this)), { scale: scale });\r\n        };\r\n        return Pinch;\r\n    }(PointEvent));\r\n    exports.Pinch = Pinch;\r\n    Pinch.__name__ = \"Pinch\";\r\n    exports.Pinch = Pinch = __decorate([\r\n        event(\"pinch\")\r\n    ], Pinch);\r\n    var Rotate = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Rotate, _super);\r\n        function Rotate(sx, sy, x, y, rotation) {\r\n            var _this = _super.call(this, sx, sy, x, y) || this;\r\n            _this.sx = sx;\r\n            _this.sy = sy;\r\n            _this.x = x;\r\n            _this.y = y;\r\n            _this.rotation = rotation;\r\n            return _this;\r\n        }\r\n        Rotate.prototype._to_json = function () {\r\n            var rotation = this.rotation;\r\n            return Object.assign(Object.assign({}, _super.prototype._to_json.call(this)), { rotation: rotation });\r\n        };\r\n        return Rotate;\r\n    }(PointEvent));\r\n    exports.Rotate = Rotate;\r\n    Rotate.__name__ = \"Rotate\";\r\n    exports.Rotate = Rotate = __decorate([\r\n        event(\"rotate\")\r\n    ], Rotate);\r\n    var MouseWheel = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MouseWheel, _super);\r\n        function MouseWheel(sx, sy, x, y, delta) {\r\n            var _this = _super.call(this, sx, sy, x, y) || this;\r\n            _this.sx = sx;\r\n            _this.sy = sy;\r\n            _this.x = x;\r\n            _this.y = y;\r\n            _this.delta = delta;\r\n            return _this;\r\n        }\r\n        MouseWheel.prototype._to_json = function () {\r\n            var delta = this.delta;\r\n            return Object.assign(Object.assign({}, _super.prototype._to_json.call(this)), { delta: delta });\r\n        };\r\n        return MouseWheel;\r\n    }(PointEvent));\r\n    exports.MouseWheel = MouseWheel;\r\n    MouseWheel.__name__ = \"MouseWheel\";\r\n    exports.MouseWheel = MouseWheel = __decorate([\r\n        event(\"wheel\")\r\n    ], MouseWheel);\r\n    var MouseMove = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MouseMove, _super);\r\n        function MouseMove() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return MouseMove;\r\n    }(PointEvent));\r\n    exports.MouseMove = MouseMove;\r\n    MouseMove.__name__ = \"MouseMove\";\r\n    exports.MouseMove = MouseMove = __decorate([\r\n        event(\"mousemove\")\r\n    ], MouseMove);\r\n    var MouseEnter = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MouseEnter, _super);\r\n        function MouseEnter() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return MouseEnter;\r\n    }(PointEvent));\r\n    exports.MouseEnter = MouseEnter;\r\n    MouseEnter.__name__ = \"MouseEnter\";\r\n    exports.MouseEnter = MouseEnter = __decorate([\r\n        event(\"mouseenter\")\r\n    ], MouseEnter);\r\n    var MouseLeave = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MouseLeave, _super);\r\n        function MouseLeave() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return MouseLeave;\r\n    }(PointEvent));\r\n    exports.MouseLeave = MouseLeave;\r\n    MouseLeave.__name__ = \"MouseLeave\";\r\n    exports.MouseLeave = MouseLeave = __decorate([\r\n        event(\"mouseleave\")\r\n    ], MouseLeave);\r\n    var Tap = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Tap, _super);\r\n        function Tap() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return Tap;\r\n    }(PointEvent));\r\n    exports.Tap = Tap;\r\n    Tap.__name__ = \"Tap\";\r\n    exports.Tap = Tap = __decorate([\r\n        event(\"tap\")\r\n    ], Tap);\r\n    var DoubleTap = /** @class */ (function (_super) {\r\n        tslib_1.__extends(DoubleTap, _super);\r\n        function DoubleTap() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return DoubleTap;\r\n    }(PointEvent));\r\n    exports.DoubleTap = DoubleTap;\r\n    DoubleTap.__name__ = \"DoubleTap\";\r\n    exports.DoubleTap = DoubleTap = __decorate([\r\n        event(\"doubletap\")\r\n    ], DoubleTap);\r\n    var Press = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Press, _super);\r\n        function Press() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return Press;\r\n    }(PointEvent));\r\n    exports.Press = Press;\r\n    Press.__name__ = \"Press\";\r\n    exports.Press = Press = __decorate([\r\n        event(\"press\")\r\n    ], Press);\r\n    var PressUp = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PressUp, _super);\r\n        function PressUp() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return PressUp;\r\n    }(PointEvent));\r\n    exports.PressUp = PressUp;\r\n    PressUp.__name__ = \"PressUp\";\r\n    exports.PressUp = PressUp = __decorate([\r\n        event(\"pressup\")\r\n    ], PressUp);\r\n    var PanStart = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PanStart, _super);\r\n        function PanStart() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return PanStart;\r\n    }(PointEvent));\r\n    exports.PanStart = PanStart;\r\n    PanStart.__name__ = \"PanStart\";\r\n    exports.PanStart = PanStart = __decorate([\r\n        event(\"panstart\")\r\n    ], PanStart);\r\n    var PanEnd = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PanEnd, _super);\r\n        function PanEnd() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return PanEnd;\r\n    }(PointEvent));\r\n    exports.PanEnd = PanEnd;\r\n    PanEnd.__name__ = \"PanEnd\";\r\n    exports.PanEnd = PanEnd = __decorate([\r\n        event(\"panend\")\r\n    ], PanEnd);\r\n    var PinchStart = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PinchStart, _super);\r\n        function PinchStart() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return PinchStart;\r\n    }(PointEvent));\r\n    exports.PinchStart = PinchStart;\r\n    PinchStart.__name__ = \"PinchStart\";\r\n    exports.PinchStart = PinchStart = __decorate([\r\n        event(\"pinchstart\")\r\n    ], PinchStart);\r\n    var PinchEnd = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PinchEnd, _super);\r\n        function PinchEnd() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return PinchEnd;\r\n    }(PointEvent));\r\n    exports.PinchEnd = PinchEnd;\r\n    PinchEnd.__name__ = \"PinchEnd\";\r\n    exports.PinchEnd = PinchEnd = __decorate([\r\n        event(\"pinchend\")\r\n    ], PinchEnd);\r\n    var RotateStart = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RotateStart, _super);\r\n        function RotateStart() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return RotateStart;\r\n    }(PointEvent));\r\n    exports.RotateStart = RotateStart;\r\n    RotateStart.__name__ = \"RotateStart\";\r\n    exports.RotateStart = RotateStart = __decorate([\r\n        event(\"rotatestart\")\r\n    ], RotateStart);\r\n    var RotateEnd = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RotateEnd, _super);\r\n        function RotateEnd() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return RotateEnd;\r\n    }(PointEvent));\r\n    exports.RotateEnd = RotateEnd;\r\n    RotateEnd.__name__ = \"RotateEnd\";\r\n    exports.RotateEnd = RotateEnd = __decorate([\r\n        event(\"rotateend\")\r\n    ], RotateEnd);\r\n}\r\n","/* core\\ui_events.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var hammerjs_1 = tslib_1.__importDefault(require(412) /* hammerjs */);\r\n    var signaling_1 = require(130) /* ./signaling */;\r\n    var logging_1 = require(134) /* ./logging */;\r\n    var dom_1 = require(187) /* ./dom */;\r\n    var events = tslib_1.__importStar(require(428) /* ./bokeh_events */);\r\n    var wheel_1 = require(430) /* ./util/wheel */;\r\n    var array_1 = require(124) /* ./util/array */;\r\n    var types_1 = require(123) /* ./util/types */;\r\n    var compat_1 = require(147) /* ./util/compat */;\r\n    var menus_1 = require(417) /* ./util/menus */;\r\n    function is_touch(event) {\r\n        return typeof TouchEvent !== \"undefined\" && event instanceof TouchEvent;\r\n    }\r\n    var UIEvents = /** @class */ (function () {\r\n        function UIEvents(plot_view, toolbar, hit_area) {\r\n            var _this = this;\r\n            this.plot_view = plot_view;\r\n            this.toolbar = toolbar;\r\n            this.hit_area = hit_area;\r\n            this.pan_start = new signaling_1.Signal(this, 'pan:start');\r\n            this.pan = new signaling_1.Signal(this, 'pan');\r\n            this.pan_end = new signaling_1.Signal(this, 'pan:end');\r\n            this.pinch_start = new signaling_1.Signal(this, 'pinch:start');\r\n            this.pinch = new signaling_1.Signal(this, 'pinch');\r\n            this.pinch_end = new signaling_1.Signal(this, 'pinch:end');\r\n            this.rotate_start = new signaling_1.Signal(this, 'rotate:start');\r\n            this.rotate = new signaling_1.Signal(this, 'rotate');\r\n            this.rotate_end = new signaling_1.Signal(this, 'rotate:end');\r\n            this.tap = new signaling_1.Signal(this, 'tap');\r\n            this.doubletap = new signaling_1.Signal(this, 'doubletap');\r\n            this.press = new signaling_1.Signal(this, 'press');\r\n            this.pressup = new signaling_1.Signal(this, 'pressup');\r\n            this.move_enter = new signaling_1.Signal(this, 'move:enter');\r\n            this.move = new signaling_1.Signal(this, 'move');\r\n            this.move_exit = new signaling_1.Signal(this, 'move:exit');\r\n            this.scroll = new signaling_1.Signal(this, 'scroll');\r\n            this.keydown = new signaling_1.Signal(this, 'keydown');\r\n            this.keyup = new signaling_1.Signal(this, 'keyup');\r\n            this.hammer = new hammerjs_1.default(this.hit_area, {\r\n                touchAction: 'auto',\r\n                inputClass: hammerjs_1.default.TouchMouseInput,\r\n            });\r\n            this._configure_hammerjs();\r\n            // Mouse & keyboard events not handled through hammerjs\r\n            // We can 'add and forget' these event listeners because this.hit_area is a DOM element\r\n            // that will be thrown away when the view is removed\r\n            this.hit_area.addEventListener(\"mousemove\", function (e) { return _this._mouse_move(e); });\r\n            this.hit_area.addEventListener(\"mouseenter\", function (e) { return _this._mouse_enter(e); });\r\n            this.hit_area.addEventListener(\"mouseleave\", function (e) { return _this._mouse_exit(e); });\r\n            this.hit_area.addEventListener(\"contextmenu\", function (e) { return _this._context_menu(e); });\r\n            this.hit_area.addEventListener(\"wheel\", function (e) { return _this._mouse_wheel(e); });\r\n            // But we MUST remove listeners registered on document or we'll leak memory: register\r\n            // 'this' as the listener (it implements the event listener interface, i.e. handleEvent)\r\n            // instead of an anonymous function so we can easily refer back to it for removing\r\n            document.addEventListener(\"keydown\", this);\r\n            document.addEventListener(\"keyup\", this);\r\n            this.menu = new menus_1.ContextMenu([], {\r\n                prevent_hide: function (event) { return event.button == 2 && event.target == _this.hit_area; },\r\n            });\r\n            this.hit_area.appendChild(this.menu.el);\r\n        }\r\n        UIEvents.prototype.destroy = function () {\r\n            this.menu.remove();\r\n            this.hammer.destroy();\r\n            document.removeEventListener(\"keydown\", this);\r\n            document.removeEventListener(\"keyup\", this);\r\n        };\r\n        UIEvents.prototype.handleEvent = function (e) {\r\n            if (e.type == \"keydown\")\r\n                this._key_down(e);\r\n            else if (e.type == \"keyup\")\r\n                this._key_up(e);\r\n        };\r\n        UIEvents.prototype._configure_hammerjs = function () {\r\n            var _this = this;\r\n            // This is to be able to distinguish double taps from single taps\r\n            this.hammer.get('doubletap').recognizeWith('tap');\r\n            this.hammer.get('tap').requireFailure('doubletap');\r\n            this.hammer.get('doubletap').dropRequireFailure('tap');\r\n            this.hammer.on('doubletap', function (e) { return _this._doubletap(e); });\r\n            this.hammer.on('tap', function (e) { return _this._tap(e); });\r\n            this.hammer.on('press', function (e) { return _this._press(e); });\r\n            this.hammer.on('pressup', function (e) { return _this._pressup(e); });\r\n            this.hammer.get('pan').set({ direction: hammerjs_1.default.DIRECTION_ALL });\r\n            this.hammer.on('panstart', function (e) { return _this._pan_start(e); });\r\n            this.hammer.on('pan', function (e) { return _this._pan(e); });\r\n            this.hammer.on('panend', function (e) { return _this._pan_end(e); });\r\n            this.hammer.get('pinch').set({ enable: true });\r\n            this.hammer.on('pinchstart', function (e) { return _this._pinch_start(e); });\r\n            this.hammer.on('pinch', function (e) { return _this._pinch(e); });\r\n            this.hammer.on('pinchend', function (e) { return _this._pinch_end(e); });\r\n            this.hammer.get('rotate').set({ enable: true });\r\n            this.hammer.on('rotatestart', function (e) { return _this._rotate_start(e); });\r\n            this.hammer.on('rotate', function (e) { return _this._rotate(e); });\r\n            this.hammer.on('rotateend', function (e) { return _this._rotate_end(e); });\r\n        };\r\n        UIEvents.prototype.register_tool = function (tool_view) {\r\n            var _this = this;\r\n            var et = tool_view.model.event_type;\r\n            if (et != null) {\r\n                if (types_1.isString(et))\r\n                    this._register_tool(tool_view, et);\r\n                else {\r\n                    // Multi-tools should only registered shared events once\r\n                    et.forEach(function (e, index) { return _this._register_tool(tool_view, e, index < 1); });\r\n                }\r\n            }\r\n        };\r\n        UIEvents.prototype._register_tool = function (tool_view, et, shared) {\r\n            if (shared === void 0) {\r\n                shared = true;\r\n            }\r\n            var v = tool_view;\r\n            var id = v.model.id;\r\n            var conditionally = function (fn) {\r\n                return function (arg) {\r\n                    if (arg.id == id)\r\n                        fn(arg.e);\r\n                };\r\n            };\r\n            var unconditionally = function (fn) {\r\n                return function (arg) {\r\n                    fn(arg.e);\r\n                };\r\n            };\r\n            switch (et) {\r\n                case \"pan\": {\r\n                    if (v._pan_start != null)\r\n                        v.connect(this.pan_start, conditionally(v._pan_start.bind(v)));\r\n                    if (v._pan != null)\r\n                        v.connect(this.pan, conditionally(v._pan.bind(v)));\r\n                    if (v._pan_end != null)\r\n                        v.connect(this.pan_end, conditionally(v._pan_end.bind(v)));\r\n                    break;\r\n                }\r\n                case \"pinch\": {\r\n                    if (v._pinch_start != null)\r\n                        v.connect(this.pinch_start, conditionally(v._pinch_start.bind(v)));\r\n                    if (v._pinch != null)\r\n                        v.connect(this.pinch, conditionally(v._pinch.bind(v)));\r\n                    if (v._pinch_end != null)\r\n                        v.connect(this.pinch_end, conditionally(v._pinch_end.bind(v)));\r\n                    break;\r\n                }\r\n                case \"rotate\": {\r\n                    if (v._rotate_start != null)\r\n                        v.connect(this.rotate_start, conditionally(v._rotate_start.bind(v)));\r\n                    if (v._rotate != null)\r\n                        v.connect(this.rotate, conditionally(v._rotate.bind(v)));\r\n                    if (v._rotate_end != null)\r\n                        v.connect(this.rotate_end, conditionally(v._rotate_end.bind(v)));\r\n                    break;\r\n                }\r\n                case \"move\": {\r\n                    if (v._move_enter != null)\r\n                        v.connect(this.move_enter, conditionally(v._move_enter.bind(v)));\r\n                    if (v._move != null)\r\n                        v.connect(this.move, conditionally(v._move.bind(v)));\r\n                    if (v._move_exit != null)\r\n                        v.connect(this.move_exit, conditionally(v._move_exit.bind(v)));\r\n                    break;\r\n                }\r\n                case \"tap\": {\r\n                    if (v._tap != null)\r\n                        v.connect(this.tap, conditionally(v._tap.bind(v)));\r\n                    break;\r\n                }\r\n                case \"press\": {\r\n                    if (v._press != null)\r\n                        v.connect(this.press, conditionally(v._press.bind(v)));\r\n                    if (v._pressup != null)\r\n                        v.connect(this.pressup, conditionally(v._pressup.bind(v)));\r\n                    break;\r\n                }\r\n                case \"scroll\": {\r\n                    if (v._scroll != null)\r\n                        v.connect(this.scroll, conditionally(v._scroll.bind(v)));\r\n                    break;\r\n                }\r\n                default:\r\n                    throw new Error(\"unsupported event_type: \" + et);\r\n            }\r\n            // Skip shared events if registering multi-tool\r\n            if (!shared)\r\n                return;\r\n            if (v._doubletap != null)\r\n                v.connect(this.doubletap, unconditionally(v._doubletap.bind(v)));\r\n            if (v._keydown != null)\r\n                v.connect(this.keydown, unconditionally(v._keydown.bind(v)));\r\n            if (v._keyup != null)\r\n                v.connect(this.keyup, unconditionally(v._keyup.bind(v)));\r\n            // Dual touch hack part 1/2\r\n            // This is a hack for laptops with touch screen who may be pinching or scrolling\r\n            // in order to use the wheel zoom tool. If it's a touch screen the WheelZoomTool event\r\n            // will be linked to pinch. But we also want to trigger in the case of a scroll.\r\n            if (compat_1.is_mobile && v._scroll != null && et == 'pinch') {\r\n                logging_1.logger.debug(\"Registering scroll on touch screen\");\r\n                v.connect(this.scroll, conditionally(v._scroll.bind(v)));\r\n            }\r\n        };\r\n        UIEvents.prototype._hit_test_renderers = function (sx, sy) {\r\n            var e_1, _a;\r\n            var views = this.plot_view.get_renderer_views();\r\n            try {\r\n                for (var _b = tslib_1.__values(array_1.reversed(views)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var view = _c.value;\r\n                    var level = view.model.level;\r\n                    if ((level == 'annotation' || level == 'overlay') && view.interactive_hit != null) {\r\n                        if (view.interactive_hit(sx, sy))\r\n                            return view;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        UIEvents.prototype._hit_test_frame = function (sx, sy) {\r\n            return this.plot_view.frame.bbox.contains(sx, sy);\r\n        };\r\n        UIEvents.prototype._hit_test_canvas = function (sx, sy) {\r\n            return this.plot_view.layout.bbox.contains(sx, sy);\r\n        };\r\n        UIEvents.prototype._trigger = function (signal, e, srcEvent) {\r\n            var _this = this;\r\n            var gestures = this.toolbar.gestures;\r\n            var event_type = signal.name;\r\n            var base_type = event_type.split(\":\")[0];\r\n            var view = this._hit_test_renderers(e.sx, e.sy);\r\n            var on_canvas = this._hit_test_canvas(e.sx, e.sy);\r\n            switch (base_type) {\r\n                case \"move\": {\r\n                    var active_gesture = gestures[base_type].active;\r\n                    if (active_gesture != null)\r\n                        this.trigger(signal, e, active_gesture.id);\r\n                    var active_inspectors = this.toolbar.inspectors.filter(function (t) { return t.active; });\r\n                    var cursor = \"default\";\r\n                    // the event happened on a renderer\r\n                    if (view != null) {\r\n                        cursor = view.cursor(e.sx, e.sy) || cursor;\r\n                        if (!array_1.is_empty(active_inspectors)) {\r\n                            // override event_type to cause inspectors to clear overlays\r\n                            signal = this.move_exit; // XXX\r\n                        }\r\n                        // the event happened on the plot frame but off a renderer\r\n                    }\r\n                    else if (this._hit_test_frame(e.sx, e.sy)) {\r\n                        if (!array_1.is_empty(active_inspectors)) {\r\n                            cursor = \"crosshair\";\r\n                        }\r\n                    }\r\n                    this.plot_view.set_cursor(cursor);\r\n                    this.plot_view.set_toolbar_visibility(on_canvas);\r\n                    active_inspectors.map(function (inspector) { return _this.trigger(signal, e, inspector.id); });\r\n                    break;\r\n                }\r\n                case \"tap\": {\r\n                    var target = srcEvent.target;\r\n                    if (target != null && target != this.hit_area)\r\n                        return; // don't trigger bokeh events\r\n                    if (view != null && view.on_hit != null)\r\n                        view.on_hit(e.sx, e.sy);\r\n                    var active_gesture = gestures[base_type].active;\r\n                    if (active_gesture != null)\r\n                        this.trigger(signal, e, active_gesture.id);\r\n                    break;\r\n                }\r\n                case \"scroll\": {\r\n                    // Dual touch hack part 2/2\r\n                    // This is a hack for laptops with touch screen who may be pinching or scrolling\r\n                    // in order to use the wheel zoom tool. If it's a touch screen the WheelZoomTool event\r\n                    // will be linked to pinch. But we also want to trigger in the case of a scroll.\r\n                    var base = compat_1.is_mobile ? \"pinch\" : \"scroll\";\r\n                    var active_gesture = gestures[base].active;\r\n                    if (active_gesture != null) {\r\n                        srcEvent.preventDefault();\r\n                        srcEvent.stopPropagation();\r\n                        this.trigger(signal, e, active_gesture.id);\r\n                    }\r\n                    break;\r\n                }\r\n                case \"pan\": {\r\n                    var active_gesture = gestures[base_type].active;\r\n                    if (active_gesture != null) {\r\n                        srcEvent.preventDefault();\r\n                        this.trigger(signal, e, active_gesture.id);\r\n                    }\r\n                    break;\r\n                }\r\n                default: {\r\n                    var active_gesture = gestures[base_type].active;\r\n                    if (active_gesture != null)\r\n                        this.trigger(signal, e, active_gesture.id);\r\n                }\r\n            }\r\n            this._trigger_bokeh_event(e);\r\n        };\r\n        UIEvents.prototype.trigger = function (signal, e, id) {\r\n            if (id === void 0) {\r\n                id = null;\r\n            }\r\n            signal.emit({ id: id, e: e });\r\n        };\r\n        UIEvents.prototype._trigger_bokeh_event = function (e) {\r\n            var _this = this;\r\n            var ev = (function () {\r\n                var sx = e.sx, sy = e.sy;\r\n                var x = _this.plot_view.frame.x_scale.invert(sx);\r\n                var y = _this.plot_view.frame.y_scale.invert(sy);\r\n                switch (e.type) {\r\n                    case \"wheel\":\r\n                        return new events.MouseWheel(sx, sy, x, y, e.delta);\r\n                    case \"mousemove\":\r\n                        return new events.MouseMove(sx, sy, x, y);\r\n                    case \"mouseenter\":\r\n                        return new events.MouseEnter(sx, sy, x, y);\r\n                    case \"mouseleave\":\r\n                        return new events.MouseLeave(sx, sy, x, y);\r\n                    case \"tap\":\r\n                        return new events.Tap(sx, sy, x, y);\r\n                    case \"doubletap\":\r\n                        return new events.DoubleTap(sx, sy, x, y);\r\n                    case \"press\":\r\n                        return new events.Press(sx, sy, x, y);\r\n                    case \"pressup\":\r\n                        return new events.PressUp(sx, sy, x, y);\r\n                    case \"pan\":\r\n                        return new events.Pan(sx, sy, x, y, e.deltaX, e.deltaY);\r\n                    case \"panstart\":\r\n                        return new events.PanStart(sx, sy, x, y);\r\n                    case \"panend\":\r\n                        return new events.PanEnd(sx, sy, x, y);\r\n                    case \"pinch\":\r\n                        return new events.Pinch(sx, sy, x, y, e.scale);\r\n                    case \"pinchstart\":\r\n                        return new events.PinchStart(sx, sy, x, y);\r\n                    case \"pinchend\":\r\n                        return new events.PinchEnd(sx, sy, x, y);\r\n                    case \"rotate\":\r\n                        return new events.Rotate(sx, sy, x, y, e.rotation);\r\n                    case \"rotatestart\":\r\n                        return new events.RotateStart(sx, sy, x, y);\r\n                    case \"rotateend\":\r\n                        return new events.RotateEnd(sx, sy, x, y);\r\n                    default:\r\n                        return undefined;\r\n                }\r\n            })();\r\n            if (ev != null)\r\n                this.plot_view.model.trigger_event(ev);\r\n        };\r\n        UIEvents.prototype._get_sxy = function (event) {\r\n            var _a = is_touch(event) ? (event.touches.length != 0 ? event.touches : event.changedTouches)[0] : event, pageX = _a.pageX, pageY = _a.pageY;\r\n            var _b = dom_1.offset(this.hit_area), left = _b.left, top = _b.top;\r\n            return {\r\n                sx: pageX - left,\r\n                sy: pageY - top,\r\n            };\r\n        };\r\n        UIEvents.prototype._pan_event = function (e) {\r\n            return Object.assign(Object.assign({ type: e.type }, this._get_sxy(e.srcEvent)), { deltaX: e.deltaX, deltaY: e.deltaY, shiftKey: e.srcEvent.shiftKey, ctrlKey: e.srcEvent.ctrlKey });\r\n        };\r\n        UIEvents.prototype._pinch_event = function (e) {\r\n            return Object.assign(Object.assign({ type: e.type }, this._get_sxy(e.srcEvent)), { scale: e.scale, shiftKey: e.srcEvent.shiftKey, ctrlKey: e.srcEvent.ctrlKey });\r\n        };\r\n        UIEvents.prototype._rotate_event = function (e) {\r\n            return Object.assign(Object.assign({ type: e.type }, this._get_sxy(e.srcEvent)), { rotation: e.rotation, shiftKey: e.srcEvent.shiftKey, ctrlKey: e.srcEvent.ctrlKey });\r\n        };\r\n        UIEvents.prototype._tap_event = function (e) {\r\n            return Object.assign(Object.assign({ type: e.type }, this._get_sxy(e.srcEvent)), { shiftKey: e.srcEvent.shiftKey, ctrlKey: e.srcEvent.ctrlKey });\r\n        };\r\n        UIEvents.prototype._move_event = function (e) {\r\n            return Object.assign(Object.assign({ type: e.type }, this._get_sxy(e)), { shiftKey: e.shiftKey, ctrlKey: e.ctrlKey });\r\n        };\r\n        UIEvents.prototype._scroll_event = function (e) {\r\n            return Object.assign(Object.assign({ type: e.type }, this._get_sxy(e)), { delta: wheel_1.getDeltaY(e), shiftKey: e.shiftKey, ctrlKey: e.ctrlKey });\r\n        };\r\n        UIEvents.prototype._key_event = function (e) {\r\n            return {\r\n                type: e.type,\r\n                keyCode: e.keyCode,\r\n            };\r\n        };\r\n        UIEvents.prototype._pan_start = function (e) {\r\n            var ev = this._pan_event(e);\r\n            // back out delta to get original center point\r\n            ev.sx -= e.deltaX;\r\n            ev.sy -= e.deltaY;\r\n            this._trigger(this.pan_start, ev, e.srcEvent);\r\n        };\r\n        UIEvents.prototype._pan = function (e) {\r\n            this._trigger(this.pan, this._pan_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._pan_end = function (e) {\r\n            this._trigger(this.pan_end, this._pan_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._pinch_start = function (e) {\r\n            this._trigger(this.pinch_start, this._pinch_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._pinch = function (e) {\r\n            this._trigger(this.pinch, this._pinch_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._pinch_end = function (e) {\r\n            this._trigger(this.pinch_end, this._pinch_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._rotate_start = function (e) {\r\n            this._trigger(this.rotate_start, this._rotate_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._rotate = function (e) {\r\n            this._trigger(this.rotate, this._rotate_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._rotate_end = function (e) {\r\n            this._trigger(this.rotate_end, this._rotate_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._tap = function (e) {\r\n            this._trigger(this.tap, this._tap_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._doubletap = function (e) {\r\n            // NOTE: doubletap event triggered unconditionally\r\n            var ev = this._tap_event(e);\r\n            this._trigger_bokeh_event(ev);\r\n            this.trigger(this.doubletap, ev);\r\n        };\r\n        UIEvents.prototype._press = function (e) {\r\n            this._trigger(this.press, this._tap_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._pressup = function (e) {\r\n            this._trigger(this.pressup, this._tap_event(e), e.srcEvent);\r\n        };\r\n        UIEvents.prototype._mouse_enter = function (e) {\r\n            this._trigger(this.move_enter, this._move_event(e), e);\r\n        };\r\n        UIEvents.prototype._mouse_move = function (e) {\r\n            this._trigger(this.move, this._move_event(e), e);\r\n        };\r\n        UIEvents.prototype._mouse_exit = function (e) {\r\n            this._trigger(this.move_exit, this._move_event(e), e);\r\n        };\r\n        UIEvents.prototype._mouse_wheel = function (e) {\r\n            this._trigger(this.scroll, this._scroll_event(e), e);\r\n        };\r\n        UIEvents.prototype._context_menu = function (e) {\r\n            if (!this.menu.is_open && this.menu.can_open) {\r\n                e.preventDefault();\r\n            }\r\n            var _a = this._get_sxy(e), sx = _a.sx, sy = _a.sy;\r\n            this.menu.toggle({ left: sx, top: sy });\r\n        };\r\n        UIEvents.prototype._key_down = function (e) {\r\n            // NOTE: keyup event triggered unconditionally\r\n            this.trigger(this.keydown, this._key_event(e));\r\n        };\r\n        UIEvents.prototype._key_up = function (e) {\r\n            // NOTE: keyup event triggered unconditionally\r\n            this.trigger(this.keyup, this._key_event(e));\r\n        };\r\n        return UIEvents;\r\n    }());\r\n    exports.UIEvents = UIEvents;\r\n    UIEvents.__name__ = \"UIEvents\";\r\n}\r\n","/* core\\util\\wheel.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    /*!\r\n     * jQuery Mousewheel 3.1.13\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license\r\n     * http://jquery.org/license\r\n     */\r\n    function fontSize(element) {\r\n        var value = getComputedStyle(element).fontSize;\r\n        if (value != null)\r\n            return parseInt(value, 10);\r\n        return null;\r\n    }\r\n    function lineHeight(element) {\r\n        var parent = element.offsetParent || document.body;\r\n        return fontSize(parent) || fontSize(element) || 16;\r\n    }\r\n    function pageHeight(element) {\r\n        return element.clientHeight; // XXX: should be content height?\r\n    }\r\n    function getDeltaY(event) {\r\n        var deltaY = -event.deltaY;\r\n        if (event.target instanceof HTMLElement) {\r\n            switch (event.deltaMode) {\r\n                case event.DOM_DELTA_LINE:\r\n                    deltaY *= lineHeight(event.target);\r\n                    break;\r\n                case event.DOM_DELTA_PAGE:\r\n                    deltaY *= pageHeight(event.target);\r\n                    break;\r\n            }\r\n        }\r\n        return deltaY;\r\n    }\r\n    exports.getDeltaY = getDeltaY;\r\n}\r\n","/* core\\util\\throttle.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    function _delay_animation(callback) {\r\n        callback(Date.now()); // XXX: performance.now()\r\n        return -1;\r\n    }\r\n    var delay_animation = (typeof window !== 'undefined' ? window.requestAnimationFrame : undefined) ||\r\n        (typeof window !== 'undefined' ? window.webkitRequestAnimationFrame : undefined) ||\r\n        (typeof window !== 'undefined' ? window.mozRequestAnimationFrame : undefined) ||\r\n        (typeof window !== 'undefined' ? window.msRequestAnimationFrame : undefined) || _delay_animation;\r\n    // Returns a function, that, when invoked, will only be triggered at\r\n    // most once during a given window of time.\r\n    //\r\n    // In addition, if the browser supports requestAnimationFrame, the\r\n    // throttled function will be run no more frequently than request\r\n    // animation frame allows.\r\n    //\r\n    // @param func [function] the function to throttle\r\n    // @param wait [number] time in milliseconds to use for window\r\n    // @return [function] throttled function\r\n    //\r\n    function throttle(func, wait) {\r\n        var timeout = null;\r\n        var previous = 0;\r\n        var pending = false;\r\n        return function () {\r\n            return new Promise(function (resolve, reject) {\r\n                var later = function () {\r\n                    previous = Date.now();\r\n                    timeout = null;\r\n                    pending = false;\r\n                    try {\r\n                        func();\r\n                        resolve();\r\n                    }\r\n                    catch (error) {\r\n                        reject(error);\r\n                    }\r\n                };\r\n                var now = Date.now();\r\n                var remaining = wait - (now - previous);\r\n                if (remaining <= 0 && !pending) {\r\n                    if (timeout != null) {\r\n                        clearTimeout(timeout);\r\n                    }\r\n                    pending = true;\r\n                    delay_animation(later);\r\n                }\r\n                else if (!timeout && !pending) {\r\n                    timeout = setTimeout(function () { return delay_animation(later); }, remaining);\r\n                }\r\n                else {\r\n                    resolve();\r\n                }\r\n            });\r\n        };\r\n    }\r\n    exports.throttle = throttle;\r\n}\r\n","/* core\\layout\\border.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(328) /* ./types */;\r\n    var layoutable_1 = require(329) /* ./layoutable */;\r\n    var bbox_1 = require(194) /* ../util/bbox */;\r\n    var BorderLayout = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BorderLayout, _super);\r\n        function BorderLayout() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this.min_border = { left: 0, top: 0, right: 0, bottom: 0 };\r\n            return _this;\r\n        }\r\n        BorderLayout.prototype._measure = function (viewport) {\r\n            var _this = this;\r\n            viewport = new types_1.Sizeable(viewport).bounded_to(this.sizing.size);\r\n            var left_hint = this.left_panel.measure({ width: 0, height: viewport.height });\r\n            var left = Math.max(left_hint.width, this.min_border.left);\r\n            var right_hint = this.right_panel.measure({ width: 0, height: viewport.height });\r\n            var right = Math.max(right_hint.width, this.min_border.right);\r\n            var top_hint = this.top_panel.measure({ width: viewport.width, height: 0 });\r\n            var top = Math.max(top_hint.height, this.min_border.top);\r\n            var bottom_hint = this.bottom_panel.measure({ width: viewport.width, height: 0 });\r\n            var bottom = Math.max(bottom_hint.height, this.min_border.bottom);\r\n            var center_viewport = new types_1.Sizeable(viewport).shrink_by({ left: left, right: right, top: top, bottom: bottom });\r\n            var center = this.center_panel.measure(center_viewport);\r\n            var width = left + center.width + right;\r\n            var height = top + center.height + bottom;\r\n            var align = (function () {\r\n                var _a = _this.center_panel.sizing, width_policy = _a.width_policy, height_policy = _a.height_policy;\r\n                return width_policy != \"fixed\" && height_policy != \"fixed\";\r\n            })();\r\n            return { width: width, height: height, inner: { left: left, right: right, top: top, bottom: bottom }, align: align };\r\n        };\r\n        BorderLayout.prototype._set_geometry = function (outer, inner) {\r\n            _super.prototype._set_geometry.call(this, outer, inner);\r\n            this.center_panel.set_geometry(inner);\r\n            var left_hint = this.left_panel.measure({ width: 0, height: outer.height });\r\n            var right_hint = this.right_panel.measure({ width: 0, height: outer.height });\r\n            var top_hint = this.top_panel.measure({ width: outer.width, height: 0 });\r\n            var bottom_hint = this.bottom_panel.measure({ width: outer.width, height: 0 });\r\n            var left = inner.left, top = inner.top, right = inner.right, bottom = inner.bottom;\r\n            this.top_panel.set_geometry(new bbox_1.BBox({ left: left, right: right, bottom: top, height: top_hint.height }));\r\n            this.bottom_panel.set_geometry(new bbox_1.BBox({ left: left, right: right, top: bottom, height: bottom_hint.height }));\r\n            this.left_panel.set_geometry(new bbox_1.BBox({ top: top, bottom: bottom, right: left, width: left_hint.width }));\r\n            this.right_panel.set_geometry(new bbox_1.BBox({ top: top, bottom: bottom, left: right, width: right_hint.width }));\r\n        };\r\n        return BorderLayout;\r\n    }(layoutable_1.Layoutable));\r\n    exports.BorderLayout = BorderLayout;\r\n    BorderLayout.__name__ = \"BorderLayout\";\r\n}\r\n","/* core\\layout\\side_panel.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var types_1 = require(328) /* ./types */;\r\n    var layoutable_1 = require(329) /* ./layoutable */;\r\n    var types_2 = require(123) /* ../util/types */;\r\n    // This table lays out the rules for configuring the baseline, alignment, etc. of\r\n    // title text, based on it's location and orientation\r\n    //\r\n    // side    orient        baseline   align     angle   normal-dist\r\n    // ------------------------------------------------------------------------------\r\n    // above   parallel      bottom     center    0       height\r\n    //         normal        middle     left      -90     width\r\n    //         horizontal    bottom     center    0       height\r\n    //         [angle > 0]   middle     left              width * sin + height * cos\r\n    //         [angle < 0]   middle     right             width * sin + height * cos\r\n    //\r\n    // below   parallel      top        center    0       height\r\n    //         normal        middle     right     90      width\r\n    //         horizontal    top        center    0       height\r\n    //         [angle > 0]   middle     right             width * sin + height * cos\r\n    //         [angle < 0]   middle     left              width * sin + height * cos\r\n    //\r\n    // left    parallel      bottom     center    90      height\r\n    //         normal        middle     right     0       width\r\n    //         horizontal    middle     right     0       width\r\n    //         [angle > 0]   middle     right             width * cos + height * sin\r\n    //         [angle < 0]   middle     right             width * cos + height + sin\r\n    //\r\n    // right   parallel      bottom     center   -90      height\r\n    //         normal        middle     left     0        width\r\n    //         horizontal    middle     left     0        width\r\n    //         [angle > 0]   middle     left              width * cos + height * sin\r\n    //         [angle < 0]   middle     left              width * cos + height + sin\r\n    var pi2 = Math.PI / 2;\r\n    var ALPHABETIC = 'alphabetic';\r\n    var TOP = 'top';\r\n    var BOTTOM = 'bottom';\r\n    var MIDDLE = 'middle';\r\n    var HANGING = 'hanging';\r\n    var LEFT = 'left';\r\n    var RIGHT = 'right';\r\n    var CENTER = 'center';\r\n    var _angle_lookup = {\r\n        above: {\r\n            parallel: 0,\r\n            normal: -pi2,\r\n            horizontal: 0,\r\n            vertical: -pi2,\r\n        },\r\n        below: {\r\n            parallel: 0,\r\n            normal: pi2,\r\n            horizontal: 0,\r\n            vertical: pi2,\r\n        },\r\n        left: {\r\n            parallel: -pi2,\r\n            normal: 0,\r\n            horizontal: 0,\r\n            vertical: -pi2,\r\n        },\r\n        right: {\r\n            parallel: pi2,\r\n            normal: 0,\r\n            horizontal: 0,\r\n            vertical: pi2,\r\n        },\r\n    };\r\n    var _baseline_lookup = {\r\n        above: {\r\n            justified: TOP,\r\n            parallel: ALPHABETIC,\r\n            normal: MIDDLE,\r\n            horizontal: ALPHABETIC,\r\n            vertical: MIDDLE,\r\n        },\r\n        below: {\r\n            justified: BOTTOM,\r\n            parallel: HANGING,\r\n            normal: MIDDLE,\r\n            horizontal: HANGING,\r\n            vertical: MIDDLE,\r\n        },\r\n        left: {\r\n            justified: TOP,\r\n            parallel: ALPHABETIC,\r\n            normal: MIDDLE,\r\n            horizontal: MIDDLE,\r\n            vertical: ALPHABETIC,\r\n        },\r\n        right: {\r\n            justified: TOP,\r\n            parallel: ALPHABETIC,\r\n            normal: MIDDLE,\r\n            horizontal: MIDDLE,\r\n            vertical: ALPHABETIC,\r\n        },\r\n    };\r\n    var _align_lookup = {\r\n        above: {\r\n            justified: CENTER,\r\n            parallel: CENTER,\r\n            normal: LEFT,\r\n            horizontal: CENTER,\r\n            vertical: LEFT,\r\n        },\r\n        below: {\r\n            justified: CENTER,\r\n            parallel: CENTER,\r\n            normal: LEFT,\r\n            horizontal: CENTER,\r\n            vertical: LEFT,\r\n        },\r\n        left: {\r\n            justified: CENTER,\r\n            parallel: CENTER,\r\n            normal: RIGHT,\r\n            horizontal: RIGHT,\r\n            vertical: CENTER,\r\n        },\r\n        right: {\r\n            justified: CENTER,\r\n            parallel: CENTER,\r\n            normal: LEFT,\r\n            horizontal: LEFT,\r\n            vertical: CENTER,\r\n        },\r\n    };\r\n    var _align_lookup_negative = {\r\n        above: RIGHT,\r\n        below: LEFT,\r\n        left: RIGHT,\r\n        right: LEFT,\r\n    };\r\n    var _align_lookup_positive = {\r\n        above: LEFT,\r\n        below: RIGHT,\r\n        left: RIGHT,\r\n        right: LEFT,\r\n    };\r\n    var SidePanel = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SidePanel, _super);\r\n        function SidePanel(side, obj) {\r\n            var _this = _super.call(this) || this;\r\n            _this.side = side;\r\n            _this.obj = obj;\r\n            switch (_this.side) {\r\n                case \"above\":\r\n                    _this._dim = 0;\r\n                    _this._normals = [0, -1];\r\n                    break;\r\n                case \"below\":\r\n                    _this._dim = 0;\r\n                    _this._normals = [0, 1];\r\n                    break;\r\n                case \"left\":\r\n                    _this._dim = 1;\r\n                    _this._normals = [-1, 0];\r\n                    break;\r\n                case \"right\":\r\n                    _this._dim = 1;\r\n                    _this._normals = [1, 0];\r\n                    break;\r\n            }\r\n            if (_this.is_horizontal)\r\n                _this.set_sizing({ width_policy: \"max\", height_policy: \"fixed\" });\r\n            else\r\n                _this.set_sizing({ width_policy: \"fixed\", height_policy: \"max\" });\r\n            return _this;\r\n        }\r\n        SidePanel.prototype._content_size = function () {\r\n            return new types_1.Sizeable(this.get_oriented_size());\r\n        };\r\n        SidePanel.prototype.get_oriented_size = function () {\r\n            var _a = this.obj.get_size(), width = _a.width, height = _a.height;\r\n            if (!this.obj.rotate || this.is_horizontal)\r\n                return { width: width, height: height };\r\n            else\r\n                return { width: height, height: width };\r\n        };\r\n        SidePanel.prototype.has_size_changed = function () {\r\n            var _a = this.get_oriented_size(), width = _a.width, height = _a.height;\r\n            if (this.is_horizontal)\r\n                return this.bbox.height != height;\r\n            else\r\n                return this.bbox.width != width;\r\n        };\r\n        Object.defineProperty(SidePanel.prototype, \"dimension\", {\r\n            get: function () {\r\n                return this._dim;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(SidePanel.prototype, \"normals\", {\r\n            get: function () {\r\n                return this._normals;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(SidePanel.prototype, \"is_horizontal\", {\r\n            get: function () {\r\n                return this._dim == 0;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(SidePanel.prototype, \"is_vertical\", {\r\n            get: function () {\r\n                return this._dim == 1;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        SidePanel.prototype.apply_label_text_heuristics = function (ctx, orient) {\r\n            var side = this.side;\r\n            var baseline;\r\n            var align;\r\n            if (types_2.isString(orient)) {\r\n                baseline = _baseline_lookup[side][orient];\r\n                align = _align_lookup[side][orient];\r\n            }\r\n            else {\r\n                if (orient < 0) {\r\n                    baseline = 'middle';\r\n                    align = _align_lookup_negative[side];\r\n                }\r\n                else {\r\n                    baseline = 'middle';\r\n                    align = _align_lookup_positive[side];\r\n                }\r\n            }\r\n            ctx.textBaseline = baseline;\r\n            ctx.textAlign = align;\r\n        };\r\n        SidePanel.prototype.get_label_angle_heuristic = function (orient) {\r\n            return _angle_lookup[this.side][orient];\r\n        };\r\n        return SidePanel;\r\n    }(layoutable_1.ContentLayoutable));\r\n    exports.SidePanel = SidePanel;\r\n    SidePanel.__name__ = \"SidePanel\";\r\n}\r\n","/* models\\plots\\gmap_plot_canvas.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    var plot_canvas_1 = require(427) /* ./plot_canvas */;\r\n    var gmaps_ready = new signaling_1.Signal0({}, \"gmaps_ready\");\r\n    var load_google_api = function (api_key) {\r\n        window._bokeh_gmaps_callback = function () { return gmaps_ready.emit(); };\r\n        var script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = \"https://maps.googleapis.com/maps/api/js?v=3.36&key=\" + api_key + \"&callback=_bokeh_gmaps_callback\";\r\n        document.body.appendChild(script);\r\n    };\r\n    var GMapPlotView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GMapPlotView, _super);\r\n        function GMapPlotView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GMapPlotView.prototype.initialize = function () {\r\n            var _this = this;\r\n            this.pause();\r\n            _super.prototype.initialize.call(this);\r\n            this._tiles_loaded = false;\r\n            this.zoom_count = 0;\r\n            var _a = this.model.map_options, zoom = _a.zoom, lat = _a.lat, lng = _a.lng;\r\n            this.initial_zoom = zoom;\r\n            this.initial_lat = lat;\r\n            this.initial_lng = lng;\r\n            if (typeof google === \"undefined\" || google.maps == null) {\r\n                if (typeof window._bokeh_gmaps_callback === \"undefined\") {\r\n                    var decoded_api_key = atob(this.model.api_key);\r\n                    load_google_api(decoded_api_key);\r\n                }\r\n                gmaps_ready.connect(function () { return _this.request_render(); });\r\n            }\r\n            this.unpause();\r\n        };\r\n        GMapPlotView.prototype.remove = function () {\r\n            dom_1.remove(this.map_el);\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        GMapPlotView.prototype.update_range = function (range_info) {\r\n            // RESET -------------------------\r\n            if (range_info == null) {\r\n                this.map.setCenter({ lat: this.initial_lat, lng: this.initial_lng });\r\n                this.map.setOptions({ zoom: this.initial_zoom });\r\n                _super.prototype.update_range.call(this, null);\r\n                // PAN ----------------------------\r\n            }\r\n            else if (range_info.sdx != null || range_info.sdy != null) {\r\n                this.map.panBy(range_info.sdx || 0, range_info.sdy || 0);\r\n                _super.prototype.update_range.call(this, range_info);\r\n                // ZOOM ---------------------------\r\n            }\r\n            else if (range_info.factor != null) {\r\n                // The zoom count decreases the sensitivity of the zoom. (We could make this user configurable)\r\n                if (this.zoom_count !== 10) {\r\n                    this.zoom_count += 1;\r\n                    return;\r\n                }\r\n                this.zoom_count = 0;\r\n                this.pause();\r\n                _super.prototype.update_range.call(this, range_info);\r\n                var zoom_change = range_info.factor < 0 ? -1 : 1;\r\n                var old_map_zoom = this.map.getZoom();\r\n                var new_map_zoom = old_map_zoom + zoom_change;\r\n                // Zooming out too far causes problems\r\n                if (new_map_zoom >= 2) {\r\n                    this.map.setZoom(new_map_zoom);\r\n                    // Check we haven't gone out of bounds, and if we have undo the zoom\r\n                    var _a = tslib_1.__read(this._get_projected_bounds(), 3), proj_xstart = _a[0], proj_xend = _a[1];\r\n                    if (proj_xend - proj_xstart < 0) {\r\n                        this.map.setZoom(old_map_zoom);\r\n                    }\r\n                }\r\n                this.unpause();\r\n            }\r\n            // Finally re-center\r\n            this._set_bokeh_ranges();\r\n        };\r\n        GMapPlotView.prototype._build_map = function () {\r\n            var _this = this;\r\n            var maps = google.maps;\r\n            this.map_types = {\r\n                satellite: maps.MapTypeId.SATELLITE,\r\n                terrain: maps.MapTypeId.TERRAIN,\r\n                roadmap: maps.MapTypeId.ROADMAP,\r\n                hybrid: maps.MapTypeId.HYBRID,\r\n            };\r\n            var mo = this.model.map_options;\r\n            var map_options = {\r\n                center: new maps.LatLng(mo.lat, mo.lng),\r\n                zoom: mo.zoom,\r\n                disableDefaultUI: true,\r\n                mapTypeId: this.map_types[mo.map_type],\r\n                scaleControl: mo.scale_control,\r\n                tilt: mo.tilt,\r\n            };\r\n            if (mo.styles != null)\r\n                map_options.styles = JSON.parse(mo.styles);\r\n            // create the map with above options in div\r\n            this.map_el = dom_1.div({ style: { position: \"absolute\" } });\r\n            this.canvas_view.add_underlay(this.map_el);\r\n            this.map = new maps.Map(this.map_el, map_options);\r\n            // update bokeh ranges whenever the map idles, which should be after most UI action\r\n            maps.event.addListener(this.map, 'idle', function () { return _this._set_bokeh_ranges(); });\r\n            // also need an event when bounds change so that map resizes trigger renders too\r\n            maps.event.addListener(this.map, 'bounds_changed', function () { return _this._set_bokeh_ranges(); });\r\n            maps.event.addListenerOnce(this.map, 'tilesloaded', function () { return _this._render_finished(); });\r\n            // wire up listeners so that changes to properties are reflected\r\n            this.connect(this.model.properties.map_options.change, function () { return _this._update_options(); });\r\n            this.connect(this.model.map_options.properties.styles.change, function () { return _this._update_styles(); });\r\n            this.connect(this.model.map_options.properties.lat.change, function () { return _this._update_center('lat'); });\r\n            this.connect(this.model.map_options.properties.lng.change, function () { return _this._update_center('lng'); });\r\n            this.connect(this.model.map_options.properties.zoom.change, function () { return _this._update_zoom(); });\r\n            this.connect(this.model.map_options.properties.map_type.change, function () { return _this._update_map_type(); });\r\n            this.connect(this.model.map_options.properties.scale_control.change, function () { return _this._update_scale_control(); });\r\n            this.connect(this.model.map_options.properties.tilt.change, function () { return _this._update_tilt(); });\r\n        };\r\n        GMapPlotView.prototype._render_finished = function () {\r\n            this._tiles_loaded = true;\r\n            this.notify_finished();\r\n        };\r\n        GMapPlotView.prototype.has_finished = function () {\r\n            return _super.prototype.has_finished.call(this) && this._tiles_loaded === true;\r\n        };\r\n        GMapPlotView.prototype._get_latlon_bounds = function () {\r\n            var bounds = this.map.getBounds();\r\n            var top_right = bounds.getNorthEast();\r\n            var bottom_left = bounds.getSouthWest();\r\n            var xstart = bottom_left.lng();\r\n            var xend = top_right.lng();\r\n            var ystart = bottom_left.lat();\r\n            var yend = top_right.lat();\r\n            return [xstart, xend, ystart, yend];\r\n        };\r\n        GMapPlotView.prototype._get_projected_bounds = function () {\r\n            var _a = tslib_1.__read(this._get_latlon_bounds(), 4), xstart = _a[0], xend = _a[1], ystart = _a[2], yend = _a[3];\r\n            var _b = tslib_1.__read(projections_1.wgs84_mercator.compute(xstart, ystart), 2), proj_xstart = _b[0], proj_ystart = _b[1];\r\n            var _c = tslib_1.__read(projections_1.wgs84_mercator.compute(xend, yend), 2), proj_xend = _c[0], proj_yend = _c[1];\r\n            return [proj_xstart, proj_xend, proj_ystart, proj_yend];\r\n        };\r\n        GMapPlotView.prototype._set_bokeh_ranges = function () {\r\n            var _a = tslib_1.__read(this._get_projected_bounds(), 4), proj_xstart = _a[0], proj_xend = _a[1], proj_ystart = _a[2], proj_yend = _a[3];\r\n            this.frame.x_range.setv({ start: proj_xstart, end: proj_xend });\r\n            this.frame.y_range.setv({ start: proj_ystart, end: proj_yend });\r\n        };\r\n        GMapPlotView.prototype._update_center = function (fld) {\r\n            var c = this.map.getCenter().toJSON();\r\n            c[fld] = this.model.map_options[fld];\r\n            this.map.setCenter(c);\r\n            this._set_bokeh_ranges();\r\n        };\r\n        GMapPlotView.prototype._update_map_type = function () {\r\n            this.map.setOptions({ mapTypeId: this.map_types[this.model.map_options.map_type] });\r\n        };\r\n        GMapPlotView.prototype._update_scale_control = function () {\r\n            this.map.setOptions({ scaleControl: this.model.map_options.scale_control });\r\n        };\r\n        GMapPlotView.prototype._update_tilt = function () {\r\n            this.map.setOptions({ tilt: this.model.map_options.tilt });\r\n        };\r\n        GMapPlotView.prototype._update_options = function () {\r\n            this._update_styles();\r\n            this._update_center('lat');\r\n            this._update_center('lng');\r\n            this._update_zoom();\r\n            this._update_map_type();\r\n        };\r\n        GMapPlotView.prototype._update_styles = function () {\r\n            this.map.setOptions({ styles: JSON.parse(this.model.map_options.styles) });\r\n        };\r\n        GMapPlotView.prototype._update_zoom = function () {\r\n            this.map.setOptions({ zoom: this.model.map_options.zoom });\r\n            this._set_bokeh_ranges();\r\n        };\r\n        // this method is expected and called by PlotView.render\r\n        GMapPlotView.prototype._map_hook = function (_ctx, frame_box) {\r\n            if (this.map == null && typeof google !== \"undefined\" && google.maps != null)\r\n                this._build_map();\r\n            if (this.map_el != null) {\r\n                var _a = tslib_1.__read(frame_box, 4), left = _a[0], top = _a[1], width = _a[2], height = _a[3];\r\n                this.map_el.style.top = top + \"px\";\r\n                this.map_el.style.left = left + \"px\";\r\n                this.map_el.style.width = width + \"px\";\r\n                this.map_el.style.height = height + \"px\";\r\n            }\r\n        };\r\n        // this overrides the standard _paint_empty to make the inner canvas transparent\r\n        GMapPlotView.prototype._paint_empty = function (ctx, frame_box) {\r\n            var ow = this.layout.bbox.width;\r\n            var oh = this.layout.bbox.height;\r\n            var _a = tslib_1.__read(frame_box, 4), left = _a[0], top = _a[1], iw = _a[2], ih = _a[3];\r\n            ctx.clearRect(0, 0, ow, oh);\r\n            ctx.beginPath();\r\n            ctx.moveTo(0, 0);\r\n            ctx.lineTo(0, oh);\r\n            ctx.lineTo(ow, oh);\r\n            ctx.lineTo(ow, 0);\r\n            ctx.lineTo(0, 0);\r\n            ctx.moveTo(left, top);\r\n            ctx.lineTo(left + iw, top);\r\n            ctx.lineTo(left + iw, top + ih);\r\n            ctx.lineTo(left, top + ih);\r\n            ctx.lineTo(left, top);\r\n            ctx.closePath();\r\n            if (this.model.border_fill_color != null) {\r\n                ctx.fillStyle = this.model.border_fill_color;\r\n                ctx.fill();\r\n            }\r\n        };\r\n        return GMapPlotView;\r\n    }(plot_canvas_1.PlotView));\r\n    exports.GMapPlotView = GMapPlotView;\r\n    GMapPlotView.__name__ = \"GMapPlotView\";\r\n}\r\n","/* models\\ranges\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var data_range_1 = require(326) /* ./data_range */;\r\n    exports.DataRange = data_range_1.DataRange;\r\n    var data_range1d_1 = require(325) /* ./data_range1d */;\r\n    exports.DataRange1d = data_range1d_1.DataRange1d;\r\n    var factor_range_1 = require(213) /* ./factor_range */;\r\n    exports.FactorRange = factor_range_1.FactorRange;\r\n    var range_1 = require(214) /* ./range */;\r\n    exports.Range = range_1.Range;\r\n    var range1d_1 = require(273) /* ./range1d */;\r\n    exports.Range1d = range1d_1.Range1d;\r\n}\r\n","/* models\\renderers\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var glyph_renderer_1 = require(205) /* ./glyph_renderer */;\r\n    exports.GlyphRenderer = glyph_renderer_1.GlyphRenderer;\r\n    var graph_renderer_1 = require(231) /* ./graph_renderer */;\r\n    exports.GraphRenderer = graph_renderer_1.GraphRenderer;\r\n    var guide_renderer_1 = require(293) /* ./guide_renderer */;\r\n    exports.GuideRenderer = guide_renderer_1.GuideRenderer;\r\n    var renderer_1 = require(185) /* ./renderer */;\r\n    exports.Renderer = renderer_1.Renderer;\r\n}\r\n","/* models\\scales\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var categorical_scale_1 = require(324) /* ./categorical_scale */;\r\n    exports.CategoricalScale = categorical_scale_1.CategoricalScale;\r\n    var continuous_scale_1 = require(261) /* ./continuous_scale */;\r\n    exports.ContinuousScale = continuous_scale_1.ContinuousScale;\r\n    var linear_scale_1 = require(260) /* ./linear_scale */;\r\n    exports.LinearScale = linear_scale_1.LinearScale;\r\n    var linear_interpolation_scale_1 = require(271) /* ./linear_interpolation_scale */;\r\n    exports.LinearInterpolationScale = linear_interpolation_scale_1.LinearInterpolationScale;\r\n    var log_scale_1 = require(272) /* ./log_scale */;\r\n    exports.LogScale = log_scale_1.LogScale;\r\n    var scale_1 = require(262) /* ./scale */;\r\n    exports.Scale = scale_1.Scale;\r\n}\r\n","/* models\\selections\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    tslib_1.__exportStar(require(233) /* ./interaction_policy */, exports);\r\n    var selection_1 = require(203) /* ./selection */;\r\n    exports.Selection = selection_1.Selection;\r\n}\r\n","/* models\\sources\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var server_sent_data_source_1 = require(440) /* ./server_sent_data_source */;\r\n    exports.ServerSentDataSource = server_sent_data_source_1.ServerSentDataSource;\r\n    var ajax_data_source_1 = require(442) /* ./ajax_data_source */;\r\n    exports.AjaxDataSource = ajax_data_source_1.AjaxDataSource;\r\n    var column_data_source_1 = require(200) /* ./column_data_source */;\r\n    exports.ColumnDataSource = column_data_source_1.ColumnDataSource;\r\n    var columnar_data_source_1 = require(201) /* ./columnar_data_source */;\r\n    exports.ColumnarDataSource = columnar_data_source_1.ColumnarDataSource;\r\n    var cds_view_1 = require(229) /* ./cds_view */;\r\n    exports.CDSView = cds_view_1.CDSView;\r\n    var data_source_1 = require(202) /* ./data_source */;\r\n    exports.DataSource = data_source_1.DataSource;\r\n    var geojson_data_source_1 = require(443) /* ./geojson_data_source */;\r\n    exports.GeoJSONDataSource = geojson_data_source_1.GeoJSONDataSource;\r\n    var web_data_source_1 = require(441) /* ./web_data_source */;\r\n    exports.WebDataSource = web_data_source_1.WebDataSource;\r\n}\r\n","/* models\\sources\\server_sent_data_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var web_data_source_1 = require(441) /* ./web_data_source */;\r\n    var ServerSentDataSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ServerSentDataSource, _super);\r\n        function ServerSentDataSource(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.initialized = false;\r\n            return _this;\r\n        }\r\n        ServerSentDataSource.prototype.destroy = function () {\r\n            _super.prototype.destroy.call(this);\r\n        };\r\n        ServerSentDataSource.prototype.setup = function () {\r\n            var _this = this;\r\n            if (!this.initialized) {\r\n                this.initialized = true;\r\n                var source = new EventSource(this.data_url);\r\n                source.onmessage = function (event) {\r\n                    _this.load_data(JSON.parse(event.data), _this.mode, _this.max_size);\r\n                };\r\n            }\r\n        };\r\n        return ServerSentDataSource;\r\n    }(web_data_source_1.WebDataSource));\r\n    exports.ServerSentDataSource = ServerSentDataSource;\r\n    ServerSentDataSource.__name__ = \"ServerSentDataSource\";\r\n}\r\n","/* models\\sources\\web_data_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var column_data_source_1 = require(200) /* ./column_data_source */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var WebDataSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WebDataSource, _super);\r\n        function WebDataSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        WebDataSource.prototype.get_column = function (colname) {\r\n            var column = this.data[colname];\r\n            return column != null ? column : [];\r\n        };\r\n        WebDataSource.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.setup();\r\n        };\r\n        WebDataSource.prototype.load_data = function (raw_data, mode, max_size) {\r\n            var e_1, _a;\r\n            var adapter = this.adapter;\r\n            var data;\r\n            if (adapter != null)\r\n                data = adapter.execute(this, { response: raw_data });\r\n            else\r\n                data = raw_data;\r\n            switch (mode) {\r\n                case \"replace\": {\r\n                    this.data = data;\r\n                    break;\r\n                }\r\n                case \"append\": {\r\n                    var original_data = this.data;\r\n                    try {\r\n                        for (var _b = tslib_1.__values(this.columns()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                            var column = _c.value;\r\n                            // XXX: support typed arrays\r\n                            var old_col = Array.from(original_data[column]);\r\n                            var new_col = Array.from(data[column]);\r\n                            data[column] = old_col.concat(new_col).slice(-max_size);\r\n                        }\r\n                    }\r\n                    catch (e_1_1) {\r\n                        e_1 = { error: e_1_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_c && !_c.done && (_a = _b.return))\r\n                                _a.call(_b);\r\n                        }\r\n                        finally {\r\n                            if (e_1)\r\n                                throw e_1.error;\r\n                        }\r\n                    }\r\n                    this.data = data;\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        WebDataSource.init_WebDataSource = function () {\r\n            this.define({\r\n                mode: [p.UpdateMode, 'replace'],\r\n                max_size: [p.Number],\r\n                adapter: [p.Any, null],\r\n                data_url: [p.String],\r\n            });\r\n        };\r\n        return WebDataSource;\r\n    }(column_data_source_1.ColumnDataSource));\r\n    exports.WebDataSource = WebDataSource;\r\n    WebDataSource.__name__ = \"WebDataSource\";\r\n    WebDataSource.init_WebDataSource();\r\n}\r\n","/* models\\sources\\ajax_data_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var web_data_source_1 = require(441) /* ./web_data_source */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var AjaxDataSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(AjaxDataSource, _super);\r\n        function AjaxDataSource(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.initialized = false;\r\n            return _this;\r\n        }\r\n        AjaxDataSource.init_AjaxDataSource = function () {\r\n            this.define({\r\n                polling_interval: [p.Number],\r\n                content_type: [p.String, 'application/json'],\r\n                http_headers: [p.Any, {}],\r\n                method: [p.HTTPMethod, 'POST'],\r\n                if_modified: [p.Boolean, false],\r\n            });\r\n        };\r\n        AjaxDataSource.prototype.destroy = function () {\r\n            if (this.interval != null)\r\n                clearInterval(this.interval);\r\n            _super.prototype.destroy.call(this);\r\n        };\r\n        AjaxDataSource.prototype.setup = function () {\r\n            var _this = this;\r\n            if (!this.initialized) {\r\n                this.initialized = true;\r\n                this.get_data(this.mode);\r\n                if (this.polling_interval) {\r\n                    var callback = function () { return _this.get_data(_this.mode, _this.max_size, _this.if_modified); };\r\n                    this.interval = setInterval(callback, this.polling_interval);\r\n                }\r\n            }\r\n        };\r\n        AjaxDataSource.prototype.get_data = function (mode, max_size, _if_modified) {\r\n            var _this = this;\r\n            if (max_size === void 0) {\r\n                max_size = 0;\r\n            }\r\n            if (_if_modified === void 0) {\r\n                _if_modified = false;\r\n            }\r\n            var xhr = this.prepare_request();\r\n            // TODO: if_modified\r\n            xhr.addEventListener(\"load\", function () { return _this.do_load(xhr, mode, max_size); });\r\n            xhr.addEventListener(\"error\", function () { return _this.do_error(xhr); });\r\n            xhr.send();\r\n        };\r\n        AjaxDataSource.prototype.prepare_request = function () {\r\n            var e_1, _a;\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open(this.method, this.data_url, true);\r\n            xhr.withCredentials = false;\r\n            xhr.setRequestHeader(\"Content-Type\", this.content_type);\r\n            var http_headers = this.http_headers;\r\n            try {\r\n                for (var _b = tslib_1.__values(object_1.entries(http_headers)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = tslib_1.__read(_c.value, 2), name = _d[0], value = _d[1];\r\n                    xhr.setRequestHeader(name, value);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return xhr;\r\n        };\r\n        AjaxDataSource.prototype.do_load = function (xhr, mode, max_size) {\r\n            if (xhr.status === 200) {\r\n                var raw_data = JSON.parse(xhr.responseText);\r\n                this.load_data(raw_data, mode, max_size);\r\n            }\r\n        };\r\n        AjaxDataSource.prototype.do_error = function (xhr) {\r\n            logging_1.logger.error(\"Failed to fetch JSON from \" + this.data_url + \" with code \" + xhr.status);\r\n        };\r\n        return AjaxDataSource;\r\n    }(web_data_source_1.WebDataSource));\r\n    exports.AjaxDataSource = AjaxDataSource;\r\n    AjaxDataSource.__name__ = \"AjaxDataSource\";\r\n    AjaxDataSource.init_AjaxDataSource();\r\n}\r\n","/* models\\sources\\geojson_data_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var columnar_data_source_1 = require(201) /* ./columnar_data_source */;\r\n    var logging_1 = require(134) /* ../../core/logging */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    function orNaN(v) {\r\n        return v != null ? v : NaN;\r\n    }\r\n    var GeoJSONDataSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(GeoJSONDataSource, _super);\r\n        function GeoJSONDataSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        GeoJSONDataSource.init_GeoJSONDataSource = function () {\r\n            this.define({\r\n                geojson: [p.Any],\r\n            });\r\n            this.internal({\r\n                data: [p.Any, {}],\r\n            });\r\n        };\r\n        GeoJSONDataSource.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._update_data();\r\n        };\r\n        GeoJSONDataSource.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.properties.geojson.change, function () { return _this._update_data(); });\r\n        };\r\n        GeoJSONDataSource.prototype._update_data = function () {\r\n            this.data = this.geojson_to_column_data();\r\n        };\r\n        GeoJSONDataSource.prototype._get_new_list_array = function (length) {\r\n            return array_1.range(0, length).map(function (_i) { return []; });\r\n        };\r\n        GeoJSONDataSource.prototype._get_new_nan_array = function (length) {\r\n            return array_1.range(0, length).map(function (_i) { return NaN; });\r\n        };\r\n        GeoJSONDataSource.prototype._add_properties = function (item, data, i, item_count) {\r\n            var e_1, _b;\r\n            var _a;\r\n            var properties = (_a = item.properties) !== null && _a !== void 0 ? _a : {};\r\n            try {\r\n                for (var _c = tslib_1.__values(object_1.entries(properties)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), property = _e[0], value = _e[1];\r\n                    if (!data.hasOwnProperty(property))\r\n                        data[property] = this._get_new_nan_array(item_count);\r\n                    // orNaN necessary here to prevent null values from ending up in the column\r\n                    data[property][i] = orNaN(value);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        GeoJSONDataSource.prototype._add_geometry = function (geometry, data, i) {\r\n            var e_2, _b;\r\n            function flatten(acc, item) {\r\n                return acc.concat([[NaN, NaN, NaN]]).concat(item);\r\n            }\r\n            switch (geometry.type) {\r\n                case \"Point\": {\r\n                    var _c = tslib_1.__read(geometry.coordinates, 3), x = _c[0], y = _c[1], z = _c[2];\r\n                    data.x[i] = x;\r\n                    data.y[i] = y;\r\n                    data.z[i] = orNaN(z);\r\n                    break;\r\n                }\r\n                case \"LineString\": {\r\n                    var coordinates = geometry.coordinates;\r\n                    for (var j = 0; j < coordinates.length; j++) {\r\n                        var _d = tslib_1.__read(coordinates[j], 3), x = _d[0], y = _d[1], z = _d[2];\r\n                        data.xs[i][j] = x;\r\n                        data.ys[i][j] = y;\r\n                        data.zs[i][j] = orNaN(z);\r\n                    }\r\n                    break;\r\n                }\r\n                case \"Polygon\": {\r\n                    if (geometry.coordinates.length > 1)\r\n                        logging_1.logger.warn('Bokeh does not support Polygons with holes in, only exterior ring used.');\r\n                    var exterior_ring = geometry.coordinates[0];\r\n                    for (var j = 0; j < exterior_ring.length; j++) {\r\n                        var _e = tslib_1.__read(exterior_ring[j], 3), x = _e[0], y = _e[1], z = _e[2];\r\n                        data.xs[i][j] = x;\r\n                        data.ys[i][j] = y;\r\n                        data.zs[i][j] = orNaN(z);\r\n                    }\r\n                    break;\r\n                }\r\n                case \"MultiPoint\": {\r\n                    logging_1.logger.warn('MultiPoint not supported in Bokeh');\r\n                    break;\r\n                }\r\n                case \"MultiLineString\": {\r\n                    var coordinates = geometry.coordinates.reduce(flatten);\r\n                    for (var j = 0; j < coordinates.length; j++) {\r\n                        var _f = tslib_1.__read(coordinates[j], 3), x = _f[0], y = _f[1], z = _f[2];\r\n                        data.xs[i][j] = x;\r\n                        data.ys[i][j] = y;\r\n                        data.zs[i][j] = orNaN(z);\r\n                    }\r\n                    break;\r\n                }\r\n                case \"MultiPolygon\": {\r\n                    var exterior_rings = [];\r\n                    try {\r\n                        for (var _g = tslib_1.__values(geometry.coordinates), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                            var polygon = _h.value;\r\n                            if (polygon.length > 1)\r\n                                logging_1.logger.warn('Bokeh does not support Polygons with holes in, only exterior ring used.');\r\n                            exterior_rings.push(polygon[0]);\r\n                        }\r\n                    }\r\n                    catch (e_2_1) {\r\n                        e_2 = { error: e_2_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_h && !_h.done && (_b = _g.return))\r\n                                _b.call(_g);\r\n                        }\r\n                        finally {\r\n                            if (e_2)\r\n                                throw e_2.error;\r\n                        }\r\n                    }\r\n                    var coordinates = exterior_rings.reduce(flatten);\r\n                    for (var j = 0; j < coordinates.length; j++) {\r\n                        var _j = tslib_1.__read(coordinates[j], 3), x = _j[0], y = _j[1], z = _j[2];\r\n                        data.xs[i][j] = x;\r\n                        data.ys[i][j] = y;\r\n                        data.zs[i][j] = orNaN(z);\r\n                    }\r\n                    break;\r\n                }\r\n                default:\r\n                    throw new Error(\"Invalid GeoJSON geometry type: \" + geometry.type);\r\n            }\r\n        };\r\n        GeoJSONDataSource.prototype.geojson_to_column_data = function () {\r\n            var e_3, _b, e_4, _c, e_5, _d;\r\n            var geojson = JSON.parse(this.geojson);\r\n            var items;\r\n            switch (geojson.type) {\r\n                case \"GeometryCollection\": {\r\n                    if (geojson.geometries == null)\r\n                        throw new Error('No geometries found in GeometryCollection');\r\n                    if (geojson.geometries.length === 0)\r\n                        throw new Error('geojson.geometries must have one or more items');\r\n                    items = geojson.geometries;\r\n                    break;\r\n                }\r\n                case \"FeatureCollection\": {\r\n                    if (geojson.features == null)\r\n                        throw new Error('No features found in FeaturesCollection');\r\n                    if (geojson.features.length == 0)\r\n                        throw new Error('geojson.features must have one or more items');\r\n                    items = geojson.features;\r\n                    break;\r\n                }\r\n                default:\r\n                    throw new Error('Bokeh only supports type GeometryCollection and FeatureCollection at top level');\r\n            }\r\n            var item_count = 0;\r\n            try {\r\n                for (var items_1 = tslib_1.__values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\r\n                    var item = items_1_1.value;\r\n                    var geometry = item.type === 'Feature' ? item.geometry : item;\r\n                    if (geometry.type == 'GeometryCollection')\r\n                        item_count += geometry.geometries.length;\r\n                    else\r\n                        item_count += 1;\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (items_1_1 && !items_1_1.done && (_b = items_1.return))\r\n                        _b.call(items_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            var data = {\r\n                x: this._get_new_nan_array(item_count),\r\n                y: this._get_new_nan_array(item_count),\r\n                z: this._get_new_nan_array(item_count),\r\n                xs: this._get_new_list_array(item_count),\r\n                ys: this._get_new_list_array(item_count),\r\n                zs: this._get_new_list_array(item_count),\r\n            };\r\n            var arr_index = 0;\r\n            try {\r\n                for (var items_2 = tslib_1.__values(items), items_2_1 = items_2.next(); !items_2_1.done; items_2_1 = items_2.next()) {\r\n                    var item = items_2_1.value;\r\n                    var geometry = item.type == 'Feature' ? item.geometry : item;\r\n                    if (geometry.type == \"GeometryCollection\") {\r\n                        try {\r\n                            for (var _e = (e_5 = void 0, tslib_1.__values(geometry.geometries)), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                                var g = _f.value;\r\n                                this._add_geometry(g, data, arr_index);\r\n                                if (item.type === 'Feature')\r\n                                    this._add_properties(item, data, arr_index, item_count);\r\n                                arr_index += 1;\r\n                            }\r\n                        }\r\n                        catch (e_5_1) {\r\n                            e_5 = { error: e_5_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_f && !_f.done && (_d = _e.return))\r\n                                    _d.call(_e);\r\n                            }\r\n                            finally {\r\n                                if (e_5)\r\n                                    throw e_5.error;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._add_geometry(geometry, data, arr_index);\r\n                        if (item.type === 'Feature')\r\n                            this._add_properties(item, data, arr_index, item_count);\r\n                        arr_index += 1;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (items_2_1 && !items_2_1.done && (_c = items_2.return))\r\n                        _c.call(items_2);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            return data;\r\n        };\r\n        return GeoJSONDataSource;\r\n    }(columnar_data_source_1.ColumnarDataSource));\r\n    exports.GeoJSONDataSource = GeoJSONDataSource;\r\n    GeoJSONDataSource.__name__ = \"GeoJSONDataSource\";\r\n    GeoJSONDataSource.init_GeoJSONDataSource();\r\n}\r\n","/* models\\tickers\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var adaptive_ticker_1 = require(242) /* ./adaptive_ticker */;\r\n    exports.AdaptiveTicker = adaptive_ticker_1.AdaptiveTicker;\r\n    var basic_ticker_1 = require(241) /* ./basic_ticker */;\r\n    exports.BasicTicker = basic_ticker_1.BasicTicker;\r\n    var categorical_ticker_1 = require(295) /* ./categorical_ticker */;\r\n    exports.CategoricalTicker = categorical_ticker_1.CategoricalTicker;\r\n    var composite_ticker_1 = require(306) /* ./composite_ticker */;\r\n    exports.CompositeTicker = composite_ticker_1.CompositeTicker;\r\n    var continuous_ticker_1 = require(243) /* ./continuous_ticker */;\r\n    exports.ContinuousTicker = continuous_ticker_1.ContinuousTicker;\r\n    var datetime_ticker_1 = require(305) /* ./datetime_ticker */;\r\n    exports.DatetimeTicker = datetime_ticker_1.DatetimeTicker;\r\n    var days_ticker_1 = require(307) /* ./days_ticker */;\r\n    exports.DaysTicker = days_ticker_1.DaysTicker;\r\n    var fixed_ticker_1 = require(445) /* ./fixed_ticker */;\r\n    exports.FixedTicker = fixed_ticker_1.FixedTicker;\r\n    var log_ticker_1 = require(314) /* ./log_ticker */;\r\n    exports.LogTicker = log_ticker_1.LogTicker;\r\n    var mercator_ticker_1 = require(317) /* ./mercator_ticker */;\r\n    exports.MercatorTicker = mercator_ticker_1.MercatorTicker;\r\n    var months_ticker_1 = require(310) /* ./months_ticker */;\r\n    exports.MonthsTicker = months_ticker_1.MonthsTicker;\r\n    var single_interval_ticker_1 = require(308) /* ./single_interval_ticker */;\r\n    exports.SingleIntervalTicker = single_interval_ticker_1.SingleIntervalTicker;\r\n    var ticker_1 = require(244) /* ./ticker */;\r\n    exports.Ticker = ticker_1.Ticker;\r\n    var years_ticker_1 = require(311) /* ./years_ticker */;\r\n    exports.YearsTicker = years_ticker_1.YearsTicker;\r\n}\r\n","/* models\\tickers\\fixed_ticker.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var continuous_ticker_1 = require(243) /* ./continuous_ticker */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var FixedTicker = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FixedTicker, _super);\r\n        function FixedTicker(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.min_interval = 0;\r\n            _this.max_interval = 0;\r\n            return _this;\r\n        }\r\n        FixedTicker.init_FixedTicker = function () {\r\n            this.define({\r\n                ticks: [p.Array, []],\r\n                minor_ticks: [p.Array, []],\r\n            });\r\n        };\r\n        FixedTicker.prototype.get_ticks_no_defaults = function (_data_low, _data_high, _cross_loc, _desired_n_ticks) {\r\n            return {\r\n                major: this.ticks,\r\n                minor: this.minor_ticks,\r\n            };\r\n        };\r\n        // XXX: whatever, because FixedTicker needs to fulfill the interface somehow\r\n        FixedTicker.prototype.get_interval = function (_data_low, _data_high, _desired_n_ticks) {\r\n            return 0;\r\n        };\r\n        return FixedTicker;\r\n    }(continuous_ticker_1.ContinuousTicker));\r\n    exports.FixedTicker = FixedTicker;\r\n    FixedTicker.__name__ = \"FixedTicker\";\r\n    FixedTicker.init_FixedTicker();\r\n}\r\n","/* models\\tiles\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var bbox_tile_source_1 = require(447) /* ./bbox_tile_source */;\r\n    exports.BBoxTileSource = bbox_tile_source_1.BBoxTileSource;\r\n    var mercator_tile_source_1 = require(448) /* ./mercator_tile_source */;\r\n    exports.MercatorTileSource = mercator_tile_source_1.MercatorTileSource;\r\n    var quadkey_tile_source_1 = require(451) /* ./quadkey_tile_source */;\r\n    exports.QUADKEYTileSource = quadkey_tile_source_1.QUADKEYTileSource;\r\n    var tile_renderer_1 = require(452) /* ./tile_renderer */;\r\n    exports.TileRenderer = tile_renderer_1.TileRenderer;\r\n    var tile_source_1 = require(449) /* ./tile_source */;\r\n    exports.TileSource = tile_source_1.TileSource;\r\n    var tms_tile_source_1 = require(456) /* ./tms_tile_source */;\r\n    exports.TMSTileSource = tms_tile_source_1.TMSTileSource;\r\n    var wmts_tile_source_1 = require(453) /* ./wmts_tile_source */;\r\n    exports.WMTSTileSource = wmts_tile_source_1.WMTSTileSource;\r\n}\r\n","/* models\\tiles\\bbox_tile_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var mercator_tile_source_1 = require(448) /* ./mercator_tile_source */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var BBoxTileSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BBoxTileSource, _super);\r\n        function BBoxTileSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        BBoxTileSource.init_BBoxTileSource = function () {\r\n            this.define({\r\n                use_latlon: [p.Boolean, false],\r\n            });\r\n        };\r\n        BBoxTileSource.prototype.get_image_url = function (x, y, z) {\r\n            var _a, _b;\r\n            var image_url = this.string_lookup_replace(this.url, this.extra_url_vars);\r\n            var xmax, xmin, ymax, ymin;\r\n            if (this.use_latlon)\r\n                _a = tslib_1.__read(this.get_tile_geographic_bounds(x, y, z), 4), xmin = _a[0], ymin = _a[1], xmax = _a[2], ymax = _a[3];\r\n            else\r\n                _b = tslib_1.__read(this.get_tile_meter_bounds(x, y, z), 4), xmin = _b[0], ymin = _b[1], xmax = _b[2], ymax = _b[3];\r\n            return image_url\r\n                .replace(\"{XMIN}\", xmin.toString())\r\n                .replace(\"{YMIN}\", ymin.toString())\r\n                .replace(\"{XMAX}\", xmax.toString())\r\n                .replace(\"{YMAX}\", ymax.toString());\r\n        };\r\n        return BBoxTileSource;\r\n    }(mercator_tile_source_1.MercatorTileSource));\r\n    exports.BBoxTileSource = BBoxTileSource;\r\n    BBoxTileSource.__name__ = \"BBoxTileSource\";\r\n    BBoxTileSource.init_BBoxTileSource();\r\n}\r\n","/* models\\tiles\\mercator_tile_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var tile_source_1 = require(449) /* ./tile_source */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var tile_utils_1 = require(450) /* ./tile_utils */;\r\n    var MercatorTileSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(MercatorTileSource, _super);\r\n        function MercatorTileSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        MercatorTileSource.init_MercatorTileSource = function () {\r\n            this.define({\r\n                snap_to_zoom: [p.Boolean, false],\r\n                wrap_around: [p.Boolean, true],\r\n            });\r\n            this.override({\r\n                x_origin_offset: 20037508.34,\r\n                y_origin_offset: 20037508.34,\r\n                initial_resolution: 156543.03392804097,\r\n            });\r\n        };\r\n        MercatorTileSource.prototype.initialize = function () {\r\n            var _this = this;\r\n            _super.prototype.initialize.call(this);\r\n            this._resolutions = array_1.range(this.min_zoom, this.max_zoom + 1).map(function (z) { return _this.get_resolution(z); });\r\n        };\r\n        MercatorTileSource.prototype._computed_initial_resolution = function () {\r\n            if (this.initial_resolution != null)\r\n                return this.initial_resolution;\r\n            else {\r\n                // TODO testing 2015-11-17, if this codepath is used it seems\r\n                // to use 100% cpu and wedge Chrome\r\n                return (2 * Math.PI * 6378137) / this.tile_size;\r\n            }\r\n        };\r\n        MercatorTileSource.prototype.is_valid_tile = function (x, y, z) {\r\n            if (!this.wrap_around) {\r\n                if (x < 0 || x >= Math.pow(2, z))\r\n                    return false;\r\n            }\r\n            if (y < 0 || y >= Math.pow(2, z))\r\n                return false;\r\n            return true;\r\n        };\r\n        MercatorTileSource.prototype.parent_by_tile_xyz = function (x, y, z) {\r\n            var quadkey = this.tile_xyz_to_quadkey(x, y, z);\r\n            var parent_quadkey = quadkey.substring(0, quadkey.length - 1);\r\n            return this.quadkey_to_tile_xyz(parent_quadkey);\r\n        };\r\n        MercatorTileSource.prototype.get_resolution = function (level) {\r\n            return this._computed_initial_resolution() / Math.pow(2, level);\r\n        };\r\n        MercatorTileSource.prototype.get_resolution_by_extent = function (extent, height, width) {\r\n            var x_rs = (extent[2] - extent[0]) / width;\r\n            var y_rs = (extent[3] - extent[1]) / height;\r\n            return [x_rs, y_rs];\r\n        };\r\n        MercatorTileSource.prototype.get_level_by_extent = function (extent, height, width) {\r\n            var e_1, _a;\r\n            var x_rs = (extent[2] - extent[0]) / width;\r\n            var y_rs = (extent[3] - extent[1]) / height;\r\n            var resolution = Math.max(x_rs, y_rs);\r\n            var i = 0;\r\n            try {\r\n                for (var _b = tslib_1.__values(this._resolutions), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var r = _c.value;\r\n                    if (resolution > r) {\r\n                        if (i == 0)\r\n                            return 0;\r\n                        if (i > 0)\r\n                            return i - 1;\r\n                    }\r\n                    i += 1;\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            // otherwise return the highest available resolution\r\n            return (i - 1);\r\n        };\r\n        MercatorTileSource.prototype.get_closest_level_by_extent = function (extent, height, width) {\r\n            var x_rs = (extent[2] - extent[0]) / width;\r\n            var y_rs = (extent[3] - extent[1]) / height;\r\n            var resolution = Math.max(x_rs, y_rs);\r\n            var closest = this._resolutions.reduce(function (previous, current) {\r\n                if (Math.abs(current - resolution) < Math.abs(previous - resolution))\r\n                    return current;\r\n                else\r\n                    return previous;\r\n            });\r\n            return this._resolutions.indexOf(closest);\r\n        };\r\n        MercatorTileSource.prototype.snap_to_zoom_level = function (extent, height, width, level) {\r\n            var _a = tslib_1.__read(extent, 4), xmin = _a[0], ymin = _a[1], xmax = _a[2], ymax = _a[3];\r\n            var desired_res = this._resolutions[level];\r\n            var desired_x_delta = width * desired_res;\r\n            var desired_y_delta = height * desired_res;\r\n            if (!this.snap_to_zoom) {\r\n                var xscale = (xmax - xmin) / desired_x_delta;\r\n                var yscale = (ymax - ymin) / desired_y_delta;\r\n                if (xscale > yscale) {\r\n                    desired_x_delta = (xmax - xmin);\r\n                    desired_y_delta = desired_y_delta * xscale;\r\n                }\r\n                else {\r\n                    desired_x_delta = desired_x_delta * yscale;\r\n                    desired_y_delta = (ymax - ymin);\r\n                }\r\n            }\r\n            var x_adjust = (desired_x_delta - (xmax - xmin)) / 2;\r\n            var y_adjust = (desired_y_delta - (ymax - ymin)) / 2;\r\n            return [xmin - x_adjust, ymin - y_adjust, xmax + x_adjust, ymax + y_adjust];\r\n        };\r\n        MercatorTileSource.prototype.tms_to_wmts = function (x, y, z) {\r\n            // Note this works both ways\r\n            return [x, Math.pow(2, z) - 1 - y, z];\r\n        };\r\n        MercatorTileSource.prototype.wmts_to_tms = function (x, y, z) {\r\n            // Note this works both ways\r\n            return [x, Math.pow(2, z) - 1 - y, z];\r\n        };\r\n        MercatorTileSource.prototype.pixels_to_meters = function (px, py, level) {\r\n            var res = this.get_resolution(level);\r\n            var mx = (px * res) - this.x_origin_offset;\r\n            var my = (py * res) - this.y_origin_offset;\r\n            return [mx, my];\r\n        };\r\n        MercatorTileSource.prototype.meters_to_pixels = function (mx, my, level) {\r\n            var res = this.get_resolution(level);\r\n            var px = (mx + this.x_origin_offset) / res;\r\n            var py = (my + this.y_origin_offset) / res;\r\n            return [px, py];\r\n        };\r\n        MercatorTileSource.prototype.pixels_to_tile = function (px, py) {\r\n            var tx = Math.ceil(px / this.tile_size);\r\n            tx = tx === 0 ? tx : tx - 1;\r\n            var ty = Math.max(Math.ceil(py / this.tile_size) - 1, 0);\r\n            return [tx, ty];\r\n        };\r\n        MercatorTileSource.prototype.pixels_to_raster = function (px, py, level) {\r\n            var mapSize = this.tile_size << level;\r\n            return [px, mapSize - py];\r\n        };\r\n        MercatorTileSource.prototype.meters_to_tile = function (mx, my, level) {\r\n            var _a = tslib_1.__read(this.meters_to_pixels(mx, my, level), 2), px = _a[0], py = _a[1];\r\n            return this.pixels_to_tile(px, py);\r\n        };\r\n        MercatorTileSource.prototype.get_tile_meter_bounds = function (tx, ty, level) {\r\n            // expects tms styles coordinates (bottom-left origin)\r\n            var _a = tslib_1.__read(this.pixels_to_meters(tx * this.tile_size, ty * this.tile_size, level), 2), xmin = _a[0], ymin = _a[1];\r\n            var _b = tslib_1.__read(this.pixels_to_meters((tx + 1) * this.tile_size, (ty + 1) * this.tile_size, level), 2), xmax = _b[0], ymax = _b[1];\r\n            return [xmin, ymin, xmax, ymax];\r\n        };\r\n        MercatorTileSource.prototype.get_tile_geographic_bounds = function (tx, ty, level) {\r\n            var bounds = this.get_tile_meter_bounds(tx, ty, level);\r\n            var _a = tslib_1.__read(tile_utils_1.meters_extent_to_geographic(bounds), 4), minLon = _a[0], minLat = _a[1], maxLon = _a[2], maxLat = _a[3];\r\n            return [minLon, minLat, maxLon, maxLat];\r\n        };\r\n        MercatorTileSource.prototype.get_tiles_by_extent = function (extent, level, tile_border) {\r\n            if (tile_border === void 0) {\r\n                tile_border = 1;\r\n            }\r\n            // unpack extent and convert to tile coordinates\r\n            var _a = tslib_1.__read(extent, 4), xmin = _a[0], ymin = _a[1], xmax = _a[2], ymax = _a[3];\r\n            var _b = tslib_1.__read(this.meters_to_tile(xmin, ymin, level), 2), txmin = _b[0], tymin = _b[1];\r\n            var _c = tslib_1.__read(this.meters_to_tile(xmax, ymax, level), 2), txmax = _c[0], tymax = _c[1];\r\n            // add tiles which border\r\n            txmin -= tile_border;\r\n            tymin -= tile_border;\r\n            txmax += tile_border;\r\n            tymax += tile_border;\r\n            var tiles = [];\r\n            for (var ty = tymax; ty >= tymin; ty--) {\r\n                for (var tx = txmin; tx <= txmax; tx++) {\r\n                    if (this.is_valid_tile(tx, ty, level))\r\n                        tiles.push([tx, ty, level, this.get_tile_meter_bounds(tx, ty, level)]);\r\n                }\r\n            }\r\n            this.sort_tiles_from_center(tiles, [txmin, tymin, txmax, tymax]);\r\n            return tiles;\r\n        };\r\n        MercatorTileSource.prototype.quadkey_to_tile_xyz = function (quadKey) {\r\n            /**\r\n             * Computes tile x, y and z values based on quadKey.\r\n             */\r\n            var tileX = 0;\r\n            var tileY = 0;\r\n            var tileZ = quadKey.length;\r\n            for (var i = tileZ; i > 0; i--) {\r\n                var value = quadKey.charAt(tileZ - i);\r\n                var mask = 1 << (i - 1);\r\n                switch (value) {\r\n                    case '0':\r\n                        continue;\r\n                    case '1':\r\n                        tileX |= mask;\r\n                        break;\r\n                    case '2':\r\n                        tileY |= mask;\r\n                        break;\r\n                    case '3':\r\n                        tileX |= mask;\r\n                        tileY |= mask;\r\n                        break;\r\n                    default:\r\n                        throw new TypeError(\"Invalid Quadkey: \" + quadKey);\r\n                }\r\n            }\r\n            return [tileX, tileY, tileZ];\r\n        };\r\n        MercatorTileSource.prototype.tile_xyz_to_quadkey = function (x, y, z) {\r\n            /*\r\n             * Computes quadkey value based on tile x, y and z values.\r\n             */\r\n            var quadkey = \"\";\r\n            for (var i = z; i > 0; i--) {\r\n                var mask = 1 << (i - 1);\r\n                var digit = 0;\r\n                if ((x & mask) !== 0) {\r\n                    digit += 1;\r\n                }\r\n                if ((y & mask) !== 0) {\r\n                    digit += 2;\r\n                }\r\n                quadkey += digit.toString();\r\n            }\r\n            return quadkey;\r\n        };\r\n        MercatorTileSource.prototype.children_by_tile_xyz = function (x, y, z) {\r\n            var quadkey = this.tile_xyz_to_quadkey(x, y, z);\r\n            var child_tile_xyz = [];\r\n            for (var i = 0; i <= 3; i++) {\r\n                var _a = tslib_1.__read(this.quadkey_to_tile_xyz(quadkey + i.toString()), 3), x_1 = _a[0], y_1 = _a[1], z_1 = _a[2];\r\n                var b = this.get_tile_meter_bounds(x_1, y_1, z_1);\r\n                child_tile_xyz.push([x_1, y_1, z_1, b]);\r\n            }\r\n            return child_tile_xyz;\r\n        };\r\n        MercatorTileSource.prototype.get_closest_parent_by_tile_xyz = function (x, y, z) {\r\n            var _a, _b, _c;\r\n            var world_x = this.calculate_world_x_by_tile_xyz(x, y, z);\r\n            _a = tslib_1.__read(this.normalize_xyz(x, y, z), 3), x = _a[0], y = _a[1], z = _a[2];\r\n            var quadkey = this.tile_xyz_to_quadkey(x, y, z);\r\n            while (quadkey.length > 0) {\r\n                quadkey = quadkey.substring(0, quadkey.length - 1);\r\n                _b = tslib_1.__read(this.quadkey_to_tile_xyz(quadkey), 3), x = _b[0], y = _b[1], z = _b[2];\r\n                _c = tslib_1.__read(this.denormalize_xyz(x, y, z, world_x), 3), x = _c[0], y = _c[1], z = _c[2];\r\n                if (this.tiles.has(this.tile_xyz_to_key(x, y, z)))\r\n                    return [x, y, z];\r\n            }\r\n            return [0, 0, 0];\r\n        };\r\n        MercatorTileSource.prototype.normalize_xyz = function (x, y, z) {\r\n            if (this.wrap_around) {\r\n                var tile_count = Math.pow(2, z);\r\n                return [((x % tile_count) + tile_count) % tile_count, y, z];\r\n            }\r\n            else {\r\n                return [x, y, z];\r\n            }\r\n        };\r\n        MercatorTileSource.prototype.denormalize_xyz = function (x, y, z, world_x) {\r\n            return [x + (world_x * Math.pow(2, z)), y, z];\r\n        };\r\n        MercatorTileSource.prototype.denormalize_meters = function (meters_x, meters_y, _level, world_x) {\r\n            return [meters_x + (world_x * 2 * Math.PI * 6378137), meters_y];\r\n        };\r\n        MercatorTileSource.prototype.calculate_world_x_by_tile_xyz = function (x, _y, z) {\r\n            return Math.floor(x / Math.pow(2, z));\r\n        };\r\n        return MercatorTileSource;\r\n    }(tile_source_1.TileSource));\r\n    exports.MercatorTileSource = MercatorTileSource;\r\n    MercatorTileSource.__name__ = \"MercatorTileSource\";\r\n    MercatorTileSource.init_MercatorTileSource();\r\n}\r\n","/* models\\tiles\\tile_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var TileSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TileSource, _super);\r\n        function TileSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        TileSource.init_TileSource = function () {\r\n            this.define({\r\n                url: [p.String, ''],\r\n                tile_size: [p.Number, 256],\r\n                max_zoom: [p.Number, 30],\r\n                min_zoom: [p.Number, 0],\r\n                extra_url_vars: [p.Any, {}],\r\n                attribution: [p.String, ''],\r\n                x_origin_offset: [p.Number],\r\n                y_origin_offset: [p.Number],\r\n                initial_resolution: [p.Number],\r\n            });\r\n        };\r\n        TileSource.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.tiles = new Map();\r\n            this._normalize_case();\r\n        };\r\n        TileSource.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.change, function () { return _this._clear_cache(); });\r\n        };\r\n        TileSource.prototype.string_lookup_replace = function (str, lookup) {\r\n            var e_1, _a;\r\n            var result_str = str;\r\n            try {\r\n                for (var _b = tslib_1.__values(object_1.entries(lookup)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = tslib_1.__read(_c.value, 2), key = _d[0], value = _d[1];\r\n                    result_str = result_str.replace(\"{\" + key + \"}\", value);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return result_str;\r\n        };\r\n        TileSource.prototype._normalize_case = function () {\r\n            /*\r\n             * Note: should probably be refactored into subclasses.\r\n             */\r\n            var url = this.url\r\n                .replace('{x}', '{X}')\r\n                .replace('{y}', '{Y}')\r\n                .replace('{z}', '{Z}')\r\n                .replace('{q}', '{Q}')\r\n                .replace('{xmin}', '{XMIN}')\r\n                .replace('{ymin}', '{YMIN}')\r\n                .replace('{xmax}', '{XMAX}')\r\n                .replace('{ymax}', '{YMAX}');\r\n            this.url = url;\r\n        };\r\n        TileSource.prototype._clear_cache = function () {\r\n            this.tiles = new Map();\r\n        };\r\n        TileSource.prototype.tile_xyz_to_key = function (x, y, z) {\r\n            return x + \":\" + y + \":\" + z;\r\n        };\r\n        TileSource.prototype.key_to_tile_xyz = function (key) {\r\n            var _a = tslib_1.__read(key.split(':').map(function (c) { return parseInt(c); }), 3), x = _a[0], y = _a[1], z = _a[2];\r\n            return [x, y, z];\r\n        };\r\n        TileSource.prototype.sort_tiles_from_center = function (tiles, tile_extent) {\r\n            var _a = tslib_1.__read(tile_extent, 4), txmin = _a[0], tymin = _a[1], txmax = _a[2], tymax = _a[3];\r\n            var center_x = ((txmax - txmin) / 2) + txmin;\r\n            var center_y = ((tymax - tymin) / 2) + tymin;\r\n            tiles.sort(function (a, b) {\r\n                var a_distance = Math.sqrt(Math.pow((center_x - a[0]), 2) + Math.pow((center_y - a[1]), 2));\r\n                var b_distance = Math.sqrt(Math.pow((center_x - b[0]), 2) + Math.pow((center_y - b[1]), 2));\r\n                return a_distance - b_distance;\r\n            });\r\n        };\r\n        TileSource.prototype.get_image_url = function (x, y, z) {\r\n            var image_url = this.string_lookup_replace(this.url, this.extra_url_vars);\r\n            return image_url\r\n                .replace(\"{X}\", x.toString())\r\n                .replace('{Y}', y.toString())\r\n                .replace(\"{Z}\", z.toString());\r\n        };\r\n        return TileSource;\r\n    }(model_1.Model));\r\n    exports.TileSource = TileSource;\r\n    TileSource.__name__ = \"TileSource\";\r\n    TileSource.init_TileSource();\r\n}\r\n","/* models\\tiles\\tile_utils.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var projections_1 = require(152) /* ../../core/util/projections */;\r\n    function geographic_to_meters(x_lon, y_lat) {\r\n        return projections_1.wgs84_mercator.compute(x_lon, y_lat);\r\n    }\r\n    exports.geographic_to_meters = geographic_to_meters;\r\n    function meters_to_geographic(mx, my) {\r\n        return projections_1.wgs84_mercator.invert(mx, my);\r\n    }\r\n    exports.meters_to_geographic = meters_to_geographic;\r\n    function geographic_extent_to_meters(extent) {\r\n        var _a = tslib_1.__read(extent, 4), g_xmin = _a[0], g_ymin = _a[1], g_xmax = _a[2], g_ymax = _a[3];\r\n        var _b = tslib_1.__read(geographic_to_meters(g_xmin, g_ymin), 2), m_xmin = _b[0], m_ymin = _b[1];\r\n        var _c = tslib_1.__read(geographic_to_meters(g_xmax, g_ymax), 2), m_xmax = _c[0], m_ymax = _c[1];\r\n        return [m_xmin, m_ymin, m_xmax, m_ymax];\r\n    }\r\n    exports.geographic_extent_to_meters = geographic_extent_to_meters;\r\n    function meters_extent_to_geographic(extent) {\r\n        var _a = tslib_1.__read(extent, 4), m_xmin = _a[0], m_ymin = _a[1], m_xmax = _a[2], m_ymax = _a[3];\r\n        var _b = tslib_1.__read(meters_to_geographic(m_xmin, m_ymin), 2), g_xmin = _b[0], g_ymin = _b[1];\r\n        var _c = tslib_1.__read(meters_to_geographic(m_xmax, m_ymax), 2), g_xmax = _c[0], g_ymax = _c[1];\r\n        return [g_xmin, g_ymin, g_xmax, g_ymax];\r\n    }\r\n    exports.meters_extent_to_geographic = meters_extent_to_geographic;\r\n}\r\n","/* models\\tiles\\quadkey_tile_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var mercator_tile_source_1 = require(448) /* ./mercator_tile_source */;\r\n    var QUADKEYTileSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(QUADKEYTileSource, _super);\r\n        function QUADKEYTileSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        QUADKEYTileSource.prototype.get_image_url = function (x, y, z) {\r\n            var image_url = this.string_lookup_replace(this.url, this.extra_url_vars);\r\n            var _a = tslib_1.__read(this.tms_to_wmts(x, y, z), 3), wx = _a[0], wy = _a[1], wz = _a[2];\r\n            var quadKey = this.tile_xyz_to_quadkey(wx, wy, wz);\r\n            return image_url.replace(\"{Q}\", quadKey);\r\n        };\r\n        return QUADKEYTileSource;\r\n    }(mercator_tile_source_1.MercatorTileSource));\r\n    exports.QUADKEYTileSource = QUADKEYTileSource;\r\n    QUADKEYTileSource.__name__ = \"QUADKEYTileSource\";\r\n}\r\n","/* models\\tiles\\tile_renderer.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var wmts_tile_source_1 = require(453) /* ./wmts_tile_source */;\r\n    var data_renderer_1 = require(206) /* ../renderers/data_renderer */;\r\n    var range1d_1 = require(273) /* ../ranges/range1d */;\r\n    var dom_1 = require(187) /* ../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var image_1 = require(366) /* ../../core/util/image */;\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var types_1 = require(123) /* ../../core/util/types */;\r\n    var selection_manager_1 = require(204) /* ../../core/selection_manager */;\r\n    var column_data_source_1 = require(200) /* ../sources/column_data_source */;\r\n    var tiles_1 = require(454) /* ../../styles/tiles */;\r\n    var tiles_css_1 = tslib_1.__importDefault(require(455) /* ../../styles/tiles.css */);\r\n    var TileRendererView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TileRendererView, _super);\r\n        function TileRendererView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TileRendererView.prototype.initialize = function () {\r\n            this._tiles = [];\r\n            _super.prototype.initialize.call(this);\r\n        };\r\n        TileRendererView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.change, function () { return _this.request_render(); });\r\n            this.connect(this.model.tile_source.change, function () { return _this.request_render(); });\r\n        };\r\n        TileRendererView.prototype.styles = function () {\r\n            return tslib_1.__spread(_super.prototype.styles.call(this), [tiles_css_1.default]);\r\n        };\r\n        TileRendererView.prototype.get_extent = function () {\r\n            return [this.x_range.start, this.y_range.start, this.x_range.end, this.y_range.end];\r\n        };\r\n        Object.defineProperty(TileRendererView.prototype, \"map_plot\", {\r\n            get: function () {\r\n                return this.plot_model;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(TileRendererView.prototype, \"map_canvas\", {\r\n            get: function () {\r\n                return this.layer.ctx;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(TileRendererView.prototype, \"map_frame\", {\r\n            get: function () {\r\n                return this.plot_view.frame;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(TileRendererView.prototype, \"x_range\", {\r\n            get: function () {\r\n                return this.map_plot.x_range;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(TileRendererView.prototype, \"y_range\", {\r\n            get: function () {\r\n                return this.map_plot.y_range;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        TileRendererView.prototype._set_data = function () {\r\n            this.extent = this.get_extent();\r\n            this._last_height = undefined;\r\n            this._last_width = undefined;\r\n        };\r\n        TileRendererView.prototype._update_attribution = function () {\r\n            if (this.attribution_el != null)\r\n                dom_1.removeElement(this.attribution_el);\r\n            var attribution = this.model.tile_source.attribution;\r\n            if (types_1.isString(attribution) && attribution.length > 0) {\r\n                var _a = this.plot_view, layout = _a.layout, frame = _a.frame;\r\n                var offset_right = layout.bbox.width - frame.bbox.right;\r\n                var offset_bottom = layout.bbox.height - frame.bbox.bottom;\r\n                var max_width = frame.bbox.width;\r\n                this.attribution_el = dom_1.div({\r\n                    class: tiles_1.bk_tile_attribution,\r\n                    style: {\r\n                        position: \"absolute\",\r\n                        right: offset_right + \"px\",\r\n                        bottom: offset_bottom + \"px\",\r\n                        'max-width': max_width - 4 /*padding*/ + \"px\",\r\n                        padding: \"2px\",\r\n                        'background-color': 'rgba(255,255,255,0.5)',\r\n                        'font-size': '9px',\r\n                        'line-height': '1.05',\r\n                        'white-space': 'nowrap',\r\n                        overflow: 'hidden',\r\n                        'text-overflow': 'ellipsis',\r\n                    },\r\n                });\r\n                this.plot_view.canvas_view.add_event(this.attribution_el);\r\n                this.attribution_el.innerHTML = attribution;\r\n                this.attribution_el.title = this.attribution_el.textContent.replace(/\\s*\\n\\s*/g, \" \");\r\n            }\r\n        };\r\n        TileRendererView.prototype._map_data = function () {\r\n            this.initial_extent = this.get_extent();\r\n            var zoom_level = this.model.tile_source.get_level_by_extent(this.initial_extent, this.map_frame.bbox.height, this.map_frame.bbox.width);\r\n            var new_extent = this.model.tile_source.snap_to_zoom_level(this.initial_extent, this.map_frame.bbox.height, this.map_frame.bbox.width, zoom_level);\r\n            this.x_range.start = new_extent[0];\r\n            this.y_range.start = new_extent[1];\r\n            this.x_range.end = new_extent[2];\r\n            this.y_range.end = new_extent[3];\r\n            if (this.x_range instanceof range1d_1.Range1d) {\r\n                this.x_range.reset_start = new_extent[0];\r\n                this.x_range.reset_end = new_extent[2];\r\n            }\r\n            if (this.y_range instanceof range1d_1.Range1d) {\r\n                this.y_range.reset_start = new_extent[1];\r\n                this.y_range.reset_end = new_extent[3];\r\n            }\r\n            this._update_attribution();\r\n        };\r\n        TileRendererView.prototype._create_tile = function (x, y, z, bounds, cache_only) {\r\n            var _this = this;\r\n            if (cache_only === void 0) {\r\n                cache_only = false;\r\n            }\r\n            var _a = tslib_1.__read(this.model.tile_source.normalize_xyz(x, y, z), 3), nx = _a[0], ny = _a[1], nz = _a[2];\r\n            var tile = {\r\n                img: undefined,\r\n                tile_coords: [x, y, z],\r\n                normalized_coords: [nx, ny, nz],\r\n                quadkey: this.model.tile_source.tile_xyz_to_quadkey(x, y, z),\r\n                cache_key: this.model.tile_source.tile_xyz_to_key(x, y, z),\r\n                bounds: bounds,\r\n                loaded: false,\r\n                finished: false,\r\n                x_coord: bounds[0],\r\n                y_coord: bounds[3],\r\n            };\r\n            var src = this.model.tile_source.get_image_url(nx, ny, nz);\r\n            new image_1.ImageLoader(src, {\r\n                loaded: function (img) {\r\n                    Object.assign(tile, { img: img, loaded: true });\r\n                    if (cache_only) {\r\n                        tile.finished = true;\r\n                        _this.notify_finished();\r\n                    }\r\n                    else\r\n                        _this.request_render();\r\n                },\r\n                failed: function () {\r\n                    tile.finished = true;\r\n                },\r\n            });\r\n            this.model.tile_source.tiles.set(tile.cache_key, tile);\r\n            this._tiles.push(tile);\r\n        };\r\n        TileRendererView.prototype._enforce_aspect_ratio = function () {\r\n            // brute force way of handling resize or sizing_mode event -------------------------------------------------------------\r\n            if ((this._last_height !== this.map_frame.bbox.height) || (this._last_width !== this.map_frame.bbox.width)) {\r\n                var extent = this.get_extent();\r\n                var zoom_level = this.model.tile_source.get_level_by_extent(extent, this.map_frame.bbox.height, this.map_frame.bbox.width);\r\n                var new_extent = this.model.tile_source.snap_to_zoom_level(extent, this.map_frame.bbox.height, this.map_frame.bbox.width, zoom_level);\r\n                this.x_range.setv({ start: new_extent[0], end: new_extent[2] });\r\n                this.y_range.setv({ start: new_extent[1], end: new_extent[3] });\r\n                this.extent = new_extent;\r\n                this._last_height = this.map_frame.bbox.height;\r\n                this._last_width = this.map_frame.bbox.width;\r\n            }\r\n        };\r\n        TileRendererView.prototype.has_finished = function () {\r\n            var e_1, _a;\r\n            if (!_super.prototype.has_finished.call(this)) {\r\n                return false;\r\n            }\r\n            if (this._tiles.length === 0) {\r\n                return false;\r\n            }\r\n            try {\r\n                for (var _b = tslib_1.__values(this._tiles), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var tile = _c.value;\r\n                    if (!tile.finished) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        TileRendererView.prototype._render = function () {\r\n            if (this.map_initialized == null) {\r\n                this._set_data();\r\n                this._map_data();\r\n                this.map_initialized = true;\r\n            }\r\n            this._enforce_aspect_ratio();\r\n            this._update();\r\n            if (this.prefetch_timer != null) {\r\n                clearTimeout(this.prefetch_timer);\r\n            }\r\n            this.prefetch_timer = setTimeout(this._prefetch_tiles.bind(this), 500);\r\n            if (this.has_finished()) {\r\n                this.notify_finished();\r\n            }\r\n        };\r\n        TileRendererView.prototype._draw_tile = function (tile_key) {\r\n            var tile_data = this.model.tile_source.tiles.get(tile_key);\r\n            if (tile_data != null && tile_data.loaded) {\r\n                var _a = tslib_1.__read(this.coordinates.map_to_screen([tile_data.bounds[0]], [tile_data.bounds[3]]), 2), _b = tslib_1.__read(_a[0], 1), sxmin = _b[0], _c = tslib_1.__read(_a[1], 1), symin = _c[0];\r\n                var _d = tslib_1.__read(this.coordinates.map_to_screen([tile_data.bounds[2]], [tile_data.bounds[1]]), 2), _e = tslib_1.__read(_d[0], 1), sxmax = _e[0], _f = tslib_1.__read(_d[1], 1), symax = _f[0];\r\n                var sw = sxmax - sxmin;\r\n                var sh = symax - symin;\r\n                var sx = sxmin;\r\n                var sy = symin;\r\n                var old_smoothing = this.map_canvas.getImageSmoothingEnabled();\r\n                this.map_canvas.setImageSmoothingEnabled(this.model.smoothing);\r\n                this.map_canvas.drawImage(tile_data.img, sx, sy, sw, sh);\r\n                this.map_canvas.setImageSmoothingEnabled(old_smoothing);\r\n                tile_data.finished = true;\r\n            }\r\n        };\r\n        TileRendererView.prototype._set_rect = function () {\r\n            var outline_width = this.plot_model.properties.outline_line_width.value();\r\n            var l = this.map_frame.bbox.left + (outline_width / 2);\r\n            var t = this.map_frame.bbox.top + (outline_width / 2);\r\n            var w = this.map_frame.bbox.width - outline_width;\r\n            var h = this.map_frame.bbox.height - outline_width;\r\n            this.map_canvas.rect(l, t, w, h);\r\n            this.map_canvas.clip();\r\n        };\r\n        TileRendererView.prototype._render_tiles = function (tile_keys) {\r\n            var e_2, _a;\r\n            this.map_canvas.save();\r\n            this._set_rect();\r\n            this.map_canvas.globalAlpha = this.model.alpha;\r\n            try {\r\n                for (var tile_keys_1 = tslib_1.__values(tile_keys), tile_keys_1_1 = tile_keys_1.next(); !tile_keys_1_1.done; tile_keys_1_1 = tile_keys_1.next()) {\r\n                    var tile_key = tile_keys_1_1.value;\r\n                    this._draw_tile(tile_key);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (tile_keys_1_1 && !tile_keys_1_1.done && (_a = tile_keys_1.return))\r\n                        _a.call(tile_keys_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this.map_canvas.restore();\r\n        };\r\n        TileRendererView.prototype._prefetch_tiles = function () {\r\n            var e_3, _a;\r\n            var tile_source = this.model.tile_source;\r\n            var extent = this.get_extent();\r\n            var h = this.map_frame.bbox.height;\r\n            var w = this.map_frame.bbox.width;\r\n            var zoom_level = this.model.tile_source.get_level_by_extent(extent, h, w);\r\n            var tiles = this.model.tile_source.get_tiles_by_extent(extent, zoom_level);\r\n            for (var t = 0, end = Math.min(10, tiles.length); t < end; t++) {\r\n                var _b = tslib_1.__read(tiles[t], 3), x = _b[0], y = _b[1], z = _b[2];\r\n                var children = this.model.tile_source.children_by_tile_xyz(x, y, z);\r\n                try {\r\n                    for (var children_1 = (e_3 = void 0, tslib_1.__values(children)), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {\r\n                        var c = children_1_1.value;\r\n                        var _c = tslib_1.__read(c, 4), cx = _c[0], cy = _c[1], cz = _c[2], cbounds = _c[3];\r\n                        if (tile_source.tiles.has(tile_source.tile_xyz_to_key(cx, cy, cz))) {\r\n                            continue;\r\n                        }\r\n                        else {\r\n                            this._create_tile(cx, cy, cz, cbounds, true);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_3_1) {\r\n                    e_3 = { error: e_3_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (children_1_1 && !children_1_1.done && (_a = children_1.return))\r\n                            _a.call(children_1);\r\n                    }\r\n                    finally {\r\n                        if (e_3)\r\n                            throw e_3.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        TileRendererView.prototype._fetch_tiles = function (tiles) {\r\n            var e_4, _a;\r\n            try {\r\n                for (var tiles_2 = tslib_1.__values(tiles), tiles_2_1 = tiles_2.next(); !tiles_2_1.done; tiles_2_1 = tiles_2.next()) {\r\n                    var tile = tiles_2_1.value;\r\n                    var _b = tslib_1.__read(tile, 4), x = _b[0], y = _b[1], z = _b[2], bounds = _b[3];\r\n                    this._create_tile(x, y, z, bounds);\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (tiles_2_1 && !tiles_2_1.done && (_a = tiles_2.return))\r\n                        _a.call(tiles_2);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n        };\r\n        TileRendererView.prototype._update = function () {\r\n            var e_5, _a, e_6, _b;\r\n            var _this = this;\r\n            var tile_source = this.model.tile_source;\r\n            var min_zoom = tile_source.min_zoom;\r\n            var max_zoom = tile_source.max_zoom;\r\n            var extent = this.get_extent();\r\n            var zooming_out = (this.extent[2] - this.extent[0]) < (extent[2] - extent[0]);\r\n            var h = this.map_frame.bbox.height;\r\n            var w = this.map_frame.bbox.width;\r\n            var zoom_level = tile_source.get_level_by_extent(extent, h, w);\r\n            var snap_back = false;\r\n            if (zoom_level < min_zoom) {\r\n                extent = this.extent;\r\n                zoom_level = min_zoom;\r\n                snap_back = true;\r\n            }\r\n            else if (zoom_level > max_zoom) {\r\n                extent = this.extent;\r\n                zoom_level = max_zoom;\r\n                snap_back = true;\r\n            }\r\n            if (snap_back) {\r\n                this.x_range.setv({ x_range: { start: extent[0], end: extent[2] } });\r\n                this.y_range.setv({ start: extent[1], end: extent[3] });\r\n            }\r\n            this.extent = extent;\r\n            var tiles = tile_source.get_tiles_by_extent(extent, zoom_level);\r\n            var need_load = [];\r\n            var cached = [];\r\n            var parents = [];\r\n            var children = [];\r\n            try {\r\n                for (var tiles_3 = tslib_1.__values(tiles), tiles_3_1 = tiles_3.next(); !tiles_3_1.done; tiles_3_1 = tiles_3.next()) {\r\n                    var t = tiles_3_1.value;\r\n                    var _c = tslib_1.__read(t, 3), x = _c[0], y = _c[1], z = _c[2];\r\n                    var key = tile_source.tile_xyz_to_key(x, y, z);\r\n                    var tile = tile_source.tiles.get(key);\r\n                    if (tile != null && tile.loaded) {\r\n                        cached.push(key);\r\n                    }\r\n                    else {\r\n                        if (this.model.render_parents) {\r\n                            var _d = tslib_1.__read(tile_source.get_closest_parent_by_tile_xyz(x, y, z), 3), px = _d[0], py = _d[1], pz = _d[2];\r\n                            var parent_key = tile_source.tile_xyz_to_key(px, py, pz);\r\n                            var parent_tile = tile_source.tiles.get(parent_key);\r\n                            if ((parent_tile != null) && parent_tile.loaded && !array_1.includes(parents, parent_key)) {\r\n                                parents.push(parent_key);\r\n                            }\r\n                            if (zooming_out) {\r\n                                var child_tiles = tile_source.children_by_tile_xyz(x, y, z);\r\n                                try {\r\n                                    for (var child_tiles_1 = (e_6 = void 0, tslib_1.__values(child_tiles)), child_tiles_1_1 = child_tiles_1.next(); !child_tiles_1_1.done; child_tiles_1_1 = child_tiles_1.next()) {\r\n                                        var _e = tslib_1.__read(child_tiles_1_1.value, 3), cx = _e[0], cy = _e[1], cz = _e[2];\r\n                                        var child_key = tile_source.tile_xyz_to_key(cx, cy, cz);\r\n                                        if (tile_source.tiles.has(child_key))\r\n                                            children.push(child_key);\r\n                                    }\r\n                                }\r\n                                catch (e_6_1) {\r\n                                    e_6 = { error: e_6_1 };\r\n                                }\r\n                                finally {\r\n                                    try {\r\n                                        if (child_tiles_1_1 && !child_tiles_1_1.done && (_b = child_tiles_1.return))\r\n                                            _b.call(child_tiles_1);\r\n                                    }\r\n                                    finally {\r\n                                        if (e_6)\r\n                                            throw e_6.error;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (tile == null)\r\n                        need_load.push(t);\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (tiles_3_1 && !tiles_3_1.done && (_a = tiles_3.return))\r\n                        _a.call(tiles_3);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            // draw stand-in parents ----------\r\n            this._render_tiles(parents);\r\n            this._render_tiles(children);\r\n            // draw cached ----------\r\n            this._render_tiles(cached);\r\n            // fetch missing -------\r\n            if (this.render_timer != null) {\r\n                clearTimeout(this.render_timer);\r\n            }\r\n            this.render_timer = setTimeout((function () { return _this._fetch_tiles(need_load); }), 65);\r\n        };\r\n        return TileRendererView;\r\n    }(data_renderer_1.DataRendererView));\r\n    exports.TileRendererView = TileRendererView;\r\n    TileRendererView.__name__ = \"TileRendererView\";\r\n    var TileRenderer = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TileRenderer, _super);\r\n        function TileRenderer(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            // XXX: tile renderer doesn't allow selection, but needs to fulfil the APIs\r\n            _this._selection_manager = new selection_manager_1.SelectionManager({\r\n                source: new column_data_source_1.ColumnDataSource(),\r\n            });\r\n            return _this;\r\n        }\r\n        TileRenderer.init_TileRenderer = function () {\r\n            this.prototype.default_view = TileRendererView;\r\n            this.define({\r\n                alpha: [p.Number, 1.0],\r\n                smoothing: [p.Boolean, true],\r\n                tile_source: [p.Instance, function () { return new wmts_tile_source_1.WMTSTileSource(); }],\r\n                render_parents: [p.Boolean, true],\r\n            });\r\n        };\r\n        TileRenderer.prototype.get_selection_manager = function () {\r\n            return this._selection_manager;\r\n        };\r\n        return TileRenderer;\r\n    }(data_renderer_1.DataRenderer));\r\n    exports.TileRenderer = TileRenderer;\r\n    TileRenderer.__name__ = \"TileRenderer\";\r\n    TileRenderer.init_TileRenderer();\r\n}\r\n","/* models\\tiles\\wmts_tile_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var mercator_tile_source_1 = require(448) /* ./mercator_tile_source */;\r\n    var WMTSTileSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WMTSTileSource, _super);\r\n        function WMTSTileSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        WMTSTileSource.prototype.get_image_url = function (x, y, z) {\r\n            var image_url = this.string_lookup_replace(this.url, this.extra_url_vars);\r\n            var _a = tslib_1.__read(this.tms_to_wmts(x, y, z), 3), wx = _a[0], wy = _a[1], wz = _a[2];\r\n            return image_url\r\n                .replace(\"{X}\", wx.toString())\r\n                .replace(\"{Y}\", wy.toString())\r\n                .replace(\"{Z}\", wz.toString());\r\n        };\r\n        return WMTSTileSource;\r\n    }(mercator_tile_source_1.MercatorTileSource));\r\n    exports.WMTSTileSource = WMTSTileSource;\r\n    WMTSTileSource.__name__ = \"WMTSTileSource\";\r\n}\r\n","/* styles\\tiles.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.bk_tile_attribution = \"bk-tile-attribution\";\r\n}\r\n","/* styles\\tiles.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n.bk-root .bk-tile-attribution a {\\n  color: black;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* models\\tiles\\tms_tile_source.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var mercator_tile_source_1 = require(448) /* ./mercator_tile_source */;\r\n    var TMSTileSource = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TMSTileSource, _super);\r\n        function TMSTileSource(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        TMSTileSource.prototype.get_image_url = function (x, y, z) {\r\n            var image_url = this.string_lookup_replace(this.url, this.extra_url_vars);\r\n            return image_url\r\n                .replace(\"{X}\", x.toString())\r\n                .replace('{Y}', y.toString())\r\n                .replace(\"{Z}\", z.toString());\r\n        };\r\n        return TMSTileSource;\r\n    }(mercator_tile_source_1.MercatorTileSource));\r\n    exports.TMSTileSource = TMSTileSource;\r\n    TMSTileSource.__name__ = \"TMSTileSource\";\r\n}\r\n","/* models\\textures\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var canvas_texture_1 = require(458) /* ./canvas_texture */;\r\n    exports.CanvasTexture = canvas_texture_1.CanvasTexture;\r\n    var image_url_texture_1 = require(460) /* ./image_url_texture */;\r\n    exports.ImageURLTexture = image_url_texture_1.ImageURLTexture;\r\n    var texture_1 = require(459) /* ./texture */;\r\n    exports.Texture = texture_1.Texture;\r\n}\r\n","/* models\\textures\\canvas_texture.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var texture_1 = require(459) /* ./texture */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var string_1 = require(144) /* ../../core/util/string */;\r\n    var CanvasTexture = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CanvasTexture, _super);\r\n        function CanvasTexture(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CanvasTexture.init_CanvasTexture = function () {\r\n            this.define({\r\n                code: [p.String],\r\n            });\r\n        };\r\n        Object.defineProperty(CanvasTexture.prototype, \"func\", {\r\n            get: function () {\r\n                var code = string_1.use_strict(this.code);\r\n                return new Function(\"ctx\", \"color\", \"scale\", \"weight\", code);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CanvasTexture.prototype.get_pattern = function (color, scale, weight) {\r\n            var _this = this;\r\n            return function (ctx) {\r\n                var canvas = document.createElement('canvas');\r\n                canvas.width = scale;\r\n                canvas.height = scale;\r\n                var pattern_ctx = canvas.getContext('2d');\r\n                _this.func.call(_this, pattern_ctx, color, scale, weight);\r\n                return ctx.createPattern(canvas, _this.repetition);\r\n            };\r\n        };\r\n        return CanvasTexture;\r\n    }(texture_1.Texture));\r\n    exports.CanvasTexture = CanvasTexture;\r\n    CanvasTexture.__name__ = \"CanvasTexture\";\r\n    CanvasTexture.init_CanvasTexture();\r\n}\r\n","/* models\\textures\\texture.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var Texture = /** @class */ (function (_super) {\r\n        tslib_1.__extends(Texture, _super);\r\n        function Texture(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        Texture.init_Texture = function () {\r\n            this.define({\r\n                repetition: [p.TextureRepetition, \"repeat\"],\r\n            });\r\n        };\r\n        Texture.prototype.onload = function (defer_func) {\r\n            defer_func();\r\n        };\r\n        return Texture;\r\n    }(model_1.Model));\r\n    exports.Texture = Texture;\r\n    Texture.__name__ = \"Texture\";\r\n    Texture.init_Texture();\r\n}\r\n","/* models\\textures\\image_url_texture.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var texture_1 = require(459) /* ./texture */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var image_1 = require(366) /* ../../core/util/image */;\r\n    var ImageURLTexture = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ImageURLTexture, _super);\r\n        function ImageURLTexture(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ImageURLTexture.init_ImageURLTexture = function () {\r\n            this.define({\r\n                url: [p.String],\r\n            });\r\n        };\r\n        ImageURLTexture.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._loader = new image_1.ImageLoader(this.url);\r\n        };\r\n        ImageURLTexture.prototype.get_pattern = function (_color, _scale, _weight) {\r\n            var _this = this;\r\n            return function (ctx) {\r\n                if (!_this._loader.finished) {\r\n                    return null;\r\n                }\r\n                return ctx.createPattern(_this._loader.image, _this.repetition);\r\n            };\r\n        };\r\n        ImageURLTexture.prototype.onload = function (defer_func) {\r\n            this._loader.promise.then(function () { return defer_func(); });\r\n        };\r\n        return ImageURLTexture;\r\n    }(texture_1.Texture));\r\n    exports.ImageURLTexture = ImageURLTexture;\r\n    ImageURLTexture.__name__ = \"ImageURLTexture\";\r\n    ImageURLTexture.init_ImageURLTexture();\r\n}\r\n","/* models\\tools\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var action_tool_1 = require(422) /* ./actions/action_tool */;\r\n    exports.ActionTool = action_tool_1.ActionTool;\r\n    var custom_action_1 = require(462) /* ./actions/custom_action */;\r\n    exports.CustomAction = custom_action_1.CustomAction;\r\n    var help_tool_1 = require(423) /* ./actions/help_tool */;\r\n    exports.HelpTool = help_tool_1.HelpTool;\r\n    var redo_tool_1 = require(463) /* ./actions/redo_tool */;\r\n    exports.RedoTool = redo_tool_1.RedoTool;\r\n    var reset_tool_1 = require(464) /* ./actions/reset_tool */;\r\n    exports.ResetTool = reset_tool_1.ResetTool;\r\n    var save_tool_1 = require(465) /* ./actions/save_tool */;\r\n    exports.SaveTool = save_tool_1.SaveTool;\r\n    var undo_tool_1 = require(466) /* ./actions/undo_tool */;\r\n    exports.UndoTool = undo_tool_1.UndoTool;\r\n    var zoom_in_tool_1 = require(467) /* ./actions/zoom_in_tool */;\r\n    exports.ZoomInTool = zoom_in_tool_1.ZoomInTool;\r\n    var zoom_out_tool_1 = require(470) /* ./actions/zoom_out_tool */;\r\n    exports.ZoomOutTool = zoom_out_tool_1.ZoomOutTool;\r\n    var button_tool_1 = require(411) /* ./button_tool */;\r\n    exports.ButtonTool = button_tool_1.ButtonTool;\r\n    var edit_tool_1 = require(471) /* ./edit/edit_tool */;\r\n    exports.EditTool = edit_tool_1.EditTool;\r\n    var box_edit_tool_1 = require(472) /* ./edit/box_edit_tool */;\r\n    exports.BoxEditTool = box_edit_tool_1.BoxEditTool;\r\n    var freehand_draw_tool_1 = require(473) /* ./edit/freehand_draw_tool */;\r\n    exports.FreehandDrawTool = freehand_draw_tool_1.FreehandDrawTool;\r\n    var point_draw_tool_1 = require(474) /* ./edit/point_draw_tool */;\r\n    exports.PointDrawTool = point_draw_tool_1.PointDrawTool;\r\n    var poly_draw_tool_1 = require(475) /* ./edit/poly_draw_tool */;\r\n    exports.PolyDrawTool = poly_draw_tool_1.PolyDrawTool;\r\n    var poly_tool_1 = require(476) /* ./edit/poly_tool */;\r\n    exports.PolyTool = poly_tool_1.PolyTool;\r\n    var poly_edit_tool_1 = require(477) /* ./edit/poly_edit_tool */;\r\n    exports.PolyEditTool = poly_edit_tool_1.PolyEditTool;\r\n    var box_select_tool_1 = require(478) /* ./gestures/box_select_tool */;\r\n    exports.BoxSelectTool = box_select_tool_1.BoxSelectTool;\r\n    var box_zoom_tool_1 = require(481) /* ./gestures/box_zoom_tool */;\r\n    exports.BoxZoomTool = box_zoom_tool_1.BoxZoomTool;\r\n    var gesture_tool_1 = require(421) /* ./gestures/gesture_tool */;\r\n    exports.GestureTool = gesture_tool_1.GestureTool;\r\n    var lasso_select_tool_1 = require(482) /* ./gestures/lasso_select_tool */;\r\n    exports.LassoSelectTool = lasso_select_tool_1.LassoSelectTool;\r\n    var line_edit_tool_1 = require(484) /* ./edit/line_edit_tool */;\r\n    exports.LineEditTool = line_edit_tool_1.LineEditTool;\r\n    var pan_tool_1 = require(486) /* ./gestures/pan_tool */;\r\n    exports.PanTool = pan_tool_1.PanTool;\r\n    var poly_select_tool_1 = require(483) /* ./gestures/poly_select_tool */;\r\n    exports.PolySelectTool = poly_select_tool_1.PolySelectTool;\r\n    var range_tool_1 = require(487) /* ./gestures/range_tool */;\r\n    exports.RangeTool = range_tool_1.RangeTool;\r\n    var select_tool_1 = require(479) /* ./gestures/select_tool */;\r\n    exports.SelectTool = select_tool_1.SelectTool;\r\n    var tap_tool_1 = require(488) /* ./gestures/tap_tool */;\r\n    exports.TapTool = tap_tool_1.TapTool;\r\n    var wheel_pan_tool_1 = require(489) /* ./gestures/wheel_pan_tool */;\r\n    exports.WheelPanTool = wheel_pan_tool_1.WheelPanTool;\r\n    var wheel_zoom_tool_1 = require(490) /* ./gestures/wheel_zoom_tool */;\r\n    exports.WheelZoomTool = wheel_zoom_tool_1.WheelZoomTool;\r\n    var crosshair_tool_1 = require(491) /* ./inspectors/crosshair_tool */;\r\n    exports.CrosshairTool = crosshair_tool_1.CrosshairTool;\r\n    var customjs_hover_1 = require(492) /* ./inspectors/customjs_hover */;\r\n    exports.CustomJSHover = customjs_hover_1.CustomJSHover;\r\n    var hover_tool_1 = require(493) /* ./inspectors/hover_tool */;\r\n    exports.HoverTool = hover_tool_1.HoverTool;\r\n    var inspect_tool_1 = require(410) /* ./inspectors/inspect_tool */;\r\n    exports.InspectTool = inspect_tool_1.InspectTool;\r\n    var tool_1 = require(413) /* ./tool */;\r\n    exports.Tool = tool_1.Tool;\r\n    var tool_proxy_1 = require(494) /* ./tool_proxy */;\r\n    exports.ToolProxy = tool_proxy_1.ToolProxy;\r\n    var toolbar_1 = require(409) /* ./toolbar */;\r\n    exports.Toolbar = toolbar_1.Toolbar;\r\n    var toolbar_base_1 = require(420) /* ./toolbar_base */;\r\n    exports.ToolbarBase = toolbar_base_1.ToolbarBase;\r\n    var toolbar_box_1 = require(495) /* ./toolbar_box */;\r\n    exports.ProxyToolbar = toolbar_box_1.ProxyToolbar;\r\n    var toolbar_box_2 = require(495) /* ./toolbar_box */;\r\n    exports.ToolbarBox = toolbar_box_2.ToolbarBox;\r\n}\r\n","/* models\\tools\\actions\\custom_action.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var action_tool_1 = require(422) /* ./action_tool */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var toolbar_1 = require(414) /* ../../../styles/toolbar */;\r\n    var CustomActionButtonView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CustomActionButtonView, _super);\r\n        function CustomActionButtonView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CustomActionButtonView.prototype.css_classes = function () {\r\n            return _super.prototype.css_classes.call(this).concat(toolbar_1.bk_toolbar_button_custom_action);\r\n        };\r\n        return CustomActionButtonView;\r\n    }(action_tool_1.ActionToolButtonView));\r\n    exports.CustomActionButtonView = CustomActionButtonView;\r\n    CustomActionButtonView.__name__ = \"CustomActionButtonView\";\r\n    var CustomActionView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CustomActionView, _super);\r\n        function CustomActionView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CustomActionView.prototype.doit = function () {\r\n            if (this.model.callback != null)\r\n                this.model.callback.execute(this.model);\r\n        };\r\n        return CustomActionView;\r\n    }(action_tool_1.ActionToolView));\r\n    exports.CustomActionView = CustomActionView;\r\n    CustomActionView.__name__ = \"CustomActionView\";\r\n    var CustomAction = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CustomAction, _super);\r\n        function CustomAction(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Custom Action\";\r\n            _this.button_view = CustomActionButtonView;\r\n            return _this;\r\n        }\r\n        CustomAction.init_CustomAction = function () {\r\n            this.prototype.default_view = CustomActionView;\r\n            this.define({\r\n                action_tooltip: [p.String, 'Perform a Custom Action'],\r\n                callback: [p.Any],\r\n                icon: [p.String],\r\n            });\r\n        };\r\n        Object.defineProperty(CustomAction.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this.action_tooltip;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return CustomAction;\r\n    }(action_tool_1.ActionTool));\r\n    exports.CustomAction = CustomAction;\r\n    CustomAction.__name__ = \"CustomAction\";\r\n    CustomAction.init_CustomAction();\r\n}\r\n","/* models\\tools\\actions\\redo_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var action_tool_1 = require(422) /* ./action_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var RedoToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RedoToolView, _super);\r\n        function RedoToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        RedoToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.plot_view.state_changed, function () { return _this.model.disabled = !_this.plot_view.can_redo(); });\r\n        };\r\n        RedoToolView.prototype.doit = function () {\r\n            this.plot_view.redo();\r\n        };\r\n        return RedoToolView;\r\n    }(action_tool_1.ActionToolView));\r\n    exports.RedoToolView = RedoToolView;\r\n    RedoToolView.__name__ = \"RedoToolView\";\r\n    var RedoTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RedoTool, _super);\r\n        function RedoTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Redo\";\r\n            _this.icon = icons_1.bk_tool_icon_redo;\r\n            return _this;\r\n        }\r\n        RedoTool.init_RedoTool = function () {\r\n            this.prototype.default_view = RedoToolView;\r\n            this.override({\r\n                disabled: true,\r\n            });\r\n            this.register_alias(\"redo\", function () { return new RedoTool(); });\r\n        };\r\n        return RedoTool;\r\n    }(action_tool_1.ActionTool));\r\n    exports.RedoTool = RedoTool;\r\n    RedoTool.__name__ = \"RedoTool\";\r\n    RedoTool.init_RedoTool();\r\n}\r\n","/* models\\tools\\actions\\reset_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var action_tool_1 = require(422) /* ./action_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var ResetToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ResetToolView, _super);\r\n        function ResetToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ResetToolView.prototype.doit = function () {\r\n            this.plot_view.reset();\r\n        };\r\n        return ResetToolView;\r\n    }(action_tool_1.ActionToolView));\r\n    exports.ResetToolView = ResetToolView;\r\n    ResetToolView.__name__ = \"ResetToolView\";\r\n    var ResetTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ResetTool, _super);\r\n        function ResetTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Reset\";\r\n            _this.icon = icons_1.bk_tool_icon_reset;\r\n            return _this;\r\n        }\r\n        ResetTool.init_ResetTool = function () {\r\n            this.prototype.default_view = ResetToolView;\r\n            this.register_alias(\"reset\", function () { return new ResetTool(); });\r\n        };\r\n        return ResetTool;\r\n    }(action_tool_1.ActionTool));\r\n    exports.ResetTool = ResetTool;\r\n    ResetTool.__name__ = \"ResetTool\";\r\n    ResetTool.init_ResetTool();\r\n}\r\n","/* models\\tools\\actions\\save_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var action_tool_1 = require(422) /* ./action_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var SaveToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SaveToolView, _super);\r\n        function SaveToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SaveToolView.prototype.copy = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var blob, item;\r\n                var _a;\r\n                return tslib_1.__generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0: return [4 /*yield*/, this.plot_view.to_blob()];\r\n                        case 1:\r\n                            blob = _b.sent();\r\n                            item = new ClipboardItem((_a = {}, _a[blob.type] = blob, _a));\r\n                            return [4 /*yield*/, navigator.clipboard.write([item])];\r\n                        case 2:\r\n                            _b.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        SaveToolView.prototype.save = function (name) {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var blob, link;\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.plot_view.to_blob()];\r\n                        case 1:\r\n                            blob = _a.sent();\r\n                            link = document.createElement(\"a\");\r\n                            link.href = URL.createObjectURL(blob);\r\n                            link.download = name; // + \".png\" | \"svg\" (inferred from MIME type)\r\n                            link.target = \"_blank\";\r\n                            link.dispatchEvent(new MouseEvent(\"click\"));\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        SaveToolView.prototype.doit = function (action) {\r\n            if (action === void 0) {\r\n                action = \"save\";\r\n            }\r\n            switch (action) {\r\n                case \"save\":\r\n                    this.save(\"bokeh_plot\");\r\n                    break;\r\n                case \"copy\":\r\n                    this.copy();\r\n                    break;\r\n            }\r\n        };\r\n        return SaveToolView;\r\n    }(action_tool_1.ActionToolView));\r\n    exports.SaveToolView = SaveToolView;\r\n    SaveToolView.__name__ = \"SaveToolView\";\r\n    var SaveTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SaveTool, _super);\r\n        function SaveTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Save\";\r\n            _this.icon = icons_1.bk_tool_icon_save;\r\n            return _this;\r\n        }\r\n        SaveTool.init_SaveTool = function () {\r\n            this.prototype.default_view = SaveToolView;\r\n            this.register_alias(\"save\", function () { return new SaveTool(); });\r\n        };\r\n        Object.defineProperty(SaveTool.prototype, \"menu\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return [\r\n                    {\r\n                        icon: \"bk-tool-icon-copy-to-clipboard\",\r\n                        tooltip: \"Copy image to clipboard\",\r\n                        if: function () { return typeof ClipboardItem !== \"undefined\"; },\r\n                        handler: function () {\r\n                            _this.do.emit(\"copy\");\r\n                        },\r\n                    },\r\n                ];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return SaveTool;\r\n    }(action_tool_1.ActionTool));\r\n    exports.SaveTool = SaveTool;\r\n    SaveTool.__name__ = \"SaveTool\";\r\n    SaveTool.init_SaveTool();\r\n}\r\n","/* models\\tools\\actions\\undo_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var action_tool_1 = require(422) /* ./action_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var UndoToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(UndoToolView, _super);\r\n        function UndoToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        UndoToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.plot_view.state_changed, function () { return _this.model.disabled = !_this.plot_view.can_undo(); });\r\n        };\r\n        UndoToolView.prototype.doit = function () {\r\n            this.plot_view.undo();\r\n        };\r\n        return UndoToolView;\r\n    }(action_tool_1.ActionToolView));\r\n    exports.UndoToolView = UndoToolView;\r\n    UndoToolView.__name__ = \"UndoToolView\";\r\n    var UndoTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(UndoTool, _super);\r\n        function UndoTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Undo\";\r\n            _this.icon = icons_1.bk_tool_icon_undo;\r\n            return _this;\r\n        }\r\n        UndoTool.init_UndoTool = function () {\r\n            this.prototype.default_view = UndoToolView;\r\n            this.override({\r\n                disabled: true,\r\n            });\r\n            this.register_alias(\"undo\", function () { return new UndoTool(); });\r\n        };\r\n        return UndoTool;\r\n    }(action_tool_1.ActionTool));\r\n    exports.UndoTool = UndoTool;\r\n    UndoTool.__name__ = \"UndoTool\";\r\n    UndoTool.init_UndoTool();\r\n}\r\n","/* models\\tools\\actions\\zoom_in_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var zoom_base_tool_1 = require(468) /* ./zoom_base_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var ZoomInTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ZoomInTool, _super);\r\n        function ZoomInTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.sign = 1;\r\n            _this.tool_name = \"Zoom In\";\r\n            _this.icon = icons_1.bk_tool_icon_zoom_in;\r\n            return _this;\r\n        }\r\n        ZoomInTool.init_ZoomInTool = function () {\r\n            this.prototype.default_view = zoom_base_tool_1.ZoomBaseToolView;\r\n            this.register_alias(\"zoom_in\", function () { return new ZoomInTool({ dimensions: 'both' }); });\r\n            this.register_alias(\"xzoom_in\", function () { return new ZoomInTool({ dimensions: 'width' }); });\r\n            this.register_alias(\"yzoom_in\", function () { return new ZoomInTool({ dimensions: 'height' }); });\r\n        };\r\n        return ZoomInTool;\r\n    }(zoom_base_tool_1.ZoomBaseTool));\r\n    exports.ZoomInTool = ZoomInTool;\r\n    ZoomInTool.__name__ = \"ZoomInTool\";\r\n    ZoomInTool.init_ZoomInTool();\r\n}\r\n","/* models\\tools\\actions\\zoom_base_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var action_tool_1 = require(422) /* ./action_tool */;\r\n    var zoom_1 = require(469) /* ../../../core/util/zoom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var ZoomBaseToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ZoomBaseToolView, _super);\r\n        function ZoomBaseToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ZoomBaseToolView.prototype.doit = function () {\r\n            var frame = this.plot_view.frame;\r\n            var dims = this.model.dimensions;\r\n            // restrict to axis configured in tool's dimensions property\r\n            var h_axis = dims == 'width' || dims == 'both';\r\n            var v_axis = dims == 'height' || dims == 'both';\r\n            var zoom_info = zoom_1.scale_range(frame, this.model.sign * this.model.factor, h_axis, v_axis);\r\n            this.plot_view.push_state('zoom_out', { range: zoom_info });\r\n            this.plot_view.update_range(zoom_info, false, true);\r\n            if (this.model.document)\r\n                this.model.document.interactive_start(this.plot_model);\r\n        };\r\n        return ZoomBaseToolView;\r\n    }(action_tool_1.ActionToolView));\r\n    exports.ZoomBaseToolView = ZoomBaseToolView;\r\n    ZoomBaseToolView.__name__ = \"ZoomBaseToolView\";\r\n    var ZoomBaseTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ZoomBaseTool, _super);\r\n        function ZoomBaseTool(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ZoomBaseTool.init_ZoomBaseTool = function () {\r\n            this.prototype.default_view = ZoomBaseToolView;\r\n            this.define({\r\n                factor: [p.Percent, 0.1],\r\n                dimensions: [p.Dimensions, \"both\"],\r\n            });\r\n        };\r\n        Object.defineProperty(ZoomBaseTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(this.tool_name, this.dimensions);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ZoomBaseTool;\r\n    }(action_tool_1.ActionTool));\r\n    exports.ZoomBaseTool = ZoomBaseTool;\r\n    ZoomBaseTool.__name__ = \"ZoomBaseTool\";\r\n    ZoomBaseTool.init_ZoomBaseTool();\r\n}\r\n","/* core\\util\\zoom.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var math_1 = require(125) /* ./math */;\r\n    // Module for zoom-related functions\r\n    function scale_highlow(range, factor, center) {\r\n        var _a = tslib_1.__read([range.start, range.end], 2), low = _a[0], high = _a[1];\r\n        var x = center != null ? center : (high + low) / 2.0;\r\n        var x0 = low - (low - x) * factor;\r\n        var x1 = high - (high - x) * factor;\r\n        return [x0, x1];\r\n    }\r\n    exports.scale_highlow = scale_highlow;\r\n    function get_info(scales, _a) {\r\n        var e_1, _b;\r\n        var _c = tslib_1.__read(_a, 2), sxy0 = _c[0], sxy1 = _c[1];\r\n        var info = new Map();\r\n        try {\r\n            for (var scales_1 = tslib_1.__values(scales), scales_1_1 = scales_1.next(); !scales_1_1.done; scales_1_1 = scales_1.next()) {\r\n                var _d = tslib_1.__read(scales_1_1.value, 2), name = _d[0], scale = _d[1];\r\n                var _e = tslib_1.__read(scale.r_invert(sxy0, sxy1), 2), start = _e[0], end = _e[1];\r\n                info.set(name, { start: start, end: end });\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (scales_1_1 && !scales_1_1.done && (_b = scales_1.return))\r\n                    _b.call(scales_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        return info;\r\n    }\r\n    exports.get_info = get_info;\r\n    function scale_range(frame, factor, h_axis, v_axis, center) {\r\n        if (h_axis === void 0) {\r\n            h_axis = true;\r\n        }\r\n        if (v_axis === void 0) {\r\n            v_axis = true;\r\n        }\r\n        /*\r\n         * Utility function for zoom tools to calculate/create the zoom_info object\r\n         * of the form required by ``PlotView.update_range``\r\n         *\r\n         * Parameters:\r\n         *   frame : CartesianFrame\r\n         *   factor : Number\r\n         *   h_axis : Boolean, optional\r\n         *     whether to zoom the horizontal axis (default = true)\r\n         *   v_axis : Boolean, optional\r\n         *     whether to zoom the horizontal axis (default = true)\r\n         *   center : object, optional\r\n         *     of form {'x': Number, 'y', Number}\r\n         *\r\n         * Returns:\r\n         *   object:\r\n         */\r\n        // clamp the  magnitude of factor, if it is > 1 bad things happen\r\n        factor = math_1.clamp(factor, -0.9, 0.9);\r\n        var hfactor = h_axis ? factor : 0;\r\n        var _a = tslib_1.__read(scale_highlow(frame.bbox.h_range, hfactor, center != null ? center.x : undefined), 2), sx0 = _a[0], sx1 = _a[1];\r\n        var xrs = get_info(frame.x_scales, [sx0, sx1]);\r\n        var vfactor = v_axis ? factor : 0;\r\n        var _b = tslib_1.__read(scale_highlow(frame.bbox.v_range, vfactor, center != null ? center.y : undefined), 2), sy0 = _b[0], sy1 = _b[1];\r\n        var yrs = get_info(frame.y_scales, [sy0, sy1]);\r\n        // OK this sucks we can't set factor independently in each direction. It is used\r\n        // for GMap plots, and GMap plots always preserve aspect, so effective the value\r\n        // of 'dimensions' is ignored.\r\n        return { xrs: xrs, yrs: yrs, factor: factor };\r\n    }\r\n    exports.scale_range = scale_range;\r\n}\r\n","/* models\\tools\\actions\\zoom_out_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var zoom_base_tool_1 = require(468) /* ./zoom_base_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var ZoomOutTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ZoomOutTool, _super);\r\n        function ZoomOutTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.sign = -1;\r\n            _this.tool_name = \"Zoom Out\";\r\n            _this.icon = icons_1.bk_tool_icon_zoom_out;\r\n            return _this;\r\n        }\r\n        ZoomOutTool.init_ZoomOutTool = function () {\r\n            this.prototype.default_view = zoom_base_tool_1.ZoomBaseToolView;\r\n            this.register_alias(\"zoom_out\", function () { return new ZoomOutTool({ dimensions: 'both' }); });\r\n            this.register_alias(\"xzoom_out\", function () { return new ZoomOutTool({ dimensions: 'width' }); });\r\n            this.register_alias(\"yzoom_out\", function () { return new ZoomOutTool({ dimensions: 'height' }); });\r\n        };\r\n        return ZoomOutTool;\r\n    }(zoom_base_tool_1.ZoomBaseTool));\r\n    exports.ZoomOutTool = ZoomOutTool;\r\n    ZoomOutTool.__name__ = \"ZoomOutTool\";\r\n    ZoomOutTool.init_ZoomOutTool();\r\n}\r\n","/* models\\tools\\edit\\edit_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var array_1 = require(124) /* ../../../core/util/array */;\r\n    var types_1 = require(123) /* ../../../core/util/types */;\r\n    var assert_1 = require(126) /* ../../../core/util/assert */;\r\n    var gesture_tool_1 = require(421) /* ../gestures/gesture_tool */;\r\n    var EditToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EditToolView, _super);\r\n        function EditToolView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._mouse_in_frame = true;\r\n            return _this;\r\n        }\r\n        EditToolView.prototype._select_mode = function (ev) {\r\n            var shiftKey = ev.shiftKey, ctrlKey = ev.ctrlKey;\r\n            if (!shiftKey && !ctrlKey)\r\n                return \"replace\";\r\n            else if (shiftKey && !ctrlKey)\r\n                return \"append\";\r\n            else if (!shiftKey && ctrlKey)\r\n                return \"intersect\";\r\n            else if (shiftKey && ctrlKey)\r\n                return \"subtract\";\r\n            else\r\n                assert_1.unreachable();\r\n        };\r\n        EditToolView.prototype._move_enter = function (_e) {\r\n            this._mouse_in_frame = true;\r\n        };\r\n        EditToolView.prototype._move_exit = function (_e) {\r\n            this._mouse_in_frame = false;\r\n        };\r\n        EditToolView.prototype._map_drag = function (sx, sy, renderer) {\r\n            // Maps screen to data coordinates\r\n            var frame = this.plot_view.frame;\r\n            if (!frame.bbox.contains(sx, sy)) {\r\n                return null;\r\n            }\r\n            var renderer_view = this.plot_view.renderer_views.get(renderer);\r\n            var x = renderer_view.coordinates.x_scale.invert(sx);\r\n            var y = renderer_view.coordinates.y_scale.invert(sy);\r\n            return [x, y];\r\n        };\r\n        EditToolView.prototype._delete_selected = function (renderer) {\r\n            var e_1, _a;\r\n            // Deletes all selected rows in the ColumnDataSource\r\n            var cds = renderer.data_source;\r\n            var indices = cds.selected.indices;\r\n            indices.sort();\r\n            try {\r\n                for (var _b = tslib_1.__values(cds.columns()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var column = _c.value;\r\n                    var values = cds.get_array(column);\r\n                    for (var index = 0; index < indices.length; index++) {\r\n                        var ind = indices[index];\r\n                        values.splice(ind - index, 1);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            this._emit_cds_changes(cds);\r\n        };\r\n        EditToolView.prototype._pop_glyphs = function (cds, num_objects) {\r\n            var e_2, _a;\r\n            // Pops rows in the CDS until only num_objects are left\r\n            var columns = cds.columns();\r\n            if (!num_objects || !columns.length)\r\n                return;\r\n            try {\r\n                for (var columns_1 = tslib_1.__values(columns), columns_1_1 = columns_1.next(); !columns_1_1.done; columns_1_1 = columns_1.next()) {\r\n                    var column = columns_1_1.value;\r\n                    var array = cds.get_array(column);\r\n                    var drop = array.length - num_objects + 1;\r\n                    if (drop < 1)\r\n                        continue;\r\n                    if (!types_1.isArray(array)) {\r\n                        array = Array.from(array);\r\n                        cds.data[column] = array;\r\n                    }\r\n                    array.splice(0, drop);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (columns_1_1 && !columns_1_1.done && (_a = columns_1.return))\r\n                        _a.call(columns_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        EditToolView.prototype._emit_cds_changes = function (cds, redraw, clear, emit) {\r\n            if (redraw === void 0) {\r\n                redraw = true;\r\n            }\r\n            if (clear === void 0) {\r\n                clear = true;\r\n            }\r\n            if (emit === void 0) {\r\n                emit = true;\r\n            }\r\n            if (clear)\r\n                cds.selection_manager.clear();\r\n            if (redraw)\r\n                cds.change.emit();\r\n            if (emit) {\r\n                cds.data = cds.data;\r\n                cds.properties.data.change.emit();\r\n            }\r\n        };\r\n        EditToolView.prototype._drag_points = function (ev, renderers, dim) {\r\n            var e_3, _a, e_4, _b;\r\n            if (dim === void 0) {\r\n                dim = \"both\";\r\n            }\r\n            if (this._basepoint == null)\r\n                return;\r\n            var _c = tslib_1.__read(this._basepoint, 2), bx = _c[0], by = _c[1];\r\n            try {\r\n                for (var renderers_1 = tslib_1.__values(renderers), renderers_1_1 = renderers_1.next(); !renderers_1_1.done; renderers_1_1 = renderers_1.next()) {\r\n                    var renderer = renderers_1_1.value;\r\n                    var basepoint = this._map_drag(bx, by, renderer);\r\n                    var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n                    if (point == null || basepoint == null) {\r\n                        continue;\r\n                    }\r\n                    var _d = tslib_1.__read(point, 2), x = _d[0], y = _d[1];\r\n                    var _f = tslib_1.__read(basepoint, 2), px = _f[0], py = _f[1];\r\n                    var _g = tslib_1.__read([x - px, y - py], 2), dx = _g[0], dy = _g[1];\r\n                    // Type once dataspecs are typed\r\n                    var glyph = renderer.glyph;\r\n                    var cds = renderer.data_source;\r\n                    var _h = tslib_1.__read([glyph.x.field, glyph.y.field], 2), xkey = _h[0], ykey = _h[1];\r\n                    try {\r\n                        for (var _j = (e_4 = void 0, tslib_1.__values(cds.selected.indices)), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                            var index = _k.value;\r\n                            if (xkey && (dim == \"width\" || dim == \"both\")) {\r\n                                cds.data[xkey][index] += dx;\r\n                            }\r\n                            if (ykey && (dim == \"height\" || dim == \"both\")) {\r\n                                cds.data[ykey][index] += dy;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_4_1) {\r\n                        e_4 = { error: e_4_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_k && !_k.done && (_b = _j.return))\r\n                                _b.call(_j);\r\n                        }\r\n                        finally {\r\n                            if (e_4)\r\n                                throw e_4.error;\r\n                        }\r\n                    }\r\n                    cds.change.emit();\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderers_1_1 && !renderers_1_1.done && (_a = renderers_1.return))\r\n                        _a.call(renderers_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            this._basepoint = [ev.sx, ev.sy];\r\n        };\r\n        EditToolView.prototype._pad_empty_columns = function (cds, coord_columns) {\r\n            var e_5, _a;\r\n            try {\r\n                // Pad ColumnDataSource non-coordinate columns with empty_value\r\n                for (var _b = tslib_1.__values(cds.columns()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var column = _c.value;\r\n                    if (!array_1.includes(coord_columns, column))\r\n                        cds.get_array(column).push(this.model.empty_value);\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n        };\r\n        EditToolView.prototype._select_event = function (ev, mode, renderers) {\r\n            var e_6, _a;\r\n            // Process selection event on the supplied renderers and return selected renderers\r\n            var frame = this.plot_view.frame;\r\n            var sx = ev.sx, sy = ev.sy;\r\n            if (!frame.bbox.contains(sx, sy)) {\r\n                return [];\r\n            }\r\n            var geometry = { type: 'point', sx: sx, sy: sy };\r\n            var selected = [];\r\n            try {\r\n                for (var renderers_2 = tslib_1.__values(renderers), renderers_2_1 = renderers_2.next(); !renderers_2_1.done; renderers_2_1 = renderers_2.next()) {\r\n                    var renderer = renderers_2_1.value;\r\n                    var sm = renderer.get_selection_manager();\r\n                    var cds = renderer.data_source;\r\n                    var views = [this.plot_view.renderer_views.get(renderer)];\r\n                    var did_hit = sm.select(views, geometry, true, mode);\r\n                    if (did_hit) {\r\n                        selected.push(renderer);\r\n                    }\r\n                    cds.properties.selected.change.emit();\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderers_2_1 && !renderers_2_1.done && (_a = renderers_2.return))\r\n                        _a.call(renderers_2);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            return selected;\r\n        };\r\n        return EditToolView;\r\n    }(gesture_tool_1.GestureToolView));\r\n    exports.EditToolView = EditToolView;\r\n    EditToolView.__name__ = \"EditToolView\";\r\n    var EditTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(EditTool, _super);\r\n        function EditTool(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        EditTool.init_EditTool = function () {\r\n            this.define({\r\n                custom_icon: [p.String],\r\n                custom_tooltip: [p.String],\r\n                empty_value: [p.Any],\r\n                renderers: [p.Array, []],\r\n            });\r\n        };\r\n        Object.defineProperty(EditTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this.custom_tooltip || this.tool_name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EditTool.prototype, \"computed_icon\", {\r\n            get: function () {\r\n                return this.custom_icon || this.icon;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return EditTool;\r\n    }(gesture_tool_1.GestureTool));\r\n    exports.EditTool = EditTool;\r\n    EditTool.__name__ = \"EditTool\";\r\n    EditTool.init_EditTool();\r\n}\r\n","/* models\\tools\\edit\\box_edit_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var edit_tool_1 = require(471) /* ./edit_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var BoxEditToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxEditToolView, _super);\r\n        function BoxEditToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BoxEditToolView.prototype._tap = function (ev) {\r\n            if ((this._draw_basepoint != null) || (this._basepoint != null))\r\n                return;\r\n            this._select_event(ev, this._select_mode(ev), this.model.renderers);\r\n        };\r\n        BoxEditToolView.prototype._keyup = function (ev) {\r\n            var e_1, _a;\r\n            if (!this.model.active || !this._mouse_in_frame)\r\n                return;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var renderer = _c.value;\r\n                    if (ev.keyCode === dom_1.Keys.Backspace) {\r\n                        this._delete_selected(renderer);\r\n                    }\r\n                    else if (ev.keyCode == dom_1.Keys.Esc) {\r\n                        // Type properly once selection_manager is typed\r\n                        var cds = renderer.data_source;\r\n                        cds.selection_manager.clear();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        BoxEditToolView.prototype._set_extent = function (_a, _b, append, emit) {\r\n            var _c = tslib_1.__read(_a, 2), sx0 = _c[0], sx1 = _c[1];\r\n            var _d = tslib_1.__read(_b, 2), sy0 = _d[0], sy1 = _d[1];\r\n            if (emit === void 0) {\r\n                emit = false;\r\n            }\r\n            var renderer = this.model.renderers[0];\r\n            var renderer_view = this.plot_view.renderer_views.get(renderer);\r\n            // Type once dataspecs are typed\r\n            var glyph = renderer.glyph;\r\n            var cds = renderer.data_source;\r\n            var _e = tslib_1.__read(renderer_view.coordinates.x_scale.r_invert(sx0, sx1), 2), x0 = _e[0], x1 = _e[1];\r\n            var _f = tslib_1.__read(renderer_view.coordinates.y_scale.r_invert(sy0, sy1), 2), y0 = _f[0], y1 = _f[1];\r\n            var _g = tslib_1.__read([(x0 + x1) / 2, (y0 + y1) / 2], 2), x = _g[0], y = _g[1];\r\n            var _h = tslib_1.__read([x1 - x0, y1 - y0], 2), w = _h[0], h = _h[1];\r\n            var _j = tslib_1.__read([glyph.x.field, glyph.y.field], 2), xkey = _j[0], ykey = _j[1];\r\n            var _k = tslib_1.__read([glyph.width.field, glyph.height.field], 2), wkey = _k[0], hkey = _k[1];\r\n            if (append) {\r\n                this._pop_glyphs(cds, this.model.num_objects);\r\n                if (xkey)\r\n                    cds.get_array(xkey).push(x);\r\n                if (ykey)\r\n                    cds.get_array(ykey).push(y);\r\n                if (wkey)\r\n                    cds.get_array(wkey).push(w);\r\n                if (hkey)\r\n                    cds.get_array(hkey).push(h);\r\n                this._pad_empty_columns(cds, [xkey, ykey, wkey, hkey]);\r\n            }\r\n            else {\r\n                var index = cds.data[xkey].length - 1;\r\n                if (xkey)\r\n                    cds.data[xkey][index] = x;\r\n                if (ykey)\r\n                    cds.data[ykey][index] = y;\r\n                if (wkey)\r\n                    cds.data[wkey][index] = w;\r\n                if (hkey)\r\n                    cds.data[hkey][index] = h;\r\n            }\r\n            this._emit_cds_changes(cds, true, false, emit);\r\n        };\r\n        BoxEditToolView.prototype._update_box = function (ev, append, emit) {\r\n            if (append === void 0) {\r\n                append = false;\r\n            }\r\n            if (emit === void 0) {\r\n                emit = false;\r\n            }\r\n            if (this._draw_basepoint == null)\r\n                return;\r\n            var curpoint = [ev.sx, ev.sy];\r\n            var frame = this.plot_view.frame;\r\n            var dims = this.model.dimensions;\r\n            var limits = this.model._get_dim_limits(this._draw_basepoint, curpoint, frame, dims);\r\n            if (limits != null) {\r\n                var _a = tslib_1.__read(limits, 2), sxlim = _a[0], sylim = _a[1];\r\n                this._set_extent(sxlim, sylim, append, emit);\r\n            }\r\n        };\r\n        BoxEditToolView.prototype._doubletap = function (ev) {\r\n            if (!this.model.active)\r\n                return;\r\n            if (this._draw_basepoint != null) {\r\n                this._update_box(ev, false, true);\r\n                this._draw_basepoint = null;\r\n            }\r\n            else {\r\n                this._draw_basepoint = [ev.sx, ev.sy];\r\n                this._select_event(ev, \"append\", this.model.renderers);\r\n                this._update_box(ev, true, false);\r\n            }\r\n        };\r\n        BoxEditToolView.prototype._move = function (ev) {\r\n            this._update_box(ev, false, false);\r\n        };\r\n        BoxEditToolView.prototype._pan_start = function (ev) {\r\n            if (ev.shiftKey) {\r\n                if (this._draw_basepoint != null)\r\n                    return;\r\n                this._draw_basepoint = [ev.sx, ev.sy];\r\n                this._update_box(ev, true, false);\r\n            }\r\n            else {\r\n                if (this._basepoint != null)\r\n                    return;\r\n                this._select_event(ev, \"append\", this.model.renderers);\r\n                this._basepoint = [ev.sx, ev.sy];\r\n            }\r\n        };\r\n        BoxEditToolView.prototype._pan = function (ev, append, emit) {\r\n            if (append === void 0) {\r\n                append = false;\r\n            }\r\n            if (emit === void 0) {\r\n                emit = false;\r\n            }\r\n            if (ev.shiftKey) {\r\n                if (this._draw_basepoint == null)\r\n                    return;\r\n                this._update_box(ev, append, emit);\r\n            }\r\n            else {\r\n                if (this._basepoint == null)\r\n                    return;\r\n                this._drag_points(ev, this.model.renderers);\r\n            }\r\n        };\r\n        BoxEditToolView.prototype._pan_end = function (ev) {\r\n            var e_2, _a;\r\n            this._pan(ev, false, true);\r\n            if (ev.shiftKey) {\r\n                this._draw_basepoint = null;\r\n            }\r\n            else {\r\n                this._basepoint = null;\r\n                try {\r\n                    for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                        var renderer = _c.value;\r\n                        this._emit_cds_changes(renderer.data_source, false, true, true);\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_c && !_c.done && (_a = _b.return))\r\n                            _a.call(_b);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        return BoxEditToolView;\r\n    }(edit_tool_1.EditToolView));\r\n    exports.BoxEditToolView = BoxEditToolView;\r\n    BoxEditToolView.__name__ = \"BoxEditToolView\";\r\n    var BoxEditTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxEditTool, _super);\r\n        function BoxEditTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Box Edit Tool\";\r\n            _this.icon = icons_1.bk_tool_icon_box_edit;\r\n            _this.event_type = [\"tap\", \"pan\", \"move\"];\r\n            _this.default_order = 1;\r\n            return _this;\r\n        }\r\n        BoxEditTool.init_BoxEditTool = function () {\r\n            this.prototype.default_view = BoxEditToolView;\r\n            this.define({\r\n                dimensions: [p.Dimensions, \"both\"],\r\n                num_objects: [p.Int, 0],\r\n            });\r\n        };\r\n        return BoxEditTool;\r\n    }(edit_tool_1.EditTool));\r\n    exports.BoxEditTool = BoxEditTool;\r\n    BoxEditTool.__name__ = \"BoxEditTool\";\r\n    BoxEditTool.init_BoxEditTool();\r\n}\r\n","/* models\\tools\\edit\\freehand_draw_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var types_1 = require(123) /* ../../../core/util/types */;\r\n    var edit_tool_1 = require(471) /* ./edit_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var FreehandDrawToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FreehandDrawToolView, _super);\r\n        function FreehandDrawToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        FreehandDrawToolView.prototype._draw = function (ev, mode, emit) {\r\n            if (emit === void 0) {\r\n                emit = false;\r\n            }\r\n            if (!this.model.active)\r\n                return;\r\n            var renderer = this.model.renderers[0];\r\n            var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n            if (point == null)\r\n                return;\r\n            var _a = tslib_1.__read(point, 2), x = _a[0], y = _a[1];\r\n            var cds = renderer.data_source;\r\n            var glyph = renderer.glyph;\r\n            var _b = tslib_1.__read([glyph.xs.field, glyph.ys.field], 2), xkey = _b[0], ykey = _b[1];\r\n            if (mode == 'new') {\r\n                this._pop_glyphs(cds, this.model.num_objects);\r\n                if (xkey)\r\n                    cds.get_array(xkey).push([x]);\r\n                if (ykey)\r\n                    cds.get_array(ykey).push([y]);\r\n                this._pad_empty_columns(cds, [xkey, ykey]);\r\n            }\r\n            else if (mode == 'add') {\r\n                if (xkey) {\r\n                    var xidx = cds.data[xkey].length - 1;\r\n                    var xs = cds.get_array(xkey)[xidx];\r\n                    if (!types_1.isArray(xs)) {\r\n                        xs = Array.from(xs);\r\n                        cds.data[xkey][xidx] = xs;\r\n                    }\r\n                    xs.push(x);\r\n                }\r\n                if (ykey) {\r\n                    var yidx = cds.data[ykey].length - 1;\r\n                    var ys = cds.get_array(ykey)[yidx];\r\n                    if (!types_1.isArray(ys)) {\r\n                        ys = Array.from(ys);\r\n                        cds.data[ykey][yidx] = ys;\r\n                    }\r\n                    ys.push(y);\r\n                }\r\n            }\r\n            this._emit_cds_changes(cds, true, true, emit);\r\n        };\r\n        FreehandDrawToolView.prototype._pan_start = function (ev) {\r\n            this._draw(ev, 'new');\r\n        };\r\n        FreehandDrawToolView.prototype._pan = function (ev) {\r\n            this._draw(ev, 'add');\r\n        };\r\n        FreehandDrawToolView.prototype._pan_end = function (ev) {\r\n            this._draw(ev, 'add', true);\r\n        };\r\n        FreehandDrawToolView.prototype._tap = function (ev) {\r\n            this._select_event(ev, this._select_mode(ev), this.model.renderers);\r\n        };\r\n        FreehandDrawToolView.prototype._keyup = function (ev) {\r\n            var e_1, _a;\r\n            if (!this.model.active || !this._mouse_in_frame)\r\n                return;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var renderer = _c.value;\r\n                    if (ev.keyCode === dom_1.Keys.Esc) {\r\n                        renderer.data_source.selection_manager.clear();\r\n                    }\r\n                    else if (ev.keyCode === dom_1.Keys.Backspace) {\r\n                        this._delete_selected(renderer);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        return FreehandDrawToolView;\r\n    }(edit_tool_1.EditToolView));\r\n    exports.FreehandDrawToolView = FreehandDrawToolView;\r\n    FreehandDrawToolView.__name__ = \"FreehandDrawToolView\";\r\n    var FreehandDrawTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(FreehandDrawTool, _super);\r\n        function FreehandDrawTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Freehand Draw Tool\";\r\n            _this.icon = icons_1.bk_tool_icon_freehand_draw;\r\n            _this.event_type = [\"pan\", \"tap\"];\r\n            _this.default_order = 3;\r\n            return _this;\r\n        }\r\n        FreehandDrawTool.init_FreehandDrawTool = function () {\r\n            this.prototype.default_view = FreehandDrawToolView;\r\n            this.define({\r\n                num_objects: [p.Int, 0],\r\n            });\r\n        };\r\n        return FreehandDrawTool;\r\n    }(edit_tool_1.EditTool));\r\n    exports.FreehandDrawTool = FreehandDrawTool;\r\n    FreehandDrawTool.__name__ = \"FreehandDrawTool\";\r\n    FreehandDrawTool.init_FreehandDrawTool();\r\n}\r\n","/* models\\tools\\edit\\point_draw_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var edit_tool_1 = require(471) /* ./edit_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var PointDrawToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PointDrawToolView, _super);\r\n        function PointDrawToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PointDrawToolView.prototype._tap = function (ev) {\r\n            var renderers = this._select_event(ev, this._select_mode(ev), this.model.renderers);\r\n            if (renderers.length || !this.model.add) {\r\n                return;\r\n            }\r\n            var renderer = this.model.renderers[0];\r\n            var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n            if (point == null)\r\n                return;\r\n            // Type once dataspecs are typed\r\n            var glyph = renderer.glyph;\r\n            var cds = renderer.data_source;\r\n            var _a = tslib_1.__read([glyph.x.field, glyph.y.field], 2), xkey = _a[0], ykey = _a[1];\r\n            var _b = tslib_1.__read(point, 2), x = _b[0], y = _b[1];\r\n            this._pop_glyphs(cds, this.model.num_objects);\r\n            if (xkey)\r\n                cds.get_array(xkey).push(x);\r\n            if (ykey)\r\n                cds.get_array(ykey).push(y);\r\n            this._pad_empty_columns(cds, [xkey, ykey]);\r\n            cds.change.emit();\r\n            cds.data = cds.data;\r\n            cds.properties.data.change.emit();\r\n        };\r\n        PointDrawToolView.prototype._keyup = function (ev) {\r\n            var e_1, _a;\r\n            if (!this.model.active || !this._mouse_in_frame)\r\n                return;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var renderer = _c.value;\r\n                    if (ev.keyCode === dom_1.Keys.Backspace) {\r\n                        this._delete_selected(renderer);\r\n                    }\r\n                    else if (ev.keyCode == dom_1.Keys.Esc) {\r\n                        renderer.data_source.selection_manager.clear();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        PointDrawToolView.prototype._pan_start = function (ev) {\r\n            if (!this.model.drag)\r\n                return;\r\n            this._select_event(ev, \"append\", this.model.renderers);\r\n            this._basepoint = [ev.sx, ev.sy];\r\n        };\r\n        PointDrawToolView.prototype._pan = function (ev) {\r\n            if (!this.model.drag || this._basepoint == null)\r\n                return;\r\n            this._drag_points(ev, this.model.renderers);\r\n        };\r\n        PointDrawToolView.prototype._pan_end = function (ev) {\r\n            var e_2, _a;\r\n            if (!this.model.drag)\r\n                return;\r\n            this._pan(ev);\r\n            try {\r\n                for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var renderer = _c.value;\r\n                    this._emit_cds_changes(renderer.data_source, false, true, true);\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this._basepoint = null;\r\n        };\r\n        return PointDrawToolView;\r\n    }(edit_tool_1.EditToolView));\r\n    exports.PointDrawToolView = PointDrawToolView;\r\n    PointDrawToolView.__name__ = \"PointDrawToolView\";\r\n    var PointDrawTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PointDrawTool, _super);\r\n        function PointDrawTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Point Draw Tool\";\r\n            _this.icon = icons_1.bk_tool_icon_point_draw;\r\n            _this.event_type = [\"tap\", \"pan\", \"move\"];\r\n            _this.default_order = 2;\r\n            return _this;\r\n        }\r\n        PointDrawTool.init_PointDrawTool = function () {\r\n            this.prototype.default_view = PointDrawToolView;\r\n            this.define({\r\n                add: [p.Boolean, true],\r\n                drag: [p.Boolean, true],\r\n                num_objects: [p.Int, 0],\r\n            });\r\n        };\r\n        return PointDrawTool;\r\n    }(edit_tool_1.EditTool));\r\n    exports.PointDrawTool = PointDrawTool;\r\n    PointDrawTool.__name__ = \"PointDrawTool\";\r\n    PointDrawTool.init_PointDrawTool();\r\n}\r\n","/* models\\tools\\edit\\poly_draw_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var types_1 = require(123) /* ../../../core/util/types */;\r\n    var poly_tool_1 = require(476) /* ./poly_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var PolyDrawToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyDrawToolView, _super);\r\n        function PolyDrawToolView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._drawing = false;\r\n            _this._initialized = false;\r\n            return _this;\r\n        }\r\n        PolyDrawToolView.prototype._tap = function (ev) {\r\n            if (this._drawing)\r\n                this._draw(ev, 'add', true);\r\n            else\r\n                this._select_event(ev, this._select_mode(ev), this.model.renderers);\r\n        };\r\n        PolyDrawToolView.prototype._draw = function (ev, mode, emit) {\r\n            if (emit === void 0) {\r\n                emit = false;\r\n            }\r\n            var renderer = this.model.renderers[0];\r\n            var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n            if (!this._initialized)\r\n                this.activate(); // Ensure that activate has been called\r\n            if (point == null)\r\n                return;\r\n            var _a = tslib_1.__read(this._snap_to_vertex.apply(this, tslib_1.__spread([ev], point)), 2), x = _a[0], y = _a[1];\r\n            var cds = renderer.data_source;\r\n            var glyph = renderer.glyph;\r\n            var _b = tslib_1.__read([glyph.xs.field, glyph.ys.field], 2), xkey = _b[0], ykey = _b[1];\r\n            if (mode == 'new') {\r\n                this._pop_glyphs(cds, this.model.num_objects);\r\n                if (xkey)\r\n                    cds.get_array(xkey).push([x, x]);\r\n                if (ykey)\r\n                    cds.get_array(ykey).push([y, y]);\r\n                this._pad_empty_columns(cds, [xkey, ykey]);\r\n            }\r\n            else if (mode == 'edit') {\r\n                if (xkey) {\r\n                    var xs = cds.data[xkey][cds.data[xkey].length - 1];\r\n                    xs[xs.length - 1] = x;\r\n                }\r\n                if (ykey) {\r\n                    var ys = cds.data[ykey][cds.data[ykey].length - 1];\r\n                    ys[ys.length - 1] = y;\r\n                }\r\n            }\r\n            else if (mode == 'add') {\r\n                if (xkey) {\r\n                    var xidx = cds.data[xkey].length - 1;\r\n                    var xs = cds.get_array(xkey)[xidx];\r\n                    var nx = xs[xs.length - 1];\r\n                    xs[xs.length - 1] = x;\r\n                    if (!types_1.isArray(xs)) {\r\n                        xs = Array.from(xs);\r\n                        cds.data[xkey][xidx] = xs;\r\n                    }\r\n                    xs.push(nx);\r\n                }\r\n                if (ykey) {\r\n                    var yidx = cds.data[ykey].length - 1;\r\n                    var ys = cds.get_array(ykey)[yidx];\r\n                    var ny = ys[ys.length - 1];\r\n                    ys[ys.length - 1] = y;\r\n                    if (!types_1.isArray(ys)) {\r\n                        ys = Array.from(ys);\r\n                        cds.data[ykey][yidx] = ys;\r\n                    }\r\n                    ys.push(ny);\r\n                }\r\n            }\r\n            this._emit_cds_changes(cds, true, false, emit);\r\n        };\r\n        PolyDrawToolView.prototype._show_vertices = function () {\r\n            var e_1, _a, e_2, _b;\r\n            if (!this.model.active) {\r\n                return;\r\n            }\r\n            var xs = [];\r\n            var ys = [];\r\n            for (var i = 0; i < this.model.renderers.length; i++) {\r\n                var renderer = this.model.renderers[i];\r\n                var cds = renderer.data_source;\r\n                var glyph = renderer.glyph;\r\n                var _c = tslib_1.__read([glyph.xs.field, glyph.ys.field], 2), xkey = _c[0], ykey = _c[1];\r\n                if (xkey) {\r\n                    try {\r\n                        for (var _d = (e_1 = void 0, tslib_1.__values(cds.get_array(xkey))), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                            var array = _e.value;\r\n                            Array.prototype.push.apply(xs, array);\r\n                        }\r\n                    }\r\n                    catch (e_1_1) {\r\n                        e_1 = { error: e_1_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_e && !_e.done && (_a = _d.return))\r\n                                _a.call(_d);\r\n                        }\r\n                        finally {\r\n                            if (e_1)\r\n                                throw e_1.error;\r\n                        }\r\n                    }\r\n                }\r\n                if (ykey) {\r\n                    try {\r\n                        for (var _f = (e_2 = void 0, tslib_1.__values(cds.get_array(ykey))), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                            var array = _g.value;\r\n                            Array.prototype.push.apply(ys, array);\r\n                        }\r\n                    }\r\n                    catch (e_2_1) {\r\n                        e_2 = { error: e_2_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_g && !_g.done && (_b = _f.return))\r\n                                _b.call(_f);\r\n                        }\r\n                        finally {\r\n                            if (e_2)\r\n                                throw e_2.error;\r\n                        }\r\n                    }\r\n                }\r\n                if (this._drawing && (i == (this.model.renderers.length - 1))) {\r\n                    // Skip currently drawn vertex\r\n                    xs.splice(xs.length - 1, 1);\r\n                    ys.splice(ys.length - 1, 1);\r\n                }\r\n            }\r\n            this._set_vertices(xs, ys);\r\n        };\r\n        PolyDrawToolView.prototype._doubletap = function (ev) {\r\n            if (!this.model.active)\r\n                return;\r\n            if (this._drawing) {\r\n                this._drawing = false;\r\n                this._draw(ev, 'edit', true);\r\n            }\r\n            else {\r\n                this._drawing = true;\r\n                this._draw(ev, 'new', true);\r\n            }\r\n        };\r\n        PolyDrawToolView.prototype._move = function (ev) {\r\n            if (this._drawing) {\r\n                this._draw(ev, 'edit');\r\n            }\r\n        };\r\n        PolyDrawToolView.prototype._remove = function () {\r\n            var renderer = this.model.renderers[0];\r\n            var cds = renderer.data_source;\r\n            var glyph = renderer.glyph;\r\n            var _a = tslib_1.__read([glyph.xs.field, glyph.ys.field], 2), xkey = _a[0], ykey = _a[1];\r\n            if (xkey) {\r\n                var xidx = cds.data[xkey].length - 1;\r\n                var xs = cds.get_array(xkey)[xidx];\r\n                xs.splice(xs.length - 1, 1);\r\n            }\r\n            if (ykey) {\r\n                var yidx = cds.data[ykey].length - 1;\r\n                var ys = cds.get_array(ykey)[yidx];\r\n                ys.splice(ys.length - 1, 1);\r\n            }\r\n            this._emit_cds_changes(cds);\r\n        };\r\n        PolyDrawToolView.prototype._keyup = function (ev) {\r\n            var e_3, _a;\r\n            if (!this.model.active || !this._mouse_in_frame)\r\n                return;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var renderer = _c.value;\r\n                    if (ev.keyCode === dom_1.Keys.Backspace) {\r\n                        this._delete_selected(renderer);\r\n                    }\r\n                    else if (ev.keyCode == dom_1.Keys.Esc) {\r\n                        if (this._drawing) {\r\n                            this._remove();\r\n                            this._drawing = false;\r\n                        }\r\n                        renderer.data_source.selection_manager.clear();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n        };\r\n        PolyDrawToolView.prototype._pan_start = function (ev) {\r\n            if (!this.model.drag)\r\n                return;\r\n            this._select_event(ev, \"append\", this.model.renderers);\r\n            this._basepoint = [ev.sx, ev.sy];\r\n        };\r\n        PolyDrawToolView.prototype._pan = function (ev) {\r\n            var e_4, _a, e_5, _b;\r\n            if (this._basepoint == null || !this.model.drag)\r\n                return;\r\n            var _c = tslib_1.__read(this._basepoint, 2), bx = _c[0], by = _c[1];\r\n            try {\r\n                // Process polygon/line dragging\r\n                for (var _d = tslib_1.__values(this.model.renderers), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var renderer = _e.value;\r\n                    var basepoint = this._map_drag(bx, by, renderer);\r\n                    var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n                    if (point == null || basepoint == null)\r\n                        continue;\r\n                    var cds = renderer.data_source;\r\n                    // Type once dataspecs are typed\r\n                    var glyph = renderer.glyph;\r\n                    var _f = tslib_1.__read([glyph.xs.field, glyph.ys.field], 2), xkey = _f[0], ykey = _f[1];\r\n                    if (!xkey && !ykey)\r\n                        continue;\r\n                    var _g = tslib_1.__read(point, 2), x = _g[0], y = _g[1];\r\n                    var _h = tslib_1.__read(basepoint, 2), px = _h[0], py = _h[1];\r\n                    var _j = tslib_1.__read([x - px, y - py], 2), dx = _j[0], dy = _j[1];\r\n                    try {\r\n                        for (var _k = (e_5 = void 0, tslib_1.__values(cds.selected.indices)), _l = _k.next(); !_l.done; _l = _k.next()) {\r\n                            var index = _l.value;\r\n                            var length = void 0, xs = void 0, ys = void 0;\r\n                            if (xkey)\r\n                                xs = cds.data[xkey][index];\r\n                            if (ykey) {\r\n                                ys = cds.data[ykey][index];\r\n                                length = ys.length;\r\n                            }\r\n                            else {\r\n                                length = xs.length;\r\n                            }\r\n                            for (var i = 0; i < length; i++) {\r\n                                if (xs)\r\n                                    xs[i] += dx;\r\n                                if (ys)\r\n                                    ys[i] += dy;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_5_1) {\r\n                        e_5 = { error: e_5_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_l && !_l.done && (_b = _k.return))\r\n                                _b.call(_k);\r\n                        }\r\n                        finally {\r\n                            if (e_5)\r\n                                throw e_5.error;\r\n                        }\r\n                    }\r\n                    cds.change.emit();\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_a = _d.return))\r\n                        _a.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            this._basepoint = [ev.sx, ev.sy];\r\n        };\r\n        PolyDrawToolView.prototype._pan_end = function (ev) {\r\n            var e_6, _a;\r\n            if (!this.model.drag)\r\n                return;\r\n            this._pan(ev);\r\n            try {\r\n                for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var renderer = _c.value;\r\n                    this._emit_cds_changes(renderer.data_source);\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            this._basepoint = null;\r\n        };\r\n        PolyDrawToolView.prototype.activate = function () {\r\n            var e_7, _a;\r\n            var _this = this;\r\n            if (!this.model.vertex_renderer || !this.model.active)\r\n                return;\r\n            this._show_vertices();\r\n            if (!this._initialized) {\r\n                try {\r\n                    for (var _b = tslib_1.__values(this.model.renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                        var renderer = _c.value;\r\n                        var cds = renderer.data_source;\r\n                        cds.connect(cds.properties.data.change, function () { return _this._show_vertices(); });\r\n                    }\r\n                }\r\n                catch (e_7_1) {\r\n                    e_7 = { error: e_7_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_c && !_c.done && (_a = _b.return))\r\n                            _a.call(_b);\r\n                    }\r\n                    finally {\r\n                        if (e_7)\r\n                            throw e_7.error;\r\n                    }\r\n                }\r\n            }\r\n            this._initialized = true;\r\n        };\r\n        PolyDrawToolView.prototype.deactivate = function () {\r\n            if (this._drawing) {\r\n                this._remove();\r\n                this._drawing = false;\r\n            }\r\n            if (this.model.vertex_renderer)\r\n                this._hide_vertices();\r\n        };\r\n        return PolyDrawToolView;\r\n    }(poly_tool_1.PolyToolView));\r\n    exports.PolyDrawToolView = PolyDrawToolView;\r\n    PolyDrawToolView.__name__ = \"PolyDrawToolView\";\r\n    var PolyDrawTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyDrawTool, _super);\r\n        function PolyDrawTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Polygon Draw Tool\";\r\n            _this.icon = icons_1.bk_tool_icon_poly_draw;\r\n            _this.event_type = [\"pan\", \"tap\", \"move\"];\r\n            _this.default_order = 3;\r\n            return _this;\r\n        }\r\n        PolyDrawTool.init_PolyDrawTool = function () {\r\n            this.prototype.default_view = PolyDrawToolView;\r\n            this.define({\r\n                drag: [p.Boolean, true],\r\n                num_objects: [p.Int, 0],\r\n            });\r\n        };\r\n        return PolyDrawTool;\r\n    }(poly_tool_1.PolyTool));\r\n    exports.PolyDrawTool = PolyDrawTool;\r\n    PolyDrawTool.__name__ = \"PolyDrawTool\";\r\n    PolyDrawTool.init_PolyDrawTool();\r\n}\r\n","/* models\\tools\\edit\\poly_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var types_1 = require(123) /* ../../../core/util/types */;\r\n    var edit_tool_1 = require(471) /* ./edit_tool */;\r\n    var PolyToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyToolView, _super);\r\n        function PolyToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PolyToolView.prototype._set_vertices = function (xs, ys) {\r\n            var point_glyph = this.model.vertex_renderer.glyph;\r\n            var point_cds = this.model.vertex_renderer.data_source;\r\n            var _a = tslib_1.__read([point_glyph.x.field, point_glyph.y.field], 2), pxkey = _a[0], pykey = _a[1];\r\n            if (pxkey) {\r\n                if (types_1.isArray(xs))\r\n                    point_cds.data[pxkey] = xs;\r\n                else\r\n                    point_glyph.x = { value: xs };\r\n            }\r\n            if (pykey) {\r\n                if (types_1.isArray(ys))\r\n                    point_cds.data[pykey] = ys;\r\n                else\r\n                    point_glyph.y = { value: ys };\r\n            }\r\n            this._emit_cds_changes(point_cds, true, true, false);\r\n        };\r\n        PolyToolView.prototype._hide_vertices = function () {\r\n            this._set_vertices([], []);\r\n        };\r\n        PolyToolView.prototype._snap_to_vertex = function (ev, x, y) {\r\n            if (this.model.vertex_renderer) {\r\n                // If an existing vertex is hit snap to it\r\n                var vertex_selected = this._select_event(ev, \"replace\", [this.model.vertex_renderer]);\r\n                var point_ds = this.model.vertex_renderer.data_source;\r\n                // Type once dataspecs are typed\r\n                var point_glyph = this.model.vertex_renderer.glyph;\r\n                var _a = tslib_1.__read([point_glyph.x.field, point_glyph.y.field], 2), pxkey = _a[0], pykey = _a[1];\r\n                if (vertex_selected.length) {\r\n                    var index = point_ds.selected.indices[0];\r\n                    if (pxkey)\r\n                        x = point_ds.data[pxkey][index];\r\n                    if (pykey)\r\n                        y = point_ds.data[pykey][index];\r\n                    point_ds.selection_manager.clear();\r\n                }\r\n            }\r\n            return [x, y];\r\n        };\r\n        return PolyToolView;\r\n    }(edit_tool_1.EditToolView));\r\n    exports.PolyToolView = PolyToolView;\r\n    PolyToolView.__name__ = \"PolyToolView\";\r\n    var PolyTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyTool, _super);\r\n        function PolyTool(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        PolyTool.init_PolyTool = function () {\r\n            this.prototype.default_view = PolyToolView;\r\n            this.define({\r\n                vertex_renderer: [p.Instance],\r\n            });\r\n        };\r\n        return PolyTool;\r\n    }(edit_tool_1.EditTool));\r\n    exports.PolyTool = PolyTool;\r\n    PolyTool.__name__ = \"PolyTool\";\r\n    PolyTool.init_PolyTool();\r\n}\r\n","/* models\\tools\\edit\\poly_edit_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var types_1 = require(123) /* ../../../core/util/types */;\r\n    var poly_tool_1 = require(476) /* ./poly_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var PolyEditToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyEditToolView, _super);\r\n        function PolyEditToolView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._drawing = false;\r\n            _this._cur_index = null;\r\n            return _this;\r\n        }\r\n        PolyEditToolView.prototype._doubletap = function (ev) {\r\n            if (!this.model.active)\r\n                return;\r\n            var point = this._map_drag(ev.sx, ev.sy, this.model.vertex_renderer);\r\n            if (point == null)\r\n                return;\r\n            var _a = tslib_1.__read(point, 2), x = _a[0], y = _a[1];\r\n            // Perform hit testing\r\n            var vertex_selected = this._select_event(ev, \"replace\", [this.model.vertex_renderer]);\r\n            var point_cds = this.model.vertex_renderer.data_source;\r\n            // Type once dataspecs are typed\r\n            var point_glyph = this.model.vertex_renderer.glyph;\r\n            var _b = tslib_1.__read([point_glyph.x.field, point_glyph.y.field], 2), pxkey = _b[0], pykey = _b[1];\r\n            if (vertex_selected.length && this._selected_renderer != null) {\r\n                // Insert a new point after the selected vertex and enter draw mode\r\n                var index = point_cds.selected.indices[0];\r\n                if (this._drawing) {\r\n                    this._drawing = false;\r\n                    point_cds.selection_manager.clear();\r\n                }\r\n                else {\r\n                    point_cds.selected.indices = [index + 1];\r\n                    if (pxkey)\r\n                        point_cds.get_array(pxkey).splice(index + 1, 0, x);\r\n                    if (pykey)\r\n                        point_cds.get_array(pykey).splice(index + 1, 0, y);\r\n                    this._drawing = true;\r\n                }\r\n                point_cds.change.emit();\r\n                this._emit_cds_changes(this._selected_renderer.data_source);\r\n            }\r\n            else {\r\n                this._show_vertices(ev);\r\n            }\r\n        };\r\n        PolyEditToolView.prototype._show_vertices = function (ev) {\r\n            var _this = this;\r\n            if (!this.model.active)\r\n                return;\r\n            var vsync_renderer = this.model.renderers[0];\r\n            var vsync_updater = function () { return _this._update_vertices(vsync_renderer); };\r\n            var vsync_ds = vsync_renderer === null || vsync_renderer === void 0 ? void 0 : vsync_renderer.data_source;\r\n            var renderers = this._select_event(ev, \"replace\", this.model.renderers);\r\n            if (!renderers.length) {\r\n                this._set_vertices([], []);\r\n                this._selected_renderer = null;\r\n                this._drawing = false;\r\n                this._cur_index = null;\r\n                if (vsync_ds != null)\r\n                    vsync_ds.disconnect(vsync_ds.properties.data.change, vsync_updater);\r\n                return;\r\n            }\r\n            if (vsync_ds != null)\r\n                vsync_ds.connect(vsync_ds.properties.data.change, vsync_updater);\r\n            this._cur_index = renderers[0].data_source.selected.indices[0];\r\n            this._update_vertices(renderers[0]);\r\n        };\r\n        PolyEditToolView.prototype._update_vertices = function (renderer) {\r\n            var glyph = renderer.glyph;\r\n            var cds = renderer.data_source;\r\n            var index = this._cur_index;\r\n            var _a = tslib_1.__read([glyph.xs.field, glyph.ys.field], 2), xkey = _a[0], ykey = _a[1];\r\n            if (this._drawing)\r\n                return;\r\n            if ((index === null) && (xkey || ykey))\r\n                return;\r\n            var xs;\r\n            var ys;\r\n            if (xkey && index != null) { // redundant xkey null check to satisfy build-time checks\r\n                xs = cds.data[xkey][index];\r\n                if (!types_1.isArray(xs))\r\n                    cds.data[xkey][index] = xs = Array.from(xs);\r\n            }\r\n            else {\r\n                xs = glyph.xs.value;\r\n            }\r\n            if (ykey && index != null) {\r\n                ys = cds.data[ykey][index];\r\n                if (!types_1.isArray(ys))\r\n                    cds.data[ykey][index] = ys = Array.from(ys);\r\n            }\r\n            else {\r\n                ys = glyph.ys.value;\r\n            }\r\n            this._selected_renderer = renderer;\r\n            this._set_vertices(xs, ys);\r\n        };\r\n        PolyEditToolView.prototype._move = function (ev) {\r\n            var _a;\r\n            if (this._drawing && this._selected_renderer != null) {\r\n                var renderer = this.model.vertex_renderer;\r\n                var cds = renderer.data_source;\r\n                var glyph = renderer.glyph;\r\n                var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n                if (point == null)\r\n                    return;\r\n                var _b = tslib_1.__read(point, 2), x = _b[0], y = _b[1];\r\n                var indices = cds.selected.indices;\r\n                _a = tslib_1.__read(this._snap_to_vertex(ev, x, y), 2), x = _a[0], y = _a[1];\r\n                cds.selected.indices = indices;\r\n                var _c = tslib_1.__read([glyph.x.field, glyph.y.field], 2), xkey = _c[0], ykey = _c[1];\r\n                var index = indices[0];\r\n                if (xkey)\r\n                    cds.data[xkey][index] = x;\r\n                if (ykey)\r\n                    cds.data[ykey][index] = y;\r\n                cds.change.emit();\r\n                this._selected_renderer.data_source.change.emit();\r\n            }\r\n        };\r\n        PolyEditToolView.prototype._tap = function (ev) {\r\n            var _a;\r\n            var renderer = this.model.vertex_renderer;\r\n            var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n            if (point == null)\r\n                return;\r\n            else if (this._drawing && this._selected_renderer) {\r\n                var _b = tslib_1.__read(point, 2), x = _b[0], y = _b[1];\r\n                var cds = renderer.data_source;\r\n                // Type once dataspecs are typed\r\n                var glyph = renderer.glyph;\r\n                var _c = tslib_1.__read([glyph.x.field, glyph.y.field], 2), xkey = _c[0], ykey = _c[1];\r\n                var indices = cds.selected.indices;\r\n                _a = tslib_1.__read(this._snap_to_vertex(ev, x, y), 2), x = _a[0], y = _a[1];\r\n                var index = indices[0];\r\n                cds.selected.indices = [index + 1];\r\n                if (xkey) {\r\n                    var xs = cds.get_array(xkey);\r\n                    var nx = xs[index];\r\n                    xs[index] = x;\r\n                    xs.splice(index + 1, 0, nx);\r\n                }\r\n                if (ykey) {\r\n                    var ys = cds.get_array(ykey);\r\n                    var ny = ys[index];\r\n                    ys[index] = y;\r\n                    ys.splice(index + 1, 0, ny);\r\n                }\r\n                cds.change.emit();\r\n                this._emit_cds_changes(this._selected_renderer.data_source, true, false, true);\r\n                return;\r\n            }\r\n            var mode = this._select_mode(ev);\r\n            this._select_event(ev, mode, [renderer]);\r\n            this._select_event(ev, mode, this.model.renderers);\r\n        };\r\n        PolyEditToolView.prototype._remove_vertex = function () {\r\n            if (!this._drawing || !this._selected_renderer)\r\n                return;\r\n            var renderer = this.model.vertex_renderer;\r\n            var cds = renderer.data_source;\r\n            // Type once dataspecs are typed\r\n            var glyph = renderer.glyph;\r\n            var index = cds.selected.indices[0];\r\n            var _a = tslib_1.__read([glyph.x.field, glyph.y.field], 2), xkey = _a[0], ykey = _a[1];\r\n            if (xkey)\r\n                cds.get_array(xkey).splice(index, 1);\r\n            if (ykey)\r\n                cds.get_array(ykey).splice(index, 1);\r\n            cds.change.emit();\r\n            this._emit_cds_changes(this._selected_renderer.data_source);\r\n        };\r\n        PolyEditToolView.prototype._pan_start = function (ev) {\r\n            this._select_event(ev, \"append\", [this.model.vertex_renderer]);\r\n            this._basepoint = [ev.sx, ev.sy];\r\n        };\r\n        PolyEditToolView.prototype._pan = function (ev) {\r\n            if (this._basepoint == null)\r\n                return;\r\n            this._drag_points(ev, [this.model.vertex_renderer]);\r\n            if (this._selected_renderer)\r\n                this._selected_renderer.data_source.change.emit();\r\n        };\r\n        PolyEditToolView.prototype._pan_end = function (ev) {\r\n            if (this._basepoint == null)\r\n                return;\r\n            this._drag_points(ev, [this.model.vertex_renderer]);\r\n            this._emit_cds_changes(this.model.vertex_renderer.data_source, false, true, true);\r\n            if (this._selected_renderer) {\r\n                this._emit_cds_changes(this._selected_renderer.data_source);\r\n            }\r\n            this._basepoint = null;\r\n        };\r\n        PolyEditToolView.prototype._keyup = function (ev) {\r\n            var e_1, _a;\r\n            if (!this.model.active || !this._mouse_in_frame)\r\n                return;\r\n            var renderers;\r\n            if (this._selected_renderer) {\r\n                renderers = [this.model.vertex_renderer];\r\n            }\r\n            else {\r\n                renderers = this.model.renderers;\r\n            }\r\n            try {\r\n                for (var renderers_1 = tslib_1.__values(renderers), renderers_1_1 = renderers_1.next(); !renderers_1_1.done; renderers_1_1 = renderers_1.next()) {\r\n                    var renderer = renderers_1_1.value;\r\n                    if (ev.keyCode === dom_1.Keys.Backspace) {\r\n                        this._delete_selected(renderer);\r\n                        if (this._selected_renderer) {\r\n                            this._emit_cds_changes(this._selected_renderer.data_source);\r\n                        }\r\n                    }\r\n                    else if (ev.keyCode == dom_1.Keys.Esc) {\r\n                        if (this._drawing) {\r\n                            this._remove_vertex();\r\n                            this._drawing = false;\r\n                        }\r\n                        else if (this._selected_renderer) {\r\n                            this._hide_vertices();\r\n                        }\r\n                        renderer.data_source.selection_manager.clear();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderers_1_1 && !renderers_1_1.done && (_a = renderers_1.return))\r\n                        _a.call(renderers_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        PolyEditToolView.prototype.deactivate = function () {\r\n            if (!this._selected_renderer) {\r\n                return;\r\n            }\r\n            else if (this._drawing) {\r\n                this._remove_vertex();\r\n                this._drawing = false;\r\n            }\r\n            this._hide_vertices();\r\n        };\r\n        return PolyEditToolView;\r\n    }(poly_tool_1.PolyToolView));\r\n    exports.PolyEditToolView = PolyEditToolView;\r\n    PolyEditToolView.__name__ = \"PolyEditToolView\";\r\n    var PolyEditTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolyEditTool, _super);\r\n        function PolyEditTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Poly Edit Tool\";\r\n            _this.icon = icons_1.bk_tool_icon_poly_edit;\r\n            _this.event_type = [\"tap\", \"pan\", \"move\"];\r\n            _this.default_order = 4;\r\n            return _this;\r\n        }\r\n        PolyEditTool.init_PolyEditTool = function () {\r\n            this.prototype.default_view = PolyEditToolView;\r\n        };\r\n        return PolyEditTool;\r\n    }(poly_tool_1.PolyTool));\r\n    exports.PolyEditTool = PolyEditTool;\r\n    PolyEditTool.__name__ = \"PolyEditTool\";\r\n    PolyEditTool.init_PolyEditTool();\r\n}\r\n","/* models\\tools\\gestures\\box_select_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var select_tool_1 = require(479) /* ./select_tool */;\r\n    var box_annotation_1 = require(239) /* ../../annotations/box_annotation */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var BoxSelectToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxSelectToolView, _super);\r\n        function BoxSelectToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BoxSelectToolView.prototype._compute_limits = function (curpoint) {\r\n            var frame = this.plot_view.frame;\r\n            var dims = this.model.dimensions;\r\n            var base_point = this._base_point;\r\n            if (this.model.origin == \"center\") {\r\n                var _a = tslib_1.__read(base_point, 2), cx = _a[0], cy = _a[1];\r\n                var _b = tslib_1.__read(curpoint, 2), dx = _b[0], dy = _b[1];\r\n                base_point = [cx - (dx - cx), cy - (dy - cy)];\r\n            }\r\n            return this.model._get_dim_limits(base_point, curpoint, frame, dims);\r\n        };\r\n        BoxSelectToolView.prototype._pan_start = function (ev) {\r\n            var sx = ev.sx, sy = ev.sy;\r\n            this._base_point = [sx, sy];\r\n        };\r\n        BoxSelectToolView.prototype._pan = function (ev) {\r\n            var sx = ev.sx, sy = ev.sy;\r\n            var curpoint = [sx, sy];\r\n            var _a = tslib_1.__read(this._compute_limits(curpoint), 2), sxlim = _a[0], sylim = _a[1];\r\n            this.model.overlay.update({ left: sxlim[0], right: sxlim[1], top: sylim[0], bottom: sylim[1] });\r\n            if (this.model.select_every_mousemove) {\r\n                this._do_select(sxlim, sylim, false, this._select_mode(ev));\r\n            }\r\n        };\r\n        BoxSelectToolView.prototype._pan_end = function (ev) {\r\n            var sx = ev.sx, sy = ev.sy;\r\n            var curpoint = [sx, sy];\r\n            var _a = tslib_1.__read(this._compute_limits(curpoint), 2), sxlim = _a[0], sylim = _a[1];\r\n            this._do_select(sxlim, sylim, true, this._select_mode(ev));\r\n            this.model.overlay.update({ left: null, right: null, top: null, bottom: null });\r\n            this._base_point = null;\r\n            this.plot_view.push_state('box_select', { selection: this.plot_view.get_selection() });\r\n        };\r\n        BoxSelectToolView.prototype._do_select = function (_a, _b, final, mode) {\r\n            var _c = tslib_1.__read(_a, 2), sx0 = _c[0], sx1 = _c[1];\r\n            var _d = tslib_1.__read(_b, 2), sy0 = _d[0], sy1 = _d[1];\r\n            if (mode === void 0) {\r\n                mode = \"replace\";\r\n            }\r\n            var geometry = { type: 'rect', sx0: sx0, sx1: sx1, sy0: sy0, sy1: sy1 };\r\n            this._select(geometry, final, mode);\r\n        };\r\n        return BoxSelectToolView;\r\n    }(select_tool_1.SelectToolView));\r\n    exports.BoxSelectToolView = BoxSelectToolView;\r\n    BoxSelectToolView.__name__ = \"BoxSelectToolView\";\r\n    var DEFAULT_BOX_OVERLAY = function () {\r\n        return new box_annotation_1.BoxAnnotation({\r\n            level: \"overlay\",\r\n            top_units: \"screen\",\r\n            left_units: \"screen\",\r\n            bottom_units: \"screen\",\r\n            right_units: \"screen\",\r\n            fill_color: \"lightgrey\",\r\n            fill_alpha: 0.5,\r\n            line_color: \"black\",\r\n            line_alpha: 1.0,\r\n            line_width: 2,\r\n            line_dash: [4, 4],\r\n        });\r\n    };\r\n    var BoxSelectTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxSelectTool, _super);\r\n        function BoxSelectTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Box Select\";\r\n            _this.icon = icons_1.bk_tool_icon_box_select;\r\n            _this.event_type = \"pan\";\r\n            _this.default_order = 30;\r\n            return _this;\r\n        }\r\n        BoxSelectTool.init_BoxSelectTool = function () {\r\n            this.prototype.default_view = BoxSelectToolView;\r\n            this.define({\r\n                dimensions: [p.Dimensions, \"both\"],\r\n                select_every_mousemove: [p.Boolean, false],\r\n                overlay: [p.Instance, DEFAULT_BOX_OVERLAY],\r\n                origin: [p.BoxOrigin, \"corner\"],\r\n            });\r\n            this.register_alias(\"box_select\", function () { return new BoxSelectTool(); });\r\n            this.register_alias(\"xbox_select\", function () { return new BoxSelectTool({ dimensions: 'width' }); });\r\n            this.register_alias(\"ybox_select\", function () { return new BoxSelectTool({ dimensions: 'height' }); });\r\n        };\r\n        Object.defineProperty(BoxSelectTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(this.tool_name, this.dimensions);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return BoxSelectTool;\r\n    }(select_tool_1.SelectTool));\r\n    exports.BoxSelectTool = BoxSelectTool;\r\n    BoxSelectTool.__name__ = \"BoxSelectTool\";\r\n    BoxSelectTool.init_BoxSelectTool();\r\n}\r\n","/* models\\tools\\gestures\\select_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var gesture_tool_1 = require(421) /* ./gesture_tool */;\r\n    var glyph_renderer_1 = require(205) /* ../../renderers/glyph_renderer */;\r\n    var graph_renderer_1 = require(231) /* ../../renderers/graph_renderer */;\r\n    var util_1 = require(480) /* ../util */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var bokeh_events_1 = require(428) /* ../../../core/bokeh_events */;\r\n    var signaling_1 = require(130) /* ../../../core/signaling */;\r\n    var assert_1 = require(126) /* ../../../core/util/assert */;\r\n    var SelectToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SelectToolView, _super);\r\n        function SelectToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SelectToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.model.clear.connect(function () { return _this._clear(); });\r\n        };\r\n        Object.defineProperty(SelectToolView.prototype, \"computed_renderers\", {\r\n            get: function () {\r\n                var renderers = this.model.renderers;\r\n                var all_renderers = this.plot_model.renderers;\r\n                var names = this.model.names;\r\n                return util_1.compute_renderers(renderers, all_renderers, names);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        SelectToolView.prototype._computed_renderers_by_data_source = function () {\r\n            var e_1, _b;\r\n            var _a;\r\n            var renderers_by_source = new Map();\r\n            try {\r\n                for (var _c = tslib_1.__values(this.computed_renderers), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var r = _d.value;\r\n                    var source = void 0;\r\n                    if (r instanceof glyph_renderer_1.GlyphRenderer)\r\n                        source = r.data_source;\r\n                    else if (r instanceof graph_renderer_1.GraphRenderer)\r\n                        source = r.node_renderer.data_source;\r\n                    else\r\n                        continue;\r\n                    var renderers = (_a = renderers_by_source.get(source)) !== null && _a !== void 0 ? _a : [];\r\n                    renderers_by_source.set(source, tslib_1.__spread(renderers, [r]));\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            return renderers_by_source;\r\n        };\r\n        SelectToolView.prototype._select_mode = function (ev) {\r\n            var shiftKey = ev.shiftKey, ctrlKey = ev.ctrlKey;\r\n            if (!shiftKey && !ctrlKey)\r\n                return this.model.mode;\r\n            else if (shiftKey && !ctrlKey)\r\n                return \"append\";\r\n            else if (!shiftKey && ctrlKey)\r\n                return \"intersect\";\r\n            else if (shiftKey && ctrlKey)\r\n                return \"subtract\";\r\n            else\r\n                assert_1.unreachable();\r\n        };\r\n        SelectToolView.prototype._keyup = function (ev) {\r\n            if (ev.keyCode == dom_1.Keys.Esc) {\r\n                this._clear();\r\n            }\r\n        };\r\n        SelectToolView.prototype._clear = function () {\r\n            var e_2, _b;\r\n            try {\r\n                for (var _c = tslib_1.__values(this.computed_renderers), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var renderer = _d.value;\r\n                    renderer.get_selection_manager().clear();\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_b = _c.return))\r\n                        _b.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            this.plot_view.request_render();\r\n        };\r\n        SelectToolView.prototype._select = function (geometry, final, mode) {\r\n            var e_3, _b, e_4, _c;\r\n            var renderers_by_source = this._computed_renderers_by_data_source();\r\n            try {\r\n                for (var renderers_by_source_1 = tslib_1.__values(renderers_by_source), renderers_by_source_1_1 = renderers_by_source_1.next(); !renderers_by_source_1_1.done; renderers_by_source_1_1 = renderers_by_source_1.next()) {\r\n                    var _d = tslib_1.__read(renderers_by_source_1_1.value, 2), renderers = _d[1];\r\n                    var sm = renderers[0].get_selection_manager();\r\n                    var r_views = [];\r\n                    try {\r\n                        for (var renderers_1 = (e_4 = void 0, tslib_1.__values(renderers)), renderers_1_1 = renderers_1.next(); !renderers_1_1.done; renderers_1_1 = renderers_1.next()) {\r\n                            var r = renderers_1_1.value;\r\n                            var r_view = this.plot_view.renderer_views.get(r);\r\n                            if (r_view != null) {\r\n                                r_views.push(r_view);\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_4_1) {\r\n                        e_4 = { error: e_4_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (renderers_1_1 && !renderers_1_1.done && (_c = renderers_1.return))\r\n                                _c.call(renderers_1);\r\n                        }\r\n                        finally {\r\n                            if (e_4)\r\n                                throw e_4.error;\r\n                        }\r\n                    }\r\n                    sm.select(r_views, geometry, final, mode);\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderers_by_source_1_1 && !renderers_by_source_1_1.done && (_b = renderers_by_source_1.return))\r\n                        _b.call(renderers_by_source_1);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n            // XXX: messed up class structure\r\n            if (this.model.callback != null)\r\n                this._emit_callback(geometry);\r\n            this._emit_selection_event(geometry, final);\r\n        };\r\n        SelectToolView.prototype._emit_selection_event = function (geometry, final) {\r\n            if (final === void 0) {\r\n                final = true;\r\n            }\r\n            var _b = this.plot_view.frame, x_scale = _b.x_scale, y_scale = _b.y_scale;\r\n            var geometry_data;\r\n            switch (geometry.type) {\r\n                case \"point\": {\r\n                    var sx = geometry.sx, sy = geometry.sy;\r\n                    var x = x_scale.invert(sx);\r\n                    var y = y_scale.invert(sy);\r\n                    geometry_data = Object.assign(Object.assign({}, geometry), { x: x, y: y });\r\n                    break;\r\n                }\r\n                case \"span\": {\r\n                    var sx = geometry.sx, sy = geometry.sy;\r\n                    var x = x_scale.invert(sx);\r\n                    var y = y_scale.invert(sy);\r\n                    geometry_data = Object.assign(Object.assign({}, geometry), { x: x, y: y });\r\n                    break;\r\n                }\r\n                case \"rect\": {\r\n                    var sx0 = geometry.sx0, sx1 = geometry.sx1, sy0 = geometry.sy0, sy1 = geometry.sy1;\r\n                    var _c = tslib_1.__read(x_scale.r_invert(sx0, sx1), 2), x0 = _c[0], x1 = _c[1];\r\n                    var _d = tslib_1.__read(y_scale.r_invert(sy0, sy1), 2), y0 = _d[0], y1 = _d[1];\r\n                    geometry_data = Object.assign(Object.assign({}, geometry), { x0: x0, y0: y0, x1: x1, y1: y1 });\r\n                    break;\r\n                }\r\n                case \"poly\": {\r\n                    var sx = geometry.sx, sy = geometry.sy;\r\n                    var x = x_scale.v_invert(sx);\r\n                    var y = y_scale.v_invert(sy);\r\n                    geometry_data = Object.assign(Object.assign({}, geometry), { x: x, y: y });\r\n                    break;\r\n                }\r\n            }\r\n            this.plot_model.trigger_event(new bokeh_events_1.SelectionGeometry(geometry_data, final));\r\n        };\r\n        return SelectToolView;\r\n    }(gesture_tool_1.GestureToolView));\r\n    exports.SelectToolView = SelectToolView;\r\n    SelectToolView.__name__ = \"SelectToolView\";\r\n    var SelectTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(SelectTool, _super);\r\n        function SelectTool(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        SelectTool.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.clear = new signaling_1.Signal0(this, \"clear\");\r\n        };\r\n        SelectTool.init_SelectTool = function () {\r\n            this.define({\r\n                renderers: [p.Any, 'auto'],\r\n                names: [p.Array, []],\r\n                mode: [p.Any, \"replace\"],\r\n            });\r\n        };\r\n        Object.defineProperty(SelectTool.prototype, \"menu\", {\r\n            get: function () {\r\n                var _this = this;\r\n                return [\r\n                    {\r\n                        icon: \"bk-tool-icon-replace-mode\",\r\n                        tooltip: \"Replace the current selection\",\r\n                        active: function () { return _this.mode == \"replace\"; },\r\n                        handler: function () {\r\n                            _this.mode = \"replace\";\r\n                            _this.active = true;\r\n                        },\r\n                    }, {\r\n                        icon: \"bk-tool-icon-append-mode\",\r\n                        tooltip: \"Append to the current selection (Shift)\",\r\n                        active: function () { return _this.mode == \"append\"; },\r\n                        handler: function () {\r\n                            _this.mode = \"append\";\r\n                            _this.active = true;\r\n                        },\r\n                    }, {\r\n                        icon: \"bk-tool-icon-intersect-mode\",\r\n                        tooltip: \"Intersect with the current selection (Ctrl)\",\r\n                        active: function () { return _this.mode == \"intersect\"; },\r\n                        handler: function () {\r\n                            _this.mode = \"intersect\";\r\n                            _this.active = true;\r\n                        },\r\n                    }, {\r\n                        icon: \"bk-tool-icon-subtract-mode\",\r\n                        tooltip: \"Subtract from the current selection (Shift+Ctrl)\",\r\n                        active: function () { return _this.mode == \"subtract\"; },\r\n                        handler: function () {\r\n                            _this.mode = \"subtract\";\r\n                            _this.active = true;\r\n                        },\r\n                    },\r\n                    null,\r\n                    {\r\n                        icon: \"bk-tool-icon-clear-selection\",\r\n                        tooltip: \"Clear the current selection (Esc)\",\r\n                        handler: function () {\r\n                            _this.clear.emit();\r\n                        },\r\n                    },\r\n                ];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return SelectTool;\r\n    }(gesture_tool_1.GestureTool));\r\n    exports.SelectTool = SelectTool;\r\n    SelectTool.__name__ = \"SelectTool\";\r\n    SelectTool.init_SelectTool();\r\n}\r\n","/* models\\tools\\util.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    function compute_renderers(renderers, all_renderers, names) {\r\n        if (renderers == null)\r\n            return [];\r\n        var result = renderers == 'auto' ? all_renderers : renderers;\r\n        if (names.length > 0)\r\n            result = result.filter(function (r) { return array_1.includes(names, r.name); });\r\n        return result;\r\n    }\r\n    exports.compute_renderers = compute_renderers;\r\n}\r\n","/* models\\tools\\gestures\\box_zoom_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var gesture_tool_1 = require(421) /* ./gesture_tool */;\r\n    var box_annotation_1 = require(239) /* ../../annotations/box_annotation */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var BoxZoomToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxZoomToolView, _super);\r\n        function BoxZoomToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BoxZoomToolView.prototype._match_aspect = function (base_point, curpoint, frame) {\r\n            // aspect ratio of plot frame\r\n            var a = frame.bbox.aspect;\r\n            var hend = frame.bbox.h_range.end;\r\n            var hstart = frame.bbox.h_range.start;\r\n            var vend = frame.bbox.v_range.end;\r\n            var vstart = frame.bbox.v_range.start;\r\n            // current aspect of cursor-defined box\r\n            var vw = Math.abs(base_point[0] - curpoint[0]);\r\n            var vh = Math.abs(base_point[1] - curpoint[1]);\r\n            var va = vh == 0 ? 0 : vw / vh;\r\n            var _a = tslib_1.__read(va >= a ? [1, va / a] : [a / va, 1], 1), xmod = _a[0];\r\n            // OK the code blocks below merit some explanation. They do:\r\n            //\r\n            // compute left/right, pin to frame if necessary\r\n            // compute top/bottom (based on new left/right), pin to frame if necessary\r\n            // recompute left/right (based on top/bottom), in case top/bottom were pinned\r\n            // base_point[0] is left\r\n            var left;\r\n            var right;\r\n            if (base_point[0] <= curpoint[0]) {\r\n                left = base_point[0];\r\n                right = base_point[0] + vw * xmod;\r\n                if (right > hend)\r\n                    right = hend;\r\n                // base_point[0] is right\r\n            }\r\n            else {\r\n                right = base_point[0];\r\n                left = base_point[0] - vw * xmod;\r\n                if (left < hstart)\r\n                    left = hstart;\r\n            }\r\n            vw = Math.abs(right - left);\r\n            // base_point[1] is bottom\r\n            var top;\r\n            var bottom;\r\n            if (base_point[1] <= curpoint[1]) {\r\n                bottom = base_point[1];\r\n                top = base_point[1] + vw / a;\r\n                if (top > vend)\r\n                    top = vend;\r\n                // base_point[1] is top\r\n            }\r\n            else {\r\n                top = base_point[1];\r\n                bottom = base_point[1] - vw / a;\r\n                if (bottom < vstart)\r\n                    bottom = vstart;\r\n            }\r\n            vh = Math.abs(top - bottom);\r\n            // base_point[0] is left\r\n            if (base_point[0] <= curpoint[0])\r\n                right = base_point[0] + a * vh;\r\n            // base_point[0] is right\r\n            else\r\n                left = base_point[0] - a * vh;\r\n            return [[left, right], [bottom, top]];\r\n        };\r\n        BoxZoomToolView.prototype._compute_limits = function (curpoint) {\r\n            var _a, _b;\r\n            var frame = this.plot_view.frame;\r\n            var dims = this.model.dimensions;\r\n            var base_point = this._base_point;\r\n            if (this.model.origin == \"center\") {\r\n                var _c = tslib_1.__read(base_point, 2), cx = _c[0], cy = _c[1];\r\n                var _d = tslib_1.__read(curpoint, 2), dx = _d[0], dy = _d[1];\r\n                base_point = [cx - (dx - cx), cy - (dy - cy)];\r\n            }\r\n            var sx;\r\n            var sy;\r\n            if (this.model.match_aspect && dims == 'both')\r\n                _a = tslib_1.__read(this._match_aspect(base_point, curpoint, frame), 2), sx = _a[0], sy = _a[1];\r\n            else\r\n                _b = tslib_1.__read(this.model._get_dim_limits(base_point, curpoint, frame, dims), 2), sx = _b[0], sy = _b[1];\r\n            return [sx, sy];\r\n        };\r\n        BoxZoomToolView.prototype._pan_start = function (ev) {\r\n            this._base_point = [ev.sx, ev.sy];\r\n        };\r\n        BoxZoomToolView.prototype._pan = function (ev) {\r\n            var curpoint = [ev.sx, ev.sy];\r\n            var _a = tslib_1.__read(this._compute_limits(curpoint), 2), sx = _a[0], sy = _a[1];\r\n            this.model.overlay.update({ left: sx[0], right: sx[1], top: sy[0], bottom: sy[1] });\r\n        };\r\n        BoxZoomToolView.prototype._pan_end = function (ev) {\r\n            var curpoint = [ev.sx, ev.sy];\r\n            var _a = tslib_1.__read(this._compute_limits(curpoint), 2), sx = _a[0], sy = _a[1];\r\n            this._update(sx, sy);\r\n            this.model.overlay.update({ left: null, right: null, top: null, bottom: null });\r\n            this._base_point = null;\r\n        };\r\n        BoxZoomToolView.prototype._update = function (_a, _b) {\r\n            var e_1, _c, e_2, _d;\r\n            var _e = tslib_1.__read(_a, 2), sx0 = _e[0], sx1 = _e[1];\r\n            var _f = tslib_1.__read(_b, 2), sy0 = _f[0], sy1 = _f[1];\r\n            // If the viewing window is too small, no-op: it is likely that the user did\r\n            // not intend to make this box zoom and instead was trying to cancel out of the\r\n            // zoom, a la matplotlib's ToolZoom. Like matplotlib, set the threshold at 5 pixels.\r\n            if (Math.abs(sx1 - sx0) <= 5 || Math.abs(sy1 - sy0) <= 5)\r\n                return;\r\n            var _g = this.plot_view.frame, x_scales = _g.x_scales, y_scales = _g.y_scales;\r\n            var xrs = new Map();\r\n            try {\r\n                for (var x_scales_1 = tslib_1.__values(x_scales), x_scales_1_1 = x_scales_1.next(); !x_scales_1_1.done; x_scales_1_1 = x_scales_1.next()) {\r\n                    var _h = tslib_1.__read(x_scales_1_1.value, 2), name = _h[0], scale = _h[1];\r\n                    var _j = tslib_1.__read(scale.r_invert(sx0, sx1), 2), start = _j[0], end = _j[1];\r\n                    xrs.set(name, { start: start, end: end });\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (x_scales_1_1 && !x_scales_1_1.done && (_c = x_scales_1.return))\r\n                        _c.call(x_scales_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            var yrs = new Map();\r\n            try {\r\n                for (var y_scales_1 = tslib_1.__values(y_scales), y_scales_1_1 = y_scales_1.next(); !y_scales_1_1.done; y_scales_1_1 = y_scales_1.next()) {\r\n                    var _k = tslib_1.__read(y_scales_1_1.value, 2), name = _k[0], scale = _k[1];\r\n                    var _l = tslib_1.__read(scale.r_invert(sy0, sy1), 2), start = _l[0], end = _l[1];\r\n                    yrs.set(name, { start: start, end: end });\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (y_scales_1_1 && !y_scales_1_1.done && (_d = y_scales_1.return))\r\n                        _d.call(y_scales_1);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            var zoom_info = { xrs: xrs, yrs: yrs };\r\n            this.plot_view.push_state('box_zoom', { range: zoom_info });\r\n            this.plot_view.update_range(zoom_info);\r\n        };\r\n        return BoxZoomToolView;\r\n    }(gesture_tool_1.GestureToolView));\r\n    exports.BoxZoomToolView = BoxZoomToolView;\r\n    BoxZoomToolView.__name__ = \"BoxZoomToolView\";\r\n    var DEFAULT_BOX_OVERLAY = function () {\r\n        return new box_annotation_1.BoxAnnotation({\r\n            level: \"overlay\",\r\n            top_units: \"screen\",\r\n            left_units: \"screen\",\r\n            bottom_units: \"screen\",\r\n            right_units: \"screen\",\r\n            fill_color: \"lightgrey\",\r\n            fill_alpha: 0.5,\r\n            line_color: \"black\",\r\n            line_alpha: 1.0,\r\n            line_width: 2,\r\n            line_dash: [4, 4],\r\n        });\r\n    };\r\n    var BoxZoomTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(BoxZoomTool, _super);\r\n        function BoxZoomTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Box Zoom\";\r\n            _this.icon = icons_1.bk_tool_icon_box_zoom;\r\n            _this.event_type = \"pan\";\r\n            _this.default_order = 20;\r\n            return _this;\r\n        }\r\n        BoxZoomTool.init_BoxZoomTool = function () {\r\n            this.prototype.default_view = BoxZoomToolView;\r\n            this.define({\r\n                dimensions: [p.Dimensions, \"both\"],\r\n                overlay: [p.Instance, DEFAULT_BOX_OVERLAY],\r\n                match_aspect: [p.Boolean, false],\r\n                origin: [p.BoxOrigin, \"corner\"],\r\n            });\r\n            this.register_alias(\"box_zoom\", function () { return new BoxZoomTool({ dimensions: 'both' }); });\r\n            this.register_alias(\"xbox_zoom\", function () { return new BoxZoomTool({ dimensions: 'width' }); });\r\n            this.register_alias(\"ybox_zoom\", function () { return new BoxZoomTool({ dimensions: 'height' }); });\r\n        };\r\n        Object.defineProperty(BoxZoomTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(this.tool_name, this.dimensions);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return BoxZoomTool;\r\n    }(gesture_tool_1.GestureTool));\r\n    exports.BoxZoomTool = BoxZoomTool;\r\n    BoxZoomTool.__name__ = \"BoxZoomTool\";\r\n    BoxZoomTool.init_BoxZoomTool();\r\n}\r\n","/* models\\tools\\gestures\\lasso_select_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var select_tool_1 = require(479) /* ./select_tool */;\r\n    var poly_select_tool_1 = require(483) /* ./poly_select_tool */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var LassoSelectToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LassoSelectToolView, _super);\r\n        function LassoSelectToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LassoSelectToolView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.data = null;\r\n        };\r\n        LassoSelectToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.active.change, function () { return _this._active_change(); });\r\n        };\r\n        LassoSelectToolView.prototype._active_change = function () {\r\n            if (!this.model.active)\r\n                this._clear_overlay();\r\n        };\r\n        LassoSelectToolView.prototype._keyup = function (ev) {\r\n            if (ev.keyCode == dom_1.Keys.Enter)\r\n                this._clear_overlay();\r\n        };\r\n        LassoSelectToolView.prototype._pan_start = function (ev) {\r\n            var sx = ev.sx, sy = ev.sy;\r\n            this.data = { sx: [sx], sy: [sy] };\r\n        };\r\n        LassoSelectToolView.prototype._pan = function (ev) {\r\n            var _sx = ev.sx, _sy = ev.sy;\r\n            var _a = tslib_1.__read(this.plot_view.frame.bbox.clip(_sx, _sy), 2), sx = _a[0], sy = _a[1];\r\n            this.data.sx.push(sx);\r\n            this.data.sy.push(sy);\r\n            var overlay = this.model.overlay;\r\n            overlay.update({ xs: this.data.sx, ys: this.data.sy });\r\n            if (this.model.select_every_mousemove) {\r\n                this._do_select(this.data.sx, this.data.sy, false, this._select_mode(ev));\r\n            }\r\n        };\r\n        LassoSelectToolView.prototype._pan_end = function (ev) {\r\n            this._clear_overlay();\r\n            this._do_select(this.data.sx, this.data.sy, true, this._select_mode(ev));\r\n            this.plot_view.push_state('lasso_select', { selection: this.plot_view.get_selection() });\r\n        };\r\n        LassoSelectToolView.prototype._clear_overlay = function () {\r\n            this.model.overlay.update({ xs: [], ys: [] });\r\n        };\r\n        LassoSelectToolView.prototype._do_select = function (sx, sy, final, mode) {\r\n            var geometry = { type: 'poly', sx: sx, sy: sy };\r\n            this._select(geometry, final, mode);\r\n        };\r\n        return LassoSelectToolView;\r\n    }(select_tool_1.SelectToolView));\r\n    exports.LassoSelectToolView = LassoSelectToolView;\r\n    LassoSelectToolView.__name__ = \"LassoSelectToolView\";\r\n    var LassoSelectTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LassoSelectTool, _super);\r\n        function LassoSelectTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Lasso Select\";\r\n            _this.icon = icons_1.bk_tool_icon_lasso_select;\r\n            _this.event_type = \"pan\";\r\n            _this.default_order = 12;\r\n            return _this;\r\n        }\r\n        LassoSelectTool.init_LassoSelectTool = function () {\r\n            this.prototype.default_view = LassoSelectToolView;\r\n            this.define({\r\n                select_every_mousemove: [p.Boolean, true],\r\n                overlay: [p.Instance, poly_select_tool_1.DEFAULT_POLY_OVERLAY],\r\n            });\r\n            this.register_alias(\"lasso_select\", function () { return new LassoSelectTool(); });\r\n        };\r\n        return LassoSelectTool;\r\n    }(select_tool_1.SelectTool));\r\n    exports.LassoSelectTool = LassoSelectTool;\r\n    LassoSelectTool.__name__ = \"LassoSelectTool\";\r\n    LassoSelectTool.init_LassoSelectTool();\r\n}\r\n","/* models\\tools\\gestures\\poly_select_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var select_tool_1 = require(479) /* ./select_tool */;\r\n    var poly_annotation_1 = require(281) /* ../../annotations/poly_annotation */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var array_1 = require(124) /* ../../../core/util/array */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var PolySelectToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolySelectToolView, _super);\r\n        function PolySelectToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PolySelectToolView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.data = { sx: [], sy: [] };\r\n        };\r\n        PolySelectToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.model.properties.active.change, function () { return _this._active_change(); });\r\n        };\r\n        PolySelectToolView.prototype._active_change = function () {\r\n            if (!this.model.active)\r\n                this._clear_data();\r\n        };\r\n        PolySelectToolView.prototype._keyup = function (ev) {\r\n            if (ev.keyCode == dom_1.Keys.Enter)\r\n                this._clear_data();\r\n        };\r\n        PolySelectToolView.prototype._doubletap = function (ev) {\r\n            this._do_select(this.data.sx, this.data.sy, true, this._select_mode(ev));\r\n            this.plot_view.push_state('poly_select', { selection: this.plot_view.get_selection() });\r\n            this._clear_data();\r\n        };\r\n        PolySelectToolView.prototype._clear_data = function () {\r\n            this.data = { sx: [], sy: [] };\r\n            this.model.overlay.update({ xs: [], ys: [] });\r\n        };\r\n        PolySelectToolView.prototype._tap = function (ev) {\r\n            var sx = ev.sx, sy = ev.sy;\r\n            var frame = this.plot_view.frame;\r\n            if (!frame.bbox.contains(sx, sy))\r\n                return;\r\n            this.data.sx.push(sx);\r\n            this.data.sy.push(sy);\r\n            this.model.overlay.update({ xs: array_1.copy(this.data.sx), ys: array_1.copy(this.data.sy) });\r\n        };\r\n        PolySelectToolView.prototype._do_select = function (sx, sy, final, mode) {\r\n            var geometry = { type: 'poly', sx: sx, sy: sy };\r\n            this._select(geometry, final, mode);\r\n        };\r\n        return PolySelectToolView;\r\n    }(select_tool_1.SelectToolView));\r\n    exports.PolySelectToolView = PolySelectToolView;\r\n    PolySelectToolView.__name__ = \"PolySelectToolView\";\r\n    exports.DEFAULT_POLY_OVERLAY = function () {\r\n        return new poly_annotation_1.PolyAnnotation({\r\n            level: \"overlay\",\r\n            xs_units: \"screen\",\r\n            ys_units: \"screen\",\r\n            fill_color: \"lightgrey\",\r\n            fill_alpha: 0.5,\r\n            line_color: \"black\",\r\n            line_alpha: 1.0,\r\n            line_width: 2,\r\n            line_dash: [4, 4],\r\n        });\r\n    };\r\n    var PolySelectTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PolySelectTool, _super);\r\n        function PolySelectTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Poly Select\";\r\n            _this.icon = icons_1.bk_tool_icon_polygon_select;\r\n            _this.event_type = \"tap\";\r\n            _this.default_order = 11;\r\n            return _this;\r\n        }\r\n        PolySelectTool.init_PolySelectTool = function () {\r\n            this.prototype.default_view = PolySelectToolView;\r\n            this.define({\r\n                overlay: [p.Instance, exports.DEFAULT_POLY_OVERLAY],\r\n            });\r\n            this.register_alias(\"poly_select\", function () { return new PolySelectTool(); });\r\n        };\r\n        return PolySelectTool;\r\n    }(select_tool_1.SelectTool));\r\n    exports.PolySelectTool = PolySelectTool;\r\n    PolySelectTool.__name__ = \"PolySelectTool\";\r\n    PolySelectTool.init_PolySelectTool();\r\n}\r\n","/* models\\tools\\edit\\line_edit_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var line_tool_1 = require(485) /* ./line_tool */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var LineEditToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineEditToolView, _super);\r\n        function LineEditToolView() {\r\n            var _this = _super.apply(this, tslib_1.__spread(arguments)) || this;\r\n            _this._drawing = false;\r\n            return _this;\r\n        }\r\n        LineEditToolView.prototype._doubletap = function (ev) {\r\n            var e_1, _a;\r\n            if (!this.model.active)\r\n                return;\r\n            var renderers = this.model.renderers;\r\n            try {\r\n                for (var renderers_1 = tslib_1.__values(renderers), renderers_1_1 = renderers_1.next(); !renderers_1_1.done; renderers_1_1 = renderers_1.next()) {\r\n                    var renderer = renderers_1_1.value;\r\n                    var line_selected = this._select_event(ev, \"replace\", [renderer]);\r\n                    if (line_selected.length == 1) {\r\n                        this._selected_renderer = renderer;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (renderers_1_1 && !renderers_1_1.done && (_a = renderers_1.return))\r\n                        _a.call(renderers_1);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            this._show_intersections();\r\n            this._update_line_cds();\r\n        };\r\n        LineEditToolView.prototype._show_intersections = function () {\r\n            if (!this.model.active)\r\n                return;\r\n            if (this._selected_renderer == null)\r\n                return;\r\n            var renderers = this.model.renderers;\r\n            if (!renderers.length) {\r\n                this._set_intersection([], []);\r\n                this._selected_renderer = null;\r\n                this._drawing = false;\r\n                return;\r\n            }\r\n            var cds = this._selected_renderer.data_source;\r\n            var glyph = this._selected_renderer.glyph;\r\n            var _a = tslib_1.__read([glyph.x.field, glyph.y.field], 2), xkey = _a[0], ykey = _a[1];\r\n            var x = cds.get_array(xkey);\r\n            var y = cds.get_array(ykey);\r\n            this._set_intersection(x, y);\r\n        };\r\n        LineEditToolView.prototype._tap = function (ev) {\r\n            var renderer = this.model.intersection_renderer;\r\n            var point = this._map_drag(ev.sx, ev.sy, renderer);\r\n            if (point == null)\r\n                return;\r\n            else if (this._drawing && this._selected_renderer) {\r\n                var mode_1 = this._select_mode(ev);\r\n                var selected_points = this._select_event(ev, mode_1, [renderer]);\r\n                if (selected_points.length == 0) {\r\n                    return;\r\n                }\r\n            }\r\n            var mode = this._select_mode(ev);\r\n            this._select_event(ev, mode, [renderer]);\r\n            this._select_event(ev, mode, this.model.renderers);\r\n        };\r\n        LineEditToolView.prototype._update_line_cds = function () {\r\n            if (this._selected_renderer == null)\r\n                return;\r\n            var point_glyph = this.model.intersection_renderer.glyph;\r\n            var point_cds = this.model.intersection_renderer.data_source;\r\n            var _a = tslib_1.__read([point_glyph.x.field, point_glyph.y.field], 2), pxkey = _a[0], pykey = _a[1];\r\n            if (pxkey && pykey) {\r\n                var x = point_cds.data[pxkey];\r\n                var y = point_cds.data[pykey];\r\n                this._selected_renderer.data_source.data[pxkey] = x;\r\n                this._selected_renderer.data_source.data[pykey] = y;\r\n            }\r\n            this._emit_cds_changes(this._selected_renderer.data_source, true, true, false);\r\n        };\r\n        LineEditToolView.prototype._pan_start = function (ev) {\r\n            this._select_event(ev, \"append\", [this.model.intersection_renderer]);\r\n            this._basepoint = [ev.sx, ev.sy];\r\n        };\r\n        LineEditToolView.prototype._pan = function (ev) {\r\n            if (this._basepoint == null)\r\n                return;\r\n            this._drag_points(ev, [this.model.intersection_renderer], this.model.dimensions);\r\n            if (this._selected_renderer)\r\n                this._selected_renderer.data_source.change.emit();\r\n        };\r\n        LineEditToolView.prototype._pan_end = function (ev) {\r\n            if (this._basepoint == null)\r\n                return;\r\n            this._drag_points(ev, [this.model.intersection_renderer]);\r\n            this._emit_cds_changes(this.model.intersection_renderer.data_source, false, true, true);\r\n            if (this._selected_renderer) {\r\n                this._emit_cds_changes(this._selected_renderer.data_source);\r\n            }\r\n            this._basepoint = null;\r\n        };\r\n        LineEditToolView.prototype.activate = function () {\r\n            this._drawing = true;\r\n        };\r\n        LineEditToolView.prototype.deactivate = function () {\r\n            if (!this._selected_renderer) {\r\n                return;\r\n            }\r\n            else if (this._drawing) {\r\n                this._drawing = false;\r\n            }\r\n            this._hide_intersections();\r\n        };\r\n        return LineEditToolView;\r\n    }(line_tool_1.LineToolView));\r\n    exports.LineEditToolView = LineEditToolView;\r\n    LineEditToolView.__name__ = \"LineEditToolView\";\r\n    var LineEditTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineEditTool, _super);\r\n        function LineEditTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Line Edit Tool\";\r\n            _this.icon = icons_1.bk_tool_icon_line_edit;\r\n            _this.event_type = [\"tap\", \"pan\", \"move\"];\r\n            _this.default_order = 4;\r\n            return _this;\r\n        }\r\n        LineEditTool.init_LineEditTool = function () {\r\n            this.prototype.default_view = LineEditToolView;\r\n            this.define({\r\n                dimensions: [p.Dimensions, \"both\"],\r\n            });\r\n        };\r\n        Object.defineProperty(LineEditTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(this.tool_name, this.dimensions);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return LineEditTool;\r\n    }(line_tool_1.LineTool));\r\n    exports.LineEditTool = LineEditTool;\r\n    LineEditTool.__name__ = \"LineEditTool\";\r\n    LineEditTool.init_LineEditTool();\r\n}\r\n","/* models\\tools\\edit\\line_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var types_1 = require(123) /* ../../../core/util/types */;\r\n    var edit_tool_1 = require(471) /* ./edit_tool */;\r\n    var LineToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineToolView, _super);\r\n        function LineToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LineToolView.prototype._set_intersection = function (x, y) {\r\n            var point_glyph = this.model.intersection_renderer.glyph;\r\n            var point_cds = this.model.intersection_renderer.data_source;\r\n            var _a = tslib_1.__read([point_glyph.x.field, point_glyph.y.field], 2), pxkey = _a[0], pykey = _a[1];\r\n            if (pxkey) {\r\n                if (types_1.isArray(x))\r\n                    point_cds.data[pxkey] = x;\r\n                else\r\n                    point_glyph.x = { value: x };\r\n            }\r\n            if (pykey) {\r\n                if (types_1.isArray(y))\r\n                    point_cds.data[pykey] = y;\r\n                else\r\n                    point_glyph.y = { value: y };\r\n            }\r\n            this._emit_cds_changes(point_cds, true, true, false);\r\n        };\r\n        LineToolView.prototype._hide_intersections = function () {\r\n            this._set_intersection([], []);\r\n        };\r\n        return LineToolView;\r\n    }(edit_tool_1.EditToolView));\r\n    exports.LineToolView = LineToolView;\r\n    LineToolView.__name__ = \"LineToolView\";\r\n    var LineTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(LineTool, _super);\r\n        function LineTool(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        LineTool.init_LineTool = function () {\r\n            this.prototype.default_view = LineToolView;\r\n            this.define({\r\n                intersection_renderer: [p.Instance],\r\n            });\r\n        };\r\n        return LineTool;\r\n    }(edit_tool_1.EditTool));\r\n    exports.LineTool = LineTool;\r\n    LineTool.__name__ = \"LineTool\";\r\n    LineTool.init_LineTool();\r\n}\r\n","/* models\\tools\\gestures\\pan_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var gesture_tool_1 = require(421) /* ./gesture_tool */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    function update_ranges(scales, p0, p1) {\r\n        var e_1, _a;\r\n        var r = new Map();\r\n        try {\r\n            for (var scales_1 = tslib_1.__values(scales), scales_1_1 = scales_1.next(); !scales_1_1.done; scales_1_1 = scales_1.next()) {\r\n                var _b = tslib_1.__read(scales_1_1.value, 2), name = _b[0], scale = _b[1];\r\n                var _c = tslib_1.__read(scale.r_invert(p0, p1), 2), start = _c[0], end = _c[1];\r\n                r.set(name, { start: start, end: end });\r\n            }\r\n        }\r\n        catch (e_1_1) {\r\n            e_1 = { error: e_1_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (scales_1_1 && !scales_1_1.done && (_a = scales_1.return))\r\n                    _a.call(scales_1);\r\n            }\r\n            finally {\r\n                if (e_1)\r\n                    throw e_1.error;\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n    exports.update_ranges = update_ranges;\r\n    var PanToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PanToolView, _super);\r\n        function PanToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PanToolView.prototype._pan_start = function (ev) {\r\n            this.last_dx = 0;\r\n            this.last_dy = 0;\r\n            var sx = ev.sx, sy = ev.sy;\r\n            var bbox = this.plot_view.frame.bbox;\r\n            if (!bbox.contains(sx, sy)) {\r\n                var hr = bbox.h_range;\r\n                var vr = bbox.v_range;\r\n                if (sx < hr.start || sx > hr.end)\r\n                    this.v_axis_only = true;\r\n                if (sy < vr.start || sy > vr.end)\r\n                    this.h_axis_only = true;\r\n            }\r\n            if (this.model.document != null)\r\n                this.model.document.interactive_start(this.plot_model);\r\n        };\r\n        PanToolView.prototype._pan = function (ev) {\r\n            this._update(ev.deltaX, ev.deltaY);\r\n            if (this.model.document != null)\r\n                this.model.document.interactive_start(this.plot_model);\r\n        };\r\n        PanToolView.prototype._pan_end = function (_e) {\r\n            this.h_axis_only = false;\r\n            this.v_axis_only = false;\r\n            if (this.pan_info != null)\r\n                this.plot_view.push_state('pan', { range: this.pan_info });\r\n        };\r\n        PanToolView.prototype._update = function (dx, dy) {\r\n            var frame = this.plot_view.frame;\r\n            var new_dx = dx - this.last_dx;\r\n            var new_dy = dy - this.last_dy;\r\n            var hr = frame.bbox.h_range;\r\n            var sx_low = hr.start - new_dx;\r\n            var sx_high = hr.end - new_dx;\r\n            var vr = frame.bbox.v_range;\r\n            var sy_low = vr.start - new_dy;\r\n            var sy_high = vr.end - new_dy;\r\n            var dims = this.model.dimensions;\r\n            var sx0;\r\n            var sx1;\r\n            var sdx;\r\n            if ((dims == 'width' || dims == 'both') && !this.v_axis_only) {\r\n                sx0 = sx_low;\r\n                sx1 = sx_high;\r\n                sdx = -new_dx;\r\n            }\r\n            else {\r\n                sx0 = hr.start;\r\n                sx1 = hr.end;\r\n                sdx = 0;\r\n            }\r\n            var sy0;\r\n            var sy1;\r\n            var sdy;\r\n            if ((dims == 'height' || dims == 'both') && !this.h_axis_only) {\r\n                sy0 = sy_low;\r\n                sy1 = sy_high;\r\n                sdy = -new_dy;\r\n            }\r\n            else {\r\n                sy0 = vr.start;\r\n                sy1 = vr.end;\r\n                sdy = 0;\r\n            }\r\n            this.last_dx = dx;\r\n            this.last_dy = dy;\r\n            var x_scales = frame.x_scales, y_scales = frame.y_scales;\r\n            var xrs = update_ranges(x_scales, sx0, sx1);\r\n            var yrs = update_ranges(y_scales, sy0, sy1);\r\n            this.pan_info = { xrs: xrs, yrs: yrs, sdx: sdx, sdy: sdy };\r\n            this.plot_view.update_range(this.pan_info, true);\r\n        };\r\n        return PanToolView;\r\n    }(gesture_tool_1.GestureToolView));\r\n    exports.PanToolView = PanToolView;\r\n    PanToolView.__name__ = \"PanToolView\";\r\n    var PanTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(PanTool, _super);\r\n        function PanTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Pan\";\r\n            _this.event_type = \"pan\";\r\n            _this.default_order = 10;\r\n            return _this;\r\n        }\r\n        PanTool.init_PanTool = function () {\r\n            this.prototype.default_view = PanToolView;\r\n            this.define({\r\n                dimensions: [p.Dimensions, \"both\"],\r\n            });\r\n            this.register_alias(\"pan\", function () { return new PanTool({ dimensions: 'both' }); });\r\n            this.register_alias(\"xpan\", function () { return new PanTool({ dimensions: 'width' }); });\r\n            this.register_alias(\"ypan\", function () { return new PanTool({ dimensions: 'height' }); });\r\n        };\r\n        Object.defineProperty(PanTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(\"Pan\", this.dimensions);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(PanTool.prototype, \"icon\", {\r\n            get: function () {\r\n                switch (this.dimensions) {\r\n                    case \"both\": return icons_1.bk_tool_icon_pan;\r\n                    case \"width\": return icons_1.bk_tool_icon_xpan;\r\n                    case \"height\": return icons_1.bk_tool_icon_ypan;\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return PanTool;\r\n    }(gesture_tool_1.GestureTool));\r\n    exports.PanTool = PanTool;\r\n    PanTool.__name__ = \"PanTool\";\r\n    PanTool.init_PanTool();\r\n}\r\n","/* models\\tools\\gestures\\range_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var box_annotation_1 = require(239) /* ../../annotations/box_annotation */;\r\n    var logging_1 = require(134) /* ../../../core/logging */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var gesture_tool_1 = require(421) /* ./gesture_tool */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    function flip_side(side) {\r\n        switch (side) {\r\n            case 1 /* Left */: return 2 /* Right */;\r\n            case 2 /* Right */: return 1 /* Left */;\r\n            case 4 /* Bottom */: return 5 /* Top */;\r\n            case 5 /* Top */: return 4 /* Bottom */;\r\n            default: return side;\r\n        }\r\n    }\r\n    exports.flip_side = flip_side;\r\n    // TODO (bev) This would be better directly with BoxAnnotation, but hard\r\n    // to test on a view. Move when \"View Models\" are implemented\r\n    function is_near(pos, value, scale, tolerance) {\r\n        if (value == null)\r\n            return false;\r\n        var svalue = scale.compute(value);\r\n        return Math.abs(pos - svalue) < tolerance;\r\n    }\r\n    exports.is_near = is_near;\r\n    // TODO (bev) This would be better directly with BoxAnnotation, but hard\r\n    // to test on a view. Move when \"View Models\" are implemented\r\n    function is_inside(sx, sy, xscale, yscale, overlay) {\r\n        var result = true;\r\n        if (overlay.left != null && overlay.right != null) {\r\n            var x = xscale.invert(sx);\r\n            if (x < overlay.left || x > overlay.right)\r\n                result = false;\r\n        }\r\n        if (overlay.bottom != null && overlay.top != null) {\r\n            var y = yscale.invert(sy);\r\n            if (y < overlay.bottom || y > overlay.top)\r\n                result = false;\r\n        }\r\n        return result;\r\n    }\r\n    exports.is_inside = is_inside;\r\n    function sides_inside(start, end, range) {\r\n        var result = 0;\r\n        if (start >= range.start && start <= range.end)\r\n            result += 1;\r\n        if (end >= range.start && end <= range.end)\r\n            result += 1;\r\n        return result;\r\n    }\r\n    exports.sides_inside = sides_inside;\r\n    function compute_value(value, scale, sdelta, range) {\r\n        var svalue = scale.compute(value);\r\n        var new_value = scale.invert(svalue + sdelta);\r\n        if (new_value >= range.start && new_value <= range.end)\r\n            return new_value;\r\n        return value;\r\n    }\r\n    exports.compute_value = compute_value;\r\n    function update_range_end_side(end, range, side) {\r\n        if (end > range.start) {\r\n            range.end = end;\r\n            return side;\r\n        }\r\n        else {\r\n            range.end = range.start;\r\n            range.start = end;\r\n            return flip_side(side);\r\n        }\r\n    }\r\n    exports.update_range_end_side = update_range_end_side;\r\n    function update_range_start_side(start, range, side) {\r\n        if (start < range.end) {\r\n            range.start = start;\r\n            return side;\r\n        }\r\n        else {\r\n            range.start = range.end;\r\n            range.end = start;\r\n            return flip_side(side);\r\n        }\r\n    }\r\n    exports.update_range_start_side = update_range_start_side;\r\n    function update_range(range, scale, delta, plot_range) {\r\n        var _a = tslib_1.__read(scale.r_compute(range.start, range.end), 2), sstart = _a[0], send = _a[1];\r\n        var _b = tslib_1.__read(scale.r_invert(sstart + delta, send + delta), 2), start = _b[0], end = _b[1];\r\n        var initial_sides_inside = sides_inside(range.start, range.end, plot_range);\r\n        var final_sides_inside = sides_inside(start, end, plot_range);\r\n        // Allow the update as long as the number of sides in-bounds does not decrease\r\n        if (final_sides_inside >= initial_sides_inside) {\r\n            range.start = start;\r\n            range.end = end;\r\n        }\r\n    }\r\n    exports.update_range = update_range;\r\n    var RangeToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RangeToolView, _super);\r\n        function RangeToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        RangeToolView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.side = 0 /* None */;\r\n            this.model.update_overlay_from_ranges();\r\n        };\r\n        RangeToolView.prototype.connect_signals = function () {\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            if (this.model.x_range != null)\r\n                this.connect(this.model.x_range.change, function () { return _this.model.update_overlay_from_ranges(); });\r\n            if (this.model.y_range != null)\r\n                this.connect(this.model.y_range.change, function () { return _this.model.update_overlay_from_ranges(); });\r\n        };\r\n        RangeToolView.prototype._pan_start = function (ev) {\r\n            this.last_dx = 0;\r\n            this.last_dy = 0;\r\n            var xr = this.model.x_range;\r\n            var yr = this.model.y_range;\r\n            var frame = this.plot_view.frame;\r\n            var xscale = frame.x_scale;\r\n            var yscale = frame.y_scale;\r\n            var overlay = this.model.overlay;\r\n            var left = overlay.left, right = overlay.right, top = overlay.top, bottom = overlay.bottom;\r\n            var tolerance = this.model.overlay.properties.line_width.value() + box_annotation_1.EDGE_TOLERANCE;\r\n            if (xr != null && this.model.x_interaction) {\r\n                if (is_near(ev.sx, left, xscale, tolerance))\r\n                    this.side = 1 /* Left */;\r\n                else if (is_near(ev.sx, right, xscale, tolerance))\r\n                    this.side = 2 /* Right */;\r\n                else if (is_inside(ev.sx, ev.sy, xscale, yscale, overlay)) {\r\n                    this.side = 3 /* LeftRight */;\r\n                }\r\n            }\r\n            if (yr != null && this.model.y_interaction) {\r\n                if (this.side == 0 /* None */ && is_near(ev.sy, bottom, yscale, tolerance))\r\n                    this.side = 4 /* Bottom */;\r\n                if (this.side == 0 /* None */ && is_near(ev.sy, top, yscale, tolerance))\r\n                    this.side = 5 /* Top */;\r\n                else if (is_inside(ev.sx, ev.sy, xscale, yscale, this.model.overlay)) {\r\n                    if (this.side == 3 /* LeftRight */)\r\n                        this.side = 7 /* LeftRightBottomTop */;\r\n                    else\r\n                        this.side = 6 /* BottomTop */;\r\n                }\r\n            }\r\n        };\r\n        RangeToolView.prototype._pan = function (ev) {\r\n            var frame = this.plot_view.frame;\r\n            var new_dx = ev.deltaX - this.last_dx;\r\n            var new_dy = ev.deltaY - this.last_dy;\r\n            var xr = this.model.x_range;\r\n            var yr = this.model.y_range;\r\n            var xscale = frame.x_scale;\r\n            var yscale = frame.y_scale;\r\n            if (xr != null) {\r\n                if (this.side == 3 /* LeftRight */ || this.side == 7 /* LeftRightBottomTop */)\r\n                    update_range(xr, xscale, new_dx, frame.x_range);\r\n                else if (this.side == 1 /* Left */) {\r\n                    var start = compute_value(xr.start, xscale, new_dx, frame.x_range);\r\n                    this.side = update_range_start_side(start, xr, this.side);\r\n                }\r\n                else if (this.side == 2 /* Right */) {\r\n                    var end = compute_value(xr.end, xscale, new_dx, frame.x_range);\r\n                    this.side = update_range_end_side(end, xr, this.side);\r\n                }\r\n            }\r\n            if (yr != null) {\r\n                if (this.side == 6 /* BottomTop */ || this.side == 7 /* LeftRightBottomTop */)\r\n                    update_range(yr, yscale, new_dy, frame.y_range);\r\n                else if (this.side == 4 /* Bottom */) {\r\n                    var start = compute_value(yr.start, yscale, new_dy, frame.y_range);\r\n                    this.side = update_range_start_side(start, yr, this.side);\r\n                }\r\n                else if (this.side == 5 /* Top */) {\r\n                    var end = compute_value(yr.end, yscale, new_dy, frame.y_range);\r\n                    this.side = update_range_end_side(end, yr, this.side);\r\n                }\r\n            }\r\n            this.last_dx = ev.deltaX;\r\n            this.last_dy = ev.deltaY;\r\n        };\r\n        RangeToolView.prototype._pan_end = function (_ev) {\r\n            this.side = 0 /* None */;\r\n        };\r\n        return RangeToolView;\r\n    }(gesture_tool_1.GestureToolView));\r\n    exports.RangeToolView = RangeToolView;\r\n    RangeToolView.__name__ = \"RangeToolView\";\r\n    var DEFAULT_RANGE_OVERLAY = function () {\r\n        return new box_annotation_1.BoxAnnotation({\r\n            level: \"overlay\",\r\n            fill_color: \"lightgrey\",\r\n            fill_alpha: 0.5,\r\n            line_color: \"black\",\r\n            line_alpha: 1.0,\r\n            line_width: 0.5,\r\n            line_dash: [2, 2],\r\n        });\r\n    };\r\n    var RangeTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(RangeTool, _super);\r\n        function RangeTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Range Tool\";\r\n            _this.icon = icons_1.bk_tool_icon_range;\r\n            _this.event_type = \"pan\";\r\n            _this.default_order = 1;\r\n            return _this;\r\n        }\r\n        RangeTool.init_RangeTool = function () {\r\n            this.prototype.default_view = RangeToolView;\r\n            this.define({\r\n                x_range: [p.Instance, null],\r\n                x_interaction: [p.Boolean, true],\r\n                y_range: [p.Instance, null],\r\n                y_interaction: [p.Boolean, true],\r\n                overlay: [p.Instance, DEFAULT_RANGE_OVERLAY],\r\n            });\r\n        };\r\n        RangeTool.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.overlay.in_cursor = \"grab\";\r\n            this.overlay.ew_cursor = this.x_range != null && this.x_interaction ? \"ew-resize\" : null;\r\n            this.overlay.ns_cursor = this.y_range != null && this.y_interaction ? \"ns-resize\" : null;\r\n        };\r\n        RangeTool.prototype.update_overlay_from_ranges = function () {\r\n            if (this.x_range == null && this.y_range == null) {\r\n                this.overlay.left = null;\r\n                this.overlay.right = null;\r\n                this.overlay.bottom = null;\r\n                this.overlay.top = null;\r\n                logging_1.logger.warn('RangeTool not configured with any Ranges.');\r\n            }\r\n            if (this.x_range == null) {\r\n                this.overlay.left = null;\r\n                this.overlay.right = null;\r\n            }\r\n            else {\r\n                this.overlay.left = this.x_range.start;\r\n                this.overlay.right = this.x_range.end;\r\n            }\r\n            if (this.y_range == null) {\r\n                this.overlay.bottom = null;\r\n                this.overlay.top = null;\r\n            }\r\n            else {\r\n                this.overlay.bottom = this.y_range.start;\r\n                this.overlay.top = this.y_range.end;\r\n            }\r\n        };\r\n        return RangeTool;\r\n    }(gesture_tool_1.GestureTool));\r\n    exports.RangeTool = RangeTool;\r\n    RangeTool.__name__ = \"RangeTool\";\r\n    RangeTool.init_RangeTool();\r\n}\r\n","/* models\\tools\\gestures\\tap_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var select_tool_1 = require(479) /* ./select_tool */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var TapToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TapToolView, _super);\r\n        function TapToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TapToolView.prototype._tap = function (ev) {\r\n            var sx = ev.sx, sy = ev.sy;\r\n            var geometry = { type: \"point\", sx: sx, sy: sy };\r\n            this._select(geometry, true, this._select_mode(ev));\r\n        };\r\n        TapToolView.prototype._select = function (geometry, final, mode) {\r\n            var e_1, _a, e_2, _b;\r\n            var _this = this;\r\n            var callback = this.model.callback;\r\n            if (this.model.behavior == \"select\") {\r\n                var renderers_by_source = this._computed_renderers_by_data_source();\r\n                try {\r\n                    for (var renderers_by_source_1 = tslib_1.__values(renderers_by_source), renderers_by_source_1_1 = renderers_by_source_1.next(); !renderers_by_source_1_1.done; renderers_by_source_1_1 = renderers_by_source_1.next()) {\r\n                        var _c = tslib_1.__read(renderers_by_source_1_1.value, 2), renderers = _c[1];\r\n                        var sm = renderers[0].get_selection_manager();\r\n                        var r_views = renderers.map(function (r) { return _this.plot_view.renderer_views.get(r); });\r\n                        var did_hit = sm.select(r_views, geometry, final, mode);\r\n                        if (did_hit && callback != null) {\r\n                            var x = r_views[0].coordinates.x_scale.invert(geometry.sx);\r\n                            var y = r_views[0].coordinates.y_scale.invert(geometry.sy);\r\n                            var data = { geometries: Object.assign(Object.assign({}, geometry), { x: x, y: y }), source: sm.source };\r\n                            callback.execute(this.model, data);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_1_1) {\r\n                    e_1 = { error: e_1_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (renderers_by_source_1_1 && !renderers_by_source_1_1.done && (_a = renderers_by_source_1.return))\r\n                            _a.call(renderers_by_source_1);\r\n                    }\r\n                    finally {\r\n                        if (e_1)\r\n                            throw e_1.error;\r\n                    }\r\n                }\r\n                this._emit_selection_event(geometry);\r\n                this.plot_view.push_state('tap', { selection: this.plot_view.get_selection() });\r\n            }\r\n            else {\r\n                try {\r\n                    for (var _d = tslib_1.__values(this.computed_renderers), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                        var r = _e.value;\r\n                        var rv = this.plot_view.renderer_views.get(r);\r\n                        var sm = r.get_selection_manager();\r\n                        var did_hit = sm.inspect(rv, geometry);\r\n                        if (did_hit && callback != null) {\r\n                            var x = rv.coordinates.x_scale.invert(geometry.sx);\r\n                            var y = rv.coordinates.y_scale.invert(geometry.sy);\r\n                            var data = { geometries: Object.assign(Object.assign({}, geometry), { x: x, y: y }), source: sm.source };\r\n                            callback.execute(this.model, data);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_e && !_e.done && (_b = _d.return))\r\n                            _b.call(_d);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        return TapToolView;\r\n    }(select_tool_1.SelectToolView));\r\n    exports.TapToolView = TapToolView;\r\n    TapToolView.__name__ = \"TapToolView\";\r\n    var TapTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(TapTool, _super);\r\n        function TapTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Tap\";\r\n            _this.icon = icons_1.bk_tool_icon_tap_select;\r\n            _this.event_type = \"tap\";\r\n            _this.default_order = 10;\r\n            return _this;\r\n        }\r\n        TapTool.init_TapTool = function () {\r\n            this.prototype.default_view = TapToolView;\r\n            this.define({\r\n                behavior: [p.TapBehavior, \"select\"],\r\n                callback: [p.Any],\r\n            });\r\n            this.register_alias(\"click\", function () { return new TapTool({ behavior: \"inspect\" }); });\r\n            this.register_alias(\"tap\", function () { return new TapTool(); });\r\n        };\r\n        return TapTool;\r\n    }(select_tool_1.SelectTool));\r\n    exports.TapTool = TapTool;\r\n    TapTool.__name__ = \"TapTool\";\r\n    TapTool.init_TapTool();\r\n}\r\n","/* models\\tools\\gestures\\wheel_pan_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var gesture_tool_1 = require(421) /* ./gesture_tool */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var pan_tool_1 = require(486) /* ./pan_tool */;\r\n    var WheelPanToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WheelPanToolView, _super);\r\n        function WheelPanToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        WheelPanToolView.prototype._scroll = function (ev) {\r\n            var factor = this.model.speed * ev.delta;\r\n            // clamp the magnitude of factor, if it is > 1 bad things happen\r\n            if (factor > 0.9)\r\n                factor = 0.9;\r\n            else if (factor < -0.9)\r\n                factor = -0.9;\r\n            this._update_ranges(factor);\r\n        };\r\n        WheelPanToolView.prototype._update_ranges = function (factor) {\r\n            var frame = this.plot_view.frame;\r\n            var hr = frame.bbox.h_range;\r\n            var vr = frame.bbox.v_range;\r\n            var _a = tslib_1.__read([hr.start, hr.end], 2), sx_low = _a[0], sx_high = _a[1];\r\n            var _b = tslib_1.__read([vr.start, vr.end], 2), sy_low = _b[0], sy_high = _b[1];\r\n            var sx0;\r\n            var sx1;\r\n            var sy0;\r\n            var sy1;\r\n            switch (this.model.dimension) {\r\n                case \"height\": {\r\n                    var sy_range = Math.abs(sy_high - sy_low);\r\n                    sx0 = sx_low;\r\n                    sx1 = sx_high;\r\n                    sy0 = sy_low - sy_range * factor;\r\n                    sy1 = sy_high - sy_range * factor;\r\n                    break;\r\n                }\r\n                case \"width\": {\r\n                    var sx_range = Math.abs(sx_high - sx_low);\r\n                    sx0 = sx_low - sx_range * factor;\r\n                    sx1 = sx_high - sx_range * factor;\r\n                    sy0 = sy_low;\r\n                    sy1 = sy_high;\r\n                    break;\r\n                }\r\n                default:\r\n                    throw new Error(\"this shouldn't have happened\");\r\n            }\r\n            var x_scales = frame.x_scales, y_scales = frame.y_scales;\r\n            var xrs = pan_tool_1.update_ranges(x_scales, sx0, sx1);\r\n            var yrs = pan_tool_1.update_ranges(y_scales, sy0, sy1);\r\n            // OK this sucks we can't set factor independently in each direction. It is used\r\n            // for GMap plots, and GMap plots always preserve aspect, so effective the value\r\n            // of 'dimensions' is ignored.\r\n            var pan_info = { xrs: xrs, yrs: yrs, factor: factor };\r\n            this.plot_view.push_state('wheel_pan', { range: pan_info });\r\n            this.plot_view.update_range(pan_info, false, true);\r\n            if (this.model.document != null)\r\n                this.model.document.interactive_start(this.plot_model);\r\n        };\r\n        return WheelPanToolView;\r\n    }(gesture_tool_1.GestureToolView));\r\n    exports.WheelPanToolView = WheelPanToolView;\r\n    WheelPanToolView.__name__ = \"WheelPanToolView\";\r\n    var WheelPanTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WheelPanTool, _super);\r\n        function WheelPanTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Wheel Pan\";\r\n            _this.icon = icons_1.bk_tool_icon_wheel_pan;\r\n            _this.event_type = \"scroll\";\r\n            _this.default_order = 12;\r\n            return _this;\r\n        }\r\n        WheelPanTool.init_WheelPanTool = function () {\r\n            this.prototype.default_view = WheelPanToolView;\r\n            this.define({\r\n                dimension: [p.Dimension, \"width\"],\r\n            });\r\n            this.internal({\r\n                speed: [p.Number, 1 / 1000],\r\n            });\r\n            this.register_alias(\"xwheel_pan\", function () { return new WheelPanTool({ dimension: \"width\" }); });\r\n            this.register_alias(\"ywheel_pan\", function () { return new WheelPanTool({ dimension: \"height\" }); });\r\n        };\r\n        Object.defineProperty(WheelPanTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(this.tool_name, this.dimension);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return WheelPanTool;\r\n    }(gesture_tool_1.GestureTool));\r\n    exports.WheelPanTool = WheelPanTool;\r\n    WheelPanTool.__name__ = \"WheelPanTool\";\r\n    WheelPanTool.init_WheelPanTool();\r\n}\r\n","/* models\\tools\\gestures\\wheel_zoom_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var gesture_tool_1 = require(421) /* ./gesture_tool */;\r\n    var zoom_1 = require(469) /* ../../../core/util/zoom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var compat_1 = require(147) /* ../../../core/util/compat */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var WheelZoomToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WheelZoomToolView, _super);\r\n        function WheelZoomToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        WheelZoomToolView.prototype._pinch = function (ev) {\r\n            // TODO (bev) this can probably be done much better\r\n            var sx = ev.sx, sy = ev.sy, scale = ev.scale, ctrlKey = ev.ctrlKey, shiftKey = ev.shiftKey;\r\n            var delta;\r\n            if (scale >= 1)\r\n                delta = (scale - 1) * 20.0;\r\n            else\r\n                delta = -20.0 / scale;\r\n            this._scroll({ type: \"wheel\", sx: sx, sy: sy, delta: delta, ctrlKey: ctrlKey, shiftKey: shiftKey });\r\n        };\r\n        WheelZoomToolView.prototype._scroll = function (ev) {\r\n            var frame = this.plot_view.frame;\r\n            var hr = frame.bbox.h_range;\r\n            var vr = frame.bbox.v_range;\r\n            var sx = ev.sx, sy = ev.sy;\r\n            var dims = this.model.dimensions;\r\n            // restrict to axis configured in tool's dimensions property and if\r\n            // zoom origin is inside of frame range/domain\r\n            var h_axis = (dims == 'width' || dims == 'both') && hr.start < sx && sx < hr.end;\r\n            var v_axis = (dims == 'height' || dims == 'both') && vr.start < sy && sy < vr.end;\r\n            if ((!h_axis || !v_axis) && !this.model.zoom_on_axis) {\r\n                return;\r\n            }\r\n            var factor = this.model.speed * ev.delta;\r\n            var zoom_info = zoom_1.scale_range(frame, factor, h_axis, v_axis, { x: sx, y: sy });\r\n            this.plot_view.push_state('wheel_zoom', { range: zoom_info });\r\n            this.plot_view.update_range(zoom_info, false, true, this.model.maintain_focus);\r\n            if (this.model.document != null)\r\n                this.model.document.interactive_start(this.plot_model);\r\n        };\r\n        return WheelZoomToolView;\r\n    }(gesture_tool_1.GestureToolView));\r\n    exports.WheelZoomToolView = WheelZoomToolView;\r\n    WheelZoomToolView.__name__ = \"WheelZoomToolView\";\r\n    var WheelZoomTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(WheelZoomTool, _super);\r\n        function WheelZoomTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Wheel Zoom\";\r\n            _this.icon = icons_1.bk_tool_icon_wheel_zoom;\r\n            _this.event_type = compat_1.is_mobile ? \"pinch\" : \"scroll\";\r\n            _this.default_order = 10;\r\n            return _this;\r\n        }\r\n        WheelZoomTool.init_WheelZoomTool = function () {\r\n            this.prototype.default_view = WheelZoomToolView;\r\n            this.define({\r\n                dimensions: [p.Dimensions, \"both\"],\r\n                maintain_focus: [p.Boolean, true],\r\n                zoom_on_axis: [p.Boolean, true],\r\n                speed: [p.Number, 1 / 600],\r\n            });\r\n            this.register_alias(\"wheel_zoom\", function () { return new WheelZoomTool({ dimensions: 'both' }); });\r\n            this.register_alias(\"xwheel_zoom\", function () { return new WheelZoomTool({ dimensions: 'width' }); });\r\n            this.register_alias(\"ywheel_zoom\", function () { return new WheelZoomTool({ dimensions: 'height' }); });\r\n        };\r\n        Object.defineProperty(WheelZoomTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(this.tool_name, this.dimensions);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return WheelZoomTool;\r\n    }(gesture_tool_1.GestureTool));\r\n    exports.WheelZoomTool = WheelZoomTool;\r\n    WheelZoomTool.__name__ = \"WheelZoomTool\";\r\n    WheelZoomTool.init_WheelZoomTool();\r\n}\r\n","/* models\\tools\\inspectors\\crosshair_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var inspect_tool_1 = require(410) /* ./inspect_tool */;\r\n    var span_1 = require(283) /* ../../annotations/span */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var object_1 = require(128) /* ../../../core/util/object */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var CrosshairToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CrosshairToolView, _super);\r\n        function CrosshairToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CrosshairToolView.prototype._move = function (ev) {\r\n            if (!this.model.active)\r\n                return;\r\n            var sx = ev.sx, sy = ev.sy;\r\n            if (!this.plot_view.frame.bbox.contains(sx, sy))\r\n                this._update_spans(null, null);\r\n            else\r\n                this._update_spans(sx, sy);\r\n        };\r\n        CrosshairToolView.prototype._move_exit = function (_e) {\r\n            this._update_spans(null, null);\r\n        };\r\n        CrosshairToolView.prototype._update_spans = function (x, y) {\r\n            var dims = this.model.dimensions;\r\n            if (dims == \"width\" || dims == \"both\")\r\n                this.model.spans.width.location = y;\r\n            if (dims == \"height\" || dims == \"both\")\r\n                this.model.spans.height.location = x;\r\n        };\r\n        return CrosshairToolView;\r\n    }(inspect_tool_1.InspectToolView));\r\n    exports.CrosshairToolView = CrosshairToolView;\r\n    CrosshairToolView.__name__ = \"CrosshairToolView\";\r\n    var CrosshairTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CrosshairTool, _super);\r\n        function CrosshairTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Crosshair\";\r\n            _this.icon = icons_1.bk_tool_icon_crosshair;\r\n            return _this;\r\n        }\r\n        CrosshairTool.init_CrosshairTool = function () {\r\n            this.prototype.default_view = CrosshairToolView;\r\n            this.define({\r\n                dimensions: [p.Dimensions, \"both\"],\r\n                line_color: [p.Color, 'black'],\r\n                line_width: [p.Number, 1],\r\n                line_alpha: [p.Number, 1.0],\r\n            });\r\n            this.internal({\r\n                spans: [p.Any],\r\n            });\r\n            this.register_alias(\"crosshair\", function () { return new CrosshairTool(); });\r\n        };\r\n        Object.defineProperty(CrosshairTool.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this._get_dim_tooltip(\"Crosshair\", this.dimensions);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CrosshairTool.prototype, \"synthetic_renderers\", {\r\n            get: function () {\r\n                return object_1.values(this.spans);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        CrosshairTool.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.spans = {\r\n                width: new span_1.Span({\r\n                    for_hover: true,\r\n                    dimension: \"width\",\r\n                    location_units: \"screen\",\r\n                    level: \"overlay\",\r\n                    line_color: this.line_color,\r\n                    line_width: this.line_width,\r\n                    line_alpha: this.line_alpha,\r\n                }),\r\n                height: new span_1.Span({\r\n                    for_hover: true,\r\n                    dimension: \"height\",\r\n                    location_units: \"screen\",\r\n                    level: \"overlay\",\r\n                    line_color: this.line_color,\r\n                    line_width: this.line_width,\r\n                    line_alpha: this.line_alpha,\r\n                }),\r\n            };\r\n        };\r\n        return CrosshairTool;\r\n    }(inspect_tool_1.InspectTool));\r\n    exports.CrosshairTool = CrosshairTool;\r\n    CrosshairTool.__name__ = \"CrosshairTool\";\r\n    CrosshairTool.init_CrosshairTool();\r\n}\r\n","/* models\\tools\\inspectors\\customjs_hover.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var model_1 = require(196) /* ../../../model */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var object_1 = require(128) /* ../../../core/util/object */;\r\n    var string_1 = require(144) /* ../../../core/util/string */;\r\n    var CustomJSHover = /** @class */ (function (_super) {\r\n        tslib_1.__extends(CustomJSHover, _super);\r\n        function CustomJSHover(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        CustomJSHover.init_CustomJSHover = function () {\r\n            this.define({\r\n                args: [p.Any, {}],\r\n                code: [p.String, \"\"],\r\n            });\r\n        };\r\n        Object.defineProperty(CustomJSHover.prototype, \"values\", {\r\n            get: function () {\r\n                return object_1.values(this.args);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /*protected*/ CustomJSHover.prototype._make_code = function (valname, formatname, varsname, fn) {\r\n            // this relies on keys(args) and values(args) returning keys and values\r\n            // in the same order\r\n            return new (Function.bind.apply(Function, tslib_1.__spread([void 0], object_1.keys(this.args), [valname, formatname, varsname, string_1.use_strict(fn)])))();\r\n        };\r\n        CustomJSHover.prototype.format = function (value, format, special_vars) {\r\n            var formatter = this._make_code(\"value\", \"format\", \"special_vars\", this.code);\r\n            return formatter.apply(void 0, tslib_1.__spread(this.values, [value, format, special_vars]));\r\n        };\r\n        return CustomJSHover;\r\n    }(model_1.Model));\r\n    exports.CustomJSHover = CustomJSHover;\r\n    CustomJSHover.__name__ = \"CustomJSHover\";\r\n    CustomJSHover.init_CustomJSHover();\r\n}\r\n","/* models\\tools\\inspectors\\hover_tool.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var inspect_tool_1 = require(410) /* ./inspect_tool */;\r\n    var tooltip_1 = require(286) /* ../../annotations/tooltip */;\r\n    var glyph_renderer_1 = require(205) /* ../../renderers/glyph_renderer */;\r\n    var graph_renderer_1 = require(231) /* ../../renderers/graph_renderer */;\r\n    var util_1 = require(480) /* ../util */;\r\n    var hittest = tslib_1.__importStar(require(216) /* ../../../core/hittest */);\r\n    var templating_1 = require(302) /* ../../../core/util/templating */;\r\n    var dom_1 = require(187) /* ../../../core/dom */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../../core/properties */);\r\n    var color_1 = require(137) /* ../../../core/util/color */;\r\n    var object_1 = require(128) /* ../../../core/util/object */;\r\n    var iterator_1 = require(418) /* ../../../core/util/iterator */;\r\n    var types_1 = require(123) /* ../../../core/util/types */;\r\n    var build_views_1 = require(230) /* ../../../core/build_views */;\r\n    var icons_1 = require(424) /* ../../../styles/icons */;\r\n    var tooltips_1 = require(287) /* ../../../styles/tooltips */;\r\n    function _nearest_line_hit(i, geometry, sx, sy, dx, dy) {\r\n        var d1 = { x: dx[i], y: dy[i] };\r\n        var d2 = { x: dx[i + 1], y: dy[i + 1] };\r\n        var dist1;\r\n        var dist2;\r\n        if (geometry.type == \"span\") {\r\n            if (geometry.direction == \"h\") {\r\n                dist1 = Math.abs(d1.x - sx);\r\n                dist2 = Math.abs(d2.x - sx);\r\n            }\r\n            else {\r\n                dist1 = Math.abs(d1.y - sy);\r\n                dist2 = Math.abs(d2.y - sy);\r\n            }\r\n        }\r\n        else {\r\n            var s = { x: sx, y: sy };\r\n            dist1 = hittest.dist_2_pts(d1, s);\r\n            dist2 = hittest.dist_2_pts(d2, s);\r\n        }\r\n        if (dist1 < dist2)\r\n            return [[d1.x, d1.y], i];\r\n        else\r\n            return [[d2.x, d2.y], i + 1];\r\n    }\r\n    exports._nearest_line_hit = _nearest_line_hit;\r\n    function _line_hit(xs, ys, ind) {\r\n        return [[xs[ind], ys[ind]], ind];\r\n    }\r\n    exports._line_hit = _line_hit;\r\n    var HoverToolView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HoverToolView, _super);\r\n        function HoverToolView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        HoverToolView.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._ttmodels = null;\r\n            this._ttviews = new Map();\r\n            var tooltips = this.model.tooltips;\r\n            if (types_1.isArray(tooltips)) {\r\n                this._template_el = this._create_template(tooltips);\r\n            }\r\n        };\r\n        HoverToolView.prototype.remove = function () {\r\n            build_views_1.remove_views(this._ttviews);\r\n            _super.prototype.remove.call(this);\r\n        };\r\n        HoverToolView.prototype.connect_signals = function () {\r\n            var e_1, _a;\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            try {\r\n                for (var _b = tslib_1.__values(this.computed_renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var r = _c.value;\r\n                    if (r instanceof glyph_renderer_1.GlyphRenderer)\r\n                        this.connect(r.data_source.inspect, this._update);\r\n                    else if (r instanceof graph_renderer_1.GraphRenderer) {\r\n                        this.connect(r.node_renderer.data_source.inspect, this._update);\r\n                        this.connect(r.edge_renderer.data_source.inspect, this._update);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            // TODO: this.connect(this.plot_model.properties.renderers.change, () => this._computed_renderers = this._ttmodels = null)\r\n            this.connect(this.model.properties.renderers.change, function () { return _this._computed_renderers = _this._ttmodels = null; });\r\n            this.connect(this.model.properties.names.change, function () { return _this._computed_renderers = _this._ttmodels = null; });\r\n            this.connect(this.model.properties.tooltips.change, function () { return _this._ttmodels = null; });\r\n        };\r\n        HoverToolView.prototype._compute_ttmodels = function () {\r\n            var e_2, _a;\r\n            var _this = this;\r\n            var ttmodels = new Map();\r\n            var tooltips = this.model.tooltips;\r\n            if (tooltips != null) {\r\n                try {\r\n                    for (var _b = tslib_1.__values(this.computed_renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                        var r = _c.value;\r\n                        var tooltip = new tooltip_1.Tooltip({\r\n                            custom: types_1.isString(tooltips) || types_1.isFunction(tooltips),\r\n                            attachment: this.model.attachment,\r\n                            show_arrow: this.model.show_arrow,\r\n                        });\r\n                        if (r instanceof glyph_renderer_1.GlyphRenderer) {\r\n                            ttmodels.set(r, tooltip);\r\n                        }\r\n                        else if (r instanceof graph_renderer_1.GraphRenderer) {\r\n                            ttmodels.set(r.node_renderer, tooltip);\r\n                            ttmodels.set(r.edge_renderer, tooltip);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_2_1) {\r\n                    e_2 = { error: e_2_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_c && !_c.done && (_a = _b.return))\r\n                            _a.call(_b);\r\n                    }\r\n                    finally {\r\n                        if (e_2)\r\n                            throw e_2.error;\r\n                    }\r\n                }\r\n            }\r\n            // XXX: move this to lazy_initialize()\r\n            (function () {\r\n                return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                    var views, views_1, views_1_1, ttview;\r\n                    var e_3, _a;\r\n                    return tslib_1.__generator(this, function (_b) {\r\n                        switch (_b.label) {\r\n                            case 0: return [4 /*yield*/, build_views_1.build_views(this._ttviews, tslib_1.__spread(ttmodels.values()), { parent: this.plot_view })];\r\n                            case 1:\r\n                                views = _b.sent();\r\n                                try {\r\n                                    for (views_1 = tslib_1.__values(views), views_1_1 = views_1.next(); !views_1_1.done; views_1_1 = views_1.next()) {\r\n                                        ttview = views_1_1.value;\r\n                                        ttview.render();\r\n                                    }\r\n                                }\r\n                                catch (e_3_1) {\r\n                                    e_3 = { error: e_3_1 };\r\n                                }\r\n                                finally {\r\n                                    try {\r\n                                        if (views_1_1 && !views_1_1.done && (_a = views_1.return))\r\n                                            _a.call(views_1);\r\n                                    }\r\n                                    finally {\r\n                                        if (e_3)\r\n                                            throw e_3.error;\r\n                                    }\r\n                                }\r\n                                return [2 /*return*/];\r\n                        }\r\n                    });\r\n                });\r\n            })();\r\n            return ttmodels;\r\n        };\r\n        Object.defineProperty(HoverToolView.prototype, \"computed_renderers\", {\r\n            get: function () {\r\n                if (this._computed_renderers == null) {\r\n                    var renderers = this.model.renderers;\r\n                    var all_renderers = this.plot_model.renderers;\r\n                    var names = this.model.names;\r\n                    this._computed_renderers = util_1.compute_renderers(renderers, all_renderers, names);\r\n                }\r\n                return this._computed_renderers;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(HoverToolView.prototype, \"ttmodels\", {\r\n            get: function () {\r\n                if (this._ttmodels == null)\r\n                    this._ttmodels = this._compute_ttmodels();\r\n                return this._ttmodels;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        HoverToolView.prototype._clear = function () {\r\n            var e_4, _a;\r\n            this._inspect(Infinity, Infinity);\r\n            try {\r\n                for (var _b = tslib_1.__values(this.ttmodels), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var _d = tslib_1.__read(_c.value, 2), tooltip = _d[1];\r\n                    tooltip.clear();\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n        };\r\n        HoverToolView.prototype._move = function (ev) {\r\n            if (!this.model.active)\r\n                return;\r\n            var sx = ev.sx, sy = ev.sy;\r\n            if (!this.plot_view.frame.bbox.contains(sx, sy))\r\n                this._clear();\r\n            else\r\n                this._inspect(sx, sy);\r\n        };\r\n        HoverToolView.prototype._move_exit = function () {\r\n            this._clear();\r\n        };\r\n        HoverToolView.prototype._inspect = function (sx, sy) {\r\n            var e_5, _a;\r\n            var geometry;\r\n            if (this.model.mode == 'mouse')\r\n                geometry = { type: 'point', sx: sx, sy: sy };\r\n            else {\r\n                var direction = this.model.mode == 'vline' ? 'h' : 'v';\r\n                geometry = { type: 'span', direction: direction, sx: sx, sy: sy };\r\n            }\r\n            try {\r\n                for (var _b = tslib_1.__values(this.computed_renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var r = _c.value;\r\n                    var sm = r.get_selection_manager();\r\n                    sm.inspect(this.plot_view.renderer_views.get(r), geometry);\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            if (this.model.callback != null)\r\n                this._emit_callback(geometry);\r\n        };\r\n        HoverToolView.prototype._update = function (_a) {\r\n            var e_6, _b, _c, _d, _e, _f, _g, _h, _j, _k, e_7, _l, e_8, _m, e_9, _o, _p, _q, _r, _s, _t, _u, _v, _w, e_10, _z;\r\n            var _0 = tslib_1.__read(_a, 2), renderer_view = _0[0], geometry = _0[1].geometry;\r\n            if (!this.model.active)\r\n                return;\r\n            if (!(renderer_view instanceof glyph_renderer_1.GlyphRendererView)) // || renderer_view instanceof GraphRendererView))\r\n                return;\r\n            var renderer = renderer_view.model;\r\n            if (this.model.muted_policy == 'ignore' && renderer instanceof glyph_renderer_1.GlyphRenderer && renderer.muted)\r\n                return;\r\n            var tooltip = this.ttmodels.get(renderer);\r\n            if (tooltip == null)\r\n                return;\r\n            var selection_manager = renderer.get_selection_manager();\r\n            var indices = selection_manager.inspectors.get(renderer);\r\n            if (renderer instanceof glyph_renderer_1.GlyphRenderer)\r\n                indices = renderer.view.convert_selection_to_subset(indices);\r\n            if (indices.is_empty()) {\r\n                tooltip.clear();\r\n                return;\r\n            }\r\n            var ds = selection_manager.source;\r\n            var sx = geometry.sx, sy = geometry.sy;\r\n            var xscale = renderer_view.coordinates.x_scale;\r\n            var yscale = renderer_view.coordinates.y_scale;\r\n            var x = xscale.invert(sx);\r\n            var y = yscale.invert(sy);\r\n            var glyph = renderer_view.glyph; // XXX\r\n            var tooltips = [];\r\n            try {\r\n                for (var _1 = tslib_1.__values(indices.line_indices), _2 = _1.next(); !_2.done; _2 = _1.next()) {\r\n                    var i = _2.value;\r\n                    var data_x = glyph._x[i + 1];\r\n                    var data_y = glyph._y[i + 1];\r\n                    var ii = i;\r\n                    var rx = void 0;\r\n                    var ry = void 0;\r\n                    switch (this.model.line_policy) {\r\n                        case \"interp\": { // and renderer.get_interpolation_hit?\r\n                            _c = tslib_1.__read(glyph.get_interpolation_hit(i, geometry), 2), data_x = _c[0], data_y = _c[1];\r\n                            rx = xscale.compute(data_x);\r\n                            ry = yscale.compute(data_y);\r\n                            break;\r\n                        }\r\n                        case \"prev\": {\r\n                            _d = tslib_1.__read(_line_hit(glyph.sx, glyph.sy, i), 2), _e = tslib_1.__read(_d[0], 2), rx = _e[0], ry = _e[1], ii = _d[1];\r\n                            break;\r\n                        }\r\n                        case \"next\": {\r\n                            _f = tslib_1.__read(_line_hit(glyph.sx, glyph.sy, i + 1), 2), _g = tslib_1.__read(_f[0], 2), rx = _g[0], ry = _g[1], ii = _f[1];\r\n                            break;\r\n                        }\r\n                        case \"nearest\": {\r\n                            _h = tslib_1.__read(_nearest_line_hit(i, geometry, sx, sy, glyph.sx, glyph.sy), 2), _j = tslib_1.__read(_h[0], 2), rx = _j[0], ry = _j[1], ii = _h[1];\r\n                            data_x = glyph._x[ii];\r\n                            data_y = glyph._y[ii];\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            _k = tslib_1.__read([sx, sy], 2), rx = _k[0], ry = _k[1];\r\n                        }\r\n                    }\r\n                    var vars = {\r\n                        index: ii,\r\n                        x: x, y: y, sx: sx, sy: sy, data_x: data_x, data_y: data_y, rx: rx, ry: ry,\r\n                        indices: indices.line_indices,\r\n                        name: renderer_view.model.name,\r\n                    };\r\n                    tooltips.push([rx, ry, this._render_tooltips(ds, ii, vars)]);\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_2 && !_2.done && (_b = _1.return))\r\n                        _b.call(_1);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _3 = tslib_1.__values(indices.image_indices), _4 = _3.next(); !_4.done; _4 = _3.next()) {\r\n                    var struct = _4.value;\r\n                    var vars = {\r\n                        index: struct.index,\r\n                        x: x, y: y, sx: sx, sy: sy,\r\n                        name: renderer_view.model.name,\r\n                    };\r\n                    var rendered = this._render_tooltips(ds, struct, vars);\r\n                    tooltips.push([sx, sy, rendered]);\r\n                }\r\n            }\r\n            catch (e_7_1) {\r\n                e_7 = { error: e_7_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_4 && !_4.done && (_l = _3.return))\r\n                        _l.call(_3);\r\n                }\r\n                finally {\r\n                    if (e_7)\r\n                        throw e_7.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _5 = tslib_1.__values(indices.indices), _6 = _5.next(); !_6.done; _6 = _5.next()) {\r\n                    var i = _6.value;\r\n                    // multiglyphs set additional indices, e.g. multiline_indices for different tooltips\r\n                    if (!object_1.isEmpty(indices.multiline_indices)) {\r\n                        try {\r\n                            for (var _7 = (e_9 = void 0, tslib_1.__values(indices.multiline_indices[i.toString()])), _8 = _7.next(); !_8.done; _8 = _7.next()) { // TODO: indices.multiline_indices.get(i)\r\n                                var j = _8.value;\r\n                                var data_x = glyph._xs[i][j];\r\n                                var data_y = glyph._ys[i][j];\r\n                                var jj = j;\r\n                                var rx = void 0;\r\n                                var ry = void 0;\r\n                                switch (this.model.line_policy) {\r\n                                    case \"interp\": { // and renderer.get_interpolation_hit?\r\n                                        _p = tslib_1.__read(glyph.get_interpolation_hit(i, j, geometry), 2), data_x = _p[0], data_y = _p[1];\r\n                                        rx = xscale.compute(data_x);\r\n                                        ry = yscale.compute(data_y);\r\n                                        break;\r\n                                    }\r\n                                    case \"prev\": {\r\n                                        _q = tslib_1.__read(_line_hit(glyph.sxs[i], glyph.sys[i], j), 2), _r = tslib_1.__read(_q[0], 2), rx = _r[0], ry = _r[1], jj = _q[1];\r\n                                        break;\r\n                                    }\r\n                                    case \"next\": {\r\n                                        _s = tslib_1.__read(_line_hit(glyph.sxs[i], glyph.sys[i], j + 1), 2), _t = tslib_1.__read(_s[0], 2), rx = _t[0], ry = _t[1], jj = _s[1];\r\n                                        break;\r\n                                    }\r\n                                    case \"nearest\": {\r\n                                        _u = tslib_1.__read(_nearest_line_hit(j, geometry, sx, sy, glyph.sxs[i], glyph.sys[i]), 2), _v = tslib_1.__read(_u[0], 2), rx = _v[0], ry = _v[1], jj = _u[1];\r\n                                        data_x = glyph._xs[i][jj];\r\n                                        data_y = glyph._ys[i][jj];\r\n                                        break;\r\n                                    }\r\n                                    default:\r\n                                        throw new Error(\"should't have happened\");\r\n                                }\r\n                                var index = void 0;\r\n                                if (renderer instanceof glyph_renderer_1.GlyphRenderer)\r\n                                    index = renderer.view.convert_indices_from_subset([i])[0];\r\n                                else\r\n                                    index = i;\r\n                                var vars = {\r\n                                    index: index, x: x, y: y, sx: sx, sy: sy, data_x: data_x, data_y: data_y,\r\n                                    segment_index: jj,\r\n                                    indices: indices.multiline_indices,\r\n                                    name: renderer_view.model.name,\r\n                                };\r\n                                tooltips.push([rx, ry, this._render_tooltips(ds, index, vars)]);\r\n                            }\r\n                        }\r\n                        catch (e_9_1) {\r\n                            e_9 = { error: e_9_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (_8 && !_8.done && (_o = _7.return))\r\n                                    _o.call(_7);\r\n                            }\r\n                            finally {\r\n                                if (e_9)\r\n                                    throw e_9.error;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // handle non-multiglyphs\r\n                        var data_x = glyph._x != null ? glyph._x[i] : undefined;\r\n                        var data_y = glyph._y != null ? glyph._y[i] : undefined;\r\n                        var rx = void 0;\r\n                        var ry = void 0;\r\n                        if (this.model.point_policy == 'snap_to_data') { // and renderer.glyph.sx? and renderer.glyph.sy?\r\n                            // Pass in our screen position so we can determine which patch we're\r\n                            // over if there are discontinuous patches.\r\n                            var pt = glyph.get_anchor_point(this.model.anchor, i, [sx, sy]);\r\n                            if (pt == null)\r\n                                pt = glyph.get_anchor_point(\"center\", i, [sx, sy]);\r\n                            rx = pt.x;\r\n                            ry = pt.y;\r\n                        }\r\n                        else\r\n                            _w = tslib_1.__read([sx, sy], 2), rx = _w[0], ry = _w[1];\r\n                        var index = void 0;\r\n                        if (renderer instanceof glyph_renderer_1.GlyphRenderer)\r\n                            index = renderer.view.convert_indices_from_subset([i])[0];\r\n                        else\r\n                            index = i;\r\n                        var vars = {\r\n                            index: index, x: x, y: y, sx: sx, sy: sy, data_x: data_x, data_y: data_y,\r\n                            indices: indices.indices,\r\n                            name: renderer_view.model.name,\r\n                        };\r\n                        tooltips.push([rx, ry, this._render_tooltips(ds, index, vars)]);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_8_1) {\r\n                e_8 = { error: e_8_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_6 && !_6.done && (_m = _5.return))\r\n                        _m.call(_5);\r\n                }\r\n                finally {\r\n                    if (e_8)\r\n                        throw e_8.error;\r\n                }\r\n            }\r\n            if (tooltips.length == 0)\r\n                tooltip.clear();\r\n            else {\r\n                var content = tooltip.content;\r\n                dom_1.empty(tooltip.content);\r\n                try {\r\n                    for (var tooltips_2 = tslib_1.__values(tooltips), tooltips_2_1 = tooltips_2.next(); !tooltips_2_1.done; tooltips_2_1 = tooltips_2.next()) {\r\n                        var _9 = tslib_1.__read(tooltips_2_1.value, 3), node = _9[2];\r\n                        content.appendChild(node);\r\n                    }\r\n                }\r\n                catch (e_10_1) {\r\n                    e_10 = { error: e_10_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (tooltips_2_1 && !tooltips_2_1.done && (_z = tooltips_2.return))\r\n                            _z.call(tooltips_2);\r\n                    }\r\n                    finally {\r\n                        if (e_10)\r\n                            throw e_10.error;\r\n                    }\r\n                }\r\n                var _10 = tslib_1.__read(tooltips[tooltips.length - 1], 2), x_1 = _10[0], y_1 = _10[1];\r\n                tooltip.setv({ position: [x_1, y_1] }, { check_eq: false }); // XXX: force update\r\n            }\r\n        };\r\n        HoverToolView.prototype._emit_callback = function (geometry) {\r\n            var e_11, _a;\r\n            try {\r\n                for (var _b = tslib_1.__values(this.computed_renderers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var r = _c.value;\r\n                    var rv = this.plot_view.renderer_views.get(r);\r\n                    var x = rv.coordinates.x_scale.invert(geometry.sx);\r\n                    var y = rv.coordinates.y_scale.invert(geometry.sy);\r\n                    var index = r.data_source.inspected;\r\n                    var g = Object.assign({ x: x, y: y }, geometry);\r\n                    this.model.callback.execute(this.model, { index: index, geometry: g, renderer: r });\r\n                }\r\n            }\r\n            catch (e_11_1) {\r\n                e_11 = { error: e_11_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_11)\r\n                        throw e_11.error;\r\n                }\r\n            }\r\n        };\r\n        HoverToolView.prototype._create_template = function (tooltips) {\r\n            var e_12, _a;\r\n            var rows = dom_1.div({ style: { display: \"table\", borderSpacing: \"2px\" } });\r\n            try {\r\n                for (var tooltips_3 = tslib_1.__values(tooltips), tooltips_3_1 = tooltips_3.next(); !tooltips_3_1.done; tooltips_3_1 = tooltips_3.next()) {\r\n                    var _b = tslib_1.__read(tooltips_3_1.value, 1), label = _b[0];\r\n                    var row = dom_1.div({ style: { display: \"table-row\" } });\r\n                    rows.appendChild(row);\r\n                    var label_cell = dom_1.div({ style: { display: \"table-cell\" }, class: tooltips_1.bk_tooltip_row_label }, label.length != 0 ? label + \": \" : \"\");\r\n                    row.appendChild(label_cell);\r\n                    var value_el = dom_1.span();\r\n                    value_el.dataset.value = \"\";\r\n                    var swatch_el = dom_1.span({ class: tooltips_1.bk_tooltip_color_block }, \" \");\r\n                    swatch_el.dataset.swatch = \"\";\r\n                    dom_1.undisplay(swatch_el);\r\n                    var value_cell = dom_1.div({ style: { display: \"table-cell\" }, class: tooltips_1.bk_tooltip_row_value }, value_el, swatch_el);\r\n                    row.appendChild(value_cell);\r\n                }\r\n            }\r\n            catch (e_12_1) {\r\n                e_12 = { error: e_12_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (tooltips_3_1 && !tooltips_3_1.done && (_a = tooltips_3.return))\r\n                        _a.call(tooltips_3);\r\n                }\r\n                finally {\r\n                    if (e_12)\r\n                        throw e_12.error;\r\n                }\r\n            }\r\n            return rows;\r\n        };\r\n        HoverToolView.prototype._render_template = function (template, tooltips, ds, i, vars) {\r\n            var e_13, _a, e_14, _b;\r\n            var el = template.cloneNode(true);\r\n            var value_els = el.querySelectorAll(\"[data-value]\");\r\n            var swatch_els = el.querySelectorAll(\"[data-swatch]\");\r\n            var color_re = /\\$color(\\[.*\\])?:(\\w*)/;\r\n            try {\r\n                for (var _c = tslib_1.__values(iterator_1.enumerate(tooltips)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var _e = tslib_1.__read(_d.value, 2), _f = tslib_1.__read(_e[0], 2), value = _f[1], j = _e[1];\r\n                    var result = value.match(color_re);\r\n                    if (result != null) {\r\n                        var _g = tslib_1.__read(result, 3), _h = _g[1], opts = _h === void 0 ? \"\" : _h, colname = _g[2];\r\n                        var column = ds.get_column(colname); // XXX: change to columnar ds\r\n                        if (column == null) {\r\n                            value_els[j].textContent = colname + \" unknown\";\r\n                            continue;\r\n                        }\r\n                        var hex = opts.indexOf(\"hex\") >= 0;\r\n                        var swatch = opts.indexOf(\"swatch\") >= 0;\r\n                        var color = types_1.isNumber(i) ? column[i] : null;\r\n                        if (color == null) {\r\n                            value_els[j].textContent = \"(null)\";\r\n                            continue;\r\n                        }\r\n                        if (hex)\r\n                            color = color_1.color2hex(color);\r\n                        value_els[j].textContent = color;\r\n                        if (swatch) {\r\n                            swatch_els[j].style.backgroundColor = color;\r\n                            dom_1.display(swatch_els[j]);\r\n                        }\r\n                    }\r\n                    else {\r\n                        var content = templating_1.replace_placeholders(value.replace(\"$~\", \"$data_\"), ds, i, this.model.formatters, vars);\r\n                        if (types_1.isString(content)) {\r\n                            value_els[j].textContent = content;\r\n                        }\r\n                        else {\r\n                            try {\r\n                                for (var content_1 = (e_14 = void 0, tslib_1.__values(content)), content_1_1 = content_1.next(); !content_1_1.done; content_1_1 = content_1.next()) {\r\n                                    var el_1 = content_1_1.value;\r\n                                    value_els[j].appendChild(el_1);\r\n                                }\r\n                            }\r\n                            catch (e_14_1) {\r\n                                e_14 = { error: e_14_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (content_1_1 && !content_1_1.done && (_b = content_1.return))\r\n                                        _b.call(content_1);\r\n                                }\r\n                                finally {\r\n                                    if (e_14)\r\n                                        throw e_14.error;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_13_1) {\r\n                e_13 = { error: e_13_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return))\r\n                        _a.call(_c);\r\n                }\r\n                finally {\r\n                    if (e_13)\r\n                        throw e_13.error;\r\n                }\r\n            }\r\n            return el;\r\n        };\r\n        HoverToolView.prototype._render_tooltips = function (ds, i, vars) {\r\n            var tooltips = this.model.tooltips;\r\n            if (types_1.isString(tooltips)) {\r\n                var content = templating_1.replace_placeholders({ html: tooltips }, ds, i, this.model.formatters, vars);\r\n                return dom_1.div({}, content);\r\n            }\r\n            else if (types_1.isFunction(tooltips)) {\r\n                return tooltips(ds, vars);\r\n            }\r\n            else {\r\n                return this._render_template(this._template_el, tooltips, ds, i, vars);\r\n            }\r\n        };\r\n        return HoverToolView;\r\n    }(inspect_tool_1.InspectToolView));\r\n    exports.HoverToolView = HoverToolView;\r\n    HoverToolView.__name__ = \"HoverToolView\";\r\n    var HoverTool = /** @class */ (function (_super) {\r\n        tslib_1.__extends(HoverTool, _super);\r\n        function HoverTool(attrs) {\r\n            var _this = _super.call(this, attrs) || this;\r\n            _this.tool_name = \"Hover\";\r\n            _this.icon = icons_1.bk_tool_icon_hover;\r\n            return _this;\r\n        }\r\n        HoverTool.init_HoverTool = function () {\r\n            this.prototype.default_view = HoverToolView;\r\n            this.define({\r\n                tooltips: [p.Any, [\r\n                        [\"index\", \"$index\"],\r\n                        [\"data (x, y)\", \"($x, $y)\"],\r\n                        [\"screen (x, y)\", \"($sx, $sy)\"],\r\n                    ]],\r\n                formatters: [p.Any, {}],\r\n                renderers: [p.Any, 'auto'],\r\n                names: [p.Array, []],\r\n                mode: [p.HoverMode, 'mouse'],\r\n                muted_policy: [p.MutedPolicy, 'show'],\r\n                point_policy: [p.PointPolicy, 'snap_to_data'],\r\n                line_policy: [p.LinePolicy, 'nearest'],\r\n                show_arrow: [p.Boolean, true],\r\n                anchor: [p.Anchor, 'center'],\r\n                attachment: [p.TooltipAttachment, 'horizontal'],\r\n                callback: [p.Any],\r\n            });\r\n            this.register_alias(\"hover\", function () { return new HoverTool(); });\r\n        };\r\n        return HoverTool;\r\n    }(inspect_tool_1.InspectTool));\r\n    exports.HoverTool = HoverTool;\r\n    HoverTool.__name__ = \"HoverTool\";\r\n    HoverTool.init_HoverTool();\r\n}\r\n","/* models\\tools\\tool_proxy.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var signaling_1 = require(130) /* ../../core/signaling */;\r\n    var model_1 = require(196) /* ../../model */;\r\n    var inspect_tool_1 = require(410) /* ./inspectors/inspect_tool */;\r\n    var iterator_1 = require(418) /* ../../core/util/iterator */;\r\n    var ToolProxy = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolProxy, _super);\r\n        function ToolProxy(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ToolProxy.init_ToolProxy = function () {\r\n            this.define({\r\n                tools: [p.Array, []],\r\n                active: [p.Boolean, false],\r\n                disabled: [p.Boolean, false],\r\n            });\r\n        };\r\n        Object.defineProperty(ToolProxy.prototype, \"button_view\", {\r\n            // Operates all the tools given only one button\r\n            get: function () {\r\n                return this.tools[0].button_view;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolProxy.prototype, \"event_type\", {\r\n            get: function () {\r\n                return this.tools[0].event_type;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolProxy.prototype, \"tooltip\", {\r\n            get: function () {\r\n                return this.tools[0].tooltip;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolProxy.prototype, \"tool_name\", {\r\n            get: function () {\r\n                return this.tools[0].tool_name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolProxy.prototype, \"icon\", {\r\n            get: function () {\r\n                return this.tools[0].computed_icon;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolProxy.prototype, \"computed_icon\", {\r\n            get: function () {\r\n                return this.icon;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ToolProxy.prototype, \"toggleable\", {\r\n            get: function () {\r\n                var tool = this.tools[0];\r\n                return tool instanceof inspect_tool_1.InspectTool && tool.toggleable;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ToolProxy.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this.do = new signaling_1.Signal0(this, \"do\");\r\n        };\r\n        ToolProxy.prototype.connect_signals = function () {\r\n            var e_1, _c;\r\n            var _this = this;\r\n            _super.prototype.connect_signals.call(this);\r\n            this.connect(this.do, function () { return _this.doit(); });\r\n            this.connect(this.properties.active.change, function () { return _this.set_active(); });\r\n            var _loop_1 = function (tool) {\r\n                this_1.connect(tool.properties.active.change, function () {\r\n                    _this.active = tool.active;\r\n                });\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var _d = tslib_1.__values(this.tools), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var tool = _e.value;\r\n                    _loop_1(tool);\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_c = _d.return))\r\n                        _c.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        };\r\n        ToolProxy.prototype.doit = function () {\r\n            var e_2, _c;\r\n            try {\r\n                for (var _d = tslib_1.__values(this.tools), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var tool = _e.value;\r\n                    tool.do.emit();\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_c = _d.return))\r\n                        _c.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n        };\r\n        ToolProxy.prototype.set_active = function () {\r\n            var e_3, _c;\r\n            try {\r\n                for (var _d = tslib_1.__values(this.tools), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var tool = _e.value;\r\n                    tool.active = this.active;\r\n                }\r\n            }\r\n            catch (e_3_1) {\r\n                e_3 = { error: e_3_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_c = _d.return))\r\n                        _c.call(_d);\r\n                }\r\n                finally {\r\n                    if (e_3)\r\n                        throw e_3.error;\r\n                }\r\n            }\r\n        };\r\n        Object.defineProperty(ToolProxy.prototype, \"menu\", {\r\n            get: function () {\r\n                var e_4, _c;\r\n                var _this = this;\r\n                var menu = this.tools[0].menu;\r\n                if (menu == null)\r\n                    return null;\r\n                var items = [];\r\n                var _loop_2 = function (item, i) {\r\n                    if (item == null)\r\n                        items.push(null);\r\n                    else {\r\n                        var handler = function () {\r\n                            var e_5, _c;\r\n                            var _a, _b;\r\n                            try {\r\n                                for (var _d = (e_5 = void 0, tslib_1.__values(_this.tools)), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                                    var tool = _e.value;\r\n                                    (_b = (_a = tool.menu) === null || _a === void 0 ? void 0 : _a[i]) === null || _b === void 0 ? void 0 : _b.handler();\r\n                                }\r\n                            }\r\n                            catch (e_5_1) {\r\n                                e_5 = { error: e_5_1 };\r\n                            }\r\n                            finally {\r\n                                try {\r\n                                    if (_e && !_e.done && (_c = _d.return))\r\n                                        _c.call(_d);\r\n                                }\r\n                                finally {\r\n                                    if (e_5)\r\n                                        throw e_5.error;\r\n                                }\r\n                            }\r\n                        };\r\n                        items.push(Object.assign(Object.assign({}, item), { handler: handler }));\r\n                    }\r\n                };\r\n                try {\r\n                    for (var _d = tslib_1.__values(iterator_1.enumerate(menu)), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                        var _f = tslib_1.__read(_e.value, 2), item = _f[0], i = _f[1];\r\n                        _loop_2(item, i);\r\n                    }\r\n                }\r\n                catch (e_4_1) {\r\n                    e_4 = { error: e_4_1 };\r\n                }\r\n                finally {\r\n                    try {\r\n                        if (_e && !_e.done && (_c = _d.return))\r\n                            _c.call(_d);\r\n                    }\r\n                    finally {\r\n                        if (e_4)\r\n                            throw e_4.error;\r\n                    }\r\n                }\r\n                return items;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ToolProxy;\r\n    }(model_1.Model));\r\n    exports.ToolProxy = ToolProxy;\r\n    ToolProxy.__name__ = \"ToolProxy\";\r\n    ToolProxy.init_ToolProxy();\r\n}\r\n","/* models\\tools\\toolbar_box.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var p = tslib_1.__importStar(require(133) /* ../../core/properties */);\r\n    var array_1 = require(124) /* ../../core/util/array */;\r\n    var object_1 = require(128) /* ../../core/util/object */;\r\n    var toolbar_base_1 = require(420) /* ./toolbar_base */;\r\n    var tool_proxy_1 = require(494) /* ./tool_proxy */;\r\n    var layout_dom_1 = require(387) /* ../layouts/layout_dom */;\r\n    var layout_1 = require(327) /* ../../core/layout */;\r\n    var ProxyToolbar = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ProxyToolbar, _super);\r\n        function ProxyToolbar(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ProxyToolbar.init_ProxyToolbar = function () {\r\n            this.define({\r\n                toolbars: [p.Array, []],\r\n            });\r\n        };\r\n        ProxyToolbar.prototype.initialize = function () {\r\n            _super.prototype.initialize.call(this);\r\n            this._merge_tools();\r\n        };\r\n        ProxyToolbar.prototype._merge_tools = function () {\r\n            var e_1, _a, _b, e_2, _c, e_3, _d, e_4, _e, e_5, _f, e_6, _g, e_7, _h, e_8, _j, e_9, _k, e_10, _l, e_11, _m;\r\n            var _this = this;\r\n            // Go through all the tools on the toolbar and replace them with\r\n            // a proxy e.g. PanTool, BoxSelectTool, etc.\r\n            this._proxied_tools = [];\r\n            var inspectors = {};\r\n            var actions = {};\r\n            var gestures = {};\r\n            var new_help_tools = [];\r\n            var new_help_urls = [];\r\n            try {\r\n                for (var _o = tslib_1.__values(this.help), _p = _o.next(); !_p.done; _p = _o.next()) {\r\n                    var helptool = _p.value;\r\n                    if (!array_1.includes(new_help_urls, helptool.redirect)) {\r\n                        new_help_tools.push(helptool);\r\n                        new_help_urls.push(helptool.redirect);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_p && !_p.done && (_a = _o.return))\r\n                        _a.call(_o);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n            (_b = this._proxied_tools).push.apply(_b, tslib_1.__spread(new_help_tools));\r\n            this.help = new_help_tools;\r\n            try {\r\n                for (var _q = tslib_1.__values(object_1.entries(this.gestures)), _r = _q.next(); !_r.done; _r = _q.next()) {\r\n                    var _s = tslib_1.__read(_r.value, 2), event_type = _s[0], gesture = _s[1];\r\n                    if (!(event_type in gestures)) {\r\n                        gestures[event_type] = {};\r\n                    }\r\n                    try {\r\n                        for (var _t = (e_3 = void 0, tslib_1.__values(gesture.tools)), _u = _t.next(); !_u.done; _u = _t.next()) {\r\n                            var tool = _u.value;\r\n                            if (!(tool.type in gestures[event_type])) {\r\n                                gestures[event_type][tool.type] = [];\r\n                            }\r\n                            gestures[event_type][tool.type].push(tool);\r\n                        }\r\n                    }\r\n                    catch (e_3_1) {\r\n                        e_3 = { error: e_3_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_u && !_u.done && (_d = _t.return))\r\n                                _d.call(_t);\r\n                        }\r\n                        finally {\r\n                            if (e_3)\r\n                                throw e_3.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) {\r\n                e_2 = { error: e_2_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_r && !_r.done && (_c = _q.return))\r\n                        _c.call(_q);\r\n                }\r\n                finally {\r\n                    if (e_2)\r\n                        throw e_2.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _v = tslib_1.__values(this.inspectors), _w = _v.next(); !_w.done; _w = _v.next()) {\r\n                    var tool = _w.value;\r\n                    if (!(tool.type in inspectors)) {\r\n                        inspectors[tool.type] = [];\r\n                    }\r\n                    inspectors[tool.type].push(tool);\r\n                }\r\n            }\r\n            catch (e_4_1) {\r\n                e_4 = { error: e_4_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_w && !_w.done && (_e = _v.return))\r\n                        _e.call(_v);\r\n                }\r\n                finally {\r\n                    if (e_4)\r\n                        throw e_4.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _x = tslib_1.__values(this.actions), _y = _x.next(); !_y.done; _y = _x.next()) {\r\n                    var tool = _y.value;\r\n                    if (!(tool.type in actions)) {\r\n                        actions[tool.type] = [];\r\n                    }\r\n                    actions[tool.type].push(tool);\r\n                }\r\n            }\r\n            catch (e_5_1) {\r\n                e_5 = { error: e_5_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_y && !_y.done && (_f = _x.return))\r\n                        _f.call(_x);\r\n                }\r\n                finally {\r\n                    if (e_5)\r\n                        throw e_5.error;\r\n                }\r\n            }\r\n            // Add a proxy for each of the groups of tools.\r\n            var make_proxy = function (tools, active) {\r\n                if (active === void 0) {\r\n                    active = false;\r\n                }\r\n                var proxy = new tool_proxy_1.ToolProxy({ tools: tools, active: active });\r\n                _this._proxied_tools.push(proxy);\r\n                return proxy;\r\n            };\r\n            try {\r\n                for (var _z = tslib_1.__values(object_1.keys(gestures)), _0 = _z.next(); !_0.done; _0 = _z.next()) {\r\n                    var event_type = _0.value;\r\n                    var gesture = this.gestures[event_type];\r\n                    gesture.tools = [];\r\n                    var _loop_1 = function (tool_type) {\r\n                        var e_12, _a;\r\n                        var tools = gestures[event_type][tool_type];\r\n                        if (tools.length > 0) {\r\n                            if (event_type == 'multi') {\r\n                                var _loop_2 = function (tool) {\r\n                                    var proxy = make_proxy([tool]);\r\n                                    gesture.tools.push(proxy);\r\n                                    this_1.connect(proxy.properties.active.change, function () { return _this._active_change(proxy); });\r\n                                };\r\n                                try {\r\n                                    for (var tools_2 = (e_12 = void 0, tslib_1.__values(tools)), tools_2_1 = tools_2.next(); !tools_2_1.done; tools_2_1 = tools_2.next()) {\r\n                                        var tool = tools_2_1.value;\r\n                                        _loop_2(tool);\r\n                                    }\r\n                                }\r\n                                catch (e_12_1) {\r\n                                    e_12 = { error: e_12_1 };\r\n                                }\r\n                                finally {\r\n                                    try {\r\n                                        if (tools_2_1 && !tools_2_1.done && (_a = tools_2.return))\r\n                                            _a.call(tools_2);\r\n                                    }\r\n                                    finally {\r\n                                        if (e_12)\r\n                                            throw e_12.error;\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                var proxy_1 = make_proxy(tools);\r\n                                gesture.tools.push(proxy_1);\r\n                                this_1.connect(proxy_1.properties.active.change, function () { return _this._active_change(proxy_1); });\r\n                            }\r\n                        }\r\n                    };\r\n                    var this_1 = this;\r\n                    try {\r\n                        for (var _1 = (e_7 = void 0, tslib_1.__values(object_1.keys(gestures[event_type]))), _2 = _1.next(); !_2.done; _2 = _1.next()) {\r\n                            var tool_type = _2.value;\r\n                            _loop_1(tool_type);\r\n                        }\r\n                    }\r\n                    catch (e_7_1) {\r\n                        e_7 = { error: e_7_1 };\r\n                    }\r\n                    finally {\r\n                        try {\r\n                            if (_2 && !_2.done && (_h = _1.return))\r\n                                _h.call(_1);\r\n                        }\r\n                        finally {\r\n                            if (e_7)\r\n                                throw e_7.error;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_6_1) {\r\n                e_6 = { error: e_6_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_0 && !_0.done && (_g = _z.return))\r\n                        _g.call(_z);\r\n                }\r\n                finally {\r\n                    if (e_6)\r\n                        throw e_6.error;\r\n                }\r\n            }\r\n            this.actions = [];\r\n            try {\r\n                for (var _3 = tslib_1.__values(object_1.entries(actions)), _4 = _3.next(); !_4.done; _4 = _3.next()) {\r\n                    var _5 = tslib_1.__read(_4.value, 2), tool_type = _5[0], tools = _5[1];\r\n                    if (tool_type == 'CustomAction') {\r\n                        try {\r\n                            for (var tools_1 = (e_9 = void 0, tslib_1.__values(tools)), tools_1_1 = tools_1.next(); !tools_1_1.done; tools_1_1 = tools_1.next()) {\r\n                                var tool = tools_1_1.value;\r\n                                this.actions.push(make_proxy([tool]));\r\n                            }\r\n                        }\r\n                        catch (e_9_1) {\r\n                            e_9 = { error: e_9_1 };\r\n                        }\r\n                        finally {\r\n                            try {\r\n                                if (tools_1_1 && !tools_1_1.done && (_k = tools_1.return))\r\n                                    _k.call(tools_1);\r\n                            }\r\n                            finally {\r\n                                if (e_9)\r\n                                    throw e_9.error;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (tools.length > 0) {\r\n                        this.actions.push(make_proxy(tools)); // XXX\r\n                    }\r\n                }\r\n            }\r\n            catch (e_8_1) {\r\n                e_8 = { error: e_8_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_4 && !_4.done && (_j = _3.return))\r\n                        _j.call(_3);\r\n                }\r\n                finally {\r\n                    if (e_8)\r\n                        throw e_8.error;\r\n                }\r\n            }\r\n            this.inspectors = [];\r\n            try {\r\n                for (var _6 = tslib_1.__values(object_1.values(inspectors)), _7 = _6.next(); !_7.done; _7 = _6.next()) {\r\n                    var tools = _7.value;\r\n                    if (tools.length > 0)\r\n                        this.inspectors.push(make_proxy(tools, true)); // XXX\r\n                }\r\n            }\r\n            catch (e_10_1) {\r\n                e_10 = { error: e_10_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_7 && !_7.done && (_l = _6.return))\r\n                        _l.call(_6);\r\n                }\r\n                finally {\r\n                    if (e_10)\r\n                        throw e_10.error;\r\n                }\r\n            }\r\n            try {\r\n                for (var _8 = tslib_1.__values(object_1.entries(this.gestures)), _9 = _8.next(); !_9.done; _9 = _8.next()) {\r\n                    var _10 = tslib_1.__read(_9.value, 2), et = _10[0], gesture = _10[1];\r\n                    if (gesture.tools.length == 0)\r\n                        continue;\r\n                    gesture.tools = array_1.sort_by(gesture.tools, function (tool) { return tool.default_order; });\r\n                    if (!(et == 'pinch' || et == 'scroll' || et == 'multi'))\r\n                        gesture.tools[0].active = true;\r\n                }\r\n            }\r\n            catch (e_11_1) {\r\n                e_11 = { error: e_11_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_9 && !_9.done && (_m = _8.return))\r\n                        _m.call(_8);\r\n                }\r\n                finally {\r\n                    if (e_11)\r\n                        throw e_11.error;\r\n                }\r\n            }\r\n        };\r\n        return ProxyToolbar;\r\n    }(toolbar_base_1.ToolbarBase));\r\n    exports.ProxyToolbar = ProxyToolbar;\r\n    ProxyToolbar.__name__ = \"ProxyToolbar\";\r\n    ProxyToolbar.init_ProxyToolbar();\r\n    var ToolbarBoxView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolbarBoxView, _super);\r\n        function ToolbarBoxView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ToolbarBoxView.prototype.initialize = function () {\r\n            this.model.toolbar.toolbar_location = this.model.toolbar_location;\r\n            _super.prototype.initialize.call(this);\r\n        };\r\n        Object.defineProperty(ToolbarBoxView.prototype, \"child_models\", {\r\n            get: function () {\r\n                return [this.model.toolbar]; // XXX\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ToolbarBoxView.prototype._update_layout = function () {\r\n            this.layout = new layout_1.ContentBox(this.child_views[0].el);\r\n            var toolbar = this.model.toolbar;\r\n            if (toolbar.horizontal) {\r\n                this.layout.set_sizing({\r\n                    width_policy: \"fit\", min_width: 100, height_policy: \"fixed\",\r\n                });\r\n            }\r\n            else {\r\n                this.layout.set_sizing({\r\n                    width_policy: \"fixed\", height_policy: \"fit\", min_height: 100,\r\n                });\r\n            }\r\n        };\r\n        return ToolbarBoxView;\r\n    }(layout_dom_1.LayoutDOMView));\r\n    exports.ToolbarBoxView = ToolbarBoxView;\r\n    ToolbarBoxView.__name__ = \"ToolbarBoxView\";\r\n    var ToolbarBox = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ToolbarBox, _super);\r\n        function ToolbarBox(attrs) {\r\n            return _super.call(this, attrs) || this;\r\n        }\r\n        ToolbarBox.init_ToolbarBox = function () {\r\n            this.prototype.default_view = ToolbarBoxView;\r\n            this.define({\r\n                toolbar: [p.Instance],\r\n                toolbar_location: [p.Location, \"right\"],\r\n            });\r\n        };\r\n        return ToolbarBox;\r\n    }(layout_dom_1.LayoutDOM));\r\n    exports.ToolbarBox = ToolbarBox;\r\n    ToolbarBox.__name__ = \"ToolbarBox\";\r\n    ToolbarBox.init_ToolbarBox();\r\n}\r\n","/* embed\\standalone.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var document_1 = require(120) /* ../document */;\r\n    var dom_view_1 = require(193) /* ../core/dom_view */;\r\n    var build_views_1 = require(230) /* ../core/build_views */;\r\n    var dom_1 = require(187) /* ../core/dom */;\r\n    var dom_2 = require(497) /* ./dom */;\r\n    // A map from the root model IDs to their views.\r\n    exports.index = {};\r\n    function add_document_standalone(document, element, roots, use_for_title) {\r\n        if (roots === void 0) {\r\n            roots = [];\r\n        }\r\n        if (use_for_title === void 0) {\r\n            use_for_title = false;\r\n        }\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            function render_model(model) {\r\n                return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                    var root_el, root_models, idx, root, view;\r\n                    return tslib_1.__generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0:\r\n                                root_models = document.roots();\r\n                                idx = root_models.indexOf(model);\r\n                                root = roots[idx];\r\n                                if (root != null)\r\n                                    root_el = root;\r\n                                else if (element.classList.contains(dom_2.BOKEH_ROOT))\r\n                                    root_el = element;\r\n                                else {\r\n                                    root_el = dom_1.div({ class: dom_2.BOKEH_ROOT });\r\n                                    element.appendChild(root_el);\r\n                                }\r\n                                return [4 /*yield*/, build_views_1.build_view(model, { parent: null })];\r\n                            case 1:\r\n                                view = _a.sent();\r\n                                if (view instanceof dom_view_1.DOMView)\r\n                                    view.renderTo(root_el);\r\n                                views.set(model, view);\r\n                                exports.index[model.id] = view;\r\n                                return [2 /*return*/, view];\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            function unrender_model(model) {\r\n                var view = views.get(model);\r\n                if (view != null) {\r\n                    view.remove();\r\n                    views.delete(model);\r\n                    delete exports.index[model.id];\r\n                }\r\n            }\r\n            var views, _a, _b, model, e_1_1;\r\n            var e_1, _c;\r\n            return tslib_1.__generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        views = new Map();\r\n                        _d.label = 1;\r\n                    case 1:\r\n                        _d.trys.push([1, 6, 7, 8]);\r\n                        _a = tslib_1.__values(document.roots()), _b = _a.next();\r\n                        _d.label = 2;\r\n                    case 2:\r\n                        if (!!_b.done)\r\n                            return [3 /*break*/, 5];\r\n                        model = _b.value;\r\n                        return [4 /*yield*/, render_model(model)];\r\n                    case 3:\r\n                        _d.sent();\r\n                        _d.label = 4;\r\n                    case 4:\r\n                        _b = _a.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _d.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (_b && !_b.done && (_c = _a.return))\r\n                                _c.call(_a);\r\n                        }\r\n                        finally {\r\n                            if (e_1)\r\n                                throw e_1.error;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 8:\r\n                        if (use_for_title)\r\n                            window.document.title = document.title();\r\n                        document.on_change(function (event) {\r\n                            if (event instanceof document_1.RootAddedEvent)\r\n                                render_model(event.model);\r\n                            else if (event instanceof document_1.RootRemovedEvent)\r\n                                unrender_model(event.model);\r\n                            else if (use_for_title && event instanceof document_1.TitleChangedEvent)\r\n                                window.document.title = event.title;\r\n                        });\r\n                        return [2 /*return*/, tslib_1.__spread(views.values())];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    exports.add_document_standalone = add_document_standalone;\r\n}\r\n","/* embed\\dom.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var dom_1 = require(187) /* ../core/dom */;\r\n    var root_1 = require(388) /* ../styles/root */;\r\n    // Matches Bokeh CSS class selector. Setting all Bokeh parent element class names\r\n    // with this var prevents user configurations where css styling is unset.\r\n    exports.BOKEH_ROOT = root_1.bk_root;\r\n    function _get_element(elementid) {\r\n        var element = document.getElementById(elementid);\r\n        if (element == null)\r\n            throw new Error(\"Error rendering Bokeh model: could not find #\" + elementid + \" HTML tag\");\r\n        if (!document.body.contains(element))\r\n            throw new Error(\"Error rendering Bokeh model: element #\" + elementid + \" must be under <body>\");\r\n        // If autoload script, replace script tag with div for embedding.\r\n        if (element.tagName == \"SCRIPT\") {\r\n            var root_el = dom_1.div({ class: exports.BOKEH_ROOT });\r\n            dom_1.replaceWith(element, root_el);\r\n            element = root_el;\r\n        }\r\n        return element;\r\n    }\r\n    function _resolve_element(item) {\r\n        var elementid = item.elementid;\r\n        if (elementid != null)\r\n            return _get_element(elementid);\r\n        else\r\n            return document.body;\r\n    }\r\n    exports._resolve_element = _resolve_element;\r\n    function _resolve_root_elements(item) {\r\n        var e_1, _a;\r\n        var roots = [];\r\n        if ((item.root_ids != null) && (item.roots != null)) {\r\n            try {\r\n                for (var _b = tslib_1.__values(item.root_ids), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var root_id = _c.value;\r\n                    roots.push(_get_element(item.roots[root_id]));\r\n                }\r\n            }\r\n            catch (e_1_1) {\r\n                e_1 = { error: e_1_1 };\r\n            }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return))\r\n                        _a.call(_b);\r\n                }\r\n                finally {\r\n                    if (e_1)\r\n                        throw e_1.error;\r\n                }\r\n            }\r\n        }\r\n        return roots;\r\n    }\r\n    exports._resolve_root_elements = _resolve_root_elements;\r\n}\r\n","/* embed\\server.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var connection_1 = require(499) /* ../client/connection */;\r\n    var logging_1 = require(134) /* ../core/logging */;\r\n    var standalone_1 = require(496) /* ./standalone */;\r\n    // @internal\r\n    function _get_ws_url(app_path, absolute_url) {\r\n        var protocol = 'ws:';\r\n        if (window.location.protocol == 'https:')\r\n            protocol = 'wss:';\r\n        var loc;\r\n        if (absolute_url != null) {\r\n            loc = document.createElement('a');\r\n            loc.href = absolute_url;\r\n        }\r\n        else\r\n            loc = window.location;\r\n        if (app_path != null) {\r\n            if (app_path == \"/\")\r\n                app_path = \"\";\r\n        }\r\n        else\r\n            app_path = loc.pathname.replace(/\\/+$/, '');\r\n        return protocol + '//' + loc.host + app_path + '/ws';\r\n    }\r\n    exports._get_ws_url = _get_ws_url;\r\n    // map { websocket url to map { session id to promise of ClientSession } }\r\n    var _sessions = {};\r\n    function _get_session(websocket_url, token, args_string) {\r\n        var session_id = connection_1.parse_token(token).session_id;\r\n        if (!(websocket_url in _sessions))\r\n            _sessions[websocket_url] = {};\r\n        var subsessions = _sessions[websocket_url];\r\n        if (!(session_id in subsessions))\r\n            subsessions[session_id] = connection_1.pull_session(websocket_url, token, args_string);\r\n        return subsessions[session_id];\r\n    }\r\n    // Fill element with the roots from token\r\n    function add_document_from_session(websocket_url, token, element, roots, use_for_title) {\r\n        if (roots === void 0) {\r\n            roots = [];\r\n        }\r\n        if (use_for_title === void 0) {\r\n            use_for_title = false;\r\n        }\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var args_string, session, error_1, session_id;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        args_string = window.location.search.substr(1);\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, _get_session(websocket_url, token, args_string)];\r\n                    case 2:\r\n                        session = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        session_id = connection_1.parse_token(token).session_id;\r\n                        logging_1.logger.error(\"Failed to load Bokeh session \" + session_id + \": \" + error_1);\r\n                        throw error_1;\r\n                    case 4: return [2 /*return*/, standalone_1.add_document_standalone(session.document, element, roots, use_for_title)];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    exports.add_document_from_session = add_document_from_session;\r\n}\r\n","/* client\\connection.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var logging_1 = require(134) /* ../core/logging */;\r\n    var document_1 = require(120) /* ../document */;\r\n    var message_1 = require(500) /* ../protocol/message */;\r\n    var receiver_1 = require(501) /* ../protocol/receiver */;\r\n    var session_1 = require(502) /* ./session */;\r\n    exports.DEFAULT_SERVER_WEBSOCKET_URL = \"ws://localhost:5006/ws\";\r\n    exports.DEFAULT_TOKEN = \"eyJzZXNzaW9uX2lkIjogImRlZmF1bHQifQ\";\r\n    var _connection_count = 0;\r\n    function parse_token(token) {\r\n        var payload = token.split('.')[0];\r\n        var mod = payload.length % 4;\r\n        if (mod != 0)\r\n            payload = payload + \"=\".repeat(4 - mod);\r\n        return JSON.parse(atob(payload.replace(/_/g, '/').replace(/-/g, '+')));\r\n    }\r\n    exports.parse_token = parse_token;\r\n    var ClientConnection = /** @class */ (function () {\r\n        function ClientConnection(url, token, args_string) {\r\n            if (url === void 0) {\r\n                url = exports.DEFAULT_SERVER_WEBSOCKET_URL;\r\n            }\r\n            if (token === void 0) {\r\n                token = exports.DEFAULT_TOKEN;\r\n            }\r\n            if (args_string === void 0) {\r\n                args_string = null;\r\n            }\r\n            this.url = url;\r\n            this.token = token;\r\n            this.args_string = args_string;\r\n            this._number = _connection_count++;\r\n            this.socket = null;\r\n            this.session = null;\r\n            this.closed_permanently = false;\r\n            this._current_handler = null;\r\n            this._pending_replies = new Map();\r\n            this._pending_messages = [];\r\n            this._receiver = new receiver_1.Receiver();\r\n            this.id = parse_token(token).session_id.split('.')[0];\r\n            logging_1.logger.debug(\"Creating websocket \" + this._number + \" to '\" + this.url + \"' session '\" + this.id + \"'\");\r\n        }\r\n        ClientConnection.prototype.connect = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var versioned_url;\r\n                var _this = this;\r\n                return tslib_1.__generator(this, function (_b) {\r\n                    if (this.closed_permanently)\r\n                        throw new Error(\"Cannot connect() a closed ClientConnection\");\r\n                    if (this.socket != null)\r\n                        throw new Error(\"Already connected\");\r\n                    this._current_handler = null;\r\n                    this._pending_replies.clear();\r\n                    this._pending_messages = [];\r\n                    try {\r\n                        versioned_url = \"\" + this.url;\r\n                        if (this.args_string != null && this.args_string.length > 0)\r\n                            versioned_url += \"?\" + this.args_string;\r\n                        this.socket = new WebSocket(versioned_url, [\"bokeh\", this.token]);\r\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                                // \"arraybuffer\" gives us binary data we can look at;\r\n                                // if we just needed an opaque blob we could use \"blob\"\r\n                                _this.socket.binaryType = \"arraybuffer\";\r\n                                _this.socket.onopen = function () { return _this._on_open(resolve, reject); };\r\n                                _this.socket.onmessage = function (event) { return _this._on_message(event); };\r\n                                _this.socket.onclose = function (event) { return _this._on_close(event, reject); };\r\n                                _this.socket.onerror = function () { return _this._on_error(reject); };\r\n                            })];\r\n                    }\r\n                    catch (error) {\r\n                        logging_1.logger.error(\"websocket creation failed to url: \" + this.url);\r\n                        logging_1.logger.error(\" - \" + error);\r\n                        throw error;\r\n                    }\r\n                    return [2 /*return*/];\r\n                });\r\n            });\r\n        };\r\n        ClientConnection.prototype.close = function () {\r\n            if (!this.closed_permanently) {\r\n                logging_1.logger.debug(\"Permanently closing websocket connection \" + this._number);\r\n                this.closed_permanently = true;\r\n                if (this.socket != null)\r\n                    this.socket.close(1000, \"close method called on ClientConnection \" + this._number);\r\n                this.session._connection_closed();\r\n            }\r\n        };\r\n        ClientConnection.prototype._schedule_reconnect = function (milliseconds) {\r\n            var _this = this;\r\n            var retry = function () {\r\n                // TODO commented code below until we fix reconnection to repull\r\n                // the document when required. Otherwise, we get a lot of\r\n                // confusing errors that are causing trouble when debugging.\r\n                /*\r\n                if (this.closed_permanently) {\r\n                */\r\n                if (!_this.closed_permanently)\r\n                    logging_1.logger.info(\"Websocket connection \" + _this._number + \" disconnected, will not attempt to reconnect\");\r\n                return;\r\n                /*\r\n                } else {\r\n                  logger.debug(`Attempting to reconnect websocket ${this._number}`)\r\n                  this.connect()\r\n                }\r\n                */\r\n            };\r\n            setTimeout(retry, milliseconds);\r\n        };\r\n        ClientConnection.prototype.send = function (message) {\r\n            if (this.socket == null)\r\n                throw new Error(\"not connected so cannot send \" + message);\r\n            message.send(this.socket);\r\n        };\r\n        ClientConnection.prototype.send_with_reply = function (message) {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var reply;\r\n                var _this = this;\r\n                return tslib_1.__generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0: return [4 /*yield*/, new Promise(function (resolve, reject) {\r\n                                _this._pending_replies.set(message.msgid(), { resolve: resolve, reject: reject });\r\n                                _this.send(message);\r\n                            })];\r\n                        case 1:\r\n                            reply = _b.sent();\r\n                            if (reply.msgtype() === \"ERROR\")\r\n                                throw new Error(\"Error reply \" + reply.content.text);\r\n                            else\r\n                                return [2 /*return*/, reply];\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ClientConnection.prototype._pull_doc_json = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var message, reply;\r\n                return tslib_1.__generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            message = message_1.Message.create(\"PULL-DOC-REQ\", {});\r\n                            return [4 /*yield*/, this.send_with_reply(message)];\r\n                        case 1:\r\n                            reply = _b.sent();\r\n                            if (!(\"doc\" in reply.content))\r\n                                throw new Error(\"No 'doc' field in PULL-DOC-REPLY\");\r\n                            return [2 /*return*/, reply.content.doc];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ClientConnection.prototype._repull_session_doc = function (resolve, reject) {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var _a, doc_json, document, patch, patch_message, _b, _c, msg, error_1;\r\n                var e_1, _d;\r\n                return tslib_1.__generator(this, function (_e) {\r\n                    switch (_e.label) {\r\n                        case 0:\r\n                            logging_1.logger.debug(this.session ? \"Repulling session\" : \"Pulling session for first time\");\r\n                            _e.label = 1;\r\n                        case 1:\r\n                            _e.trys.push([1, 3, , 4]);\r\n                            return [4 /*yield*/, this._pull_doc_json()];\r\n                        case 2:\r\n                            doc_json = _e.sent();\r\n                            if (this.session == null) {\r\n                                if (this.closed_permanently) {\r\n                                    logging_1.logger.debug(\"Got new document after connection was already closed\");\r\n                                    reject(new Error(\"The connection has been closed\"));\r\n                                }\r\n                                else {\r\n                                    document = document_1.Document.from_json(doc_json);\r\n                                    patch = document_1.Document._compute_patch_since_json(doc_json, document);\r\n                                    if (patch.events.length > 0) {\r\n                                        logging_1.logger.debug(\"Sending \" + patch.events.length + \" changes from model construction back to server\");\r\n                                        patch_message = message_1.Message.create('PATCH-DOC', {}, patch);\r\n                                        this.send(patch_message);\r\n                                    }\r\n                                    this.session = new session_1.ClientSession(this, document, this.id);\r\n                                    try {\r\n                                        for (_b = tslib_1.__values(this._pending_messages), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                                            msg = _c.value;\r\n                                            this.session.handle(msg);\r\n                                        }\r\n                                    }\r\n                                    catch (e_1_1) {\r\n                                        e_1 = { error: e_1_1 };\r\n                                    }\r\n                                    finally {\r\n                                        try {\r\n                                            if (_c && !_c.done && (_d = _b.return))\r\n                                                _d.call(_b);\r\n                                        }\r\n                                        finally {\r\n                                            if (e_1)\r\n                                                throw e_1.error;\r\n                                        }\r\n                                    }\r\n                                    this._pending_messages = [];\r\n                                    logging_1.logger.debug(\"Created a new session from new pulled doc\");\r\n                                    resolve(this.session);\r\n                                }\r\n                            }\r\n                            else {\r\n                                this.session.document.replace_with_json(doc_json);\r\n                                logging_1.logger.debug(\"Updated existing session with new pulled doc\");\r\n                                // Since the session already exists, we don't need to call `resolve` again.\r\n                            }\r\n                            return [3 /*break*/, 4];\r\n                        case 3:\r\n                            error_1 = _e.sent();\r\n                            (_a = console.trace) === null || _a === void 0 ? void 0 : _a.call(console, error_1);\r\n                            logging_1.logger.error(\"Failed to repull session \" + error_1);\r\n                            reject(error_1);\r\n                            return [3 /*break*/, 4];\r\n                        case 4: return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ClientConnection.prototype._on_open = function (resolve, reject) {\r\n            var _this = this;\r\n            logging_1.logger.info(\"Websocket connection \" + this._number + \" is now open\");\r\n            this._current_handler = function (message) {\r\n                _this._awaiting_ack_handler(message, resolve, reject);\r\n            };\r\n        };\r\n        ClientConnection.prototype._on_message = function (event) {\r\n            if (this._current_handler == null)\r\n                logging_1.logger.error(\"Got a message with no current handler set\");\r\n            try {\r\n                this._receiver.consume(event.data);\r\n            }\r\n            catch (e) {\r\n                this._close_bad_protocol(e.toString());\r\n            }\r\n            var msg = this._receiver.message;\r\n            if (msg != null) {\r\n                var problem = msg.problem();\r\n                if (problem != null)\r\n                    this._close_bad_protocol(problem);\r\n                this._current_handler(msg);\r\n            }\r\n        };\r\n        ClientConnection.prototype._on_close = function (event, reject) {\r\n            logging_1.logger.info(\"Lost websocket \" + this._number + \" connection, \" + event.code + \" (\" + event.reason + \")\");\r\n            this.socket = null;\r\n            this._pending_replies.forEach(function (pr) { return pr.reject(\"Disconnected\"); });\r\n            this._pending_replies.clear();\r\n            if (!this.closed_permanently)\r\n                this._schedule_reconnect(2000);\r\n            reject(new Error(\"Lost websocket connection, \" + event.code + \" (\" + event.reason + \")\"));\r\n        };\r\n        ClientConnection.prototype._on_error = function (reject) {\r\n            logging_1.logger.debug(\"Websocket error on socket \" + this._number);\r\n            var msg = \"Could not open websocket\";\r\n            logging_1.logger.error(\"Failed to connect to Bokeh server: \" + msg);\r\n            reject(new Error(msg));\r\n        };\r\n        ClientConnection.prototype._close_bad_protocol = function (detail) {\r\n            logging_1.logger.error(\"Closing connection: \" + detail);\r\n            if (this.socket != null)\r\n                this.socket.close(1002, detail); // 1002 = protocol error\r\n        };\r\n        ClientConnection.prototype._awaiting_ack_handler = function (message, resolve, reject) {\r\n            var _this = this;\r\n            if (message.msgtype() === \"ACK\") {\r\n                this._current_handler = function (message) { return _this._steady_state_handler(message); };\r\n                // Reload any sessions\r\n                this._repull_session_doc(resolve, reject);\r\n            }\r\n            else\r\n                this._close_bad_protocol(\"First message was not an ACK\");\r\n        };\r\n        ClientConnection.prototype._steady_state_handler = function (message) {\r\n            var reqid = message.reqid();\r\n            var pr = this._pending_replies.get(reqid);\r\n            if (pr) {\r\n                this._pending_replies.delete(reqid);\r\n                pr.resolve(message);\r\n            }\r\n            else if (this.session) {\r\n                this.session.handle(message);\r\n            }\r\n            else if (message.msgtype() != 'PATCH-DOC') {\r\n                // This branch can be executed only before we get the document.\r\n                // When we get the document, all of the patches will already be incorporated.\r\n                // In general, it's not possible to apply patches received before the document,\r\n                // since they may change some models that were removed before serving the document.\r\n                this._pending_messages.push(message);\r\n            }\r\n        };\r\n        return ClientConnection;\r\n    }());\r\n    exports.ClientConnection = ClientConnection;\r\n    ClientConnection.__name__ = \"ClientConnection\";\r\n    function pull_session(url, token, args_string) {\r\n        var connection = new ClientConnection(url, token, args_string);\r\n        return connection.connect();\r\n    }\r\n    exports.pull_session = pull_session;\r\n}\r\n","/* protocol\\message.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var string_1 = require(144) /* ../core/util/string */;\r\n    var Message = /** @class */ (function () {\r\n        function Message(header, metadata, content) {\r\n            this.header = header;\r\n            this.metadata = metadata;\r\n            this.content = content;\r\n            this.buffers = new Map();\r\n        }\r\n        Message.assemble = function (header_json, metadata_json, content_json) {\r\n            var header = JSON.parse(header_json);\r\n            var metadata = JSON.parse(metadata_json);\r\n            var content = JSON.parse(content_json);\r\n            return new Message(header, metadata, content);\r\n        };\r\n        Message.prototype.assemble_buffer = function (buf_header, buf_payload) {\r\n            var nb = this.header.num_buffers != null ? this.header.num_buffers : 0;\r\n            if (nb <= this.buffers.size)\r\n                throw new Error(\"too many buffers received, expecting \" + nb);\r\n            var id = JSON.parse(buf_header).id;\r\n            this.buffers.set(id, buf_payload);\r\n        };\r\n        // not defined for BokehJS, only *receiving* buffers is supported\r\n        // add_buffer: (buf_header, buf_payload) ->\r\n        // write_buffers: (socket)\r\n        Message.create = function (msgtype, metadata, content) {\r\n            if (content === void 0) {\r\n                content = {};\r\n            }\r\n            var header = Message.create_header(msgtype);\r\n            return new Message(header, metadata, content);\r\n        };\r\n        Message.create_header = function (msgtype) {\r\n            return {\r\n                msgid: string_1.uniqueId(),\r\n                msgtype: msgtype,\r\n            };\r\n        };\r\n        Message.prototype.complete = function () {\r\n            if (this.header != null && this.metadata != null && this.content != null) {\r\n                if (this.header.num_buffers != undefined)\r\n                    return this.buffers.size == this.header.num_buffers;\r\n                else\r\n                    return true;\r\n            }\r\n            else\r\n                return false;\r\n        };\r\n        Message.prototype.send = function (socket) {\r\n            var nb = this.header.num_buffers != null ? this.header.num_buffers : 0;\r\n            if (nb > 0)\r\n                throw new Error(\"BokehJS only supports receiving buffers, not sending\");\r\n            var header_json = JSON.stringify(this.header);\r\n            var metadata_json = JSON.stringify(this.metadata);\r\n            var content_json = JSON.stringify(this.content);\r\n            socket.send(header_json);\r\n            socket.send(metadata_json);\r\n            socket.send(content_json);\r\n        };\r\n        Message.prototype.msgid = function () {\r\n            return this.header.msgid;\r\n        };\r\n        Message.prototype.msgtype = function () {\r\n            return this.header.msgtype;\r\n        };\r\n        Message.prototype.reqid = function () {\r\n            return this.header.reqid;\r\n        };\r\n        // return the reason we should close on bad protocol, if there is one\r\n        Message.prototype.problem = function () {\r\n            if (!('msgid' in this.header))\r\n                return \"No msgid in header\";\r\n            else if (!('msgtype' in this.header))\r\n                return \"No msgtype in header\";\r\n            else\r\n                return null;\r\n        };\r\n        return Message;\r\n    }());\r\n    exports.Message = Message;\r\n    Message.__name__ = \"Message\";\r\n}\r\n","/* protocol\\receiver.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var message_1 = require(500) /* ./message */;\r\n    var types_1 = require(123) /* ../core/util/types */;\r\n    var Receiver = /** @class */ (function () {\r\n        function Receiver() {\r\n            this.message = null;\r\n            this._partial = null;\r\n            this._fragments = [];\r\n            this._buf_header = null;\r\n            this._current_consumer = this._HEADER;\r\n        }\r\n        Receiver.prototype.consume = function (fragment) {\r\n            this._current_consumer(fragment);\r\n        };\r\n        Receiver.prototype._HEADER = function (fragment) {\r\n            this._assume_text(fragment);\r\n            this.message = null;\r\n            this._partial = null;\r\n            this._fragments = [fragment];\r\n            this._buf_header = null;\r\n            this._current_consumer = this._METADATA;\r\n        };\r\n        Receiver.prototype._METADATA = function (fragment) {\r\n            this._assume_text(fragment);\r\n            this._fragments.push(fragment);\r\n            this._current_consumer = this._CONTENT;\r\n        };\r\n        Receiver.prototype._CONTENT = function (fragment) {\r\n            this._assume_text(fragment);\r\n            this._fragments.push(fragment);\r\n            var _a = tslib_1.__read(this._fragments.slice(0, 3), 3), header_json = _a[0], metadata_json = _a[1], content_json = _a[2];\r\n            this._partial = message_1.Message.assemble(header_json, metadata_json, content_json);\r\n            this._check_complete();\r\n        };\r\n        Receiver.prototype._BUFFER_HEADER = function (fragment) {\r\n            this._assume_text(fragment);\r\n            this._buf_header = fragment;\r\n            this._current_consumer = this._BUFFER_PAYLOAD;\r\n        };\r\n        Receiver.prototype._BUFFER_PAYLOAD = function (fragment) {\r\n            this._assume_binary(fragment);\r\n            this._partial.assemble_buffer(this._buf_header, fragment);\r\n            this._check_complete();\r\n        };\r\n        Receiver.prototype._assume_text = function (fragment) {\r\n            if (!types_1.isString(fragment))\r\n                throw new Error(\"Expected text fragment but received binary fragment\");\r\n        };\r\n        Receiver.prototype._assume_binary = function (fragment) {\r\n            if (!(fragment instanceof ArrayBuffer))\r\n                throw new Error(\"Expected binary fragment but received text fragment\");\r\n        };\r\n        Receiver.prototype._check_complete = function () {\r\n            if (this._partial.complete()) {\r\n                this.message = this._partial;\r\n                this._current_consumer = this._HEADER;\r\n            }\r\n            else\r\n                this._current_consumer = this._BUFFER_HEADER;\r\n        };\r\n        return Receiver;\r\n    }());\r\n    exports.Receiver = Receiver;\r\n    Receiver.__name__ = \"Receiver\";\r\n}\r\n","/* client\\session.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var document_1 = require(120) /* ../document */;\r\n    var message_1 = require(500) /* ../protocol/message */;\r\n    var logging_1 = require(134) /* ../core/logging */;\r\n    var ClientSession = /** @class */ (function () {\r\n        function ClientSession(_connection, document, id) {\r\n            var _this = this;\r\n            this._connection = _connection;\r\n            this.document = document;\r\n            this.id = id;\r\n            this._document_listener = function (event) {\r\n                _this._document_changed(event);\r\n            };\r\n            this.document.on_change(this._document_listener, true);\r\n        }\r\n        ClientSession.prototype.handle = function (message) {\r\n            var msgtype = message.msgtype();\r\n            if (msgtype === 'PATCH-DOC')\r\n                this._handle_patch(message);\r\n            else if (msgtype === 'OK')\r\n                this._handle_ok(message);\r\n            else if (msgtype === 'ERROR')\r\n                this._handle_error(message);\r\n            else\r\n                logging_1.logger.debug(\"Doing nothing with message \" + message.msgtype());\r\n        };\r\n        ClientSession.prototype.close = function () {\r\n            this._connection.close();\r\n        };\r\n        /*protected*/ ClientSession.prototype._connection_closed = function () {\r\n            this.document.remove_on_change(this._document_listener);\r\n        };\r\n        // Sends a request to the server for info about the server, such as its Bokeh\r\n        // version. Returns a promise, the value of the promise is a free-form dictionary\r\n        // of server details.\r\n        ClientSession.prototype.request_server_info = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var message, reply;\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            message = message_1.Message.create('SERVER-INFO-REQ', {});\r\n                            return [4 /*yield*/, this._connection.send_with_reply(message)];\r\n                        case 1:\r\n                            reply = _a.sent();\r\n                            return [2 /*return*/, reply.content];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        // Sends some request to the server (no guarantee about which one) and returns\r\n        // a promise which is completed when the server replies. The purpose of this\r\n        // is that if you wait for the promise to be completed, you know the server\r\n        // has processed the request. This is useful when writing tests because once\r\n        // the server has processed this request it should also have processed any\r\n        // events or requests you sent previously, which means you can check for the\r\n        // results of that processing without a race condition. (This assumes the\r\n        // server processes events in sequence, which it mostly has to semantically,\r\n        // since reordering events might change the final state.)\r\n        ClientSession.prototype.force_roundtrip = function () {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.request_server_info()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        ClientSession.prototype._document_changed = function (event) {\r\n            // Filter out events that were initiated by the ClientSession itself\r\n            if (event.setter_id === this.id) // XXX: not all document events define this\r\n                return;\r\n            var events = event instanceof document_1.DocumentEventBatch ? event.events : [event];\r\n            var patch = this.document.create_json_patch(events);\r\n            // TODO (havocp) the connection may be closed here, which will\r\n            // cause this send to throw an error - need to deal with it more cleanly.\r\n            var message = message_1.Message.create('PATCH-DOC', {}, patch);\r\n            this._connection.send(message);\r\n        };\r\n        ClientSession.prototype._handle_patch = function (message) {\r\n            this.document.apply_json_patch(message.content, message.buffers, this.id);\r\n        };\r\n        ClientSession.prototype._handle_ok = function (message) {\r\n            logging_1.logger.trace(\"Unhandled OK reply to \" + message.reqid());\r\n        };\r\n        ClientSession.prototype._handle_error = function (message) {\r\n            logging_1.logger.error(\"Unhandled ERROR reply to \" + message.reqid() + \": \" + message.content.text);\r\n        };\r\n        return ClientSession;\r\n    }());\r\n    exports.ClientSession = ClientSession;\r\n    ClientSession.__name__ = \"ClientSession\";\r\n}\r\n","/* embed\\notebook.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    var __asyncValues = (this && this.__asyncValues) || function (o) {\r\n        if (!Symbol.asyncIterator)\r\n            throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function (v) { resolve({ value: v, done: d }); }, reject); }\r\n    };\r\n    var document_1 = require(120) /* ../document */;\r\n    var receiver_1 = require(501) /* ../protocol/receiver */;\r\n    var logging_1 = require(134) /* ../core/logging */;\r\n    var dom_1 = require(187) /* ../core/dom */;\r\n    var object_1 = require(128) /* ../core/util/object */;\r\n    var standalone_1 = require(496) /* ./standalone */;\r\n    var dom_2 = require(497) /* ./dom */;\r\n    var root_css_1 = tslib_1.__importDefault(require(188) /* ../styles/root.css */);\r\n    var logo_css_1 = tslib_1.__importDefault(require(426) /* ../styles/logo.css */);\r\n    var notebook_css_1 = tslib_1.__importDefault(require(504) /* ../styles/notebook.css */);\r\n    dom_1.stylesheet.append(root_css_1.default);\r\n    dom_1.stylesheet.append(logo_css_1.default);\r\n    dom_1.stylesheet.append(notebook_css_1.default);\r\n    // This exists to allow the @bokeh/jupyter_bokeh extension to store the\r\n    // notebook kernel so that _init_comms can register the comms target.\r\n    // This has to be available at Bokeh.embed.kernels in JupyterLab.\r\n    exports.kernels = {};\r\n    function _handle_notebook_comms(receiver, comm_msg) {\r\n        if (comm_msg.buffers.length > 0)\r\n            receiver.consume(comm_msg.buffers[0].buffer);\r\n        else\r\n            receiver.consume(comm_msg.content.data);\r\n        var msg = receiver.message;\r\n        if (msg != null)\r\n            this.apply_json_patch(msg.content, msg.buffers);\r\n    }\r\n    function _init_comms(target, doc) {\r\n        var _this = this;\r\n        if (typeof Jupyter !== 'undefined' && Jupyter.notebook.kernel != null) {\r\n            logging_1.logger.info(\"Registering Jupyter comms for target \" + target);\r\n            var comm_manager = Jupyter.notebook.kernel.comm_manager;\r\n            try {\r\n                comm_manager.register_target(target, function (comm) {\r\n                    logging_1.logger.info(\"Registering Jupyter comms for target \" + target);\r\n                    var r = new receiver_1.Receiver();\r\n                    comm.on_msg(_handle_notebook_comms.bind(doc, r));\r\n                });\r\n            }\r\n            catch (e) {\r\n                logging_1.logger.warn(\"Jupyter comms failed to register. push_notebook() will not function. (exception reported: \" + e + \")\");\r\n            }\r\n        }\r\n        else if (doc.roots()[0].id in exports.kernels) {\r\n            logging_1.logger.info(\"Registering JupyterLab comms for target \" + target);\r\n            var kernel = exports.kernels[doc.roots()[0].id];\r\n            try {\r\n                kernel.registerCommTarget(target, function (comm) {\r\n                    logging_1.logger.info(\"Registering JupyterLab comms for target \" + target);\r\n                    var r = new receiver_1.Receiver();\r\n                    comm.onMsg = _handle_notebook_comms.bind(doc, r);\r\n                });\r\n            }\r\n            catch (e) {\r\n                logging_1.logger.warn(\"Jupyter comms failed to register. push_notebook() will not function. (exception reported: \" + e + \")\");\r\n            }\r\n        }\r\n        else if (typeof google != 'undefined' && google.colab.kernel != null) {\r\n            logging_1.logger.info(\"Registering Google Colab comms for target \" + target);\r\n            var comm_manager = google.colab.kernel.comms;\r\n            try {\r\n                comm_manager.registerTarget(target, function (comm) {\r\n                    return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                        var e_1, _a, _b, r, _c, _d, message, content, buffers, _e, _f, buffer, msg, e_1_1_1;\r\n                        var e_2, _g;\r\n                        return tslib_1.__generator(this, function (_h) {\r\n                            switch (_h.label) {\r\n                                case 0:\r\n                                    logging_1.logger.info(\"Registering Google Colab comms for target \" + target);\r\n                                    r = new receiver_1.Receiver();\r\n                                    _h.label = 1;\r\n                                case 1:\r\n                                    _h.trys.push([1, 6, 7, 12]);\r\n                                    _c = __asyncValues(comm.messages);\r\n                                    _h.label = 2;\r\n                                case 2: return [4 /*yield*/, _c.next()];\r\n                                case 3:\r\n                                    if (!(_d = _h.sent(), !_d.done))\r\n                                        return [3 /*break*/, 5];\r\n                                    message = _d.value;\r\n                                    content = { data: message.data };\r\n                                    buffers = [];\r\n                                    try {\r\n                                        for (_e = (e_2 = void 0, tslib_1.__values((_b = message.buffers) !== null && _b !== void 0 ? _b : [])), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                                            buffer = _f.value;\r\n                                            buffers.push(new DataView(buffer));\r\n                                        }\r\n                                    }\r\n                                    catch (e_2_1) {\r\n                                        e_2 = { error: e_2_1 };\r\n                                    }\r\n                                    finally {\r\n                                        try {\r\n                                            if (_f && !_f.done && (_g = _e.return))\r\n                                                _g.call(_e);\r\n                                        }\r\n                                        finally {\r\n                                            if (e_2)\r\n                                                throw e_2.error;\r\n                                        }\r\n                                    }\r\n                                    msg = { content: content, buffers: buffers };\r\n                                    _handle_notebook_comms.bind(doc)(r, msg);\r\n                                    _h.label = 4;\r\n                                case 4: return [3 /*break*/, 2];\r\n                                case 5: return [3 /*break*/, 12];\r\n                                case 6:\r\n                                    e_1_1_1 = _h.sent();\r\n                                    e_1 = { error: e_1_1_1 };\r\n                                    return [3 /*break*/, 12];\r\n                                case 7:\r\n                                    _h.trys.push([7, , 10, 11]);\r\n                                    if (!(_d && !_d.done && (_a = _c.return)))\r\n                                        return [3 /*break*/, 9];\r\n                                    return [4 /*yield*/, _a.call(_c)];\r\n                                case 8:\r\n                                    _h.sent();\r\n                                    _h.label = 9;\r\n                                case 9: return [3 /*break*/, 11];\r\n                                case 10:\r\n                                    if (e_1)\r\n                                        throw e_1.error;\r\n                                    return [7 /*endfinally*/];\r\n                                case 11: return [7 /*endfinally*/];\r\n                                case 12: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            catch (e) {\r\n                logging_1.logger.warn(\"Google Colab comms failed to register. push_notebook() will not function. (exception reported: \" + e + \")\");\r\n            }\r\n        }\r\n        else {\r\n            console.warn(\"Jupyter notebooks comms not available. push_notebook() will not function. If running JupyterLab ensure the latest @bokeh/jupyter_bokeh extension is installed. In an exported notebook this warning is expected.\");\r\n        }\r\n    }\r\n    function embed_items_notebook(docs_json, render_items) {\r\n        var e_3, _e;\r\n        if (object_1.size(docs_json) != 1)\r\n            throw new Error(\"embed_items_notebook expects exactly one document in docs_json\");\r\n        var document = document_1.Document.from_json(object_1.values(docs_json)[0]);\r\n        try {\r\n            for (var render_items_1 = tslib_1.__values(render_items), render_items_1_1 = render_items_1.next(); !render_items_1_1.done; render_items_1_1 = render_items_1.next()) {\r\n                var item = render_items_1_1.value;\r\n                if (item.notebook_comms_target != null)\r\n                    _init_comms(item.notebook_comms_target, document);\r\n                var element = dom_2._resolve_element(item);\r\n                var roots = dom_2._resolve_root_elements(item);\r\n                standalone_1.add_document_standalone(document, element, roots);\r\n            }\r\n        }\r\n        catch (e_3_1) {\r\n            e_3 = { error: e_3_1 };\r\n        }\r\n        finally {\r\n            try {\r\n                if (render_items_1_1 && !render_items_1_1.done && (_e = render_items_1.return))\r\n                    _e.call(render_items_1);\r\n            }\r\n            finally {\r\n                if (e_3)\r\n                    throw e_3.error;\r\n            }\r\n        }\r\n    }\r\n    exports.embed_items_notebook = embed_items_notebook;\r\n}\r\n","/* styles\\notebook.css.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var css = \"\\n/* notebook specific tweaks so no black outline and matching padding\\n/* can't be wrapped inside bk-root. here are the offending jupyter lines:\\n/* https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/less/renderedhtml.less#L59-L76 */\\n.rendered_html .bk-root .bk-tooltip table,\\n.rendered_html .bk-root .bk-tooltip tr,\\n.rendered_html .bk-root .bk-tooltip th,\\n.rendered_html .bk-root .bk-tooltip td {\\n  border: none;\\n  padding: 1px;\\n}\\n\";\r\n    exports.default = css;\r\n}\r\n","/* protocol\\index.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tslib_1 = require(1) /* tslib */;\r\n    tslib_1.__exportStar(require(500) /* ./message */, exports);\r\n    tslib_1.__exportStar(require(501) /* ./receiver */, exports);\r\n}\r\n","/* testing.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    // Just a dumb key/value record for collecting arbitrary info for tests\r\n    exports.results = {};\r\n    // Selenium has race conditions that make it difficult to read out the\r\n    // results structure. This function deletes/creates a div that can act as\r\n    // a semaphore. Tests should wait for the previous div to be stale, then\r\n    // find the new div. At that point the results should be available\r\n    function update_test_div() {\r\n        var body = document.getElementsByTagName(\"body\")[0];\r\n        var col = document.getElementsByClassName(\"bokeh-test-div\");\r\n        if (col.length == 1) {\r\n            body.removeChild(col[0]);\r\n            delete col[0];\r\n        }\r\n        var box = document.createElement(\"div\");\r\n        box.classList.add(\"bokeh-test-div\");\r\n        box.style.display = \"none\";\r\n        body.insertBefore(box, body.firstChild);\r\n    }\r\n    function init() {\r\n        update_test_div();\r\n    }\r\n    exports.init = init;\r\n    function record0(key, value) {\r\n        exports.results[key] = value;\r\n    }\r\n    exports.record0 = record0;\r\n    function record(key, value) {\r\n        exports.results[key] = value;\r\n        update_test_div();\r\n    }\r\n    exports.record = record;\r\n    function count(key) {\r\n        if (exports.results[key] == undefined)\r\n            exports.results[key] = 0;\r\n        exports.results[key] += 1;\r\n        update_test_div();\r\n    }\r\n    exports.count = count;\r\n}\r\n","/* safely.js */ function _(require, module, exports) {\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    // Keep this code as terse and as close to vanila JS as possible. If we\r\n    // arrived here, it means we should trust no one and need to act properly.\r\n    function _burst_into_flames(error) {\r\n        // Make box\r\n        var box = document.createElement(\"div\");\r\n        box.style.backgroundColor = \"#f2dede\";\r\n        box.style.border = \"1px solid #a94442\";\r\n        box.style.borderRadius = \"4px\";\r\n        box.style.display = \"inline-block\";\r\n        box.style.fontFamily = \"sans-serif\";\r\n        box.style.marginTop = \"5px\";\r\n        box.style.minWidth = \"200px\";\r\n        box.style.padding = \"5px 5px 5px 10px\";\r\n        box.classList.add(\"bokeh-error-box-into-flames\");\r\n        // Make button\r\n        var button = document.createElement(\"span\");\r\n        button.style.backgroundColor = \"#a94442\";\r\n        button.style.borderRadius = \"0px 4px 0px 0px\";\r\n        button.style.color = \"white\";\r\n        button.style.cursor = \"pointer\";\r\n        button.style.cssFloat = \"right\";\r\n        button.style.fontSize = \"0.8em\";\r\n        button.style.margin = \"-6px -6px 0px 0px\";\r\n        button.style.padding = \"2px 5px 4px 5px\";\r\n        button.title = \"close\";\r\n        button.setAttribute(\"aria-label\", \"close\");\r\n        button.appendChild(document.createTextNode(\"x\"));\r\n        button.addEventListener(\"click\", function () { return body.removeChild(box); });\r\n        // Make title\r\n        var title = document.createElement(\"h3\");\r\n        title.style.color = \"#a94442\";\r\n        title.style.margin = \"8px 0px 0px 0px\";\r\n        title.style.padding = \"0px\";\r\n        title.appendChild(document.createTextNode(\"Bokeh Error\"));\r\n        // Make message\r\n        var message = document.createElement(\"pre\");\r\n        message.style.whiteSpace = \"unset\";\r\n        message.style.overflowX = \"auto\";\r\n        var text = error instanceof Error ? error.message : error;\r\n        message.appendChild(document.createTextNode(text));\r\n        // Add pieces to box\r\n        box.appendChild(button);\r\n        box.appendChild(title);\r\n        box.appendChild(message);\r\n        // Put box in doc\r\n        var body = document.getElementsByTagName(\"body\")[0];\r\n        body.insertBefore(box, body.firstChild);\r\n    }\r\n    function safely(fn, silent) {\r\n        if (silent === void 0) {\r\n            silent = false;\r\n        }\r\n        try {\r\n            return fn();\r\n        }\r\n        catch (error) {\r\n            _burst_into_flames(error);\r\n            if (!silent)\r\n                throw error;\r\n            else\r\n                return;\r\n        }\r\n    }\r\n    exports.safely = safely;\r\n}\r\n"]}